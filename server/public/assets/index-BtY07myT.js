var L7=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var JT=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var Xe=(e,t,n)=>(JT(e,t,"read from private field"),n?n.call(e):t.get(e)),cn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},rn=(e,t,n,r)=>(JT(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var by=(e,t,n,r)=>({set _(i){rn(e,t,i,n)},get _(){return Xe(e,t,r)}}),En=(e,t,n)=>(JT(e,t,"access private method"),n);var rye=L7((Fl,Bl)=>{function X5(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Y5={exports:{}},LE={},J5={exports:{}},vr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx=Symbol.for("react.element"),A7=Symbol.for("react.portal"),O7=Symbol.for("react.fragment"),k7=Symbol.for("react.strict_mode"),R7=Symbol.for("react.profiler"),M7=Symbol.for("react.provider"),N7=Symbol.for("react.context"),D7=Symbol.for("react.forward_ref"),z7=Symbol.for("react.suspense"),F7=Symbol.for("react.memo"),B7=Symbol.for("react.lazy"),uR=Symbol.iterator;function j7(e){return e===null||typeof e!="object"?null:(e=uR&&e[uR]||e["@@iterator"],typeof e=="function"?e:null)}var Q5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e4=Object.assign,t4={};function Q_(e,t,n){this.props=e,this.context=t,this.refs=t4,this.updater=n||Q5}Q_.prototype.isReactComponent={};Q_.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Q_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function n4(){}n4.prototype=Q_.prototype;function ZP(e,t,n){this.props=e,this.context=t,this.refs=t4,this.updater=n||Q5}var WP=ZP.prototype=new n4;WP.constructor=ZP;e4(WP,Q_.prototype);WP.isPureReactComponent=!0;var cR=Array.isArray,r4=Object.prototype.hasOwnProperty,KP={current:null},i4={key:!0,ref:!0,__self:!0,__source:!0};function o4(e,t,n){var r,i={},o=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(o=""+t.key),t)r4.call(t,r)&&!i4.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var p=Array(l),g=0;g<l;g++)p[g]=arguments[g+2];i.children=p}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:lx,type:e,key:o,ref:u,props:i,_owner:KP.current}}function $7(e,t){return{$$typeof:lx,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function XP(e){return typeof e=="object"&&e!==null&&e.$$typeof===lx}function U7(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var hR=/\/+/g;function QT(e,t){return typeof e=="object"&&e!==null&&e.key!=null?U7(""+e.key):t.toString(36)}function Wb(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case lx:case A7:u=!0}}if(u)return u=e,i=i(u),e=r===""?"."+QT(u,0):r,cR(i)?(n="",e!=null&&(n=e.replace(hR,"$&/")+"/"),Wb(i,t,n,"",function(g){return g})):i!=null&&(XP(i)&&(i=$7(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(hR,"$&/")+"/")+e)),t.push(i)),1;if(u=0,r=r===""?".":r+":",cR(e))for(var l=0;l<e.length;l++){o=e[l];var p=r+QT(o,l);u+=Wb(o,t,n,p,i)}else if(p=j7(e),typeof p=="function")for(e=p.call(e),l=0;!(o=e.next()).done;)o=o.value,p=r+QT(o,l++),u+=Wb(o,t,n,p,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function eb(e,t,n){if(e==null)return e;var r=[],i=0;return Wb(e,r,"","",function(o){return t.call(n,o,i++)}),r}function V7(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fa={current:null},Kb={transition:null},q7={ReactCurrentDispatcher:Fa,ReactCurrentBatchConfig:Kb,ReactCurrentOwner:KP};vr.Children={map:eb,forEach:function(e,t,n){eb(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return eb(e,function(){t++}),t},toArray:function(e){return eb(e,function(t){return t})||[]},only:function(e){if(!XP(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};vr.Component=Q_;vr.Fragment=O7;vr.Profiler=R7;vr.PureComponent=ZP;vr.StrictMode=k7;vr.Suspense=z7;vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q7;vr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=e4({},e.props),i=e.key,o=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,u=KP.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(p in t)r4.call(t,p)&&!i4.hasOwnProperty(p)&&(r[p]=t[p]===void 0&&l!==void 0?l[p]:t[p])}var p=arguments.length-2;if(p===1)r.children=n;else if(1<p){l=Array(p);for(var g=0;g<p;g++)l[g]=arguments[g+2];r.children=l}return{$$typeof:lx,type:e.type,key:i,ref:o,props:r,_owner:u}};vr.createContext=function(e){return e={$$typeof:N7,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:M7,_context:e},e.Consumer=e};vr.createElement=o4;vr.createFactory=function(e){var t=o4.bind(null,e);return t.type=e,t};vr.createRef=function(){return{current:null}};vr.forwardRef=function(e){return{$$typeof:D7,render:e}};vr.isValidElement=XP;vr.lazy=function(e){return{$$typeof:B7,_payload:{_status:-1,_result:e},_init:V7}};vr.memo=function(e,t){return{$$typeof:F7,type:e,compare:t===void 0?null:t}};vr.startTransition=function(e){var t=Kb.transition;Kb.transition={};try{e()}finally{Kb.transition=t}};vr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};vr.useCallback=function(e,t){return Fa.current.useCallback(e,t)};vr.useContext=function(e){return Fa.current.useContext(e)};vr.useDebugValue=function(){};vr.useDeferredValue=function(e){return Fa.current.useDeferredValue(e)};vr.useEffect=function(e,t){return Fa.current.useEffect(e,t)};vr.useId=function(){return Fa.current.useId()};vr.useImperativeHandle=function(e,t,n){return Fa.current.useImperativeHandle(e,t,n)};vr.useInsertionEffect=function(e,t){return Fa.current.useInsertionEffect(e,t)};vr.useLayoutEffect=function(e,t){return Fa.current.useLayoutEffect(e,t)};vr.useMemo=function(e,t){return Fa.current.useMemo(e,t)};vr.useReducer=function(e,t,n){return Fa.current.useReducer(e,t,n)};vr.useRef=function(e){return Fa.current.useRef(e)};vr.useState=function(e){return Fa.current.useState(e)};vr.useSyncExternalStore=function(e,t,n){return Fa.current.useSyncExternalStore(e,t,n)};vr.useTransition=function(){return Fa.current.useTransition()};vr.version="18.2.0";J5.exports=vr;var Ue=J5.exports;const Bt=bd(Ue),lC=X5({__proto__:null,default:Bt},[Ue]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G7=Ue,H7=Symbol.for("react.element"),Z7=Symbol.for("react.fragment"),W7=Object.prototype.hasOwnProperty,K7=G7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X7={key:!0,ref:!0,__self:!0,__source:!0};function s4(e,t,n){var r,i={},o=null,u=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)W7.call(t,r)&&!X7.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:H7,type:e,key:o,ref:u,props:i,_owner:K7.current}}LE.Fragment=Z7;LE.jsx=s4;LE.jsxs=s4;Y5.exports=LE;var ae=Y5.exports,uC={},a4={exports:{}},Ql={},l4={exports:{}},u4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(De,Ae){var ve=De.length;De.push(Ae);e:for(;0<ve;){var he=ve-1>>>1,xe=De[he];if(0<i(xe,Ae))De[he]=Ae,De[ve]=xe,ve=he;else break e}}function n(De){return De.length===0?null:De[0]}function r(De){if(De.length===0)return null;var Ae=De[0],ve=De.pop();if(ve!==Ae){De[0]=ve;e:for(var he=0,xe=De.length,Ee=xe>>>1;he<Ee;){var Ge=2*(he+1)-1,$e=De[Ge],be=Ge+1,He=De[be];if(0>i($e,ve))be<xe&&0>i(He,$e)?(De[he]=He,De[be]=ve,he=be):(De[he]=$e,De[Ge]=ve,he=Ge);else if(be<xe&&0>i(He,ve))De[he]=He,De[be]=ve,he=be;else break e}}return Ae}function i(De,Ae){var ve=De.sortIndex-Ae.sortIndex;return ve!==0?ve:De.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,l=u.now();e.unstable_now=function(){return u.now()-l}}var p=[],g=[],x=1,y=null,_=3,T=!1,P=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(De){for(var Ae=n(g);Ae!==null;){if(Ae.callback===null)r(g);else if(Ae.startTime<=De)r(g),Ae.sortIndex=Ae.expirationTime,t(p,Ae);else break;Ae=n(g)}}function D(De){if(A=!1,z(De),!P)if(n(p)!==null)P=!0,Ne(U);else{var Ae=n(g);Ae!==null&&Be(D,Ae.startTime-De)}}function U(De,Ae){P=!1,A&&(A=!1,k(H),H=-1),T=!0;var ve=_;try{for(z(Ae),y=n(p);y!==null&&(!(y.expirationTime>Ae)||De&&!X());){var he=y.callback;if(typeof he=="function"){y.callback=null,_=y.priorityLevel;var xe=he(y.expirationTime<=Ae);Ae=e.unstable_now(),typeof xe=="function"?y.callback=xe:y===n(p)&&r(p),z(Ae)}else r(p);y=n(p)}if(y!==null)var Ee=!0;else{var Ge=n(g);Ge!==null&&Be(D,Ge.startTime-Ae),Ee=!1}return Ee}finally{y=null,_=ve,T=!1}}var V=!1,G=null,H=-1,J=5,Y=-1;function X(){return!(e.unstable_now()-Y<J)}function ee(){if(G!==null){var De=e.unstable_now();Y=De;var Ae=!0;try{Ae=G(!0,De)}finally{Ae?ce():(V=!1,G=null)}}else V=!1}var ce;if(typeof R=="function")ce=function(){R(ee)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,we=oe.port2;oe.port1.onmessage=ee,ce=function(){we.postMessage(null)}}else ce=function(){M(ee,0)};function Ne(De){G=De,V||(V=!0,ce())}function Be(De,Ae){H=M(function(){De(e.unstable_now())},Ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(De){De.callback=null},e.unstable_continueExecution=function(){P||T||(P=!0,Ne(U))},e.unstable_forceFrameRate=function(De){0>De||125<De?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<De?Math.floor(1e3/De):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return n(p)},e.unstable_next=function(De){switch(_){case 1:case 2:case 3:var Ae=3;break;default:Ae=_}var ve=_;_=Ae;try{return De()}finally{_=ve}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(De,Ae){switch(De){case 1:case 2:case 3:case 4:case 5:break;default:De=3}var ve=_;_=De;try{return Ae()}finally{_=ve}},e.unstable_scheduleCallback=function(De,Ae,ve){var he=e.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?he+ve:he):ve=he,De){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ve+xe,De={id:x++,callback:Ae,priorityLevel:De,startTime:ve,expirationTime:xe,sortIndex:-1},ve>he?(De.sortIndex=ve,t(g,De),n(p)===null&&De===n(g)&&(A?(k(H),H=-1):A=!0,Be(D,ve-he))):(De.sortIndex=xe,t(p,De),P||T||(P=!0,Ne(U))),De},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(De){var Ae=_;return function(){var ve=_;_=Ae;try{return De.apply(this,arguments)}finally{_=ve}}}})(u4);l4.exports=u4;var Y7=l4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c4=Ue,Vl=Y7;function jt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h4=new Set,Y0={};function zg(e,t){y_(e,t),y_(e+"Capture",t)}function y_(e,t){for(Y0[e]=t,e=0;e<t.length;e++)h4.add(t[e])}var od=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cC=Object.prototype.hasOwnProperty,J7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fR={},dR={};function Q7(e){return cC.call(dR,e)?!0:cC.call(fR,e)?!1:J7.test(e)?dR[e]=!0:(fR[e]=!0,!1)}function e9(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function t9(e,t,n,r){if(t===null||typeof t>"u"||e9(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ba(e,t,n,r,i,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var js={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){js[e]=new Ba(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];js[t]=new Ba(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){js[e]=new Ba(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){js[e]=new Ba(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){js[e]=new Ba(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){js[e]=new Ba(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){js[e]=new Ba(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){js[e]=new Ba(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){js[e]=new Ba(e,5,!1,e.toLowerCase(),null,!1,!1)});var YP=/[\-:]([a-z])/g;function JP(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(YP,JP);js[t]=new Ba(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(YP,JP);js[t]=new Ba(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(YP,JP);js[t]=new Ba(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){js[e]=new Ba(e,1,!1,e.toLowerCase(),null,!1,!1)});js.xlinkHref=new Ba("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){js[e]=new Ba(e,1,!1,e.toLowerCase(),null,!0,!0)});function QP(e,t,n,r){var i=js.hasOwnProperty(t)?js[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t9(t,n,i,r)&&(n=null),r||i===null?Q7(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var wd=c4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tb=Symbol.for("react.element"),Ay=Symbol.for("react.portal"),Oy=Symbol.for("react.fragment"),eL=Symbol.for("react.strict_mode"),hC=Symbol.for("react.profiler"),f4=Symbol.for("react.provider"),d4=Symbol.for("react.context"),tL=Symbol.for("react.forward_ref"),fC=Symbol.for("react.suspense"),dC=Symbol.for("react.suspense_list"),nL=Symbol.for("react.memo"),sp=Symbol.for("react.lazy"),p4=Symbol.for("react.offscreen"),pR=Symbol.iterator;function Xv(e){return e===null||typeof e!="object"?null:(e=pR&&e[pR]||e["@@iterator"],typeof e=="function"?e:null)}var Ki=Object.assign,e2;function _0(e){if(e2===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);e2=t&&t[1]||""}return`
`+e2+e}var t2=!1;function n2(e,t){if(!e||t2)return"";t2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var r=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){r=g}e.call(t.prototype)}else{try{throw Error()}catch(g){r=g}e()}}catch(g){if(g&&r&&typeof g.stack=="string"){for(var i=g.stack.split(`
`),o=r.stack.split(`
`),u=i.length-1,l=o.length-1;1<=u&&0<=l&&i[u]!==o[l];)l--;for(;1<=u&&0<=l;u--,l--)if(i[u]!==o[l]){if(u!==1||l!==1)do if(u--,l--,0>l||i[u]!==o[l]){var p=`
`+i[u].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=u&&0<=l);break}}}finally{t2=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_0(e):""}function n9(e){switch(e.tag){case 5:return _0(e.type);case 16:return _0("Lazy");case 13:return _0("Suspense");case 19:return _0("SuspenseList");case 0:case 2:case 15:return e=n2(e.type,!1),e;case 11:return e=n2(e.type.render,!1),e;case 1:return e=n2(e.type,!0),e;default:return""}}function pC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oy:return"Fragment";case Ay:return"Portal";case hC:return"Profiler";case eL:return"StrictMode";case fC:return"Suspense";case dC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case d4:return(e.displayName||"Context")+".Consumer";case f4:return(e._context.displayName||"Context")+".Provider";case tL:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nL:return t=e.displayName||null,t!==null?t:pC(e.type)||"Memo";case sp:t=e._payload,e=e._init;try{return pC(e(t))}catch{}}return null}function r9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pC(t);case 8:return t===eL?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Np(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function m4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function i9(e){var t=m4(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nb(e){e._valueTracker||(e._valueTracker=i9(e))}function g4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=m4(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Sw(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function mC(e,t){var n=t.checked;return Ki({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function mR(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Np(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function y4(e,t){t=t.checked,t!=null&&QP(e,"checked",t,!1)}function gC(e,t){y4(e,t);var n=Np(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yC(e,t.type,n):t.hasOwnProperty("defaultValue")&&yC(e,t.type,Np(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gR(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function yC(e,t,n){(t!=="number"||Sw(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var v0=Array.isArray;function Hy(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Np(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function _C(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(jt(91));return Ki({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yR(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(jt(92));if(v0(n)){if(1<n.length)throw Error(jt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Np(n)}}function _4(e,t){var n=Np(t.value),r=Np(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _R(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function v4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vC(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?v4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rb,x4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rb=rb||document.createElement("div"),rb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function J0(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var k0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o9=["Webkit","ms","Moz","O"];Object.keys(k0).forEach(function(e){o9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),k0[t]=k0[e]})});function b4(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||k0.hasOwnProperty(e)&&k0[e]?(""+t).trim():t+"px"}function w4(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=b4(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var s9=Ki({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xC(e,t){if(t){if(s9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(jt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(jt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(jt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(jt(62))}}function bC(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wC=null;function rL(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var EC=null,Zy=null,Wy=null;function vR(e){if(e=hx(e)){if(typeof EC!="function")throw Error(jt(280));var t=e.stateNode;t&&(t=ME(t),EC(e.stateNode,e.type,t))}}function E4(e){Zy?Wy?Wy.push(e):Wy=[e]:Zy=e}function S4(){if(Zy){var e=Zy,t=Wy;if(Wy=Zy=null,vR(e),t)for(e=0;e<t.length;e++)vR(t[e])}}function T4(e,t){return e(t)}function C4(){}var r2=!1;function I4(e,t,n){if(r2)return e(t,n);r2=!0;try{return T4(e,t,n)}finally{r2=!1,(Zy!==null||Wy!==null)&&(C4(),S4())}}function Q0(e,t){var n=e.stateNode;if(n===null)return null;var r=ME(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(jt(231,t,typeof n));return n}var SC=!1;if(od)try{var Yv={};Object.defineProperty(Yv,"passive",{get:function(){SC=!0}}),window.addEventListener("test",Yv,Yv),window.removeEventListener("test",Yv,Yv)}catch{SC=!1}function a9(e,t,n,r,i,o,u,l,p){var g=Array.prototype.slice.call(arguments,3);try{t.apply(n,g)}catch(x){this.onError(x)}}var R0=!1,Tw=null,Cw=!1,TC=null,l9={onError:function(e){R0=!0,Tw=e}};function u9(e,t,n,r,i,o,u,l,p){R0=!1,Tw=null,a9.apply(l9,arguments)}function c9(e,t,n,r,i,o,u,l,p){if(u9.apply(this,arguments),R0){if(R0){var g=Tw;R0=!1,Tw=null}else throw Error(jt(198));Cw||(Cw=!0,TC=g)}}function Fg(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function P4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xR(e){if(Fg(e)!==e)throw Error(jt(188))}function h9(e){var t=e.alternate;if(!t){if(t=Fg(e),t===null)throw Error(jt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return xR(i),e;if(o===r)return xR(i),t;o=o.sibling}throw Error(jt(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,l=i.child;l;){if(l===n){u=!0,n=i,r=o;break}if(l===r){u=!0,r=i,n=o;break}l=l.sibling}if(!u){for(l=o.child;l;){if(l===n){u=!0,n=o,r=i;break}if(l===r){u=!0,r=o,n=i;break}l=l.sibling}if(!u)throw Error(jt(189))}}if(n.alternate!==r)throw Error(jt(190))}if(n.tag!==3)throw Error(jt(188));return n.stateNode.current===n?e:t}function L4(e){return e=h9(e),e!==null?A4(e):null}function A4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=A4(e);if(t!==null)return t;e=e.sibling}return null}var O4=Vl.unstable_scheduleCallback,bR=Vl.unstable_cancelCallback,f9=Vl.unstable_shouldYield,d9=Vl.unstable_requestPaint,bo=Vl.unstable_now,p9=Vl.unstable_getCurrentPriorityLevel,iL=Vl.unstable_ImmediatePriority,k4=Vl.unstable_UserBlockingPriority,Iw=Vl.unstable_NormalPriority,m9=Vl.unstable_LowPriority,R4=Vl.unstable_IdlePriority,AE=null,Zh=null;function g9(e){if(Zh&&typeof Zh.onCommitFiberRoot=="function")try{Zh.onCommitFiberRoot(AE,e,void 0,(e.current.flags&128)===128)}catch{}}var Mc=Math.clz32?Math.clz32:v9,y9=Math.log,_9=Math.LN2;function v9(e){return e>>>=0,e===0?32:31-(y9(e)/_9|0)|0}var ib=64,ob=4194304;function x0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pw(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,u=n&268435455;if(u!==0){var l=u&~i;l!==0?r=x0(l):(o&=u,o!==0&&(r=x0(o)))}else u=n&~i,u!==0?r=x0(u):o!==0&&(r=x0(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Mc(t),i=1<<n,r|=e[n],t&=~i;return r}function x9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b9(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-Mc(o),l=1<<u,p=i[u];p===-1?(!(l&n)||l&r)&&(i[u]=x9(l,t)):p<=t&&(e.expiredLanes|=l),o&=~l}}function CC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function M4(){var e=ib;return ib<<=1,!(ib&4194240)&&(ib=64),e}function i2(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ux(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mc(t),e[t]=n}function w9(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Mc(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function oL(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Mc(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Zr=0;function N4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var D4,sL,z4,F4,B4,IC=!1,sb=[],Sp=null,Tp=null,Cp=null,e1=new Map,t1=new Map,lp=[],E9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wR(e,t){switch(e){case"focusin":case"focusout":Sp=null;break;case"dragenter":case"dragleave":Tp=null;break;case"mouseover":case"mouseout":Cp=null;break;case"pointerover":case"pointerout":e1.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":t1.delete(t.pointerId)}}function Jv(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=hx(t),t!==null&&sL(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function S9(e,t,n,r,i){switch(t){case"focusin":return Sp=Jv(Sp,e,t,n,r,i),!0;case"dragenter":return Tp=Jv(Tp,e,t,n,r,i),!0;case"mouseover":return Cp=Jv(Cp,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return e1.set(o,Jv(e1.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,t1.set(o,Jv(t1.get(o)||null,e,t,n,r,i)),!0}return!1}function j4(e){var t=Hm(e.target);if(t!==null){var n=Fg(t);if(n!==null){if(t=n.tag,t===13){if(t=P4(n),t!==null){e.blockedOn=t,B4(e.priority,function(){z4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xb(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=PC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);wC=r,n.target.dispatchEvent(r),wC=null}else return t=hx(n),t!==null&&sL(t),e.blockedOn=n,!1;t.shift()}return!0}function ER(e,t,n){Xb(e)&&n.delete(t)}function T9(){IC=!1,Sp!==null&&Xb(Sp)&&(Sp=null),Tp!==null&&Xb(Tp)&&(Tp=null),Cp!==null&&Xb(Cp)&&(Cp=null),e1.forEach(ER),t1.forEach(ER)}function Qv(e,t){e.blockedOn===t&&(e.blockedOn=null,IC||(IC=!0,Vl.unstable_scheduleCallback(Vl.unstable_NormalPriority,T9)))}function n1(e){function t(i){return Qv(i,e)}if(0<sb.length){Qv(sb[0],e);for(var n=1;n<sb.length;n++){var r=sb[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Sp!==null&&Qv(Sp,e),Tp!==null&&Qv(Tp,e),Cp!==null&&Qv(Cp,e),e1.forEach(t),t1.forEach(t),n=0;n<lp.length;n++)r=lp[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<lp.length&&(n=lp[0],n.blockedOn===null);)j4(n),n.blockedOn===null&&lp.shift()}var Ky=wd.ReactCurrentBatchConfig,Lw=!0;function C9(e,t,n,r){var i=Zr,o=Ky.transition;Ky.transition=null;try{Zr=1,aL(e,t,n,r)}finally{Zr=i,Ky.transition=o}}function I9(e,t,n,r){var i=Zr,o=Ky.transition;Ky.transition=null;try{Zr=4,aL(e,t,n,r)}finally{Zr=i,Ky.transition=o}}function aL(e,t,n,r){if(Lw){var i=PC(e,t,n,r);if(i===null)p2(e,t,r,Aw,n),wR(e,r);else if(S9(i,e,t,n,r))r.stopPropagation();else if(wR(e,r),t&4&&-1<E9.indexOf(e)){for(;i!==null;){var o=hx(i);if(o!==null&&D4(o),o=PC(e,t,n,r),o===null&&p2(e,t,r,Aw,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else p2(e,t,r,null,n)}}var Aw=null;function PC(e,t,n,r){if(Aw=null,e=rL(r),e=Hm(e),e!==null)if(t=Fg(e),t===null)e=null;else if(n=t.tag,n===13){if(e=P4(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Aw=e,null}function $4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p9()){case iL:return 1;case k4:return 4;case Iw:case m9:return 16;case R4:return 536870912;default:return 16}default:return 16}}var vp=null,lL=null,Yb=null;function U4(){if(Yb)return Yb;var e,t=lL,n=t.length,r,i="value"in vp?vp.value:vp.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===i[o-r];r++);return Yb=i.slice(e,1<r?1-r:void 0)}function Jb(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ab(){return!0}function SR(){return!1}function eu(e){function t(n,r,i,o,u){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ab:SR,this.isPropagationStopped=SR,this}return Ki(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ab)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ab)},persist:function(){},isPersistent:ab}),t}var ev={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uL=eu(ev),cx=Ki({},ev,{view:0,detail:0}),P9=eu(cx),o2,s2,e0,OE=Ki({},cx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cL,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==e0&&(e0&&e.type==="mousemove"?(o2=e.screenX-e0.screenX,s2=e.screenY-e0.screenY):s2=o2=0,e0=e),o2)},movementY:function(e){return"movementY"in e?e.movementY:s2}}),TR=eu(OE),L9=Ki({},OE,{dataTransfer:0}),A9=eu(L9),O9=Ki({},cx,{relatedTarget:0}),a2=eu(O9),k9=Ki({},ev,{animationName:0,elapsedTime:0,pseudoElement:0}),R9=eu(k9),M9=Ki({},ev,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),N9=eu(M9),D9=Ki({},ev,{data:0}),CR=eu(D9),z9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=B9[e])?!!t[e]:!1}function cL(){return j9}var $9=Ki({},cx,{key:function(e){if(e.key){var t=z9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jb(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?F9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cL,charCode:function(e){return e.type==="keypress"?Jb(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jb(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),U9=eu($9),V9=Ki({},OE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IR=eu(V9),q9=Ki({},cx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cL}),G9=eu(q9),H9=Ki({},ev,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z9=eu(H9),W9=Ki({},OE,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),K9=eu(W9),X9=[9,13,27,32],hL=od&&"CompositionEvent"in window,M0=null;od&&"documentMode"in document&&(M0=document.documentMode);var Y9=od&&"TextEvent"in window&&!M0,V4=od&&(!hL||M0&&8<M0&&11>=M0),PR=" ",LR=!1;function q4(e,t){switch(e){case"keyup":return X9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ky=!1;function J9(e,t){switch(e){case"compositionend":return G4(t);case"keypress":return t.which!==32?null:(LR=!0,PR);case"textInput":return e=t.data,e===PR&&LR?null:e;default:return null}}function Q9(e,t){if(ky)return e==="compositionend"||!hL&&q4(e,t)?(e=U4(),Yb=lL=vp=null,ky=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return V4&&t.locale!=="ko"?null:t.data;default:return null}}var eV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eV[e.type]:t==="textarea"}function H4(e,t,n,r){E4(r),t=Ow(t,"onChange"),0<t.length&&(n=new uL("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var N0=null,r1=null;function tV(e){rz(e,0)}function kE(e){var t=Ny(e);if(g4(t))return e}function nV(e,t){if(e==="change")return t}var Z4=!1;if(od){var l2;if(od){var u2="oninput"in document;if(!u2){var OR=document.createElement("div");OR.setAttribute("oninput","return;"),u2=typeof OR.oninput=="function"}l2=u2}else l2=!1;Z4=l2&&(!document.documentMode||9<document.documentMode)}function kR(){N0&&(N0.detachEvent("onpropertychange",W4),r1=N0=null)}function W4(e){if(e.propertyName==="value"&&kE(r1)){var t=[];H4(t,r1,e,rL(e)),I4(tV,t)}}function rV(e,t,n){e==="focusin"?(kR(),N0=t,r1=n,N0.attachEvent("onpropertychange",W4)):e==="focusout"&&kR()}function iV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kE(r1)}function oV(e,t){if(e==="click")return kE(t)}function sV(e,t){if(e==="input"||e==="change")return kE(t)}function aV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bc=typeof Object.is=="function"?Object.is:aV;function i1(e,t){if(Bc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cC.call(t,i)||!Bc(e[i],t[i]))return!1}return!0}function RR(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function MR(e,t){var n=RR(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=RR(n)}}function K4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?K4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function X4(){for(var e=window,t=Sw();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Sw(e.document)}return t}function fL(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lV(e){var t=X4(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&K4(n.ownerDocument.documentElement,n)){if(r!==null&&fL(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=MR(n,o);var u=MR(n,r);i&&u&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uV=od&&"documentMode"in document&&11>=document.documentMode,Ry=null,LC=null,D0=null,AC=!1;function NR(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;AC||Ry==null||Ry!==Sw(r)||(r=Ry,"selectionStart"in r&&fL(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),D0&&i1(D0,r)||(D0=r,r=Ow(LC,"onSelect"),0<r.length&&(t=new uL("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ry)))}function lb(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var My={animationend:lb("Animation","AnimationEnd"),animationiteration:lb("Animation","AnimationIteration"),animationstart:lb("Animation","AnimationStart"),transitionend:lb("Transition","TransitionEnd")},c2={},Y4={};od&&(Y4=document.createElement("div").style,"AnimationEvent"in window||(delete My.animationend.animation,delete My.animationiteration.animation,delete My.animationstart.animation),"TransitionEvent"in window||delete My.transitionend.transition);function RE(e){if(c2[e])return c2[e];if(!My[e])return e;var t=My[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Y4)return c2[e]=t[n];return e}var J4=RE("animationend"),Q4=RE("animationiteration"),ez=RE("animationstart"),tz=RE("transitionend"),nz=new Map,DR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jp(e,t){nz.set(e,t),zg(t,[e])}for(var h2=0;h2<DR.length;h2++){var f2=DR[h2],cV=f2.toLowerCase(),hV=f2[0].toUpperCase()+f2.slice(1);Jp(cV,"on"+hV)}Jp(J4,"onAnimationEnd");Jp(Q4,"onAnimationIteration");Jp(ez,"onAnimationStart");Jp("dblclick","onDoubleClick");Jp("focusin","onFocus");Jp("focusout","onBlur");Jp(tz,"onTransitionEnd");y_("onMouseEnter",["mouseout","mouseover"]);y_("onMouseLeave",["mouseout","mouseover"]);y_("onPointerEnter",["pointerout","pointerover"]);y_("onPointerLeave",["pointerout","pointerover"]);zg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zg("onBeforeInput",["compositionend","keypress","textInput","paste"]);zg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var b0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fV=new Set("cancel close invalid load scroll toggle".split(" ").concat(b0));function zR(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,c9(r,t,void 0,e),e.currentTarget=null}function rz(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var u=r.length-1;0<=u;u--){var l=r[u],p=l.instance,g=l.currentTarget;if(l=l.listener,p!==o&&i.isPropagationStopped())break e;zR(i,l,g),o=p}else for(u=0;u<r.length;u++){if(l=r[u],p=l.instance,g=l.currentTarget,l=l.listener,p!==o&&i.isPropagationStopped())break e;zR(i,l,g),o=p}}}if(Cw)throw e=TC,Cw=!1,TC=null,e}function Ei(e,t){var n=t[NC];n===void 0&&(n=t[NC]=new Set);var r=e+"__bubble";n.has(r)||(iz(t,e,2,!1),n.add(r))}function d2(e,t,n){var r=0;t&&(r|=4),iz(n,e,r,t)}var ub="_reactListening"+Math.random().toString(36).slice(2);function o1(e){if(!e[ub]){e[ub]=!0,h4.forEach(function(n){n!=="selectionchange"&&(fV.has(n)||d2(n,!1,e),d2(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ub]||(t[ub]=!0,d2("selectionchange",!1,t))}}function iz(e,t,n,r){switch($4(t)){case 1:var i=C9;break;case 4:i=I9;break;default:i=aL}n=i.bind(null,t,n,e),i=void 0,!SC||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function p2(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(u===4)for(u=r.return;u!==null;){var p=u.tag;if((p===3||p===4)&&(p=u.stateNode.containerInfo,p===i||p.nodeType===8&&p.parentNode===i))return;u=u.return}for(;l!==null;){if(u=Hm(l),u===null)return;if(p=u.tag,p===5||p===6){r=o=u;continue e}l=l.parentNode}}r=r.return}I4(function(){var g=o,x=rL(n),y=[];e:{var _=nz.get(e);if(_!==void 0){var T=uL,P=e;switch(e){case"keypress":if(Jb(n)===0)break e;case"keydown":case"keyup":T=U9;break;case"focusin":P="focus",T=a2;break;case"focusout":P="blur",T=a2;break;case"beforeblur":case"afterblur":T=a2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=TR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=A9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=G9;break;case J4:case Q4:case ez:T=R9;break;case tz:T=Z9;break;case"scroll":T=P9;break;case"wheel":T=K9;break;case"copy":case"cut":case"paste":T=N9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=IR}var A=(t&4)!==0,M=!A&&e==="scroll",k=A?_!==null?_+"Capture":null:_;A=[];for(var R=g,z;R!==null;){z=R;var D=z.stateNode;if(z.tag===5&&D!==null&&(z=D,k!==null&&(D=Q0(R,k),D!=null&&A.push(s1(R,D,z)))),M)break;R=R.return}0<A.length&&(_=new T(_,P,null,n,x),y.push({event:_,listeners:A}))}}if(!(t&7)){e:{if(_=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",_&&n!==wC&&(P=n.relatedTarget||n.fromElement)&&(Hm(P)||P[sd]))break e;if((T||_)&&(_=x.window===x?x:(_=x.ownerDocument)?_.defaultView||_.parentWindow:window,T?(P=n.relatedTarget||n.toElement,T=g,P=P?Hm(P):null,P!==null&&(M=Fg(P),P!==M||P.tag!==5&&P.tag!==6)&&(P=null)):(T=null,P=g),T!==P)){if(A=TR,D="onMouseLeave",k="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(A=IR,D="onPointerLeave",k="onPointerEnter",R="pointer"),M=T==null?_:Ny(T),z=P==null?_:Ny(P),_=new A(D,R+"leave",T,n,x),_.target=M,_.relatedTarget=z,D=null,Hm(x)===g&&(A=new A(k,R+"enter",P,n,x),A.target=z,A.relatedTarget=M,D=A),M=D,T&&P)t:{for(A=T,k=P,R=0,z=A;z;z=wy(z))R++;for(z=0,D=k;D;D=wy(D))z++;for(;0<R-z;)A=wy(A),R--;for(;0<z-R;)k=wy(k),z--;for(;R--;){if(A===k||k!==null&&A===k.alternate)break t;A=wy(A),k=wy(k)}A=null}else A=null;T!==null&&FR(y,_,T,A,!1),P!==null&&M!==null&&FR(y,M,P,A,!0)}}e:{if(_=g?Ny(g):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var U=nV;else if(AR(_))if(Z4)U=sV;else{U=iV;var V=rV}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(U=oV);if(U&&(U=U(e,g))){H4(y,U,n,x);break e}V&&V(e,_,g),e==="focusout"&&(V=_._wrapperState)&&V.controlled&&_.type==="number"&&yC(_,"number",_.value)}switch(V=g?Ny(g):window,e){case"focusin":(AR(V)||V.contentEditable==="true")&&(Ry=V,LC=g,D0=null);break;case"focusout":D0=LC=Ry=null;break;case"mousedown":AC=!0;break;case"contextmenu":case"mouseup":case"dragend":AC=!1,NR(y,n,x);break;case"selectionchange":if(uV)break;case"keydown":case"keyup":NR(y,n,x)}var G;if(hL)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else ky?q4(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(V4&&n.locale!=="ko"&&(ky||H!=="onCompositionStart"?H==="onCompositionEnd"&&ky&&(G=U4()):(vp=x,lL="value"in vp?vp.value:vp.textContent,ky=!0)),V=Ow(g,H),0<V.length&&(H=new CR(H,e,null,n,x),y.push({event:H,listeners:V}),G?H.data=G:(G=G4(n),G!==null&&(H.data=G)))),(G=Y9?J9(e,n):Q9(e,n))&&(g=Ow(g,"onBeforeInput"),0<g.length&&(x=new CR("onBeforeInput","beforeinput",null,n,x),y.push({event:x,listeners:g}),x.data=G))}rz(y,t)})}function s1(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ow(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Q0(e,n),o!=null&&r.unshift(s1(e,o,i)),o=Q0(e,t),o!=null&&r.push(s1(e,o,i))),e=e.return}return r}function wy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function FR(e,t,n,r,i){for(var o=t._reactName,u=[];n!==null&&n!==r;){var l=n,p=l.alternate,g=l.stateNode;if(p!==null&&p===r)break;l.tag===5&&g!==null&&(l=g,i?(p=Q0(n,o),p!=null&&u.unshift(s1(n,p,l))):i||(p=Q0(n,o),p!=null&&u.push(s1(n,p,l)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var dV=/\r\n?/g,pV=/\u0000|\uFFFD/g;function BR(e){return(typeof e=="string"?e:""+e).replace(dV,`
`).replace(pV,"")}function cb(e,t,n){if(t=BR(t),BR(e)!==t&&n)throw Error(jt(425))}function kw(){}var OC=null,kC=null;function RC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var MC=typeof setTimeout=="function"?setTimeout:void 0,mV=typeof clearTimeout=="function"?clearTimeout:void 0,jR=typeof Promise=="function"?Promise:void 0,gV=typeof queueMicrotask=="function"?queueMicrotask:typeof jR<"u"?function(e){return jR.resolve(null).then(e).catch(yV)}:MC;function yV(e){setTimeout(function(){throw e})}function m2(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),n1(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);n1(t)}function Ip(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $R(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var tv=Math.random().toString(36).slice(2),Vh="__reactFiber$"+tv,a1="__reactProps$"+tv,sd="__reactContainer$"+tv,NC="__reactEvents$"+tv,_V="__reactListeners$"+tv,vV="__reactHandles$"+tv;function Hm(e){var t=e[Vh];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sd]||n[Vh]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$R(e);e!==null;){if(n=e[Vh])return n;e=$R(e)}return t}e=n,n=e.parentNode}return null}function hx(e){return e=e[Vh]||e[sd],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ny(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(jt(33))}function ME(e){return e[a1]||null}var DC=[],Dy=-1;function Qp(e){return{current:e}}function Ii(e){0>Dy||(e.current=DC[Dy],DC[Dy]=null,Dy--)}function _i(e,t){Dy++,DC[Dy]=e.current,e.current=t}var Dp={},ia=Qp(Dp),il=Qp(!1),mg=Dp;function __(e,t){var n=e.type.contextTypes;if(!n)return Dp;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ol(e){return e=e.childContextTypes,e!=null}function Rw(){Ii(il),Ii(ia)}function UR(e,t,n){if(ia.current!==Dp)throw Error(jt(168));_i(ia,t),_i(il,n)}function oz(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(jt(108,r9(e)||"Unknown",i));return Ki({},n,r)}function Mw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dp,mg=ia.current,_i(ia,e),_i(il,il.current),!0}function VR(e,t,n){var r=e.stateNode;if(!r)throw Error(jt(169));n?(e=oz(e,t,mg),r.__reactInternalMemoizedMergedChildContext=e,Ii(il),Ii(ia),_i(ia,e)):Ii(il),_i(il,n)}var Zf=null,NE=!1,g2=!1;function sz(e){Zf===null?Zf=[e]:Zf.push(e)}function xV(e){NE=!0,sz(e)}function em(){if(!g2&&Zf!==null){g2=!0;var e=0,t=Zr;try{var n=Zf;for(Zr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Zf=null,NE=!1}catch(i){throw Zf!==null&&(Zf=Zf.slice(e+1)),O4(iL,em),i}finally{Zr=t,g2=!1}}return null}var zy=[],Fy=0,Nw=null,Dw=0,Au=[],Ou=0,gg=null,Kf=1,Xf="";function Fm(e,t){zy[Fy++]=Dw,zy[Fy++]=Nw,Nw=e,Dw=t}function az(e,t,n){Au[Ou++]=Kf,Au[Ou++]=Xf,Au[Ou++]=gg,gg=e;var r=Kf;e=Xf;var i=32-Mc(r)-1;r&=~(1<<i),n+=1;var o=32-Mc(t)+i;if(30<o){var u=i-i%5;o=(r&(1<<u)-1).toString(32),r>>=u,i-=u,Kf=1<<32-Mc(t)+i|n<<i|r,Xf=o+e}else Kf=1<<o|n<<i|r,Xf=e}function dL(e){e.return!==null&&(Fm(e,1),az(e,1,0))}function pL(e){for(;e===Nw;)Nw=zy[--Fy],zy[Fy]=null,Dw=zy[--Fy],zy[Fy]=null;for(;e===gg;)gg=Au[--Ou],Au[Ou]=null,Xf=Au[--Ou],Au[Ou]=null,Kf=Au[--Ou],Au[Ou]=null}var jl=null,Nl=null,Ni=!1,Ac=null;function lz(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qR(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jl=e,Nl=Ip(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jl=e,Nl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=gg!==null?{id:Kf,overflow:Xf}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Mu(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jl=e,Nl=null,!0):!1;default:return!1}}function zC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function FC(e){if(Ni){var t=Nl;if(t){var n=t;if(!qR(e,t)){if(zC(e))throw Error(jt(418));t=Ip(n.nextSibling);var r=jl;t&&qR(e,t)?lz(r,n):(e.flags=e.flags&-4097|2,Ni=!1,jl=e)}}else{if(zC(e))throw Error(jt(418));e.flags=e.flags&-4097|2,Ni=!1,jl=e}}}function GR(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jl=e}function hb(e){if(e!==jl)return!1;if(!Ni)return GR(e),Ni=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!RC(e.type,e.memoizedProps)),t&&(t=Nl)){if(zC(e))throw uz(),Error(jt(418));for(;t;)lz(e,t),t=Ip(t.nextSibling)}if(GR(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(jt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Nl=Ip(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Nl=null}}else Nl=jl?Ip(e.stateNode.nextSibling):null;return!0}function uz(){for(var e=Nl;e;)e=Ip(e.nextSibling)}function v_(){Nl=jl=null,Ni=!1}function mL(e){Ac===null?Ac=[e]:Ac.push(e)}var bV=wd.ReactCurrentBatchConfig;function Tc(e,t){if(e&&e.defaultProps){t=Ki({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var zw=Qp(null),Fw=null,By=null,gL=null;function yL(){gL=By=Fw=null}function _L(e){var t=zw.current;Ii(zw),e._currentValue=t}function BC(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xy(e,t){Fw=e,gL=By=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rl=!0),e.firstContext=null)}function $u(e){var t=e._currentValue;if(gL!==e)if(e={context:e,memoizedValue:t,next:null},By===null){if(Fw===null)throw Error(jt(308));By=e,Fw.dependencies={lanes:0,firstContext:e}}else By=By.next=e;return t}var Zm=null;function vL(e){Zm===null?Zm=[e]:Zm.push(e)}function cz(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,vL(t)):(n.next=i.next,i.next=n),t.interleaved=n,ad(e,r)}function ad(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ap=!1;function xL(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hz(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ed(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pp(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Or&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ad(e,n)}return i=r.interleaved,i===null?(t.next=t,vL(r)):(t.next=i.next,i.next=t),r.interleaved=t,ad(e,n)}function Qb(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oL(e,n)}}function HR(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=u:o=o.next=u,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bw(e,t,n,r){var i=e.updateQueue;ap=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var p=l,g=p.next;p.next=null,u===null?o=g:u.next=g,u=p;var x=e.alternate;x!==null&&(x=x.updateQueue,l=x.lastBaseUpdate,l!==u&&(l===null?x.firstBaseUpdate=g:l.next=g,x.lastBaseUpdate=p))}if(o!==null){var y=i.baseState;u=0,x=g=p=null,l=o;do{var _=l.lane,T=l.eventTime;if((r&_)===_){x!==null&&(x=x.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=e,A=l;switch(_=t,T=n,A.tag){case 1:if(P=A.payload,typeof P=="function"){y=P.call(T,y,_);break e}y=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=A.payload,_=typeof P=="function"?P.call(T,y,_):P,_==null)break e;y=Ki({},y,_);break e;case 2:ap=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else T={eventTime:T,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},x===null?(g=x=T,p=y):x=x.next=T,u|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(x===null&&(p=y),i.baseState=p,i.firstBaseUpdate=g,i.lastBaseUpdate=x,t=i.shared.interleaved,t!==null){i=t;do u|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);_g|=u,e.lanes=u,e.memoizedState=y}}function ZR(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(jt(191,i));i.call(r)}}}var fz=new c4.Component().refs;function jC(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ki({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var DE={isMounted:function(e){return(e=e._reactInternals)?Fg(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Aa(),i=Ap(e),o=ed(r,i);o.payload=t,n!=null&&(o.callback=n),t=Pp(e,o,i),t!==null&&(Nc(t,e,i,r),Qb(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Aa(),i=Ap(e),o=ed(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Pp(e,o,i),t!==null&&(Nc(t,e,i,r),Qb(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Aa(),r=Ap(e),i=ed(n,r);i.tag=2,t!=null&&(i.callback=t),t=Pp(e,i,r),t!==null&&(Nc(t,e,r,n),Qb(t,e,r))}};function WR(e,t,n,r,i,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,u):t.prototype&&t.prototype.isPureReactComponent?!i1(n,r)||!i1(i,o):!0}function dz(e,t,n){var r=!1,i=Dp,o=t.contextType;return typeof o=="object"&&o!==null?o=$u(o):(i=ol(t)?mg:ia.current,r=t.contextTypes,o=(r=r!=null)?__(e,i):Dp),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=DE,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function KR(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&DE.enqueueReplaceState(t,t.state,null)}function $C(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=fz,xL(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=$u(o):(o=ol(t)?mg:ia.current,i.context=__(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(jC(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&DE.enqueueReplaceState(i,i.state,null),Bw(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function t0(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(jt(309));var r=n.stateNode}if(!r)throw Error(jt(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var l=i.refs;l===fz&&(l=i.refs={}),u===null?delete l[o]:l[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(jt(284));if(!n._owner)throw Error(jt(290,e))}return e}function fb(e,t){throw e=Object.prototype.toString.call(t),Error(jt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function XR(e){var t=e._init;return t(e._payload)}function pz(e){function t(k,R){if(e){var z=k.deletions;z===null?(k.deletions=[R],k.flags|=16):z.push(R)}}function n(k,R){if(!e)return null;for(;R!==null;)t(k,R),R=R.sibling;return null}function r(k,R){for(k=new Map;R!==null;)R.key!==null?k.set(R.key,R):k.set(R.index,R),R=R.sibling;return k}function i(k,R){return k=Op(k,R),k.index=0,k.sibling=null,k}function o(k,R,z){return k.index=z,e?(z=k.alternate,z!==null?(z=z.index,z<R?(k.flags|=2,R):z):(k.flags|=2,R)):(k.flags|=1048576,R)}function u(k){return e&&k.alternate===null&&(k.flags|=2),k}function l(k,R,z,D){return R===null||R.tag!==6?(R=E2(z,k.mode,D),R.return=k,R):(R=i(R,z),R.return=k,R)}function p(k,R,z,D){var U=z.type;return U===Oy?x(k,R,z.props.children,D,z.key):R!==null&&(R.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===sp&&XR(U)===R.type)?(D=i(R,z.props),D.ref=t0(k,R,z),D.return=k,D):(D=ow(z.type,z.key,z.props,null,k.mode,D),D.ref=t0(k,R,z),D.return=k,D)}function g(k,R,z,D){return R===null||R.tag!==4||R.stateNode.containerInfo!==z.containerInfo||R.stateNode.implementation!==z.implementation?(R=S2(z,k.mode,D),R.return=k,R):(R=i(R,z.children||[]),R.return=k,R)}function x(k,R,z,D,U){return R===null||R.tag!==7?(R=ag(z,k.mode,D,U),R.return=k,R):(R=i(R,z),R.return=k,R)}function y(k,R,z){if(typeof R=="string"&&R!==""||typeof R=="number")return R=E2(""+R,k.mode,z),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case tb:return z=ow(R.type,R.key,R.props,null,k.mode,z),z.ref=t0(k,null,R),z.return=k,z;case Ay:return R=S2(R,k.mode,z),R.return=k,R;case sp:var D=R._init;return y(k,D(R._payload),z)}if(v0(R)||Xv(R))return R=ag(R,k.mode,z,null),R.return=k,R;fb(k,R)}return null}function _(k,R,z,D){var U=R!==null?R.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return U!==null?null:l(k,R,""+z,D);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case tb:return z.key===U?p(k,R,z,D):null;case Ay:return z.key===U?g(k,R,z,D):null;case sp:return U=z._init,_(k,R,U(z._payload),D)}if(v0(z)||Xv(z))return U!==null?null:x(k,R,z,D,null);fb(k,z)}return null}function T(k,R,z,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return k=k.get(z)||null,l(R,k,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case tb:return k=k.get(D.key===null?z:D.key)||null,p(R,k,D,U);case Ay:return k=k.get(D.key===null?z:D.key)||null,g(R,k,D,U);case sp:var V=D._init;return T(k,R,z,V(D._payload),U)}if(v0(D)||Xv(D))return k=k.get(z)||null,x(R,k,D,U,null);fb(R,D)}return null}function P(k,R,z,D){for(var U=null,V=null,G=R,H=R=0,J=null;G!==null&&H<z.length;H++){G.index>H?(J=G,G=null):J=G.sibling;var Y=_(k,G,z[H],D);if(Y===null){G===null&&(G=J);break}e&&G&&Y.alternate===null&&t(k,G),R=o(Y,R,H),V===null?U=Y:V.sibling=Y,V=Y,G=J}if(H===z.length)return n(k,G),Ni&&Fm(k,H),U;if(G===null){for(;H<z.length;H++)G=y(k,z[H],D),G!==null&&(R=o(G,R,H),V===null?U=G:V.sibling=G,V=G);return Ni&&Fm(k,H),U}for(G=r(k,G);H<z.length;H++)J=T(G,k,H,z[H],D),J!==null&&(e&&J.alternate!==null&&G.delete(J.key===null?H:J.key),R=o(J,R,H),V===null?U=J:V.sibling=J,V=J);return e&&G.forEach(function(X){return t(k,X)}),Ni&&Fm(k,H),U}function A(k,R,z,D){var U=Xv(z);if(typeof U!="function")throw Error(jt(150));if(z=U.call(z),z==null)throw Error(jt(151));for(var V=U=null,G=R,H=R=0,J=null,Y=z.next();G!==null&&!Y.done;H++,Y=z.next()){G.index>H?(J=G,G=null):J=G.sibling;var X=_(k,G,Y.value,D);if(X===null){G===null&&(G=J);break}e&&G&&X.alternate===null&&t(k,G),R=o(X,R,H),V===null?U=X:V.sibling=X,V=X,G=J}if(Y.done)return n(k,G),Ni&&Fm(k,H),U;if(G===null){for(;!Y.done;H++,Y=z.next())Y=y(k,Y.value,D),Y!==null&&(R=o(Y,R,H),V===null?U=Y:V.sibling=Y,V=Y);return Ni&&Fm(k,H),U}for(G=r(k,G);!Y.done;H++,Y=z.next())Y=T(G,k,H,Y.value,D),Y!==null&&(e&&Y.alternate!==null&&G.delete(Y.key===null?H:Y.key),R=o(Y,R,H),V===null?U=Y:V.sibling=Y,V=Y);return e&&G.forEach(function(ee){return t(k,ee)}),Ni&&Fm(k,H),U}function M(k,R,z,D){if(typeof z=="object"&&z!==null&&z.type===Oy&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case tb:e:{for(var U=z.key,V=R;V!==null;){if(V.key===U){if(U=z.type,U===Oy){if(V.tag===7){n(k,V.sibling),R=i(V,z.props.children),R.return=k,k=R;break e}}else if(V.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===sp&&XR(U)===V.type){n(k,V.sibling),R=i(V,z.props),R.ref=t0(k,V,z),R.return=k,k=R;break e}n(k,V);break}else t(k,V);V=V.sibling}z.type===Oy?(R=ag(z.props.children,k.mode,D,z.key),R.return=k,k=R):(D=ow(z.type,z.key,z.props,null,k.mode,D),D.ref=t0(k,R,z),D.return=k,k=D)}return u(k);case Ay:e:{for(V=z.key;R!==null;){if(R.key===V)if(R.tag===4&&R.stateNode.containerInfo===z.containerInfo&&R.stateNode.implementation===z.implementation){n(k,R.sibling),R=i(R,z.children||[]),R.return=k,k=R;break e}else{n(k,R);break}else t(k,R);R=R.sibling}R=S2(z,k.mode,D),R.return=k,k=R}return u(k);case sp:return V=z._init,M(k,R,V(z._payload),D)}if(v0(z))return P(k,R,z,D);if(Xv(z))return A(k,R,z,D);fb(k,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,R!==null&&R.tag===6?(n(k,R.sibling),R=i(R,z),R.return=k,k=R):(n(k,R),R=E2(z,k.mode,D),R.return=k,k=R),u(k)):n(k,R)}return M}var x_=pz(!0),mz=pz(!1),fx={},Wh=Qp(fx),l1=Qp(fx),u1=Qp(fx);function Wm(e){if(e===fx)throw Error(jt(174));return e}function bL(e,t){switch(_i(u1,t),_i(l1,e),_i(Wh,fx),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:vC(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=vC(t,e)}Ii(Wh),_i(Wh,t)}function b_(){Ii(Wh),Ii(l1),Ii(u1)}function gz(e){Wm(u1.current);var t=Wm(Wh.current),n=vC(t,e.type);t!==n&&(_i(l1,e),_i(Wh,n))}function wL(e){l1.current===e&&(Ii(Wh),Ii(l1))}var Vi=Qp(0);function jw(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var y2=[];function EL(){for(var e=0;e<y2.length;e++)y2[e]._workInProgressVersionPrimary=null;y2.length=0}var ew=wd.ReactCurrentDispatcher,_2=wd.ReactCurrentBatchConfig,yg=0,Wi=null,jo=null,ts=null,$w=!1,z0=!1,c1=0,wV=0;function ea(){throw Error(jt(321))}function SL(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bc(e[n],t[n]))return!1;return!0}function TL(e,t,n,r,i,o){if(yg=o,Wi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ew.current=e===null||e.memoizedState===null?CV:IV,e=n(r,i),z0){o=0;do{if(z0=!1,c1=0,25<=o)throw Error(jt(301));o+=1,ts=jo=null,t.updateQueue=null,ew.current=PV,e=n(r,i)}while(z0)}if(ew.current=Uw,t=jo!==null&&jo.next!==null,yg=0,ts=jo=Wi=null,$w=!1,t)throw Error(jt(300));return e}function CL(){var e=c1!==0;return c1=0,e}function kh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ts===null?Wi.memoizedState=ts=e:ts=ts.next=e,ts}function Uu(){if(jo===null){var e=Wi.alternate;e=e!==null?e.memoizedState:null}else e=jo.next;var t=ts===null?Wi.memoizedState:ts.next;if(t!==null)ts=t,jo=e;else{if(e===null)throw Error(jt(310));jo=e,e={memoizedState:jo.memoizedState,baseState:jo.baseState,baseQueue:jo.baseQueue,queue:jo.queue,next:null},ts===null?Wi.memoizedState=ts=e:ts=ts.next=e}return ts}function h1(e,t){return typeof t=="function"?t(e):t}function v2(e){var t=Uu(),n=t.queue;if(n===null)throw Error(jt(311));n.lastRenderedReducer=e;var r=jo,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=u=null,p=null,g=o;do{var x=g.lane;if((yg&x)===x)p!==null&&(p=p.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),r=g.hasEagerState?g.eagerState:e(r,g.action);else{var y={lane:x,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};p===null?(l=p=y,u=r):p=p.next=y,Wi.lanes|=x,_g|=x}g=g.next}while(g!==null&&g!==o);p===null?u=r:p.next=l,Bc(r,t.memoizedState)||(rl=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=p,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Wi.lanes|=o,_g|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function x2(e){var t=Uu(),n=t.queue;if(n===null)throw Error(jt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var u=i=i.next;do o=e(o,u.action),u=u.next;while(u!==i);Bc(o,t.memoizedState)||(rl=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function yz(){}function _z(e,t){var n=Wi,r=Uu(),i=t(),o=!Bc(r.memoizedState,i);if(o&&(r.memoizedState=i,rl=!0),r=r.queue,IL(bz.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ts!==null&&ts.memoizedState.tag&1){if(n.flags|=2048,f1(9,xz.bind(null,n,r,i,t),void 0,null),ls===null)throw Error(jt(349));yg&30||vz(n,t,i)}return i}function vz(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Wi.updateQueue,t===null?(t={lastEffect:null,stores:null},Wi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xz(e,t,n,r){t.value=n,t.getSnapshot=r,wz(t)&&Ez(e)}function bz(e,t,n){return n(function(){wz(t)&&Ez(e)})}function wz(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bc(e,n)}catch{return!0}}function Ez(e){var t=ad(e,1);t!==null&&Nc(t,e,1,-1)}function YR(e){var t=kh();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h1,lastRenderedState:e},t.queue=e,e=e.dispatch=TV.bind(null,Wi,e),[t.memoizedState,e]}function f1(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Wi.updateQueue,t===null?(t={lastEffect:null,stores:null},Wi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Sz(){return Uu().memoizedState}function tw(e,t,n,r){var i=kh();Wi.flags|=e,i.memoizedState=f1(1|t,n,void 0,r===void 0?null:r)}function zE(e,t,n,r){var i=Uu();r=r===void 0?null:r;var o=void 0;if(jo!==null){var u=jo.memoizedState;if(o=u.destroy,r!==null&&SL(r,u.deps)){i.memoizedState=f1(t,n,o,r);return}}Wi.flags|=e,i.memoizedState=f1(1|t,n,o,r)}function JR(e,t){return tw(8390656,8,e,t)}function IL(e,t){return zE(2048,8,e,t)}function Tz(e,t){return zE(4,2,e,t)}function Cz(e,t){return zE(4,4,e,t)}function Iz(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pz(e,t,n){return n=n!=null?n.concat([e]):null,zE(4,4,Iz.bind(null,t,e),n)}function PL(){}function Lz(e,t){var n=Uu();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&SL(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Az(e,t){var n=Uu();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&SL(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Oz(e,t,n){return yg&21?(Bc(n,t)||(n=M4(),Wi.lanes|=n,_g|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rl=!0),e.memoizedState=n)}function EV(e,t){var n=Zr;Zr=n!==0&&4>n?n:4,e(!0);var r=_2.transition;_2.transition={};try{e(!1),t()}finally{Zr=n,_2.transition=r}}function kz(){return Uu().memoizedState}function SV(e,t,n){var r=Ap(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rz(e))Mz(t,n);else if(n=cz(e,t,n,r),n!==null){var i=Aa();Nc(n,e,r,i),Nz(n,t,r)}}function TV(e,t,n){var r=Ap(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rz(e))Mz(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,l=o(u,n);if(i.hasEagerState=!0,i.eagerState=l,Bc(l,u)){var p=t.interleaved;p===null?(i.next=i,vL(t)):(i.next=p.next,p.next=i),t.interleaved=i;return}}catch{}finally{}n=cz(e,t,i,r),n!==null&&(i=Aa(),Nc(n,e,r,i),Nz(n,t,r))}}function Rz(e){var t=e.alternate;return e===Wi||t!==null&&t===Wi}function Mz(e,t){z0=$w=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Nz(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oL(e,n)}}var Uw={readContext:$u,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useInsertionEffect:ea,useLayoutEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useMutableSource:ea,useSyncExternalStore:ea,useId:ea,unstable_isNewReconciler:!1},CV={readContext:$u,useCallback:function(e,t){return kh().memoizedState=[e,t===void 0?null:t],e},useContext:$u,useEffect:JR,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,tw(4194308,4,Iz.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tw(4194308,4,e,t)},useInsertionEffect:function(e,t){return tw(4,2,e,t)},useMemo:function(e,t){var n=kh();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=kh();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=SV.bind(null,Wi,e),[r.memoizedState,e]},useRef:function(e){var t=kh();return e={current:e},t.memoizedState=e},useState:YR,useDebugValue:PL,useDeferredValue:function(e){return kh().memoizedState=e},useTransition:function(){var e=YR(!1),t=e[0];return e=EV.bind(null,e[1]),kh().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Wi,i=kh();if(Ni){if(n===void 0)throw Error(jt(407));n=n()}else{if(n=t(),ls===null)throw Error(jt(349));yg&30||vz(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,JR(bz.bind(null,r,o,e),[e]),r.flags|=2048,f1(9,xz.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=kh(),t=ls.identifierPrefix;if(Ni){var n=Xf,r=Kf;n=(r&~(1<<32-Mc(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=c1++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wV++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},IV={readContext:$u,useCallback:Lz,useContext:$u,useEffect:IL,useImperativeHandle:Pz,useInsertionEffect:Tz,useLayoutEffect:Cz,useMemo:Az,useReducer:v2,useRef:Sz,useState:function(){return v2(h1)},useDebugValue:PL,useDeferredValue:function(e){var t=Uu();return Oz(t,jo.memoizedState,e)},useTransition:function(){var e=v2(h1)[0],t=Uu().memoizedState;return[e,t]},useMutableSource:yz,useSyncExternalStore:_z,useId:kz,unstable_isNewReconciler:!1},PV={readContext:$u,useCallback:Lz,useContext:$u,useEffect:IL,useImperativeHandle:Pz,useInsertionEffect:Tz,useLayoutEffect:Cz,useMemo:Az,useReducer:x2,useRef:Sz,useState:function(){return x2(h1)},useDebugValue:PL,useDeferredValue:function(e){var t=Uu();return jo===null?t.memoizedState=e:Oz(t,jo.memoizedState,e)},useTransition:function(){var e=x2(h1)[0],t=Uu().memoizedState;return[e,t]},useMutableSource:yz,useSyncExternalStore:_z,useId:kz,unstable_isNewReconciler:!1};function w_(e,t){try{var n="",r=t;do n+=n9(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function b2(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function UC(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var LV=typeof WeakMap=="function"?WeakMap:Map;function Dz(e,t,n){n=ed(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qw||(qw=!0,JC=r),UC(e,t)},n}function zz(e,t,n){n=ed(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){UC(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){UC(e,t),typeof r!="function"&&(Lp===null?Lp=new Set([this]):Lp.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function QR(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new LV;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=VV.bind(null,e,t,n),t.then(e,e))}function eM(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tM(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ed(-1,1),t.tag=2,Pp(n,t,1))),n.lanes|=1),e)}var AV=wd.ReactCurrentOwner,rl=!1;function Ca(e,t,n,r){t.child=e===null?mz(t,null,n,r):x_(t,e.child,n,r)}function nM(e,t,n,r,i){n=n.render;var o=t.ref;return Xy(t,i),r=TL(e,t,n,r,o,i),n=CL(),e!==null&&!rl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ld(e,t,i)):(Ni&&n&&dL(t),t.flags|=1,Ca(e,t,r,i),t.child)}function rM(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!DL(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Fz(e,t,o,r,i)):(e=ow(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var u=o.memoizedProps;if(n=n.compare,n=n!==null?n:i1,n(u,r)&&e.ref===t.ref)return ld(e,t,i)}return t.flags|=1,e=Op(o,r),e.ref=t.ref,e.return=t,t.child=e}function Fz(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(i1(o,r)&&e.ref===t.ref)if(rl=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(rl=!0);else return t.lanes=e.lanes,ld(e,t,i)}return VC(e,t,n,r,i)}function Bz(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i($y,Rl),Rl|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i($y,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,_i($y,Rl),Rl|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,_i($y,Rl),Rl|=r;return Ca(e,t,i,n),t.child}function jz(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function VC(e,t,n,r,i){var o=ol(n)?mg:ia.current;return o=__(t,o),Xy(t,i),n=TL(e,t,n,r,o,i),r=CL(),e!==null&&!rl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ld(e,t,i)):(Ni&&r&&dL(t),t.flags|=1,Ca(e,t,n,i),t.child)}function iM(e,t,n,r,i){if(ol(n)){var o=!0;Mw(t)}else o=!1;if(Xy(t,i),t.stateNode===null)nw(e,t),dz(t,n,r),$C(t,n,r,i),r=!0;else if(e===null){var u=t.stateNode,l=t.memoizedProps;u.props=l;var p=u.context,g=n.contextType;typeof g=="object"&&g!==null?g=$u(g):(g=ol(n)?mg:ia.current,g=__(t,g));var x=n.getDerivedStateFromProps,y=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function";y||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(l!==r||p!==g)&&KR(t,u,r,g),ap=!1;var _=t.memoizedState;u.state=_,Bw(t,r,u,i),p=t.memoizedState,l!==r||_!==p||il.current||ap?(typeof x=="function"&&(jC(t,n,x,r),p=t.memoizedState),(l=ap||WR(t,n,l,r,_,p,g))?(y||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=p),u.props=r,u.state=p,u.context=g,r=l):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,hz(e,t),l=t.memoizedProps,g=t.type===t.elementType?l:Tc(t.type,l),u.props=g,y=t.pendingProps,_=u.context,p=n.contextType,typeof p=="object"&&p!==null?p=$u(p):(p=ol(n)?mg:ia.current,p=__(t,p));var T=n.getDerivedStateFromProps;(x=typeof T=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(l!==y||_!==p)&&KR(t,u,r,p),ap=!1,_=t.memoizedState,u.state=_,Bw(t,r,u,i);var P=t.memoizedState;l!==y||_!==P||il.current||ap?(typeof T=="function"&&(jC(t,n,T,r),P=t.memoizedState),(g=ap||WR(t,n,g,r,_,P,p)||!1)?(x||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,P,p),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,P,p)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=P),u.props=r,u.state=P,u.context=p,r=g):(typeof u.componentDidUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),r=!1)}return qC(e,t,n,r,o,i)}function qC(e,t,n,r,i,o){jz(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return i&&VR(t,n,!1),ld(e,t,o);r=t.stateNode,AV.current=t;var l=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=x_(t,e.child,null,o),t.child=x_(t,null,l,o)):Ca(e,t,l,o),t.memoizedState=r.state,i&&VR(t,n,!0),t.child}function $z(e){var t=e.stateNode;t.pendingContext?UR(e,t.pendingContext,t.pendingContext!==t.context):t.context&&UR(e,t.context,!1),bL(e,t.containerInfo)}function oM(e,t,n,r,i){return v_(),mL(i),t.flags|=256,Ca(e,t,n,r),t.child}var GC={dehydrated:null,treeContext:null,retryLane:0};function HC(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uz(e,t,n){var r=t.pendingProps,i=Vi.current,o=!1,u=(t.flags&128)!==0,l;if((l=u)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),_i(Vi,i&1),e===null)return FC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,o?(r=t.mode,o=t.child,u={mode:"hidden",children:u},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=jE(u,r,0,null),e=ag(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=HC(n),t.memoizedState=GC,e):LL(t,u));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return OV(e,t,u,r,l,i,n);if(o){o=r.fallback,u=t.mode,i=e.child,l=i.sibling;var p={mode:"hidden",children:r.children};return!(u&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=p,t.deletions=null):(r=Op(i,p),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Op(l,o):(o=ag(o,u,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,u=e.child.memoizedState,u=u===null?HC(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~n,t.memoizedState=GC,r}return o=e.child,e=o.sibling,r=Op(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function LL(e,t){return t=jE({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function db(e,t,n,r){return r!==null&&mL(r),x_(t,e.child,null,n),e=LL(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function OV(e,t,n,r,i,o,u){if(n)return t.flags&256?(t.flags&=-257,r=b2(Error(jt(422))),db(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jE({mode:"visible",children:r.children},i,0,null),o=ag(o,i,u,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&x_(t,e.child,null,u),t.child.memoizedState=HC(u),t.memoizedState=GC,o);if(!(t.mode&1))return db(e,t,u,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(jt(419)),r=b2(o,r,void 0),db(e,t,u,r)}if(l=(u&e.childLanes)!==0,rl||l){if(r=ls,r!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ad(e,i),Nc(r,e,i,-1))}return NL(),r=b2(Error(jt(421))),db(e,t,u,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=qV.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Nl=Ip(i.nextSibling),jl=t,Ni=!0,Ac=null,e!==null&&(Au[Ou++]=Kf,Au[Ou++]=Xf,Au[Ou++]=gg,Kf=e.id,Xf=e.overflow,gg=t),t=LL(t,r.children),t.flags|=4096,t)}function sM(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),BC(e.return,t,n)}function w2(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vz(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ca(e,t,r.children,n),r=Vi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sM(e,n,t);else if(e.tag===19)sM(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(Vi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&jw(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),w2(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&jw(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}w2(t,!0,n,null,o);break;case"together":w2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nw(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ld(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),_g|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(jt(153));if(t.child!==null){for(e=t.child,n=Op(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Op(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function kV(e,t,n){switch(t.tag){case 3:$z(t),v_();break;case 5:gz(t);break;case 1:ol(t.type)&&Mw(t);break;case 4:bL(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(zw,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_i(Vi,Vi.current&1),t.flags|=128,null):n&t.child.childLanes?Uz(e,t,n):(_i(Vi,Vi.current&1),e=ld(e,t,n),e!==null?e.sibling:null);_i(Vi,Vi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Vz(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(Vi,Vi.current),r)break;return null;case 22:case 23:return t.lanes=0,Bz(e,t,n)}return ld(e,t,n)}var qz,ZC,Gz,Hz;qz=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ZC=function(){};Gz=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Wm(Wh.current);var o=null;switch(n){case"input":i=mC(e,i),r=mC(e,r),o=[];break;case"select":i=Ki({},i,{value:void 0}),r=Ki({},r,{value:void 0}),o=[];break;case"textarea":i=_C(e,i),r=_C(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=kw)}xC(n,r);var u;n=null;for(g in i)if(!r.hasOwnProperty(g)&&i.hasOwnProperty(g)&&i[g]!=null)if(g==="style"){var l=i[g];for(u in l)l.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Y0.hasOwnProperty(g)?o||(o=[]):(o=o||[]).push(g,null));for(g in r){var p=r[g];if(l=i!=null?i[g]:void 0,r.hasOwnProperty(g)&&p!==l&&(p!=null||l!=null))if(g==="style")if(l){for(u in l)!l.hasOwnProperty(u)||p&&p.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in p)p.hasOwnProperty(u)&&l[u]!==p[u]&&(n||(n={}),n[u]=p[u])}else n||(o||(o=[]),o.push(g,n)),n=p;else g==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,l=l?l.__html:void 0,p!=null&&l!==p&&(o=o||[]).push(g,p)):g==="children"?typeof p!="string"&&typeof p!="number"||(o=o||[]).push(g,""+p):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Y0.hasOwnProperty(g)?(p!=null&&g==="onScroll"&&Ei("scroll",e),o||l===p||(o=[])):(o=o||[]).push(g,p))}n&&(o=o||[]).push("style",n);var g=o;(t.updateQueue=g)&&(t.flags|=4)}};Hz=function(e,t,n,r){n!==r&&(t.flags|=4)};function n0(e,t){if(!Ni)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ta(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function RV(e,t,n){var r=t.pendingProps;switch(pL(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ta(t),null;case 1:return ol(t.type)&&Rw(),ta(t),null;case 3:return r=t.stateNode,b_(),Ii(il),Ii(ia),EL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(hb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ac!==null&&(tI(Ac),Ac=null))),ZC(e,t),ta(t),null;case 5:wL(t);var i=Wm(u1.current);if(n=t.type,e!==null&&t.stateNode!=null)Gz(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(jt(166));return ta(t),null}if(e=Wm(Wh.current),hb(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Vh]=t,r[a1]=o,e=(t.mode&1)!==0,n){case"dialog":Ei("cancel",r),Ei("close",r);break;case"iframe":case"object":case"embed":Ei("load",r);break;case"video":case"audio":for(i=0;i<b0.length;i++)Ei(b0[i],r);break;case"source":Ei("error",r);break;case"img":case"image":case"link":Ei("error",r),Ei("load",r);break;case"details":Ei("toggle",r);break;case"input":mR(r,o),Ei("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ei("invalid",r);break;case"textarea":yR(r,o),Ei("invalid",r)}xC(n,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var l=o[u];u==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&cb(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&cb(r.textContent,l,e),i=["children",""+l]):Y0.hasOwnProperty(u)&&l!=null&&u==="onScroll"&&Ei("scroll",r)}switch(n){case"input":nb(r),gR(r,o,!0);break;case"textarea":nb(r),_R(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=kw)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=v4(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Vh]=t,e[a1]=r,qz(e,t,!1,!1),t.stateNode=e;e:{switch(u=bC(n,r),n){case"dialog":Ei("cancel",e),Ei("close",e),i=r;break;case"iframe":case"object":case"embed":Ei("load",e),i=r;break;case"video":case"audio":for(i=0;i<b0.length;i++)Ei(b0[i],e);i=r;break;case"source":Ei("error",e),i=r;break;case"img":case"image":case"link":Ei("error",e),Ei("load",e),i=r;break;case"details":Ei("toggle",e),i=r;break;case"input":mR(e,r),i=mC(e,r),Ei("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ki({},r,{value:void 0}),Ei("invalid",e);break;case"textarea":yR(e,r),i=_C(e,r),Ei("invalid",e);break;default:i=r}xC(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var p=l[o];o==="style"?w4(e,p):o==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&x4(e,p)):o==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&J0(e,p):typeof p=="number"&&J0(e,""+p):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Y0.hasOwnProperty(o)?p!=null&&o==="onScroll"&&Ei("scroll",e):p!=null&&QP(e,o,p,u))}switch(n){case"input":nb(e),gR(e,r,!1);break;case"textarea":nb(e),_R(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Np(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Hy(e,!!r.multiple,o,!1):r.defaultValue!=null&&Hy(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=kw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ta(t),null;case 6:if(e&&t.stateNode!=null)Hz(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(jt(166));if(n=Wm(u1.current),Wm(Wh.current),hb(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vh]=t,(o=r.nodeValue!==n)&&(e=jl,e!==null))switch(e.tag){case 3:cb(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cb(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vh]=t,t.stateNode=r}return ta(t),null;case 13:if(Ii(Vi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ni&&Nl!==null&&t.mode&1&&!(t.flags&128))uz(),v_(),t.flags|=98560,o=!1;else if(o=hb(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(jt(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(jt(317));o[Vh]=t}else v_(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ta(t),o=!1}else Ac!==null&&(tI(Ac),Ac=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Vi.current&1?$o===0&&($o=3):NL())),t.updateQueue!==null&&(t.flags|=4),ta(t),null);case 4:return b_(),ZC(e,t),e===null&&o1(t.stateNode.containerInfo),ta(t),null;case 10:return _L(t.type._context),ta(t),null;case 17:return ol(t.type)&&Rw(),ta(t),null;case 19:if(Ii(Vi),o=t.memoizedState,o===null)return ta(t),null;if(r=(t.flags&128)!==0,u=o.rendering,u===null)if(r)n0(o,!1);else{if($o!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=jw(e),u!==null){for(t.flags|=128,n0(o,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(Vi,Vi.current&1|2),t.child}e=e.sibling}o.tail!==null&&bo()>E_&&(t.flags|=128,r=!0,n0(o,!1),t.lanes=4194304)}else{if(!r)if(e=jw(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),n0(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Ni)return ta(t),null}else 2*bo()-o.renderingStartTime>E_&&n!==1073741824&&(t.flags|=128,r=!0,n0(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(n=o.last,n!==null?n.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=bo(),t.sibling=null,n=Vi.current,_i(Vi,r?n&1|2:n&1),t):(ta(t),null);case 22:case 23:return ML(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Rl&1073741824&&(ta(t),t.subtreeFlags&6&&(t.flags|=8192)):ta(t),null;case 24:return null;case 25:return null}throw Error(jt(156,t.tag))}function MV(e,t){switch(pL(t),t.tag){case 1:return ol(t.type)&&Rw(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return b_(),Ii(il),Ii(ia),EL(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wL(t),null;case 13:if(Ii(Vi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(jt(340));v_()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ii(Vi),null;case 4:return b_(),null;case 10:return _L(t.type._context),null;case 22:case 23:return ML(),null;case 24:return null;default:return null}}var pb=!1,na=!1,NV=typeof WeakSet=="function"?WeakSet:Set,fn=null;function jy(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ao(e,t,r)}else n.current=null}function WC(e,t,n){try{n()}catch(r){ao(e,t,r)}}var aM=!1;function DV(e,t){if(OC=Lw,e=X4(),fL(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var u=0,l=-1,p=-1,g=0,x=0,y=e,_=null;t:for(;;){for(var T;y!==n||i!==0&&y.nodeType!==3||(l=u+i),y!==o||r!==0&&y.nodeType!==3||(p=u+r),y.nodeType===3&&(u+=y.nodeValue.length),(T=y.firstChild)!==null;)_=y,y=T;for(;;){if(y===e)break t;if(_===n&&++g===i&&(l=u),_===o&&++x===r&&(p=u),(T=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=T}n=l===-1||p===-1?null:{start:l,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(kC={focusedElem:e,selectionRange:n},Lw=!1,fn=t;fn!==null;)if(t=fn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fn=e;else for(;fn!==null;){t=fn;try{var P=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var A=P.memoizedProps,M=P.memoizedState,k=t.stateNode,R=k.getSnapshotBeforeUpdate(t.elementType===t.type?A:Tc(t.type,A),M);k.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var z=t.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jt(163))}}catch(D){ao(t,t.return,D)}if(e=t.sibling,e!==null){e.return=t.return,fn=e;break}fn=t.return}return P=aM,aM=!1,P}function F0(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&WC(t,n,o)}i=i.next}while(i!==r)}}function FE(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function KC(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Zz(e){var t=e.alternate;t!==null&&(e.alternate=null,Zz(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vh],delete t[a1],delete t[NC],delete t[_V],delete t[vV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Wz(e){return e.tag===5||e.tag===3||e.tag===4}function lM(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wz(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function XC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=kw));else if(r!==4&&(e=e.child,e!==null))for(XC(e,t,n),e=e.sibling;e!==null;)XC(e,t,n),e=e.sibling}function YC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(YC(e,t,n),e=e.sibling;e!==null;)YC(e,t,n),e=e.sibling}var ks=null,Ic=!1;function Jd(e,t,n){for(n=n.child;n!==null;)Kz(e,t,n),n=n.sibling}function Kz(e,t,n){if(Zh&&typeof Zh.onCommitFiberUnmount=="function")try{Zh.onCommitFiberUnmount(AE,n)}catch{}switch(n.tag){case 5:na||jy(n,t);case 6:var r=ks,i=Ic;ks=null,Jd(e,t,n),ks=r,Ic=i,ks!==null&&(Ic?(e=ks,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ks.removeChild(n.stateNode));break;case 18:ks!==null&&(Ic?(e=ks,n=n.stateNode,e.nodeType===8?m2(e.parentNode,n):e.nodeType===1&&m2(e,n),n1(e)):m2(ks,n.stateNode));break;case 4:r=ks,i=Ic,ks=n.stateNode.containerInfo,Ic=!0,Jd(e,t,n),ks=r,Ic=i;break;case 0:case 11:case 14:case 15:if(!na&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&WC(n,t,u),i=i.next}while(i!==r)}Jd(e,t,n);break;case 1:if(!na&&(jy(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ao(n,t,l)}Jd(e,t,n);break;case 21:Jd(e,t,n);break;case 22:n.mode&1?(na=(r=na)||n.memoizedState!==null,Jd(e,t,n),na=r):Jd(e,t,n);break;default:Jd(e,t,n)}}function uM(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new NV),t.forEach(function(r){var i=GV.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function bc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,l=u;e:for(;l!==null;){switch(l.tag){case 5:ks=l.stateNode,Ic=!1;break e;case 3:ks=l.stateNode.containerInfo,Ic=!0;break e;case 4:ks=l.stateNode.containerInfo,Ic=!0;break e}l=l.return}if(ks===null)throw Error(jt(160));Kz(o,u,i),ks=null,Ic=!1;var p=i.alternate;p!==null&&(p.return=null),i.return=null}catch(g){ao(i,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Xz(t,e),t=t.sibling}function Xz(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bc(t,e),Ph(e),r&4){try{F0(3,e,e.return),FE(3,e)}catch(A){ao(e,e.return,A)}try{F0(5,e,e.return)}catch(A){ao(e,e.return,A)}}break;case 1:bc(t,e),Ph(e),r&512&&n!==null&&jy(n,n.return);break;case 5:if(bc(t,e),Ph(e),r&512&&n!==null&&jy(n,n.return),e.flags&32){var i=e.stateNode;try{J0(i,"")}catch(A){ao(e,e.return,A)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,u=n!==null?n.memoizedProps:o,l=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&y4(i,o),bC(l,u);var g=bC(l,o);for(u=0;u<p.length;u+=2){var x=p[u],y=p[u+1];x==="style"?w4(i,y):x==="dangerouslySetInnerHTML"?x4(i,y):x==="children"?J0(i,y):QP(i,x,y,g)}switch(l){case"input":gC(i,o);break;case"textarea":_4(i,o);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Hy(i,!!o.multiple,T,!1):_!==!!o.multiple&&(o.defaultValue!=null?Hy(i,!!o.multiple,o.defaultValue,!0):Hy(i,!!o.multiple,o.multiple?[]:"",!1))}i[a1]=o}catch(A){ao(e,e.return,A)}}break;case 6:if(bc(t,e),Ph(e),r&4){if(e.stateNode===null)throw Error(jt(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(A){ao(e,e.return,A)}}break;case 3:if(bc(t,e),Ph(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{n1(t.containerInfo)}catch(A){ao(e,e.return,A)}break;case 4:bc(t,e),Ph(e);break;case 13:bc(t,e),Ph(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(kL=bo())),r&4&&uM(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(na=(g=na)||x,bc(t,e),na=g):bc(t,e),Ph(e),r&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!x&&e.mode&1)for(fn=e,x=e.child;x!==null;){for(y=fn=x;fn!==null;){switch(_=fn,T=_.child,_.tag){case 0:case 11:case 14:case 15:F0(4,_,_.return);break;case 1:jy(_,_.return);var P=_.stateNode;if(typeof P.componentWillUnmount=="function"){r=_,n=_.return;try{t=r,P.props=t.memoizedProps,P.state=t.memoizedState,P.componentWillUnmount()}catch(A){ao(r,n,A)}}break;case 5:jy(_,_.return);break;case 22:if(_.memoizedState!==null){hM(y);continue}}T!==null?(T.return=_,fn=T):hM(y)}x=x.sibling}e:for(x=null,y=e;;){if(y.tag===5){if(x===null){x=y;try{i=y.stateNode,g?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=y.stateNode,p=y.memoizedProps.style,u=p!=null&&p.hasOwnProperty("display")?p.display:null,l.style.display=b4("display",u))}catch(A){ao(e,e.return,A)}}}else if(y.tag===6){if(x===null)try{y.stateNode.nodeValue=g?"":y.memoizedProps}catch(A){ao(e,e.return,A)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;x===y&&(x=null),y=y.return}x===y&&(x=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:bc(t,e),Ph(e),r&4&&uM(e);break;case 21:break;default:bc(t,e),Ph(e)}}function Ph(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Wz(n)){var r=n;break e}n=n.return}throw Error(jt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(J0(i,""),r.flags&=-33);var o=lM(e);YC(e,o,i);break;case 3:case 4:var u=r.stateNode.containerInfo,l=lM(e);XC(e,l,u);break;default:throw Error(jt(161))}}catch(p){ao(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zV(e,t,n){fn=e,Yz(e)}function Yz(e,t,n){for(var r=(e.mode&1)!==0;fn!==null;){var i=fn,o=i.child;if(i.tag===22&&r){var u=i.memoizedState!==null||pb;if(!u){var l=i.alternate,p=l!==null&&l.memoizedState!==null||na;l=pb;var g=na;if(pb=u,(na=p)&&!g)for(fn=i;fn!==null;)u=fn,p=u.child,u.tag===22&&u.memoizedState!==null?fM(i):p!==null?(p.return=u,fn=p):fM(i);for(;o!==null;)fn=o,Yz(o),o=o.sibling;fn=i,pb=l,na=g}cM(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,fn=o):cM(e)}}function cM(e){for(;fn!==null;){var t=fn;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:na||FE(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!na)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Tc(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&ZR(t,o,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ZR(t,u,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var x=g.memoizedState;if(x!==null){var y=x.dehydrated;y!==null&&n1(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jt(163))}na||t.flags&512&&KC(t)}catch(_){ao(t,t.return,_)}}if(t===e){fn=null;break}if(n=t.sibling,n!==null){n.return=t.return,fn=n;break}fn=t.return}}function hM(e){for(;fn!==null;){var t=fn;if(t===e){fn=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fn=n;break}fn=t.return}}function fM(e){for(;fn!==null;){var t=fn;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{FE(4,t)}catch(p){ao(t,n,p)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(p){ao(t,i,p)}}var o=t.return;try{KC(t)}catch(p){ao(t,o,p)}break;case 5:var u=t.return;try{KC(t)}catch(p){ao(t,u,p)}}}catch(p){ao(t,t.return,p)}if(t===e){fn=null;break}var l=t.sibling;if(l!==null){l.return=t.return,fn=l;break}fn=t.return}}var FV=Math.ceil,Vw=wd.ReactCurrentDispatcher,AL=wd.ReactCurrentOwner,Du=wd.ReactCurrentBatchConfig,Or=0,ls=null,Ao=null,Bs=0,Rl=0,$y=Qp(0),$o=0,d1=null,_g=0,BE=0,OL=0,B0=null,tl=null,kL=0,E_=1/0,Hf=null,qw=!1,JC=null,Lp=null,mb=!1,xp=null,Gw=0,j0=0,QC=null,rw=-1,iw=0;function Aa(){return Or&6?bo():rw!==-1?rw:rw=bo()}function Ap(e){return e.mode&1?Or&2&&Bs!==0?Bs&-Bs:bV.transition!==null?(iw===0&&(iw=M4()),iw):(e=Zr,e!==0||(e=window.event,e=e===void 0?16:$4(e.type)),e):1}function Nc(e,t,n,r){if(50<j0)throw j0=0,QC=null,Error(jt(185));ux(e,n,r),(!(Or&2)||e!==ls)&&(e===ls&&(!(Or&2)&&(BE|=n),$o===4&&up(e,Bs)),sl(e,r),n===1&&Or===0&&!(t.mode&1)&&(E_=bo()+500,NE&&em()))}function sl(e,t){var n=e.callbackNode;b9(e,t);var r=Pw(e,e===ls?Bs:0);if(r===0)n!==null&&bR(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&bR(n),t===1)e.tag===0?xV(dM.bind(null,e)):sz(dM.bind(null,e)),gV(function(){!(Or&6)&&em()}),n=null;else{switch(N4(r)){case 1:n=iL;break;case 4:n=k4;break;case 16:n=Iw;break;case 536870912:n=R4;break;default:n=Iw}n=oF(n,Jz.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Jz(e,t){if(rw=-1,iw=0,Or&6)throw Error(jt(327));var n=e.callbackNode;if(Yy()&&e.callbackNode!==n)return null;var r=Pw(e,e===ls?Bs:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Hw(e,r);else{t=r;var i=Or;Or|=2;var o=eF();(ls!==e||Bs!==t)&&(Hf=null,E_=bo()+500,sg(e,t));do try{$V();break}catch(l){Qz(e,l)}while(!0);yL(),Vw.current=o,Or=i,Ao!==null?t=0:(ls=null,Bs=0,t=$o)}if(t!==0){if(t===2&&(i=CC(e),i!==0&&(r=i,t=eI(e,i))),t===1)throw n=d1,sg(e,0),up(e,r),sl(e,bo()),n;if(t===6)up(e,r);else{if(i=e.current.alternate,!(r&30)&&!BV(i)&&(t=Hw(e,r),t===2&&(o=CC(e),o!==0&&(r=o,t=eI(e,o))),t===1))throw n=d1,sg(e,0),up(e,r),sl(e,bo()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(jt(345));case 2:Bm(e,tl,Hf);break;case 3:if(up(e,r),(r&130023424)===r&&(t=kL+500-bo(),10<t)){if(Pw(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Aa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=MC(Bm.bind(null,e,tl,Hf),t);break}Bm(e,tl,Hf);break;case 4:if(up(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-Mc(r);o=1<<u,u=t[u],u>i&&(i=u),r&=~o}if(r=i,r=bo()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FV(r/1960))-r,10<r){e.timeoutHandle=MC(Bm.bind(null,e,tl,Hf),r);break}Bm(e,tl,Hf);break;case 5:Bm(e,tl,Hf);break;default:throw Error(jt(329))}}}return sl(e,bo()),e.callbackNode===n?Jz.bind(null,e):null}function eI(e,t){var n=B0;return e.current.memoizedState.isDehydrated&&(sg(e,t).flags|=256),e=Hw(e,t),e!==2&&(t=tl,tl=n,t!==null&&tI(t)),e}function tI(e){tl===null?tl=e:tl.push.apply(tl,e)}function BV(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Bc(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function up(e,t){for(t&=~OL,t&=~BE,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Mc(t),r=1<<n;e[n]=-1,t&=~r}}function dM(e){if(Or&6)throw Error(jt(327));Yy();var t=Pw(e,0);if(!(t&1))return sl(e,bo()),null;var n=Hw(e,t);if(e.tag!==0&&n===2){var r=CC(e);r!==0&&(t=r,n=eI(e,r))}if(n===1)throw n=d1,sg(e,0),up(e,t),sl(e,bo()),n;if(n===6)throw Error(jt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bm(e,tl,Hf),sl(e,bo()),null}function RL(e,t){var n=Or;Or|=1;try{return e(t)}finally{Or=n,Or===0&&(E_=bo()+500,NE&&em())}}function vg(e){xp!==null&&xp.tag===0&&!(Or&6)&&Yy();var t=Or;Or|=1;var n=Du.transition,r=Zr;try{if(Du.transition=null,Zr=1,e)return e()}finally{Zr=r,Du.transition=n,Or=t,!(Or&6)&&em()}}function ML(){Rl=$y.current,Ii($y)}function sg(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mV(n)),Ao!==null)for(n=Ao.return;n!==null;){var r=n;switch(pL(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rw();break;case 3:b_(),Ii(il),Ii(ia),EL();break;case 5:wL(r);break;case 4:b_();break;case 13:Ii(Vi);break;case 19:Ii(Vi);break;case 10:_L(r.type._context);break;case 22:case 23:ML()}n=n.return}if(ls=e,Ao=e=Op(e.current,null),Bs=Rl=t,$o=0,d1=null,OL=BE=_g=0,tl=B0=null,Zm!==null){for(t=0;t<Zm.length;t++)if(n=Zm[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var u=o.next;o.next=i,r.next=u}n.pending=r}Zm=null}return e}function Qz(e,t){do{var n=Ao;try{if(yL(),ew.current=Uw,$w){for(var r=Wi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$w=!1}if(yg=0,ts=jo=Wi=null,z0=!1,c1=0,AL.current=null,n===null||n.return===null){$o=1,d1=t,Ao=null;break}e:{var o=e,u=n.return,l=n,p=t;if(t=Bs,l.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var g=p,x=l,y=x.tag;if(!(x.mode&1)&&(y===0||y===11||y===15)){var _=x.alternate;_?(x.updateQueue=_.updateQueue,x.memoizedState=_.memoizedState,x.lanes=_.lanes):(x.updateQueue=null,x.memoizedState=null)}var T=eM(u);if(T!==null){T.flags&=-257,tM(T,u,l,o,t),T.mode&1&&QR(o,g,t),t=T,p=g;var P=t.updateQueue;if(P===null){var A=new Set;A.add(p),t.updateQueue=A}else P.add(p);break e}else{if(!(t&1)){QR(o,g,t),NL();break e}p=Error(jt(426))}}else if(Ni&&l.mode&1){var M=eM(u);if(M!==null){!(M.flags&65536)&&(M.flags|=256),tM(M,u,l,o,t),mL(w_(p,l));break e}}o=p=w_(p,l),$o!==4&&($o=2),B0===null?B0=[o]:B0.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var k=Dz(o,p,t);HR(o,k);break e;case 1:l=p;var R=o.type,z=o.stateNode;if(!(o.flags&128)&&(typeof R.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Lp===null||!Lp.has(z)))){o.flags|=65536,t&=-t,o.lanes|=t;var D=zz(o,l,t);HR(o,D);break e}}o=o.return}while(o!==null)}nF(n)}catch(U){t=U,Ao===n&&n!==null&&(Ao=n=n.return);continue}break}while(!0)}function eF(){var e=Vw.current;return Vw.current=Uw,e===null?Uw:e}function NL(){($o===0||$o===3||$o===2)&&($o=4),ls===null||!(_g&268435455)&&!(BE&268435455)||up(ls,Bs)}function Hw(e,t){var n=Or;Or|=2;var r=eF();(ls!==e||Bs!==t)&&(Hf=null,sg(e,t));do try{jV();break}catch(i){Qz(e,i)}while(!0);if(yL(),Or=n,Vw.current=r,Ao!==null)throw Error(jt(261));return ls=null,Bs=0,$o}function jV(){for(;Ao!==null;)tF(Ao)}function $V(){for(;Ao!==null&&!f9();)tF(Ao)}function tF(e){var t=iF(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,t===null?nF(e):Ao=t,AL.current=null}function nF(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=MV(n,t),n!==null){n.flags&=32767,Ao=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$o=6,Ao=null;return}}else if(n=RV(n,t,Rl),n!==null){Ao=n;return}if(t=t.sibling,t!==null){Ao=t;return}Ao=t=e}while(t!==null);$o===0&&($o=5)}function Bm(e,t,n){var r=Zr,i=Du.transition;try{Du.transition=null,Zr=1,UV(e,t,n,r)}finally{Du.transition=i,Zr=r}return null}function UV(e,t,n,r){do Yy();while(xp!==null);if(Or&6)throw Error(jt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(jt(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(w9(e,o),e===ls&&(Ao=ls=null,Bs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mb||(mb=!0,oF(Iw,function(){return Yy(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Du.transition,Du.transition=null;var u=Zr;Zr=1;var l=Or;Or|=4,AL.current=null,DV(e,n),Xz(n,e),lV(kC),Lw=!!OC,kC=OC=null,e.current=n,zV(n),d9(),Or=l,Zr=u,Du.transition=o}else e.current=n;if(mb&&(mb=!1,xp=e,Gw=i),o=e.pendingLanes,o===0&&(Lp=null),g9(n.stateNode),sl(e,bo()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qw)throw qw=!1,e=JC,JC=null,e;return Gw&1&&e.tag!==0&&Yy(),o=e.pendingLanes,o&1?e===QC?j0++:(j0=0,QC=e):j0=0,em(),null}function Yy(){if(xp!==null){var e=N4(Gw),t=Du.transition,n=Zr;try{if(Du.transition=null,Zr=16>e?16:e,xp===null)var r=!1;else{if(e=xp,xp=null,Gw=0,Or&6)throw Error(jt(331));var i=Or;for(Or|=4,fn=e.current;fn!==null;){var o=fn,u=o.child;if(fn.flags&16){var l=o.deletions;if(l!==null){for(var p=0;p<l.length;p++){var g=l[p];for(fn=g;fn!==null;){var x=fn;switch(x.tag){case 0:case 11:case 15:F0(8,x,o)}var y=x.child;if(y!==null)y.return=x,fn=y;else for(;fn!==null;){x=fn;var _=x.sibling,T=x.return;if(Zz(x),x===g){fn=null;break}if(_!==null){_.return=T,fn=_;break}fn=T}}}var P=o.alternate;if(P!==null){var A=P.child;if(A!==null){P.child=null;do{var M=A.sibling;A.sibling=null,A=M}while(A!==null)}}fn=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,fn=u;else e:for(;fn!==null;){if(o=fn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:F0(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,fn=k;break e}fn=o.return}}var R=e.current;for(fn=R;fn!==null;){u=fn;var z=u.child;if(u.subtreeFlags&2064&&z!==null)z.return=u,fn=z;else e:for(u=R;fn!==null;){if(l=fn,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:FE(9,l)}}catch(U){ao(l,l.return,U)}if(l===u){fn=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,fn=D;break e}fn=l.return}}if(Or=i,em(),Zh&&typeof Zh.onPostCommitFiberRoot=="function")try{Zh.onPostCommitFiberRoot(AE,e)}catch{}r=!0}return r}finally{Zr=n,Du.transition=t}}return!1}function pM(e,t,n){t=w_(n,t),t=Dz(e,t,1),e=Pp(e,t,1),t=Aa(),e!==null&&(ux(e,1,t),sl(e,t))}function ao(e,t,n){if(e.tag===3)pM(e,e,n);else for(;t!==null;){if(t.tag===3){pM(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lp===null||!Lp.has(r))){e=w_(n,e),e=zz(t,e,1),t=Pp(t,e,1),e=Aa(),t!==null&&(ux(t,1,e),sl(t,e));break}}t=t.return}}function VV(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Aa(),e.pingedLanes|=e.suspendedLanes&n,ls===e&&(Bs&n)===n&&($o===4||$o===3&&(Bs&130023424)===Bs&&500>bo()-kL?sg(e,0):OL|=n),sl(e,t)}function rF(e,t){t===0&&(e.mode&1?(t=ob,ob<<=1,!(ob&130023424)&&(ob=4194304)):t=1);var n=Aa();e=ad(e,t),e!==null&&(ux(e,t,n),sl(e,n))}function qV(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),rF(e,n)}function GV(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(jt(314))}r!==null&&r.delete(t),rF(e,n)}var iF;iF=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||il.current)rl=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return rl=!1,kV(e,t,n);rl=!!(e.flags&131072)}else rl=!1,Ni&&t.flags&1048576&&az(t,Dw,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;nw(e,t),e=t.pendingProps;var i=__(t,ia.current);Xy(t,n),i=TL(null,t,r,e,i,n);var o=CL();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ol(r)?(o=!0,Mw(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xL(t),i.updater=DE,t.stateNode=i,i._reactInternals=t,$C(t,r,e,n),t=qC(null,t,r,!0,o,n)):(t.tag=0,Ni&&o&&dL(t),Ca(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(nw(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=ZV(r),e=Tc(r,e),i){case 0:t=VC(null,t,r,e,n);break e;case 1:t=iM(null,t,r,e,n);break e;case 11:t=nM(null,t,r,e,n);break e;case 14:t=rM(null,t,r,Tc(r.type,e),n);break e}throw Error(jt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Tc(r,i),VC(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Tc(r,i),iM(e,t,r,i,n);case 3:e:{if($z(t),e===null)throw Error(jt(387));r=t.pendingProps,o=t.memoizedState,i=o.element,hz(e,t),Bw(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=w_(Error(jt(423)),t),t=oM(e,t,r,n,i);break e}else if(r!==i){i=w_(Error(jt(424)),t),t=oM(e,t,r,n,i);break e}else for(Nl=Ip(t.stateNode.containerInfo.firstChild),jl=t,Ni=!0,Ac=null,n=mz(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(v_(),r===i){t=ld(e,t,n);break e}Ca(e,t,r,n)}t=t.child}return t;case 5:return gz(t),e===null&&FC(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,u=i.children,RC(r,i)?u=null:o!==null&&RC(r,o)&&(t.flags|=32),jz(e,t),Ca(e,t,u,n),t.child;case 6:return e===null&&FC(t),null;case 13:return Uz(e,t,n);case 4:return bL(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=x_(t,null,r,n):Ca(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Tc(r,i),nM(e,t,r,i,n);case 7:return Ca(e,t,t.pendingProps,n),t.child;case 8:return Ca(e,t,t.pendingProps.children,n),t.child;case 12:return Ca(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,_i(zw,r._currentValue),r._currentValue=u,o!==null)if(Bc(o.value,u)){if(o.children===i.children&&!il.current){t=ld(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){u=o.child;for(var p=l.firstContext;p!==null;){if(p.context===r){if(o.tag===1){p=ed(-1,n&-n),p.tag=2;var g=o.updateQueue;if(g!==null){g=g.shared;var x=g.pending;x===null?p.next=p:(p.next=x.next,x.next=p),g.pending=p}}o.lanes|=n,p=o.alternate,p!==null&&(p.lanes|=n),BC(o.return,n,t),l.lanes|=n;break}p=p.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(jt(341));u.lanes|=n,l=u.alternate,l!==null&&(l.lanes|=n),BC(u,n,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}Ca(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Xy(t,n),i=$u(i),r=r(i),t.flags|=1,Ca(e,t,r,n),t.child;case 14:return r=t.type,i=Tc(r,t.pendingProps),i=Tc(r.type,i),rM(e,t,r,i,n);case 15:return Fz(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Tc(r,i),nw(e,t),t.tag=1,ol(r)?(e=!0,Mw(t)):e=!1,Xy(t,n),dz(t,r,i),$C(t,r,i,n),qC(null,t,r,!0,e,n);case 19:return Vz(e,t,n);case 22:return Bz(e,t,n)}throw Error(jt(156,t.tag))};function oF(e,t){return O4(e,t)}function HV(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,r){return new HV(e,t,n,r)}function DL(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ZV(e){if(typeof e=="function")return DL(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tL)return 11;if(e===nL)return 14}return 2}function Op(e,t){var n=e.alternate;return n===null?(n=Mu(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ow(e,t,n,r,i,o){var u=2;if(r=e,typeof e=="function")DL(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case Oy:return ag(n.children,i,o,t);case eL:u=8,i|=8;break;case hC:return e=Mu(12,n,t,i|2),e.elementType=hC,e.lanes=o,e;case fC:return e=Mu(13,n,t,i),e.elementType=fC,e.lanes=o,e;case dC:return e=Mu(19,n,t,i),e.elementType=dC,e.lanes=o,e;case p4:return jE(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case f4:u=10;break e;case d4:u=9;break e;case tL:u=11;break e;case nL:u=14;break e;case sp:u=16,r=null;break e}throw Error(jt(130,e==null?e:typeof e,""))}return t=Mu(u,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function ag(e,t,n,r){return e=Mu(7,e,r,t),e.lanes=n,e}function jE(e,t,n,r){return e=Mu(22,e,r,t),e.elementType=p4,e.lanes=n,e.stateNode={isHidden:!1},e}function E2(e,t,n){return e=Mu(6,e,null,t),e.lanes=n,e}function S2(e,t,n){return t=Mu(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WV(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=i2(0),this.expirationTimes=i2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=i2(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zL(e,t,n,r,i,o,u,l,p){return e=new WV(e,t,n,l,p),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Mu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xL(o),e}function KV(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ay,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function sF(e){if(!e)return Dp;e=e._reactInternals;e:{if(Fg(e)!==e||e.tag!==1)throw Error(jt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ol(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(jt(171))}if(e.tag===1){var n=e.type;if(ol(n))return oz(e,n,t)}return t}function aF(e,t,n,r,i,o,u,l,p){return e=zL(n,r,!0,e,i,o,u,l,p),e.context=sF(null),n=e.current,r=Aa(),i=Ap(n),o=ed(r,i),o.callback=t??null,Pp(n,o,i),e.current.lanes=i,ux(e,i,r),sl(e,r),e}function $E(e,t,n,r){var i=t.current,o=Aa(),u=Ap(i);return n=sF(n),t.context===null?t.context=n:t.pendingContext=n,t=ed(o,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Pp(i,t,u),e!==null&&(Nc(e,i,u,o),Qb(e,i,u)),u}function Zw(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mM(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function FL(e,t){mM(e,t),(e=e.alternate)&&mM(e,t)}function XV(){return null}var lF=typeof reportError=="function"?reportError:function(e){console.error(e)};function BL(e){this._internalRoot=e}UE.prototype.render=BL.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(jt(409));$E(e,t,null,null)};UE.prototype.unmount=BL.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vg(function(){$E(null,e,null,null)}),t[sd]=null}};function UE(e){this._internalRoot=e}UE.prototype.unstable_scheduleHydration=function(e){if(e){var t=F4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<lp.length&&t!==0&&t<lp[n].priority;n++);lp.splice(n,0,e),n===0&&j4(e)}};function jL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function VE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gM(){}function YV(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var g=Zw(u);o.call(g)}}var u=aF(t,r,e,0,null,!1,!1,"",gM);return e._reactRootContainer=u,e[sd]=u.current,o1(e.nodeType===8?e.parentNode:e),vg(),u}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var g=Zw(p);l.call(g)}}var p=zL(e,0,!1,null,null,!1,!1,"",gM);return e._reactRootContainer=p,e[sd]=p.current,o1(e.nodeType===8?e.parentNode:e),vg(function(){$E(t,p,n,r)}),p}function qE(e,t,n,r,i){var o=n._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var l=i;i=function(){var p=Zw(u);l.call(p)}}$E(t,u,e,i)}else u=YV(n,t,e,i,r);return Zw(u)}D4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=x0(t.pendingLanes);n!==0&&(oL(t,n|1),sl(t,bo()),!(Or&6)&&(E_=bo()+500,em()))}break;case 13:vg(function(){var r=ad(e,1);if(r!==null){var i=Aa();Nc(r,e,1,i)}}),FL(e,1)}};sL=function(e){if(e.tag===13){var t=ad(e,134217728);if(t!==null){var n=Aa();Nc(t,e,134217728,n)}FL(e,134217728)}};z4=function(e){if(e.tag===13){var t=Ap(e),n=ad(e,t);if(n!==null){var r=Aa();Nc(n,e,t,r)}FL(e,t)}};F4=function(){return Zr};B4=function(e,t){var n=Zr;try{return Zr=e,t()}finally{Zr=n}};EC=function(e,t,n){switch(t){case"input":if(gC(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ME(r);if(!i)throw Error(jt(90));g4(r),gC(r,i)}}}break;case"textarea":_4(e,n);break;case"select":t=n.value,t!=null&&Hy(e,!!n.multiple,t,!1)}};T4=RL;C4=vg;var JV={usingClientEntryPoint:!1,Events:[hx,Ny,ME,E4,S4,RL]},r0={findFiberByHostInstance:Hm,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},QV={bundleType:r0.bundleType,version:r0.version,rendererPackageName:r0.rendererPackageName,rendererConfig:r0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=L4(e),e===null?null:e.stateNode},findFiberByHostInstance:r0.findFiberByHostInstance||XV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gb.isDisabled&&gb.supportsFiber)try{AE=gb.inject(QV),Zh=gb}catch{}}Ql.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JV;Ql.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jL(t))throw Error(jt(200));return KV(e,t,null,n)};Ql.createRoot=function(e,t){if(!jL(e))throw Error(jt(299));var n=!1,r="",i=lF;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=zL(e,1,!1,null,null,n,!1,r,i),e[sd]=t.current,o1(e.nodeType===8?e.parentNode:e),new BL(t)};Ql.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(jt(188)):(e=Object.keys(e).join(","),Error(jt(268,e)));return e=L4(t),e=e===null?null:e.stateNode,e};Ql.flushSync=function(e){return vg(e)};Ql.hydrate=function(e,t,n){if(!VE(t))throw Error(jt(200));return qE(null,e,t,!0,n)};Ql.hydrateRoot=function(e,t,n){if(!jL(e))throw Error(jt(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",u=lF;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=aF(t,null,e,1,n??null,i,!1,o,u),e[sd]=t.current,o1(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new UE(t)};Ql.render=function(e,t,n){if(!VE(t))throw Error(jt(200));return qE(null,e,t,!1,n)};Ql.unmountComponentAtNode=function(e){if(!VE(e))throw Error(jt(40));return e._reactRootContainer?(vg(function(){qE(null,null,e,!1,function(){e._reactRootContainer=null,e[sd]=null})}),!0):!1};Ql.unstable_batchedUpdates=RL;Ql.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!VE(n))throw Error(jt(200));if(e==null||e._reactInternals===void 0)throw Error(jt(38));return qE(e,t,n,!1,r)};Ql.version="18.2.0-next-9e3b772b8-20220608";function uF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uF)}catch(e){console.error(e)}}uF(),a4.exports=Ql;var GE=a4.exports;const eq=bd(GE),tq=X5({__proto__:null,default:eq},[GE]);var yM=GE;uC.createRoot=yM.createRoot,uC.hydrateRoot=yM.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lo.apply(this,arguments)}var vo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(vo||(vo={}));const _M="popstate";function nq(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:u,hash:l}=r.location;return p1("",{pathname:o,search:u,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:xg(i)}return iq(t,n,null,e)}function er(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function S_(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rq(){return Math.random().toString(36).substr(2,8)}function vM(e,t){return{usr:e.state,key:e.key,idx:t}}function p1(e,t,n,r){return n===void 0&&(n=null),lo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ed(t):t,{state:n,key:t&&t.key||r||rq()})}function xg(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ed(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function iq(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,u=i.history,l=vo.Pop,p=null,g=x();g==null&&(g=0,u.replaceState(lo({},u.state,{idx:g}),""));function x(){return(u.state||{idx:null}).idx}function y(){l=vo.Pop;let M=x(),k=M==null?null:M-g;g=M,p&&p({action:l,location:A.location,delta:k})}function _(M,k){l=vo.Push;let R=p1(A.location,M,k);n&&n(R,M),g=x()+1;let z=vM(R,g),D=A.createHref(R);try{u.pushState(z,"",D)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(D)}o&&p&&p({action:l,location:A.location,delta:1})}function T(M,k){l=vo.Replace;let R=p1(A.location,M,k);n&&n(R,M),g=x();let z=vM(R,g),D=A.createHref(R);u.replaceState(z,"",D),o&&p&&p({action:l,location:A.location,delta:0})}function P(M){let k=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof M=="string"?M:xg(M);return R=R.replace(/ $/,"%20"),er(k,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,k)}let A={get action(){return l},get location(){return e(i,u)},listen(M){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(_M,y),p=M,()=>{i.removeEventListener(_M,y),p=null}},createHref(M){return t(i,M)},createURL:P,encodeLocation(M){let k=P(M);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:_,replace:T,go(M){return u.go(M)}};return A}var so;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(so||(so={}));const oq=new Set(["lazy","caseSensitive","path","id","index","children"]);function sq(e){return e.index===!0}function nI(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((i,o)=>{let u=[...n,o],l=typeof i.id=="string"?i.id:u.join("-");if(er(i.index!==!0||!i.children,"Cannot specify children on an index route"),er(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),sq(i)){let p=lo({},i,t(i),{id:l});return r[l]=p,p}else{let p=lo({},i,t(i),{id:l,children:void 0});return r[l]=p,i.children&&(p.children=nI(i.children,t,u,r)),p}})}function Uy(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Ed(t):t,i=nv(r.pathname||"/",n);if(i==null)return null;let o=cF(e);lq(o);let u=null;for(let l=0;u==null&&l<o.length;++l){let p=xq(i);u=yq(o[l],p)}return u}function aq(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function cF(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,u,l)=>{let p={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};p.relativePath.startsWith("/")&&(er(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let g=td([r,p.relativePath]),x=n.concat(p);o.children&&o.children.length>0&&(er(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),cF(o.children,t,x,g)),!(o.path==null&&!o.index)&&t.push({path:g,score:mq(g,o.index),routesMeta:x})};return e.forEach((o,u)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,u);else for(let p of hF(o.path))i(o,u,p)}),t}function hF(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let u=hF(r.join("/")),l=[];return l.push(...u.map(p=>p===""?o:[o,p].join("/"))),i&&l.push(...u),l.map(p=>e.startsWith("/")&&p===""?"/":p)}function lq(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:gq(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uq=/^:[\w-]+$/,cq=3,hq=2,fq=1,dq=10,pq=-2,xM=e=>e==="*";function mq(e,t){let n=e.split("/"),r=n.length;return n.some(xM)&&(r+=pq),t&&(r+=hq),n.filter(i=>!xM(i)).reduce((i,o)=>i+(uq.test(o)?cq:o===""?fq:dq),r)}function gq(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function yq(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let u=0;u<n.length;++u){let l=n[u],p=u===n.length-1,g=i==="/"?t:t.slice(i.length)||"/",x=_q({path:l.relativePath,caseSensitive:l.caseSensitive,end:p},g);if(!x)return null;Object.assign(r,x.params);let y=l.route;o.push({params:r,pathname:td([i,x.pathname]),pathnameBase:Eq(td([i,x.pathnameBase])),route:y}),x.pathnameBase!=="/"&&(i=td([i,x.pathnameBase]))}return o}function _q(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=vq(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((g,x,y)=>{let{paramName:_,isOptional:T}=x;if(_==="*"){let A=l[y]||"";u=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const P=l[y];return T&&!P?g[_]=void 0:g[_]=(P||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:u,pattern:e}}function vq(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),S_(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,l,p)=>(r.push({paramName:l,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function xq(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return S_(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function nv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function bq(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ed(e):e;return{pathname:n?n.startsWith("/")?n:wq(n,t):t,search:Sq(r),hash:Tq(i)}}function wq(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function T2(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function HE(e,t){let n=fF(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ZE(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Ed(e):(i=lo({},e),er(!i.pathname||!i.pathname.includes("?"),T2("?","pathname","search",i)),er(!i.pathname||!i.pathname.includes("#"),T2("#","pathname","hash",i)),er(!i.search||!i.search.includes("#"),T2("#","search","hash",i)));let o=e===""||i.pathname==="",u=o?"/":i.pathname,l;if(u==null)l=n;else{let y=t.length-1;if(!r&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),y-=1;i.pathname=_.join("/")}l=y>=0?t[y]:"/"}let p=bq(i,l),g=u&&u!=="/"&&u.endsWith("/"),x=(o||u===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||x)&&(p.pathname+="/"),p}const td=e=>e.join("/").replace(/\/\/+/g,"/"),Eq=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Sq=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Tq=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class $L{constructor(t,n,r,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function dF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const pF=["post","put","patch","delete"],Cq=new Set(pF),Iq=["get",...pF],Pq=new Set(Iq),Lq=new Set([301,302,303,307,308]),Aq=new Set([307,308]),C2={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Oq={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},i0={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},mF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kq=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),gF="remix-router-transitions";function Rq(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;er(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let K=e.detectErrorBoundary;i=te=>({hasErrorBoundary:K(te)})}else i=kq;let o={},u=nI(e.routes,i,void 0,o),l,p=e.basename||"/",g=lo({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),x=null,y=new Set,_=null,T=null,P=null,A=e.hydrationData!=null,M=Uy(u,e.history.location,p),k=null;if(M==null){let K=Iu(404,{pathname:e.history.location.pathname}),{matches:te,route:le}=PM(u);M=te,k={[le.id]:K}}let R,z=M.some(K=>K.route.lazy),D=M.some(K=>K.route.loader);if(z)R=!1;else if(!D)R=!0;else if(g.v7_partialHydration){let K=e.hydrationData?e.hydrationData.loaderData:null,te=e.hydrationData?e.hydrationData.errors:null,le=pe=>pe.route.loader?pe.route.loader.hydrate===!0?!1:K&&K[pe.route.id]!==void 0||te&&te[pe.route.id]!==void 0:!0;if(te){let pe=M.findIndex(ke=>te[ke.route.id]!==void 0);R=M.slice(0,pe+1).every(le)}else R=M.every(le)}else R=e.hydrationData!=null;let U,V={historyAction:e.history.action,location:e.history.location,matches:M,initialized:R,navigation:C2,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||k,fetchers:new Map,blockers:new Map},G=vo.Pop,H=!1,J,Y=!1,X=new Map,ee=null,ce=!1,oe=!1,we=[],Ne=[],Be=new Map,De=0,Ae=-1,ve=new Map,he=new Set,xe=new Map,Ee=new Map,Ge=new Set,$e=new Map,be=new Map,He=!1;function it(){if(x=e.history.listen(K=>{let{action:te,location:le,delta:pe}=K;if(He){He=!1;return}S_(be.size===0||pe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ke=Pn({currentLocation:V.location,nextLocation:le,historyAction:te});if(ke&&pe!=null){He=!0,e.history.go(pe*-1),_n(ke,{state:"blocked",location:le,proceed(){_n(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:le}),e.history.go(pe)},reset(){let ge=new Map(V.blockers);ge.set(ke,i0),Dt({blockers:ge})}});return}return Gt(te,le)}),n){qq(t,X);let K=()=>Gq(t,X);t.addEventListener("pagehide",K),ee=()=>t.removeEventListener("pagehide",K)}return V.initialized||Gt(vo.Pop,V.location,{initialHydration:!0}),U}function ct(){x&&x(),ee&&ee(),y.clear(),J&&J.abort(),V.fetchers.forEach((K,te)=>wn(te)),V.blockers.forEach((K,te)=>kt(te))}function xt(K){return y.add(K),()=>y.delete(K)}function Dt(K,te){te===void 0&&(te={}),V=lo({},V,K);let le=[],pe=[];g.v7_fetcherPersist&&V.fetchers.forEach((ke,ge)=>{ke.state==="idle"&&(Ge.has(ge)?pe.push(ge):le.push(ge))}),[...y].forEach(ke=>ke(V,{deletedFetchers:pe,unstable_viewTransitionOpts:te.viewTransitionOpts,unstable_flushSync:te.flushSync===!0})),g.v7_fetcherPersist&&(le.forEach(ke=>V.fetchers.delete(ke)),pe.forEach(ke=>wn(ke)))}function Qt(K,te,le){var pe,ke;let{flushSync:ge}=le===void 0?{}:le,ze=V.actionData!=null&&V.navigation.formMethod!=null&&Pc(V.navigation.formMethod)&&V.navigation.state==="loading"&&((pe=K.state)==null?void 0:pe._isRedirect)!==!0,Ie;te.actionData?Object.keys(te.actionData).length>0?Ie=te.actionData:Ie=null:ze?Ie=V.actionData:Ie=null;let qe=te.loaderData?IM(V.loaderData,te.loaderData,te.matches||[],te.errors):V.loaderData,Qe=V.blockers;Qe.size>0&&(Qe=new Map(Qe),Qe.forEach((ht,Zt)=>Qe.set(Zt,i0)));let ot=H===!0||V.navigation.formMethod!=null&&Pc(V.navigation.formMethod)&&((ke=K.state)==null?void 0:ke._isRedirect)!==!0;l&&(u=l,l=void 0),ce||G===vo.Pop||(G===vo.Push?e.history.push(K,K.state):G===vo.Replace&&e.history.replace(K,K.state));let et;if(G===vo.Pop){let ht=X.get(V.location.pathname);ht&&ht.has(K.pathname)?et={currentLocation:V.location,nextLocation:K}:X.has(K.pathname)&&(et={currentLocation:K,nextLocation:V.location})}else if(Y){let ht=X.get(V.location.pathname);ht?ht.add(K.pathname):(ht=new Set([K.pathname]),X.set(V.location.pathname,ht)),et={currentLocation:V.location,nextLocation:K}}Dt(lo({},te,{actionData:Ie,loaderData:qe,historyAction:G,location:K,initialized:!0,navigation:C2,revalidation:"idle",restoreScrollPosition:qr(K,te.matches||V.matches),preventScrollReset:ot,blockers:Qe}),{viewTransitionOpts:et,flushSync:ge===!0}),G=vo.Pop,H=!1,Y=!1,ce=!1,oe=!1,we=[],Ne=[]}async function Ft(K,te){if(typeof K=="number"){e.history.go(K);return}let le=rI(V.location,V.matches,p,g.v7_prependBasename,K,g.v7_relativeSplatPath,te==null?void 0:te.fromRouteId,te==null?void 0:te.relative),{path:pe,submission:ke,error:ge}=bM(g.v7_normalizeFormMethod,!1,le,te),ze=V.location,Ie=p1(V.location,pe,te&&te.state);Ie=lo({},Ie,e.history.encodeLocation(Ie));let qe=te&&te.replace!=null?te.replace:void 0,Qe=vo.Push;qe===!0?Qe=vo.Replace:qe===!1||ke!=null&&Pc(ke.formMethod)&&ke.formAction===V.location.pathname+V.location.search&&(Qe=vo.Replace);let ot=te&&"preventScrollReset"in te?te.preventScrollReset===!0:void 0,et=(te&&te.unstable_flushSync)===!0,ht=Pn({currentLocation:ze,nextLocation:Ie,historyAction:Qe});if(ht){_n(ht,{state:"blocked",location:Ie,proceed(){_n(ht,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),Ft(K,te)},reset(){let Zt=new Map(V.blockers);Zt.set(ht,i0),Dt({blockers:Zt})}});return}return await Gt(Qe,Ie,{submission:ke,pendingError:ge,preventScrollReset:ot,replace:te&&te.replace,enableViewTransition:te&&te.unstable_viewTransition,flushSync:et})}function Kt(){if(vt(),Dt({revalidation:"loading"}),V.navigation.state!=="submitting"){if(V.navigation.state==="idle"){Gt(V.historyAction,V.location,{startUninterruptedRevalidation:!0});return}Gt(G||V.historyAction,V.navigation.location,{overrideNavigation:V.navigation})}}async function Gt(K,te,le){J&&J.abort(),J=null,G=K,ce=(le&&le.startUninterruptedRevalidation)===!0,Hs(V.location,V.matches),H=(le&&le.preventScrollReset)===!0,Y=(le&&le.enableViewTransition)===!0;let pe=l||u,ke=le&&le.overrideNavigation,ge=Uy(pe,te,p),ze=(le&&le.flushSync)===!0;if(!ge){let Zt=Iu(404,{pathname:te.pathname}),{matches:an,route:sn}=PM(pe);Cr(),Qt(te,{matches:an,loaderData:{},errors:{[sn.id]:Zt}},{flushSync:ze});return}if(V.initialized&&!oe&&Fq(V.location,te)&&!(le&&le.submission&&Pc(le.submission.formMethod))){Qt(te,{matches:ge},{flushSync:ze});return}J=new AbortController;let Ie=s0(e.history,te,J.signal,le&&le.submission),qe,Qe;if(le&&le.pendingError)Qe={[$0(ge).route.id]:le.pendingError};else if(le&&le.submission&&Pc(le.submission.formMethod)){let Zt=await Tr(Ie,te,le.submission,ge,{replace:le.replace,flushSync:ze});if(Zt.shortCircuited)return;qe=Zt.pendingActionData,Qe=Zt.pendingActionError,ke=I2(te,le.submission),ze=!1,Ie=new Request(Ie.url,{signal:Ie.signal})}let{shortCircuited:ot,loaderData:et,errors:ht}=await rt(Ie,te,ge,ke,le&&le.submission,le&&le.fetcherSubmission,le&&le.replace,le&&le.initialHydration===!0,ze,qe,Qe);ot||(J=null,Qt(te,lo({matches:ge},qe?{actionData:qe}:{},{loaderData:et,errors:ht})))}async function Tr(K,te,le,pe,ke){ke===void 0&&(ke={}),vt();let ge=Uq(te,le);Dt({navigation:ge},{flushSync:ke.flushSync===!0});let ze,Ie=oI(pe,te);if(!Ie.route.action&&!Ie.route.lazy)ze={type:so.error,error:Iu(405,{method:K.method,pathname:te.pathname,routeId:Ie.route.id})};else if(ze=await o0("action",K,Ie,pe,o,i,p,g.v7_relativeSplatPath),K.signal.aborted)return{shortCircuited:!0};if(Xm(ze)){let qe;return ke&&ke.replace!=null?qe=ke.replace:qe=ze.location===V.location.pathname+V.location.search,await Pt(V,ze,{submission:le,replace:qe}),{shortCircuited:!0}}if(Vy(ze)){let qe=$0(pe,Ie.route.id);return(ke&&ke.replace)!==!0&&(G=vo.Push),{pendingActionData:{},pendingActionError:{[qe.route.id]:ze.error}}}if(Km(ze))throw Iu(400,{type:"defer-action"});return{pendingActionData:{[Ie.route.id]:ze.data}}}async function rt(K,te,le,pe,ke,ge,ze,Ie,qe,Qe,ot){let et=pe||I2(te,ke),ht=ke||ge||OM(et),Zt=l||u,[an,sn]=wM(e.history,V,le,ht,te,g.v7_partialHydration&&Ie===!0,oe,we,Ne,Ge,xe,he,Zt,p,Qe,ot);if(Cr(Bn=>!(le&&le.some(cr=>cr.route.id===Bn))||an&&an.some(cr=>cr.route.id===Bn)),Ae=++De,an.length===0&&sn.length===0){let Bn=_r();return Qt(te,lo({matches:le,loaderData:{},errors:ot||null},Qe?{actionData:Qe}:{},Bn?{fetchers:new Map(V.fetchers)}:{}),{flushSync:qe}),{shortCircuited:!0}}if(!ce&&(!g.v7_partialHydration||!Ie)){sn.forEach(cr=>{let To=V.fetchers.get(cr.key),sr=a0(void 0,To?To.data:void 0);V.fetchers.set(cr.key,sr)});let Bn=Qe||V.actionData;Dt(lo({navigation:et},Bn?Object.keys(Bn).length===0?{actionData:null}:{actionData:Bn}:{},sn.length>0?{fetchers:new Map(V.fetchers)}:{}),{flushSync:qe})}sn.forEach(Bn=>{Be.has(Bn.key)&&bt(Bn.key),Bn.controller&&Be.set(Bn.key,Bn.controller)});let Rn=()=>sn.forEach(Bn=>bt(Bn.key));J&&J.signal.addEventListener("abort",Rn);let{results:or,loaderResults:fr,fetcherResults:ur}=await je(V.matches,le,an,sn,K);if(K.signal.aborted)return{shortCircuited:!0};J&&J.signal.removeEventListener("abort",Rn),sn.forEach(Bn=>Be.delete(Bn.key));let vn=LM(or);if(vn){if(vn.idx>=an.length){let Bn=sn[vn.idx-an.length].key;he.add(Bn)}return await Pt(V,vn.result,{replace:ze}),{shortCircuited:!0}}let{loaderData:Nr,errors:Gr}=CM(V,le,an,fr,ot,sn,ur,$e);$e.forEach((Bn,cr)=>{Bn.subscribe(To=>{(To||Bn.done)&&$e.delete(cr)})}),g.v7_partialHydration&&Ie&&V.errors&&Object.entries(V.errors).filter(Bn=>{let[cr]=Bn;return!an.some(To=>To.route.id===cr)}).forEach(Bn=>{let[cr,To]=Bn;Gr=Object.assign(Gr||{},{[cr]:To})});let ji=_r(),bi=Gs(Ae),Yr=ji||bi||sn.length>0;return lo({loaderData:Nr,errors:Gr},Yr?{fetchers:new Map(V.fetchers)}:{})}function lt(K,te,le,pe){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Be.has(K)&&bt(K);let ke=(pe&&pe.unstable_flushSync)===!0,ge=l||u,ze=rI(V.location,V.matches,p,g.v7_prependBasename,le,g.v7_relativeSplatPath,te,pe==null?void 0:pe.relative),Ie=Uy(ge,ze,p);if(!Ie){Lt(K,te,Iu(404,{pathname:ze}),{flushSync:ke});return}let{path:qe,submission:Qe,error:ot}=bM(g.v7_normalizeFormMethod,!0,ze,pe);if(ot){Lt(K,te,ot,{flushSync:ke});return}let et=oI(Ie,qe);if(H=(pe&&pe.preventScrollReset)===!0,Qe&&Pc(Qe.formMethod)){gt(K,te,qe,et,Ie,ke,Qe);return}xe.set(K,{routeId:te,path:qe}),_t(K,te,qe,et,Ie,ke,Qe)}async function gt(K,te,le,pe,ke,ge,ze){if(vt(),xe.delete(K),!pe.route.action&&!pe.route.lazy){let cr=Iu(405,{method:ze.formMethod,pathname:le,routeId:te});Lt(K,te,cr,{flushSync:ge});return}let Ie=V.fetchers.get(K);St(K,Vq(ze,Ie),{flushSync:ge});let qe=new AbortController,Qe=s0(e.history,le,qe.signal,ze);Be.set(K,qe);let ot=De,et=await o0("action",Qe,pe,ke,o,i,p,g.v7_relativeSplatPath);if(Qe.signal.aborted){Be.get(K)===qe&&Be.delete(K);return}if(g.v7_fetcherPersist&&Ge.has(K)){if(Xm(et)||Vy(et)){St(K,np(void 0));return}}else{if(Xm(et))if(Be.delete(K),Ae>ot){St(K,np(void 0));return}else return he.add(K),St(K,a0(ze)),Pt(V,et,{fetcherSubmission:ze});if(Vy(et)){Lt(K,te,et.error);return}}if(Km(et))throw Iu(400,{type:"defer-action"});let ht=V.navigation.location||V.location,Zt=s0(e.history,ht,qe.signal),an=l||u,sn=V.navigation.state!=="idle"?Uy(an,V.navigation.location,p):V.matches;er(sn,"Didn't find any matches after fetcher action");let Rn=++De;ve.set(K,Rn);let or=a0(ze,et.data);V.fetchers.set(K,or);let[fr,ur]=wM(e.history,V,sn,ze,ht,!1,oe,we,Ne,Ge,xe,he,an,p,{[pe.route.id]:et.data},void 0);ur.filter(cr=>cr.key!==K).forEach(cr=>{let To=cr.key,sr=V.fetchers.get(To),hf=a0(void 0,sr?sr.data:void 0);V.fetchers.set(To,hf),Be.has(To)&&bt(To),cr.controller&&Be.set(To,cr.controller)}),Dt({fetchers:new Map(V.fetchers)});let vn=()=>ur.forEach(cr=>bt(cr.key));qe.signal.addEventListener("abort",vn);let{results:Nr,loaderResults:Gr,fetcherResults:ji}=await je(V.matches,sn,fr,ur,Zt);if(qe.signal.aborted)return;qe.signal.removeEventListener("abort",vn),ve.delete(K),Be.delete(K),ur.forEach(cr=>Be.delete(cr.key));let bi=LM(Nr);if(bi){if(bi.idx>=fr.length){let cr=ur[bi.idx-fr.length].key;he.add(cr)}return Pt(V,bi.result)}let{loaderData:Yr,errors:Bn}=CM(V,V.matches,fr,Gr,void 0,ur,ji,$e);if(V.fetchers.has(K)){let cr=np(et.data);V.fetchers.set(K,cr)}Gs(Rn),V.navigation.state==="loading"&&Rn>Ae?(er(G,"Expected pending action"),J&&J.abort(),Qt(V.navigation.location,{matches:sn,loaderData:Yr,errors:Bn,fetchers:new Map(V.fetchers)})):(Dt({errors:Bn,loaderData:IM(V.loaderData,Yr,sn,Bn),fetchers:new Map(V.fetchers)}),oe=!1)}async function _t(K,te,le,pe,ke,ge,ze){let Ie=V.fetchers.get(K);St(K,a0(ze,Ie?Ie.data:void 0),{flushSync:ge});let qe=new AbortController,Qe=s0(e.history,le,qe.signal);Be.set(K,qe);let ot=De,et=await o0("loader",Qe,pe,ke,o,i,p,g.v7_relativeSplatPath);if(Km(et)&&(et=await vF(et,Qe.signal,!0)||et),Be.get(K)===qe&&Be.delete(K),!Qe.signal.aborted){if(Ge.has(K)){St(K,np(void 0));return}if(Xm(et))if(Ae>ot){St(K,np(void 0));return}else{he.add(K),await Pt(V,et);return}if(Vy(et)){Lt(K,te,et.error);return}er(!Km(et),"Unhandled fetcher deferred data"),St(K,np(et.data))}}async function Pt(K,te,le){let{submission:pe,fetcherSubmission:ke,replace:ge}=le===void 0?{}:le;te.revalidate&&(oe=!0);let ze=p1(K.location,te.location,{_isRedirect:!0});if(er(ze,"Expected a location on the redirect navigation"),n){let ht=!1;if(te.reloadDocument)ht=!0;else if(mF.test(te.location)){const Zt=e.history.createURL(te.location);ht=Zt.origin!==t.location.origin||nv(Zt.pathname,p)==null}if(ht){ge?t.location.replace(te.location):t.location.assign(te.location);return}}J=null;let Ie=ge===!0?vo.Replace:vo.Push,{formMethod:qe,formAction:Qe,formEncType:ot}=K.navigation;!pe&&!ke&&qe&&Qe&&ot&&(pe=OM(K.navigation));let et=pe||ke;if(Aq.has(te.status)&&et&&Pc(et.formMethod))await Gt(Ie,ze,{submission:lo({},et,{formAction:te.location}),preventScrollReset:H});else{let ht=I2(ze,pe);await Gt(Ie,ze,{overrideNavigation:ht,fetcherSubmission:ke,preventScrollReset:H})}}async function je(K,te,le,pe,ke){let ge=await Promise.all([...le.map(qe=>o0("loader",ke,qe,te,o,i,p,g.v7_relativeSplatPath)),...pe.map(qe=>qe.matches&&qe.match&&qe.controller?o0("loader",s0(e.history,qe.path,qe.controller.signal),qe.match,qe.matches,o,i,p,g.v7_relativeSplatPath):{type:so.error,error:Iu(404,{pathname:qe.path})})]),ze=ge.slice(0,le.length),Ie=ge.slice(le.length);return await Promise.all([AM(K,le,ze,ze.map(()=>ke.signal),!1,V.loaderData),AM(K,pe.map(qe=>qe.match),Ie,pe.map(qe=>qe.controller?qe.controller.signal:null),!0)]),{results:ge,loaderResults:ze,fetcherResults:Ie}}function vt(){oe=!0,we.push(...Cr()),xe.forEach((K,te)=>{Be.has(te)&&(Ne.push(te),bt(te))})}function St(K,te,le){le===void 0&&(le={}),V.fetchers.set(K,te),Dt({fetchers:new Map(V.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function Lt(K,te,le,pe){pe===void 0&&(pe={});let ke=$0(V.matches,te);wn(K),Dt({errors:{[ke.route.id]:le},fetchers:new Map(V.fetchers)},{flushSync:(pe&&pe.flushSync)===!0})}function en(K){return g.v7_fetcherPersist&&(Ee.set(K,(Ee.get(K)||0)+1),Ge.has(K)&&Ge.delete(K)),V.fetchers.get(K)||Oq}function wn(K){let te=V.fetchers.get(K);Be.has(K)&&!(te&&te.state==="loading"&&ve.has(K))&&bt(K),xe.delete(K),ve.delete(K),he.delete(K),Ge.delete(K),V.fetchers.delete(K)}function gn(K){if(g.v7_fetcherPersist){let te=(Ee.get(K)||0)-1;te<=0?(Ee.delete(K),Ge.add(K)):Ee.set(K,te)}else wn(K);Dt({fetchers:new Map(V.fetchers)})}function bt(K){let te=Be.get(K);er(te,"Expected fetch controller: "+K),te.abort(),Be.delete(K)}function Vn(K){for(let te of K){let le=en(te),pe=np(le.data);V.fetchers.set(te,pe)}}function _r(){let K=[],te=!1;for(let le of he){let pe=V.fetchers.get(le);er(pe,"Expected fetcher: "+le),pe.state==="loading"&&(he.delete(le),K.push(le),te=!0)}return Vn(K),te}function Gs(K){let te=[];for(let[le,pe]of ve)if(pe<K){let ke=V.fetchers.get(le);er(ke,"Expected fetcher: "+le),ke.state==="loading"&&(bt(le),ve.delete(le),te.push(le))}return Vn(te),te.length>0}function Xr(K,te){let le=V.blockers.get(K)||i0;return be.get(K)!==te&&be.set(K,te),le}function kt(K){V.blockers.delete(K),be.delete(K)}function _n(K,te){let le=V.blockers.get(K)||i0;er(le.state==="unblocked"&&te.state==="blocked"||le.state==="blocked"&&te.state==="blocked"||le.state==="blocked"&&te.state==="proceeding"||le.state==="blocked"&&te.state==="unblocked"||le.state==="proceeding"&&te.state==="unblocked","Invalid blocker state transition: "+le.state+" -> "+te.state);let pe=new Map(V.blockers);pe.set(K,te),Dt({blockers:pe})}function Pn(K){let{currentLocation:te,nextLocation:le,historyAction:pe}=K;if(be.size===0)return;be.size>1&&S_(!1,"A router only supports one blocker at a time");let ke=Array.from(be.entries()),[ge,ze]=ke[ke.length-1],Ie=V.blockers.get(ge);if(!(Ie&&Ie.state==="proceeding")&&ze({currentLocation:te,nextLocation:le,historyAction:pe}))return ge}function Cr(K){let te=[];return $e.forEach((le,pe)=>{(!K||K(pe))&&(le.cancel(),te.push(pe),$e.delete(pe))}),te}function Zo(K,te,le){if(_=K,P=te,T=le||null,!A&&V.navigation===C2){A=!0;let pe=qr(V.location,V.matches);pe!=null&&Dt({restoreScrollPosition:pe})}return()=>{_=null,P=null,T=null}}function Tn(K,te){return T&&T(K,te.map(pe=>aq(pe,V.loaderData)))||K.key}function Hs(K,te){if(_&&P){let le=Tn(K,te);_[le]=P()}}function qr(K,te){if(_){let le=Tn(K,te),pe=_[le];if(typeof pe=="number")return pe}return null}function Oe(K){o={},l=nI(K,i,void 0,o)}return U={get basename(){return p},get future(){return g},get state(){return V},get routes(){return u},get window(){return t},initialize:it,subscribe:xt,enableScrollRestoration:Zo,navigate:Ft,fetch:lt,revalidate:Kt,createHref:K=>e.history.createHref(K),encodeLocation:K=>e.history.encodeLocation(K),getFetcher:en,deleteFetcher:gn,dispose:ct,getBlocker:Xr,deleteBlocker:kt,_internalFetchControllers:Be,_internalActiveDeferreds:$e,_internalSetRoutes:Oe},U}function Mq(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function rI(e,t,n,r,i,o,u,l){let p,g;if(u){p=[];for(let y of t)if(p.push(y),y.route.id===u){g=y;break}}else p=t,g=t[t.length-1];let x=ZE(i||".",HE(p,o),nv(e.pathname,n)||e.pathname,l==="path");return i==null&&(x.search=e.search,x.hash=e.hash),(i==null||i===""||i===".")&&g&&g.route.index&&!UL(x.search)&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(x.pathname=x.pathname==="/"?n:td([n,x.pathname])),xg(x)}function bM(e,t,n,r){if(!r||!Mq(r))return{path:n};if(r.formMethod&&!$q(r.formMethod))return{path:n,error:Iu(405,{method:r.formMethod})};let i=()=>({path:n,error:Iu(400,{type:"invalid-body"})}),o=r.formMethod||"get",u=e?o.toUpperCase():o.toLowerCase(),l=_F(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Pc(u))return i();let _=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((T,P)=>{let[A,M]=P;return""+T+A+"="+M+`
`},""):String(r.body);return{path:n,submission:{formMethod:u,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:_}}}else if(r.formEncType==="application/json"){if(!Pc(u))return i();try{let _=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:u,formAction:l,formEncType:r.formEncType,formData:void 0,json:_,text:void 0}}}catch{return i()}}}er(typeof FormData=="function","FormData is not available in this environment");let p,g;if(r.formData)p=iI(r.formData),g=r.formData;else if(r.body instanceof FormData)p=iI(r.body),g=r.body;else if(r.body instanceof URLSearchParams)p=r.body,g=TM(p);else if(r.body==null)p=new URLSearchParams,g=new FormData;else try{p=new URLSearchParams(r.body),g=TM(p)}catch{return i()}let x={formMethod:u,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:g,json:void 0,text:void 0};if(Pc(x.formMethod))return{path:n,submission:x};let y=Ed(n);return t&&y.search&&UL(y.search)&&p.append("index",""),y.search="?"+p,{path:xg(y),submission:x}}function Nq(e,t){let n=e;if(t){let r=e.findIndex(i=>i.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function wM(e,t,n,r,i,o,u,l,p,g,x,y,_,T,P,A){let M=A?Object.values(A)[0]:P?Object.values(P)[0]:void 0,k=e.createURL(t.location),R=e.createURL(i),z=A?Object.keys(A)[0]:void 0,U=Nq(n,z).filter((G,H)=>{let{route:J}=G;if(J.lazy)return!0;if(J.loader==null)return!1;if(o)return J.loader.hydrate?!0:t.loaderData[J.id]===void 0&&(!t.errors||t.errors[J.id]===void 0);if(Dq(t.loaderData,t.matches[H],G)||l.some(ee=>ee===G.route.id))return!0;let Y=t.matches[H],X=G;return EM(G,lo({currentUrl:k,currentParams:Y.params,nextUrl:R,nextParams:X.params},r,{actionResult:M,defaultShouldRevalidate:u||k.pathname+k.search===R.pathname+R.search||k.search!==R.search||yF(Y,X)}))}),V=[];return x.forEach((G,H)=>{if(o||!n.some(ce=>ce.route.id===G.routeId)||g.has(H))return;let J=Uy(_,G.path,T);if(!J){V.push({key:H,routeId:G.routeId,path:G.path,matches:null,match:null,controller:null});return}let Y=t.fetchers.get(H),X=oI(J,G.path),ee=!1;y.has(H)?ee=!1:p.includes(H)?ee=!0:Y&&Y.state!=="idle"&&Y.data===void 0?ee=u:ee=EM(X,lo({currentUrl:k,currentParams:t.matches[t.matches.length-1].params,nextUrl:R,nextParams:n[n.length-1].params},r,{actionResult:M,defaultShouldRevalidate:u})),ee&&V.push({key:H,routeId:G.routeId,path:G.path,matches:J,match:X,controller:new AbortController})}),[U,V]}function Dq(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function yF(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function EM(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function SM(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];er(i,"No route found in manifest");let o={};for(let u in r){let p=i[u]!==void 0&&u!=="hasErrorBoundary";S_(!p,'Route "'+i.id+'" has a static property "'+u+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+u+'" will be ignored.')),!p&&!oq.has(u)&&(o[u]=r[u])}Object.assign(i,o),Object.assign(i,lo({},t(i),{lazy:void 0}))}async function o0(e,t,n,r,i,o,u,l,p){p===void 0&&(p={});let g,x,y,_=A=>{let M,k=new Promise((R,z)=>M=z);return y=()=>M(),t.signal.addEventListener("abort",y),Promise.race([A({request:t,params:n.params,context:p.requestContext}),k])};try{let A=n.route[e];if(n.route.lazy)if(A){let M,k=await Promise.all([_(A).catch(R=>{M=R}),SM(n.route,o,i)]);if(M)throw M;x=k[0]}else if(await SM(n.route,o,i),A=n.route[e],A)x=await _(A);else if(e==="action"){let M=new URL(t.url),k=M.pathname+M.search;throw Iu(405,{method:t.method,pathname:k,routeId:n.route.id})}else return{type:so.data,data:void 0};else if(A)x=await _(A);else{let M=new URL(t.url),k=M.pathname+M.search;throw Iu(404,{pathname:k})}er(x!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(A){g=so.error,x=A}finally{y&&t.signal.removeEventListener("abort",y)}if(jq(x)){let A=x.status;if(Lq.has(A)){let k=x.headers.get("Location");if(er(k,"Redirects returned/thrown from loaders/actions must have a Location header"),!mF.test(k))k=rI(new URL(t.url),r.slice(0,r.indexOf(n)+1),u,!0,k,l);else if(!p.isStaticRequest){let R=new URL(t.url),z=k.startsWith("//")?new URL(R.protocol+k):new URL(k),D=nv(z.pathname,u)!=null;z.origin===R.origin&&D&&(k=z.pathname+z.search+z.hash)}if(p.isStaticRequest)throw x.headers.set("Location",k),x;return{type:so.redirect,status:A,location:k,revalidate:x.headers.get("X-Remix-Revalidate")!==null,reloadDocument:x.headers.get("X-Remix-Reload-Document")!==null}}if(p.isRouteRequest)throw{type:g===so.error?so.error:so.data,response:x};let M;try{let k=x.headers.get("Content-Type");k&&/\bapplication\/json\b/.test(k)?x.body==null?M=null:M=await x.json():M=await x.text()}catch(k){return{type:so.error,error:k}}return g===so.error?{type:g,error:new $L(A,x.statusText,M),headers:x.headers}:{type:so.data,data:M,statusCode:x.status,headers:x.headers}}if(g===so.error)return{type:g,error:x};if(Bq(x)){var T,P;return{type:so.deferred,deferredData:x,statusCode:(T=x.init)==null?void 0:T.status,headers:((P=x.init)==null?void 0:P.headers)&&new Headers(x.init.headers)}}return{type:so.data,data:x}}function s0(e,t,n,r){let i=e.createURL(_F(t)).toString(),o={signal:n};if(r&&Pc(r.formMethod)){let{formMethod:u,formEncType:l}=r;o.method=u.toUpperCase(),l==="application/json"?(o.headers=new Headers({"Content-Type":l}),o.body=JSON.stringify(r.json)):l==="text/plain"?o.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?o.body=iI(r.formData):o.body=r.formData}return new Request(i,o)}function iI(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function TM(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function zq(e,t,n,r,i){let o={},u=null,l,p=!1,g={};return n.forEach((x,y)=>{let _=t[y].route.id;if(er(!Xm(x),"Cannot handle redirect results in processLoaderData"),Vy(x)){let T=$0(e,_),P=x.error;r&&(P=Object.values(r)[0],r=void 0),u=u||{},u[T.route.id]==null&&(u[T.route.id]=P),o[_]=void 0,p||(p=!0,l=dF(x.error)?x.error.status:500),x.headers&&(g[_]=x.headers)}else Km(x)?(i.set(_,x.deferredData),o[_]=x.deferredData.data):o[_]=x.data,x.statusCode!=null&&x.statusCode!==200&&!p&&(l=x.statusCode),x.headers&&(g[_]=x.headers)}),r&&(u=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:u,statusCode:l||200,loaderHeaders:g}}function CM(e,t,n,r,i,o,u,l){let{loaderData:p,errors:g}=zq(t,n,r,i,l);for(let x=0;x<o.length;x++){let{key:y,match:_,controller:T}=o[x];er(u!==void 0&&u[x]!==void 0,"Did not find corresponding fetcher result");let P=u[x];if(!(T&&T.signal.aborted))if(Vy(P)){let A=$0(e.matches,_==null?void 0:_.route.id);g&&g[A.route.id]||(g=lo({},g,{[A.route.id]:P.error})),e.fetchers.delete(y)}else if(Xm(P))er(!1,"Unhandled fetcher revalidation redirect");else if(Km(P))er(!1,"Unhandled fetcher deferred data");else{let A=np(P.data);e.fetchers.set(y,A)}}return{loaderData:p,errors:g}}function IM(e,t,n,r){let i=lo({},t);for(let o of n){let u=o.route.id;if(t.hasOwnProperty(u)?t[u]!==void 0&&(i[u]=t[u]):e[u]!==void 0&&o.route.loader&&(i[u]=e[u]),r&&r.hasOwnProperty(u))break}return i}function $0(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function PM(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Iu(e,t){let{pathname:n,routeId:r,method:i,type:o}=t===void 0?{}:t,u="Unknown Server Error",l="Unknown @remix-run/router error";return e===400?(u="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?l="defer() is not supported in actions":o==="invalid-body"&&(l="Unable to encode submission body")):e===403?(u="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):e===404?(u="Not Found",l='No route matches URL "'+n+'"'):e===405&&(u="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new $L(e||500,u,new Error(l),!0)}function LM(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Xm(n))return{result:n,idx:t}}}function _F(e){let t=typeof e=="string"?Ed(e):e;return xg(lo({},t,{hash:""}))}function Fq(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Km(e){return e.type===so.deferred}function Vy(e){return e.type===so.error}function Xm(e){return(e&&e.type)===so.redirect}function Bq(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function jq(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function $q(e){return Pq.has(e.toLowerCase())}function Pc(e){return Cq.has(e.toLowerCase())}async function AM(e,t,n,r,i,o){for(let u=0;u<n.length;u++){let l=n[u],p=t[u];if(!p)continue;let g=e.find(y=>y.route.id===p.route.id),x=g!=null&&!yF(g,p)&&(o&&o[p.route.id])!==void 0;if(Km(l)&&(i||x)){let y=r[u];er(y,"Expected an AbortSignal for revalidating fetcher deferred result"),await vF(l,y,i).then(_=>{_&&(n[u]=_||n[u])})}}}async function vF(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:so.data,data:e.deferredData.unwrappedData}}catch(i){return{type:so.error,error:i}}return{type:so.data,data:e.deferredData.data}}}function UL(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function oI(e,t){let n=typeof t=="string"?Ed(t).search:t.search;if(e[e.length-1].route.index&&UL(n||""))return e[e.length-1];let r=fF(e);return r[r.length-1]}function OM(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:o,json:u}=e;if(!(!t||!n||!r)){if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(u!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:u,text:void 0}}}function I2(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Uq(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function a0(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Vq(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function np(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function qq(e,t){try{let n=e.sessionStorage.getItem(gF);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&t.set(i,new Set(o||[]))}}catch{}}function Gq(e,t){if(t.size>0){let n={};for(let[r,i]of t)n[r]=[...i];try{e.sessionStorage.setItem(gF,JSON.stringify(n))}catch(r){S_(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function m1(){return m1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m1.apply(this,arguments)}const WE=Ue.createContext(null),xF=Ue.createContext(null),tm=Ue.createContext(null),KE=Ue.createContext(null),rf=Ue.createContext({outlet:null,matches:[],isDataRoute:!1}),bF=Ue.createContext(null);function Hq(e,t){let{relative:n}=t===void 0?{}:t;rv()||er(!1);let{basename:r,navigator:i}=Ue.useContext(tm),{hash:o,pathname:u,search:l}=EF(e,{relative:n}),p=u;return r!=="/"&&(p=u==="/"?r:td([r,u])),i.createHref({pathname:p,search:l,hash:o})}function rv(){return Ue.useContext(KE)!=null}function of(){return rv()||er(!1),Ue.useContext(KE).location}function wF(e){Ue.useContext(tm).static||Ue.useLayoutEffect(e)}function tu(){let{isDataRoute:e}=Ue.useContext(rf);return e?aG():Zq()}function Zq(){rv()||er(!1);let e=Ue.useContext(WE),{basename:t,future:n,navigator:r}=Ue.useContext(tm),{matches:i}=Ue.useContext(rf),{pathname:o}=of(),u=JSON.stringify(HE(i,n.v7_relativeSplatPath)),l=Ue.useRef(!1);return wF(()=>{l.current=!0}),Ue.useCallback(function(g,x){if(x===void 0&&(x={}),!l.current)return;if(typeof g=="number"){r.go(g);return}let y=ZE(g,JSON.parse(u),o,x.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:td([t,y.pathname])),(x.replace?r.replace:r.push)(y,x.state,x)},[t,r,u,o,e])}const Wq=Ue.createContext(null);function Kq(e){let t=Ue.useContext(rf).outlet;return t&&Ue.createElement(Wq.Provider,{value:e},t)}function Xq(){let{matches:e}=Ue.useContext(rf),t=e[e.length-1];return t?t.params:{}}function EF(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=Ue.useContext(tm),{matches:i}=Ue.useContext(rf),{pathname:o}=of(),u=JSON.stringify(HE(i,r.v7_relativeSplatPath));return Ue.useMemo(()=>ZE(e,JSON.parse(u),o,n==="path"),[e,u,o,n])}function Yq(e,t,n,r){rv()||er(!1);let{navigator:i}=Ue.useContext(tm),{matches:o}=Ue.useContext(rf),u=o[o.length-1],l=u?u.params:{};u&&u.pathname;let p=u?u.pathnameBase:"/";u&&u.route;let g=of(),x;if(t){var y;let M=typeof t=="string"?Ed(t):t;p==="/"||(y=M.pathname)!=null&&y.startsWith(p)||er(!1),x=M}else x=g;let _=x.pathname||"/",T=_;if(p!=="/"){let M=p.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(M.length).join("/")}let P=Uy(e,{pathname:T}),A=nG(P&&P.map(M=>Object.assign({},M,{params:Object.assign({},l,M.params),pathname:td([p,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?p:td([p,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),o,n,r);return t&&A?Ue.createElement(KE.Provider,{value:{location:m1({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:vo.Pop}},A):A}function Jq(){let e=sG(),t=dF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Ue.createElement(Ue.Fragment,null,Ue.createElement("h2",null,"Unexpected Application Error!"),Ue.createElement("h3",{style:{fontStyle:"italic"}},t),n?Ue.createElement("pre",{style:i},n):null,null)}const Qq=Ue.createElement(Jq,null);class eG extends Ue.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?Ue.createElement(rf.Provider,{value:this.props.routeContext},Ue.createElement(bF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tG(e){let{routeContext:t,match:n,children:r}=e,i=Ue.useContext(WE);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),Ue.createElement(rf.Provider,{value:t},r)}function nG(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if((o=n)!=null&&o.errors)e=n.matches;else return null}let u=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let x=u.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id]));x>=0||er(!1),u=u.slice(0,Math.min(u.length,x+1))}let p=!1,g=-1;if(n&&r&&r.v7_partialHydration)for(let x=0;x<u.length;x++){let y=u[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(g=x),y.route.id){let{loaderData:_,errors:T}=n,P=y.route.loader&&_[y.route.id]===void 0&&(!T||T[y.route.id]===void 0);if(y.route.lazy||P){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((x,y,_)=>{let T,P=!1,A=null,M=null;n&&(T=l&&y.route.id?l[y.route.id]:void 0,A=y.route.errorElement||Qq,p&&(g<0&&_===0?(lG("route-fallback",!1),P=!0,M=null):g===_&&(P=!0,M=y.route.hydrateFallbackElement||null)));let k=t.concat(u.slice(0,_+1)),R=()=>{let z;return T?z=A:P?z=M:y.route.Component?z=Ue.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=x,Ue.createElement(tG,{match:y,routeContext:{outlet:x,matches:k,isDataRoute:n!=null},children:z})};return n&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?Ue.createElement(eG,{location:n.location,revalidation:n.revalidation,component:A,error:T,children:R(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):R()},null)}var SF=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(SF||{}),Ww=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ww||{});function rG(e){let t=Ue.useContext(WE);return t||er(!1),t}function iG(e){let t=Ue.useContext(xF);return t||er(!1),t}function oG(e){let t=Ue.useContext(rf);return t||er(!1),t}function TF(e){let t=oG(),n=t.matches[t.matches.length-1];return n.route.id||er(!1),n.route.id}function sG(){var e;let t=Ue.useContext(bF),n=iG(Ww.UseRouteError),r=TF(Ww.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function aG(){let{router:e}=rG(SF.UseNavigateStable),t=TF(Ww.UseNavigateStable),n=Ue.useRef(!1);return wF(()=>{n.current=!0}),Ue.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,m1({fromRouteId:t},o)))},[e,t])}const kM={};function lG(e,t,n){!t&&!kM[e]&&(kM[e]=!0)}function uG(e){let{to:t,replace:n,state:r,relative:i}=e;rv()||er(!1);let{future:o,static:u}=Ue.useContext(tm),{matches:l}=Ue.useContext(rf),{pathname:p}=of(),g=tu(),x=ZE(t,HE(l,o.v7_relativeSplatPath),p,i==="path"),y=JSON.stringify(x);return Ue.useEffect(()=>g(JSON.parse(y),{replace:n,state:r,relative:i}),[g,y,i,n,r]),null}function cG(e){return Kq(e.context)}function Ya(e){er(!1)}function hG(e){let{basename:t="/",children:n=null,location:r,navigationType:i=vo.Pop,navigator:o,static:u=!1,future:l}=e;rv()&&er(!1);let p=t.replace(/^\/*/,"/"),g=Ue.useMemo(()=>({basename:p,navigator:o,static:u,future:m1({v7_relativeSplatPath:!1},l)}),[p,l,o,u]);typeof r=="string"&&(r=Ed(r));let{pathname:x="/",search:y="",hash:_="",state:T=null,key:P="default"}=r,A=Ue.useMemo(()=>{let M=nv(x,p);return M==null?null:{location:{pathname:M,search:y,hash:_,state:T,key:P},navigationType:i}},[p,x,y,_,T,P,i]);return A==null?null:Ue.createElement(tm.Provider,{value:g},Ue.createElement(KE.Provider,{children:n,value:A}))}new Promise(()=>{});function sI(e,t){t===void 0&&(t=[]);let n=[];return Ue.Children.forEach(e,(r,i)=>{if(!Ue.isValidElement(r))return;let o=[...t,i];if(r.type===Ue.Fragment){n.push.apply(n,sI(r.props.children,o));return}r.type!==Ya&&er(!1),!r.props.index||!r.props.children||er(!1);let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=sI(r.props.children,o)),n.push(u)}),n}function fG(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:Ue.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:Ue.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:Ue.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function g1(){return g1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g1.apply(this,arguments)}function dG(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function pG(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function mG(e,t){return e.button===0&&(!t||t==="_self")&&!pG(e)}function aI(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function gG(e,t){let n=aI(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const yG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_G="6";try{window.__reactRouterVersion=_G}catch{}function vG(e,t){return Rq({basename:t==null?void 0:t.basename,future:g1({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:nq({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||xG(),routes:e,mapRouteProperties:fG,window:t==null?void 0:t.window}).initialize()}function xG(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=g1({},t,{errors:bG(t.errors)})),t}function bG(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&i.__type==="RouteErrorResponse")n[r]=new $L(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let u=new o(i.message);u.stack="",n[r]=u}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const wG=Ue.createContext({isTransitioning:!1}),EG=Ue.createContext(new Map),SG="startTransition",RM=lC[SG],TG="flushSync",MM=tq[TG];function CG(e){RM?RM(e):e()}function l0(e){MM?MM(e):e()}class IG{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function NM(e){let{fallbackElement:t,router:n,future:r}=e,[i,o]=Ue.useState(n.state),[u,l]=Ue.useState(),[p,g]=Ue.useState({isTransitioning:!1}),[x,y]=Ue.useState(),[_,T]=Ue.useState(),[P,A]=Ue.useState(),M=Ue.useRef(new Map),{v7_startTransition:k}=r||{},R=Ue.useCallback(G=>{k?CG(G):G()},[k]),z=Ue.useCallback((G,H)=>{let{deletedFetchers:J,unstable_flushSync:Y,unstable_viewTransitionOpts:X}=H;J.forEach(ce=>M.current.delete(ce)),G.fetchers.forEach((ce,oe)=>{ce.data!==void 0&&M.current.set(oe,ce.data)});let ee=n.window==null||typeof n.window.document.startViewTransition!="function";if(!X||ee){Y?l0(()=>o(G)):R(()=>o(G));return}if(Y){l0(()=>{_&&(x&&x.resolve(),_.skipTransition()),g({isTransitioning:!0,flushSync:!0,currentLocation:X.currentLocation,nextLocation:X.nextLocation})});let ce=n.window.document.startViewTransition(()=>{l0(()=>o(G))});ce.finished.finally(()=>{l0(()=>{y(void 0),T(void 0),l(void 0),g({isTransitioning:!1})})}),l0(()=>T(ce));return}_?(x&&x.resolve(),_.skipTransition(),A({state:G,currentLocation:X.currentLocation,nextLocation:X.nextLocation})):(l(G),g({isTransitioning:!0,flushSync:!1,currentLocation:X.currentLocation,nextLocation:X.nextLocation}))},[n.window,_,x,M,R]);Ue.useLayoutEffect(()=>n.subscribe(z),[n,z]),Ue.useEffect(()=>{p.isTransitioning&&!p.flushSync&&y(new IG)},[p]),Ue.useEffect(()=>{if(x&&u&&n.window){let G=u,H=x.promise,J=n.window.document.startViewTransition(async()=>{R(()=>o(G)),await H});J.finished.finally(()=>{y(void 0),T(void 0),l(void 0),g({isTransitioning:!1})}),T(J)}},[R,u,x,n.window]),Ue.useEffect(()=>{x&&u&&i.location.key===u.location.key&&x.resolve()},[x,_,i.location,u]),Ue.useEffect(()=>{!p.isTransitioning&&P&&(l(P.state),g({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}),A(void 0))},[p.isTransitioning,P]),Ue.useEffect(()=>{},[]);let D=Ue.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:G=>n.navigate(G),push:(G,H,J)=>n.navigate(G,{state:H,preventScrollReset:J==null?void 0:J.preventScrollReset}),replace:(G,H,J)=>n.navigate(G,{replace:!0,state:H,preventScrollReset:J==null?void 0:J.preventScrollReset})}),[n]),U=n.basename||"/",V=Ue.useMemo(()=>({router:n,navigator:D,static:!1,basename:U}),[n,D,U]);return Ue.createElement(Ue.Fragment,null,Ue.createElement(WE.Provider,{value:V},Ue.createElement(xF.Provider,{value:i},Ue.createElement(EG.Provider,{value:M.current},Ue.createElement(wG.Provider,{value:p},Ue.createElement(hG,{basename:U,location:i.location,navigationType:i.historyAction,navigator:D,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?Ue.createElement(PG,{routes:n.routes,future:n.future,state:i}):t))))),null)}function PG(e){let{routes:t,future:n,state:r}=e;return Yq(t,void 0,r,n)}const LG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oo=Ue.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:u,state:l,target:p,to:g,preventScrollReset:x,unstable_viewTransition:y}=t,_=dG(t,yG),{basename:T}=Ue.useContext(tm),P,A=!1;if(typeof g=="string"&&AG.test(g)&&(P=g,LG))try{let z=new URL(window.location.href),D=g.startsWith("//")?new URL(z.protocol+g):new URL(g),U=nv(D.pathname,T);D.origin===z.origin&&U!=null?g=U+D.search+D.hash:A=!0}catch{}let M=Hq(g,{relative:i}),k=OG(g,{replace:u,state:l,target:p,preventScrollReset:x,relative:i,unstable_viewTransition:y});function R(z){r&&r(z),z.defaultPrevented||k(z)}return Ue.createElement("a",g1({},_,{href:P||M,onClick:A||o?r:R,ref:n,target:p}))});var DM;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DM||(DM={}));var zM;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(zM||(zM={}));function OG(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:u,unstable_viewTransition:l}=t===void 0?{}:t,p=tu(),g=of(),x=EF(e,{relative:u});return Ue.useCallback(y=>{if(mG(y,n)){y.preventDefault();let _=r!==void 0?r:xg(g)===xg(x);p(e,{replace:_,state:i,preventScrollReset:o,relative:u,unstable_viewTransition:l})}},[g,p,x,r,i,n,e,o,u,l])}function CF(e){let t=Ue.useRef(aI(e)),n=Ue.useRef(!1),r=of(),i=Ue.useMemo(()=>gG(r.search,n.current?null:t.current),[r.search]),o=tu(),u=Ue.useCallback((l,p)=>{const g=aI(typeof l=="function"?l(i):l);n.current=!0,o("?"+g,p)},[o,i]);return[i,u]}function IF(e,t){return function(){return e.apply(t,arguments)}}const{toString:kG}=Object.prototype,{getPrototypeOf:VL}=Object,XE=(e=>t=>{const n=kG.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),sf=e=>(e=e.toLowerCase(),t=>XE(t)===e),YE=e=>t=>typeof t===e,{isArray:iv}=Array,y1=YE("undefined");function RG(e){return e!==null&&!y1(e)&&e.constructor!==null&&!y1(e.constructor)&&zu(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const PF=sf("ArrayBuffer");function MG(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&PF(e.buffer),t}const NG=YE("string"),zu=YE("function"),LF=YE("number"),JE=e=>e!==null&&typeof e=="object",DG=e=>e===!0||e===!1,sw=e=>{if(XE(e)!=="object")return!1;const t=VL(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},zG=sf("Date"),FG=sf("File"),BG=sf("Blob"),jG=sf("FileList"),$G=e=>JE(e)&&zu(e.pipe),UG=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||zu(e.append)&&((t=XE(e))==="formdata"||t==="object"&&zu(e.toString)&&e.toString()==="[object FormData]"))},VG=sf("URLSearchParams"),qG=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dx(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),iv(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),u=o.length;let l;for(r=0;r<u;r++)l=o[r],t.call(null,e[l],l,e)}}function AF(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const OF=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kF=e=>!y1(e)&&e!==OF;function lI(){const{caseless:e}=kF(this)&&this||{},t={},n=(r,i)=>{const o=e&&AF(t,i)||i;sw(t[o])&&sw(r)?t[o]=lI(t[o],r):sw(r)?t[o]=lI({},r):iv(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&dx(arguments[r],n);return t}const GG=(e,t,n,{allOwnKeys:r}={})=>(dx(t,(i,o)=>{n&&zu(i)?e[o]=IF(i,n):e[o]=i},{allOwnKeys:r}),e),HG=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ZG=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},WG=(e,t,n,r)=>{let i,o,u;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)u=i[o],(!r||r(u,e,t))&&!l[u]&&(t[u]=e[u],l[u]=!0);e=n!==!1&&VL(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},KG=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},XG=e=>{if(!e)return null;if(iv(e))return e;let t=e.length;if(!LF(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},YG=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&VL(Uint8Array)),JG=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},QG=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},eH=sf("HTMLFormElement"),tH=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),FM=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),nH=sf("RegExp"),RF=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};dx(n,(i,o)=>{let u;(u=t(i,o,e))!==!1&&(r[o]=u||i)}),Object.defineProperties(e,r)},rH=e=>{RF(e,(t,n)=>{if(zu(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(zu(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},iH=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return iv(e)?r(e):r(String(e).split(t)),n},oH=()=>{},sH=(e,t)=>(e=+e,Number.isFinite(e)?e:t),P2="abcdefghijklmnopqrstuvwxyz",BM="0123456789",MF={DIGIT:BM,ALPHA:P2,ALPHA_DIGIT:P2+P2.toUpperCase()+BM},aH=(e=16,t=MF.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function lH(e){return!!(e&&zu(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const uH=e=>{const t=new Array(10),n=(r,i)=>{if(JE(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=iv(r)?[]:{};return dx(r,(u,l)=>{const p=n(u,i+1);!y1(p)&&(o[l]=p)}),t[i]=void 0,o}}return r};return n(e,0)},cH=sf("AsyncFunction"),hH=e=>e&&(JE(e)||zu(e))&&zu(e.then)&&zu(e.catch),Ct={isArray:iv,isArrayBuffer:PF,isBuffer:RG,isFormData:UG,isArrayBufferView:MG,isString:NG,isNumber:LF,isBoolean:DG,isObject:JE,isPlainObject:sw,isUndefined:y1,isDate:zG,isFile:FG,isBlob:BG,isRegExp:nH,isFunction:zu,isStream:$G,isURLSearchParams:VG,isTypedArray:YG,isFileList:jG,forEach:dx,merge:lI,extend:GG,trim:qG,stripBOM:HG,inherits:ZG,toFlatObject:WG,kindOf:XE,kindOfTest:sf,endsWith:KG,toArray:XG,forEachEntry:JG,matchAll:QG,isHTMLForm:eH,hasOwnProperty:FM,hasOwnProp:FM,reduceDescriptors:RF,freezeMethods:rH,toObjectSet:iH,toCamelCase:tH,noop:oH,toFiniteNumber:sH,findKey:AF,global:OF,isContextDefined:kF,ALPHABET:MF,generateString:aH,isSpecCompliantForm:lH,toJSONObject:uH,isAsyncFn:cH,isThenable:hH};function Pr(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Ct.inherits(Pr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ct.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const NF=Pr.prototype,DF={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{DF[e]={value:e}});Object.defineProperties(Pr,DF);Object.defineProperty(NF,"isAxiosError",{value:!0});Pr.from=(e,t,n,r,i,o)=>{const u=Object.create(NF);return Ct.toFlatObject(e,u,function(p){return p!==Error.prototype},l=>l!=="isAxiosError"),Pr.call(u,e.message,t,n,r,i),u.cause=e,u.name=e.name,o&&Object.assign(u,o),u};const fH=null;function uI(e){return Ct.isPlainObject(e)||Ct.isArray(e)}function zF(e){return Ct.endsWith(e,"[]")?e.slice(0,-2):e}function jM(e,t,n){return e?e.concat(t).map(function(i,o){return i=zF(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function dH(e){return Ct.isArray(e)&&!e.some(uI)}const pH=Ct.toFlatObject(Ct,{},null,function(t){return/^is[A-Z]/.test(t)});function QE(e,t,n){if(!Ct.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ct.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,M){return!Ct.isUndefined(M[A])});const r=n.metaTokens,i=n.visitor||x,o=n.dots,u=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&Ct.isSpecCompliantForm(t);if(!Ct.isFunction(i))throw new TypeError("visitor must be a function");function g(P){if(P===null)return"";if(Ct.isDate(P))return P.toISOString();if(!p&&Ct.isBlob(P))throw new Pr("Blob is not supported. Use a Buffer instead.");return Ct.isArrayBuffer(P)||Ct.isTypedArray(P)?p&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function x(P,A,M){let k=P;if(P&&!M&&typeof P=="object"){if(Ct.endsWith(A,"{}"))A=r?A:A.slice(0,-2),P=JSON.stringify(P);else if(Ct.isArray(P)&&dH(P)||(Ct.isFileList(P)||Ct.endsWith(A,"[]"))&&(k=Ct.toArray(P)))return A=zF(A),k.forEach(function(z,D){!(Ct.isUndefined(z)||z===null)&&t.append(u===!0?jM([A],D,o):u===null?A:A+"[]",g(z))}),!1}return uI(P)?!0:(t.append(jM(M,A,o),g(P)),!1)}const y=[],_=Object.assign(pH,{defaultVisitor:x,convertValue:g,isVisitable:uI});function T(P,A){if(!Ct.isUndefined(P)){if(y.indexOf(P)!==-1)throw Error("Circular reference detected in "+A.join("."));y.push(P),Ct.forEach(P,function(k,R){(!(Ct.isUndefined(k)||k===null)&&i.call(t,k,Ct.isString(R)?R.trim():R,A,_))===!0&&T(k,A?A.concat(R):[R])}),y.pop()}}if(!Ct.isObject(e))throw new TypeError("data must be an object");return T(e),t}function $M(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function qL(e,t){this._pairs=[],e&&QE(e,this,t)}const FF=qL.prototype;FF.append=function(t,n){this._pairs.push([t,n])};FF.toString=function(t){const n=t?function(r){return t.call(this,r,$M)}:$M;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function mH(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function BF(e,t,n){if(!t)return e;const r=n&&n.encode||mH,i=n&&n.serialize;let o;if(i?o=i(t,n):o=Ct.isURLSearchParams(t)?t.toString():new qL(t,n).toString(r),o){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class UM{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ct.forEach(this.handlers,function(r){r!==null&&t(r)})}}const jF={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gH=typeof URLSearchParams<"u"?URLSearchParams:qL,yH=typeof FormData<"u"?FormData:null,_H=typeof Blob<"u"?Blob:null,vH={isBrowser:!0,classes:{URLSearchParams:gH,FormData:yH,Blob:_H},protocols:["http","https","file","blob","url","data"]},$F=typeof window<"u"&&typeof document<"u",xH=(e=>$F&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),bH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wH=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$F,hasStandardBrowserEnv:xH,hasStandardBrowserWebWorkerEnv:bH},Symbol.toStringTag,{value:"Module"})),qh={...wH,...vH};function EH(e,t){return QE(e,new qh.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return qh.isNode&&Ct.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function SH(e){return Ct.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function TH(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function UF(e){function t(n,r,i,o){let u=n[o++];if(u==="__proto__")return!0;const l=Number.isFinite(+u),p=o>=n.length;return u=!u&&Ct.isArray(i)?i.length:u,p?(Ct.hasOwnProp(i,u)?i[u]=[i[u],r]:i[u]=r,!l):((!i[u]||!Ct.isObject(i[u]))&&(i[u]=[]),t(n,r,i[u],o)&&Ct.isArray(i[u])&&(i[u]=TH(i[u])),!l)}if(Ct.isFormData(e)&&Ct.isFunction(e.entries)){const n={};return Ct.forEachEntry(e,(r,i)=>{t(SH(r),i,n,0)}),n}return null}function CH(e,t,n){if(Ct.isString(e))try{return(t||JSON.parse)(e),Ct.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const GL={transitional:jF,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=Ct.isObject(t);if(o&&Ct.isHTMLForm(t)&&(t=new FormData(t)),Ct.isFormData(t))return i?JSON.stringify(UF(t)):t;if(Ct.isArrayBuffer(t)||Ct.isBuffer(t)||Ct.isStream(t)||Ct.isFile(t)||Ct.isBlob(t))return t;if(Ct.isArrayBufferView(t))return t.buffer;if(Ct.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return EH(t,this.formSerializer).toString();if((l=Ct.isFileList(t))||r.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return QE(l?{"files[]":t}:t,p&&new p,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),CH(t)):t}],transformResponse:[function(t){const n=this.transitional||GL.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(t&&Ct.isString(t)&&(r&&!this.responseType||i)){const u=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(l){if(u)throw l.name==="SyntaxError"?Pr.from(l,Pr.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qh.classes.FormData,Blob:qh.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ct.forEach(["delete","get","head","post","put","patch"],e=>{GL.headers[e]={}});const HL=GL,IH=Ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PH=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(u){i=u.indexOf(":"),n=u.substring(0,i).trim().toLowerCase(),r=u.substring(i+1).trim(),!(!n||t[n]&&IH[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},VM=Symbol("internals");function u0(e){return e&&String(e).trim().toLowerCase()}function aw(e){return e===!1||e==null?e:Ct.isArray(e)?e.map(aw):String(e)}function LH(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const AH=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function L2(e,t,n,r,i){if(Ct.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!Ct.isString(t)){if(Ct.isString(r))return t.indexOf(r)!==-1;if(Ct.isRegExp(r))return r.test(t)}}function OH(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function kH(e,t){const n=Ct.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,u){return this[r].call(this,t,i,o,u)},configurable:!0})})}class eS{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(l,p,g){const x=u0(p);if(!x)throw new Error("header name must be a non-empty string");const y=Ct.findKey(i,x);(!y||i[y]===void 0||g===!0||g===void 0&&i[y]!==!1)&&(i[y||p]=aw(l))}const u=(l,p)=>Ct.forEach(l,(g,x)=>o(g,x,p));return Ct.isPlainObject(t)||t instanceof this.constructor?u(t,n):Ct.isString(t)&&(t=t.trim())&&!AH(t)?u(PH(t),n):t!=null&&o(n,t,r),this}get(t,n){if(t=u0(t),t){const r=Ct.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return LH(i);if(Ct.isFunction(n))return n.call(this,i,r);if(Ct.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=u0(t),t){const r=Ct.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||L2(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(u){if(u=u0(u),u){const l=Ct.findKey(r,u);l&&(!n||L2(r,r[l],l,n))&&(delete r[l],i=!0)}}return Ct.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||L2(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return Ct.forEach(this,(i,o)=>{const u=Ct.findKey(r,o);if(u){n[u]=aw(i),delete n[o];return}const l=t?OH(o):String(o).trim();l!==o&&delete n[o],n[l]=aw(i),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ct.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&Ct.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[VM]=this[VM]={accessors:{}}).accessors,i=this.prototype;function o(u){const l=u0(u);r[l]||(kH(i,u),r[l]=!0)}return Ct.isArray(t)?t.forEach(o):o(t),this}}eS.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ct.reduceDescriptors(eS.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Ct.freezeMethods(eS);const nd=eS;function A2(e,t){const n=this||HL,r=t||n,i=nd.from(r.headers);let o=r.data;return Ct.forEach(e,function(l){o=l.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function VF(e){return!!(e&&e.__CANCEL__)}function px(e,t,n){Pr.call(this,e??"canceled",Pr.ERR_CANCELED,t,n),this.name="CanceledError"}Ct.inherits(px,Pr,{__CANCEL__:!0});function RH(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Pr("Request failed with status code "+n.status,[Pr.ERR_BAD_REQUEST,Pr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const MH=qh.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const u=[e+"="+encodeURIComponent(t)];Ct.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),Ct.isString(r)&&u.push("path="+r),Ct.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function NH(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function DH(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function qF(e,t){return e&&!NH(t)?DH(e,t):t}const zH=qh.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(o){let u=o;return t&&(n.setAttribute("href",u),u=n.href),n.setAttribute("href",u),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(u){const l=Ct.isString(u)?i(u):u;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function FH(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function BH(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,u;return t=t!==void 0?t:1e3,function(p){const g=Date.now(),x=r[o];u||(u=g),n[i]=p,r[i]=g;let y=o,_=0;for(;y!==i;)_+=n[y++],y=y%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),g-u<t)return;const T=x&&g-x;return T?Math.round(_*1e3/T):void 0}}function qM(e,t){let n=0;const r=BH(50,250);return i=>{const o=i.loaded,u=i.lengthComputable?i.total:void 0,l=o-n,p=r(l),g=o<=u;n=o;const x={loaded:o,total:u,progress:u?o/u:void 0,bytes:l,rate:p||void 0,estimated:p&&u&&g?(u-o)/p:void 0,event:i};x[t?"download":"upload"]=!0,e(x)}}const jH=typeof XMLHttpRequest<"u",$H=jH&&function(e){return new Promise(function(n,r){let i=e.data;const o=nd.from(e.headers).normalize();let{responseType:u,withXSRFToken:l}=e,p;function g(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}let x;if(Ct.isFormData(i)){if(qh.hasStandardBrowserEnv||qh.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((x=o.getContentType())!==!1){const[A,...M]=x?x.split(";").map(k=>k.trim()).filter(Boolean):[];o.setContentType([A||"multipart/form-data",...M].join("; "))}}let y=new XMLHttpRequest;if(e.auth){const A=e.auth.username||"",M=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(A+":"+M))}const _=qF(e.baseURL,e.url);y.open(e.method.toUpperCase(),BF(_,e.params,e.paramsSerializer),!0),y.timeout=e.timeout;function T(){if(!y)return;const A=nd.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),k={data:!u||u==="text"||u==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:A,config:e,request:y};RH(function(z){n(z),g()},function(z){r(z),g()},k),y=null}if("onloadend"in y?y.onloadend=T:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(T)},y.onabort=function(){y&&(r(new Pr("Request aborted",Pr.ECONNABORTED,e,y)),y=null)},y.onerror=function(){r(new Pr("Network Error",Pr.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let M=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const k=e.transitional||jF;e.timeoutErrorMessage&&(M=e.timeoutErrorMessage),r(new Pr(M,k.clarifyTimeoutError?Pr.ETIMEDOUT:Pr.ECONNABORTED,e,y)),y=null},qh.hasStandardBrowserEnv&&(l&&Ct.isFunction(l)&&(l=l(e)),l||l!==!1&&zH(_))){const A=e.xsrfHeaderName&&e.xsrfCookieName&&MH.read(e.xsrfCookieName);A&&o.set(e.xsrfHeaderName,A)}i===void 0&&o.setContentType(null),"setRequestHeader"in y&&Ct.forEach(o.toJSON(),function(M,k){y.setRequestHeader(k,M)}),Ct.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),u&&u!=="json"&&(y.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&y.addEventListener("progress",qM(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&y.upload&&y.upload.addEventListener("progress",qM(e.onUploadProgress)),(e.cancelToken||e.signal)&&(p=A=>{y&&(r(!A||A.type?new px(null,e,y):A),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p)));const P=FH(_);if(P&&qh.protocols.indexOf(P)===-1){r(new Pr("Unsupported protocol "+P+":",Pr.ERR_BAD_REQUEST,e));return}y.send(i||null)})},cI={http:fH,xhr:$H};Ct.forEach(cI,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const GM=e=>`- ${e}`,UH=e=>Ct.isFunction(e)||e===null||e===!1,GF={getAdapter:e=>{e=Ct.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let u;if(r=n,!UH(n)&&(r=cI[(u=String(n)).toLowerCase()],r===void 0))throw new Pr(`Unknown adapter '${u}'`);if(r)break;i[u||"#"+o]=r}if(!r){const o=Object.entries(i).map(([l,p])=>`adapter ${l} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=t?o.length>1?`since :
`+o.map(GM).join(`
`):" "+GM(o[0]):"as no adapter specified";throw new Pr("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:cI};function O2(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new px(null,e)}function HM(e){return O2(e),e.headers=nd.from(e.headers),e.data=A2.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),GF.getAdapter(e.adapter||HL.adapter)(e).then(function(r){return O2(e),r.data=A2.call(e,e.transformResponse,r),r.headers=nd.from(r.headers),r},function(r){return VF(r)||(O2(e),r&&r.response&&(r.response.data=A2.call(e,e.transformResponse,r.response),r.response.headers=nd.from(r.response.headers))),Promise.reject(r)})}const ZM=e=>e instanceof nd?{...e}:e;function T_(e,t){t=t||{};const n={};function r(g,x,y){return Ct.isPlainObject(g)&&Ct.isPlainObject(x)?Ct.merge.call({caseless:y},g,x):Ct.isPlainObject(x)?Ct.merge({},x):Ct.isArray(x)?x.slice():x}function i(g,x,y){if(Ct.isUndefined(x)){if(!Ct.isUndefined(g))return r(void 0,g,y)}else return r(g,x,y)}function o(g,x){if(!Ct.isUndefined(x))return r(void 0,x)}function u(g,x){if(Ct.isUndefined(x)){if(!Ct.isUndefined(g))return r(void 0,g)}else return r(void 0,x)}function l(g,x,y){if(y in t)return r(g,x);if(y in e)return r(void 0,g)}const p={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:l,headers:(g,x)=>i(ZM(g),ZM(x),!0)};return Ct.forEach(Object.keys(Object.assign({},e,t)),function(x){const y=p[x]||i,_=y(e[x],t[x],x);Ct.isUndefined(_)&&y!==l||(n[x]=_)}),n}const HF="1.6.8",ZL={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ZL[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const WM={};ZL.transitional=function(t,n,r){function i(o,u){return"[Axios v"+HF+"] Transitional option '"+o+"'"+u+(r?". "+r:"")}return(o,u,l)=>{if(t===!1)throw new Pr(i(u," has been removed"+(n?" in "+n:"")),Pr.ERR_DEPRECATED);return n&&!WM[u]&&(WM[u]=!0,console.warn(i(u," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,u,l):!0}};function VH(e,t,n){if(typeof e!="object")throw new Pr("options must be an object",Pr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],u=t[o];if(u){const l=e[o],p=l===void 0||u(l,o,e);if(p!==!0)throw new Pr("option "+o+" must be "+p,Pr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Pr("Unknown option "+o,Pr.ERR_BAD_OPTION)}}const hI={assertOptions:VH,validators:ZL},Qd=hI.validators;class Kw{constructor(t){this.defaults=t,this.interceptors={request:new UM,response:new UM}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=T_(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&hI.assertOptions(r,{silentJSONParsing:Qd.transitional(Qd.boolean),forcedJSONParsing:Qd.transitional(Qd.boolean),clarifyTimeoutError:Qd.transitional(Qd.boolean)},!1),i!=null&&(Ct.isFunction(i)?n.paramsSerializer={serialize:i}:hI.assertOptions(i,{encode:Qd.function,serialize:Qd.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=o&&Ct.merge(o.common,o[n.method]);o&&Ct.forEach(["delete","get","head","post","put","patch","common"],P=>{delete o[P]}),n.headers=nd.concat(u,o);const l=[];let p=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(n)===!1||(p=p&&A.synchronous,l.unshift(A.fulfilled,A.rejected))});const g=[];this.interceptors.response.forEach(function(A){g.push(A.fulfilled,A.rejected)});let x,y=0,_;if(!p){const P=[HM.bind(this),void 0];for(P.unshift.apply(P,l),P.push.apply(P,g),_=P.length,x=Promise.resolve(n);y<_;)x=x.then(P[y++],P[y++]);return x}_=l.length;let T=n;for(y=0;y<_;){const P=l[y++],A=l[y++];try{T=P(T)}catch(M){A.call(this,M);break}}try{x=HM.call(this,T)}catch(P){return Promise.reject(P)}for(y=0,_=g.length;y<_;)x=x.then(g[y++],g[y++]);return x}getUri(t){t=T_(this.defaults,t);const n=qF(t.baseURL,t.url);return BF(n,t.params,t.paramsSerializer)}}Ct.forEach(["delete","get","head","options"],function(t){Kw.prototype[t]=function(n,r){return this.request(T_(r||{},{method:t,url:n,data:(r||{}).data}))}});Ct.forEach(["post","put","patch"],function(t){function n(r){return function(o,u,l){return this.request(T_(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:u}))}}Kw.prototype[t]=n(),Kw.prototype[t+"Form"]=n(!0)});const lw=Kw;class WL{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const u=new Promise(l=>{r.subscribe(l),o=l}).then(i);return u.cancel=function(){r.unsubscribe(o)},u},t(function(o,u,l){r.reason||(r.reason=new px(o,u,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new WL(function(i){t=i}),cancel:t}}}const qH=WL;function GH(e){return function(n){return e.apply(null,n)}}function HH(e){return Ct.isObject(e)&&e.isAxiosError===!0}const fI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fI).forEach(([e,t])=>{fI[t]=e});const ZH=fI;function ZF(e){const t=new lw(e),n=IF(lw.prototype.request,t);return Ct.extend(n,lw.prototype,t,{allOwnKeys:!0}),Ct.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return ZF(T_(e,i))},n}const lr=ZF(HL);lr.Axios=lw;lr.CanceledError=px;lr.CancelToken=qH;lr.isCancel=VF;lr.VERSION=HF;lr.toFormData=QE;lr.AxiosError=Pr;lr.Cancel=lr.CanceledError;lr.all=function(t){return Promise.all(t)};lr.spread=GH;lr.isAxiosError=HH;lr.mergeConfig=T_;lr.AxiosHeaders=nd;lr.formToJSON=e=>UF(Ct.isHTMLForm(e)?new FormData(e):e);lr.getAdapter=GF.getAdapter;lr.HttpStatusCode=ZH;lr.default=lr;function WF(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=WF(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function bp(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=WF(e))&&(r&&(r+=" "),r+=t);return r}const _1=e=>typeof e=="number"&&!isNaN(e),lg=e=>typeof e=="string",Dl=e=>typeof e=="function",uw=e=>lg(e)||Dl(e)?e:null,dI=e=>Ue.isValidElement(e)||lg(e)||Dl(e)||_1(e);function WH(e,t,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}function tS(e){let{enter:t,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:o=300}=e;return function(u){let{children:l,position:p,preventExitTransition:g,done:x,nodeRef:y,isIn:_,playToast:T}=u;const P=r?`${t}--${p}`:t,A=r?`${n}--${p}`:n,M=Ue.useRef(0);return Ue.useLayoutEffect(()=>{const k=y.current,R=P.split(" "),z=D=>{D.target===y.current&&(T(),k.removeEventListener("animationend",z),k.removeEventListener("animationcancel",z),M.current===0&&D.type!=="animationcancel"&&k.classList.remove(...R))};k.classList.add(...R),k.addEventListener("animationend",z),k.addEventListener("animationcancel",z)},[]),Ue.useEffect(()=>{const k=y.current,R=()=>{k.removeEventListener("animationend",R),i?WH(k,x,o):x()};_||(g?R():(M.current=1,k.className+=` ${A}`,k.addEventListener("animationend",R)))},[_]),Bt.createElement(Bt.Fragment,null,l)}}function KM(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const La=new Map;let v1=[];const pI=new Set,KH=e=>pI.forEach(t=>t(e)),KF=()=>La.size>0;function XF(e,t){var n;if(t)return!((n=La.get(t))==null||!n.isToastActive(e));let r=!1;return La.forEach(i=>{i.isToastActive(e)&&(r=!0)}),r}function YF(e,t){dI(e)&&(KF()||v1.push({content:e,options:t}),La.forEach(n=>{n.buildToast(e,t)}))}function XM(e,t){La.forEach(n=>{t!=null&&t!=null&&t.containerId?(t==null?void 0:t.containerId)===n.id&&n.toggle(e,t==null?void 0:t.id):n.toggle(e,t==null?void 0:t.id)})}function XH(e){const{subscribe:t,getSnapshot:n,setProps:r}=Ue.useRef(function(o){const u=o.containerId||1;return{subscribe(l){const p=function(x,y,_){let T=1,P=0,A=[],M=[],k=[],R=y;const z=new Map,D=new Set,U=()=>{k=Array.from(z.values()),D.forEach(H=>H())},V=H=>{M=H==null?[]:M.filter(J=>J!==H),U()},G=H=>{const{toastId:J,onOpen:Y,updateId:X,children:ee}=H.props,ce=X==null;H.staleId&&z.delete(H.staleId),z.set(J,H),M=[...M,H.props.toastId].filter(oe=>oe!==H.staleId),U(),_(KM(H,ce?"added":"updated")),ce&&Dl(Y)&&Y(Ue.isValidElement(ee)&&ee.props)};return{id:x,props:R,observe:H=>(D.add(H),()=>D.delete(H)),toggle:(H,J)=>{z.forEach(Y=>{J!=null&&J!==Y.props.toastId||Dl(Y.toggle)&&Y.toggle(H)})},removeToast:V,toasts:z,clearQueue:()=>{P-=A.length,A=[]},buildToast:(H,J)=>{if((xe=>{let{containerId:Ee,toastId:Ge,updateId:$e}=xe;const be=Ee?Ee!==x:x!==1,He=z.has(Ge)&&$e==null;return be||He})(J))return;const{toastId:Y,updateId:X,data:ee,staleId:ce,delay:oe}=J,we=()=>{V(Y)},Ne=X==null;Ne&&P++;const Be={...R,style:R.toastStyle,key:T++,...Object.fromEntries(Object.entries(J).filter(xe=>{let[Ee,Ge]=xe;return Ge!=null})),toastId:Y,updateId:X,data:ee,closeToast:we,isIn:!1,className:uw(J.className||R.toastClassName),bodyClassName:uw(J.bodyClassName||R.bodyClassName),progressClassName:uw(J.progressClassName||R.progressClassName),autoClose:!J.isLoading&&(De=J.autoClose,Ae=R.autoClose,De===!1||_1(De)&&De>0?De:Ae),deleteToast(){const xe=z.get(Y),{onClose:Ee,children:Ge}=xe.props;Dl(Ee)&&Ee(Ue.isValidElement(Ge)&&Ge.props),_(KM(xe,"removed")),z.delete(Y),P--,P<0&&(P=0),A.length>0?G(A.shift()):U()}};var De,Ae;Be.closeButton=R.closeButton,J.closeButton===!1||dI(J.closeButton)?Be.closeButton=J.closeButton:J.closeButton===!0&&(Be.closeButton=!dI(R.closeButton)||R.closeButton);let ve=H;Ue.isValidElement(H)&&!lg(H.type)?ve=Ue.cloneElement(H,{closeToast:we,toastProps:Be,data:ee}):Dl(H)&&(ve=H({closeToast:we,toastProps:Be,data:ee}));const he={content:ve,props:Be,staleId:ce};R.limit&&R.limit>0&&P>R.limit&&Ne?A.push(he):_1(oe)?setTimeout(()=>{G(he)},oe):G(he)},setProps(H){R=H},setToggle:(H,J)=>{z.get(H).toggle=J},isToastActive:H=>M.some(J=>J===H),getSnapshot:()=>R.newestOnTop?k.reverse():k}}(u,o,KH);La.set(u,p);const g=p.observe(l);return v1.forEach(x=>YF(x.content,x.options)),v1=[],()=>{g(),La.delete(u)}},setProps(l){var p;(p=La.get(u))==null||p.setProps(l)},getSnapshot(){var l;return(l=La.get(u))==null?void 0:l.getSnapshot()}}}(e)).current;r(e);const i=Ue.useSyncExternalStore(t,n,n);return{getToastToRender:function(o){if(!i)return[];const u=new Map;return i.forEach(l=>{const{position:p}=l.props;u.has(p)||u.set(p,[]),u.get(p).push(l)}),Array.from(u,l=>o(l[0],l[1]))},isToastActive:XF,count:i==null?void 0:i.length}}function YH(e){const[t,n]=Ue.useState(!1),[r,i]=Ue.useState(!1),o=Ue.useRef(null),u=Ue.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:p,closeToast:g,onClick:x,closeOnClick:y}=e;var _,T;function P(){n(!0)}function A(){n(!1)}function M(z){const D=o.current;u.canDrag&&D&&(u.didMove=!0,t&&A(),u.delta=e.draggableDirection==="x"?z.clientX-u.start:z.clientY-u.start,u.start!==z.clientX&&(u.canCloseOnClick=!1),D.style.transform=`translate3d(${e.draggableDirection==="x"?`${u.delta}px, var(--y)`:`0, calc(${u.delta}px + var(--y))`},0)`,D.style.opacity=""+(1-Math.abs(u.delta/u.removalDistance)))}function k(){document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",k);const z=o.current;if(u.canDrag&&u.didMove&&z){if(u.canDrag=!1,Math.abs(u.delta)>u.removalDistance)return i(!0),e.closeToast(),void e.collapseAll();z.style.transition="transform 0.2s, opacity 0.2s",z.style.removeProperty("transform"),z.style.removeProperty("opacity")}}(T=La.get((_={id:e.toastId,containerId:e.containerId,fn:n}).containerId||1))==null||T.setToggle(_.id,_.fn),Ue.useEffect(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||A(),window.addEventListener("focus",P),window.addEventListener("blur",A),()=>{window.removeEventListener("focus",P),window.removeEventListener("blur",A)}},[e.pauseOnFocusLoss]);const R={onPointerDown:function(z){if(e.draggable===!0||e.draggable===z.pointerType){u.didMove=!1,document.addEventListener("pointermove",M),document.addEventListener("pointerup",k);const D=o.current;u.canCloseOnClick=!0,u.canDrag=!0,D.style.transition="none",e.draggableDirection==="x"?(u.start=z.clientX,u.removalDistance=D.offsetWidth*(e.draggablePercent/100)):(u.start=z.clientY,u.removalDistance=D.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(z){const{top:D,bottom:U,left:V,right:G}=o.current.getBoundingClientRect();z.nativeEvent.type!=="touchend"&&e.pauseOnHover&&z.clientX>=V&&z.clientX<=G&&z.clientY>=D&&z.clientY<=U?A():P()}};return l&&p&&(R.onMouseEnter=A,e.stacked||(R.onMouseLeave=P)),y&&(R.onClick=z=>{x&&x(z),u.canCloseOnClick&&g()}),{playToast:P,pauseToast:A,isRunning:t,preventExitTransition:r,toastRef:o,eventHandlers:R}}function JH(e){let{delay:t,isRunning:n,closeToast:r,type:i="default",hide:o,className:u,style:l,controlledProgress:p,progress:g,rtl:x,isIn:y,theme:_}=e;const T=o||p&&g===0,P={...l,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused"};p&&(P.transform=`scaleX(${g})`);const A=bp("Toastify__progress-bar",p?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${_}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":x}),M=Dl(u)?u({rtl:x,type:i,defaultClassName:A}):bp(A,u),k={[p&&g>=1?"onTransitionEnd":"onAnimationEnd"]:p&&g<1?null:()=>{y&&r()}};return Bt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":T},Bt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${_} Toastify__progress-bar--${i}`}),Bt.createElement("div",{role:"progressbar","aria-hidden":T?"true":"false","aria-label":"notification timer",className:M,style:P,...k}))}let QH=1;const JF=()=>""+QH++;function eZ(e){return e&&(lg(e.toastId)||_1(e.toastId))?e.toastId:JF()}function U0(e,t){return YF(e,t),t.toastId}function Xw(e,t){return{...t,type:t&&t.type||e,toastId:eZ(t)}}function yb(e){return(t,n)=>U0(t,Xw(e,n))}function An(e,t){return U0(e,Xw("default",t))}An.loading=(e,t)=>U0(e,Xw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),An.promise=function(e,t,n){let r,{pending:i,error:o,success:u}=t;i&&(r=lg(i)?An.loading(i,n):An.loading(i.render,{...n,...i}));const l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},p=(x,y,_)=>{if(y==null)return void An.dismiss(r);const T={type:x,...l,...n,data:_},P=lg(y)?{render:y}:y;return r?An.update(r,{...T,...P}):An(P.render,{...T,...P}),_},g=Dl(e)?e():e;return g.then(x=>p("success",u,x)).catch(x=>p("error",o,x)),g},An.success=yb("success"),An.info=yb("info"),An.error=yb("error"),An.warning=yb("warning"),An.warn=An.warning,An.dark=(e,t)=>U0(e,Xw("default",{theme:"dark",...t})),An.dismiss=function(e){(function(t){var n;if(KF()){if(t==null||lg(n=t)||_1(n))La.forEach(r=>{r.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){const r=La.get(t.containerId);r?r.removeToast(t.id):La.forEach(i=>{i.removeToast(t.id)})}}else v1=v1.filter(r=>t!=null&&r.options.toastId!==t)})(e)},An.clearWaitingQueue=function(e){e===void 0&&(e={}),La.forEach(t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()})},An.isActive=XF,An.update=function(e,t){t===void 0&&(t={});const n=((r,i)=>{var o;let{containerId:u}=i;return(o=La.get(u||1))==null?void 0:o.toasts.get(r)})(e,t);if(n){const{props:r,content:i}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:JF()};o.toastId!==e&&(o.staleId=e);const u=o.render||i;delete o.render,U0(u,o)}},An.done=e=>{An.update(e,{progress:1})},An.onChange=function(e){return pI.add(e),()=>{pI.delete(e)}},An.play=e=>XM(!0,e),An.pause=e=>XM(!1,e);const tZ=typeof window<"u"?Ue.useLayoutEffect:Ue.useEffect,_b=e=>{let{theme:t,type:n,isLoading:r,...i}=e;return Bt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},k2={info:function(e){return Bt.createElement(_b,{...e},Bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return Bt.createElement(_b,{...e},Bt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return Bt.createElement(_b,{...e},Bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return Bt.createElement(_b,{...e},Bt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Bt.createElement("div",{className:"Toastify__spinner"})}},nZ=e=>{const{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:o}=YH(e),{closeButton:u,children:l,autoClose:p,onClick:g,type:x,hideProgressBar:y,closeToast:_,transition:T,position:P,className:A,style:M,bodyClassName:k,bodyStyle:R,progressClassName:z,progressStyle:D,updateId:U,role:V,progress:G,rtl:H,toastId:J,deleteToast:Y,isIn:X,isLoading:ee,closeOnClick:ce,theme:oe}=e,we=bp("Toastify__toast",`Toastify__toast-theme--${oe}`,`Toastify__toast--${x}`,{"Toastify__toast--rtl":H},{"Toastify__toast--close-on-click":ce}),Ne=Dl(A)?A({rtl:H,position:P,type:x,defaultClassName:we}):bp(we,A),Be=function(he){let{theme:xe,type:Ee,isLoading:Ge,icon:$e}=he,be=null;const He={theme:xe,type:Ee};return $e===!1||(Dl($e)?be=$e({...He,isLoading:Ge}):Ue.isValidElement($e)?be=Ue.cloneElement($e,He):Ge?be=k2.spinner():(it=>it in k2)(Ee)&&(be=k2[Ee](He))),be}(e),De=!!G||!p,Ae={closeToast:_,type:x,theme:oe};let ve=null;return u===!1||(ve=Dl(u)?u(Ae):Ue.isValidElement(u)?Ue.cloneElement(u,Ae):function(he){let{closeToast:xe,theme:Ee,ariaLabel:Ge="close"}=he;return Bt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${Ee}`,type:"button",onClick:$e=>{$e.stopPropagation(),xe($e)},"aria-label":Ge},Bt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Bt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(Ae)),Bt.createElement(T,{isIn:X,done:Y,position:P,preventExitTransition:n,nodeRef:r,playToast:o},Bt.createElement("div",{id:J,onClick:g,"data-in":X,className:Ne,...i,style:M,ref:r},Bt.createElement("div",{...X&&{role:V},className:Dl(k)?k({type:x}):bp("Toastify__toast-body",k),style:R},Be!=null&&Bt.createElement("div",{className:bp("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!ee})},Be),Bt.createElement("div",null,l)),ve,Bt.createElement(JH,{...U&&!De?{key:`pb-${U}`}:{},rtl:H,theme:oe,delay:p,isRunning:t,isIn:X,closeToast:_,hide:y,type:x,style:D,className:z,controlledProgress:De,progress:G||0})))},nS=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},rZ=tS(nS("bounce",!0));tS(nS("slide",!0));tS(nS("zoom"));tS(nS("flip"));const iZ={position:"top-right",transition:rZ,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function oZ(e){let t={...iZ,...e};const n=e.stacked,[r,i]=Ue.useState(!0),o=Ue.useRef(null),{getToastToRender:u,isToastActive:l,count:p}=XH(t),{className:g,style:x,rtl:y,containerId:_}=t;function T(A){const M=bp("Toastify__toast-container",`Toastify__toast-container--${A}`,{"Toastify__toast-container--rtl":y});return Dl(g)?g({position:A,rtl:y,defaultClassName:M}):bp(M,uw(g))}function P(){n&&(i(!0),An.play())}return tZ(()=>{if(n){var A;const M=o.current.querySelectorAll('[data-in="true"]'),k=12,R=(A=t.position)==null?void 0:A.includes("top");let z=0,D=0;Array.from(M).reverse().forEach((U,V)=>{const G=U;G.classList.add("Toastify__toast--stacked"),V>0&&(G.dataset.collapsed=`${r}`),G.dataset.pos||(G.dataset.pos=R?"top":"bot");const H=z*(r?.2:1)+(r?0:k*V);G.style.setProperty("--y",`${R?H:-1*H}px`),G.style.setProperty("--g",`${k}`),G.style.setProperty("--s",""+(1-(r?D:0))),z+=G.offsetHeight,D+=.025})}},[r,p,n]),Bt.createElement("div",{ref:o,className:"Toastify",id:_,onMouseEnter:()=>{n&&(i(!1),An.pause())},onMouseLeave:P},u((A,M)=>{const k=M.length?{...x}:{...x,pointerEvents:"none"};return Bt.createElement("div",{className:T(A),style:k,key:`container-${A}`},M.map(R=>{let{content:z,props:D}=R;return Bt.createElement(nZ,{...D,stacked:n,collapseAll:P,isIn:l(D.toastId,D.containerId),style:D.style,key:`toast-${D.key}`},z)}))}))}const Yc=Ue.createContext();function sZ({children:e}){const[t,n]=Ue.useState();Ue.useEffect(()=>{async function i(){var o,u,l,p;try{const g=await lr.get("http://localhost:8080/api/auth/me",{withCredentials:!0});n(g.data)}catch(g){if(((o=g.response)==null?void 0:o.status)>=400&&((u=g.response)==null?void 0:u.status)<500)return n({is_auth:!1,userInfo:null});An.error(((p=(l=g.response)==null?void 0:l.data)==null?void 0:p.message)||"Something went wrong, Please check your connection!",{autoClose:2e3})}}i()},[]);function r({is_auth:i,userInfo:o}){n({is_auth:i,userInfo:o})}return ae.jsx(Yc.Provider,{value:{userAuth:t,updateUser:r},children:e})}var QF={exports:{}},eB={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx=Ue;function aZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lZ=typeof Object.is=="function"?Object.is:aZ,uZ=mx.useSyncExternalStore,cZ=mx.useRef,hZ=mx.useEffect,fZ=mx.useMemo,dZ=mx.useDebugValue;eB.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=cZ(null);if(o.current===null){var u={hasValue:!1,value:null};o.current=u}else u=o.current;o=fZ(function(){function p(T){if(!g){if(g=!0,x=T,T=r(T),i!==void 0&&u.hasValue){var P=u.value;if(i(P,T))return y=P}return y=T}if(P=y,lZ(x,T))return P;var A=r(T);return i!==void 0&&i(P,A)?P:(x=T,y=A)}var g=!1,x,y,_=n===void 0?null:n;return[function(){return p(t())},_===null?void 0:function(){return p(_())}]},[t,n,r,i]);var l=uZ(e,o[0],o[1]);return hZ(function(){u.hasValue=!0,u.value=l},[l]),dZ(l),l};QF.exports=eB;var pZ=QF.exports,zl="default"in lC?Bt:lC,YM=Symbol.for("react-redux-context"),JM=typeof globalThis<"u"?globalThis:{};function mZ(){if(!zl.createContext)return{};const e=JM[YM]??(JM[YM]=new Map);let t=e.get(zl.createContext);return t||(t=zl.createContext(null),e.set(zl.createContext,t)),t}var zp=mZ(),gZ=()=>{throw new Error("uSES not initialized!")};function KL(e=zp){return function(){return zl.useContext(e)}}var tB=KL(),nB=gZ,yZ=e=>{nB=e},_Z=(e,t)=>e===t;function vZ(e=zp){const t=e===zp?tB:KL(e),n=(r,i={})=>{const{equalityFn:o=_Z,devModeChecks:u={}}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:p,getServerState:g,stabilityCheck:x,identityFunctionCheck:y}=t();zl.useRef(!0);const _=zl.useCallback({[r.name](P){return r(P)}}[r.name],[r,x,u.stabilityCheck]),T=nB(p.addNestedSub,l.getState,g||l.getState,_,o);return zl.useDebugValue(T),T};return Object.assign(n,{withTypes:()=>n}),n}var xZ=vZ();function bZ(e){e()}function wZ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){bZ(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var QM={notify(){},get:()=>[]};function EZ(e,t){let n,r=QM,i=0,o=!1;function u(A){x();const M=r.subscribe(A);let k=!1;return()=>{k||(k=!0,M(),y())}}function l(){r.notify()}function p(){P.onStateChange&&P.onStateChange()}function g(){return o}function x(){i++,n||(n=t?t.addNestedSub(p):e.subscribe(p),r=wZ())}function y(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=QM)}function _(){o||(o=!0,x())}function T(){o&&(o=!1,y())}const P={addNestedSub:u,notifyNestedSubs:l,handleChangeWrapper:p,isSubscribed:g,trySubscribe:_,tryUnsubscribe:T,getListeners:()=>r};return P}var SZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TZ=typeof navigator<"u"&&navigator.product==="ReactNative",CZ=SZ||TZ?zl.useLayoutEffect:zl.useEffect;function IZ({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:o="once"}){const u=zl.useMemo(()=>{const g=EZ(e);return{store:e,subscription:g,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:o}},[e,r,i,o]),l=zl.useMemo(()=>e.getState(),[e]);CZ(()=>{const{subscription:g}=u;return g.onStateChange=g.notifyNestedSubs,g.trySubscribe(),l!==e.getState()&&g.notifyNestedSubs(),()=>{g.tryUnsubscribe(),g.onStateChange=void 0}},[u,l]);const p=t||zp;return zl.createElement(p.Provider,{value:u},n)}var PZ=IZ;function rB(e=zp){const t=e===zp?tB:KL(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var LZ=rB();function AZ(e=zp){const t=e===zp?LZ:rB(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var XL=AZ();yZ(pZ.useSyncExternalStoreWithSelector);function As(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var OZ=typeof Symbol=="function"&&Symbol.observable||"@@observable",eN=OZ,R2=()=>Math.random().toString(36).substring(7).split("").join("."),kZ={INIT:`@@redux/INIT${R2()}`,REPLACE:`@@redux/REPLACE${R2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${R2()}`},Yw=kZ;function YL(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function iB(e,t,n){if(typeof e!="function")throw new Error(As(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(As(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(As(1));return n(iB)(e,t)}let r=e,i=t,o=new Map,u=o,l=0,p=!1;function g(){u===o&&(u=new Map,o.forEach((M,k)=>{u.set(k,M)}))}function x(){if(p)throw new Error(As(3));return i}function y(M){if(typeof M!="function")throw new Error(As(4));if(p)throw new Error(As(5));let k=!0;g();const R=l++;return u.set(R,M),function(){if(k){if(p)throw new Error(As(6));k=!1,g(),u.delete(R),o=null}}}function _(M){if(!YL(M))throw new Error(As(7));if(typeof M.type>"u")throw new Error(As(8));if(typeof M.type!="string")throw new Error(As(17));if(p)throw new Error(As(9));try{p=!0,i=r(i,M)}finally{p=!1}return(o=u).forEach(R=>{R()}),M}function T(M){if(typeof M!="function")throw new Error(As(10));r=M,_({type:Yw.REPLACE})}function P(){const M=y;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(As(11));function R(){const D=k;D.next&&D.next(x())}return R(),{unsubscribe:M(R)}},[eN](){return this}}}return _({type:Yw.INIT}),{dispatch:_,subscribe:y,getState:x,replaceReducer:T,[eN]:P}}function RZ(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Yw.INIT})>"u")throw new Error(As(12));if(typeof n(void 0,{type:Yw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(As(13))})}function MZ(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(n[u]=e[u])}const r=Object.keys(n);let i;try{RZ(n)}catch(o){i=o}return function(u={},l){if(i)throw i;let p=!1;const g={};for(let x=0;x<r.length;x++){const y=r[x],_=n[y],T=u[y],P=_(T,l);if(typeof P>"u")throw l&&l.type,new Error(As(14));g[y]=P,p=p||P!==T}return p=p||r.length!==Object.keys(u).length,p?g:u}}function Jw(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function NZ(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(As(15))};const u={getState:i.getState,dispatch:(p,...g)=>o(p,...g)},l=e.map(p=>p(u));return o=Jw(...l)(i.dispatch),{...i,dispatch:o}}}function DZ(e){return YL(e)&&"type"in e&&typeof e.type=="string"}var oB=Symbol.for("immer-nothing"),tN=Symbol.for("immer-draftable"),ql=Symbol.for("immer-state");function kc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var C_=Object.getPrototypeOf;function Fp(e){return!!e&&!!e[ql]}function ud(e){var t;return e?sB(e)||Array.isArray(e)||!!e[tN]||!!((t=e.constructor)!=null&&t[tN])||iS(e)||oS(e):!1}var zZ=Object.prototype.constructor.toString();function sB(e){if(!e||typeof e!="object")return!1;const t=C_(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===zZ}function Qw(e,t){rS(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function rS(e){const t=e[ql];return t?t.type_:Array.isArray(e)?1:iS(e)?2:oS(e)?3:0}function mI(e,t){return rS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function aB(e,t,n){const r=rS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function FZ(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function iS(e){return e instanceof Map}function oS(e){return e instanceof Set}function jm(e){return e.copy_||e.base_}function gI(e,t){if(iS(e))return new Map(e);if(oS(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=sB(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ql];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const u=i[o],l=r[u];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[u]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[u]})}return Object.create(C_(e),r)}else{const r=C_(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function JL(e,t=!1){return sS(e)||Fp(e)||!ud(e)||(rS(e)>1&&(e.set=e.add=e.clear=e.delete=BZ),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>JL(r,!0))),e}function BZ(){kc(2)}function sS(e){return Object.isFrozen(e)}var jZ={};function bg(e){const t=jZ[e];return t||kc(0,e),t}var x1;function lB(){return x1}function $Z(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nN(e,t){t&&(bg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function yI(e){_I(e),e.drafts_.forEach(UZ),e.drafts_=null}function _I(e){e===x1&&(x1=e.parent_)}function rN(e){return x1=$Z(x1,e)}function UZ(e){const t=e[ql];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function iN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ql].modified_&&(yI(t),kc(4)),ud(e)&&(e=eE(t,e),t.parent_||tE(t,e)),t.patches_&&bg("Patches").generateReplacementPatches_(n[ql].base_,e,t.patches_,t.inversePatches_)):e=eE(t,n,[]),yI(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==oB?e:void 0}function eE(e,t,n){if(sS(t))return t;const r=t[ql];if(!r)return Qw(t,(i,o)=>oN(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return tE(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,u=!1;r.type_===3&&(o=new Set(i),i.clear(),u=!0),Qw(o,(l,p)=>oN(e,r,i,l,p,n,u)),tE(e,i,!1),n&&e.patches_&&bg("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function oN(e,t,n,r,i,o,u){if(Fp(i)){const l=o&&t&&t.type_!==3&&!mI(t.assigned_,r)?o.concat(r):void 0,p=eE(e,i,l);if(aB(n,r,p),Fp(p))e.canAutoFreeze_=!1;else return}else u&&n.add(i);if(ud(i)&&!sS(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;eE(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&tE(e,i)}}function tE(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&JL(t,n)}function VZ(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:lB(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=QL;n&&(i=[r],o=b1);const{revoke:u,proxy:l}=Proxy.revocable(i,o);return r.draft_=l,r.revoke_=u,l}var QL={get(e,t){if(t===ql)return e;const n=jm(e);if(!mI(n,t))return qZ(e,n,t);const r=n[t];return e.finalized_||!ud(r)?r:r===M2(e.base_,t)?(N2(e),e.copy_[t]=xI(r,e)):r},has(e,t){return t in jm(e)},ownKeys(e){return Reflect.ownKeys(jm(e))},set(e,t,n){const r=uB(jm(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=M2(jm(e),t),o=i==null?void 0:i[ql];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(FZ(n,i)&&(n!==void 0||mI(e.base_,t)))return!0;N2(e),vI(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return M2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,N2(e),vI(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=jm(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){kc(11)},getPrototypeOf(e){return C_(e.base_)},setPrototypeOf(){kc(12)}},b1={};Qw(QL,(e,t)=>{b1[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});b1.deleteProperty=function(e,t){return b1.set.call(this,e,t,void 0)};b1.set=function(e,t,n){return QL.set.call(this,e[0],t,n,e[0])};function M2(e,t){const n=e[ql];return(n?jm(n):e)[t]}function qZ(e,t,n){var i;const r=uB(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function uB(e,t){if(!(t in e))return;let n=C_(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=C_(n)}}function vI(e){e.modified_||(e.modified_=!0,e.parent_&&vI(e.parent_))}function N2(e){e.copy_||(e.copy_=gI(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var GZ=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const u=this;return function(p=o,...g){return u.produce(p,x=>n.call(this,x,...g))}}typeof n!="function"&&kc(6),r!==void 0&&typeof r!="function"&&kc(7);let i;if(ud(t)){const o=rN(this),u=xI(t,void 0);let l=!0;try{i=n(u),l=!1}finally{l?yI(o):_I(o)}return nN(o,r),iN(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===oB&&(i=void 0),this.autoFreeze_&&JL(i,!0),r){const o=[],u=[];bg("Patches").generateReplacementPatches_(t,i,o,u),r(o,u)}return i}else kc(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(u,...l)=>this.produceWithPatches(u,p=>t(p,...l));let r,i;return[this.produce(t,n,(u,l)=>{r=u,i=l}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ud(e)||kc(8),Fp(e)&&(e=cB(e));const t=rN(this),n=xI(e,void 0);return n[ql].isManual_=!0,_I(t),n}finishDraft(e,t){const n=e&&e[ql];(!n||!n.isManual_)&&kc(9);const{scope_:r}=n;return nN(r,t),iN(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=bg("Patches").applyPatches_;return Fp(e)?r(e,t):this.produce(e,i=>r(i,t))}};function xI(e,t){const n=iS(e)?bg("MapSet").proxyMap_(e,t):oS(e)?bg("MapSet").proxySet_(e,t):VZ(e,t);return(t?t.scope_:lB()).drafts_.push(n),n}function cB(e){return Fp(e)||kc(10,e),hB(e)}function hB(e){if(!ud(e)||sS(e))return e;const t=e[ql];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=gI(e,t.scope_.immer_.useStrictShallowCopy_)}else n=gI(e,!0);return Qw(n,(r,i)=>{aB(n,r,hB(i))}),t&&(t.finalized_=!1),n}var Gl=new GZ,fB=Gl.produce;Gl.produceWithPatches.bind(Gl);Gl.setAutoFreeze.bind(Gl);Gl.setUseStrictShallowCopy.bind(Gl);Gl.applyPatches.bind(Gl);Gl.createDraft.bind(Gl);Gl.finishDraft.bind(Gl);function HZ(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function ZZ(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function WZ(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var sN=e=>Array.isArray(e)?e:[e];function KZ(e){const t=Array.isArray(e[0])?e[0]:e;return WZ(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function XZ(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var YZ=class{constructor(e){this.value=e}deref(){return this.value}},JZ=typeof WeakRef<"u"?WeakRef:YZ,QZ=0,aN=1;function vb(){return{s:QZ,v:void 0,o:null,p:null}}function eA(e,t={}){let n=vb();const{resultEqualityCheck:r}=t;let i,o=0;function u(){var y;let l=n;const{length:p}=arguments;for(let _=0,T=p;_<T;_++){const P=arguments[_];if(typeof P=="function"||typeof P=="object"&&P!==null){let A=l.o;A===null&&(l.o=A=new WeakMap);const M=A.get(P);M===void 0?(l=vb(),A.set(P,l)):l=M}else{let A=l.p;A===null&&(l.p=A=new Map);const M=A.get(P);M===void 0?(l=vb(),A.set(P,l)):l=M}}const g=l;let x;if(l.s===aN?x=l.v:(x=e.apply(null,arguments),o++),g.s=aN,r){const _=((y=i==null?void 0:i.deref)==null?void 0:y.call(i))??i;_!=null&&r(_,x)&&(x=_,o!==0&&o--),i=typeof x=="object"&&x!==null||typeof x=="function"?new JZ(x):x}return g.v=x,x}return u.clearCache=()=>{n=vb(),u.resetResultsCount()},u.resultsCount=()=>o,u.resetResultsCount=()=>{o=0},u}function dB(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let o=0,u=0,l,p={},g=i.pop();typeof g=="object"&&(p=g,g=i.pop()),HZ(g,`createSelector expects an output function after the inputs, but received: [${typeof g}]`);const x={...n,...p},{memoize:y,memoizeOptions:_=[],argsMemoize:T=eA,argsMemoizeOptions:P=[],devModeChecks:A={}}=x,M=sN(_),k=sN(P),R=KZ(i),z=y(function(){return o++,g.apply(null,arguments)},...M),D=T(function(){u++;const V=XZ(R,arguments);return l=z.apply(null,V),l},...k);return Object.assign(D,{resultFunc:g,memoizedResultFunc:z,dependencies:R,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>l,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:y,argsMemoize:T})};return Object.assign(r,{withTypes:()=>r}),r}var eW=dB(eA),tW=Object.assign((e,t=eW)=>{ZZ(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((u,l,p)=>(u[n[p]]=l,u),{}))},{withTypes:()=>tW});function pB(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var nW=pB(),rW=pB,iW=(...e)=>{const t=dB(...e),n=Object.assign((...r)=>{const i=t(...r),o=(u,...l)=>i(Fp(u)?cB(u):u,...l);return Object.assign(o,i),o},{withTypes:()=>n});return n};iW(eA);var oW=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Jw:Jw.apply(null,arguments)};function I_(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(al(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>DZ(r)&&r.type===e,n}var mB=class w0 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,w0.prototype)}static get[Symbol.species](){return w0}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new w0(...t[0].concat(this)):new w0(...t.concat(this))}};function lN(e){return ud(e)?fB(e,()=>{}):e}function uN(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(al(10));const r=n.insert(t,e);return e.set(t,r),r}function sW(e){return typeof e=="boolean"}var aW=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let u=new mB;return n&&(sW(n)?u.push(nW):u.push(rW(n.extraArgument))),u},lW="RTK_autoBatch",gB=e=>t=>{setTimeout(t,e)},uW=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gB(10),cW=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,u=!1;const l=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?uW:e.type==="callback"?e.queueNotification:gB(e.timeout),g=()=>{u=!1,o&&(o=!1,l.forEach(x=>x()))};return Object.assign({},r,{subscribe(x){const y=()=>i&&x(),_=r.subscribe(y);return l.add(x),()=>{_(),l.delete(x)}},dispatch(x){var y;try{return i=!((y=x==null?void 0:x.meta)!=null&&y[lW]),o=!i,o&&(u||(u=!0,p(g))),r.dispatch(x)}finally{i=!0}}})},hW=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new mB(e);return r&&i.push(cW(typeof r=="object"?r:void 0)),i},fW=!0;function dW(e){const t=aW(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(YL(n))l=MZ(n);else throw new Error(al(1));let p;typeof r=="function"?p=r(t):p=t();let g=Jw;i&&(g=oW({trace:!fW,...typeof i=="object"&&i}));const x=NZ(...p),y=hW(x);let _=typeof u=="function"?u(y):y();const T=g(..._);return iB(l,o,T)}function yB(e){const t={},n=[];let r;const i={addCase(o,u){const l=typeof o=="string"?o:o.type;if(!l)throw new Error(al(28));if(l in t)throw new Error(al(29));return t[l]=u,i},addMatcher(o,u){return n.push({matcher:o,reducer:u}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function pW(e){return typeof e=="function"}function mW(e,t){let[n,r,i]=yB(t),o;if(pW(e))o=()=>lN(e());else{const l=lN(e);o=()=>l}function u(l=o(),p){let g=[n[p.type],...r.filter(({matcher:x})=>x(p)).map(({reducer:x})=>x)];return g.filter(x=>!!x).length===0&&(g=[i]),g.reduce((x,y)=>{if(y)if(Fp(x)){const T=y(x,p);return T===void 0?x:T}else{if(ud(x))return fB(x,_=>y(_,p));{const _=y(x,p);if(_===void 0){if(x===null)return x;throw new Error(al(9))}return _}}return x},l)}return u.getInitialState=o,u}var gW="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",yW=(e=21)=>{let t="",n=e;for(;n--;)t+=gW[Math.random()*64|0];return t},_W=Symbol.for("rtk-slice-createasyncthunk");function vW(e,t){return`${e}/${t}`}function xW({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[_W];return function(i){const{name:o,reducerPath:u=o}=i;if(!o)throw new Error(al(11));typeof process<"u";const l=(typeof i.reducers=="function"?i.reducers(EW()):i.reducers)||{},p=Object.keys(l),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},x={addCase(z,D){const U=typeof z=="string"?z:z.type;if(!U)throw new Error(al(12));if(U in g.sliceCaseReducersByType)throw new Error(al(13));return g.sliceCaseReducersByType[U]=D,x},addMatcher(z,D){return g.sliceMatchers.push({matcher:z,reducer:D}),x},exposeAction(z,D){return g.actionCreators[z]=D,x},exposeCaseReducer(z,D){return g.sliceCaseReducersByName[z]=D,x}};p.forEach(z=>{const D=l[z],U={reducerName:z,type:vW(o,z),createNotation:typeof i.reducers=="function"};TW(D)?IW(U,D,x,t):SW(U,D,x)});function y(){const[z={},D=[],U=void 0]=typeof i.extraReducers=="function"?yB(i.extraReducers):[i.extraReducers],V={...z,...g.sliceCaseReducersByType};return mW(i.initialState,G=>{for(let H in V)G.addCase(H,V[H]);for(let H of g.sliceMatchers)G.addMatcher(H.matcher,H.reducer);for(let H of D)G.addMatcher(H.matcher,H.reducer);U&&G.addDefaultCase(U)})}const _=z=>z,T=new Map;let P;function A(z,D){return P||(P=y()),P(z,D)}function M(){return P||(P=y()),P.getInitialState()}function k(z,D=!1){function U(G){let H=G[z];return typeof H>"u"&&D&&(H=M()),H}function V(G=_){const H=uN(T,D,{insert:()=>new WeakMap});return uN(H,G,{insert:()=>{const J={};for(const[Y,X]of Object.entries(i.selectors??{}))J[Y]=bW(X,G,M,D);return J}})}return{reducerPath:z,getSelectors:V,get selectors(){return V(U)},selectSlice:U}}const R={name:o,reducer:A,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:M,...k(u),injectInto(z,{reducerPath:D,...U}={}){const V=D??u;return z.inject({reducerPath:V,reducer:A},U),{...R,...k(V,!0)}}};return R}}function bW(e,t,n,r){function i(o,...u){let l=t(o);return typeof l>"u"&&r&&(l=n()),e(l,...u)}return i.unwrapped=e,i}var wW=xW();function EW(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function SW({type:e,reducerName:t,createNotation:n},r,i){let o,u;if("reducer"in r){if(n&&!CW(r))throw new Error(al(17));o=r.reducer,u=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?I_(e,u):I_(e))}function TW(e){return e._reducerDefinitionType==="asyncThunk"}function CW(e){return e._reducerDefinitionType==="reducerWithPrepare"}function IW({type:e,reducerName:t},n,r,i){if(!i)throw new Error(al(18));const{payloadCreator:o,fulfilled:u,pending:l,rejected:p,settled:g,options:x}=n,y=i(e,o,x);r.exposeAction(t,y),u&&r.addCase(y.fulfilled,u),l&&r.addCase(y.pending,l),p&&r.addCase(y.rejected,p),g&&r.addMatcher(y.settled,g),r.exposeCaseReducer(t,{fulfilled:u||xb,pending:l||xb,rejected:p||xb,settled:g||xb})}function xb(){}var PW=(e,t)=>{if(typeof e!="function")throw new Error(al(32))},tA="listenerMiddleware",LW=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:o}=e;if(t)i=I_(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(al(21));return PW(o),{predicate:i,type:t,effect:o}},AW=Object.assign(e=>{const{type:t,predicate:n,effect:r}=LW(e);return{id:yW(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(al(22))}}},{withTypes:()=>AW}),OW=Object.assign(I_(`${tA}/add`),{withTypes:()=>OW});I_(`${tA}/removeAll`);var kW=Object.assign(I_(`${tA}/remove`),{withTypes:()=>kW});function al(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const RW=0,_B=wW({name:"notificationCount",initialState:RW,reducers:{setCount(e,t){return t.payload},decreaseCount(e,t){return e-t.payload},increaseCount(e,t){return e+t.payload}}}),{setCount:MW,decreaseCount:NW,increaseCount:DW}=_B.actions,zW=_B.reducer;function FW(){var o,u;const[e,t]=Ue.useState(!1),{userAuth:n}=Ue.useContext(Yc),r=XL(),i=xZ(l=>l.unreadNotifications);return Ue.useEffect(()=>{if(!n.is_auth)return;async function l(){try{const p=await lr.get("http://localhost:8080/api/messages/unread/count",{withCredentials:!0});r(MW(p.data))}catch{An.error("Something went wrong",{autoClose:2e3})}}l()},[n.is_auth]),ae.jsxs("nav",{children:[ae.jsxs("div",{className:"left-nav",children:[ae.jsx(oo,{to:"/",children:ae.jsxs("div",{className:"logo",children:[ae.jsx("img",{src:"/logo.png",alt:"logo"}),ae.jsx("span",{children:"MagicEstate"})]})}),ae.jsx(oo,{to:"/",children:"Home"}),ae.jsx(oo,{to:"/list",children:"Property"}),ae.jsx(oo,{to:"/about",children:"About"})]}),ae.jsxs("div",{className:"right-nav",children:[n.is_auth?ae.jsxs("div",{className:"logged-user",children:[ae.jsx(oo,{to:"/profile",children:ae.jsx("img",{className:"user-image",src:(o=n.userInfo)==null?void 0:o.avatar,alt:"avatar-image"})}),ae.jsx("span",{children:(u=n.userInfo)==null?void 0:u.username}),ae.jsxs(oo,{to:"/profile",className:"link-css",children:["Profile",i>0&&ae.jsx("span",{className:"notification",children:i})]})]}):ae.jsxs(ae.Fragment,{children:[ae.jsx(oo,{to:"/login",children:"Sign in"}),ae.jsx(oo,{className:"link-css",to:"/register",children:"Sign up"})]}),ae.jsx("div",{className:"hamburger-menu",onClick:()=>t(!e),children:ae.jsx("img",{src:"/menu.png",alt:"menu"})}),ae.jsx("div",{className:"menu-list",style:{right:e?"0%":"-50%"},children:n.is_auth?ae.jsxs(ae.Fragment,{children:[ae.jsx(oo,{to:"/",children:"Home"}),ae.jsx(oo,{to:"/list",children:"Property"}),ae.jsx(oo,{to:"/about",children:"About"}),ae.jsxs(oo,{to:"/profile",children:["Profile",i>0&&ae.jsx("span",{className:"notification",children:i})]})]}):ae.jsxs(ae.Fragment,{children:[ae.jsx(oo,{to:"/",children:"Home"}),ae.jsx(oo,{to:"/list",children:"Property"}),ae.jsx(oo,{to:"/about",children:"About"}),ae.jsx(oo,{to:"/login",children:"Sign in"}),ae.jsx(oo,{to:"/register",children:"Sign up"})]})})]})]})}var gx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},P_=typeof window>"u"||"Deno"in globalThis;function Pu(){}function BW(e,t){return typeof e=="function"?e(t):e}function bI(e){return typeof e=="number"&&e>=0&&e!==1/0}function vB(e,t){return Math.max(e+(t||0)-Date.now(),0)}function cN(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:u,stale:l}=e;if(u){if(r){if(t.queryHash!==nA(u,t.options))return!1}else if(!E1(t.queryKey,u))return!1}if(n!=="all"){const p=t.isActive();if(n==="active"&&!p||n==="inactive"&&p)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||o&&!o(t))}function hN(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(w1(t.options.mutationKey)!==w1(o))return!1}else if(!E1(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function nA(e,t){return((t==null?void 0:t.queryKeyHashFn)||w1)(e)}function w1(e){return JSON.stringify(e,(t,n)=>EI(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function E1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!E1(e[n],t[n])):!1}function xB(e,t){if(e===t)return e;const n=fN(e)&&fN(t);if(n||EI(e)&&EI(t)){const r=n?e:Object.keys(e),i=r.length,o=n?t:Object.keys(t),u=o.length,l=n?[]:{};let p=0;for(let g=0;g<u;g++){const x=n?g:o[g];!n&&e[x]===void 0&&t[x]===void 0&&r.includes(x)?(l[x]=void 0,p++):(l[x]=xB(e[x],t[x]),l[x]===e[x]&&e[x]!==void 0&&p++)}return i===u&&p===i?e:l}return t}function wI(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function fN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function EI(e){if(!dN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!dN(n)||!n.hasOwnProperty("isPrototypeOf"))}function dN(e){return Object.prototype.toString.call(e)==="[object Object]"}function jW(e){return new Promise(t=>{setTimeout(t,e)})}function SI(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?xB(e,t):t}function $W(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function UW(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var rA=Symbol(),Jm,hp,i_,$5,VW=($5=class extends gx{constructor(){super();cn(this,Jm,void 0);cn(this,hp,void 0);cn(this,i_,void 0);rn(this,i_,t=>{if(!P_&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Xe(this,hp)||this.setEventListener(Xe(this,i_))}onUnsubscribe(){var t;this.hasListeners()||((t=Xe(this,hp))==null||t.call(this),rn(this,hp,void 0))}setEventListener(t){var n;rn(this,i_,t),(n=Xe(this,hp))==null||n.call(this),rn(this,hp,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Xe(this,Jm)!==t&&(rn(this,Jm,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Xe(this,Jm)=="boolean"?Xe(this,Jm):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Jm=new WeakMap,hp=new WeakMap,i_=new WeakMap,$5),iA=new VW,o_,fp,s_,U5,qW=(U5=class extends gx{constructor(){super();cn(this,o_,!0);cn(this,fp,void 0);cn(this,s_,void 0);rn(this,s_,t=>{if(!P_&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Xe(this,fp)||this.setEventListener(Xe(this,s_))}onUnsubscribe(){var t;this.hasListeners()||((t=Xe(this,fp))==null||t.call(this),rn(this,fp,void 0))}setEventListener(t){var n;rn(this,s_,t),(n=Xe(this,fp))==null||n.call(this),rn(this,fp,t(this.setOnline.bind(this)))}setOnline(t){Xe(this,o_)!==t&&(rn(this,o_,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Xe(this,o_)}},o_=new WeakMap,fp=new WeakMap,s_=new WeakMap,U5),nE=new qW;function GW(e){return Math.min(1e3*2**e,3e4)}function bB(e){return(e??"online")==="online"?nE.isOnline():!0}var wB=class{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function D2(e){return e instanceof wB}function EB(e){let t=!1,n=0,r=!1,i,o,u;const l=new Promise((k,R)=>{o=k,u=R}),p=k=>{var R;r||(P(new wB(k)),(R=e.abort)==null||R.call(e))},g=()=>{t=!0},x=()=>{t=!1},y=()=>iA.isFocused()&&(e.networkMode==="always"||nE.isOnline())&&e.canRun(),_=()=>bB(e.networkMode)&&e.canRun(),T=k=>{var R;r||(r=!0,(R=e.onSuccess)==null||R.call(e,k),i==null||i(),o(k))},P=k=>{var R;r||(r=!0,(R=e.onError)==null||R.call(e,k),i==null||i(),u(k))},A=()=>new Promise(k=>{var R;i=z=>{(r||y())&&k(z)},(R=e.onPause)==null||R.call(e)}).then(()=>{var k;i=void 0,r||(k=e.onContinue)==null||k.call(e)}),M=()=>{if(r)return;let k;try{k=e.fn()}catch(R){k=Promise.reject(R)}Promise.resolve(k).then(T).catch(R=>{var G;if(r)return;const z=e.retry??(P_?0:3),D=e.retryDelay??GW,U=typeof D=="function"?D(n,R):D,V=z===!0||typeof z=="number"&&n<z||typeof z=="function"&&z(n,R);if(t||!V){P(R);return}n++,(G=e.onFail)==null||G.call(e,n,R),jW(U).then(()=>y()?void 0:A()).then(()=>{t?P(R):M()})})};return{promise:l,cancel:p,continue:()=>(i==null||i(),l),cancelRetry:g,continueRetry:x,canStart:_,start:()=>(_()?M():A().then(M),l)}}function HW(){let e=[],t=0,n=_=>{_()},r=_=>{_()},i=_=>setTimeout(_,0);const o=_=>{i=_},u=_=>{let T;t++;try{T=_()}finally{t--,t||g()}return T},l=_=>{t?e.push(_):i(()=>{n(_)})},p=_=>(...T)=>{l(()=>{_(...T)})},g=()=>{const _=e;e=[],_.length&&i(()=>{r(()=>{_.forEach(T=>{n(T)})})})};return{batch:u,batchCalls:p,schedule:l,setNotifyFunction:_=>{n=_},setBatchNotifyFunction:_=>{r=_},setScheduler:o}}var zs=HW(),Qm,V5,SB=(V5=class{constructor(){cn(this,Qm,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bI(this.gcTime)&&rn(this,Qm,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(P_?1/0:5*60*1e3))}clearGcTimeout(){Xe(this,Qm)&&(clearTimeout(Xe(this,Qm)),rn(this,Qm,void 0))}},Qm=new WeakMap,V5),a_,l_,Tu,Ea,G1,eg,Cc,Gf,q5,ZW=(q5=class extends SB{constructor(t){super();cn(this,Cc);cn(this,a_,void 0);cn(this,l_,void 0);cn(this,Tu,void 0);cn(this,Ea,void 0);cn(this,G1,void 0);cn(this,eg,void 0);rn(this,eg,!1),rn(this,G1,t.defaultOptions),this.setOptions(t.options),this.observers=[],rn(this,Tu,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,rn(this,a_,t.state||WW(this.options)),this.state=Xe(this,a_),this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...Xe(this,G1),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Xe(this,Tu).remove(this)}setData(t,n){const r=SI(this.state.data,t,this.options);return En(this,Cc,Gf).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){En(this,Cc,Gf).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=Xe(this,Ea))==null?void 0:r.promise;return(i=Xe(this,Ea))==null||i.cancel(t),n?n.then(Pu).catch(Pu):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Xe(this,a_))}isActive(){return this.observers.some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!vB(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Xe(this,Ea))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Xe(this,Ea))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Xe(this,Tu).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Xe(this,Ea)&&(Xe(this,eg)?Xe(this,Ea).cancel({revert:!0}):Xe(this,Ea).cancelRetry()),this.scheduleGc()),Xe(this,Tu).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||En(this,Cc,Gf).call(this,{type:"invalidate"})}fetch(t,n){var g,x,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Xe(this,Ea))return Xe(this,Ea).continueRetry(),Xe(this,Ea).promise}if(t&&this.setOptions(t),!this.options.queryFn){const _=this.observers.find(T=>T.options.queryFn);_&&this.setOptions(_.options)}const r=new AbortController,i={queryKey:this.queryKey,meta:this.meta},o=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(rn(this,eg,!0),r.signal)})};o(i);const u=()=>!this.options.queryFn||this.options.queryFn===rA?Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)):(rn(this,eg,!1),this.options.persister?this.options.persister(this.options.queryFn,i,this):this.options.queryFn(i)),l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};o(l),(g=this.options.behavior)==null||g.onFetch(l,this),rn(this,l_,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=l.fetchOptions)==null?void 0:x.meta))&&En(this,Cc,Gf).call(this,{type:"fetch",meta:(y=l.fetchOptions)==null?void 0:y.meta});const p=_=>{var T,P,A,M;D2(_)&&_.silent||En(this,Cc,Gf).call(this,{type:"error",error:_}),D2(_)||((P=(T=Xe(this,Tu).config).onError)==null||P.call(T,_,this),(M=(A=Xe(this,Tu).config).onSettled)==null||M.call(A,this.state.data,_,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return rn(this,Ea,EB({fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:_=>{var T,P,A,M;if(_===void 0){p(new Error(`${this.queryHash} data is undefined`));return}this.setData(_),(P=(T=Xe(this,Tu).config).onSuccess)==null||P.call(T,_,this),(M=(A=Xe(this,Tu).config).onSettled)==null||M.call(A,_,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:p,onFail:(_,T)=>{En(this,Cc,Gf).call(this,{type:"failed",failureCount:_,error:T})},onPause:()=>{En(this,Cc,Gf).call(this,{type:"pause"})},onContinue:()=>{En(this,Cc,Gf).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Xe(this,Ea).start()}},a_=new WeakMap,l_=new WeakMap,Tu=new WeakMap,Ea=new WeakMap,G1=new WeakMap,eg=new WeakMap,Cc=new WeakSet,Gf=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...TB(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return D2(i)&&i.revert&&Xe(this,l_)?{...Xe(this,l_),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),zs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Xe(this,Tu).notify({query:this,type:"updated",action:t})})},q5);function TB(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bB(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function WW(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Bh,G5,KW=(G5=class extends gx{constructor(t={}){super();cn(this,Bh,void 0);this.config=t,rn(this,Bh,new Map)}build(t,n,r){const i=n.queryKey,o=n.queryHash??nA(i,n);let u=this.get(o);return u||(u=new ZW({cache:this,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(u)),u}add(t){Xe(this,Bh).has(t.queryHash)||(Xe(this,Bh).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Xe(this,Bh).get(t.queryHash);n&&(t.destroy(),n===t&&Xe(this,Bh).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){zs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Xe(this,Bh).get(t)}getAll(){return[...Xe(this,Bh).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>cN(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>cN(t,r)):n}notify(t){zs.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){zs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){zs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Bh=new WeakMap,G5),jh,Sa,tg,$h,rp,H5,XW=(H5=class extends SB{constructor(t){super();cn(this,$h);cn(this,jh,void 0);cn(this,Sa,void 0);cn(this,tg,void 0);this.mutationId=t.mutationId,rn(this,Sa,t.mutationCache),rn(this,jh,[]),this.state=t.state||YW(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Xe(this,jh).includes(t)||(Xe(this,jh).push(t),this.clearGcTimeout(),Xe(this,Sa).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){rn(this,jh,Xe(this,jh).filter(n=>n!==t)),this.scheduleGc(),Xe(this,Sa).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Xe(this,jh).length||(this.state.status==="pending"?this.scheduleGc():Xe(this,Sa).remove(this))}continue(){var t;return((t=Xe(this,tg))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,u,l,p,g,x,y,_,T,P,A,M,k,R,z,D,U,V,G;rn(this,tg,EB({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(H,J)=>{En(this,$h,rp).call(this,{type:"failed",failureCount:H,error:J})},onPause:()=>{En(this,$h,rp).call(this,{type:"pause"})},onContinue:()=>{En(this,$h,rp).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Xe(this,Sa).canRun(this)}));const n=this.state.status==="pending",r=!Xe(this,tg).canStart();try{if(!n){En(this,$h,rp).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(i=Xe(this,Sa).config).onMutate)==null?void 0:o.call(i,t,this));const J=await((l=(u=this.options).onMutate)==null?void 0:l.call(u,t));J!==this.state.context&&En(this,$h,rp).call(this,{type:"pending",context:J,variables:t,isPaused:r})}const H=await Xe(this,tg).start();return await((g=(p=Xe(this,Sa).config).onSuccess)==null?void 0:g.call(p,H,t,this.state.context,this)),await((y=(x=this.options).onSuccess)==null?void 0:y.call(x,H,t,this.state.context)),await((T=(_=Xe(this,Sa).config).onSettled)==null?void 0:T.call(_,H,null,this.state.variables,this.state.context,this)),await((A=(P=this.options).onSettled)==null?void 0:A.call(P,H,null,t,this.state.context)),En(this,$h,rp).call(this,{type:"success",data:H}),H}catch(H){try{throw await((k=(M=Xe(this,Sa).config).onError)==null?void 0:k.call(M,H,t,this.state.context,this)),await((z=(R=this.options).onError)==null?void 0:z.call(R,H,t,this.state.context)),await((U=(D=Xe(this,Sa).config).onSettled)==null?void 0:U.call(D,void 0,H,this.state.variables,this.state.context,this)),await((G=(V=this.options).onSettled)==null?void 0:G.call(V,void 0,H,t,this.state.context)),H}finally{En(this,$h,rp).call(this,{type:"error",error:H})}}finally{Xe(this,Sa).runNext(this)}}},jh=new WeakMap,Sa=new WeakMap,tg=new WeakMap,$h=new WeakSet,rp=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),zs.batch(()=>{Xe(this,jh).forEach(r=>{r.onMutationUpdate(t)}),Xe(this,Sa).notify({mutation:this,type:"updated",action:t})})},H5);function YW(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ol,H1,Z5,JW=(Z5=class extends gx{constructor(t={}){super();cn(this,Ol,void 0);cn(this,H1,void 0);this.config=t,rn(this,Ol,new Map),rn(this,H1,Date.now())}build(t,n,r){const i=new XW({mutationCache:this,mutationId:++by(this,H1)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=bb(t),r=Xe(this,Ol).get(n)??[];r.push(t),Xe(this,Ol).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=bb(t);if(Xe(this,Ol).has(n)){const i=(r=Xe(this,Ol).get(n))==null?void 0:r.filter(o=>o!==t);i&&(i.length===0?Xe(this,Ol).delete(n):Xe(this,Ol).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=Xe(this,Ol).get(bb(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=Xe(this,Ol).get(bb(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){zs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...Xe(this,Ol).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>hN(n,r))}findAll(t={}){return this.getAll().filter(n=>hN(t,n))}notify(t){zs.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return zs.batch(()=>Promise.all(t.map(n=>n.continue().catch(Pu))))}},Ol=new WeakMap,H1=new WeakMap,Z5);function bb(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function QW(e){return{onFetch:(t,n)=>{const r=async()=>{var P,A,M,k,R;const i=t.options,o=(M=(A=(P=t.fetchOptions)==null?void 0:P.meta)==null?void 0:A.fetchMore)==null?void 0:M.direction,u=((k=t.state.data)==null?void 0:k.pages)||[],l=((R=t.state.data)==null?void 0:R.pageParams)||[],p={pages:[],pageParams:[]};let g=!1;const x=z=>{Object.defineProperty(z,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},y=t.options.queryFn&&t.options.queryFn!==rA?t.options.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${t.options.queryHash}'`)),_=async(z,D,U)=>{if(g)return Promise.reject();if(D==null&&z.pages.length)return Promise.resolve(z);const V={queryKey:t.queryKey,pageParam:D,direction:U?"backward":"forward",meta:t.options.meta};x(V);const G=await y(V),{maxPages:H}=t.options,J=U?UW:$W;return{pages:J(z.pages,G,H),pageParams:J(z.pageParams,D,H)}};let T;if(o&&u.length){const z=o==="backward",D=z?eK:pN,U={pages:u,pageParams:l},V=D(i,U);T=await _(U,V,z)}else{T=await _(p,l[0]??i.initialPageParam);const z=e??u.length;for(let D=1;D<z;D++){const U=pN(i,T);T=await _(T,U)}}return T};t.options.persister?t.fetchFn=()=>{var i,o;return(o=(i=t.options).persister)==null?void 0:o.call(i,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function pN(e,{pages:t,pageParams:n}){const r=t.length-1;return e.getNextPageParam(t[r],t,n[r],n)}function eK(e,{pages:t,pageParams:n}){var r;return(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n)}var ro,dp,pp,u_,c_,mp,h_,f_,W5,tK=(W5=class{constructor(e={}){cn(this,ro,void 0);cn(this,dp,void 0);cn(this,pp,void 0);cn(this,u_,void 0);cn(this,c_,void 0);cn(this,mp,void 0);cn(this,h_,void 0);cn(this,f_,void 0);rn(this,ro,e.queryCache||new KW),rn(this,dp,e.mutationCache||new JW),rn(this,pp,e.defaultOptions||{}),rn(this,u_,new Map),rn(this,c_,new Map),rn(this,mp,0)}mount(){by(this,mp)._++,Xe(this,mp)===1&&(rn(this,h_,iA.subscribe(async e=>{e&&(await this.resumePausedMutations(),Xe(this,ro).onFocus())})),rn(this,f_,nE.subscribe(async e=>{e&&(await this.resumePausedMutations(),Xe(this,ro).onOnline())})))}unmount(){var e,t;by(this,mp)._--,Xe(this,mp)===0&&((e=Xe(this,h_))==null||e.call(this),rn(this,h_,void 0),(t=Xe(this,f_))==null||t.call(this),rn(this,f_,void 0))}isFetching(e){return Xe(this,ro).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Xe(this,dp).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Xe(this,ro).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=Xe(this,ro).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(n.staleTime)&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return Xe(this,ro).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=Xe(this,ro).get(r.queryHash),o=i==null?void 0:i.state.data,u=BW(t,o);if(u!==void 0)return Xe(this,ro).build(this,r).setData(u,{...n,manual:!0})}setQueriesData(e,t,n){return zs.batch(()=>Xe(this,ro).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Xe(this,ro).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Xe(this,ro);zs.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Xe(this,ro),r={type:"active",...e};return zs.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=zs.batch(()=>Xe(this,ro).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Pu).catch(Pu)}invalidateQueries(e={},t={}){return zs.batch(()=>{if(Xe(this,ro).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=zs.batch(()=>Xe(this,ro).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(Pu)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Pu)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Xe(this,ro).build(this,t);return n.isStaleByTime(t.staleTime)?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Pu).catch(Pu)}fetchInfiniteQuery(e){return e.behavior=QW(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Pu).catch(Pu)}resumePausedMutations(){return nE.isOnline()?Xe(this,dp).resumePausedMutations():Promise.resolve()}getQueryCache(){return Xe(this,ro)}getMutationCache(){return Xe(this,dp)}getDefaultOptions(){return Xe(this,pp)}setDefaultOptions(e){rn(this,pp,e)}setQueryDefaults(e,t){Xe(this,u_).set(w1(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Xe(this,u_).values()];let n={};return t.forEach(r=>{E1(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){Xe(this,c_).set(w1(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Xe(this,c_).values()];let n={};return t.forEach(r=>{E1(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Xe(this,pp).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=nA(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===rA&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Xe(this,pp).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Xe(this,ro).clear(),Xe(this,dp).clear()}},ro=new WeakMap,dp=new WeakMap,pp=new WeakMap,u_=new WeakMap,c_=new WeakMap,mp=new WeakMap,h_=new WeakMap,f_=new WeakMap,W5),Qa,mi,Z1,Ta,ng,d_,Uh,W1,p_,m_,rg,ig,gp,g_,og,E0,K1,TI,X1,CI,Y1,II,J1,PI,Q1,LI,ex,AI,tx,OI,CE,CB,K5,nK=(K5=class extends gx{constructor(t,n){super();cn(this,og);cn(this,K1);cn(this,X1);cn(this,Y1);cn(this,J1);cn(this,Q1);cn(this,ex);cn(this,tx);cn(this,CE);cn(this,Qa,void 0);cn(this,mi,void 0);cn(this,Z1,void 0);cn(this,Ta,void 0);cn(this,ng,void 0);cn(this,d_,void 0);cn(this,Uh,void 0);cn(this,W1,void 0);cn(this,p_,void 0);cn(this,m_,void 0);cn(this,rg,void 0);cn(this,ig,void 0);cn(this,gp,void 0);cn(this,g_,new Set);this.options=n,rn(this,Qa,t),rn(this,Uh,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Xe(this,mi).addObserver(this),mN(Xe(this,mi),this.options)?En(this,og,E0).call(this):this.updateResult(),En(this,J1,PI).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return kI(Xe(this,mi),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return kI(Xe(this,mi),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,En(this,Q1,LI).call(this),En(this,ex,AI).call(this),Xe(this,mi).removeObserver(this)}setOptions(t,n){const r=this.options,i=Xe(this,mi);if(this.options=Xe(this,Qa).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");En(this,tx,OI).call(this),Xe(this,mi).setOptions(this.options),r._defaulted&&!wI(this.options,r)&&Xe(this,Qa).getQueryCache().notify({type:"observerOptionsUpdated",query:Xe(this,mi),observer:this});const o=this.hasListeners();o&&gN(Xe(this,mi),i,this.options,r)&&En(this,og,E0).call(this),this.updateResult(n),o&&(Xe(this,mi)!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&En(this,K1,TI).call(this);const u=En(this,X1,CI).call(this);o&&(Xe(this,mi)!==i||this.options.enabled!==r.enabled||u!==Xe(this,gp))&&En(this,Y1,II).call(this,u)}getOptimisticResult(t){const n=Xe(this,Qa).getQueryCache().build(Xe(this,Qa),t),r=this.createResult(n,t);return iK(this,r)&&(rn(this,Ta,r),rn(this,d_,this.options),rn(this,ng,Xe(this,mi).state)),r}getCurrentResult(){return Xe(this,Ta)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){Xe(this,g_).add(t)}getCurrentQuery(){return Xe(this,mi)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=Xe(this,Qa).defaultQueryOptions(t),r=Xe(this,Qa).getQueryCache().build(Xe(this,Qa),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return En(this,og,E0).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Xe(this,Ta)))}createResult(t,n){var G;const r=Xe(this,mi),i=this.options,o=Xe(this,Ta),u=Xe(this,ng),l=Xe(this,d_),g=t!==r?t.state:Xe(this,Z1),{state:x}=t;let y={...x},_=!1,T;if(n._optimisticResults){const H=this.hasListeners(),J=!H&&mN(t,n),Y=H&&gN(t,r,n,i);(J||Y)&&(y={...y,...TB(x.data,t.options)}),n._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:P,errorUpdatedAt:A,status:M}=y;if(n.select&&y.data!==void 0)if(o&&y.data===(u==null?void 0:u.data)&&n.select===Xe(this,W1))T=Xe(this,p_);else try{rn(this,W1,n.select),T=n.select(y.data),T=SI(o==null?void 0:o.data,T,n),rn(this,p_,T),rn(this,Uh,null)}catch(H){rn(this,Uh,H)}else T=y.data;if(n.placeholderData!==void 0&&T===void 0&&M==="pending"){let H;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))H=o.data;else if(H=typeof n.placeholderData=="function"?n.placeholderData((G=Xe(this,m_))==null?void 0:G.state.data,Xe(this,m_)):n.placeholderData,n.select&&H!==void 0)try{H=n.select(H),rn(this,Uh,null)}catch(J){rn(this,Uh,J)}H!==void 0&&(M="success",T=SI(o==null?void 0:o.data,H,n),_=!0)}Xe(this,Uh)&&(P=Xe(this,Uh),T=Xe(this,p_),A=Date.now(),M="error");const k=y.fetchStatus==="fetching",R=M==="pending",z=M==="error",D=R&&k,U=T!==void 0;return{status:M,fetchStatus:y.fetchStatus,isPending:R,isSuccess:M==="success",isError:z,isInitialLoading:D,isLoading:D,data:T,dataUpdatedAt:y.dataUpdatedAt,error:P,errorUpdatedAt:A,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>g.dataUpdateCount||y.errorUpdateCount>g.errorUpdateCount,isFetching:k,isRefetching:k&&!R,isLoadingError:z&&!U,isPaused:y.fetchStatus==="paused",isPlaceholderData:_,isRefetchError:z&&U,isStale:oA(t,n),refetch:this.refetch}}updateResult(t){const n=Xe(this,Ta),r=this.createResult(Xe(this,mi),this.options);if(rn(this,ng,Xe(this,mi).state),rn(this,d_,this.options),Xe(this,ng).data!==void 0&&rn(this,m_,Xe(this,mi)),wI(r,n))return;rn(this,Ta,r);const i={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:u}=this.options,l=typeof u=="function"?u():u;if(l==="all"||!l&&!Xe(this,g_).size)return!0;const p=new Set(l??Xe(this,g_));return this.options.throwOnError&&p.add("error"),Object.keys(Xe(this,Ta)).some(g=>{const x=g;return Xe(this,Ta)[x]!==n[x]&&p.has(x)})};(t==null?void 0:t.listeners)!==!1&&o()&&(i.listeners=!0),En(this,CE,CB).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&En(this,J1,PI).call(this)}},Qa=new WeakMap,mi=new WeakMap,Z1=new WeakMap,Ta=new WeakMap,ng=new WeakMap,d_=new WeakMap,Uh=new WeakMap,W1=new WeakMap,p_=new WeakMap,m_=new WeakMap,rg=new WeakMap,ig=new WeakMap,gp=new WeakMap,g_=new WeakMap,og=new WeakSet,E0=function(t){En(this,tx,OI).call(this);let n=Xe(this,mi).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Pu)),n},K1=new WeakSet,TI=function(){if(En(this,Q1,LI).call(this),P_||Xe(this,Ta).isStale||!bI(this.options.staleTime))return;const n=vB(Xe(this,Ta).dataUpdatedAt,this.options.staleTime)+1;rn(this,rg,setTimeout(()=>{Xe(this,Ta).isStale||this.updateResult()},n))},X1=new WeakSet,CI=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Xe(this,mi)):this.options.refetchInterval)??!1},Y1=new WeakSet,II=function(t){En(this,ex,AI).call(this),rn(this,gp,t),!(P_||this.options.enabled===!1||!bI(Xe(this,gp))||Xe(this,gp)===0)&&rn(this,ig,setInterval(()=>{(this.options.refetchIntervalInBackground||iA.isFocused())&&En(this,og,E0).call(this)},Xe(this,gp)))},J1=new WeakSet,PI=function(){En(this,K1,TI).call(this),En(this,Y1,II).call(this,En(this,X1,CI).call(this))},Q1=new WeakSet,LI=function(){Xe(this,rg)&&(clearTimeout(Xe(this,rg)),rn(this,rg,void 0))},ex=new WeakSet,AI=function(){Xe(this,ig)&&(clearInterval(Xe(this,ig)),rn(this,ig,void 0))},tx=new WeakSet,OI=function(){const t=Xe(this,Qa).getQueryCache().build(Xe(this,Qa),this.options);if(t===Xe(this,mi))return;const n=Xe(this,mi);rn(this,mi,t),rn(this,Z1,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},CE=new WeakSet,CB=function(t){zs.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(Xe(this,Ta))}),Xe(this,Qa).getQueryCache().notify({query:Xe(this,mi),type:"observerResultsUpdated"})})},K5);function rK(e,t){return t.enabled!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function mN(e,t){return rK(e,t)||e.state.data!==void 0&&kI(e,t,t.refetchOnMount)}function kI(e,t,n){if(t.enabled!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&oA(e,t)}return!1}function gN(e,t,n,r){return(e!==t||r.enabled===!1)&&(!n.suspense||e.state.status!=="error")&&oA(e,n)}function oA(e,t){return t.enabled!==!1&&e.isStaleByTime(t.staleTime)}function iK(e,t){return!wI(e.getCurrentResult(),t)}var IB=Ue.createContext(void 0),nm=e=>{const t=Ue.useContext(IB);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},oK=({client:e,children:t})=>(Ue.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),ae.jsx(IB.Provider,{value:e,children:t})),PB=Ue.createContext(!1),sK=()=>Ue.useContext(PB);PB.Provider;function aK(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var lK=Ue.createContext(aK()),uK=()=>Ue.useContext(lK);function cK(e,t){return typeof e=="function"?e(...t):!!e}var hK=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},fK=e=>{Ue.useEffect(()=>{e.clearReset()},[e])},dK=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&cK(n,[e.error,r]),pK=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},mK=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,gK=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function yK(e,t,n){const r=nm(n),i=sK(),o=uK(),u=r.defaultQueryOptions(e);u._optimisticResults=i?"isRestoring":"optimistic",pK(u),hK(u,o),fK(o);const[l]=Ue.useState(()=>new t(r,u)),p=l.getOptimisticResult(u);if(Ue.useSyncExternalStore(Ue.useCallback(g=>{const x=i?()=>{}:l.subscribe(zs.batchCalls(g));return l.updateResult(),x},[l,i]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),Ue.useEffect(()=>{l.setOptions(u,{listeners:!1})},[u,l]),mK(u,p))throw gK(u,l,o);if(dK({result:p,errorResetBoundary:o,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash)}))throw p.error;return u.notifyOnChangeProps?p:l.trackResult(p)}function yx(e,t){return yK(e,nK,t)}const Xh=Object.create(null);Xh.open="0";Xh.close="1";Xh.ping="2";Xh.pong="3";Xh.message="4";Xh.upgrade="5";Xh.noop="6";const cw=Object.create(null);Object.keys(Xh).forEach(e=>{cw[Xh[e]]=e});const RI={type:"error",data:"parser error"},LB=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",AB=typeof ArrayBuffer=="function",OB=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,sA=({type:e,data:t},n,r)=>LB&&t instanceof Blob?n?r(t):yN(t,r):AB&&(t instanceof ArrayBuffer||OB(t))?n?r(t):yN(new Blob([t]),r):r(Xh[e]+(t||"")),yN=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function _N(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let z2;function _K(e,t){if(LB&&e.data instanceof Blob)return e.data.arrayBuffer().then(_N).then(t);if(AB&&(e.data instanceof ArrayBuffer||OB(e.data)))return t(_N(e.data));sA(e,!1,n=>{z2||(z2=new TextEncoder),t(z2.encode(n))})}const vN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<vN.length;e++)S0[vN.charCodeAt(e)]=e;const vK=e=>{let t=e.length*.75,n=e.length,r,i=0,o,u,l,p;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const g=new ArrayBuffer(t),x=new Uint8Array(g);for(r=0;r<n;r+=4)o=S0[e.charCodeAt(r)],u=S0[e.charCodeAt(r+1)],l=S0[e.charCodeAt(r+2)],p=S0[e.charCodeAt(r+3)],x[i++]=o<<2|u>>4,x[i++]=(u&15)<<4|l>>2,x[i++]=(l&3)<<6|p&63;return g},xK=typeof ArrayBuffer=="function",aA=(e,t)=>{if(typeof e!="string")return{type:"message",data:kB(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:bK(e.substring(1),t)}:cw[n]?e.length>1?{type:cw[n],data:e.substring(1)}:{type:cw[n]}:RI},bK=(e,t)=>{if(xK){const n=vK(e);return kB(n,t)}else return{base64:!0,data:e}},kB=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},RB="",wK=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((o,u)=>{sA(o,!1,l=>{r[u]=l,++i===n&&t(r.join(RB))})})},EK=(e,t)=>{const n=e.split(RB),r=[];for(let i=0;i<n.length;i++){const o=aA(n[i],t);if(r.push(o),o.type==="error")break}return r};function SK(){return new TransformStream({transform(e,t){_K(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let F2;function wb(e){return e.reduce((t,n)=>t+n.length,0)}function Eb(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function TK(e,t){F2||(F2=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(u,l){for(n.push(u);;){if(r===0){if(wb(n)<1)break;const p=Eb(n,1);o=(p[0]&128)===128,i=p[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(wb(n)<2)break;const p=Eb(n,2);i=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),r=3}else if(r===2){if(wb(n)<8)break;const p=Eb(n,8),g=new DataView(p.buffer,p.byteOffset,p.length),x=g.getUint32(0);if(x>Math.pow(2,21)-1){l.enqueue(RI);break}i=x*Math.pow(2,32)+g.getUint32(4),r=3}else{if(wb(n)<i)break;const p=Eb(n,i);l.enqueue(aA(o?p:F2.decode(p),t)),r=0}if(i===0||i>e){l.enqueue(RI);break}}}})}const MB=4;function ko(e){if(e)return CK(e)}function CK(e){for(var t in ko.prototype)e[t]=ko.prototype[t];return e}ko.prototype.on=ko.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ko.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};ko.prototype.off=ko.prototype.removeListener=ko.prototype.removeAllListeners=ko.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};ko.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};ko.prototype.emitReserved=ko.prototype.emit;ko.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ko.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ku=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function NB(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const IK=ku.setTimeout,PK=ku.clearTimeout;function aS(e,t){t.useNativeTimers?(e.setTimeoutFn=IK.bind(ku),e.clearTimeoutFn=PK.bind(ku)):(e.setTimeoutFn=ku.setTimeout.bind(ku),e.clearTimeoutFn=ku.clearTimeout.bind(ku))}const LK=1.33;function AK(e){return typeof e=="string"?OK(e):Math.ceil((e.byteLength||e.size)*LK)}function OK(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function kK(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function RK(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class MK extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class lA extends ko{constructor(t){super(),this.writable=!1,aS(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,n,r){return super.emitReserved("error",new MK(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=aA(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=kK(t);return n.length?"?"+n:""}}const DB="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),MI=64,NK={};let xN=0,Sb=0,bN;function wN(e){let t="";do t=DB[e%MI]+t,e=Math.floor(e/MI);while(e>0);return t}function zB(){const e=wN(+new Date);return e!==bN?(xN=0,bN=e):e+"."+wN(xN++)}for(;Sb<MI;Sb++)NK[DB[Sb]]=Sb;let FB=!1;try{FB=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const DK=FB;function BB(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||DK))return new XMLHttpRequest}catch{}if(!t)try{return new ku[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function zK(){}const FK=function(){return new BB({xdomain:!1}).responseType!=null}();class BK extends lA{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}const n=t&&t.forceBase64;this.supportsBinary=FK&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};EK(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,wK(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=zB()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Jy(this.uri(),t)}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}let Jy=class hw extends ko{constructor(t,n){super(),aS(this,n),this.opts=n,this.method=n.method||"GET",this.uri=t,this.data=n.data!==void 0?n.data:null,this.create()}create(){var t;const n=NB(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new BB(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=hw.requestsCount++,hw.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=zK,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete hw.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Jy.requestsCount=0;Jy.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",EN);else if(typeof addEventListener=="function"){const e="onpagehide"in ku?"pagehide":"unload";addEventListener(e,EN,!1)}}function EN(){for(let e in Jy.requests)Jy.requests.hasOwnProperty(e)&&Jy.requests[e].abort()}const uA=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Tb=ku.WebSocket||ku.MozWebSocket,SN=!0,jK="arraybuffer",TN=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class $K extends lA{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),n=this.opts.protocols,r=TN?{}:NB(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=SN&&!TN?n?new Tb(t,n):new Tb(t):new Tb(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;sA(r,this.supportsBinary,o=>{const u={};try{SN&&this.ws.send(o)}catch{}i&&uA(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=zB()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}check(){return!!Tb}}class UK extends lA{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const n=TK(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=SK();i.readable.pipeTo(t.writable),this.writer=i.writable.getWriter();const o=()=>{r.read().then(({done:l,value:p})=>{l||(this.onPacket(p),o())}).catch(l=>{})};o();const u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this.writer.write(u).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this.writer.write(r).then(()=>{i&&uA(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const VK={websocket:$K,webtransport:UK,polling:BK},qK=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,GK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function NI(e){if(e.length>2e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=qK.exec(e||""),o={},u=14;for(;u--;)o[GK[u]]=i[u]||"";return n!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=HK(o,o.path),o.queryKey=ZK(o,o.query),o}function HK(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function ZK(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}let jB=class Cy extends ko{constructor(t,n={}){super(),this.binaryType=jK,this.writeBuffer=[],t&&typeof t=="object"&&(n=t,t=null),t?(t=NI(t),n.hostname=t.host,n.secure=t.protocol==="https"||t.protocol==="wss",n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=NI(n.host).host),aS(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=RK(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=MB,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new VK[t](r)}open(){let t;if(this.opts.rememberUpgrade&&Cy.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(t){let n=this.createTransport(t),r=!1;Cy.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",y=>{if(!r)if(y.type==="pong"&&y.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Cy.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(x(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const _=new Error("probe error");_.transport=n.name,this.emitReserved("upgradeError",_)}}))};function o(){r||(r=!0,x(),n.close(),n=null)}const u=y=>{const _=new Error("probe error: "+y);_.transport=n.name,o(),this.emitReserved("upgradeError",_)};function l(){u("transport closed")}function p(){u("socket closed")}function g(y){n&&y.name!==n.name&&o()}const x=()=>{n.removeListener("open",i),n.removeListener("error",u),n.removeListener("close",l),this.off("close",p),this.off("upgrading",g)};n.once("open",i),n.once("error",u),n.once("close",l),this.once("close",p),this.once("upgrading",g),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",Cy.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const n=this.upgrades.length;for(;t<n;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=t.data,this.onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=AK(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(t,n,r){return this.sendPacket("message",t,n,r),this}send(t,n,r){return this.sendPacket("message",t,n,r),this}sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:t,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}onError(t){Cy.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const n=[];let r=0;const i=t.length;for(;r<i;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}};jB.protocol=MB;function WK(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=NI(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const KK=typeof ArrayBuffer=="function",XK=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,$B=Object.prototype.toString,YK=typeof Blob=="function"||typeof Blob<"u"&&$B.call(Blob)==="[object BlobConstructor]",JK=typeof File=="function"||typeof File<"u"&&$B.call(File)==="[object FileConstructor]";function cA(e){return KK&&(e instanceof ArrayBuffer||XK(e))||YK&&e instanceof Blob||JK&&e instanceof File}function fw(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(fw(e[n]))return!0;return!1}if(cA(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return fw(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&fw(e[n]))return!0;return!1}function QK(e){const t=[],n=e.data,r=e;return r.data=DI(n,t),r.attachments=t.length,{packet:r,buffers:t}}function DI(e,t){if(!e)return e;if(cA(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=DI(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=DI(e[r],t));return n}return e}function eX(e,t){return e.data=zI(e.data,t),delete e.attachments,e}function zI(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=zI(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=zI(e[n],t));return e}const tX=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],nX=5;var br;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(br||(br={}));class rX{constructor(t){this.replacer=t}encode(t){return(t.type===br.EVENT||t.type===br.ACK)&&fw(t)?this.encodeAsBinary({type:t.type===br.EVENT?br.BINARY_EVENT:br.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===br.BINARY_EVENT||t.type===br.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=QK(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function CN(e){return Object.prototype.toString.call(e)==="[object Object]"}class hA extends ko{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===br.BINARY_EVENT;r||n.type===br.BINARY_ACK?(n.type=r?br.EVENT:br.ACK,this.reconstructor=new iX(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(cA(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(br[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===br.BINARY_EVENT||r.type===br.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const u=t.substring(o,n);if(u!=Number(u)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(u)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(o,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const u=t.charAt(n);if(u==null||Number(u)!=u){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(hA.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case br.CONNECT:return CN(n);case br.DISCONNECT:return n===void 0;case br.CONNECT_ERROR:return typeof n=="string"||CN(n);case br.EVENT:case br.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&tX.indexOf(n[0])===-1);case br.ACK:case br.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class iX{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=eX(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const oX=Object.freeze(Object.defineProperty({__proto__:null,Decoder:hA,Encoder:rX,get PacketType(){return br},protocol:nX},Symbol.toStringTag,{value:"Module"}));function Lc(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const sX=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});let UB=class extends ko{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Lc(t,"open",this.onopen.bind(this)),Lc(t,"packet",this.onpacket.bind(this)),Lc(t,"error",this.onerror.bind(this)),Lc(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){if(sX.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:br.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,l=n.pop();this._registerAckCallback(u,l),r.id=u}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),u=(...l)=>{this.io.clearTimeoutFn(o),n.apply(this,l)};u.withError=!0,this.acks[t]=u}emitWithAck(t,...n){return new Promise((r,i)=>{const o=(u,l)=>u?i(u):r(l);o.withError=!0,n.push(o),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...o)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:br.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case br.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case br.EVENT:case br.BINARY_EVENT:this.onevent(t);break;case br.ACK:case br.BINARY_ACK:this.onack(t);break;case br.DISCONNECT:this.ondisconnect();break;case br.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:br.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:br.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}};function ov(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ov.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};ov.prototype.reset=function(){this.attempts=0};ov.prototype.setMin=function(e){this.ms=e};ov.prototype.setMax=function(e){this.max=e};ov.prototype.setJitter=function(e){this.jitter=e};class FI extends ko{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,aS(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new ov({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||oX;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new jB(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Lc(n,"open",function(){r.onopen(),t&&t()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},u=Lc(n,"error",o);if(this._timeout!==!1){const l=this._timeout,p=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},l);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(i),this.subs.push(u),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Lc(t,"ping",this.onping.bind(this)),Lc(t,"data",this.ondata.bind(this)),Lc(t,"error",this.onerror.bind(this)),Lc(t,"close",this.onclose.bind(this)),Lc(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){uA(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new UB(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const c0={};function dw(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=WK(e,t.path||"/socket.io"),r=n.source,i=n.id,o=n.path,u=c0[i]&&o in c0[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||u;let p;return l?p=new FI(r,t):(c0[i]||(c0[i]=new FI(r,t)),p=c0[i]),n.query&&!t.query&&(t.query=n.queryKey),p.socket(n.path,t)}Object.assign(dw,{Manager:FI,Socket:UB,io:dw,connect:dw});const lS=Ue.createContext();function aX({children:e}){const[t,n]=Ue.useState(null),r=dw("http://localhost:8080",{withCredentials:!0});return Ue.useEffect(()=>{const i=function(){r.emit("user-disconnect"),r.disconnect()};return r.on("connect",()=>{n(r),r.emit("user-connected",{socketId:r.id})}),window.addEventListener("beforeunload",i),()=>{i(),window.removeEventListener("beforeunload",i)}},[]),ae.jsx(lS.Provider,{value:t,children:e})}function lX(){const e=Ue.useContext(lS),t=nm(),[n,r]=Ue.useState(navigator.onLine),i=XL();return Ue.useEffect(()=>{const o=()=>{r(!1)};window.addEventListener("offline",o);const u=()=>{r(!0)};return window.addEventListener("online",u),()=>{removeEventListener("offline",o),removeEventListener("online",u)}},[]),Ue.useEffect(()=>(e==null||e.on("receive-notification",o=>{t.getQueryData(["chats"])&&t.setQueryData(["chats"],u=>u.map(l=>l._id===o.chatId?{...l,lastMessage:o.message.content,messages:[...l.messages,o==null?void 0:o.message]}:l)),t.getQueryData(["chat",o.chatId])&&t.setQueryData(["chat",o.chatId],u=>({...u,messages:[...u.messages,o.message]})),i(DW(1))}),function(){e==null||e.off("receive-notification")}),[e]),ae.jsxs(ae.Fragment,{children:[!n&&ae.jsx("div",{className:"network",children:"Network connection failed it happens if you are not connected to a internet connection"}),ae.jsxs("div",{className:"layout",children:[ae.jsx("div",{className:"header",children:ae.jsx(FW,{})}),ae.jsx("div",{className:"content",children:ae.jsx(cG,{})})]})]})}function B2({children:e}){const{userAuth:t}=Ue.useContext(Yc);return t.is_auth?ae.jsx(ae.Fragment,{children:e}):ae.jsx(uG,{to:"/login",state:location.pathname})}function uX(){return ae.jsxs("div",{className:"about-container",children:[ae.jsx("div",{className:"right-container",children:ae.jsxs("div",{className:"wrapper",children:[ae.jsx("h2",{children:"About Us"}),ae.jsx("p",{children:"Welcome to MagicEstate Realty, your ultimate destination for all things real estate. Whether you're looking to buy your dream home, sell a property, or invest in the booming real estate market, HomeNest Realty is here to guide you every step of the way. Our platform is designed to simplify the real estate experience by providing comprehensive tools and resources to help you make informed decisions with confidence."}),ae.jsx("h2",{children:"Our Mission"}),ae.jsx("p",{children:"At  MagicEstate Realty, our mission is to revolutionize the real estate industry by leveraging technology, data, and expertise to offer an unparalleled customer experience. We strive to empower buyers, sellers, and investors with the knowledge and support they need to achieve their real estate goals efficiently and effectively."}),ae.jsx("h2",{children:"Who We Are"}),ae.jsx("p",{children:"HomeNest Realty was founded by a team of seasoned real estate professionals and tech enthusiasts who recognized the need for a more integrated and user-friendly real estate platform. Our team combines decades of experience in the real estate market with cutting-edge technology to deliver a seamless and transparent experience for our users."})]})}),ae.jsx("div",{className:"left-container",children:ae.jsx("img",{src:"/about-us.png",alt:"about-us"})})]})}async function cX(e,t){const n={method:"GET",url:"https://forward-reverse-geocoding.p.rapidapi.com/v1/reverse",params:{lat:t,lon:e,"accept-language":"en",polygon_threshold:"0.0"},headers:{"X-RapidAPI-Key":"a4482dc2f1msh259b149196cc2f6p15402ajsn703c7e0383c7","X-RapidAPI-Host":"forward-reverse-geocoding.p.rapidapi.com"}};try{const r=await lr.request(n),{address:i,lat:o,lon:u,display_name:l}=r.data;return{city:i==null?void 0:i.city,longitude:u,latitude:o,address:l}}catch(r){return r}}const fA=["buy","rent"],VB=["Apartment","House","Condo","Land"],hX=["Allowed","Not allowed"],fX=["Renter is responsible","Owner is responsible"],dX=["Must deposit 2X of the rent to owner","Must deposit 3X of the rent to owner","Must deposit 4X of the rent to owner","Must deposit 5X of the rent to owner"],pX="https://cdn3.iconfinder.com/data/icons/home-62/48/Sale-Home-Property-Smart-512.png",mX="https://cdn-icons-png.flaticon.com/512/6231/6231224.png",gX=[{name:"username",type:"text",id:"username",labelText:"username",placeholder:"Enter your username"},{name:"email",type:"email",id:"email",labelText:"email",placeholder:"Enter your email"},{name:"password",type:"password",id:"password",labelText:"password",placeholder:"Enter your password"}],yX=[{name:"email",type:"email",id:"email",labelText:"email",placeholder:"Enter your email"},{name:"password",type:"password",id:"password",labelText:"password",placeholder:"Enter your password"}],_X=[{name:"username",type:"text",id:"username",labelText:"username"},{name:"email",type:"email",id:"email",labelText:"email"}],vX=[{name:"title",type:"text",id:"title",labelText:"Title"},{name:"price",type:"number",id:"price",labelText:"Price"},{name:"bedroom",type:"number",id:"bedroom",labelText:"Bedroom Number"},{name:"bathroom",type:"number",id:"bathroom",labelText:"Bathroom Number"},{name:"size",type:"number",id:"size",labelText:"Total Size(sqft)"},{name:"school",type:"number",id:"school",labelText:"School close by"},{name:"bus",type:"number",id:"bus",labelText:"Bus Stop close by"},{name:"restraunt",type:"number",id:"restraunt",labelText:"Restraunt close by"}],xX={title:"",price:null,type:"",property:"",size:null,bedroom:null,bathroom:null,desc:"",images:[]},qB="https://www.its.ac.id/tmesin/wp-content/uploads/sites/22/2022/07/no-image.png";var bX=function(t){return wX(t)&&!EX(t)};function wX(e){return!!e&&typeof e=="object"}function EX(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||CX(e)}var SX=typeof Symbol=="function"&&Symbol.for,TX=SX?Symbol.for("react.element"):60103;function CX(e){return e.$$typeof===TX}function IX(e){return Array.isArray(e)?[]:{}}function rE(e,t){return t.clone!==!1&&t.isMergeableObject(e)?S1(IX(e),e,t):e}function PX(e,t,n){return e.concat(t).map(function(r){return rE(r,n)})}function LX(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach(function(i){r[i]=rE(e[i],n)}),Object.keys(t).forEach(function(i){!n.isMergeableObject(t[i])||!e[i]?r[i]=rE(t[i],n):r[i]=S1(e[i],t[i],n)}),r}function S1(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||PX,n.isMergeableObject=n.isMergeableObject||bX;var r=Array.isArray(t),i=Array.isArray(e),o=r===i;return o?r?n.arrayMerge(e,t,n):LX(e,t,n):rE(t,n)}S1.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,i){return S1(r,i,n)},{})};var BI=S1,GB=typeof global=="object"&&global&&global.Object===Object&&global,AX=typeof self=="object"&&self&&self.Object===Object&&self,af=GB||AX||Function("return this")(),Bp=af.Symbol,HB=Object.prototype,OX=HB.hasOwnProperty,kX=HB.toString,h0=Bp?Bp.toStringTag:void 0;function RX(e){var t=OX.call(e,h0),n=e[h0];try{e[h0]=void 0;var r=!0}catch{}var i=kX.call(e);return r&&(t?e[h0]=n:delete e[h0]),i}var MX=Object.prototype,NX=MX.toString;function DX(e){return NX.call(e)}var zX="[object Null]",FX="[object Undefined]",IN=Bp?Bp.toStringTag:void 0;function Bg(e){return e==null?e===void 0?FX:zX:IN&&IN in Object(e)?RX(e):DX(e)}function ZB(e,t){return function(n){return e(t(n))}}var dA=ZB(Object.getPrototypeOf,Object);function jg(e){return e!=null&&typeof e=="object"}var BX="[object Object]",jX=Function.prototype,$X=Object.prototype,WB=jX.toString,UX=$X.hasOwnProperty,VX=WB.call(Object);function PN(e){if(!jg(e)||Bg(e)!=BX)return!1;var t=dA(e);if(t===null)return!0;var n=UX.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&WB.call(n)==VX}function qX(){this.__data__=[],this.size=0}function KB(e,t){return e===t||e!==e&&t!==t}function uS(e,t){for(var n=e.length;n--;)if(KB(e[n][0],t))return n;return-1}var GX=Array.prototype,HX=GX.splice;function ZX(e){var t=this.__data__,n=uS(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():HX.call(t,n,1),--this.size,!0}function WX(e){var t=this.__data__,n=uS(t,e);return n<0?void 0:t[n][1]}function KX(e){return uS(this.__data__,e)>-1}function XX(e,t){var n=this.__data__,r=uS(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Sd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Sd.prototype.clear=qX;Sd.prototype.delete=ZX;Sd.prototype.get=WX;Sd.prototype.has=KX;Sd.prototype.set=XX;function YX(){this.__data__=new Sd,this.size=0}function JX(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function QX(e){return this.__data__.get(e)}function eY(e){return this.__data__.has(e)}function _x(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var tY="[object AsyncFunction]",nY="[object Function]",rY="[object GeneratorFunction]",iY="[object Proxy]";function XB(e){if(!_x(e))return!1;var t=Bg(e);return t==nY||t==rY||t==tY||t==iY}var j2=af["__core-js_shared__"],LN=function(){var e=/[^.]+$/.exec(j2&&j2.keys&&j2.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function oY(e){return!!LN&&LN in e}var sY=Function.prototype,aY=sY.toString;function $g(e){if(e!=null){try{return aY.call(e)}catch{}try{return e+""}catch{}}return""}var lY=/[\\^$.*+?()[\]{}|]/g,uY=/^\[object .+?Constructor\]$/,cY=Function.prototype,hY=Object.prototype,fY=cY.toString,dY=hY.hasOwnProperty,pY=RegExp("^"+fY.call(dY).replace(lY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mY(e){if(!_x(e)||oY(e))return!1;var t=XB(e)?pY:uY;return t.test($g(e))}function gY(e,t){return e==null?void 0:e[t]}function Ug(e,t){var n=gY(e,t);return mY(n)?n:void 0}var T1=Ug(af,"Map"),C1=Ug(Object,"create");function yY(){this.__data__=C1?C1(null):{},this.size=0}function _Y(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var vY="__lodash_hash_undefined__",xY=Object.prototype,bY=xY.hasOwnProperty;function wY(e){var t=this.__data__;if(C1){var n=t[e];return n===vY?void 0:n}return bY.call(t,e)?t[e]:void 0}var EY=Object.prototype,SY=EY.hasOwnProperty;function TY(e){var t=this.__data__;return C1?t[e]!==void 0:SY.call(t,e)}var CY="__lodash_hash_undefined__";function IY(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=C1&&t===void 0?CY:t,this}function wg(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}wg.prototype.clear=yY;wg.prototype.delete=_Y;wg.prototype.get=wY;wg.prototype.has=TY;wg.prototype.set=IY;function PY(){this.size=0,this.__data__={hash:new wg,map:new(T1||Sd),string:new wg}}function LY(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function cS(e,t){var n=e.__data__;return LY(t)?n[typeof t=="string"?"string":"hash"]:n.map}function AY(e){var t=cS(this,e).delete(e);return this.size-=t?1:0,t}function OY(e){return cS(this,e).get(e)}function kY(e){return cS(this,e).has(e)}function RY(e,t){var n=cS(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function rm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}rm.prototype.clear=PY;rm.prototype.delete=AY;rm.prototype.get=OY;rm.prototype.has=kY;rm.prototype.set=RY;var MY=200;function NY(e,t){var n=this.__data__;if(n instanceof Sd){var r=n.__data__;if(!T1||r.length<MY-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new rm(r)}return n.set(e,t),this.size=n.size,this}function sv(e){var t=this.__data__=new Sd(e);this.size=t.size}sv.prototype.clear=YX;sv.prototype.delete=JX;sv.prototype.get=QX;sv.prototype.has=eY;sv.prototype.set=NY;function DY(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var AN=function(){try{var e=Ug(Object,"defineProperty");return e({},"",{}),e}catch{}}();function YB(e,t,n){t=="__proto__"&&AN?AN(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var zY=Object.prototype,FY=zY.hasOwnProperty;function JB(e,t,n){var r=e[t];(!(FY.call(e,t)&&KB(r,n))||n===void 0&&!(t in e))&&YB(e,t,n)}function hS(e,t,n,r){var i=!n;n||(n={});for(var o=-1,u=t.length;++o<u;){var l=t[o],p=r?r(n[l],e[l],l,n,e):void 0;p===void 0&&(p=e[l]),i?YB(n,l,p):JB(n,l,p)}return n}function BY(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var jY="[object Arguments]";function ON(e){return jg(e)&&Bg(e)==jY}var QB=Object.prototype,$Y=QB.hasOwnProperty,UY=QB.propertyIsEnumerable,VY=ON(function(){return arguments}())?ON:function(e){return jg(e)&&$Y.call(e,"callee")&&!UY.call(e,"callee")},vx=Array.isArray;function qY(){return!1}var e6=typeof Fl=="object"&&Fl&&!Fl.nodeType&&Fl,kN=e6&&typeof Bl=="object"&&Bl&&!Bl.nodeType&&Bl,GY=kN&&kN.exports===e6,RN=GY?af.Buffer:void 0,HY=RN?RN.isBuffer:void 0,t6=HY||qY,ZY=9007199254740991,WY=/^(?:0|[1-9]\d*)$/;function KY(e,t){var n=typeof e;return t=t??ZY,!!t&&(n=="number"||n!="symbol"&&WY.test(e))&&e>-1&&e%1==0&&e<t}var XY=9007199254740991;function n6(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=XY}var YY="[object Arguments]",JY="[object Array]",QY="[object Boolean]",eJ="[object Date]",tJ="[object Error]",nJ="[object Function]",rJ="[object Map]",iJ="[object Number]",oJ="[object Object]",sJ="[object RegExp]",aJ="[object Set]",lJ="[object String]",uJ="[object WeakMap]",cJ="[object ArrayBuffer]",hJ="[object DataView]",fJ="[object Float32Array]",dJ="[object Float64Array]",pJ="[object Int8Array]",mJ="[object Int16Array]",gJ="[object Int32Array]",yJ="[object Uint8Array]",_J="[object Uint8ClampedArray]",vJ="[object Uint16Array]",xJ="[object Uint32Array]",Ti={};Ti[fJ]=Ti[dJ]=Ti[pJ]=Ti[mJ]=Ti[gJ]=Ti[yJ]=Ti[_J]=Ti[vJ]=Ti[xJ]=!0;Ti[YY]=Ti[JY]=Ti[cJ]=Ti[QY]=Ti[hJ]=Ti[eJ]=Ti[tJ]=Ti[nJ]=Ti[rJ]=Ti[iJ]=Ti[oJ]=Ti[sJ]=Ti[aJ]=Ti[lJ]=Ti[uJ]=!1;function bJ(e){return jg(e)&&n6(e.length)&&!!Ti[Bg(e)]}function pA(e){return function(t){return e(t)}}var r6=typeof Fl=="object"&&Fl&&!Fl.nodeType&&Fl,V0=r6&&typeof Bl=="object"&&Bl&&!Bl.nodeType&&Bl,wJ=V0&&V0.exports===r6,$2=wJ&&GB.process,L_=function(){try{var e=V0&&V0.require&&V0.require("util").types;return e||$2&&$2.binding&&$2.binding("util")}catch{}}(),MN=L_&&L_.isTypedArray,EJ=MN?pA(MN):bJ,SJ=Object.prototype,TJ=SJ.hasOwnProperty;function i6(e,t){var n=vx(e),r=!n&&VY(e),i=!n&&!r&&t6(e),o=!n&&!r&&!i&&EJ(e),u=n||r||i||o,l=u?BY(e.length,String):[],p=l.length;for(var g in e)(t||TJ.call(e,g))&&!(u&&(g=="length"||i&&(g=="offset"||g=="parent")||o&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||KY(g,p)))&&l.push(g);return l}var CJ=Object.prototype;function mA(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||CJ;return e===n}var IJ=ZB(Object.keys,Object),PJ=Object.prototype,LJ=PJ.hasOwnProperty;function AJ(e){if(!mA(e))return IJ(e);var t=[];for(var n in Object(e))LJ.call(e,n)&&n!="constructor"&&t.push(n);return t}function o6(e){return e!=null&&n6(e.length)&&!XB(e)}function gA(e){return o6(e)?i6(e):AJ(e)}function OJ(e,t){return e&&hS(t,gA(t),e)}function kJ(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var RJ=Object.prototype,MJ=RJ.hasOwnProperty;function NJ(e){if(!_x(e))return kJ(e);var t=mA(e),n=[];for(var r in e)r=="constructor"&&(t||!MJ.call(e,r))||n.push(r);return n}function yA(e){return o6(e)?i6(e,!0):NJ(e)}function DJ(e,t){return e&&hS(t,yA(t),e)}var s6=typeof Fl=="object"&&Fl&&!Fl.nodeType&&Fl,NN=s6&&typeof Bl=="object"&&Bl&&!Bl.nodeType&&Bl,zJ=NN&&NN.exports===s6,DN=zJ?af.Buffer:void 0,zN=DN?DN.allocUnsafe:void 0;function FJ(e,t){if(t)return e.slice();var n=e.length,r=zN?zN(n):new e.constructor(n);return e.copy(r),r}function a6(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function BJ(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var u=e[n];t(u,n,e)&&(o[i++]=u)}return o}function l6(){return[]}var jJ=Object.prototype,$J=jJ.propertyIsEnumerable,FN=Object.getOwnPropertySymbols,_A=FN?function(e){return e==null?[]:(e=Object(e),BJ(FN(e),function(t){return $J.call(e,t)}))}:l6;function UJ(e,t){return hS(e,_A(e),t)}function u6(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var VJ=Object.getOwnPropertySymbols,c6=VJ?function(e){for(var t=[];e;)u6(t,_A(e)),e=dA(e);return t}:l6;function qJ(e,t){return hS(e,c6(e),t)}function h6(e,t,n){var r=t(e);return vx(e)?r:u6(r,n(e))}function GJ(e){return h6(e,gA,_A)}function HJ(e){return h6(e,yA,c6)}var jI=Ug(af,"DataView"),$I=Ug(af,"Promise"),UI=Ug(af,"Set"),VI=Ug(af,"WeakMap"),BN="[object Map]",ZJ="[object Object]",jN="[object Promise]",$N="[object Set]",UN="[object WeakMap]",VN="[object DataView]",WJ=$g(jI),KJ=$g(T1),XJ=$g($I),YJ=$g(UI),JJ=$g(VI),$m=Bg;(jI&&$m(new jI(new ArrayBuffer(1)))!=VN||T1&&$m(new T1)!=BN||$I&&$m($I.resolve())!=jN||UI&&$m(new UI)!=$N||VI&&$m(new VI)!=UN)&&($m=function(e){var t=Bg(e),n=t==ZJ?e.constructor:void 0,r=n?$g(n):"";if(r)switch(r){case WJ:return VN;case KJ:return BN;case XJ:return jN;case YJ:return $N;case JJ:return UN}return t});const vA=$m;var QJ=Object.prototype,eQ=QJ.hasOwnProperty;function tQ(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&eQ.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var qN=af.Uint8Array;function xA(e){var t=new e.constructor(e.byteLength);return new qN(t).set(new qN(e)),t}function nQ(e,t){var n=t?xA(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var rQ=/\w*$/;function iQ(e){var t=new e.constructor(e.source,rQ.exec(e));return t.lastIndex=e.lastIndex,t}var GN=Bp?Bp.prototype:void 0,HN=GN?GN.valueOf:void 0;function oQ(e){return HN?Object(HN.call(e)):{}}function sQ(e,t){var n=t?xA(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var aQ="[object Boolean]",lQ="[object Date]",uQ="[object Map]",cQ="[object Number]",hQ="[object RegExp]",fQ="[object Set]",dQ="[object String]",pQ="[object Symbol]",mQ="[object ArrayBuffer]",gQ="[object DataView]",yQ="[object Float32Array]",_Q="[object Float64Array]",vQ="[object Int8Array]",xQ="[object Int16Array]",bQ="[object Int32Array]",wQ="[object Uint8Array]",EQ="[object Uint8ClampedArray]",SQ="[object Uint16Array]",TQ="[object Uint32Array]";function CQ(e,t,n){var r=e.constructor;switch(t){case mQ:return xA(e);case aQ:case lQ:return new r(+e);case gQ:return nQ(e,n);case yQ:case _Q:case vQ:case xQ:case bQ:case wQ:case EQ:case SQ:case TQ:return sQ(e,n);case uQ:return new r;case cQ:case dQ:return new r(e);case hQ:return iQ(e);case fQ:return new r;case pQ:return oQ(e)}}var ZN=Object.create,IQ=function(){function e(){}return function(t){if(!_x(t))return{};if(ZN)return ZN(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function PQ(e){return typeof e.constructor=="function"&&!mA(e)?IQ(dA(e)):{}}var LQ="[object Map]";function AQ(e){return jg(e)&&vA(e)==LQ}var WN=L_&&L_.isMap,OQ=WN?pA(WN):AQ,kQ="[object Set]";function RQ(e){return jg(e)&&vA(e)==kQ}var KN=L_&&L_.isSet,MQ=KN?pA(KN):RQ,NQ=1,DQ=2,zQ=4,f6="[object Arguments]",FQ="[object Array]",BQ="[object Boolean]",jQ="[object Date]",$Q="[object Error]",d6="[object Function]",UQ="[object GeneratorFunction]",VQ="[object Map]",qQ="[object Number]",p6="[object Object]",GQ="[object RegExp]",HQ="[object Set]",ZQ="[object String]",WQ="[object Symbol]",KQ="[object WeakMap]",XQ="[object ArrayBuffer]",YQ="[object DataView]",JQ="[object Float32Array]",QQ="[object Float64Array]",eee="[object Int8Array]",tee="[object Int16Array]",nee="[object Int32Array]",ree="[object Uint8Array]",iee="[object Uint8ClampedArray]",oee="[object Uint16Array]",see="[object Uint32Array]",gi={};gi[f6]=gi[FQ]=gi[XQ]=gi[YQ]=gi[BQ]=gi[jQ]=gi[JQ]=gi[QQ]=gi[eee]=gi[tee]=gi[nee]=gi[VQ]=gi[qQ]=gi[p6]=gi[GQ]=gi[HQ]=gi[ZQ]=gi[WQ]=gi[ree]=gi[iee]=gi[oee]=gi[see]=!0;gi[$Q]=gi[d6]=gi[KQ]=!1;function q0(e,t,n,r,i,o){var u,l=t&NQ,p=t&DQ,g=t&zQ;if(n&&(u=i?n(e,r,i,o):n(e)),u!==void 0)return u;if(!_x(e))return e;var x=vx(e);if(x){if(u=tQ(e),!l)return a6(e,u)}else{var y=vA(e),_=y==d6||y==UQ;if(t6(e))return FJ(e,l);if(y==p6||y==f6||_&&!i){if(u=p||_?{}:PQ(e),!l)return p?qJ(e,DJ(u,e)):UJ(e,OJ(u,e))}else{if(!gi[y])return i?e:{};u=CQ(e,y,l)}}o||(o=new sv);var T=o.get(e);if(T)return T;o.set(e,u),MQ(e)?e.forEach(function(M){u.add(q0(M,t,n,M,e,o))}):OQ(e)&&e.forEach(function(M,k){u.set(k,q0(M,t,n,k,e,o))});var P=g?p?HJ:GJ:p?yA:gA,A=x?void 0:P(e);return DY(A||e,function(M,k){A&&(k=M,M=e[k]),JB(u,k,q0(M,t,n,k,e,o))}),u}var aee=1,lee=4;function Cb(e){return q0(e,aee|lee)}var XN=Array.isArray,YN=Object.keys,uee=Object.prototype.hasOwnProperty,cee=typeof Element<"u";function qI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=XN(e),r=XN(t),i,o,u;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!qI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var l=e instanceof Date,p=t instanceof Date;if(l!=p)return!1;if(l&&p)return e.getTime()==t.getTime();var g=e instanceof RegExp,x=t instanceof RegExp;if(g!=x)return!1;if(g&&x)return e.toString()==t.toString();var y=YN(e);if(o=y.length,o!==YN(t).length)return!1;for(i=o;i--!==0;)if(!uee.call(t,y[i]))return!1;if(cee&&e instanceof Element&&t instanceof Element)return e===t;for(i=o;i--!==0;)if(u=y[i],!(u==="_owner"&&e.$$typeof)&&!qI(e[u],t[u]))return!1;return!0}return e!==e&&t!==t}var hee=function(t,n){try{return qI(t,n)}catch(r){if(r.message&&r.message.match(/stack|recursion/i)||r.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",r.name,r.message),!1;throw r}};const Um=bd(hee);var fee=4;function JN(e){return q0(e,fee)}function m6(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var dee="[object Symbol]";function bA(e){return typeof e=="symbol"||jg(e)&&Bg(e)==dee}var pee="Expected a function";function wA(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(pee);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var u=e.apply(this,r);return n.cache=o.set(i,u)||o,u};return n.cache=new(wA.Cache||rm),n}wA.Cache=rm;var mee=500;function gee(e){var t=wA(e,function(r){return n.size===mee&&n.clear(),r}),n=t.cache;return t}var yee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_ee=/\\(\\)?/g,vee=gee(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(yee,function(n,r,i,o){t.push(i?o.replace(_ee,"$1"):r||n)}),t});const xee=vee;var bee=1/0;function wee(e){if(typeof e=="string"||bA(e))return e;var t=e+"";return t=="0"&&1/e==-bee?"-0":t}var Eee=1/0,QN=Bp?Bp.prototype:void 0,eD=QN?QN.toString:void 0;function g6(e){if(typeof e=="string")return e;if(vx(e))return m6(e,g6)+"";if(bA(e))return eD?eD.call(e):"";var t=e+"";return t=="0"&&1/e==-Eee?"-0":t}function See(e){return e==null?"":g6(e)}function y6(e){return vx(e)?m6(e,wee):bA(e)?[e]:a6(xee(See(e)))}var _6={exports:{}},Kr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ps=typeof Symbol=="function"&&Symbol.for,EA=ps?Symbol.for("react.element"):60103,SA=ps?Symbol.for("react.portal"):60106,fS=ps?Symbol.for("react.fragment"):60107,dS=ps?Symbol.for("react.strict_mode"):60108,pS=ps?Symbol.for("react.profiler"):60114,mS=ps?Symbol.for("react.provider"):60109,gS=ps?Symbol.for("react.context"):60110,TA=ps?Symbol.for("react.async_mode"):60111,yS=ps?Symbol.for("react.concurrent_mode"):60111,_S=ps?Symbol.for("react.forward_ref"):60112,vS=ps?Symbol.for("react.suspense"):60113,Tee=ps?Symbol.for("react.suspense_list"):60120,xS=ps?Symbol.for("react.memo"):60115,bS=ps?Symbol.for("react.lazy"):60116,Cee=ps?Symbol.for("react.block"):60121,Iee=ps?Symbol.for("react.fundamental"):60117,Pee=ps?Symbol.for("react.responder"):60118,Lee=ps?Symbol.for("react.scope"):60119;function nu(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case EA:switch(e=e.type,e){case TA:case yS:case fS:case pS:case dS:case vS:return e;default:switch(e=e&&e.$$typeof,e){case gS:case _S:case bS:case xS:case mS:return e;default:return t}}case SA:return t}}}function v6(e){return nu(e)===yS}Kr.AsyncMode=TA;Kr.ConcurrentMode=yS;Kr.ContextConsumer=gS;Kr.ContextProvider=mS;Kr.Element=EA;Kr.ForwardRef=_S;Kr.Fragment=fS;Kr.Lazy=bS;Kr.Memo=xS;Kr.Portal=SA;Kr.Profiler=pS;Kr.StrictMode=dS;Kr.Suspense=vS;Kr.isAsyncMode=function(e){return v6(e)||nu(e)===TA};Kr.isConcurrentMode=v6;Kr.isContextConsumer=function(e){return nu(e)===gS};Kr.isContextProvider=function(e){return nu(e)===mS};Kr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===EA};Kr.isForwardRef=function(e){return nu(e)===_S};Kr.isFragment=function(e){return nu(e)===fS};Kr.isLazy=function(e){return nu(e)===bS};Kr.isMemo=function(e){return nu(e)===xS};Kr.isPortal=function(e){return nu(e)===SA};Kr.isProfiler=function(e){return nu(e)===pS};Kr.isStrictMode=function(e){return nu(e)===dS};Kr.isSuspense=function(e){return nu(e)===vS};Kr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===fS||e===yS||e===pS||e===dS||e===vS||e===Tee||typeof e=="object"&&e!==null&&(e.$$typeof===bS||e.$$typeof===xS||e.$$typeof===mS||e.$$typeof===gS||e.$$typeof===_S||e.$$typeof===Iee||e.$$typeof===Pee||e.$$typeof===Lee||e.$$typeof===Cee)};Kr.typeOf=nu;_6.exports=Kr;var Aee=_6.exports,x6=Aee,Oee={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},b6={};b6[x6.ForwardRef]=Oee;b6[x6.Memo]=kee;function Qo(){return Qo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qo.apply(this,arguments)}function w6(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var wS=Ue.createContext(void 0);wS.displayName="FormikContext";wS.Provider;wS.Consumer;function Ree(){var e=Ue.useContext(wS);return e}var Ec=function(t){return typeof t=="function"},ES=function(t){return t!==null&&typeof t=="object"},Mee=function(t){return String(Math.floor(Number(t)))===t},U2=function(t){return Object.prototype.toString.call(t)==="[object String]"},V2=function(t){return ES(t)&&Ec(t.then)};function Il(e,t,n,r){r===void 0&&(r=0);for(var i=y6(t);e&&r<i.length;)e=e[i[r++]];return r!==i.length&&!e||e===void 0?n:e}function ug(e,t,n){for(var r=JN(e),i=r,o=0,u=y6(t);o<u.length-1;o++){var l=u[o],p=Il(e,u.slice(0,o+1));if(p&&(ES(p)||Array.isArray(p)))i=i[l]=JN(p);else{var g=u[o+1];i=i[l]=Mee(g)&&Number(g)>=0?[]:{}}}return(o===0?e:i)[u[o]]===n?e:(n===void 0?delete i[u[o]]:i[u[o]]=n,o===0&&n===void 0&&delete r[u[o]],r)}function E6(e,t,n,r){n===void 0&&(n=new WeakMap),r===void 0&&(r={});for(var i=0,o=Object.keys(e);i<o.length;i++){var u=o[i],l=e[u];ES(l)?n.get(l)||(n.set(l,!0),r[u]=Array.isArray(l)?[]:{},E6(l,t,n,r[u])):r[u]=t}return r}function Nee(e,t){switch(t.type){case"SET_VALUES":return Qo({},e,{values:t.payload});case"SET_TOUCHED":return Qo({},e,{touched:t.payload});case"SET_ERRORS":return Um(e.errors,t.payload)?e:Qo({},e,{errors:t.payload});case"SET_STATUS":return Qo({},e,{status:t.payload});case"SET_ISSUBMITTING":return Qo({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Qo({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Qo({},e,{values:ug(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Qo({},e,{touched:ug(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Qo({},e,{errors:ug(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Qo({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Qo({},e,{touched:E6(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return Qo({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return Qo({},e,{isSubmitting:!1});default:return e}}var zm={},Ib={};function xx(e){var t=e.validateOnChange,n=t===void 0?!0:t,r=e.validateOnBlur,i=r===void 0?!0:r,o=e.validateOnMount,u=o===void 0?!1:o,l=e.isInitialValid,p=e.enableReinitialize,g=p===void 0?!1:p,x=e.onSubmit,y=w6(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),_=Qo({validateOnChange:n,validateOnBlur:i,validateOnMount:u,onSubmit:x},y),T=Ue.useRef(_.initialValues),P=Ue.useRef(_.initialErrors||zm),A=Ue.useRef(_.initialTouched||Ib),M=Ue.useRef(_.initialStatus),k=Ue.useRef(!1),R=Ue.useRef({});Ue.useEffect(function(){return k.current=!0,function(){k.current=!1}},[]);var z=Ue.useState(0),D=z[1],U=Ue.useRef({values:Cb(_.initialValues),errors:Cb(_.initialErrors)||zm,touched:Cb(_.initialTouched)||Ib,status:Cb(_.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),V=U.current,G=Ue.useCallback(function(je){var vt=U.current;U.current=Nee(vt,je),vt!==U.current&&D(function(St){return St+1})},[]),H=Ue.useCallback(function(je,vt){return new Promise(function(St,Lt){var en=_.validate(je,vt);en==null?St(zm):V2(en)?en.then(function(wn){St(wn||zm)},function(wn){Lt(wn)}):St(en)})},[_.validate]),J=Ue.useCallback(function(je,vt){var St=_.validationSchema,Lt=Ec(St)?St(vt):St,en=vt&&Lt.validateAt?Lt.validateAt(vt,je):zee(je,Lt);return new Promise(function(wn,gn){en.then(function(){wn(zm)},function(bt){bt.name==="ValidationError"?wn(Dee(bt)):gn(bt)})})},[_.validationSchema]),Y=Ue.useCallback(function(je,vt){return new Promise(function(St){return St(R.current[je].validate(vt))})},[]),X=Ue.useCallback(function(je){var vt=Object.keys(R.current).filter(function(Lt){return Ec(R.current[Lt].validate)}),St=vt.length>0?vt.map(function(Lt){return Y(Lt,Il(je,Lt))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(St).then(function(Lt){return Lt.reduce(function(en,wn,gn){return wn==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||wn&&(en=ug(en,vt[gn],wn)),en},{})})},[Y]),ee=Ue.useCallback(function(je){return Promise.all([X(je),_.validationSchema?J(je):{},_.validate?H(je):{}]).then(function(vt){var St=vt[0],Lt=vt[1],en=vt[2],wn=BI.all([St,Lt,en],{arrayMerge:Fee});return wn})},[_.validate,_.validationSchema,X,H,J]),ce=vu(function(je){return je===void 0&&(je=V.values),G({type:"SET_ISVALIDATING",payload:!0}),ee(je).then(function(vt){return k.current&&(G({type:"SET_ISVALIDATING",payload:!1}),G({type:"SET_ERRORS",payload:vt})),vt})});Ue.useEffect(function(){u&&k.current===!0&&Um(T.current,_.initialValues)&&ce(T.current)},[u,ce]);var oe=Ue.useCallback(function(je){var vt=je&&je.values?je.values:T.current,St=je&&je.errors?je.errors:P.current?P.current:_.initialErrors||{},Lt=je&&je.touched?je.touched:A.current?A.current:_.initialTouched||{},en=je&&je.status?je.status:M.current?M.current:_.initialStatus;T.current=vt,P.current=St,A.current=Lt,M.current=en;var wn=function(){G({type:"RESET_FORM",payload:{isSubmitting:!!je&&!!je.isSubmitting,errors:St,touched:Lt,status:en,values:vt,isValidating:!!je&&!!je.isValidating,submitCount:je&&je.submitCount&&typeof je.submitCount=="number"?je.submitCount:0}})};if(_.onReset){var gn=_.onReset(V.values,Ft);V2(gn)?gn.then(wn):wn()}else wn()},[_.initialErrors,_.initialStatus,_.initialTouched,_.onReset]);Ue.useEffect(function(){k.current===!0&&!Um(T.current,_.initialValues)&&g&&(T.current=_.initialValues,oe(),u&&ce(T.current))},[g,_.initialValues,oe,u,ce]),Ue.useEffect(function(){g&&k.current===!0&&!Um(P.current,_.initialErrors)&&(P.current=_.initialErrors||zm,G({type:"SET_ERRORS",payload:_.initialErrors||zm}))},[g,_.initialErrors]),Ue.useEffect(function(){g&&k.current===!0&&!Um(A.current,_.initialTouched)&&(A.current=_.initialTouched||Ib,G({type:"SET_TOUCHED",payload:_.initialTouched||Ib}))},[g,_.initialTouched]),Ue.useEffect(function(){g&&k.current===!0&&!Um(M.current,_.initialStatus)&&(M.current=_.initialStatus,G({type:"SET_STATUS",payload:_.initialStatus}))},[g,_.initialStatus,_.initialTouched]);var we=vu(function(je){if(R.current[je]&&Ec(R.current[je].validate)){var vt=Il(V.values,je),St=R.current[je].validate(vt);return V2(St)?(G({type:"SET_ISVALIDATING",payload:!0}),St.then(function(Lt){return Lt}).then(function(Lt){G({type:"SET_FIELD_ERROR",payload:{field:je,value:Lt}}),G({type:"SET_ISVALIDATING",payload:!1})})):(G({type:"SET_FIELD_ERROR",payload:{field:je,value:St}}),Promise.resolve(St))}else if(_.validationSchema)return G({type:"SET_ISVALIDATING",payload:!0}),J(V.values,je).then(function(Lt){return Lt}).then(function(Lt){G({type:"SET_FIELD_ERROR",payload:{field:je,value:Il(Lt,je)}}),G({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Ne=Ue.useCallback(function(je,vt){var St=vt.validate;R.current[je]={validate:St}},[]),Be=Ue.useCallback(function(je){delete R.current[je]},[]),De=vu(function(je,vt){G({type:"SET_TOUCHED",payload:je});var St=vt===void 0?i:vt;return St?ce(V.values):Promise.resolve()}),Ae=Ue.useCallback(function(je){G({type:"SET_ERRORS",payload:je})},[]),ve=vu(function(je,vt){var St=Ec(je)?je(V.values):je;G({type:"SET_VALUES",payload:St});var Lt=vt===void 0?n:vt;return Lt?ce(St):Promise.resolve()}),he=Ue.useCallback(function(je,vt){G({type:"SET_FIELD_ERROR",payload:{field:je,value:vt}})},[]),xe=vu(function(je,vt,St){G({type:"SET_FIELD_VALUE",payload:{field:je,value:vt}});var Lt=St===void 0?n:St;return Lt?ce(ug(V.values,je,vt)):Promise.resolve()}),Ee=Ue.useCallback(function(je,vt){var St=vt,Lt=je,en;if(!U2(je)){je.persist&&je.persist();var wn=je.target?je.target:je.currentTarget,gn=wn.type,bt=wn.name,Vn=wn.id,_r=wn.value,Gs=wn.checked,Xr=wn.outerHTML,kt=wn.options,_n=wn.multiple;St=vt||bt||Vn,Lt=/number|range/.test(gn)?(en=parseFloat(_r),isNaN(en)?"":en):/checkbox/.test(gn)?jee(Il(V.values,St),Gs,_r):kt&&_n?Bee(kt):_r}St&&xe(St,Lt)},[xe,V.values]),Ge=vu(function(je){if(U2(je))return function(vt){return Ee(vt,je)};Ee(je)}),$e=vu(function(je,vt,St){vt===void 0&&(vt=!0),G({type:"SET_FIELD_TOUCHED",payload:{field:je,value:vt}});var Lt=St===void 0?i:St;return Lt?ce(V.values):Promise.resolve()}),be=Ue.useCallback(function(je,vt){je.persist&&je.persist();var St=je.target,Lt=St.name,en=St.id,wn=St.outerHTML,gn=vt||Lt||en;$e(gn,!0)},[$e]),He=vu(function(je){if(U2(je))return function(vt){return be(vt,je)};be(je)}),it=Ue.useCallback(function(je){Ec(je)?G({type:"SET_FORMIK_STATE",payload:je}):G({type:"SET_FORMIK_STATE",payload:function(){return je}})},[]),ct=Ue.useCallback(function(je){G({type:"SET_STATUS",payload:je})},[]),xt=Ue.useCallback(function(je){G({type:"SET_ISSUBMITTING",payload:je})},[]),Dt=vu(function(){return G({type:"SUBMIT_ATTEMPT"}),ce().then(function(je){var vt=je instanceof Error,St=!vt&&Object.keys(je).length===0;if(St){var Lt;try{if(Lt=Kt(),Lt===void 0)return}catch(en){throw en}return Promise.resolve(Lt).then(function(en){return k.current&&G({type:"SUBMIT_SUCCESS"}),en}).catch(function(en){if(k.current)throw G({type:"SUBMIT_FAILURE"}),en})}else if(k.current&&(G({type:"SUBMIT_FAILURE"}),vt))throw je})}),Qt=vu(function(je){je&&je.preventDefault&&Ec(je.preventDefault)&&je.preventDefault(),je&&je.stopPropagation&&Ec(je.stopPropagation)&&je.stopPropagation(),Dt().catch(function(vt){console.warn("Warning: An unhandled error was caught from submitForm()",vt)})}),Ft={resetForm:oe,validateForm:ce,validateField:we,setErrors:Ae,setFieldError:he,setFieldTouched:$e,setFieldValue:xe,setStatus:ct,setSubmitting:xt,setTouched:De,setValues:ve,setFormikState:it,submitForm:Dt},Kt=vu(function(){return x(V.values,Ft)}),Gt=vu(function(je){je&&je.preventDefault&&Ec(je.preventDefault)&&je.preventDefault(),je&&je.stopPropagation&&Ec(je.stopPropagation)&&je.stopPropagation(),oe()}),Tr=Ue.useCallback(function(je){return{value:Il(V.values,je),error:Il(V.errors,je),touched:!!Il(V.touched,je),initialValue:Il(T.current,je),initialTouched:!!Il(A.current,je),initialError:Il(P.current,je)}},[V.errors,V.touched,V.values]),rt=Ue.useCallback(function(je){return{setValue:function(St,Lt){return xe(je,St,Lt)},setTouched:function(St,Lt){return $e(je,St,Lt)},setError:function(St){return he(je,St)}}},[xe,$e,he]),lt=Ue.useCallback(function(je){var vt=ES(je),St=vt?je.name:je,Lt=Il(V.values,St),en={name:St,value:Lt,onChange:Ge,onBlur:He};if(vt){var wn=je.type,gn=je.value,bt=je.as,Vn=je.multiple;wn==="checkbox"?gn===void 0?en.checked=!!Lt:(en.checked=!!(Array.isArray(Lt)&&~Lt.indexOf(gn)),en.value=gn):wn==="radio"?(en.checked=Lt===gn,en.value=gn):bt==="select"&&Vn&&(en.value=en.value||[],en.multiple=!0)}return en},[He,Ge,V.values]),gt=Ue.useMemo(function(){return!Um(T.current,V.values)},[T.current,V.values]),_t=Ue.useMemo(function(){return typeof l<"u"?gt?V.errors&&Object.keys(V.errors).length===0:l!==!1&&Ec(l)?l(_):l:V.errors&&Object.keys(V.errors).length===0},[l,gt,V.errors,_]),Pt=Qo({},V,{initialValues:T.current,initialErrors:P.current,initialTouched:A.current,initialStatus:M.current,handleBlur:He,handleChange:Ge,handleReset:Gt,handleSubmit:Qt,resetForm:oe,setErrors:Ae,setFormikState:it,setFieldTouched:$e,setFieldValue:xe,setFieldError:he,setStatus:ct,setSubmitting:xt,setTouched:De,setValues:ve,submitForm:Dt,validateForm:ce,validateField:we,isValid:_t,dirty:gt,unregisterField:Be,registerField:Ne,getFieldProps:lt,getFieldMeta:Tr,getFieldHelpers:rt,validateOnBlur:i,validateOnChange:n,validateOnMount:u});return Pt}function Dee(e){var t={};if(e.inner){if(e.inner.length===0)return ug(t,e.path,e.message);for(var i=e.inner,n=Array.isArray(i),r=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(r>=i.length)break;o=i[r++]}else{if(r=i.next(),r.done)break;o=r.value}var u=o;Il(t,u.path)||(t=ug(t,u.path,u.message))}}return t}function zee(e,t,n,r){n===void 0&&(n=!1);var i=GI(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r||i})}function GI(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);Array.isArray(e[r])===!0?t[r]=e[r].map(function(i){return Array.isArray(i)===!0||PN(i)?GI(i):i!==""?i:void 0}):PN(e[r])?t[r]=GI(e[r]):t[r]=e[r]!==""?e[r]:void 0}return t}function Fee(e,t,n){var r=e.slice();return t.forEach(function(o,u){if(typeof r[u]>"u"){var l=n.clone!==!1,p=l&&n.isMergeableObject(o);r[u]=p?BI(Array.isArray(o)?[]:{},o,n):o}else n.isMergeableObject(o)?r[u]=BI(e[u],o,n):e.indexOf(o)===-1&&r.push(o)}),r}function Bee(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function jee(e,t,n){if(typeof e=="boolean")return!!t;var r=[],i=!1,o=-1;if(Array.isArray(e))r=e,o=e.indexOf(n),i=o>=0;else if(!n||n=="true"||n=="false")return!!t;return t&&n&&!i?r.concat(n):i?r.slice(0,o).concat(r.slice(o+1)):r}var $ee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Ue.useLayoutEffect:Ue.useEffect;function vu(e){var t=Ue.useRef(e);return $ee(function(){t.current=e}),Ue.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current.apply(void 0,r)},[])}var Uee=Ue.forwardRef(function(e,t){var n=e.action,r=w6(e,["action"]),i=n??"#",o=Ree(),u=o.handleReset,l=o.handleSubmit;return Ue.createElement("form",Qo({onSubmit:l,ref:t,onReset:u,action:i},r))});Uee.displayName="Form";function Vg(e){this._maxSize=e,this.clear()}Vg.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Vg.prototype.get=function(e){return this._values[e]};Vg.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var Vee=/[^.^\]^[]+|(?=\[\]|\.\.)/g,S6=/^\d+$/,qee=/^\d/,Gee=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,Hee=/^\s*(['"]?)(.*?)(\1)\s*$/,CA=512,tD=new Vg(CA),nD=new Vg(CA),rD=new Vg(CA),cg={Cache:Vg,split:HI,normalizePath:q2,setter:function(e){var t=q2(e);return nD.get(e)||nD.set(e,function(r,i){for(var o=0,u=t.length,l=r;o<u-1;){var p=t[o];if(p==="__proto__"||p==="constructor"||p==="prototype")return r;l=l[t[o++]]}l[t[o]]=i})},getter:function(e,t){var n=q2(e);return rD.get(e)||rD.set(e,function(i){for(var o=0,u=n.length;o<u;)if(i!=null||!t)i=i[n[o++]];else return;return i})},join:function(e){return e.reduce(function(t,n){return t+(IA(n)||S6.test(n)?"["+n+"]":(t?".":"")+n)},"")},forEach:function(e,t,n){Zee(Array.isArray(e)?e:HI(e),t,n)}};function q2(e){return tD.get(e)||tD.set(e,HI(e).map(function(t){return t.replace(Hee,"$2")}))}function HI(e){return e.match(Vee)||[""]}function Zee(e,t,n){var r=e.length,i,o,u,l;for(o=0;o<r;o++)i=e[o],i&&(Xee(i)&&(i='"'+i+'"'),l=IA(i),u=!l&&/^\d+$/.test(i),t.call(n,i,l,u,o,e))}function IA(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function Wee(e){return e.match(qee)&&!e.match(S6)}function Kee(e){return Gee.test(e)}function Xee(e){return!IA(e)&&(Wee(e)||Kee(e))}const Yee=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,SS=e=>e.match(Yee)||[],TS=e=>e[0].toUpperCase()+e.slice(1),PA=(e,t)=>SS(e).join(t).toLowerCase(),T6=e=>SS(e).reduce((t,n)=>`${t}${t?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),Jee=e=>TS(T6(e)),Qee=e=>PA(e,"_"),ete=e=>PA(e,"-"),tte=e=>TS(PA(e," ")),nte=e=>SS(e).map(TS).join(" ");var G2={words:SS,upperFirst:TS,camelCase:T6,pascalCase:Jee,snakeCase:Qee,kebabCase:ete,sentenceCase:tte,titleCase:nte},LA={exports:{}};LA.exports=function(e){return C6(rte(e),e)};LA.exports.array=C6;function C6(e,t){var n=e.length,r=new Array(n),i={},o=n,u=ite(t),l=ote(e);for(t.forEach(function(g){if(!l.has(g[0])||!l.has(g[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});o--;)i[o]||p(e[o],o,new Set);return r;function p(g,x,y){if(y.has(g)){var _;try{_=", node was:"+JSON.stringify(g)}catch{_=""}throw new Error("Cyclic dependency"+_)}if(!l.has(g))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(g));if(!i[x]){i[x]=!0;var T=u.get(g)||new Set;if(T=Array.from(T),x=T.length){y.add(g);do{var P=T[--x];p(P,l.get(P),y)}while(x);y.delete(g)}r[--n]=g}}}function rte(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}function ite(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}function ote(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}var ste=LA.exports;const ate=bd(ste),lte=Object.prototype.toString,ute=Error.prototype.toString,cte=RegExp.prototype.toString,hte=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",fte=/^Symbol\((.*)\)(.*)$/;function dte(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function iD(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const n=typeof e;if(n==="number")return dte(e);if(n==="string")return t?`"${e}"`:e;if(n==="function")return"[Function "+(e.name||"anonymous")+"]";if(n==="symbol")return hte.call(e).replace(fte,"Symbol($1)");const r=lte.call(e).slice(8,-1);return r==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):r==="Error"||e instanceof Error?"["+ute.call(e)+"]":r==="RegExp"?cte.call(e):null}function kp(e,t){let n=iD(e,t);return n!==null?n:JSON.stringify(e,function(r,i){let o=iD(this[r],t);return o!==null?o:i},2)}function I6(e){return e==null?[]:[].concat(e)}let P6,L6,A6,pte=/\$\{\s*(\w+)\s*\}/g;P6=Symbol.toStringTag;class oD{constructor(t,n,r,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[P6]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=i,this.errors=[],this.inner=[],I6(t).forEach(o=>{if(nl.isError(o)){this.errors.push(...o.errors);const u=o.inner.length?o.inner:[o];this.inner.push(...u)}else this.errors.push(o)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}L6=Symbol.hasInstance;A6=Symbol.toStringTag;class nl extends Error{static formatError(t,n){const r=n.label||n.path||"this";return r!==n.path&&(n=Object.assign({},n,{path:r})),typeof t=="string"?t.replace(pte,(i,o)=>kp(n[o])):typeof t=="function"?t(n):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,n,r,i,o){const u=new oD(t,n,r,i);if(o)return u;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[A6]="Error",this.name=u.name,this.message=u.message,this.type=u.type,this.value=u.value,this.path=u.path,this.errors=u.errors,this.inner=u.inner,Error.captureStackTrace&&Error.captureStackTrace(this,nl)}static[L6](t){return oD[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let Dh={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{const i=r!=null&&r!==n?` (cast from the value \`${kp(r,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${kp(n,!0)}\``+i:`${e} must match the configured type. The validated value was: \`${kp(n,!0)}\``+i}},Ja={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},ip={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},ZI={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},mte={isValue:"${path} field must be ${value}"},WI={noUnknown:"${path} field has unspecified keys: ${unknown}"},gte={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},yte={notType:e=>{const{path:t,value:n,spec:r}=e,i=r.types.length;if(Array.isArray(n)){if(n.length<i)return`${t} tuple value has too few items, expected a length of ${i} but got ${n.length} for value: \`${kp(n,!0)}\``;if(n.length>i)return`${t} tuple value has too many items, expected a length of ${i} but got ${n.length} for value: \`${kp(n,!0)}\``}return nl.formatError(Dh.notType,e)}};Object.assign(Object.create(null),{mixed:Dh,string:Ja,number:ip,date:ZI,object:WI,array:gte,boolean:mte,tuple:yte});const AA=e=>e&&e.__isYupSchema__;class iE{static fromOptions(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:i,otherwise:o}=n,u=typeof r=="function"?r:(...l)=>l.every(p=>p===r);return new iE(t,(l,p)=>{var g;let x=u(...l)?i:o;return(g=x==null?void 0:x(p))!=null?g:p})}constructor(t,n){this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}resolve(t,n){let r=this.refs.map(o=>o.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),i=this.fn(r,t,n);if(i===void 0||i===t)return t;if(!AA(i))throw new TypeError("conditions must return a schema object");return i.resolve(n)}}const Pb={context:"$",value:"."};function _te(e,t){return new im(e,t)}class im{constructor(t,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Pb.context,this.isValue=this.key[0]===Pb.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?Pb.context:this.isValue?Pb.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&cg.getter(this.path,!0),this.map=n.map}getValue(t,n,r){let i=this.isContext?r:this.isValue?t:n;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(t,n){return this.getValue(t,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}im.prototype.__isYupRef=!0;const Yf=e=>e==null;function Ey(e){function t({value:n,path:r="",options:i,originalValue:o,schema:u},l,p){const{name:g,test:x,params:y,message:_,skipAbsent:T}=e;let{parent:P,context:A,abortEarly:M=u.spec.abortEarly,disableStackTrace:k=u.spec.disableStackTrace}=i;function R(X){return im.isRef(X)?X.getValue(n,P,A):X}function z(X={}){const ee=Object.assign({value:n,originalValue:o,label:u.spec.label,path:X.path||r,spec:u.spec,disableStackTrace:X.disableStackTrace||k},y,X.params);for(const oe of Object.keys(ee))ee[oe]=R(ee[oe]);const ce=new nl(nl.formatError(X.message||_,ee),n,ee.path,X.type||g,ee.disableStackTrace);return ce.params=ee,ce}const D=M?l:p;let U={path:r,parent:P,type:g,from:i.from,createError:z,resolve:R,options:i,originalValue:o,schema:u};const V=X=>{nl.isError(X)?D(X):X?p(null):D(z())},G=X=>{nl.isError(X)?D(X):l(X)};if(T&&Yf(n))return V(!0);let J;try{var Y;if(J=x.call(U,n,U),typeof((Y=J)==null?void 0:Y.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${U.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(J).then(V,G)}}catch(X){G(X);return}V(J)}return t.OPTIONS=e,t}function vte(e,t,n,r=n){let i,o,u;return t?(cg.forEach(t,(l,p,g)=>{let x=p?l.slice(1,l.length-1):l;e=e.resolve({context:r,parent:i,value:n});let y=e.type==="tuple",_=g?parseInt(x,10):0;if(e.innerType||y){if(y&&!g)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${u}" must contain an index to the tuple element, e.g. "${u}[0]"`);if(n&&_>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${t}. because there is no value at that index. `);i=n,n=n&&n[_],e=y?e.spec.types[_]:e.innerType}if(!g){if(!e.fields||!e.fields[x])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${u} which is a type: "${e.type}")`);i=n,n=n&&n[x],e=e.fields[x]}o=x,u=p?"["+l+"]":"."+l}),{schema:e,parent:i,parentPath:o}):{parent:i,parentPath:t,schema:e}}class oE extends Set{describe(){const t=[];for(const n of this.values())t.push(im.isRef(n)?n.describe():n);return t}resolveAll(t){let n=[];for(const r of this.values())n.push(t(r));return n}clone(){return new oE(this.values())}merge(t,n){const r=this.clone();return t.forEach(i=>r.add(i)),n.forEach(i=>r.delete(i)),r}}function qy(e,t=new Map){if(AA(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let n;if(e instanceof Date)n=new Date(e.getTime()),t.set(e,n);else if(e instanceof RegExp)n=new RegExp(e),t.set(e,n);else if(Array.isArray(e)){n=new Array(e.length),t.set(e,n);for(let r=0;r<e.length;r++)n[r]=qy(e[r],t)}else if(e instanceof Map){n=new Map,t.set(e,n);for(const[r,i]of e.entries())n.set(r,qy(i,t))}else if(e instanceof Set){n=new Set,t.set(e,n);for(const r of e)n.add(qy(r,t))}else if(e instanceof Object){n={},t.set(e,n);for(const[r,i]of Object.entries(e))n[r]=qy(i,t)}else throw Error(`Unable to clone ${e}`);return n}class jc{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new oE,this._blacklist=new oE,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Dh.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=qy(Object.assign({},this.spec,t)),n}label(t){let n=this.clone();return n.spec.label=t,n}meta(...t){if(t.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},t[0]),n}withMutation(t){let n=this._mutate;this._mutate=!0;let r=t(this);return this._mutate=n,r}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let n=this,r=t.clone();const i=Object.assign({},n.spec,r.spec);return r.spec=i,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(t._whitelist,t._blacklist),r._blacklist=n._blacklist.merge(t._blacklist,t._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(o=>{t.tests.forEach(u=>{o.test(u.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((i,o)=>o.resolve(i,t),n),n=n.resolve(t)}return n}resolveOptions(t){var n,r,i,o;return Object.assign({},t,{from:t.from||[],strict:(n=t.strict)!=null?n:this.spec.strict,abortEarly:(r=t.abortEarly)!=null?r:this.spec.abortEarly,recursive:(i=t.recursive)!=null?i:this.spec.recursive,disableStackTrace:(o=t.disableStackTrace)!=null?o:this.spec.disableStackTrace})}cast(t,n={}){let r=this.resolve(Object.assign({value:t},n)),i=n.assert==="ignore-optionality",o=r._cast(t,n);if(n.assert!==!1&&!r.isType(o)){if(i&&Yf(o))return o;let u=kp(t),l=kp(o);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${u} 
`+(l!==u?`result of cast: ${l}`:""))}return o}_cast(t,n){let r=t===void 0?t:this.transforms.reduce((i,o)=>o.call(this,i,t,this),t);return r===void 0&&(r=this.getDefault(n)),r}_validate(t,n={},r,i){let{path:o,originalValue:u=t,strict:l=this.spec.strict}=n,p=t;l||(p=this._cast(p,Object.assign({assert:!1},n)));let g=[];for(let x of Object.values(this.internalTests))x&&g.push(x);this.runTests({path:o,value:p,originalValue:u,options:n,tests:g},r,x=>{if(x.length)return i(x,p);this.runTests({path:o,value:p,originalValue:u,options:n,tests:this.tests},r,i)})}runTests(t,n,r){let i=!1,{tests:o,value:u,originalValue:l,path:p,options:g}=t,x=A=>{i||(i=!0,n(A,u))},y=A=>{i||(i=!0,r(A,u))},_=o.length,T=[];if(!_)return y([]);let P={value:u,originalValue:l,path:p,options:g,schema:this};for(let A=0;A<o.length;A++){const M=o[A];M(P,x,function(R){R&&(Array.isArray(R)?T.push(...R):T.push(R)),--_<=0&&y(T)})}}asNestedTest({key:t,index:n,parent:r,parentPath:i,originalParent:o,options:u}){const l=t??n;if(l==null)throw TypeError("Must include `key` or `index` for nested validations");const p=typeof l=="number";let g=r[l];const x=Object.assign({},u,{strict:!0,parent:r,value:g,originalValue:o[l],key:void 0,[p?"index":"key"]:l,path:p||l.includes(".")?`${i||""}[${p?l:`"${l}"`}]`:(i?`${i}.`:"")+t});return(y,_,T)=>this.resolve(x)._validate(g,x,_,T)}validate(t,n){var r;let i=this.resolve(Object.assign({},n,{value:t})),o=(r=n==null?void 0:n.disableStackTrace)!=null?r:i.spec.disableStackTrace;return new Promise((u,l)=>i._validate(t,n,(p,g)=>{nl.isError(p)&&(p.value=g),l(p)},(p,g)=>{p.length?l(new nl(p,g,void 0,void 0,o)):u(g)}))}validateSync(t,n){var r;let i=this.resolve(Object.assign({},n,{value:t})),o,u=(r=n==null?void 0:n.disableStackTrace)!=null?r:i.spec.disableStackTrace;return i._validate(t,Object.assign({},n,{sync:!0}),(l,p)=>{throw nl.isError(l)&&(l.value=p),l},(l,p)=>{if(l.length)throw new nl(l,t,void 0,void 0,u);o=p}),o}isValid(t,n){return this.validate(t,n).then(()=>!0,r=>{if(nl.isError(r))return!1;throw r})}isValidSync(t,n){try{return this.validateSync(t,n),!0}catch(r){if(nl.isError(r))return!1;throw r}}_getDefault(t){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,t):qy(n)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,n){const r=this.clone({nullable:t});return r.internalTests.nullable=Ey({message:n,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),r}optionality(t,n){const r=this.clone({optional:t});return r.internalTests.optionality=Ey({message:n,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(t=Dh.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=Dh.notNull){return this.nullability(!1,t)}required(t=Dh.required){return this.clone().withMutation(n=>n.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let n=this.clone();return n.transforms.push(t),n}test(...t){let n;if(t.length===1?typeof t[0]=="function"?n={test:t[0]}:n=t[0]:t.length===2?n={name:t[0],test:t[1]}:n={name:t[0],message:t[1],test:t[2]},n.message===void 0&&(n.message=Dh.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),i=Ey(n),o=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(u=>!(u.OPTIONS.name===n.name&&(o||u.OPTIONS.test===i.OPTIONS.test))),r.tests.push(i),r}when(t,n){!Array.isArray(t)&&typeof t!="string"&&(n=t,t=".");let r=this.clone(),i=I6(t).map(o=>new im(o));return i.forEach(o=>{o.isSibling&&r.deps.push(o.key)}),r.conditions.push(typeof n=="function"?new iE(i,n):iE.fromOptions(i,n)),r}typeError(t){let n=this.clone();return n.internalTests.typeError=Ey({message:t,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(t,n=Dh.oneOf){let r=this.clone();return t.forEach(i=>{r._whitelist.add(i),r._blacklist.delete(i)}),r.internalTests.whiteList=Ey({message:n,name:"oneOf",skipAbsent:!0,test(i){let o=this.schema._whitelist,u=o.resolveAll(this.resolve);return u.includes(i)?!0:this.createError({params:{values:Array.from(o).join(", "),resolved:u}})}}),r}notOneOf(t,n=Dh.notOneOf){let r=this.clone();return t.forEach(i=>{r._blacklist.add(i),r._whitelist.delete(i)}),r.internalTests.blacklist=Ey({message:n,name:"notOneOf",test(i){let o=this.schema._blacklist,u=o.resolveAll(this.resolve);return u.includes(i)?this.createError({params:{values:Array.from(o).join(", "),resolved:u}}):!0}}),r}strip(t=!0){let n=this.clone();return n.spec.strip=t,n}describe(t){const n=(t?this.resolve(t):this).clone(),{label:r,meta:i,optional:o,nullable:u}=n.spec;return{meta:i,label:r,optional:o,nullable:u,default:n.getDefault(t),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(p=>({name:p.OPTIONS.name,params:p.OPTIONS.params})).filter((p,g,x)=>x.findIndex(y=>y.name===p.name)===g)}}}jc.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])jc.prototype[`${e}At`]=function(t,n,r={}){const{parent:i,parentPath:o,schema:u}=vte(this,t,n,r.context);return u[e](i&&i[o],Object.assign({},r,{parent:i,path:t}))};for(const e of["equals","is"])jc.prototype[e]=jc.prototype.oneOf;for(const e of["not","nope"])jc.prototype[e]=jc.prototype.notOneOf;const xte=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function bte(e){const t=KI(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(n=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}function KI(e){var t,n;const r=xte.exec(e);return r?{year:Uf(r[1]),month:Uf(r[2],1)-1,day:Uf(r[3],1),hour:Uf(r[4]),minute:Uf(r[5]),second:Uf(r[6]),millisecond:r[7]?Uf(r[7].substring(0,3)):0,precision:(t=(n=r[7])==null?void 0:n.length)!=null?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:Uf(r[10]),minuteOffset:Uf(r[11])}:null}function Uf(e,t=0){return Number(e)||t}let wte=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ete=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Ste=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Tte="^\\d{4}-\\d{2}-\\d{2}",Cte="\\d{2}:\\d{2}:\\d{2}",Ite="(([+-]\\d{2}(:?\\d{2})?)|Z)",Pte=new RegExp(`${Tte}T${Cte}(\\.\\d+)?${Ite}$`),Lte=e=>Yf(e)||e===e.trim(),Ate={}.toString();function Ns(){return new O6}class O6 extends jc{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,n,r)=>{if(!r.spec.coerce||r.isType(t)||Array.isArray(t))return t;const i=t!=null&&t.toString?t.toString():t;return i===Ate?t:i})})}required(t){return super.required(t).withMutation(n=>n.test({message:t||Dh.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(n=>n.OPTIONS.name!=="required"),t))}length(t,n=Ja.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(r){return r.length===this.resolve(t)}})}min(t,n=Ja.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(r){return r.length>=this.resolve(t)}})}max(t,n=Ja.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:t},skipAbsent:!0,test(r){return r.length<=this.resolve(t)}})}matches(t,n){let r=!1,i,o;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:i,name:o}=n:i=n),this.test({name:o||"matches",message:i||Ja.matches,params:{regex:t},skipAbsent:!0,test:u=>u===""&&r||u.search(t)!==-1})}email(t=Ja.email){return this.matches(wte,{name:"email",message:t,excludeEmptyString:!0})}url(t=Ja.url){return this.matches(Ete,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=Ja.uuid){return this.matches(Ste,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let n="",r,i;return t&&(typeof t=="object"?{message:n="",allowOffset:r=!1,precision:i=void 0}=t:n=t),this.matches(Pte,{name:"datetime",message:n||Ja.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||Ja.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:o=>{if(!o||r)return!0;const u=KI(o);return u?!!u.z:!1}}).test({name:"datetime_precision",message:n||Ja.datetime_precision,params:{precision:i},skipAbsent:!0,test:o=>{if(!o||i==null)return!0;const u=KI(o);return u?u.precision===i:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=Ja.trim){return this.transform(n=>n!=null?n.trim():n).test({message:t,name:"trim",test:Lte})}lowercase(t=Ja.lowercase){return this.transform(n=>Yf(n)?n:n.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Yf(n)||n===n.toLowerCase()})}uppercase(t=Ja.uppercase){return this.transform(n=>Yf(n)?n:n.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Yf(n)||n===n.toUpperCase()})}}Ns.prototype=O6.prototype;let Ote=e=>e!=+e;function op(){return new k6}class k6 extends jc{constructor(){super({type:"number",check(t){return t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&!Ote(t)}}),this.withMutation(()=>{this.transform((t,n,r)=>{if(!r.spec.coerce)return t;let i=t;if(typeof i=="string"){if(i=i.replace(/\s/g,""),i==="")return NaN;i=+i}return r.isType(i)||i===null?i:parseFloat(i)})})}min(t,n=ip.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(r){return r>=this.resolve(t)}})}max(t,n=ip.max){return this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(r){return r<=this.resolve(t)}})}lessThan(t,n=ip.lessThan){return this.test({message:n,name:"max",exclusive:!0,params:{less:t},skipAbsent:!0,test(r){return r<this.resolve(t)}})}moreThan(t,n=ip.moreThan){return this.test({message:n,name:"min",exclusive:!0,params:{more:t},skipAbsent:!0,test(r){return r>this.resolve(t)}})}positive(t=ip.positive){return this.moreThan(0,t)}negative(t=ip.negative){return this.lessThan(0,t)}integer(t=ip.integer){return this.test({name:"integer",message:t,skipAbsent:!0,test:n=>Number.isInteger(n)})}truncate(){return this.transform(t=>Yf(t)?t:t|0)}round(t){var n;let r=["ceil","floor","round","trunc"];if(t=((n=t)==null?void 0:n.toLowerCase())||"round",t==="trunc")return this.truncate();if(r.indexOf(t.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(i=>Yf(i)?i:Math[t](i))}}op.prototype=k6.prototype;let kte=new Date(""),Rte=e=>Object.prototype.toString.call(e)==="[object Date]";class CS extends jc{constructor(){super({type:"date",check(t){return Rte(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,n,r)=>!r.spec.coerce||r.isType(t)||t===null?t:(t=bte(t),isNaN(t)?CS.INVALID_DATE:new Date(t)))})}prepareParam(t,n){let r;if(im.isRef(t))r=t;else{let i=this.cast(t);if(!this._typeCheck(i))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=i}return r}min(t,n=ZI.min){let r=this.prepareParam(t,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(i){return i>=this.resolve(r)}})}max(t,n=ZI.max){let r=this.prepareParam(t,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(i){return i<=this.resolve(r)}})}}CS.INVALID_DATE=kte;CS.prototype;function Mte(e,t=[]){let n=[],r=new Set,i=new Set(t.map(([u,l])=>`${u}-${l}`));function o(u,l){let p=cg.split(u)[0];r.add(p),i.has(`${l}-${p}`)||n.push([l,p])}for(const u of Object.keys(e)){let l=e[u];r.add(u),im.isRef(l)&&l.isSibling?o(l.path,u):AA(l)&&"deps"in l&&l.deps.forEach(p=>o(p,u))}return ate.array(Array.from(r),n).reverse()}function sD(e,t){let n=1/0;return e.some((r,i)=>{var o;if((o=t.path)!=null&&o.includes(r))return n=i,!0}),n}function R6(e){return(t,n)=>sD(e,t)-sD(e,n)}const Nte=(e,t,n)=>{if(typeof e!="string")return e;let r=e;try{r=JSON.parse(e)}catch{}return n.isType(r)?r:e};function pw(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=pw(r);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=pw(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(pw)}):"optional"in e?e.optional():e}const Dte=(e,t)=>{const n=[...cg.normalizePath(t)];if(n.length===1)return n[0]in e;let r=n.pop(),i=cg.getter(cg.join(n),!0)(e);return!!(i&&r in i)};let aD=e=>Object.prototype.toString.call(e)==="[object Object]";function zte(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter(r=>n.indexOf(r)===-1)}const Fte=R6([]);function av(e){return new M6(e)}class M6 extends jc{constructor(t){super({type:"object",check(n){return aD(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=Fte,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,n={}){var r;let i=super._cast(t,n);if(i===void 0)return this.getDefault(n);if(!this._typeCheck(i))return i;let o=this.fields,u=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,l=[].concat(this._nodes,Object.keys(i).filter(y=>!this._nodes.includes(y))),p={},g=Object.assign({},n,{parent:p,__validating:n.__validating||!1}),x=!1;for(const y of l){let _=o[y],T=y in i;if(_){let P,A=i[y];g.path=(n.path?`${n.path}.`:"")+y,_=_.resolve({value:A,context:n.context,parent:p});let M=_ instanceof jc?_.spec:void 0,k=M==null?void 0:M.strict;if(M!=null&&M.strip){x=x||y in i;continue}P=!n.__validating||!k?_.cast(i[y],g):i[y],P!==void 0&&(p[y]=P)}else T&&!u&&(p[y]=i[y]);(T!==y in p||p[y]!==i[y])&&(x=!0)}return x?p:i}_validate(t,n={},r,i){let{from:o=[],originalValue:u=t,recursive:l=this.spec.recursive}=n;n.from=[{schema:this,value:u},...o],n.__validating=!0,n.originalValue=u,super._validate(t,n,r,(p,g)=>{if(!l||!aD(g)){i(p,g);return}u=u||g;let x=[];for(let y of this._nodes){let _=this.fields[y];!_||im.isRef(_)||x.push(_.asNestedTest({options:n,key:y,parent:g,parentPath:n.path,originalParent:u}))}this.runTests({tests:x,value:g,originalValue:u,options:n},r,y=>{i(y.sort(this._sortErrors).concat(p),g)})})}clone(t){const n=super.clone(t);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(t){let n=super.concat(t),r=n.fields;for(let[i,o]of Object.entries(this.fields)){const u=r[i];r[i]=u===void 0?o:u}return n.withMutation(i=>i.setFields(r,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var i;const o=this.fields[r];let u=t;(i=u)!=null&&i.value&&(u=Object.assign({},u,{parent:u.value,value:u.value[r]})),n[r]=o&&"getDefault"in o?o.getDefault(u):void 0}),n}setFields(t,n){let r=this.clone();return r.fields=t,r._nodes=Mte(t,n),r._sortErrors=R6(Object.keys(t)),n&&(r._excludedEdges=n),r}shape(t,n=[]){return this.clone().withMutation(r=>{let i=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),i=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,t),i)})}partial(){const t={};for(const[n,r]of Object.entries(this.fields))t[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(t)}deepPartial(){return pw(this)}pick(t){const n={};for(const r of t)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,i])=>t.includes(r)&&t.includes(i)))}omit(t){const n=[];for(const r of Object.keys(this.fields))t.includes(r)||n.push(r);return this.pick(n)}from(t,n,r){let i=cg.getter(t,!0);return this.transform(o=>{if(!o)return o;let u=o;return Dte(o,t)&&(u=Object.assign({},o),r||delete u[t],u[n]=i(o)),u})}json(){return this.transform(Nte)}noUnknown(t=!0,n=WI.noUnknown){typeof t!="boolean"&&(n=t,t=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(i){if(i==null)return!0;const o=zte(this.schema,i);return!t||o.length===0||this.createError({params:{unknown:o.join(", ")}})}});return r.spec.noUnknown=t,r}unknown(t=!0,n=WI.noUnknown){return this.noUnknown(!t,n)}transformKeys(t){return this.transform(n=>{if(!n)return n;const r={};for(const i of Object.keys(n))r[t(i)]=n[i];return r})}camelCase(){return this.transformKeys(G2.camelCase)}snakeCase(){return this.transformKeys(G2.snakeCase)}constantCase(){return this.transformKeys(t=>G2.snakeCase(t).toUpperCase())}describe(t){const n=(t?this.resolve(t):this).clone(),r=super.describe(t);r.fields={};for(const[o,u]of Object.entries(n.fields)){var i;let l=t;(i=l)!=null&&i.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[o]})),r.fields[o]=u.describe(l)}return r}}av.prototype=M6.prototype;const Bte=av({username:Ns().required("Username can't be empty").min(3).max(32),email:Ns().email("Your email is not valid").required("Email can't be empty"),password:Ns().required("Password can't be empty").min(6).max(28)}),jte=av({email:Ns().email("Your email is not valid").required("Email can't be empty"),password:Ns().required("Password can't be empty").min(6).max(28)}),$te=av({password:Ns().required("Password can't be empty").min(6).max(28),confirmPassword:Ns().oneOf([_te("password"),null],"Password must match").required("Confirm password is required")}),Ute=av({username:Ns().required("Username can't be empty").min(3).max(32),email:Ns().email("Your email is not valid").required("Email can't be empty")}),Vte=av({title:Ns().required("Title can't be empty").min(4).max(40),price:op().required("Price can't be empty").min(1),bedroom:op().required().min(1).max(50),bathroom:op().required().min(1).max(50),type:Ns().required("Please select rent or buy"),property:Ns().required("Please select property type"),desc:Ns().required().min(20),size:op().required("Room size can't be empty").min(1).max(1e6),school:op().min(1),bus:op().min(1),restraunt:op().min(1),petAllowance:Ns(),income:Ns(),utilities:Ns()});function OA(e){return"?"+Object.keys(e).map(t=>t+"="+e[t]).join("&")}var qte={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function Gte(e){if(typeof e=="number")return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();n.includes(".")?t=parseFloat(n):t=parseInt(n,10);var r=(e.match(/[^0-9]*$/)||"").toString();return qte[r]?{value:t,unit:r}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function lD(e){var t=Gte(e);return"".concat(t.value).concat(t.unit)}var Hte=function(e,t,n){var r="react-spinners-".concat(e,"-").concat(n);if(typeof window>"u"||!window.document)return r;var i=document.createElement("style");document.head.appendChild(i);var o=i.sheet,u=`
    @keyframes `.concat(r,` {
      `).concat(t,`
    }
  `);return o&&o.insertRule(u,0),r},sE=function(){return sE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},sE.apply(this,arguments)},Zte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Wte=Hte("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function Kte(e){var t=e.loading,n=t===void 0?!0:t,r=e.color,i=r===void 0?"#000000":r,o=e.speedMultiplier,u=o===void 0?1:o,l=e.cssOverride,p=l===void 0?{}:l,g=e.size,x=g===void 0?35:g,y=Zte(e,["loading","color","speedMultiplier","cssOverride","size"]),_=sE({background:"transparent !important",width:lD(x),height:lD(x),borderRadius:"100%",border:"2px solid",borderTopColor:i,borderBottomColor:"transparent",borderLeftColor:i,borderRightColor:i,display:"inline-block",animation:"".concat(Wte," ").concat(.75/u,"s 0s infinite linear"),animationFillMode:"both"},p);return n?Ue.createElement("span",sE({style:_},y)):null}function Xte({reqEndPoint:e,setFilterParams:t,filterParams:n}){const[r,i]=Ue.useState([]),[o,u]=Ue.useState(!1),l=Ue.useRef();function p(y,_){t({...n,address:_==null?void 0:_.address}),l.current.value=_==null?void 0:_.address,i([])}function g(){l.current.value="",t({...n,address:""}),r[0]&&i([])}const x=function(){let _;return function(T){if(T.target.value.length<2)return r[0]&&i([]);_&&clearTimeout(_),_=setTimeout(async()=>{u(!0),t({...n,[T.target.name]:T.target.value});try{const P=await lr.get(e+OA({...n,[T.target.name]:T.target.value}));i(P.data)}catch(P){console.log(P.message)}finally{u(!1)}},500)}}();return ae.jsxs("div",{className:"input-autocomplete-container",children:[ae.jsx("input",{ref:l,className:"autoCompleteField",type:"text",id:"address",name:"address",defaultValue:n.address,placeholder:"Address",onChange:x}),o&&ae.jsx("span",{className:"loading-autocomplete",children:ae.jsx(Kte,{size:16})}),n.address&&!o&&ae.jsx("span",{onClick:g,className:"cancel-text",children:"X"}),ae.jsx("div",{className:"autocomplete-container",children:r.map(y=>ae.jsx("span",{onClick:_=>p(_,y),children:y==null?void 0:y.address},y._id))})]})}function N6({_id:e,title:t,images:n,bedroom:r,bathroom:i,price:o,address:u,latitude:l,longitude:p,handleFlyToHouse:g}){const x=tu();function y(){g?g({_id:e,img:n[0],title:t,latitude:l,longitude:p,bedroom:r,price:o}):x(`/list/${e}`)}return ae.jsxs("div",{className:"card-container",children:[ae.jsx("div",{className:"card-left-section",children:ae.jsx(oo,{to:`/list/${e}`,children:ae.jsx("img",{src:n[0]||"https://www.its.ac.id/tmesin/wp-content/uploads/sites/22/2022/07/no-image.png",alt:t})})}),ae.jsxs("div",{className:"card-right-section",children:[ae.jsx("h1",{onClick:y,children:t}),ae.jsxs("div",{className:"address-container",children:[ae.jsx("img",{src:"/pin.png",alt:"pin-image"}),ae.jsx("span",{children:u.slice(0,45)+"..."})]}),ae.jsxs("span",{className:"price",children:[" ",o]}),ae.jsx("div",{className:"card-upper-bottom",children:ae.jsxs("div",{className:"left-section",children:[ae.jsxs("div",{className:"bedroom",children:[ae.jsx("img",{src:"/bed.png",alt:"bedroom"}),ae.jsxs("span",{children:[r," bedroom"]})]}),ae.jsxs("div",{className:"bathroom",children:[ae.jsx("img",{src:"/bath.png",alt:"bathroom"}),ae.jsxs("span",{children:[i," bathroom"]})]})]})}),ae.jsx("div",{className:"card-lower-bottom",children:ae.jsxs(oo,{to:`/list/${e}`,children:["See Details ",ae.jsx("span",{children:""})]})})]})]})}function Lb(e){const t=new Date(e);if(!Number.isNaN(t.valueOf()))return t;const n=String(e).match(/\d+/g);if(n==null||n.length<=2)return t;{const[r,i,...o]=n.map(p=>parseInt(p)),u=[r,i-1,...o];return new Date(Date.UTC(...u))}}function uD(e,t,n){const r=e!==1?t+"s":t;return e+" "+r+" "+n}function XI(){return XI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XI.apply(this,arguments)}const T0=60,C0=T0*60,Qy=C0*24,Ab=Qy*7,cD=Qy*30,hD=Qy*365,Yte=()=>Date.now();function Jte({date:e,formatter:t=uD,component:n="time",live:r=!0,minPeriod:i=0,maxPeriod:o=Ab,title:u,now:l=Yte,...p}){const[g,x]=Ue.useState(l());Ue.useEffect(()=>{if(!r)return;const U=(()=>{const V=Lb(e).valueOf();if(!V)return console.warn("[react-timeago] Invalid Date provided"),0;const G=Math.round(Math.abs(g-V)/1e3),H=G<T0?1e3:G<C0?1e3*T0:G<Qy?1e3*C0:1e3*Ab,J=Math.min(Math.max(H,i*1e3),o*1e3);return J?setTimeout(()=>{x(l())},J):0})();return()=>{U&&clearTimeout(U)}},[e,r,o,i,l,g]);const y=n,_=Lb(e).valueOf();if(!_)return null;const T=Math.round(Math.abs(g-_)/1e3),P=_<g?"ago":"from now",[A,M]=T<T0?[Math.round(T),"second"]:T<C0?[Math.round(T/T0),"minute"]:T<Qy?[Math.round(T/C0),"hour"]:T<Ab?[Math.round(T/Qy),"day"]:T<cD?[Math.round(T/Ab),"week"]:T<hD?[Math.round(T/cD),"month"]:[Math.round(T/hD),"year"],k=typeof u>"u"?typeof e=="string"?e:Lb(e).toISOString().substr(0,16).replace("T"," "):u,R=y==="time"?{...p,dateTime:Lb(e).toISOString()}:p,z=uD.bind(null,A,M,P);return Ue.createElement(y,XI({},R,{title:k}),t(A,M,P,_,z,l))}var D6={exports:{}},Qte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ene=Qte,tne=ene;function z6(){}function F6(){}F6.resetWarningCache=z6;var nne=function(){function e(r,i,o,u,l,p){if(p!==tne){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:F6,resetWarningCache:z6};return n.PropTypes=n,n};D6.exports=nne();var rne=D6.exports;const on=bd(rne);function ine(e,t){return t={exports:{}},e(t,t.exports),t.exports}var $c=ine(function(e){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var u=typeof o;if(u==="string"||u==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var l=n.apply(null,o);l&&r.push(l)}}else if(u==="object")if(o.toString===Object.prototype.toString)for(var p in o)t.call(o,p)&&o[p]&&r.push(p);else r.push(o.toString())}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()});function lf(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var one=`.shimmer-button {
  border-radius: 4px;
  height: 38px;
  width: 120px;
  margin-bottom: 20px; }
  .shimmer-button--sm {
    border-radius: 3px;
    height: 31px;
    width: 100px; }
  .shimmer-button--lg {
    height: 48px;
    width: 140px;
    border-radius: 5px; }
`;lf(one);var Fu=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},bx=function(t){var n=t.size;return Bt.createElement("div",{className:$c(Fu({"shimmer shimmer-button":!0},"shimmer-button--"+n,!0))})};bx.propTypes={size:on.oneOf(["lg","md","sm"])};bx.defaultProps={size:"md"};var IS=function(t){var n=t.size,r=t.center,i=t.className,o={};return n&&(o.width=n+"px",o.height=n+"px"),Bt.createElement("div",{className:$c({"text-center":r})},Bt.createElement("div",{style:o,className:$c(Fu({"shimmer shimmer-avatar":!0},i,i))}))};IS.propTypes={size:on.number,center:on.bool,className:on.string};IS.defaultProps={center:!1,size:80};var A_=function(t){var n=t.height,r=t.width,i=t.center,o=t.className,u=t.fitOnFrame,l=t.rounded,p={};return n&&(p.height=n+"px"),r&&(p.width=r+"px"),Bt.createElement("div",{className:$c({"h-100":u,"text-center ":i})},Bt.createElement("div",{className:$c(Fu({"h-100":u,"shimmer shimmer-thumbnail":!0,"border-rounded":l},o,o)),style:p}))};A_.propTypes={height:on.number,width:on.number,center:on.bool,className:on.string,fitOnFrame:on.bool,rounded:on.bool};A_.defaultProps={canter:!1,fitOnFrame:!1,rounded:!1,height:250};var sne=`.shimmer-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  margin-bottom: 20px;
  display: inline-block; }

.shimmer-thumbnail {
  min-width: 80px;
  width: 100%;
  height: 200px;
  margin-bottom: 20px;
  display: inline-block; }
`;lf(sne);var ane=`.shimmer-title {
  margin-bottom: 20px; }
  .shimmer-title--secondary {
    margin-bottom: 20px; }
    .shimmer-title--secondary .shimmer-title-line {
      height: 16px; }
  .shimmer-title-line {
    width: 100%;
    height: 24px;
    border-radius: 20px; }
    .shimmer-title-line:first-child {
      width: 100% !important; }
    .shimmer-title-line:last-child {
      width: 40%; }
`;lf(ane);var Ds=function(t){var n,r=t.line,i=t.gap,o=t.variant,u=t.className,l=function(){for(var g=[],x=0;x<r;x++)g.push(Bt.createElement("div",{className:"shimmer shimmer-title-line",key:x}));return g};return Bt.createElement("div",{className:$c((n={grid:!0,"shimmer-title":o==="primary","shimmer-title--secondary":o==="secondary"},Fu(n,"grid-gap-"+i,i),Fu(n,u,u),n))},l())};Ds.propTypes={line:on.number,gap:on.oneOf([10,15,20,30]),variant:on.oneOf(["primary","secondary"]),className:on.string};Ds.defaultProps={line:2,gap:10,variant:"primary"};var lne=`.shimmer-card {
  border-radius: 8px;
  box-shadow: 0 0px 10px rgba(0, 0, 0, 0.1);
  background-color: #ffffff;
  width: 100%; }
  .shimmer-card:not(:first-child) {
    margin-top: 30px; }
  .shimmer-card--content-center {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center; }
    .shimmer-card--content-center * {
      width: 100%;
      margin: auto; }
`;lf(lne);var wx=function(t){var n,r=t.children,i=t.className,o=t.paddingSize;return r?Bt.createElement("div",{className:$c((n={"shimmer-card":!0},Fu(n,"p-"+o,o),Fu(n,i,i),n))},r):null};wx.propTypes={className:on.string,children:on.oneOfType([on.element,on.array]).isRequired,paddingSize:on.oneOf([!1,20,30])};wx.defaultProps={paddingSize:!1};on.number,on.oneOf([2,3,4]),on.oneOf([20,30]),on.bool,on.oneOf(["thumbnail","circular"]),on.number,on.bool,on.bool;var une=`.shimmer-gallery-puzzle {
  height: 540px; }

.circular-image-caption .shimmer-title-line {
  margin: auto; }
`;lf(une);on.number,on.oneOf([2,3,4]),on.oneOf([20,30]),on.bool,on.number;on.number.isRequired,on.bool;var cne=`.shimmer-table-row {
  box-shadow: 0 0px 10px rgba(0, 0, 0, 0.1);
  display: flex;
  padding: 25px 0;
  background-color: #ffffff;
  border-radius: 5px;
  margin-bottom: 20px; }
  .shimmer-table-row--header {
    background-color: transparent;
    box-shadow: none;
    margin: 0; }
  .shimmer-table-row > .shimmer {
    margin: 0 30px; }

.shimmer-table-col {
  width: 100%;
  height: 10px;
  border-radius: 10px; }
`;lf(cne);on.number,on.number;var hne=`.shimmer-badge {
  width: 80px;
  height: 24px;
  border-radius: 20px;
  margin-bottom: 20px; }
`;lf(hne);on.number;var fne=`.shimmer-text {
  margin-bottom: 30px; }
  .shimmer-text-line {
    width: 100%;
    height: 8px;
    border-radius: 10px; }
    .shimmer-text-line:first-child {
      width: 100% !important; }
    .shimmer-text-line:last-child {
      width: 40%; }
`;lf(fne);var Os=function(t){var n,r=t.line,i=t.gap,o=t.className,u=function(){for(var p=[],g=0;g<r;g++)p.push(Bt.createElement("div",{className:"shimmer shimmer-text-line",key:g}));return p};return Bt.createElement("div",{className:$c((n={"grid shimmer-text":!0},Fu(n,"grid-gap-"+i,i),Fu(n,o,o),n))},u())};Os.propTypes={line:on.number,gap:on.oneOf([10,15,20,30]),className:on.string};Os.defaultProps={line:5,gap:15};var dne=`.shimmer-separator {
  height: 1px;
  background-color: #dddddd;
  margin: 40px 0; }
`;lf(dne);on.oneOf(["text","image","both"]),on.bool;on.bool.isRequired,on.oneOf(["circular","thumbnail"]),on.number,on.number,on.bool,on.bool,on.bool,on.bool;on.bool,on.number,on.oneOf(["STYLE_ONE","STYLE_TWO","STYLE_THREE","STYLE_FOUR","STYLE_FIVE","STYLE_SIX","STYLE_SEVEN"]);var kA=function(t){var n=t.variant,r=t.cta,i=t.card,o={SIMPLE:Bt.createElement("div",null,Bt.createElement(Ds,{line:1,className:"w-40"}),Bt.createElement(Ds,{line:1,variant:"secondary",className:"w-20 mb-40"}),Bt.createElement("div",{className:"w-40 mb-40"},Bt.createElement(Os,{line:1,className:"mb-15 w-20"}),Bt.createElement(Os,{line:1,className:"mb-15 w-40"}),Bt.createElement(Os,{line:1,className:"mb-30 w-60"})),Bt.createElement(Ds,{line:1,variant:"secondary",className:"w-30"}),Bt.createElement(Os,{className:"mb-40"}),Bt.createElement(Ds,{line:1,variant:"secondary",className:"w-30"}),Bt.createElement(Os,{className:"mb-40"}),Bt.createElement(Ds,{line:1,variant:"secondary",className:"w-30"}),Bt.createElement(Os,{className:"mb-40"}),Bt.createElement(Ds,{line:1,variant:"secondary",className:"w-30"}),Bt.createElement(Os,{className:"mb-40"}),r&&Bt.createElement(bx,null)),EDITOR:Bt.createElement("div",null,Bt.createElement(Ds,{line:1,className:"w-40"}),Bt.createElement(A_,{height:400}),Bt.createElement(Os,null),Bt.createElement(Os,null),Bt.createElement("div",{className:"shimmer-row"},Bt.createElement("div",{className:"shimmer-col"},Bt.createElement(Os,{line:13})),Bt.createElement("div",{className:"shimmer-col"},Bt.createElement(A_,{height:300}))),Bt.createElement(Os,null),Bt.createElement(Os,null),Bt.createElement(Os,null))};return i?Bt.createElement(wx,{paddingSize:30},o[n]):o[n]};kA.propTypes={variant:on.oneOf(["SIMPLE","EDITOR"]),cta:on.bool,card:on.bool};kA.defaultProps={variant:"SIMPLE",cta:!1,card:!1};var Rh=function(t){var n=t.cta,r=t.title,i=t.text,o=t.imageType,u=t.imageWidth,l=t.imageHeight;return Bt.createElement(wx,null,o==="thumbnail"&&Bt.createElement(A_,{height:l,width:u,className:u&&u!=="w-100"?"m-30 mb-0":"mb-0"}),o==="circular"&&Bt.createElement(IS,{size:u,className:"m-30 mb-0"}),Bt.createElement("div",{className:"p-30"},r&&Bt.createElement(Ds,{variant:"secondary"}),i&&Bt.createElement(Os,{line:3,gap:10}),n&&Bt.createElement(bx,{size:"sm"})))};Rh.propTypes={title:on.bool,text:on.bool,cta:on.bool,imageType:on.oneOf(["circular","thumbnail"]),imageHeight:on.number,imageWidth:on.number};Rh.defaultProps={title:!1,text:!1,cta:!1,imageType:"thumbnail"};var RA=function(t){var n,r=t.row,i=t.col,o=t.gap,u=t.className,l=t.postStyle,p={STYLE_ONE:Bt.createElement(Rh,{title:!0,text:!0,cta:!0}),STYLE_TWO:Bt.createElement(Rh,{title:!0,cta:!0}),STYLE_THREE:Bt.createElement(Rh,{title:!0}),STYLE_FOUR:Bt.createElement(Rh,{text:!0,cta:!0}),STYLE_FIVE:Bt.createElement(Rh,{text:!0}),STYLE_SIX:Bt.createElement(Rh,{title:!0,text:!0,cta:!0,imageType:"thumbnail",imageWidth:80,imageHeight:80,contentCenter:!0}),STYLE_SEVEN:Bt.createElement(Rh,{text:!0,cta:!0,imageType:"thumbnail",imageWidth:80,imageHeight:80,contentCenter:!0}),STYLE_EIGHT:Bt.createElement(Rh,{title:!0,cta:!0,imageType:"thumbnail",imageWidth:80,imageHeight:80,contentCenter:!0})},g=function(){for(var y=[],_=r*i,T=0;T<_;T++)y.push(Bt.createElement("div",{key:T},p[l]));return y};return Bt.createElement("div",{className:$c((n={grid:!0},Fu(n,"grid-gap-"+o,!0),Fu(n,"grid-column-"+i,!0),Fu(n,u,u),n))},g())};RA.propTypes={row:on.number,col:on.oneOf([2,3,4]),gap:on.oneOf([20,30]),postStyle:on.oneOf(["STYLE_ONE","STYLE_TWO","STYLE_THREE","STYLE_FOUR","STYLE_FIVE","STYLE_SIX","STYLE_SEVEN","STYLE_EIGHT"])};RA.defaultProps={row:3,col:3,gap:20,postStyle:"STYLE_ONE"};var G0=function(t){var n=t.card,r=t.title,i=t.text,o=t.cta,u=t.thumbnailWidth,l=t.thumbnailHeight,p=t.reverse,g=function(){return Bt.createElement("div",{className:$c({flex:!0,"flex-reverse":p})},Bt.createElement("div",{className:$c({flex:!0,"w-50":!u})},Bt.createElement(A_,{width:u,height:l,className:"h-100 m-0"})),Bt.createElement("div",{className:" flex-1 p-30"},r&&Bt.createElement(Ds,{className:"w-40",line:1}),i&&Bt.createElement(Os,null),o&&Bt.createElement(bx,null)))};return n?Bt.createElement(wx,null,g()):g()};G0.propTypes={card:on.bool,title:on.bool,text:on.bool,cta:on.bool,thumbnailWidth:on.number,thumbnailHeight:on.number,reverse:on.bool};G0.defaultProps={card:!0,title:!1,text:!1,cta:!1,reverse:!1};on.bool,on.bool,on.bool;var pne=`.shimmer {
  background: linear-gradient(to right, #f6f6f6 8%, #f0f0f0 18%, #f6f6f6 33%);
  background-size: 1000px 100%;
  animation: shimmer 2.2s linear infinite forwards; }

@-webkit-keyframes shimmer {
  0% {
    background-position: -100% 0; }
  100% {
    background-position: 100% 0; } }

@keyframes shimmer {
  0% {
    background-position: -1000px 0; }
  100% {
    background-position: 1000px 0; } }

/*
=====
Padding Styles
=====
*/
.p-30 {
  padding: 30px; }

.p-20 {
  padding: 20px; }

.p-15 {
  padding: 15px; }

/*
=====
Margin Styles
=====
*/
.m-0 {
  margin: 0; }

.m-auto {
  margin: auto; }

.ml-auto {
  margin-left: auto; }

.mr-auto {
  margin-right: auto; }

.m-15 {
  margin: 15px; }

.m-30 {
  margin: 30px; }

.mb-0 {
  margin-bottom: 0px; }

.mb-10 {
  margin-bottom: 10px; }

.mb-15 {
  margin-bottom: 15px; }

.mb-20 {
  margin-bottom: 20px; }

.mt-15 {
  margin-top: 15px; }

.mb-30 {
  margin-bottom: 30px; }

.mb-40 {
  margin-bottom: 40px; }

/*
=======
Content Size Styles
=======
*/
.w-10 {
  width: 10%; }

.w-20 {
  width: 20%; }

.w-30 {
  width: 30%; }

.w-40 {
  width: 40%; }

.w-50 {
  width: 50%; }

.w-60 {
  width: 60%; }

.w-70 {
  width: 70%; }

.w-80 {
  width: 80%; }

/*
========
Flex Styles
========
*/
.flex {
  display: flex; }

.flex-direction-column {
  flex-direction: column; }

.flex-horizontal-center {
  display: flex;
  flex-direction: column;
  align-items: center; }

.flex-vertical-center {
  align-items: center; }

.flex-content-between {
  justify-content: space-between; }

.flex-reverse {
  flex-direction: row-reverse; }

.flex-1 {
  flex-grow: 1; }

/*
=======
Grid Styles
=======
*/
.grid {
  display: grid; }

.grid-gap-10 {
  gap: 10px; }

.grid-gap-15 {
  gap: 15px; }

.grid-gap-20 {
  gap: 20px; }

.grid-gap-30 {
  gap: 30px; }

.grid-column-2 {
  grid-template-columns: auto auto; }

.grid-column-3 {
  grid-template-columns: auto auto auto; }

.grid-column-4 {
  grid-template-columns: auto auto auto auto; }

.text-center {
  text-align: center; }

.border-rounded {
  border-radius: 4px; }

.h-100 {
  height: 100% !important; }

.shimmer-hr {
  border-color: #f6f6f6; }

.shimmer-row {
  display: flex;
  margin: 0 -15px; }
  .shimmer-row .shimmer-col,
  .shimmer-row [class*="shimmer-col-"] {
    padding-left: 15px;
    padding-right: 15px;
    flex-basis: 0;
    flex-grow: 1;
    max-width: 100%; }
`;lf(pne);function mne({chatId:e,setChatId:t}){var D,U;const n=Ue.useRef(),{userAuth:r}=Ue.useContext(Yc),i=nm(),o=Ue.useRef(),[u,l]=Ue.useState(!1),[p,g]=Ue.useState(!1),[x,y]=Ue.useState(),_=Ue.useContext(lS),{data:T,isFetching:P,error:A}=yx({queryKey:["chat",e],queryFn:async()=>{const V=await lr.patch(`http://localhost:8080/api/chats/${e}`,{},{withCredentials:!0});return V.data.receiver=V.data.users[0],V.data}});Ue.useEffect(()=>{var V;T&&((V=n.current)==null||V.scrollIntoView({behavior:"smooth"}))},[T]),Ue.useEffect(()=>(_.on("receive-message",async V=>{i.setQueryData(["chat",e],G=>({...G,messages:[...G.messages,V]})),i.setQueryData(["chats"],G=>G.map(H=>H._id===e?{...H,lastMessage:V.content}:H))}),_.on("user-typing",()=>{l(!0)}),_.on("user-typing-stop",()=>{l(!1)}),function(){_.off("receive-message"),_.off("user-typing"),_.off("user-typing-stop"),_.emit("close-chat")}),[]);function M(){t(null)}function k(){var V;g(!1),_.emit("stop-typing",{chatId:e,receiverId:(V=T.receiver)==null?void 0:V._id})}async function R(V){var J,Y;V.preventDefault();const G=o.current.value;o.current.value="";const H={receiverId:(J=T.receiver)==null?void 0:J._id,content:G,chatId:e,senderId:(Y=r.userInfo)==null?void 0:Y.userId,createdAt:Date.now()};try{k(),clearTimeout(x),_.emit("send-message",H),i.setQueryData(["chat",e],{...T,messages:[...T.messages,{...H}]}),i.setQueryData(["chats"],X=>X.map(ee=>ee._id===e?{...ee,lastMessage:G}:ee))}catch(X){An.error(X.message,{autoClose:2e3})}}function z(){var G;x&&clearTimeout(x),p||(g(!0),_.emit("typing",{chatId:e,receiverId:(G=T.receiver)==null?void 0:G._id}));const V=setTimeout(()=>{k()},2e3);y(V)}return A?ae.jsx("div",{children:A.message}):ae.jsxs("div",{className:"chat-window",style:{display:e?"block":"none"},children:[P?ae.jsx("div",{className:"top-section",children:ae.jsx(IS,{center:!0,size:40})}):ae.jsxs("div",{className:"top-section",children:[ae.jsx("div",{children:ae.jsx("img",{src:(D=T.receiver)==null?void 0:D.avatar,alt:"avatar-image"})}),ae.jsxs("div",{className:"username-typing-container",children:[ae.jsx("span",{children:(U=T.receiver)==null?void 0:U.username}),u&&ae.jsx("span",{className:"typing",children:"Typing..."})]}),ae.jsx("button",{onClick:M,children:"X"})]}),ae.jsx("div",{className:"chat-messages",children:P?ae.jsxs("div",{className:"shimmer-message-container",children:[ae.jsx(Ds,{line:1,gap:15,variant:"secondary",className:"shimmer-message"}),ae.jsx(Ds,{line:1,gap:15,variant:"secondary",className:"shimmer-message sender"}),ae.jsx(Ds,{line:1,gap:15,variant:"secondary",className:"shimmer-message"}),ae.jsx(Ds,{line:1,gap:15,variant:"secondary",className:"shimmer-message sender"}),ae.jsx(Ds,{line:1,gap:15,variant:"secondary",className:"shimmer-message"}),ae.jsx(Ds,{line:1,gap:15,variant:"secondary",className:"shimmer-message sender"})]}):T==null?void 0:T.messages.map(V=>{var G;return ae.jsxs("div",{ref:n,className:"chat-message",style:{alignSelf:V.senderId==((G=r.userInfo)==null?void 0:G.userId)?"flex-end":"flex-start"},children:[ae.jsx("p",{children:V.content}),ae.jsx("span",{children:ae.jsx(Jte,{date:V.createdAt})})]},V._id)})}),ae.jsxs("form",{className:"chat-form",onSubmit:R,children:[ae.jsx("textarea",{ref:o,name:"message",onChange:z}),ae.jsx("button",{children:"Send"})]})]})}function gne({filterParams:e,setFilterParams:t,setSearchParams:n}){const r=nm(),[i,o]=Ue.useState(e.address);function u(p){t({...e,[p.target.name]:p.target.value})}function l(p){if(p.preventDefault(),e.minPrice>e.maxPrice)return An.error("Min price can't be greater than max price",{autoClose:2e3});o(e.address),n(e),r.invalidateQueries({queryKey:["posts"]})}return ae.jsxs("form",{className:"filter-container",onSubmit:l,children:[ae.jsxs("h1",{children:["Search results for ",ae.jsx("span",{children:i||"N/A"})]}),ae.jsxs("div",{className:"top-filter-section",children:[ae.jsx("label",{htmlFor:"address",children:"Address"}),ae.jsx(Xte,{filterParams:e,setFilterParams:t,reqEndPoint:"http://localhost:8080/api/posts/autocomplete"})]}),ae.jsxs("div",{className:"bottom-filter-section",children:[ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"type",children:"Type"}),ae.jsxs("select",{id:"type",name:"type",onChange:u,defaultValue:e.type,children:[ae.jsx("option",{value:"",children:"any"}),fA.map((p,g)=>ae.jsx("option",{value:p,children:p},g))]})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"property",children:"Property"}),ae.jsxs("select",{id:"property",defaultValue:e.property,name:"property",onChange:u,children:[ae.jsx("option",{value:"",children:"any"}),VB.map((p,g)=>ae.jsx("option",{value:p,children:p},g))]})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"minPrice",children:"Min Price"}),ae.jsx("input",{type:"number",name:"minPrice",id:"minPrice",placeholder:"any",defaultValue:e.minPrice,min:0,max:1e10,onChange:u})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"maxPrice",children:"Max Price"}),ae.jsx("input",{type:"number",id:"maxPrice",name:"maxPrice",placeholder:"any",defaultValue:e.maxPrice,min:0,max:1e10,onChange:u})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"bedroom",children:"Bedroom"}),ae.jsx("input",{type:"number",name:"bedroom",id:"bedroom",placeholder:"any",defaultValue:e.bedroom,min:0,max:1e10,onChange:u})]}),ae.jsx("button",{onClick:l,children:ae.jsx("img",{src:"/search.png"})})]})]})}function fD({queryKey:e,requestEndpoint:t}){const{isFetching:n,data:r}=yx({queryKey:e,queryFn:async()=>(await lr.get(t,{withCredentials:!0})).data});return n?ae.jsxs(ae.Fragment,{children:[ae.jsx(G0,{title:!0,text:!0,cta:!0,thumbnailWidth:300}),ae.jsx(G0,{title:!0,text:!0,cta:!0,thumbnailWidth:300}),ae.jsx(G0,{title:!0,text:!0,cta:!0,thumbnailWidth:300})]}):ae.jsxs(ae.Fragment,{children:[(r==null?void 0:r.length)==0&&ae.jsxs("div",{className:"no-result-container",children:[ae.jsx("img",{src:"/no-results.png",alt:"no-results"}),ae.jsx("span",{children:"No Post Found"})]}),r==null?void 0:r.map(i=>ae.jsx(N6,{...i},i._id))]})}function MA(){return ae.jsx("div",{className:"loader-container",children:ae.jsx("div",{className:"pong-loader"})})}var YI={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(Er,function(n){var r="1.9.4";function i(f){var b,N,q,re;for(N=1,q=arguments.length;N<q;N++){re=arguments[N];for(b in re)f[b]=re[b]}return f}var o=Object.create||function(){function f(){}return function(b){return f.prototype=b,new f}}();function u(f,b){var N=Array.prototype.slice;if(f.bind)return f.bind.apply(f,N.call(arguments,1));var q=N.call(arguments,2);return function(){return f.apply(b,q.length?q.concat(N.call(arguments)):arguments)}}var l=0;function p(f){return"_leaflet_id"in f||(f._leaflet_id=++l),f._leaflet_id}function g(f,b,N){var q,re,me,Ce;return Ce=function(){q=!1,re&&(me.apply(N,re),re=!1)},me=function(){q?re=arguments:(f.apply(N,arguments),setTimeout(Ce,b),q=!0)},me}function x(f,b,N){var q=b[1],re=b[0],me=q-re;return f===q&&N?f:((f-re)%me+me)%me+re}function y(){return!1}function _(f,b){if(b===!1)return f;var N=Math.pow(10,b===void 0?6:b);return Math.round(f*N)/N}function T(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function P(f){return T(f).split(/\s+/)}function A(f,b){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?o(f.options):{});for(var N in b)f.options[N]=b[N];return f.options}function M(f,b,N){var q=[];for(var re in f)q.push(encodeURIComponent(N?re.toUpperCase():re)+"="+encodeURIComponent(f[re]));return(!b||b.indexOf("?")===-1?"?":"&")+q.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function R(f,b){return f.replace(k,function(N,q){var re=b[q];if(re===void 0)throw new Error("No value provided for variable "+N);return typeof re=="function"&&(re=re(b)),re})}var z=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function D(f,b){for(var N=0;N<f.length;N++)if(f[N]===b)return N;return-1}var U="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function V(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var G=0;function H(f){var b=+new Date,N=Math.max(0,16-(b-G));return G=b+N,window.setTimeout(f,N)}var J=window.requestAnimationFrame||V("RequestAnimationFrame")||H,Y=window.cancelAnimationFrame||V("CancelAnimationFrame")||V("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function X(f,b,N){if(N&&J===H)f.call(b);else return J.call(window,u(f,b))}function ee(f){f&&Y.call(window,f)}var ce={__proto__:null,extend:i,create:o,bind:u,get lastId(){return l},stamp:p,throttle:g,wrapNum:x,falseFn:y,formatNum:_,trim:T,splitWords:P,setOptions:A,getParamString:M,template:R,isArray:z,indexOf:D,emptyImageUrl:U,requestFn:J,cancelFn:Y,requestAnimFrame:X,cancelAnimFrame:ee};function oe(){}oe.extend=function(f){var b=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},N=b.__super__=this.prototype,q=o(N);q.constructor=b,b.prototype=q;for(var re in this)Object.prototype.hasOwnProperty.call(this,re)&&re!=="prototype"&&re!=="__super__"&&(b[re]=this[re]);return f.statics&&i(b,f.statics),f.includes&&(we(f.includes),i.apply(null,[q].concat(f.includes))),i(q,f),delete q.statics,delete q.includes,q.options&&(q.options=N.options?o(N.options):{},i(q.options,f.options)),q._initHooks=[],q.callInitHooks=function(){if(!this._initHooksCalled){N.callInitHooks&&N.callInitHooks.call(this),this._initHooksCalled=!0;for(var me=0,Ce=q._initHooks.length;me<Ce;me++)q._initHooks[me].call(this)}},b},oe.include=function(f){var b=this.prototype.options;return i(this.prototype,f),f.options&&(this.prototype.options=b,this.mergeOptions(f.options)),this},oe.mergeOptions=function(f){return i(this.prototype.options,f),this},oe.addInitHook=function(f){var b=Array.prototype.slice.call(arguments,1),N=typeof f=="function"?f:function(){this[f].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(N),this};function we(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=z(f)?f:[f];for(var b=0;b<f.length;b++)f[b]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ne={on:function(f,b,N){if(typeof f=="object")for(var q in f)this._on(q,f[q],b);else{f=P(f);for(var re=0,me=f.length;re<me;re++)this._on(f[re],b,N)}return this},off:function(f,b,N){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var q in f)this._off(q,f[q],b);else{f=P(f);for(var re=arguments.length===1,me=0,Ce=f.length;me<Ce;me++)re?this._off(f[me]):this._off(f[me],b,N)}return this},_on:function(f,b,N,q){if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}if(this._listens(f,b,N)===!1){N===this&&(N=void 0);var re={fn:b,ctx:N};q&&(re.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(re)}},_off:function(f,b,N){var q,re,me;if(this._events&&(q=this._events[f],!!q)){if(arguments.length===1){if(this._firingCount)for(re=0,me=q.length;re<me;re++)q[re].fn=y;delete this._events[f];return}if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}var Ce=this._listens(f,b,N);if(Ce!==!1){var We=q[Ce];this._firingCount&&(We.fn=y,this._events[f]=q=q.slice()),q.splice(Ce,1)}}},fire:function(f,b,N){if(!this.listens(f,N))return this;var q=i({},b,{type:f,target:this,sourceTarget:b&&b.sourceTarget||this});if(this._events){var re=this._events[f];if(re){this._firingCount=this._firingCount+1||1;for(var me=0,Ce=re.length;me<Ce;me++){var We=re[me],dt=We.fn;We.once&&this.off(f,dt,We.ctx),dt.call(We.ctx||this,q)}this._firingCount--}}return N&&this._propagateEvent(q),this},listens:function(f,b,N,q){typeof f!="string"&&console.warn('"string" type argument expected');var re=b;typeof b!="function"&&(q=!!b,re=void 0,N=void 0);var me=this._events&&this._events[f];if(me&&me.length&&this._listens(f,re,N)!==!1)return!0;if(q){for(var Ce in this._eventParents)if(this._eventParents[Ce].listens(f,b,N,q))return!0}return!1},_listens:function(f,b,N){if(!this._events)return!1;var q=this._events[f]||[];if(!b)return!!q.length;N===this&&(N=void 0);for(var re=0,me=q.length;re<me;re++)if(q[re].fn===b&&q[re].ctx===N)return re;return!1},once:function(f,b,N){if(typeof f=="object")for(var q in f)this._on(q,f[q],b,!0);else{f=P(f);for(var re=0,me=f.length;re<me;re++)this._on(f[re],b,N,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[p(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[p(f)],this},_propagateEvent:function(f){for(var b in this._eventParents)this._eventParents[b].fire(f.type,i({layer:f.target,propagatedFrom:f.target},f),!0)}};Ne.addEventListener=Ne.on,Ne.removeEventListener=Ne.clearAllEventListeners=Ne.off,Ne.addOneTimeEventListener=Ne.once,Ne.fireEvent=Ne.fire,Ne.hasEventListeners=Ne.listens;var Be=oe.extend(Ne);function De(f,b,N){this.x=N?Math.round(f):f,this.y=N?Math.round(b):b}var Ae=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};De.prototype={clone:function(){return new De(this.x,this.y)},add:function(f){return this.clone()._add(ve(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(ve(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new De(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new De(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ae(this.x),this.y=Ae(this.y),this},distanceTo:function(f){f=ve(f);var b=f.x-this.x,N=f.y-this.y;return Math.sqrt(b*b+N*N)},equals:function(f){return f=ve(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=ve(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function ve(f,b,N){return f instanceof De?f:z(f)?new De(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new De(f.x,f.y):new De(f,b,N)}function he(f,b){if(f)for(var N=b?[f,b]:f,q=0,re=N.length;q<re;q++)this.extend(N[q])}he.prototype={extend:function(f){var b,N;if(!f)return this;if(f instanceof De||typeof f[0]=="number"||"x"in f)b=N=ve(f);else if(f=xe(f),b=f.min,N=f.max,!b||!N)return this;return!this.min&&!this.max?(this.min=b.clone(),this.max=N.clone()):(this.min.x=Math.min(b.x,this.min.x),this.max.x=Math.max(N.x,this.max.x),this.min.y=Math.min(b.y,this.min.y),this.max.y=Math.max(N.y,this.max.y)),this},getCenter:function(f){return ve((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return ve(this.min.x,this.max.y)},getTopRight:function(){return ve(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var b,N;return typeof f[0]=="number"||f instanceof De?f=ve(f):f=xe(f),f instanceof he?(b=f.min,N=f.max):b=N=f,b.x>=this.min.x&&N.x<=this.max.x&&b.y>=this.min.y&&N.y<=this.max.y},intersects:function(f){f=xe(f);var b=this.min,N=this.max,q=f.min,re=f.max,me=re.x>=b.x&&q.x<=N.x,Ce=re.y>=b.y&&q.y<=N.y;return me&&Ce},overlaps:function(f){f=xe(f);var b=this.min,N=this.max,q=f.min,re=f.max,me=re.x>b.x&&q.x<N.x,Ce=re.y>b.y&&q.y<N.y;return me&&Ce},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var b=this.min,N=this.max,q=Math.abs(b.x-N.x)*f,re=Math.abs(b.y-N.y)*f;return xe(ve(b.x-q,b.y-re),ve(N.x+q,N.y+re))},equals:function(f){return f?(f=xe(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function xe(f,b){return!f||f instanceof he?f:new he(f,b)}function Ee(f,b){if(f)for(var N=b?[f,b]:f,q=0,re=N.length;q<re;q++)this.extend(N[q])}Ee.prototype={extend:function(f){var b=this._southWest,N=this._northEast,q,re;if(f instanceof $e)q=f,re=f;else if(f instanceof Ee){if(q=f._southWest,re=f._northEast,!q||!re)return this}else return f?this.extend(be(f)||Ge(f)):this;return!b&&!N?(this._southWest=new $e(q.lat,q.lng),this._northEast=new $e(re.lat,re.lng)):(b.lat=Math.min(q.lat,b.lat),b.lng=Math.min(q.lng,b.lng),N.lat=Math.max(re.lat,N.lat),N.lng=Math.max(re.lng,N.lng)),this},pad:function(f){var b=this._southWest,N=this._northEast,q=Math.abs(b.lat-N.lat)*f,re=Math.abs(b.lng-N.lng)*f;return new Ee(new $e(b.lat-q,b.lng-re),new $e(N.lat+q,N.lng+re))},getCenter:function(){return new $e((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $e(this.getNorth(),this.getWest())},getSouthEast:function(){return new $e(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof $e||"lat"in f?f=be(f):f=Ge(f);var b=this._southWest,N=this._northEast,q,re;return f instanceof Ee?(q=f.getSouthWest(),re=f.getNorthEast()):q=re=f,q.lat>=b.lat&&re.lat<=N.lat&&q.lng>=b.lng&&re.lng<=N.lng},intersects:function(f){f=Ge(f);var b=this._southWest,N=this._northEast,q=f.getSouthWest(),re=f.getNorthEast(),me=re.lat>=b.lat&&q.lat<=N.lat,Ce=re.lng>=b.lng&&q.lng<=N.lng;return me&&Ce},overlaps:function(f){f=Ge(f);var b=this._southWest,N=this._northEast,q=f.getSouthWest(),re=f.getNorthEast(),me=re.lat>b.lat&&q.lat<N.lat,Ce=re.lng>b.lng&&q.lng<N.lng;return me&&Ce},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,b){return f?(f=Ge(f),this._southWest.equals(f.getSouthWest(),b)&&this._northEast.equals(f.getNorthEast(),b)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ge(f,b){return f instanceof Ee?f:new Ee(f,b)}function $e(f,b,N){if(isNaN(f)||isNaN(b))throw new Error("Invalid LatLng object: ("+f+", "+b+")");this.lat=+f,this.lng=+b,N!==void 0&&(this.alt=+N)}$e.prototype={equals:function(f,b){if(!f)return!1;f=be(f);var N=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return N<=(b===void 0?1e-9:b)},toString:function(f){return"LatLng("+_(this.lat,f)+", "+_(this.lng,f)+")"},distanceTo:function(f){return it.distance(this,be(f))},wrap:function(){return it.wrapLatLng(this)},toBounds:function(f){var b=180*f/40075017,N=b/Math.cos(Math.PI/180*this.lat);return Ge([this.lat-b,this.lng-N],[this.lat+b,this.lng+N])},clone:function(){return new $e(this.lat,this.lng,this.alt)}};function be(f,b,N){return f instanceof $e?f:z(f)&&typeof f[0]!="object"?f.length===3?new $e(f[0],f[1],f[2]):f.length===2?new $e(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new $e(f.lat,"lng"in f?f.lng:f.lon,f.alt):b===void 0?null:new $e(f,b,N)}var He={latLngToPoint:function(f,b){var N=this.projection.project(f),q=this.scale(b);return this.transformation._transform(N,q)},pointToLatLng:function(f,b){var N=this.scale(b),q=this.transformation.untransform(f,N);return this.projection.unproject(q)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var b=this.projection.bounds,N=this.scale(f),q=this.transformation.transform(b.min,N),re=this.transformation.transform(b.max,N);return new he(q,re)},infinite:!1,wrapLatLng:function(f){var b=this.wrapLng?x(f.lng,this.wrapLng,!0):f.lng,N=this.wrapLat?x(f.lat,this.wrapLat,!0):f.lat,q=f.alt;return new $e(N,b,q)},wrapLatLngBounds:function(f){var b=f.getCenter(),N=this.wrapLatLng(b),q=b.lat-N.lat,re=b.lng-N.lng;if(q===0&&re===0)return f;var me=f.getSouthWest(),Ce=f.getNorthEast(),We=new $e(me.lat-q,me.lng-re),dt=new $e(Ce.lat-q,Ce.lng-re);return new Ee(We,dt)}},it=i({},He,{wrapLng:[-180,180],R:6371e3,distance:function(f,b){var N=Math.PI/180,q=f.lat*N,re=b.lat*N,me=Math.sin((b.lat-f.lat)*N/2),Ce=Math.sin((b.lng-f.lng)*N/2),We=me*me+Math.cos(q)*Math.cos(re)*Ce*Ce,dt=2*Math.atan2(Math.sqrt(We),Math.sqrt(1-We));return this.R*dt}}),ct=6378137,xt={R:ct,MAX_LATITUDE:85.0511287798,project:function(f){var b=Math.PI/180,N=this.MAX_LATITUDE,q=Math.max(Math.min(N,f.lat),-N),re=Math.sin(q*b);return new De(this.R*f.lng*b,this.R*Math.log((1+re)/(1-re))/2)},unproject:function(f){var b=180/Math.PI;return new $e((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*b,f.x*b/this.R)},bounds:function(){var f=ct*Math.PI;return new he([-f,-f],[f,f])}()};function Dt(f,b,N,q){if(z(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=b,this._c=N,this._d=q}Dt.prototype={transform:function(f,b){return this._transform(f.clone(),b)},_transform:function(f,b){return b=b||1,f.x=b*(this._a*f.x+this._b),f.y=b*(this._c*f.y+this._d),f},untransform:function(f,b){return b=b||1,new De((f.x/b-this._b)/this._a,(f.y/b-this._d)/this._c)}};function Qt(f,b,N,q){return new Dt(f,b,N,q)}var Ft=i({},it,{code:"EPSG:3857",projection:xt,transformation:function(){var f=.5/(Math.PI*xt.R);return Qt(f,.5,-f,.5)}()}),Kt=i({},Ft,{code:"EPSG:900913"});function Gt(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function Tr(f,b){var N="",q,re,me,Ce,We,dt;for(q=0,me=f.length;q<me;q++){for(We=f[q],re=0,Ce=We.length;re<Ce;re++)dt=We[re],N+=(re?"L":"M")+dt.x+" "+dt.y;N+=b?ht.svg?"z":"x":""}return N||"M0 0"}var rt=document.documentElement.style,lt="ActiveXObject"in window,gt=lt&&!document.addEventListener,_t="msLaunchUri"in navigator&&!("documentMode"in document),Pt=et("webkit"),je=et("android"),vt=et("android 2")||et("android 3"),St=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Lt=je&&et("Google")&&St<537&&!("AudioNode"in window),en=!!window.opera,wn=!_t&&et("chrome"),gn=et("gecko")&&!Pt&&!en&&!lt,bt=!wn&&et("safari"),Vn=et("phantom"),_r="OTransition"in rt,Gs=navigator.platform.indexOf("Win")===0,Xr=lt&&"transition"in rt,kt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!vt,_n="MozPerspective"in rt,Pn=!window.L_DISABLE_3D&&(Xr||kt||_n)&&!_r&&!Vn,Cr=typeof orientation<"u"||et("mobile"),Zo=Cr&&Pt,Tn=Cr&&kt,Hs=!window.PointerEvent&&window.MSPointerEvent,qr=!!(window.PointerEvent||Hs),Oe="ontouchstart"in window||!!window.TouchEvent,K=!window.L_NO_TOUCH&&(Oe||qr),te=Cr&&en,le=Cr&&gn,pe=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ke=function(){var f=!1;try{var b=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",y,b),window.removeEventListener("testPassiveEventSupport",y,b)}catch{}return f}(),ge=function(){return!!document.createElement("canvas").getContext}(),ze=!!(document.createElementNS&&Gt("svg").createSVGRect),Ie=!!ze&&function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),qe=!ze&&function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var b=f.firstChild;return b.style.behavior="url(#default#VML)",b&&typeof b.adj=="object"}catch{return!1}}(),Qe=navigator.platform.indexOf("Mac")===0,ot=navigator.platform.indexOf("Linux")===0;function et(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var ht={ie:lt,ielt9:gt,edge:_t,webkit:Pt,android:je,android23:vt,androidStock:Lt,opera:en,chrome:wn,gecko:gn,safari:bt,phantom:Vn,opera12:_r,win:Gs,ie3d:Xr,webkit3d:kt,gecko3d:_n,any3d:Pn,mobile:Cr,mobileWebkit:Zo,mobileWebkit3d:Tn,msPointer:Hs,pointer:qr,touch:K,touchNative:Oe,mobileOpera:te,mobileGecko:le,retina:pe,passiveEvents:ke,canvas:ge,svg:ze,vml:qe,inlineSvg:Ie,mac:Qe,linux:ot},Zt=ht.msPointer?"MSPointerDown":"pointerdown",an=ht.msPointer?"MSPointerMove":"pointermove",sn=ht.msPointer?"MSPointerUp":"pointerup",Rn=ht.msPointer?"MSPointerCancel":"pointercancel",or={touchstart:Zt,touchmove:an,touchend:sn,touchcancel:Rn},fr={touchstart:To,touchmove:cr,touchend:cr,touchcancel:cr},ur={},vn=!1;function Nr(f,b,N){return b==="touchstart"&&Bn(),fr[b]?(N=fr[b].bind(this,N),f.addEventListener(or[b],N,!1),N):(console.warn("wrong event specified:",b),y)}function Gr(f,b,N){if(!or[b]){console.warn("wrong event specified:",b);return}f.removeEventListener(or[b],N,!1)}function ji(f){ur[f.pointerId]=f}function bi(f){ur[f.pointerId]&&(ur[f.pointerId]=f)}function Yr(f){delete ur[f.pointerId]}function Bn(){vn||(document.addEventListener(Zt,ji,!0),document.addEventListener(an,bi,!0),document.addEventListener(sn,Yr,!0),document.addEventListener(Rn,Yr,!0),vn=!0)}function cr(f,b){if(b.pointerType!==(b.MSPOINTER_TYPE_MOUSE||"mouse")){b.touches=[];for(var N in ur)b.touches.push(ur[N]);b.changedTouches=[b],f(b)}}function To(f,b){b.MSPOINTER_TYPE_TOUCH&&b.pointerType===b.MSPOINTER_TYPE_TOUCH&&uo(b),cr(f,b)}function sr(f){var b={},N,q;for(q in f)N=f[q],b[q]=N&&N.bind?N.bind(f):N;return f=b,b.type="dblclick",b.detail=2,b.isTrusted=!1,b._simulated=!0,b}var hf=200;function fm(f,b){f.addEventListener("dblclick",b);var N=0,q;function re(me){if(me.detail!==1){q=me.detail;return}if(!(me.pointerType==="mouse"||me.sourceCapabilities&&!me.sourceCapabilities.firesTouchEvents)){var Ce=Xg(me);if(!(Ce.some(function(dt){return dt instanceof HTMLLabelElement&&dt.attributes.for})&&!Ce.some(function(dt){return dt instanceof HTMLInputElement||dt instanceof HTMLSelectElement}))){var We=Date.now();We-N<=hf?(q++,q===2&&b(sr(me))):q=1,N=We}}}return f.addEventListener("click",re),{dblclick:b,simDblclick:re}}function ms(f,b){f.removeEventListener("dblclick",b.dblclick),f.removeEventListener("click",b.simDblclick)}var Co=_l(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),yl=_l(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gs=yl==="webkitTransition"||yl==="OTransition"?yl+"End":"transitionend";function ys(f){return typeof f=="string"?document.getElementById(f):f}function $a(f,b){var N=f.style[b]||f.currentStyle&&f.currentStyle[b];if((!N||N==="auto")&&document.defaultView){var q=document.defaultView.getComputedStyle(f,null);N=q?q[b]:null}return N==="auto"?null:N}function ar(f,b,N){var q=document.createElement(f);return q.className=b||"",N&&N.appendChild(q),q}function jn(f){var b=f.parentNode;b&&b.removeChild(f)}function su(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function _s(f){var b=f.parentNode;b&&b.lastChild!==f&&b.appendChild(f)}function Lr(f){var b=f.parentNode;b&&b.firstChild!==f&&b.insertBefore(f,b.firstChild)}function th(f,b){if(f.classList!==void 0)return f.classList.contains(b);var N=au(f);return N.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(N)}function Cn(f,b){if(f.classList!==void 0)for(var N=P(b),q=0,re=N.length;q<re;q++)f.classList.add(N[q]);else if(!th(f,b)){var me=au(f);Zs(f,(me?me+" ":"")+b)}}function Jr(f,b){f.classList!==void 0?f.classList.remove(b):Zs(f,T((" "+au(f)+" ").replace(" "+b+" "," ")))}function Zs(f,b){f.className.baseVal===void 0?f.className=b:f.className.baseVal=b}function au(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function qn(f,b){"opacity"in f.style?f.style.opacity=b:"filter"in f.style&&Id(f,b)}function Id(f,b){var N=!1,q="DXImageTransform.Microsoft.Alpha";try{N=f.filters.item(q)}catch{if(b===1)return}b=Math.round(b*100),N?(N.Enabled=b!==100,N.Opacity=b):f.style.filter+=" progid:"+q+"(opacity="+b+")"}function _l(f){for(var b=document.documentElement.style,N=0;N<f.length;N++)if(f[N]in b)return f[N];return!1}function Wo(f,b,N){var q=b||new De(0,0);f.style[Co]=(ht.ie3d?"translate("+q.x+"px,"+q.y+"px)":"translate3d("+q.x+"px,"+q.y+"px,0)")+(N?" scale("+N+")":"")}function ii(f,b){f._leaflet_pos=b,ht.any3d?Wo(f,b):(f.style.left=b.x+"px",f.style.top=b.y+"px")}function ca(f){return f._leaflet_pos||new De(0,0)}var ff,nh,rh;if("onselectstart"in document)ff=function(){On(window,"selectstart",uo)},nh=function(){Yn(window,"selectstart",uo)};else{var df=_l(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ff=function(){if(df){var f=document.documentElement.style;rh=f[df],f[df]="none"}},nh=function(){df&&(document.documentElement.style[df]=rh,rh=void 0)}}function Pd(){On(window,"dragstart",uo)}function dm(){Yn(window,"dragstart",uo)}var pf,Ld;function ih(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(mf(),pf=f,Ld=f.style.outlineStyle,f.style.outlineStyle="none",On(window,"keydown",mf))}function mf(){pf&&(pf.style.outlineStyle=Ld,pf=void 0,Ld=void 0,Yn(window,"keydown",mf))}function pm(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function oh(f){var b=f.getBoundingClientRect();return{x:b.width/f.offsetWidth||1,y:b.height/f.offsetHeight||1,boundingClientRect:b}}var Kg={__proto__:null,TRANSFORM:Co,TRANSITION:yl,TRANSITION_END:gs,get:ys,getStyle:$a,create:ar,remove:jn,empty:su,toFront:_s,toBack:Lr,hasClass:th,addClass:Cn,removeClass:Jr,setClass:Zs,getClass:au,setOpacity:qn,testProp:_l,setTransform:Wo,setPosition:ii,getPosition:ca,get disableTextSelection(){return ff},get enableTextSelection(){return nh},disableImageDrag:Pd,enableImageDrag:dm,preventOutline:ih,restoreOutline:mf,getSizedParentNode:pm,getScale:oh};function On(f,b,N,q){if(b&&typeof b=="object")for(var re in b)rc(f,re,b[re],N);else{b=P(b);for(var me=0,Ce=b.length;me<Ce;me++)rc(f,b[me],N,q)}return this}var vs="_leaflet_events";function Yn(f,b,N,q){if(arguments.length===1)sh(f),delete f[vs];else if(b&&typeof b=="object")for(var re in b)ic(f,re,b[re],N);else if(b=P(b),arguments.length===2)sh(f,function(We){return D(b,We)!==-1});else for(var me=0,Ce=b.length;me<Ce;me++)ic(f,b[me],N,q);return this}function sh(f,b){for(var N in f[vs]){var q=N.split(/\d/)[0];(!b||b(q))&&ic(f,q,null,null,N)}}var ah={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function rc(f,b,N,q){var re=b+p(N)+(q?"_"+p(q):"");if(f[vs]&&f[vs][re])return this;var me=function(We){return N.call(q||f,We||window.event)},Ce=me;!ht.touchNative&&ht.pointer&&b.indexOf("touch")===0?me=Nr(f,b,me):ht.touch&&b==="dblclick"?me=fm(f,me):"addEventListener"in f?b==="touchstart"||b==="touchmove"||b==="wheel"||b==="mousewheel"?f.addEventListener(ah[b]||b,me,ht.passiveEvents?{passive:!1}:!1):b==="mouseenter"||b==="mouseleave"?(me=function(We){We=We||window.event,Yi(f,We)&&Ce(We)},f.addEventListener(ah[b],me,!1)):f.addEventListener(b,Ce,!1):f.attachEvent("on"+b,me),f[vs]=f[vs]||{},f[vs][re]=me}function ic(f,b,N,q,re){re=re||b+p(N)+(q?"_"+p(q):"");var me=f[vs]&&f[vs][re];if(!me)return this;!ht.touchNative&&ht.pointer&&b.indexOf("touch")===0?Gr(f,b,me):ht.touch&&b==="dblclick"?ms(f,me):"removeEventListener"in f?f.removeEventListener(ah[b]||b,me,!1):f.detachEvent("on"+b,me),f[vs][re]=null}function ha(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function oc(f){return rc(f,"wheel",ha),this}function gf(f){return On(f,"mousedown touchstart dblclick contextmenu",ha),f._leaflet_disable_click=!0,this}function uo(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function lu(f){return uo(f),ha(f),this}function Xg(f){if(f.composedPath)return f.composedPath();for(var b=[],N=f.target;N;)b.push(N),N=N.parentNode;return b}function uu(f,b){if(!b)return new De(f.clientX,f.clientY);var N=oh(b),q=N.boundingClientRect;return new De((f.clientX-q.left)/N.x-b.clientLeft,(f.clientY-q.top)/N.y-b.clientTop)}var Ad=ht.linux&&ht.chrome?window.devicePixelRatio:ht.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Io(f){return ht.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/Ad:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function Yi(f,b){var N=b.relatedTarget;if(!N)return!0;try{for(;N&&N!==f;)N=N.parentNode}catch{return!1}return N!==f}var hr={__proto__:null,on:On,off:Yn,stopPropagation:ha,disableScrollPropagation:oc,disableClickPropagation:gf,preventDefault:uo,stop:lu,getPropagationPath:Xg,getMousePosition:uu,getWheelDelta:Io,isExternalTarget:Yi,addListener:On,removeListener:Yn},yf=Be.extend({run:function(f,b,N,q){this.stop(),this._el=f,this._inProgress=!0,this._duration=N||.25,this._easeOutPower=1/Math.max(q||.5,.2),this._startPos=ca(f),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(f){var b=+new Date-this._startTime,N=this._duration*1e3;b<N?this._runFrame(this._easeOut(b/N),f):(this._runFrame(1),this._complete())},_runFrame:function(f,b){var N=this._startPos.add(this._offset.multiplyBy(f));b&&N._round(),ii(this._el,N),this.fire("step")},_complete:function(){ee(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),Jn=Be.extend({options:{crs:Ft,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,b){b=A(this,b),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==void 0&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==void 0&&this.setView(be(b.center),b.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=yl&&ht.any3d&&!ht.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),On(this._proxy,gs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,b,N){if(b=b===void 0?this._zoom:this._limitZoom(b),f=this._limitCenter(be(f),b,this.options.maxBounds),N=N||{},this._stop(),this._loaded&&!N.reset&&N!==!0){N.animate!==void 0&&(N.zoom=i({animate:N.animate},N.zoom),N.pan=i({animate:N.animate,duration:N.duration},N.pan));var q=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,b,N.zoom):this._tryAnimatedPan(f,N.pan);if(q)return clearTimeout(this._sizeTimer),this}return this._resetView(f,b,N.pan&&N.pan.noMoveStart),this},setZoom:function(f,b){return this._loaded?this.setView(this.getCenter(),f,{zoom:b}):(this._zoom=f,this)},zoomIn:function(f,b){return f=f||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,b)},zoomOut:function(f,b){return f=f||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,b)},setZoomAround:function(f,b,N){var q=this.getZoomScale(b),re=this.getSize().divideBy(2),me=f instanceof De?f:this.latLngToContainerPoint(f),Ce=me.subtract(re).multiplyBy(1-1/q),We=this.containerPointToLatLng(re.add(Ce));return this.setView(We,b,{zoom:N})},_getBoundsCenterZoom:function(f,b){b=b||{},f=f.getBounds?f.getBounds():Ge(f);var N=ve(b.paddingTopLeft||b.padding||[0,0]),q=ve(b.paddingBottomRight||b.padding||[0,0]),re=this.getBoundsZoom(f,!1,N.add(q));if(re=typeof b.maxZoom=="number"?Math.min(b.maxZoom,re):re,re===1/0)return{center:f.getCenter(),zoom:re};var me=q.subtract(N).divideBy(2),Ce=this.project(f.getSouthWest(),re),We=this.project(f.getNorthEast(),re),dt=this.unproject(Ce.add(We).divideBy(2).add(me),re);return{center:dt,zoom:re}},fitBounds:function(f,b){if(f=Ge(f),!f.isValid())throw new Error("Bounds are not valid.");var N=this._getBoundsCenterZoom(f,b);return this.setView(N.center,N.zoom,b)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,b){return this.setView(f,this._zoom,{pan:b})},panBy:function(f,b){if(f=ve(f).round(),b=b||{},!f.x&&!f.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new yf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){Cn(this._mapPane,"leaflet-pan-anim");var N=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,N,b.duration||.25,b.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,b,N){if(N=N||{},N.animate===!1||!ht.any3d)return this.setView(f,b,N);this._stop();var q=this.project(this.getCenter()),re=this.project(f),me=this.getSize(),Ce=this._zoom;f=be(f),b=b===void 0?Ce:b;var We=Math.max(me.x,me.y),dt=We*this.getZoomScale(Ce,b),It=re.distanceTo(q)||1,tn=1.42,hn=tn*tn;function Zn(Qr){var gc=Qr?-1:1,Am=Qr?dt:We,Om=dt*dt-We*We+gc*hn*hn*It*It,wl=2*Am*hn*It,bh=Om/wl,wh=Math.sqrt(bh*bh+1)-bh,qd=wh<1e-9?-18:Math.log(wh);return qd}function Hr(Qr){return(Math.exp(Qr)-Math.exp(-Qr))/2}function $i(Qr){return(Math.exp(Qr)+Math.exp(-Qr))/2}function Po(Qr){return Hr(Qr)/$i(Qr)}var nr=Zn(0);function $r(Qr){return We*($i(nr)/$i(nr+tn*Qr))}function iy(Qr){return We*($i(nr)*Po(nr+tn*Qr)-Hr(nr))/hn}function Rf(Qr){return 1-Math.pow(1-Qr,1.5)}var bl=Date.now(),Ud=(Zn(1)-nr)/tn,Lm=N.duration?1e3*N.duration:1e3*Ud*.8;function Vd(){var Qr=(Date.now()-bl)/Lm,gc=Rf(Qr)*Ud;Qr<=1?(this._flyToFrame=X(Vd,this),this._move(this.unproject(q.add(re.subtract(q).multiplyBy(iy(gc)/It)),Ce),this.getScaleZoom(We/$r(gc),Ce),{flyTo:!0})):this._move(f,b)._moveEnd(!0)}return this._moveStart(!0,N.noMoveStart),Vd.call(this),this},flyToBounds:function(f,b){var N=this._getBoundsCenterZoom(f,b);return this.flyTo(N.center,N.zoom,b)},setMaxBounds:function(f){return f=Ge(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var b=this.options.minZoom;return this.options.minZoom=f,this._loaded&&b!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var b=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&b!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,b){this._enforcingBounds=!0;var N=this.getCenter(),q=this._limitCenter(N,this._zoom,Ge(f));return N.equals(q)||this.panTo(q,b),this._enforcingBounds=!1,this},panInside:function(f,b){b=b||{};var N=ve(b.paddingTopLeft||b.padding||[0,0]),q=ve(b.paddingBottomRight||b.padding||[0,0]),re=this.project(this.getCenter()),me=this.project(f),Ce=this.getPixelBounds(),We=xe([Ce.min.add(N),Ce.max.subtract(q)]),dt=We.getSize();if(!We.contains(me)){this._enforcingBounds=!0;var It=me.subtract(We.getCenter()),tn=We.extend(me).getSize().subtract(dt);re.x+=It.x<0?-tn.x:tn.x,re.y+=It.y<0?-tn.y:tn.y,this.panTo(this.unproject(re),b),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=i({animate:!1,pan:!0},f===!0?{animate:!0}:f);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var N=this.getSize(),q=b.divideBy(2).round(),re=N.divideBy(2).round(),me=q.subtract(re);return!me.x&&!me.y?this:(f.animate&&f.pan?this.panBy(me):(f.pan&&this._rawPanBy(me),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:N}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=i({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=u(this._handleGeolocationResponse,this),N=u(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,N,f):navigator.geolocation.getCurrentPosition(b,N,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var b=f.code,N=f.message||(b===1?"permission denied":b===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+N+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var b=f.coords.latitude,N=f.coords.longitude,q=new $e(b,N),re=q.toBounds(f.coords.accuracy*2),me=this._locateOptions;if(me.setView){var Ce=this.getBoundsZoom(re);this.setView(q,me.maxZoom?Math.min(Ce,me.maxZoom):Ce)}var We={latlng:q,bounds:re,timestamp:f.timestamp};for(var dt in f.coords)typeof f.coords[dt]=="number"&&(We[dt]=f.coords[dt]);this.fire("locationfound",We)}},addHandler:function(f,b){if(!b)return this;var N=this[f]=new b(this);return this._handlers.push(N),this.options[f]&&N.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),jn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ee(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)jn(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,b){var N="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),q=ar("div",N,b||this._mapPane);return f&&(this._panes[f]=q),q},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),b=this.unproject(f.getBottomLeft()),N=this.unproject(f.getTopRight());return new Ee(b,N)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,b,N){f=Ge(f),N=ve(N||[0,0]);var q=this.getZoom()||0,re=this.getMinZoom(),me=this.getMaxZoom(),Ce=f.getNorthWest(),We=f.getSouthEast(),dt=this.getSize().subtract(N),It=xe(this.project(We,q),this.project(Ce,q)).getSize(),tn=ht.any3d?this.options.zoomSnap:1,hn=dt.x/It.x,Zn=dt.y/It.y,Hr=b?Math.max(hn,Zn):Math.min(hn,Zn);return q=this.getScaleZoom(Hr,q),tn&&(q=Math.round(q/(tn/100))*(tn/100),q=b?Math.ceil(q/tn)*tn:Math.floor(q/tn)*tn),Math.max(re,Math.min(me,q))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new De(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,b){var N=this._getTopLeftPoint(f,b);return new he(N,N.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,b){var N=this.options.crs;return b=b===void 0?this._zoom:b,N.scale(f)/N.scale(b)},getScaleZoom:function(f,b){var N=this.options.crs;b=b===void 0?this._zoom:b;var q=N.zoom(f*N.scale(b));return isNaN(q)?1/0:q},project:function(f,b){return b=b===void 0?this._zoom:b,this.options.crs.latLngToPoint(be(f),b)},unproject:function(f,b){return b=b===void 0?this._zoom:b,this.options.crs.pointToLatLng(ve(f),b)},layerPointToLatLng:function(f){var b=ve(f).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(f){var b=this.project(be(f))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(be(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(Ge(f))},distance:function(f,b){return this.options.crs.distance(be(f),be(b))},containerPointToLayerPoint:function(f){return ve(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return ve(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var b=this.containerPointToLayerPoint(ve(f));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(be(f)))},mouseEventToContainerPoint:function(f){return uu(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var b=this._container=ys(f);if(b){if(b._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");On(b,"scroll",this._onScroll,this),this._containerId=p(b)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&ht.any3d,Cn(f,"leaflet-container"+(ht.touch?" leaflet-touch":"")+(ht.retina?" leaflet-retina":"")+(ht.ielt9?" leaflet-oldie":"")+(ht.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=$a(f,"position");b!=="absolute"&&b!=="relative"&&b!=="fixed"&&b!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ii(this._mapPane,new De(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Cn(f.markerPane,"leaflet-zoom-hide"),Cn(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,b,N){ii(this._mapPane,new De(0,0));var q=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var re=this._zoom!==b;this._moveStart(re,N)._move(f,b)._moveEnd(re),this.fire("viewreset"),q&&this.fire("load")},_moveStart:function(f,b){return f&&this.fire("zoomstart"),b||this.fire("movestart"),this},_move:function(f,b,N,q){b===void 0&&(b=this._zoom);var re=this._zoom!==b;return this._zoom=b,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),q?N&&N.pinch&&this.fire("zoom",N):((re||N&&N.pinch)&&this.fire("zoom",N),this.fire("move",N)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ee(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){ii(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[p(this._container)]=this;var b=f?Yn:On;b(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&b(window,"resize",this._onResize,this),ht.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ee(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,b){for(var N=[],q,re=b==="mouseout"||b==="mouseover",me=f.target||f.srcElement,Ce=!1;me;){if(q=this._targets[p(me)],q&&(b==="click"||b==="preclick")&&this._draggableMoved(q)){Ce=!0;break}if(q&&q.listens(b,!0)&&(re&&!Yi(me,f)||(N.push(q),re))||me===this._container)break;me=me.parentNode}return!N.length&&!Ce&&!re&&this.listens(b,!0)&&(N=[this]),N},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var b=f.target||f.srcElement;if(!(!this._loaded||b._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(b))){var N=f.type;N==="mousedown"&&ih(b),this._fireDOMEvent(f,N)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,b,N){if(f.type==="click"){var q=i({},f);q.type="preclick",this._fireDOMEvent(q,q.type,N)}var re=this._findEventTargets(f,b);if(N){for(var me=[],Ce=0;Ce<N.length;Ce++)N[Ce].listens(b,!0)&&me.push(N[Ce]);re=me.concat(re)}if(re.length){b==="contextmenu"&&uo(f);var We=re[0],dt={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var It=We.getLatLng&&(!We._radius||We._radius<=10);dt.containerPoint=It?this.latLngToContainerPoint(We.getLatLng()):this.mouseEventToContainerPoint(f),dt.layerPoint=this.containerPointToLayerPoint(dt.containerPoint),dt.latlng=It?We.getLatLng():this.layerPointToLatLng(dt.layerPoint)}for(Ce=0;Ce<re.length;Ce++)if(re[Ce].fire(b,dt,!0),dt.originalEvent._stopped||re[Ce].options.bubblingMouseEvents===!1&&D(this._mouseEvents,b)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,b=this._handlers.length;f<b;f++)this._handlers[f].disable()},whenReady:function(f,b){return this._loaded?f.call(b||this,{target:this}):this.on("load",f,b),this},_getMapPanePos:function(){return ca(this._mapPane)||new De(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,b){var N=f&&b!==void 0?this._getNewPixelOrigin(f,b):this.getPixelOrigin();return N.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,b){var N=this.getSize()._divideBy(2);return this.project(f,b)._subtract(N)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,b,N){var q=this._getNewPixelOrigin(N,b);return this.project(f,b)._subtract(q)},_latLngBoundsToNewLayerBounds:function(f,b,N){var q=this._getNewPixelOrigin(N,b);return xe([this.project(f.getSouthWest(),b)._subtract(q),this.project(f.getNorthWest(),b)._subtract(q),this.project(f.getSouthEast(),b)._subtract(q),this.project(f.getNorthEast(),b)._subtract(q)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,b,N){if(!N)return f;var q=this.project(f,b),re=this.getSize().divideBy(2),me=new he(q.subtract(re),q.add(re)),Ce=this._getBoundsOffset(me,N,b);return Math.abs(Ce.x)<=1&&Math.abs(Ce.y)<=1?f:this.unproject(q.add(Ce),b)},_limitOffset:function(f,b){if(!b)return f;var N=this.getPixelBounds(),q=new he(N.min.add(f),N.max.add(f));return f.add(this._getBoundsOffset(q,b))},_getBoundsOffset:function(f,b,N){var q=xe(this.project(b.getNorthEast(),N),this.project(b.getSouthWest(),N)),re=q.min.subtract(f.min),me=q.max.subtract(f.max),Ce=this._rebound(re.x,-me.x),We=this._rebound(re.y,-me.y);return new De(Ce,We)},_rebound:function(f,b){return f+b>0?Math.round(f-b)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(b))},_limitZoom:function(f){var b=this.getMinZoom(),N=this.getMaxZoom(),q=ht.any3d?this.options.zoomSnap:1;return q&&(f=Math.round(f/q)*q),Math.max(b,Math.min(N,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Jr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,b){var N=this._getCenterOffset(f)._trunc();return(b&&b.animate)!==!0&&!this.getSize().contains(N)?!1:(this.panBy(N,b),!0)},_createAnimProxy:function(){var f=this._proxy=ar("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(b){var N=Co,q=this._proxy.style[N];Wo(this._proxy,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),q===this._proxy.style[N]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){jn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),b=this.getZoom();Wo(this._proxy,this.project(f,b),this.getZoomScale(b,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,b,N){if(this._animatingZoom)return!0;if(N=N||{},!this._zoomAnimated||N.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var q=this.getZoomScale(b),re=this._getCenterOffset(f)._divideBy(1-1/q);return N.animate!==!0&&!this.getSize().contains(re)?!1:(X(function(){this._moveStart(!0,N.noMoveStart||!1)._animateZoom(f,b,!0)},this),!0)},_animateZoom:function(f,b,N,q){this._mapPane&&(N&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=b,Cn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:b,noUpdate:q}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Jr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function mm(f,b){return new Jn(f,b)}var xs=oe.extend({options:{position:"topright"},initialize:function(f){A(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var b=this._map;return b&&b.removeControl(this),this.options.position=f,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var b=this._container=this.onAdd(f),N=this.getPosition(),q=f._controlCorners[N];return Cn(b,"leaflet-control"),N.indexOf("bottom")!==-1?q.insertBefore(b,q.firstChild):q.appendChild(b),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(jn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),cu=function(f){return new xs(f)};Jn.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},b="leaflet-",N=this._controlContainer=ar("div",b+"control-container",this._container);function q(re,me){var Ce=b+re+" "+b+me;f[re+me]=ar("div",Ce,N)}q("top","left"),q("top","right"),q("bottom","left"),q("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)jn(this._controlCorners[f]);jn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Od=xs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,b,N,q){return N<q?-1:q<N?1:0}},initialize:function(f,b,N){A(this,N),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var q in f)this._addLayer(f[q],q);for(q in b)this._addLayer(b[q],q,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var b=0;b<this._layers.length;b++)this._layers[b].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return xs.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,b){return this._addLayer(f,b),this._map?this._update():this},addOverlay:function(f,b){return this._addLayer(f,b,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var b=this._getLayer(p(f));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){Cn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(Cn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):Jr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Jr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",b=this._container=ar("div",f),N=this.options.collapsed;b.setAttribute("aria-haspopup",!0),gf(b),oc(b);var q=this._section=ar("section",f+"-list");N&&(this._map.on("click",this.collapse,this),On(b,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var re=this._layersLink=ar("a",f+"-toggle",b);re.href="#",re.title="Layers",re.setAttribute("role","button"),On(re,{keydown:function(me){me.keyCode===13&&this._expandSafely()},click:function(me){uo(me),this._expandSafely()}},this),N||this.expand(),this._baseLayersList=ar("div",f+"-base",q),this._separator=ar("div",f+"-separator",q),this._overlaysList=ar("div",f+"-overlays",q),b.appendChild(q)},_getLayer:function(f){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&p(this._layers[b].layer)===f)return this._layers[b]},_addLayer:function(f,b,N){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:b,overlay:N}),this.options.sortLayers&&this._layers.sort(u(function(q,re){return this.options.sortFunction(q.layer,re.layer,q.name,re.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;su(this._baseLayersList),su(this._overlaysList),this._layerControlInputs=[];var f,b,N,q,re=0;for(N=0;N<this._layers.length;N++)q=this._layers[N],this._addItem(q),b=b||q.overlay,f=f||!q.overlay,re+=q.overlay?0:1;return this.options.hideSingleBase&&(f=f&&re>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=b&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var b=this._getLayer(p(f.target)),N=b.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;N&&this._map.fire(N,b)},_createRadioElement:function(f,b){var N='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(b?' checked="checked"':"")+"/>",q=document.createElement("div");return q.innerHTML=N,q.firstChild},_addItem:function(f){var b=document.createElement("label"),N=this._map.hasLayer(f.layer),q;f.overlay?(q=document.createElement("input"),q.type="checkbox",q.className="leaflet-control-layers-selector",q.defaultChecked=N):q=this._createRadioElement("leaflet-base-layers_"+p(this),N),this._layerControlInputs.push(q),q.layerId=p(f.layer),On(q,"click",this._onInputClick,this);var re=document.createElement("span");re.innerHTML=" "+f.name;var me=document.createElement("span");b.appendChild(me),me.appendChild(q),me.appendChild(re);var Ce=f.overlay?this._overlaysList:this._baseLayersList;return Ce.appendChild(b),this._checkDisabledLayers(),b},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,b,N,q=[],re=[];this._handlingClick=!0;for(var me=f.length-1;me>=0;me--)b=f[me],N=this._getLayer(b.layerId).layer,b.checked?q.push(N):b.checked||re.push(N);for(me=0;me<re.length;me++)this._map.hasLayer(re[me])&&this._map.removeLayer(re[me]);for(me=0;me<q.length;me++)this._map.hasLayer(q[me])||this._map.addLayer(q[me]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,b,N,q=this._map.getZoom(),re=f.length-1;re>=0;re--)b=f[re],N=this._getLayer(b.layerId).layer,b.disabled=N.options.minZoom!==void 0&&q<N.options.minZoom||N.options.maxZoom!==void 0&&q>N.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,On(f,"click",uo),this.expand();var b=this;setTimeout(function(){Yn(f,"click",uo),b._preventClick=!1})}}),gm=function(f,b,N){return new Od(f,b,N)},lh=xs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var b="leaflet-control-zoom",N=ar("div",b+" leaflet-bar"),q=this.options;return this._zoomInButton=this._createButton(q.zoomInText,q.zoomInTitle,b+"-in",N,this._zoomIn),this._zoomOutButton=this._createButton(q.zoomOutText,q.zoomOutTitle,b+"-out",N,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),N},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,b,N,q,re){var me=ar("a",N,q);return me.innerHTML=f,me.href="#",me.title=b,me.setAttribute("role","button"),me.setAttribute("aria-label",b),gf(me),On(me,"click",lu),On(me,"click",re,this),On(me,"click",this._refocusOnMap,this),me},_updateDisabled:function(){var f=this._map,b="leaflet-disabled";Jr(this._zoomInButton,b),Jr(this._zoomOutButton,b),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(Cn(this._zoomOutButton,b),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(Cn(this._zoomInButton,b),this._zoomInButton.setAttribute("aria-disabled","true"))}});Jn.mergeOptions({zoomControl:!0}),Jn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new lh,this.addControl(this.zoomControl))});var Yg=function(f){return new lh(f)},ym=xs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var b="leaflet-control-scale",N=ar("div",b),q=this.options;return this._addScales(q,b+"-line",N),f.on(q.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),N},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,b,N){f.metric&&(this._mScale=ar("div",b,N)),f.imperial&&(this._iScale=ar("div",b,N))},_update:function(){var f=this._map,b=f.getSize().y/2,N=f.distance(f.containerPointToLatLng([0,b]),f.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(N)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var b=this._getRoundNum(f),N=b<1e3?b+" m":b/1e3+" km";this._updateScale(this._mScale,N,b/f)},_updateImperial:function(f){var b=f*3.2808399,N,q,re;b>5280?(N=b/5280,q=this._getRoundNum(N),this._updateScale(this._iScale,q+" mi",q/N)):(re=this._getRoundNum(b),this._updateScale(this._iScale,re+" ft",re/b))},_updateScale:function(f,b,N){f.style.width=Math.round(this.options.maxWidth*N)+"px",f.innerHTML=b},_getRoundNum:function(f){var b=Math.pow(10,(Math.floor(f)+"").length-1),N=f/b;return N=N>=10?10:N>=5?5:N>=3?3:N>=2?2:1,b*N}}),uh=function(f){return new ym(f)},xv='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',_m=xs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ht.inlineSvg?xv+" ":"")+"Leaflet</a>"},initialize:function(f){A(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=ar("div","leaflet-control-attribution"),gf(this._container);for(var b in f._layers)f._layers[b].getAttribution&&this.addAttribution(f._layers[b].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var b in this._attributions)this._attributions[b]&&f.push(b);var N=[];this.options.prefix&&N.push(this.options.prefix),f.length&&N.push(f.join(", ")),this._container.innerHTML=N.join(' <span aria-hidden="true">|</span> ')}}});Jn.mergeOptions({attributionControl:!0}),Jn.addInitHook(function(){this.options.attributionControl&&new _m().addTo(this)});var bv=function(f){return new _m(f)};xs.Layers=Od,xs.Zoom=lh,xs.Scale=ym,xs.Attribution=_m,cu.layers=gm,cu.zoom=Yg,cu.scale=uh,cu.attribution=bv;var Ua=oe.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ua.addTo=function(f,b){return f.addHandler(b,this),this};var wv={Events:Ne},Jg=ht.touch?"touchstart mousedown":"mousedown",Va=Be.extend({options:{clickTolerance:3},initialize:function(f,b,N,q){A(this,q),this._element=f,this._dragStartTarget=b||f,this._preventOutline=N},enable:function(){this._enabled||(On(this._dragStartTarget,Jg,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Va._dragging===this&&this.finishDrag(!0),Yn(this._dragStartTarget,Jg,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!th(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){Va._dragging===this&&this.finishDrag();return}if(!(Va._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(Va._dragging=this,this._preventOutline&&ih(this._element),Pd(),ff(),!this._moving)){this.fire("down");var b=f.touches?f.touches[0]:f,N=pm(this._element);this._startPoint=new De(b.clientX,b.clientY),this._startPos=ca(this._element),this._parentScale=oh(N);var q=f.type==="mousedown";On(document,q?"mousemove":"touchmove",this._onMove,this),On(document,q?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var b=f.touches&&f.touches.length===1?f.touches[0]:f,N=new De(b.clientX,b.clientY)._subtract(this._startPoint);!N.x&&!N.y||Math.abs(N.x)+Math.abs(N.y)<this.options.clickTolerance||(N.x/=this._parentScale.x,N.y/=this._parentScale.y,uo(f),this._moved||(this.fire("dragstart"),this._moved=!0,Cn(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Cn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(N),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),ii(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){Jr(document.body,"leaflet-dragging"),this._lastTarget&&(Jr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yn(document,"mousemove touchmove",this._onMove,this),Yn(document,"mouseup touchend touchcancel",this._onUp,this),dm(),nh();var b=this._moved&&this._moving;this._moving=!1,Va._dragging=!1,b&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function _f(f,b,N){var q,re=[1,4,2,8],me,Ce,We,dt,It,tn,hn,Zn;for(me=0,tn=f.length;me<tn;me++)f[me]._code=$n(f[me],b);for(We=0;We<4;We++){for(hn=re[We],q=[],me=0,tn=f.length,Ce=tn-1;me<tn;Ce=me++)dt=f[me],It=f[Ce],dt._code&hn?It._code&hn||(Zn=fh(It,dt,hn,b,N),Zn._code=$n(Zn,b),q.push(Zn)):(It._code&hn&&(Zn=fh(It,dt,hn,b,N),Zn._code=$n(Zn,b),q.push(Zn)),q.push(dt));f=q}return f}function kd(f,b){var N,q,re,me,Ce,We,dt,It,tn;if(!f||f.length===0)throw new Error("latlngs not passed");bs(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var hn=be([0,0]),Zn=Ge(f),Hr=Zn.getNorthWest().distanceTo(Zn.getSouthWest())*Zn.getNorthEast().distanceTo(Zn.getNorthWest());Hr<1700&&(hn=vf(f));var $i=f.length,Po=[];for(N=0;N<$i;N++){var nr=be(f[N]);Po.push(b.project(be([nr.lat-hn.lat,nr.lng-hn.lng])))}for(We=dt=It=0,N=0,q=$i-1;N<$i;q=N++)re=Po[N],me=Po[q],Ce=re.y*me.x-me.y*re.x,dt+=(re.x+me.x)*Ce,It+=(re.y+me.y)*Ce,We+=Ce*3;We===0?tn=Po[0]:tn=[dt/We,It/We];var $r=b.unproject(ve(tn));return be([$r.lat+hn.lat,$r.lng+hn.lng])}function vf(f){for(var b=0,N=0,q=0,re=0;re<f.length;re++){var me=be(f[re]);b+=me.lat,N+=me.lng,q++}return be([b/q,N/q])}var ch={__proto__:null,clipPolygon:_f,polygonCenter:kd,centroid:vf};function vm(f,b){if(!b||!f.length)return f.slice();var N=b*b;return f=hh(f,N),f=sc(f,N),f}function xm(f,b,N){return Math.sqrt(xf(f,b,N,!0))}function bm(f,b,N){return xf(f,b,N)}function sc(f,b){var N=f.length,q=typeof Uint8Array<"u"?Uint8Array:Array,re=new q(N);re[0]=re[N-1]=1,Rd(f,re,b,0,N-1);var me,Ce=[];for(me=0;me<N;me++)re[me]&&Ce.push(f[me]);return Ce}function Rd(f,b,N,q,re){var me=0,Ce,We,dt;for(We=q+1;We<=re-1;We++)dt=xf(f[We],f[q],f[re],!0),dt>me&&(Ce=We,me=dt);me>N&&(b[Ce]=1,Rd(f,b,N,q,Ce),Rd(f,b,N,Ce,re))}function hh(f,b){for(var N=[f[0]],q=1,re=0,me=f.length;q<me;q++)Md(f[q],f[re])>b&&(N.push(f[q]),re=q);return re<me-1&&N.push(f[me-1]),N}var ac;function wm(f,b,N,q,re){var me=q?ac:$n(f,N),Ce=$n(b,N),We,dt,It;for(ac=Ce;;){if(!(me|Ce))return[f,b];if(me&Ce)return!1;We=me||Ce,dt=fh(f,b,We,N,re),It=$n(dt,N),We===me?(f=dt,me=It):(b=dt,Ce=It)}}function fh(f,b,N,q,re){var me=b.x-f.x,Ce=b.y-f.y,We=q.min,dt=q.max,It,tn;return N&8?(It=f.x+me*(dt.y-f.y)/Ce,tn=dt.y):N&4?(It=f.x+me*(We.y-f.y)/Ce,tn=We.y):N&2?(It=dt.x,tn=f.y+Ce*(dt.x-f.x)/me):N&1&&(It=We.x,tn=f.y+Ce*(We.x-f.x)/me),new De(It,tn,re)}function $n(f,b){var N=0;return f.x<b.min.x?N|=1:f.x>b.max.x&&(N|=2),f.y<b.min.y?N|=4:f.y>b.max.y&&(N|=8),N}function Md(f,b){var N=b.x-f.x,q=b.y-f.y;return N*N+q*q}function xf(f,b,N,q){var re=b.x,me=b.y,Ce=N.x-re,We=N.y-me,dt=Ce*Ce+We*We,It;return dt>0&&(It=((f.x-re)*Ce+(f.y-me)*We)/dt,It>1?(re=N.x,me=N.y):It>0&&(re+=Ce*It,me+=We*It)),Ce=f.x-re,We=f.y-me,q?Ce*Ce+We*We:new De(re,me)}function bs(f){return!z(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function dh(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),bs(f)}function hi(f,b){var N,q,re,me,Ce,We,dt,It;if(!f||f.length===0)throw new Error("latlngs not passed");bs(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var tn=be([0,0]),hn=Ge(f),Zn=hn.getNorthWest().distanceTo(hn.getSouthWest())*hn.getNorthEast().distanceTo(hn.getNorthWest());Zn<1700&&(tn=vf(f));var Hr=f.length,$i=[];for(N=0;N<Hr;N++){var Po=be(f[N]);$i.push(b.project(be([Po.lat-tn.lat,Po.lng-tn.lng])))}for(N=0,q=0;N<Hr-1;N++)q+=$i[N].distanceTo($i[N+1])/2;if(q===0)It=$i[0];else for(N=0,me=0;N<Hr-1;N++)if(Ce=$i[N],We=$i[N+1],re=Ce.distanceTo(We),me+=re,me>q){dt=(me-q)/re,It=[We.x-dt*(We.x-Ce.x),We.y-dt*(We.y-Ce.y)];break}var nr=b.unproject(ve(It));return be([nr.lat+tn.lat,nr.lng+tn.lng])}var Ev={__proto__:null,simplify:vm,pointToSegmentDistance:xm,closestPointOnSegment:bm,clipSegment:wm,_getEdgeIntersection:fh,_getBitCode:$n,_sqClosestPointOnSegment:xf,isFlat:bs,_flat:dh,polylineCenter:hi},Hn={project:function(f){return new De(f.lng,f.lat)},unproject:function(f){return new $e(f.y,f.x)},bounds:new he([-180,-90],[180,90])},bf={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var b=Math.PI/180,N=this.R,q=f.lat*b,re=this.R_MINOR/N,me=Math.sqrt(1-re*re),Ce=me*Math.sin(q),We=Math.tan(Math.PI/4-q/2)/Math.pow((1-Ce)/(1+Ce),me/2);return q=-N*Math.log(Math.max(We,1e-10)),new De(f.lng*b*N,q)},unproject:function(f){for(var b=180/Math.PI,N=this.R,q=this.R_MINOR/N,re=Math.sqrt(1-q*q),me=Math.exp(-f.y/N),Ce=Math.PI/2-2*Math.atan(me),We=0,dt=.1,It;We<15&&Math.abs(dt)>1e-7;We++)It=re*Math.sin(Ce),It=Math.pow((1-It)/(1+It),re/2),dt=Math.PI/2-2*Math.atan(me*It)-Ce,Ce+=dt;return new $e(Ce*b,f.x*b/N)}},Br={__proto__:null,LonLat:Hn,Mercator:bf,SphericalMercator:xt},kr=i({},it,{code:"EPSG:3395",projection:bf,transformation:function(){var f=.5/(Math.PI*bf.R);return Qt(f,.5,-f,.5)}()}),hu=i({},it,{code:"EPSG:4326",projection:Hn,transformation:Qt(1/180,1,-1/180,.5)}),Nd=i({},He,{projection:Hn,transformation:Qt(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,b){var N=b.lng-f.lng,q=b.lat-f.lat;return Math.sqrt(N*N+q*q)},infinite:!0});He.Earth=it,He.EPSG3395=kr,He.EPSG3857=Ft,He.EPSG900913=Kt,He.EPSG4326=hu,He.Simple=Nd;var ws=Be.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[p(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[p(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var b=f.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var N=this.getEvents();b.on(N,this),this.once("remove",function(){b.off(N,this)},this)}this.onAdd(b),this.fire("add"),b.fire("layeradd",{layer:this})}}});Jn.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var b=p(f);return this._layers[b]?this:(this._layers[b]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var b=p(f);return this._layers[b]?(this._loaded&&f.onRemove(this),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return p(f)in this._layers},eachLayer:function(f,b){for(var N in this._layers)f.call(b,this._layers[N]);return this},_addLayers:function(f){f=f?z(f)?f:[f]:[];for(var b=0,N=f.length;b<N;b++)this.addLayer(f[b])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[p(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var b=p(f);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,b=-1/0,N=this._getZoomSpan();for(var q in this._zoomBoundLayers){var re=this._zoomBoundLayers[q].options;f=re.minZoom===void 0?f:Math.min(f,re.minZoom),b=re.maxZoom===void 0?b:Math.max(b,re.maxZoom)}this._layersMaxZoom=b===-1/0?void 0:b,this._layersMinZoom=f===1/0?void 0:f,N!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var lc=ws.extend({initialize:function(f,b){A(this,b),this._layers={};var N,q;if(f)for(N=0,q=f.length;N<q;N++)this.addLayer(f[N])},addLayer:function(f){var b=this.getLayerId(f);return this._layers[b]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var b=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(f){var b=typeof f=="number"?f:this.getLayerId(f);return b in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var b=Array.prototype.slice.call(arguments,1),N,q;for(N in this._layers)q=this._layers[N],q[f]&&q[f].apply(q,b);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,b){for(var N in this._layers)f.call(b,this._layers[N]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return p(f)}}),Dd=function(f,b){return new lc(f,b)},Ws=lc.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),lc.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),lc.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new Ee;for(var b in this._layers){var N=this._layers[b];f.extend(N.getBounds?N.getBounds():N.getLatLng())}return f}}),zd=function(f,b){return new Ws(f,b)},uc=oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){A(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,b){var N=this._getIconUrl(f);if(!N){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var q=this._createImg(N,b&&b.tagName==="IMG"?b:null);return this._setIconStyles(q,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(q.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),q},_setIconStyles:function(f,b){var N=this.options,q=N[b+"Size"];typeof q=="number"&&(q=[q,q]);var re=ve(q),me=ve(b==="shadow"&&N.shadowAnchor||N.iconAnchor||re&&re.divideBy(2,!0));f.className="leaflet-marker-"+b+" "+(N.className||""),me&&(f.style.marginLeft=-me.x+"px",f.style.marginTop=-me.y+"px"),re&&(f.style.width=re.x+"px",f.style.height=re.y+"px")},_createImg:function(f,b){return b=b||document.createElement("img"),b.src=f,b},_getIconUrl:function(f){return ht.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function Fd(f){return new uc(f)}var ph=uc.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof ph.imagePath!="string"&&(ph.imagePath=this._detectIconPath()),(this.options.imagePath||ph.imagePath)+uc.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var b=function(N,q,re){var me=q.exec(N);return me&&me[re]};return f=b(f,/^url\((['"])?(.+)\1\)$/,2),f&&b(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=ar("div","leaflet-default-icon-path",document.body),b=$a(f,"background-image")||$a(f,"backgroundImage");if(document.body.removeChild(f),b=this._stripUrl(b),b)return b;var N=document.querySelector('link[href$="leaflet.css"]');return N?N.href.substring(0,N.href.length-11-1):""}}),wf=Ua.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new Va(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Cn(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Jr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var b=this._marker,N=b._map,q=this._marker.options.autoPanSpeed,re=this._marker.options.autoPanPadding,me=ca(b._icon),Ce=N.getPixelBounds(),We=N.getPixelOrigin(),dt=xe(Ce.min._subtract(We).add(re),Ce.max._subtract(We).subtract(re));if(!dt.contains(me)){var It=ve((Math.max(dt.max.x,me.x)-dt.max.x)/(Ce.max.x-dt.max.x)-(Math.min(dt.min.x,me.x)-dt.min.x)/(Ce.min.x-dt.min.x),(Math.max(dt.max.y,me.y)-dt.max.y)/(Ce.max.y-dt.max.y)-(Math.min(dt.min.y,me.y)-dt.min.y)/(Ce.min.y-dt.min.y)).multiplyBy(q);N.panBy(It,{animate:!1}),this._draggable._newPos._add(It),this._draggable._startPos._add(It),ii(b._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=X(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(ee(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,f)))},_onDrag:function(f){var b=this._marker,N=b._shadow,q=ca(b._icon),re=b._map.layerPointToLatLng(q);N&&ii(N,q),b._latlng=re,f.latlng=re,f.oldLatLng=this._oldLatLng,b.fire("move",f).fire("drag",f)},_onDragEnd:function(f){ee(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),cc=ws.extend({options:{icon:new ph,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,b){A(this,b),this._latlng=be(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var b=this._latlng;return this._latlng=be(f),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),N=f.icon.createIcon(this._icon),q=!1;N!==this._icon&&(this._icon&&this._removeIcon(),q=!0,f.title&&(N.title=f.title),N.tagName==="IMG"&&(N.alt=f.alt||"")),Cn(N,b),f.keyboard&&(N.tabIndex="0",N.setAttribute("role","button")),this._icon=N,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&On(N,"focus",this._panOnFocus,this);var re=f.icon.createShadow(this._shadow),me=!1;re!==this._shadow&&(this._removeShadow(),me=!0),re&&(Cn(re,b),re.alt=""),this._shadow=re,f.opacity<1&&this._updateOpacity(),q&&this.getPane().appendChild(this._icon),this._initInteraction(),re&&me&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yn(this._icon,"focus",this._panOnFocus,this),jn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&jn(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&ii(this._icon,f),this._shadow&&ii(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var b=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(Cn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),wf)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new wf(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&qn(this._icon,f),this._shadow&&qn(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var b=this.options.icon.options,N=b.iconSize?ve(b.iconSize):ve(0,0),q=b.iconAnchor?ve(b.iconAnchor):ve(0,0);f.panInside(this._latlng,{paddingTopLeft:q,paddingBottomRight:N.subtract(q)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Em(f,b){return new cc(f,b)}var vl=ws.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return A(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ef=vl.extend({options:{fill:!0,radius:10},initialize:function(f,b){A(this,b),this._latlng=be(f),this._radius=this.options.radius},setLatLng:function(f){var b=this._latlng;return this._latlng=be(f),this.redraw(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var b=f&&f.radius||this._radius;return vl.prototype.setStyle.call(this,f),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,b=this._radiusY||f,N=this._clickTolerance(),q=[f+N,b+N];this._pxBounds=new he(this._point.subtract(q),this._point.add(q))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Bd(f,b){return new Ef(f,b)}var Sf=Ef.extend({initialize:function(f,b,N){if(typeof b=="number"&&(b=i({},N,{radius:b})),A(this,b),this._latlng=be(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new Ee(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:vl.prototype.setStyle,_project:function(){var f=this._latlng.lng,b=this._latlng.lat,N=this._map,q=N.options.crs;if(q.distance===it.distance){var re=Math.PI/180,me=this._mRadius/it.R/re,Ce=N.project([b+me,f]),We=N.project([b-me,f]),dt=Ce.add(We).divideBy(2),It=N.unproject(dt).lat,tn=Math.acos((Math.cos(me*re)-Math.sin(b*re)*Math.sin(It*re))/(Math.cos(b*re)*Math.cos(It*re)))/re;(isNaN(tn)||tn===0)&&(tn=me/Math.cos(Math.PI/180*b)),this._point=dt.subtract(N.getPixelOrigin()),this._radius=isNaN(tn)?0:dt.x-N.project([It,f-tn]).x,this._radiusY=dt.y-Ce.y}else{var hn=q.unproject(q.project(this._latlng).subtract([this._mRadius,0]));this._point=N.latLngToLayerPoint(this._latlng),this._radius=this._point.x-N.latLngToLayerPoint(hn).x}this._updateBounds()}});function Sv(f,b,N){return new Sf(f,b,N)}var qa=vl.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,b){A(this,b),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var b=1/0,N=null,q=xf,re,me,Ce=0,We=this._parts.length;Ce<We;Ce++)for(var dt=this._parts[Ce],It=1,tn=dt.length;It<tn;It++){re=dt[It-1],me=dt[It];var hn=q(f,re,me,!0);hn<b&&(b=hn,N=q(f,re,me))}return N&&(N.distance=Math.sqrt(b)),N},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return hi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,b){return b=b||this._defaultShape(),f=be(f),b.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new Ee,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return bs(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var b=[],N=bs(f),q=0,re=f.length;q<re;q++)N?(b[q]=be(f[q]),this._bounds.extend(b[q])):b[q]=this._convertLatLngs(f[q]);return b},_project:function(){var f=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),b=new De(f,f);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(b),this._rawPxBounds.max.add(b)]))},_projectLatlngs:function(f,b,N){var q=f[0]instanceof $e,re=f.length,me,Ce;if(q){for(Ce=[],me=0;me<re;me++)Ce[me]=this._map.latLngToLayerPoint(f[me]),N.extend(Ce[me]);b.push(Ce)}else for(me=0;me<re;me++)this._projectLatlngs(f[me],b,N)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var b=this._parts,N,q,re,me,Ce,We,dt;for(N=0,re=0,me=this._rings.length;N<me;N++)for(dt=this._rings[N],q=0,Ce=dt.length;q<Ce-1;q++)We=wm(dt[q],dt[q+1],f,q,!0),We&&(b[re]=b[re]||[],b[re].push(We[0]),(We[1]!==dt[q+1]||q===Ce-2)&&(b[re].push(We[1]),re++))}},_simplifyPoints:function(){for(var f=this._parts,b=this.options.smoothFactor,N=0,q=f.length;N<q;N++)f[N]=vm(f[N],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,b){var N,q,re,me,Ce,We,dt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(N=0,me=this._parts.length;N<me;N++)for(We=this._parts[N],q=0,Ce=We.length,re=Ce-1;q<Ce;re=q++)if(!(!b&&q===0)&&xm(f,We[re],We[q])<=dt)return!0;return!1}});function oi(f,b){return new qa(f,b)}qa._flat=dh;var Es=qa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return kd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var b=qa.prototype._convertLatLngs.call(this,f),N=b.length;return N>=2&&b[0]instanceof $e&&b[0].equals(b[N-1])&&b.pop(),b},_setLatLngs:function(f){qa.prototype._setLatLngs.call(this,f),bs(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return bs(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,b=this.options.weight,N=new De(b,b);if(f=new he(f.min.subtract(N),f.max.add(N)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var q=0,re=this._rings.length,me;q<re;q++)me=_f(this._rings[q],f,!0),me.length&&this._parts.push(me)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var b=!1,N,q,re,me,Ce,We,dt,It;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(me=0,dt=this._parts.length;me<dt;me++)for(N=this._parts[me],Ce=0,It=N.length,We=It-1;Ce<It;We=Ce++)q=N[Ce],re=N[We],q.y>f.y!=re.y>f.y&&f.x<(re.x-q.x)*(f.y-q.y)/(re.y-q.y)+q.x&&(b=!b);return b||qa.prototype._containsPoint.call(this,f,!0)}});function Fo(f,b){return new Es(f,b)}var fa=Ws.extend({initialize:function(f,b){A(this,b),this._layers={},f&&this.addData(f)},addData:function(f){var b=z(f)?f:f.features,N,q,re;if(b){for(N=0,q=b.length;N<q;N++)re=b[N],(re.geometries||re.geometry||re.features||re.coordinates)&&this.addData(re);return this}var me=this.options;if(me.filter&&!me.filter(f))return this;var Ce=hc(f,me);return Ce?(Ce.feature=gh(f),Ce.defaultOptions=Ce.options,this.resetStyle(Ce),me.onEachFeature&&me.onEachFeature(f,Ce),this.addLayer(Ce)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=i({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(b){this._setLayerStyle(b,f)},this)},_setLayerStyle:function(f,b){f.setStyle&&(typeof b=="function"&&(b=b(f.feature)),f.setStyle(b))}});function hc(f,b){var N=f.type==="Feature"?f.geometry:f,q=N?N.coordinates:null,re=[],me=b&&b.pointToLayer,Ce=b&&b.coordsToLatLng||Ga,We,dt,It,tn;if(!q&&!N)return null;switch(N.type){case"Point":return We=Ce(q),Sm(me,f,We,b);case"MultiPoint":for(It=0,tn=q.length;It<tn;It++)We=Ce(q[It]),re.push(Sm(me,f,We,b));return new Ws(re);case"LineString":case"MultiLineString":return dt=da(q,N.type==="LineString"?0:1,Ce),new qa(dt,b);case"Polygon":case"MultiPolygon":return dt=da(q,N.type==="Polygon"?1:2,Ce),new Es(dt,b);case"GeometryCollection":for(It=0,tn=N.geometries.length;It<tn;It++){var hn=hc({geometry:N.geometries[It],type:"Feature",properties:f.properties},b);hn&&re.push(hn)}return new Ws(re);case"FeatureCollection":for(It=0,tn=N.features.length;It<tn;It++){var Zn=hc(N.features[It],b);Zn&&re.push(Zn)}return new Ws(re);default:throw new Error("Invalid GeoJSON object.")}}function Sm(f,b,N,q){return f?f(b,N):new cc(N,q&&q.markersInheritOptions&&q)}function Ga(f){return new $e(f[1],f[0],f[2])}function da(f,b,N){for(var q=[],re=0,me=f.length,Ce;re<me;re++)Ce=b?da(f[re],b-1,N):(N||Ga)(f[re]),q.push(Ce);return q}function fu(f,b){return f=be(f),f.alt!==void 0?[_(f.lng,b),_(f.lat,b),_(f.alt,b)]:[_(f.lng,b),_(f.lat,b)]}function mh(f,b,N,q){for(var re=[],me=0,Ce=f.length;me<Ce;me++)re.push(b?mh(f[me],bs(f[me])?0:b-1,N,q):fu(f[me],q));return!b&&N&&re.length>0&&re.push(re[0].slice()),re}function xl(f,b){return f.feature?i({},f.feature,{geometry:b}):gh(b)}function gh(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var Tf={toGeoJSON:function(f){return xl(this,{type:"Point",coordinates:fu(this.getLatLng(),f)})}};cc.include(Tf),Sf.include(Tf),Ef.include(Tf),qa.include({toGeoJSON:function(f){var b=!bs(this._latlngs),N=mh(this._latlngs,b?1:0,!1,f);return xl(this,{type:(b?"Multi":"")+"LineString",coordinates:N})}}),Es.include({toGeoJSON:function(f){var b=!bs(this._latlngs),N=b&&!bs(this._latlngs[0]),q=mh(this._latlngs,N?2:b?1:0,!0,f);return b||(q=[q]),xl(this,{type:(N?"Multi":"")+"Polygon",coordinates:q})}}),lc.include({toMultiPoint:function(f){var b=[];return this.eachLayer(function(N){b.push(N.toGeoJSON(f).geometry.coordinates)}),xl(this,{type:"MultiPoint",coordinates:b})},toGeoJSON:function(f){var b=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(b==="MultiPoint")return this.toMultiPoint(f);var N=b==="GeometryCollection",q=[];return this.eachLayer(function(re){if(re.toGeoJSON){var me=re.toGeoJSON(f);if(N)q.push(me.geometry);else{var Ce=gh(me);Ce.type==="FeatureCollection"?q.push.apply(q,Ce.features):q.push(Ce)}}}),N?xl(this,{geometries:q,type:"GeometryCollection"}):{type:"FeatureCollection",features:q}}});function yh(f,b){return new fa(f,b)}var fc=yh,Cf=ws.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,b,N){this._url=f,this._bounds=Ge(b),A(this,N)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Cn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){jn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&_s(this._image),this},bringToBack:function(){return this._map&&Lr(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=Ge(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",b=this._image=f?this._url:ar("img");if(Cn(b,"leaflet-image-layer"),this._zoomAnimated&&Cn(b,"leaflet-zoom-animated"),this.options.className&&Cn(b,this.options.className),b.onselectstart=y,b.onmousemove=y,b.onload=u(this.fire,this,"load"),b.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=b.src;return}b.src=this._url,b.alt=this.options.alt},_animateZoom:function(f){var b=this._map.getZoomScale(f.zoom),N=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Wo(this._image,N,b)},_reset:function(){var f=this._image,b=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),N=b.getSize();ii(f,b.min),f.style.width=N.x+"px",f.style.height=N.y+"px"},_updateOpacity:function(){qn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),Qg=function(f,b,N){return new Cf(f,b,N)},Tm=Cf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",b=this._image=f?this._url:ar("video");if(Cn(b,"leaflet-image-layer"),this._zoomAnimated&&Cn(b,"leaflet-zoom-animated"),this.options.className&&Cn(b,this.options.className),b.onselectstart=y,b.onmousemove=y,b.onloadeddata=u(this.fire,this,"load"),f){for(var N=b.getElementsByTagName("source"),q=[],re=0;re<N.length;re++)q.push(N[re].src);this._url=N.length>0?q:[b.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(b.style,"objectFit")&&(b.style.objectFit="fill"),b.autoplay=!!this.options.autoplay,b.loop=!!this.options.loop,b.muted=!!this.options.muted,b.playsInline=!!this.options.playsInline;for(var me=0;me<this._url.length;me++){var Ce=ar("source");Ce.src=this._url[me],b.appendChild(Ce)}}});function ey(f,b,N){return new Tm(f,b,N)}var _h=Cf.extend({_initImage:function(){var f=this._image=this._url;Cn(f,"leaflet-image-layer"),this._zoomAnimated&&Cn(f,"leaflet-zoom-animated"),this.options.className&&Cn(f,this.options.className),f.onselectstart=y,f.onmousemove=y}});function If(f,b,N){return new _h(f,b,N)}var si=ws.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,b){f&&(f instanceof $e||z(f))?(this._latlng=be(f),A(this,b)):(A(this,f),this._source=b),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&qn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&qn(this._container,1),this.bringToFront(),this.options.interactive&&(Cn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(qn(this._container,0),this._removeTimeout=setTimeout(u(jn,void 0,this._container),200)):jn(this._container),this.options.interactive&&(Jr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=be(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_s(this._container),this},bringToBack:function(){return this._map&&Lr(this._container),this},_prepareOpen:function(f){var b=this._source;if(!b._map)return!1;if(b instanceof Ws){b=null;var N=this._source._layers;for(var q in N)if(N[q]._map){b=N[q];break}if(!b)return!1;this._source=b}if(!f)if(b.getCenter)f=b.getCenter();else if(b.getLatLng)f=b.getLatLng();else if(b.getBounds)f=b.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,b=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof b=="string")f.innerHTML=b;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),b=ve(this.options.offset),N=this._getAnchor();this._zoomAnimated?ii(this._container,f.add(N)):b=b.add(f).add(N);var q=this._containerBottom=-b.y,re=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=q+"px",this._container.style.left=re+"px"}},_getAnchor:function(){return[0,0]}});Jn.include({_initOverlay:function(f,b,N,q){var re=b;return re instanceof f||(re=new f(q).setContent(b)),N&&re.setLatLng(N),re}}),ws.include({_initOverlay:function(f,b,N,q){var re=N;return re instanceof f?(A(re,q),re._source=this):(re=b&&!q?b:new f(q,this),re.setContent(N)),re}});var Ss=si.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,si.prototype.openOn.call(this,f)},onAdd:function(f){si.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vl||this._source.on("preclick",ha))},onRemove:function(f){si.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vl||this._source.off("preclick",ha))},getEvents:function(){var f=si.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",b=this._container=ar("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),N=this._wrapper=ar("div",f+"-content-wrapper",b);if(this._contentNode=ar("div",f+"-content",N),gf(b),oc(this._contentNode),On(b,"contextmenu",ha),this._tipContainer=ar("div",f+"-tip-container",b),this._tip=ar("div",f+"-tip",this._tipContainer),this.options.closeButton){var q=this._closeButton=ar("a",f+"-close-button",b);q.setAttribute("role","button"),q.setAttribute("aria-label","Close popup"),q.href="#close",q.innerHTML='<span aria-hidden="true">&#215;</span>',On(q,"click",function(re){uo(re),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,b=f.style;b.width="",b.whiteSpace="nowrap";var N=f.offsetWidth;N=Math.min(N,this.options.maxWidth),N=Math.max(N,this.options.minWidth),b.width=N+1+"px",b.whiteSpace="",b.height="";var q=f.offsetHeight,re=this.options.maxHeight,me="leaflet-popup-scrolled";re&&q>re?(b.height=re+"px",Cn(f,me)):Jr(f,me),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var b=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),N=this._getAnchor();ii(this._container,b.add(N))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,b=parseInt($a(this._container,"marginBottom"),10)||0,N=this._container.offsetHeight+b,q=this._containerWidth,re=new De(this._containerLeft,-N-this._containerBottom);re._add(ca(this._container));var me=f.layerPointToContainerPoint(re),Ce=ve(this.options.autoPanPadding),We=ve(this.options.autoPanPaddingTopLeft||Ce),dt=ve(this.options.autoPanPaddingBottomRight||Ce),It=f.getSize(),tn=0,hn=0;me.x+q+dt.x>It.x&&(tn=me.x+q-It.x+dt.x),me.x-tn-We.x<0&&(tn=me.x-We.x),me.y+N+dt.y>It.y&&(hn=me.y+N-It.y+dt.y),me.y-hn-We.y<0&&(hn=me.y-We.y),(tn||hn)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([tn,hn]))}},_getAnchor:function(){return ve(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Cm=function(f,b){return new Ss(f,b)};Jn.mergeOptions({closePopupOnClick:!0}),Jn.include({openPopup:function(f,b,N){return this._initOverlay(Ss,f,b,N).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),ws.include({bindPopup:function(f,b){return this._popup=this._initOverlay(Ss,this._popup,f,b),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof Ws||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){lu(f);var b=f.layer||f.target;if(this._popup._source===b&&!(b instanceof vl)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=b,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var Ko=si.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){si.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){si.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=si.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",b=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ar("div",b),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var b,N,q=this._map,re=this._container,me=q.latLngToContainerPoint(q.getCenter()),Ce=q.layerPointToContainerPoint(f),We=this.options.direction,dt=re.offsetWidth,It=re.offsetHeight,tn=ve(this.options.offset),hn=this._getAnchor();We==="top"?(b=dt/2,N=It):We==="bottom"?(b=dt/2,N=0):We==="center"?(b=dt/2,N=It/2):We==="right"?(b=0,N=It/2):We==="left"?(b=dt,N=It/2):Ce.x<me.x?(We="right",b=0,N=It/2):(We="left",b=dt+(tn.x+hn.x)*2,N=It/2),f=f.subtract(ve(b,N,!0)).add(tn).add(hn),Jr(re,"leaflet-tooltip-right"),Jr(re,"leaflet-tooltip-left"),Jr(re,"leaflet-tooltip-top"),Jr(re,"leaflet-tooltip-bottom"),Cn(re,"leaflet-tooltip-"+We),ii(re,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&qn(this._container,f)},_animateZoom:function(f){var b=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(b)},_getAnchor:function(){return ve(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ha=function(f,b){return new Ko(f,b)};Jn.include({openTooltip:function(f,b,N){return this._initOverlay(Ko,f,b,N).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),ws.include({bindTooltip:function(f,b){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ko,this._tooltip,f,b),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var b=f?"off":"on",N={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?N.add=this._openTooltip:(N.mouseover=this._openTooltip,N.mouseout=this.closeTooltip,N.click=this._openTooltip,this._map?this._addFocusListeners():N.add=this._addFocusListeners),this._tooltip.options.sticky&&(N.mousemove=this._moveTooltip),this[b](N),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof Ws||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var b=typeof f.getElement=="function"&&f.getElement();b&&(On(b,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),On(b,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var b=typeof f.getElement=="function"&&f.getElement();b&&b.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var b=this;this._map.once("moveend",function(){b._openOnceFlag=!1,b._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var b=f.latlng,N,q;this._tooltip.options.sticky&&f.originalEvent&&(N=this._map.mouseEventToContainerPoint(f.originalEvent),q=this._map.containerPointToLayerPoint(N),b=this._map.layerPointToLatLng(q)),this._tooltip.setLatLng(b)}});var dc=uc.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var b=f&&f.tagName==="DIV"?f:document.createElement("div"),N=this.options;if(N.html instanceof Element?(su(b),b.appendChild(N.html)):b.innerHTML=N.html!==!1?N.html:"",N.bgPos){var q=ve(N.bgPos);b.style.backgroundPosition=-q.x+"px "+-q.y+"px"}return this._setIconStyles(b,"icon"),b},createShadow:function(){return null}});function pa(f){return new dc(f)}uc.Default=ph;var ma=ws.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ht.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){A(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),jn(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_s(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Lr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof De?f:new De(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var b=this.getPane().children,N=-f(-1/0,1/0),q=0,re=b.length,me;q<re;q++)me=b[q].style.zIndex,b[q]!==this._container&&me&&(N=f(N,+me));isFinite(N)&&(this.options.zIndex=N+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ht.ielt9){qn(this._container,this.options.opacity);var f=+new Date,b=!1,N=!1;for(var q in this._tiles){var re=this._tiles[q];if(!(!re.current||!re.loaded)){var me=Math.min(1,(f-re.loaded)/200);qn(re.el,me),me<1?b=!0:(re.active?N=!0:this._onOpaqueTile(re),re.active=!0)}}N&&!this._noPrune&&this._pruneTiles(),b&&(ee(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=ar("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,b=this.options.maxZoom;if(f!==void 0){for(var N in this._levels)N=Number(N),this._levels[N].el.children.length||N===f?(this._levels[N].el.style.zIndex=b-Math.abs(f-N),this._onUpdateLevel(N)):(jn(this._levels[N].el),this._removeTilesAtZoom(N),this._onRemoveLevel(N),delete this._levels[N]);var q=this._levels[f],re=this._map;return q||(q=this._levels[f]={},q.el=ar("div","leaflet-tile-container leaflet-zoom-animated",this._container),q.el.style.zIndex=b,q.origin=re.project(re.unproject(re.getPixelOrigin()),f).round(),q.zoom=f,this._setZoomTransform(q,re.getCenter(),re.getZoom()),y(q.el.offsetWidth),this._onCreateLevel(q)),this._level=q,q}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var f,b,N=this._map.getZoom();if(N>this.options.maxZoom||N<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)b=this._tiles[f],b.retain=b.current;for(f in this._tiles)if(b=this._tiles[f],b.current&&!b.active){var q=b.coords;this._retainParent(q.x,q.y,q.z,q.z-5)||this._retainChildren(q.x,q.y,q.z,q.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var b in this._tiles)this._tiles[b].coords.z===f&&this._removeTile(b)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)jn(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,b,N,q){var re=Math.floor(f/2),me=Math.floor(b/2),Ce=N-1,We=new De(+re,+me);We.z=+Ce;var dt=this._tileCoordsToKey(We),It=this._tiles[dt];return It&&It.active?(It.retain=!0,!0):(It&&It.loaded&&(It.retain=!0),Ce>q?this._retainParent(re,me,Ce,q):!1)},_retainChildren:function(f,b,N,q){for(var re=2*f;re<2*f+2;re++)for(var me=2*b;me<2*b+2;me++){var Ce=new De(re,me);Ce.z=N+1;var We=this._tileCoordsToKey(Ce),dt=this._tiles[We];if(dt&&dt.active){dt.retain=!0;continue}else dt&&dt.loaded&&(dt.retain=!0);N+1<q&&this._retainChildren(re,me,N+1,q)}},_resetView:function(f){var b=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var b=this.options;return b.minNativeZoom!==void 0&&f<b.minNativeZoom?b.minNativeZoom:b.maxNativeZoom!==void 0&&b.maxNativeZoom<f?b.maxNativeZoom:f},_setView:function(f,b,N,q){var re=Math.round(b);this.options.maxZoom!==void 0&&re>this.options.maxZoom||this.options.minZoom!==void 0&&re<this.options.minZoom?re=void 0:re=this._clampZoom(re);var me=this.options.updateWhenZooming&&re!==this._tileZoom;(!q||me)&&(this._tileZoom=re,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),re!==void 0&&this._update(f),N||this._pruneTiles(),this._noPrune=!!N),this._setZoomTransforms(f,b)},_setZoomTransforms:function(f,b){for(var N in this._levels)this._setZoomTransform(this._levels[N],f,b)},_setZoomTransform:function(f,b,N){var q=this._map.getZoomScale(N,f.zoom),re=f.origin.multiplyBy(q).subtract(this._map._getNewPixelOrigin(b,N)).round();ht.any3d?Wo(f.el,re,q):ii(f.el,re)},_resetGrid:function(){var f=this._map,b=f.options.crs,N=this._tileSize=this.getTileSize(),q=this._tileZoom,re=this._map.getPixelWorldBounds(this._tileZoom);re&&(this._globalTileRange=this._pxBoundsToTileRange(re)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,b.wrapLng[0]],q).x/N.x),Math.ceil(f.project([0,b.wrapLng[1]],q).x/N.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([b.wrapLat[0],0],q).y/N.x),Math.ceil(f.project([b.wrapLat[1],0],q).y/N.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var b=this._map,N=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),q=b.getZoomScale(N,this._tileZoom),re=b.project(f,this._tileZoom).floor(),me=b.getSize().divideBy(q*2);return new he(re.subtract(me),re.add(me))},_update:function(f){var b=this._map;if(b){var N=this._clampZoom(b.getZoom());if(f===void 0&&(f=b.getCenter()),this._tileZoom!==void 0){var q=this._getTiledPixelBounds(f),re=this._pxBoundsToTileRange(q),me=re.getCenter(),Ce=[],We=this.options.keepBuffer,dt=new he(re.getBottomLeft().subtract([We,-We]),re.getTopRight().add([We,-We]));if(!(isFinite(re.min.x)&&isFinite(re.min.y)&&isFinite(re.max.x)&&isFinite(re.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var It in this._tiles){var tn=this._tiles[It].coords;(tn.z!==this._tileZoom||!dt.contains(new De(tn.x,tn.y)))&&(this._tiles[It].current=!1)}if(Math.abs(N-this._tileZoom)>1){this._setView(f,N);return}for(var hn=re.min.y;hn<=re.max.y;hn++)for(var Zn=re.min.x;Zn<=re.max.x;Zn++){var Hr=new De(Zn,hn);if(Hr.z=this._tileZoom,!!this._isValidTile(Hr)){var $i=this._tiles[this._tileCoordsToKey(Hr)];$i?$i.current=!0:Ce.push(Hr)}}if(Ce.sort(function(nr,$r){return nr.distanceTo(me)-$r.distanceTo(me)}),Ce.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Po=document.createDocumentFragment();for(Zn=0;Zn<Ce.length;Zn++)this._addTile(Ce[Zn],Po);this._level.el.appendChild(Po)}}}},_isValidTile:function(f){var b=this._map.options.crs;if(!b.infinite){var N=this._globalTileRange;if(!b.wrapLng&&(f.x<N.min.x||f.x>N.max.x)||!b.wrapLat&&(f.y<N.min.y||f.y>N.max.y))return!1}if(!this.options.bounds)return!0;var q=this._tileCoordsToBounds(f);return Ge(this.options.bounds).overlaps(q)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var b=this._map,N=this.getTileSize(),q=f.scaleBy(N),re=q.add(N),me=b.unproject(q,f.z),Ce=b.unproject(re,f.z);return[me,Ce]},_tileCoordsToBounds:function(f){var b=this._tileCoordsToNwSe(f),N=new Ee(b[0],b[1]);return this.options.noWrap||(N=this._map.wrapLatLngBounds(N)),N},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var b=f.split(":"),N=new De(+b[0],+b[1]);return N.z=+b[2],N},_removeTile:function(f){var b=this._tiles[f];b&&(jn(b.el),delete this._tiles[f],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){Cn(f,"leaflet-tile");var b=this.getTileSize();f.style.width=b.x+"px",f.style.height=b.y+"px",f.onselectstart=y,f.onmousemove=y,ht.ielt9&&this.options.opacity<1&&qn(f,this.options.opacity)},_addTile:function(f,b){var N=this._getTilePos(f),q=this._tileCoordsToKey(f),re=this.createTile(this._wrapCoords(f),u(this._tileReady,this,f));this._initTile(re),this.createTile.length<2&&X(u(this._tileReady,this,f,null,re)),ii(re,N),this._tiles[q]={el:re,coords:f,current:!0},b.appendChild(re),this.fire("tileloadstart",{tile:re,coords:f})},_tileReady:function(f,b,N){b&&this.fire("tileerror",{error:b,tile:N,coords:f});var q=this._tileCoordsToKey(f);N=this._tiles[q],N&&(N.loaded=+new Date,this._map._fadeAnimated?(qn(N.el,0),ee(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(N.active=!0,this._pruneTiles()),b||(Cn(N.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:N.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ht.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var b=new De(this._wrapX?x(f.x,this._wrapX):f.x,this._wrapY?x(f.y,this._wrapY):f.y);return b.z=f.z,b},_pxBoundsToTileRange:function(f){var b=this.getTileSize();return new he(f.min.unscaleBy(b).floor(),f.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function Tv(f){return new ma(f)}var du=ma.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,b){this._url=f,b=A(this,b),b.detectRetina&&ht.retina&&b.maxZoom>0?(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom=Math.min(b.maxZoom,b.minZoom+1)):(b.zoomOffset++,b.maxZoom=Math.max(b.minZoom,b.maxZoom-1)),b.minZoom=Math.max(0,b.minZoom)):b.zoomReverse?b.minZoom=Math.min(b.maxZoom,b.minZoom):b.maxZoom=Math.max(b.minZoom,b.maxZoom),typeof b.subdomains=="string"&&(b.subdomains=b.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,b){return this._url===f&&b===void 0&&(b=!0),this._url=f,b||this.redraw(),this},createTile:function(f,b){var N=document.createElement("img");return On(N,"load",u(this._tileOnLoad,this,b,N)),On(N,"error",u(this._tileOnError,this,b,N)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(N.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(N.referrerPolicy=this.options.referrerPolicy),N.alt="",N.src=this.getTileUrl(f),N},getTileUrl:function(f){var b={r:ht.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var N=this._globalTileRange.max.y-f.y;this.options.tms&&(b.y=N),b["-y"]=N}return R(this._url,i(b,this.options))},_tileOnLoad:function(f,b){ht.ielt9?setTimeout(u(f,this,null,b),0):f(null,b)},_tileOnError:function(f,b,N){var q=this.options.errorTileUrl;q&&b.getAttribute("src")!==q&&(b.src=q),f(N,b)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,b=this.options.maxZoom,N=this.options.zoomReverse,q=this.options.zoomOffset;return N&&(f=b-f),f+q},_getSubdomain:function(f){var b=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var f,b;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(b=this._tiles[f].el,b.onload=y,b.onerror=y,!b.complete)){b.src=U;var N=this._tiles[f].coords;jn(b),delete this._tiles[f],this.fire("tileabort",{tile:b,coords:N})}},_removeTile:function(f){var b=this._tiles[f];if(b)return b.el.setAttribute("src",U),ma.prototype._removeTile.call(this,f)},_tileReady:function(f,b,N){if(!(!this._map||N&&N.getAttribute("src")===U))return ma.prototype._tileReady.call(this,f,b,N)}});function ty(f,b){return new du(f,b)}var pc=du.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,b){this._url=f;var N=i({},this.defaultWmsParams);for(var q in b)q in this.options||(N[q]=b[q]);b=A(this,b);var re=b.detectRetina&&ht.retina?2:1,me=this.getTileSize();N.width=me.x*re,N.height=me.y*re,this.wmsParams=N},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,du.prototype.onAdd.call(this,f)},getTileUrl:function(f){var b=this._tileCoordsToNwSe(f),N=this._crs,q=xe(N.project(b[0]),N.project(b[1])),re=q.min,me=q.max,Ce=(this._wmsVersion>=1.3&&this._crs===hu?[re.y,re.x,me.y,me.x]:[re.x,re.y,me.x,me.y]).join(","),We=du.prototype.getTileUrl.call(this,f);return We+M(this.wmsParams,We,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ce},setParams:function(f,b){return i(this.wmsParams,f),b||this.redraw(),this}});function Pf(f,b){return new pc(f,b)}du.WMS=pc,ty.wms=Pf;var Ji=ws.extend({options:{padding:.1},initialize:function(f){A(this,f),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Cn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,b){var N=this._map.getZoomScale(b,this._zoom),q=this._map.getSize().multiplyBy(.5+this.options.padding),re=this._map.project(this._center,b),me=q.multiplyBy(-N).add(re).subtract(this._map._getNewPixelOrigin(f,b));ht.any3d?Wo(this._container,me,N):ii(this._container,me)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,b=this._map.getSize(),N=this._map.containerPointToLayerPoint(b.multiplyBy(-f)).round();this._bounds=new he(N,N.add(b.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jt=Ji.extend({options:{tolerance:0},getEvents:function(){var f=Ji.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ji.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");On(f,"mousemove",this._onMouseMove,this),On(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),On(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){ee(this._redrawRequest),delete this._ctx,jn(this._container),Yn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var b in this._layers)f=this._layers[b],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ji.prototype._update.call(this);var f=this._bounds,b=this._container,N=f.getSize(),q=ht.retina?2:1;ii(b,f.min),b.width=q*N.x,b.height=q*N.y,b.style.width=N.x+"px",b.style.height=N.y+"px",ht.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){Ji.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[p(f)]=f;var b=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var b=f._order,N=b.next,q=b.prev;N?N.prev=q:this._drawLast=q,q?q.next=N:this._drawFirst=N,delete f._order,delete this._layers[p(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var b=f.options.dashArray.split(/[, ]+/),N=[],q,re;for(re=0;re<b.length;re++){if(q=Number(b[re]),isNaN(q))return;N.push(q)}f.options._dashArray=N}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var b=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(f._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(f._pxBounds.max.add([b,b]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var b=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,b.x,b.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,b=this._redrawBounds;if(this._ctx.save(),b){var N=b.getSize();this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,N.x,N.y),this._ctx.clip()}this._drawing=!0;for(var q=this._drawFirst;q;q=q.next)f=q.layer,(!b||f._pxBounds&&f._pxBounds.intersects(b))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,b){if(this._drawing){var N,q,re,me,Ce=f._parts,We=Ce.length,dt=this._ctx;if(We){for(dt.beginPath(),N=0;N<We;N++){for(q=0,re=Ce[N].length;q<re;q++)me=Ce[N][q],dt[q?"lineTo":"moveTo"](me.x,me.y);b&&dt.closePath()}this._fillStroke(dt,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var b=f._point,N=this._ctx,q=Math.max(Math.round(f._radius),1),re=(Math.max(Math.round(f._radiusY),1)||q)/q;re!==1&&(N.save(),N.scale(1,re)),N.beginPath(),N.arc(b.x,b.y/re,q,0,Math.PI*2,!1),re!==1&&N.restore(),this._fillStroke(N,f)}},_fillStroke:function(f,b){var N=b.options;N.fill&&(f.globalAlpha=N.fillOpacity,f.fillStyle=N.fillColor||N.color,f.fill(N.fillRule||"evenodd")),N.stroke&&N.weight!==0&&(f.setLineDash&&f.setLineDash(b.options&&b.options._dashArray||[]),f.globalAlpha=N.opacity,f.lineWidth=N.weight,f.strokeStyle=N.color,f.lineCap=N.lineCap,f.lineJoin=N.lineJoin,f.stroke())},_onClick:function(f){for(var b=this._map.mouseEventToLayerPoint(f),N,q,re=this._drawFirst;re;re=re.next)N=re.layer,N.options.interactive&&N._containsPoint(b)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(N))&&(q=N);this._fireEvent(q?[q]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var b=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,b)}},_handleMouseOut:function(f){var b=this._hoveredLayer;b&&(Jr(this._container,"leaflet-interactive"),this._fireEvent([b],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,b){if(!this._mouseHoverThrottled){for(var N,q,re=this._drawFirst;re;re=re.next)N=re.layer,N.options.interactive&&N._containsPoint(b)&&(q=N);q!==this._hoveredLayer&&(this._handleMouseOut(f),q&&(Cn(this._container,"leaflet-interactive"),this._fireEvent([q],f,"mouseover"),this._hoveredLayer=q)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,b,N){this._map._fireDOMEvent(b,N||b.type,f)},_bringToFront:function(f){var b=f._order;if(b){var N=b.next,q=b.prev;if(N)N.prev=q;else return;q?q.next=N:N&&(this._drawFirst=N),b.prev=this._drawLast,this._drawLast.next=b,b.next=null,this._drawLast=b,this._requestRedraw(f)}},_bringToBack:function(f){var b=f._order;if(b){var N=b.next,q=b.prev;if(q)q.next=N;else return;N?N.prev=q:q&&(this._drawLast=q),b.prev=null,b.next=this._drawFirst,this._drawFirst.prev=b,this._drawFirst=b,this._requestRedraw(f)}}});function Lf(f){return ht.canvas?new Jt(f):null}var Za=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),vh={_initContainer:function(){this._container=ar("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ji.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var b=f._container=Za("shape");Cn(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",f._path=Za("path"),b.appendChild(f._path),this._updateStyle(f),this._layers[p(f)]=f},_addPath:function(f){var b=f._container;this._container.appendChild(b),f.options.interactive&&f.addInteractiveTarget(b)},_removePath:function(f){var b=f._container;jn(b),f.removeInteractiveTarget(b),delete this._layers[p(f)]},_updateStyle:function(f){var b=f._stroke,N=f._fill,q=f.options,re=f._container;re.stroked=!!q.stroke,re.filled=!!q.fill,q.stroke?(b||(b=f._stroke=Za("stroke")),re.appendChild(b),b.weight=q.weight+"px",b.color=q.color,b.opacity=q.opacity,q.dashArray?b.dashStyle=z(q.dashArray)?q.dashArray.join(" "):q.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=q.lineCap.replace("butt","flat"),b.joinstyle=q.lineJoin):b&&(re.removeChild(b),f._stroke=null),q.fill?(N||(N=f._fill=Za("fill")),re.appendChild(N),N.color=q.fillColor||q.color,N.opacity=q.fillOpacity):N&&(re.removeChild(N),f._fill=null)},_updateCircle:function(f){var b=f._point.round(),N=Math.round(f._radius),q=Math.round(f._radiusY||N);this._setPath(f,f._empty()?"M0 0":"AL "+b.x+","+b.y+" "+N+","+q+" 0,"+65535*360)},_setPath:function(f,b){f._path.v=b},_bringToFront:function(f){_s(f._container)},_bringToBack:function(f){Lr(f._container)}},Af=ht.vml?Za:Gt,qt=Ji.extend({_initContainer:function(){this._container=Af("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Af("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){jn(this._container),Yn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ji.prototype._update.call(this);var f=this._bounds,b=f.getSize(),N=this._container;(!this._svgSize||!this._svgSize.equals(b))&&(this._svgSize=b,N.setAttribute("width",b.x),N.setAttribute("height",b.y)),ii(N,f.min),N.setAttribute("viewBox",[f.min.x,f.min.y,b.x,b.y].join(" ")),this.fire("update")}},_initPath:function(f){var b=f._path=Af("path");f.options.className&&Cn(b,f.options.className),f.options.interactive&&Cn(b,"leaflet-interactive"),this._updateStyle(f),this._layers[p(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){jn(f._path),f.removeInteractiveTarget(f._path),delete this._layers[p(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var b=f._path,N=f.options;b&&(N.stroke?(b.setAttribute("stroke",N.color),b.setAttribute("stroke-opacity",N.opacity),b.setAttribute("stroke-width",N.weight),b.setAttribute("stroke-linecap",N.lineCap),b.setAttribute("stroke-linejoin",N.lineJoin),N.dashArray?b.setAttribute("stroke-dasharray",N.dashArray):b.removeAttribute("stroke-dasharray"),N.dashOffset?b.setAttribute("stroke-dashoffset",N.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),N.fill?(b.setAttribute("fill",N.fillColor||N.color),b.setAttribute("fill-opacity",N.fillOpacity),b.setAttribute("fill-rule",N.fillRule||"evenodd")):b.setAttribute("fill","none"))},_updatePoly:function(f,b){this._setPath(f,Tr(f._parts,b))},_updateCircle:function(f){var b=f._point,N=Math.max(Math.round(f._radius),1),q=Math.max(Math.round(f._radiusY),1)||N,re="a"+N+","+q+" 0 1,0 ",me=f._empty()?"M0 0":"M"+(b.x-N)+","+b.y+re+N*2+",0 "+re+-N*2+",0 ";this._setPath(f,me)},_setPath:function(f,b){f._path.setAttribute("d",b)},_bringToFront:function(f){_s(f._path)},_bringToBack:function(f){Lr(f._path)}});ht.vml&&qt.include(vh);function mc(f){return ht.svg||ht.vml?new qt(f):null}Jn.include({getRenderer:function(f){var b=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this._createRenderer()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var b=this._paneRenderers[f];return b===void 0&&(b=this._createRenderer({pane:f}),this._paneRenderers[f]=b),b},_createRenderer:function(f){return this.options.preferCanvas&&Lf(f)||mc(f)}});var Im=Es.extend({initialize:function(f,b){Es.prototype.initialize.call(this,this._boundsToLatLngs(f),b)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=Ge(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function ny(f,b){return new Im(f,b)}qt.create=Af,qt.pointsToPath=Tr,fa.geometryToLayer=hc,fa.coordsToLatLng=Ga,fa.coordsToLatLngs=da,fa.latLngToCoords=fu,fa.latLngsToCoords=mh,fa.getFeature=xl,fa.asFeature=gh,Jn.mergeOptions({boxZoom:!0});var Of=Ua.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){On(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){jn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ff(),Pd(),this._startPoint=this._map.mouseEventToContainerPoint(f),On(document,{contextmenu:lu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=ar("div","leaflet-zoom-box",this._container),Cn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var b=new he(this._point,this._startPoint),N=b.getSize();ii(this._box,b.min),this._box.style.width=N.x+"px",this._box.style.height=N.y+"px"},_finish:function(){this._moved&&(jn(this._box),Jr(this._container,"leaflet-crosshair")),nh(),dm(),Yn(document,{contextmenu:lu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var b=new Ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Jn.addInitHook("addHandler","boxZoom",Of),Jn.mergeOptions({doubleClickZoom:!0});var jd=Ua.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var b=this._map,N=b.getZoom(),q=b.options.zoomDelta,re=f.originalEvent.shiftKey?N-q:N+q;b.options.doubleClickZoom==="center"?b.setZoom(re):b.setZoomAround(f.containerPoint,re)}});Jn.addInitHook("addHandler","doubleClickZoom",jd),Jn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var kf=Ua.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new Va(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}Cn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Jr(this._map._container,"leaflet-grab"),Jr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=Ge(this._map.options.maxBounds);this._offsetLimit=xe(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var b=this._lastTime=+new Date,N=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(N),this._times.push(b),this._prunePositions(b)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,b){return f-(f-b)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;f.x<b.min.x&&(f.x=this._viscousLimit(f.x,b.min.x)),f.y<b.min.y&&(f.y=this._viscousLimit(f.y,b.min.y)),f.x>b.max.x&&(f.x=this._viscousLimit(f.x,b.max.x)),f.y>b.max.y&&(f.y=this._viscousLimit(f.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,b=Math.round(f/2),N=this._initialWorldOffset,q=this._draggable._newPos.x,re=(q-b+N)%f+b-N,me=(q+b+N)%f-b-N,Ce=Math.abs(re+N)<Math.abs(me+N)?re:me;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ce},_onDragEnd:function(f){var b=this._map,N=b.options,q=!N.inertia||f.noInertia||this._times.length<2;if(b.fire("dragend",f),q)b.fire("moveend");else{this._prunePositions(+new Date);var re=this._lastPos.subtract(this._positions[0]),me=(this._lastTime-this._times[0])/1e3,Ce=N.easeLinearity,We=re.multiplyBy(Ce/me),dt=We.distanceTo([0,0]),It=Math.min(N.inertiaMaxSpeed,dt),tn=We.multiplyBy(It/dt),hn=It/(N.inertiaDeceleration*Ce),Zn=tn.multiplyBy(-hn/2).round();!Zn.x&&!Zn.y?b.fire("moveend"):(Zn=b._limitOffset(Zn,b.options.maxBounds),X(function(){b.panBy(Zn,{duration:hn,easeLinearity:Ce,noMoveStart:!0,animate:!0})}))}}});Jn.addInitHook("addHandler","dragging",kf),Jn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Pm=Ua.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),On(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,b=document.documentElement,N=f.scrollTop||b.scrollTop,q=f.scrollLeft||b.scrollLeft;this._map._container.focus(),window.scrollTo(q,N)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var b=this._panKeys={},N=this.keyCodes,q,re;for(q=0,re=N.left.length;q<re;q++)b[N.left[q]]=[-1*f,0];for(q=0,re=N.right.length;q<re;q++)b[N.right[q]]=[f,0];for(q=0,re=N.down.length;q<re;q++)b[N.down[q]]=[0,f];for(q=0,re=N.up.length;q<re;q++)b[N.up[q]]=[0,-1*f]},_setZoomDelta:function(f){var b=this._zoomKeys={},N=this.keyCodes,q,re;for(q=0,re=N.zoomIn.length;q<re;q++)b[N.zoomIn[q]]=f;for(q=0,re=N.zoomOut.length;q<re;q++)b[N.zoomOut[q]]=-f},_addHooks:function(){On(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var b=f.keyCode,N=this._map,q;if(b in this._panKeys){if(!N._panAnim||!N._panAnim._inProgress)if(q=this._panKeys[b],f.shiftKey&&(q=ve(q).multiplyBy(3)),N.options.maxBounds&&(q=N._limitOffset(ve(q),N.options.maxBounds)),N.options.worldCopyJump){var re=N.wrapLatLng(N.unproject(N.project(N.getCenter()).add(q)));N.panTo(re)}else N.panBy(q)}else if(b in this._zoomKeys)N.setZoom(N.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[b]);else if(b===27&&N._popup&&N._popup.options.closeOnEscapeKey)N.closePopup();else return;lu(f)}}});Jn.addInitHook("addHandler","keyboard",Pm),Jn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ry=Ua.extend({addHooks:function(){On(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var b=Io(f),N=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var q=Math.max(N-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),q),lu(f)},_performZoom:function(){var f=this._map,b=f.getZoom(),N=this._map.options.zoomSnap||0;f._stop();var q=this._delta/(this._map.options.wheelPxPerZoomLevel*4),re=4*Math.log(2/(1+Math.exp(-Math.abs(q))))/Math.LN2,me=N?Math.ceil(re/N)*N:re,Ce=f._limitZoom(b+(this._delta>0?me:-me))-b;this._delta=0,this._startTime=null,Ce&&(f.options.scrollWheelZoom==="center"?f.setZoom(b+Ce):f.setZoomAround(this._lastMousePos,b+Ce))}});Jn.addInitHook("addHandler","scrollWheelZoom",ry);var pu=600;Jn.mergeOptions({tapHold:ht.touchNative&&ht.safari&&ht.mobile,tapTolerance:15});var jr=Ua.extend({addHooks:function(){On(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var b=f.touches[0];this._startPos=this._newPos=new De(b.clientX,b.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(On(document,"touchend",uo),On(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",b))},this),pu),On(document,"touchend touchcancel contextmenu",this._cancel,this),On(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){Yn(document,"touchend",uo),Yn(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),Yn(document,"touchend touchcancel contextmenu",this._cancel,this),Yn(document,"touchmove",this._onMove,this)},_onMove:function(f){var b=f.touches[0];this._newPos=new De(b.clientX,b.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,b){var N=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY});N._simulated=!0,b.target.dispatchEvent(N)}});Jn.addInitHook("addHandler","tapHold",jr),Jn.mergeOptions({touchZoom:ht.touch,bounceAtZoomLimits:!0});var xh=Ua.extend({addHooks:function(){Cn(this._map._container,"leaflet-touch-zoom"),On(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Jr(this._map._container,"leaflet-touch-zoom"),Yn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var b=this._map;if(!(!f.touches||f.touches.length!==2||b._animatingZoom||this._zooming)){var N=b.mouseEventToContainerPoint(f.touches[0]),q=b.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=b.getSize()._divideBy(2),this._startLatLng=b.containerPointToLatLng(this._centerPoint),b.options.touchZoom!=="center"&&(this._pinchStartLatLng=b.containerPointToLatLng(N.add(q)._divideBy(2))),this._startDist=N.distanceTo(q),this._startZoom=b.getZoom(),this._moved=!1,this._zooming=!0,b._stop(),On(document,"touchmove",this._onTouchMove,this),On(document,"touchend touchcancel",this._onTouchEnd,this),uo(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var b=this._map,N=b.mouseEventToContainerPoint(f.touches[0]),q=b.mouseEventToContainerPoint(f.touches[1]),re=N.distanceTo(q)/this._startDist;if(this._zoom=b.getScaleZoom(re,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&re<1||this._zoom>b.getMaxZoom()&&re>1)&&(this._zoom=b._limitZoom(this._zoom)),b.options.touchZoom==="center"){if(this._center=this._startLatLng,re===1)return}else{var me=N._add(q)._divideBy(2)._subtract(this._centerPoint);if(re===1&&me.x===0&&me.y===0)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(me),this._zoom)}this._moved||(b._moveStart(!0,!1),this._moved=!0),ee(this._animRequest);var Ce=u(b._move,b,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X(Ce,this,!0),uo(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ee(this._animRequest),Yn(document,"touchmove",this._onTouchMove,this),Yn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Jn.addInitHook("addHandler","touchZoom",xh),Jn.BoxZoom=Of,Jn.DoubleClickZoom=jd,Jn.Drag=kf,Jn.Keyboard=Pm,Jn.ScrollWheelZoom=ry,Jn.TapHold=jr,Jn.TouchZoom=xh,n.Bounds=he,n.Browser=ht,n.CRS=He,n.Canvas=Jt,n.Circle=Sf,n.CircleMarker=Ef,n.Class=oe,n.Control=xs,n.DivIcon=dc,n.DivOverlay=si,n.DomEvent=hr,n.DomUtil=Kg,n.Draggable=Va,n.Evented=Be,n.FeatureGroup=Ws,n.GeoJSON=fa,n.GridLayer=ma,n.Handler=Ua,n.Icon=uc,n.ImageOverlay=Cf,n.LatLng=$e,n.LatLngBounds=Ee,n.Layer=ws,n.LayerGroup=lc,n.LineUtil=Ev,n.Map=Jn,n.Marker=cc,n.Mixin=wv,n.Path=vl,n.Point=De,n.PolyUtil=ch,n.Polygon=Es,n.Polyline=qa,n.Popup=Ss,n.PosAnimation=yf,n.Projection=Br,n.Rectangle=Im,n.Renderer=Ji,n.SVG=qt,n.SVGOverlay=_h,n.TileLayer=du,n.Tooltip=Ko,n.Transformation=Dt,n.Util=ce,n.VideoOverlay=Tm,n.bind=u,n.bounds=xe,n.canvas=Lf,n.circle=Sv,n.circleMarker=Bd,n.control=cu,n.divIcon=pa,n.extend=i,n.featureGroup=zd,n.geoJSON=yh,n.geoJson=fc,n.gridLayer=Tv,n.icon=Fd,n.imageOverlay=Qg,n.latLng=be,n.latLngBounds=Ge,n.layerGroup=Dd,n.map=mm,n.marker=Em,n.point=ve,n.polygon=Fo,n.polyline=oi,n.popup=Cm,n.rectangle=ny,n.setOptions=A,n.stamp=p,n.svg=mc,n.svgOverlay=If,n.tileLayer=ty,n.tooltip=Ha,n.transformation=Qt,n.version=r,n.videoOverlay=ey;var $d=window.L;n.noConflict=function(){return window.L=$d,this},window.L=n})})(YI,YI.exports);var Wf=YI.exports;function yne(e,t){const n=Wf.map(e).setView(t||[20.5937,78.9629],t?15:5);return Wf.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(n),n}function JI(e){return`<div>
        <div>
            <img src=${e.img||qB} alt="house-image"/>
        </div>
        <div>
            <a href="/list/${e._id}"><h3>${e.title}</h3><a>
            <p>${e.bedroom} Bedroom</p>
            <span><b> ${e.price}</b></span>
        </div>
    </div>`}function dD(e,t){const n=[],r=[],i=[],o=Wf.icon({iconUrl:pX,iconSize:[30,30]}),u=Wf.icon({iconUrl:mX,iconSize:[30,30]});if(!t)return[];if(e==null||e.map(l=>{switch(l.type){case"buy":const p=Wf.marker([l.latitude,l.longitude],{icon:o});l.img&&p.bindPopup(JI(l)),n.push(p);break;case"rent":const g=Wf.marker([l.latitude,l.longitude],{icon:u});l.img&&g.bindPopup(JI(l)),r.push(g);break}}),+n.length>0){const l=Wf.layerGroup(n);l.addTo(t),i.push(l)}if(+r.length>0){const l=Wf.layerGroup(r);l.addTo(t),i.push(l)}return i}function B6({List:e,map:t,setMap:n,geoExtent:r}){const[i,o]=Ue.useState(),[u,l]=Ue.useState(),[p,g]=Ue.useState(!1);return Ue.useEffect(()=>{if(p){i&&(t==null||t.removeLayer(i)),u&&(t==null||t.removeLayer(u));const[x,y]=dD(e,t);o(x),l(y)}else{const x=yne("map",r);n&&n(x);const[y,_]=dD(e,x);o(y),l(_),g(!0)}},[e]),ae.jsx("div",{className:"map",id:"map"})}var j6={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.1.3/LICENSE.txt
 */(function(e,t){(function(n,r){e.exports=r()})(Er,function(){var n={},r={};function i(u,l,p){if(r[u]=p,u==="index"){var g="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",x={};return r.shared(x),r.index(n,x),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),n}}i("shared",["exports"],function(u){function l(c,s,h,m){return new(h||(h=Promise))(function(E,I){function O(W){try{$(m.next(W))}catch(ne){I(ne)}}function F(W){try{$(m.throw(W))}catch(ne){I(ne)}}function $(W){var ne;W.done?E(W.value):(ne=W.value,ne instanceof h?ne:new h(function(ie){ie(ne)})).then(O,F)}$((m=m.apply(c,s||[])).next())})}function p(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var g=x;function x(c,s){this.x=c,this.y=s}x.prototype={clone:function(){return new x(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,s){return this.clone()._rotateAround(c,s)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var s=c.x-this.x,h=c.y-this.y;return s*s+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult:function(c){var s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var s=Math.cos(c),h=Math.sin(c),m=h*this.x+s*this.y;return this.x=s*this.x-h*this.y,this.y=m,this},_rotateAround:function(c,s){var h=Math.cos(c),m=Math.sin(c),E=s.y+m*(this.x-s.x)+h*(this.y-s.y);return this.x=s.x+h*(this.x-s.x)-m*(this.y-s.y),this.y=E,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},x.convert=function(c){return c instanceof x?c:Array.isArray(c)?new x(c[0],c[1]):c};var y=p(g),_=T;function T(c,s,h,m){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(m-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=h,this.p2y=m}T.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(s===void 0&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,m=0;m<8;m++){var E=this.sampleCurveX(h)-c;if(Math.abs(E)<s)return h;var I=this.sampleCurveDerivativeX(h);if(Math.abs(I)<1e-6)break;h-=E/I}var O=0,F=1;for(h=c,m=0;m<20&&(E=this.sampleCurveX(h),!(Math.abs(E-c)<s));m++)c>E?O=h:F=h,h=.5*(F-O)+O;return h},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};var P=p(_);let A,M;function k(){return A==null&&(A=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),A}function R(){if(M==null&&(M=!1,k())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let m=0;m<5*5;m++){const E=4*m;s.fillStyle=`rgb(${E},${E+1},${E+2})`,s.fillRect(m%5,Math.floor(m/5),1,1)}const h=s.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&h[m]!==m){M=!0;break}}}return M||!1}function z(c,s,h,m){const E=new P(c,s,h,m);return function(I){return E.solve(I)}}const D=z(.25,.1,.25,1);function U(c,s,h){return Math.min(h,Math.max(s,c))}function V(c,s,h){const m=h-s,E=((c-s)%m+m)%m+s;return E===s?h:E}function G(c,...s){for(const h of s)for(const m in h)c[m]=h[m];return c}let H=1;function J(c,s,h){const m={};for(const E in c)m[E]=s.call(h||this,c[E],E,c);return m}function Y(c,s,h){const m={};for(const E in c)s.call(h||this,c[E],E,c)&&(m[E]=c[E]);return m}function X(c){return Array.isArray(c)?c.map(X):typeof c=="object"&&c?J(c,X):c}const ee={};function ce(c){ee[c]||(typeof console<"u"&&console.warn(c),ee[c]=!0)}function oe(c,s,h){return(h.y-c.y)*(s.x-c.x)>(s.y-c.y)*(h.x-c.x)}function we(c){let s=0;for(let h,m,E=0,I=c.length,O=I-1;E<I;O=E++)h=c[E],m=c[O],s+=(m.x-h.x)*(h.y+m.y);return s}function Ne(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let Be=null;function De(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ve(c,s,h,m,E){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const I=new VideoFrame(c,{timestamp:0});try{const O=I==null?void 0:I.format;if(!O||!O.startsWith("BGR")&&!O.startsWith("RGB"))throw new Error(`Unrecognized format ${O}`);const F=O.startsWith("BGR"),$=new Uint8ClampedArray(m*E*4);if(yield I.copyTo($,function(W,ne,ie,fe,de){const _e=4*Math.max(-ne,0),Te=(Math.max(0,ie)-ie)*fe*4+_e,Re=4*fe,Ve=Math.max(0,ne),tt=Math.max(0,ie);return{rect:{x:Ve,y:tt,width:Math.min(W.width,ne+fe)-Ve,height:Math.min(W.height,ie+de)-tt},layout:[{offset:Te,stride:Re}]}}(c,s,h,m,E)),F)for(let W=0;W<$.length;W+=4){const ne=$[W];$[W]=$[W+2],$[W+2]=ne}return $}finally{I.close()}})}let he,xe;const Ee="AbortError";function Ge(){return new Error(Ee)}const $e={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function be(c){return $e.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const He="global-dispatcher";class it extends Error{constructor(s,h,m,E){super(`AJAXError: ${h} (${s}): ${m}`),this.status=s,this.statusText=h,this.url=m,this.body=E}}const ct=()=>Ne(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,xt=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const m=be(c.url);if(m)return m(c,s);if(Ne(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:He},s)}if(!(/^file:/.test(h=c.url)||/^file:/.test(ct())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,E){return l(this,void 0,void 0,function*(){const I=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:ct(),signal:E.signal});m.type==="json"&&I.headers.set("Accept","application/json");const O=yield fetch(I);if(!O.ok){const W=yield O.blob();throw new it(O.status,O.statusText,m.url,W)}let F;F=m.type==="arrayBuffer"||m.type==="image"?O.arrayBuffer():m.type==="json"?O.json():O.text();const $=yield F;if(E.signal.aborted)throw Ge();return{data:$,cacheControl:O.headers.get("Cache-Control"),expires:O.headers.get("Expires")}})}(c,s);if(Ne(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:He},s)}var h;return function(m,E){return new Promise((I,O)=>{const F=new XMLHttpRequest;F.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(F.responseType="arraybuffer");for(const $ in m.headers)F.setRequestHeader($,m.headers[$]);m.type==="json"&&(F.responseType="text",F.setRequestHeader("Accept","application/json")),F.withCredentials=m.credentials==="include",F.onerror=()=>{O(new Error(F.statusText))},F.onload=()=>{if(!E.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let $=F.response;if(m.type==="json")try{$=JSON.parse(F.response)}catch(W){return void O(W)}I({data:$,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const $=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});O(new it(F.status,F.statusText,m.url,$))}},E.signal.addEventListener("abort",()=>{F.abort(),O(Ge())}),F.send(m.body)})}(c,s)};function Dt(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const s=new URL(c),h=window.location;return s.protocol===h.protocol&&s.host===h.host}function Qt(c,s,h){h[c]&&h[c].indexOf(s)!==-1||(h[c]=h[c]||[],h[c].push(s))}function Ft(c,s,h){if(h&&h[c]){const m=h[c].indexOf(s);m!==-1&&h[c].splice(m,1)}}class Kt{constructor(s,h={}){G(this,h),this.type=s}}class Gt extends Kt{constructor(s,h={}){super("error",G({error:s},h))}}class Tr{on(s,h){return this._listeners=this._listeners||{},Qt(s,h,this._listeners),this}off(s,h){return Ft(s,h,this._listeners),Ft(s,h,this._oneTimeListeners),this}once(s,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},Qt(s,h,this._oneTimeListeners),this):new Promise(m=>this.once(s,m))}fire(s,h){typeof s=="string"&&(s=new Kt(s,h||{}));const m=s.type;if(this.listens(m)){s.target=this;const E=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const F of E)F.call(this,s);const I=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const F of I)Ft(m,F,this._oneTimeListeners),F.call(this,s);const O=this._eventedParent;O&&(G(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),O.fire(s))}else s instanceof Gt&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,h){return this._eventedParent=s,this._eventedParentData=h,this}}var rt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const lt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function gt(c,s){const h={};for(const m in c)m!=="ref"&&(h[m]=c[m]);return lt.forEach(m=>{m in s&&(h[m]=s[m])}),h}function _t(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let h=0;h<c.length;h++)if(!_t(c[h],s[h]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(const h in c)if(!_t(c[h],s[h]))return!1;return!0}return c===s}function Pt(c,s){c.push(s)}function je(c,s,h){Pt(h,{command:"addSource",args:[c,s[c]]})}function vt(c,s,h){Pt(s,{command:"removeSource",args:[c]}),h[c]=!0}function St(c,s,h,m){vt(c,h,m),je(c,s,h)}function Lt(c,s,h){let m;for(m in c[h])if(Object.prototype.hasOwnProperty.call(c[h],m)&&m!=="data"&&!_t(c[h][m],s[h][m]))return!1;for(m in s[h])if(Object.prototype.hasOwnProperty.call(s[h],m)&&m!=="data"&&!_t(c[h][m],s[h][m]))return!1;return!0}function en(c,s,h,m,E,I){c=c||{},s=s||{};for(const O in c)Object.prototype.hasOwnProperty.call(c,O)&&(_t(c[O],s[O])||h.push({command:I,args:[m,O,s[O],E]}));for(const O in s)Object.prototype.hasOwnProperty.call(s,O)&&!Object.prototype.hasOwnProperty.call(c,O)&&(_t(c[O],s[O])||h.push({command:I,args:[m,O,s[O],E]}))}function wn(c){return c.id}function gn(c,s){return c[s.id]=s,c}class bt{constructor(s,h,m,E){this.message=(s?`${s}: `:"")+m,E&&(this.identifier=E),h!=null&&h.__line__&&(this.line=h.__line__)}}function Vn(c,...s){for(const h of s)for(const m in h)c[m]=h[m];return c}class _r extends Error{constructor(s,h){super(h),this.message=h,this.key=s}}class Gs{constructor(s,h=[]){this.parent=s,this.bindings={};for(const[m,E]of h)this.bindings[m]=E}concat(s){return new Gs(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const Xr={kind:"null"},kt={kind:"number"},_n={kind:"string"},Pn={kind:"boolean"},Cr={kind:"color"},Zo={kind:"object"},Tn={kind:"value"},Hs={kind:"collator"},qr={kind:"formatted"},Oe={kind:"padding"},K={kind:"resolvedImage"},te={kind:"variableAnchorOffsetCollection"};function le(c,s){return{kind:"array",itemType:c,N:s}}function pe(c){if(c.kind==="array"){const s=pe(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const ke=[Xr,kt,_n,Pn,Cr,qr,Zo,le(Tn),Oe,K,te];function ge(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!ge(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const h of ke)if(!ge(h,s))return null}}return`Expected ${pe(c)} but found ${pe(s)} instead.`}function ze(c,s){return s.some(h=>h.kind===c.kind)}function Ie(c,s){return s.some(h=>h==="null"?c===null:h==="array"?Array.isArray(c):h==="object"?c&&!Array.isArray(c)&&typeof c=="object":h===typeof c)}function qe(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}const Qe=.96422,ot=.82521,et=4/29,ht=6/29,Zt=3*ht*ht,an=ht*ht*ht,sn=Math.PI/180,Rn=180/Math.PI;function or(c){return(c%=360)<0&&(c+=360),c}function fr([c,s,h,m]){let E,I;const O=vn((.2225045*(c=ur(c))+.7168786*(s=ur(s))+.0606169*(h=ur(h)))/1);c===s&&s===h?E=I=O:(E=vn((.4360747*c+.3850649*s+.1430804*h)/Qe),I=vn((.0139322*c+.0971045*s+.7141733*h)/ot));const F=116*O-16;return[F<0?0:F,500*(E-O),200*(O-I),m]}function ur(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function vn(c){return c>an?Math.pow(c,1/3):c/Zt+et}function Nr([c,s,h,m]){let E=(c+16)/116,I=isNaN(s)?E:E+s/500,O=isNaN(h)?E:E-h/200;return E=1*ji(E),I=Qe*ji(I),O=ot*ji(O),[Gr(3.1338561*I-1.6168667*E-.4906146*O),Gr(-.9787684*I+1.9161415*E+.033454*O),Gr(.0719453*I-.2289914*E+1.4052427*O),m]}function Gr(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function ji(c){return c>ht?c*c*c:Zt*(c-et)}function bi(c){return parseInt(c.padEnd(2,c),16)/255}function Yr(c,s){return Bn(s?c/100:c,0,1)}function Bn(c,s,h){return Math.min(Math.max(s,c),h)}function cr(c){return!c.some(Number.isNaN)}const To={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class sr{constructor(s,h,m,E=1,I=!0){this.r=s,this.g=h,this.b=m,this.a=E,I||(this.r*=E,this.g*=E,this.b*=E,E||this.overwriteGetter("rgb",[s,h,m,E]))}static parse(s){if(s instanceof sr)return s;if(typeof s!="string")return;const h=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const E=To[m];if(E){const[O,F,$]=E;return[O/255,F/255,$/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const O=m.length<6?1:2;let F=1;return[bi(m.slice(F,F+=O)),bi(m.slice(F,F+=O)),bi(m.slice(F,F+=O)),bi(m.slice(F,F+O)||"ff")]}if(m.startsWith("rgb")){const O=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(O){const[F,$,W,ne,ie,fe,de,_e,Te,Re,Ve,tt]=O,Ze=[ne||" ",de||" ",Re].join("");if(Ze==="  "||Ze==="  /"||Ze===",,"||Ze===",,,"){const Ye=[W,fe,Te].join(""),yt=Ye==="%%%"?100:Ye===""?255:0;if(yt){const wt=[Bn(+$/yt,0,1),Bn(+ie/yt,0,1),Bn(+_e/yt,0,1),Ve?Yr(+Ve,tt):1];if(cr(wt))return wt}}return}}const I=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){const[O,F,$,W,ne,ie,fe,de,_e]=I,Te=[$||" ",ne||" ",fe].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const Re=[+F,Bn(+W,0,100),Bn(+ie,0,100),de?Yr(+de,_e):1];if(cr(Re))return function([Ve,tt,Ze,Ye]){function yt(wt){const Xt=(wt+Ve/30)%12,ln=tt*Math.min(Ze,1-Ze);return Ze-ln*Math.max(-1,Math.min(Xt-3,9-Xt,1))}return Ve=or(Ve),tt/=100,Ze/=100,[yt(0),yt(8),yt(4),Ye]}(Re)}}}(s);return h?new sr(...h,!1):void 0}get rgb(){const{r:s,g:h,b:m,a:E}=this,I=E||1/0;return this.overwriteGetter("rgb",[s/I,h/I,m/I,E])}get hcl(){return this.overwriteGetter("hcl",function(s){const[h,m,E,I]=fr(s),O=Math.sqrt(m*m+E*E);return[Math.round(1e4*O)?or(Math.atan2(E,m)*Rn):NaN,O,h,I]}(this.rgb))}get lab(){return this.overwriteGetter("lab",fr(this.rgb))}overwriteGetter(s,h){return Object.defineProperty(this,s,{value:h}),h}toString(){const[s,h,m,E]=this.rgb;return`rgba(${[s,h,m].map(I=>Math.round(255*I)).join(",")},${E})`}}sr.black=new sr(0,0,0,1),sr.white=new sr(1,1,1,1),sr.transparent=new sr(0,0,0,0),sr.red=new sr(1,0,0,1);class hf{constructor(s,h,m){this.sensitivity=s?h?"variant":"case":h?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,h){return this.collator.compare(s,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class fm{constructor(s,h,m,E,I){this.text=s,this.image=h,this.scale=m,this.fontStack=E,this.textColor=I}}class ms{constructor(s){this.sections=s}static fromString(s){return new ms([new fm(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof ms?s:ms.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class Co{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Co)return s;if(typeof s=="number")return new Co([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const h of s)if(typeof h!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new Co(s)}}toString(){return JSON.stringify(this.values)}}const yl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class gs{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof gs)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let h=0;h<s.length;h+=2){const m=s[h],E=s[h+1];if(typeof m!="string"||!yl.has(m)||!Array.isArray(E)||E.length!==2||typeof E[0]!="number"||typeof E[1]!="number")return}return new gs(s)}}toString(){return JSON.stringify(this.values)}}class ys{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new ys({name:s,available:!1}):null}}function $a(c,s,h,m){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof h=="number"&&h>=0&&h<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,s,h,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,s,h,m]:[c,s,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ar(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof sr||c instanceof hf||c instanceof ms||c instanceof Co||c instanceof gs||c instanceof ys)return!0;if(Array.isArray(c)){for(const s of c)if(!ar(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!ar(c[s]))return!1;return!0}return!1}function jn(c){if(c===null)return Xr;if(typeof c=="string")return _n;if(typeof c=="boolean")return Pn;if(typeof c=="number")return kt;if(c instanceof sr)return Cr;if(c instanceof hf)return Hs;if(c instanceof ms)return qr;if(c instanceof Co)return Oe;if(c instanceof gs)return te;if(c instanceof ys)return K;if(Array.isArray(c)){const s=c.length;let h;for(const m of c){const E=jn(m);if(h){if(h===E)continue;h=Tn;break}h=E}return le(h||Tn,s)}return Zo}function su(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof sr||c instanceof ms||c instanceof Co||c instanceof gs||c instanceof ys?c.toString():JSON.stringify(c)}class _s{constructor(s,h){this.type=s,this.value=h}static parse(s,h){if(s.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!ar(s[1]))return h.error("invalid value");const m=s[1];let E=jn(m);const I=h.expectedType;return E.kind!=="array"||E.N!==0||!I||I.kind!=="array"||typeof I.N=="number"&&I.N!==0||(E=I),new _s(E,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Lr{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const th={string:_n,number:kt,boolean:Pn,object:Zo};class Cn{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");let m,E=1;const I=s[0];if(I==="array"){let F,$;if(s.length>2){const W=s[1];if(typeof W!="string"||!(W in th)||W==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);F=th[W],E++}else F=Tn;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return h.error('The length argument to "array" must be a positive integer literal',2);$=s[2],E++}m=le(F,$)}else{if(!th[I])throw new Error(`Types doesn't contain name = ${I}`);m=th[I]}const O=[];for(;E<s.length;E++){const F=h.parse(s[E],E,Tn);if(!F)return null;O.push(F)}return new Cn(m,O)}evaluate(s){for(let h=0;h<this.args.length;h++){const m=this.args[h].evaluate(s);if(!ge(this.type,jn(m)))return m;if(h===this.args.length-1)throw new Lr(`Expected value to be of type ${pe(this.type)}, but found ${pe(jn(m))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const Jr={"to-boolean":Pn,"to-color":Cr,"to-number":kt,"to-string":_n};class Zs{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const m=s[0];if(!Jr[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&s.length!==2)return h.error("Expected one argument.");const E=Jr[m],I=[];for(let O=1;O<s.length;O++){const F=h.parse(s[O],O,Tn);if(!F)return null;I.push(F)}return new Zs(E,I)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let h,m;for(const E of this.args){if(h=E.evaluate(s),m=null,h instanceof sr)return h;if(typeof h=="string"){const I=s.parseColor(h);if(I)return I}else if(Array.isArray(h)&&(m=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:$a(h[0],h[1],h[2],h[3]),!m))return new sr(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Lr(m||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const m of this.args){h=m.evaluate(s);const E=Co.parse(h);if(E)return E}throw new Lr(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const m of this.args){h=m.evaluate(s);const E=gs.parse(h);if(E)return E}throw new Lr(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const m of this.args){if(h=m.evaluate(s),h===null)return 0;const E=Number(h);if(!isNaN(E))return E}throw new Lr(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return ms.fromString(su(this.args[0].evaluate(s)));case"resolvedImage":return ys.fromString(su(this.args[0].evaluate(s)));default:return su(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const au=["Unknown","Point","LineString","Polygon"];class qn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?au[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let h=this._parseColorCache[s];return h||(h=this._parseColorCache[s]=sr.parse(s)),h}}class Id{constructor(s,h,m=[],E,I=new Gs,O=[]){this.registry=s,this.path=m,this.key=m.map(F=>`[${F}]`).join(""),this.scope=I,this.errors=O,this.expectedType=E,this._isConstant=h}parse(s,h,m,E,I={}){return h?this.concat(h,m,E)._parse(s,I):this._parse(s,I)}_parse(s,h){function m(E,I,O){return O==="assert"?new Cn(I,[E]):O==="coerce"?new Zs(I,[E]):E}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const E=s[0];if(typeof E!="string")return this.error(`Expression name must be a string, but found ${typeof E} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const I=this.registry[E];if(I){let O=I.parse(s,this);if(!O)return null;if(this.expectedType){const F=this.expectedType,$=O.type;if(F.kind!=="string"&&F.kind!=="number"&&F.kind!=="boolean"&&F.kind!=="object"&&F.kind!=="array"||$.kind!=="value")if(F.kind!=="color"&&F.kind!=="formatted"&&F.kind!=="resolvedImage"||$.kind!=="value"&&$.kind!=="string")if(F.kind!=="padding"||$.kind!=="value"&&$.kind!=="number"&&$.kind!=="array")if(F.kind!=="variableAnchorOffsetCollection"||$.kind!=="value"&&$.kind!=="array"){if(this.checkSubtype(F,$))return null}else O=m(O,F,h.typeAnnotation||"coerce");else O=m(O,F,h.typeAnnotation||"coerce");else O=m(O,F,h.typeAnnotation||"coerce");else O=m(O,F,h.typeAnnotation||"assert")}if(!(O instanceof _s)&&O.type.kind!=="resolvedImage"&&this._isConstant(O)){const F=new qn;try{O=new _s(O.type,O.evaluate(F))}catch($){return this.error($.message),null}}return O}return this.error(`Unknown expression "${E}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,h,m){const E=typeof s=="number"?this.path.concat(s):this.path,I=m?this.scope.concat(m):this.scope;return new Id(this.registry,this._isConstant,E,h||null,I,this.errors)}error(s,...h){const m=`${this.key}${h.map(E=>`[${E}]`).join("")}`;this.errors.push(new _r(m,s))}checkSubtype(s,h){const m=ge(s,h);return m&&this.error(m),m}}class _l{constructor(s,h,m){this.type=Hs,this.locale=m,this.caseSensitive=s,this.diacriticSensitive=h}static parse(s,h){if(s.length!==2)return h.error("Expected one argument.");const m=s[1];if(typeof m!="object"||Array.isArray(m))return h.error("Collator options argument must be an object.");const E=h.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Pn);if(!E)return null;const I=h.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Pn);if(!I)return null;let O=null;return m.locale&&(O=h.parse(m.locale,1,_n),!O)?null:new _l(E,I,O)}evaluate(s){return new hf(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const Wo=8192;function ii(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function ca(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function ff(c,s){const h=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,E=Math.pow(2,s.z);return[Math.round(h*E*Wo),Math.round(m*E*Wo)]}function nh(c,s,h){const m=c[0]-s[0],E=c[1]-s[1],I=c[0]-h[0],O=c[1]-h[1];return m*O-I*E==0&&m*I<=0&&E*O<=0}function rh(c,s){let h=!1;for(let O=0,F=s.length;O<F;O++){const $=s[O];for(let W=0,ne=$.length;W<ne-1;W++){if(nh(c,$[W],$[W+1]))return!1;(E=$[W])[1]>(m=c)[1]!=(I=$[W+1])[1]>m[1]&&m[0]<(I[0]-E[0])*(m[1]-E[1])/(I[1]-E[1])+E[0]&&(h=!h)}}var m,E,I;return h}function df(c,s){for(let h=0;h<s.length;h++)if(rh(c,s[h]))return!0;return!1}function Pd(c,s,h,m){const E=m[0]-h[0],I=m[1]-h[1],O=(c[0]-h[0])*I-E*(c[1]-h[1]),F=(s[0]-h[0])*I-E*(s[1]-h[1]);return O>0&&F<0||O<0&&F>0}function dm(c,s,h){for(const W of h)for(let ne=0;ne<W.length-1;++ne)if((F=[(O=W[ne+1])[0]-(I=W[ne])[0],O[1]-I[1]])[0]*($=[(E=s)[0]-(m=c)[0],E[1]-m[1]])[1]-F[1]*$[0]!=0&&Pd(m,E,I,O)&&Pd(I,O,m,E))return!0;var m,E,I,O,F,$;return!1}function pf(c,s){for(let h=0;h<c.length;++h)if(!rh(c[h],s))return!1;for(let h=0;h<c.length-1;++h)if(dm(c[h],c[h+1],s))return!1;return!0}function Ld(c,s){for(let h=0;h<s.length;h++)if(pf(c,s[h]))return!0;return!1}function ih(c,s,h){const m=[];for(let E=0;E<c.length;E++){const I=[];for(let O=0;O<c[E].length;O++){const F=ff(c[E][O],h);ii(s,F),I.push(F)}m.push(I)}return m}function mf(c,s,h){const m=[];for(let E=0;E<c.length;E++){const I=ih(c[E],s,h);m.push(I)}return m}function pm(c,s,h,m){if(c[0]<h[0]||c[0]>h[2]){const E=.5*m;let I=c[0]-h[0]>E?-m:h[0]-c[0]>E?m:0;I===0&&(I=c[0]-h[2]>E?-m:h[2]-c[0]>E?m:0),c[0]+=I}ii(s,c)}function oh(c,s,h,m){const E=Math.pow(2,m.z)*Wo,I=[m.x*Wo,m.y*Wo],O=[];for(const F of c)for(const $ of F){const W=[$.x+I[0],$.y+I[1]];pm(W,s,h,E),O.push(W)}return O}function Kg(c,s,h,m){const E=Math.pow(2,m.z)*Wo,I=[m.x*Wo,m.y*Wo],O=[];for(const $ of c){const W=[];for(const ne of $){const ie=[ne.x+I[0],ne.y+I[1]];ii(s,ie),W.push(ie)}O.push(W)}if(s[2]-s[0]<=E/2){(F=s)[0]=F[1]=1/0,F[2]=F[3]=-1/0;for(const $ of O)for(const W of $)pm(W,s,h,E)}var F;return O}class On{constructor(s,h){this.type=Pn,this.geojson=s,this.geometries=h}static parse(s,h){if(s.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(ar(s[1])){const m=s[1];if(m.type==="FeatureCollection"){const E=[];for(const I of m.features){const{type:O,coordinates:F}=I.geometry;O==="Polygon"&&E.push(F),O==="MultiPolygon"&&E.push(...F)}if(E.length)return new On(m,{type:"MultiPolygon",coordinates:E})}else if(m.type==="Feature"){const E=m.geometry.type;if(E==="Polygon"||E==="MultiPolygon")return new On(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new On(m,m)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(h,m){const E=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],O=h.canonicalID();if(m.type==="Polygon"){const F=ih(m.coordinates,I,O),$=oh(h.geometry(),E,I,O);if(!ca(E,I))return!1;for(const W of $)if(!rh(W,F))return!1}if(m.type==="MultiPolygon"){const F=mf(m.coordinates,I,O),$=oh(h.geometry(),E,I,O);if(!ca(E,I))return!1;for(const W of $)if(!df(W,F))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(h,m){const E=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],O=h.canonicalID();if(m.type==="Polygon"){const F=ih(m.coordinates,I,O),$=Kg(h.geometry(),E,I,O);if(!ca(E,I))return!1;for(const W of $)if(!pf(W,F))return!1}if(m.type==="MultiPolygon"){const F=mf(m.coordinates,I,O),$=Kg(h.geometry(),E,I,O);if(!ca(E,I))return!1;for(const W of $)if(!Ld(W,F))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class vs{constructor(s,h){this.type=h.type,this.name=s,this.boundExpression=h}static parse(s,h){if(s.length!==2||typeof s[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const m=s[1];return h.scope.has(m)?new vs(m,h.scope.get(m)):h.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Yn{constructor(s,h,m,E){this.name=s,this.type=h,this._evaluate=m,this.args=E}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,h){const m=s[0],E=Yn.definitions[m];if(!E)return h.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const I=Array.isArray(E)?E[0]:E.type,O=Array.isArray(E)?[[E[1],E[2]]]:E.overloads,F=O.filter(([W])=>!Array.isArray(W)||W.length===s.length-1);let $=null;for(const[W,ne]of F){$=new Id(h.registry,sh,h.path,null,h.scope);const ie=[];let fe=!1;for(let de=1;de<s.length;de++){const _e=s[de],Te=Array.isArray(W)?W[de-1]:W.type,Re=$.parse(_e,1+ie.length,Te);if(!Re){fe=!0;break}ie.push(Re)}if(!fe)if(Array.isArray(W)&&W.length!==ie.length)$.error(`Expected ${W.length} arguments, but found ${ie.length} instead.`);else{for(let de=0;de<ie.length;de++){const _e=Array.isArray(W)?W[de]:W.type,Te=ie[de];$.concat(de+1).checkSubtype(_e,Te.type)}if($.errors.length===0)return new Yn(m,I,ne,ie)}}if(F.length===1)h.errors.push(...$.errors);else{const W=(F.length?F:O).map(([ie])=>{return fe=ie,Array.isArray(fe)?`(${fe.map(pe).join(", ")})`:`(${pe(fe.type)}...)`;var fe}).join(" | "),ne=[];for(let ie=1;ie<s.length;ie++){const fe=h.parse(s[ie],1+ne.length);if(!fe)return null;ne.push(pe(fe.type))}h.error(`Expected arguments of type ${W}, but found (${ne.join(", ")}) instead.`)}return null}static register(s,h){Yn.definitions=h;for(const m in h)s[m]=Yn}}function sh(c){if(c instanceof vs)return sh(c.boundExpression);if(c instanceof Yn&&c.name==="error"||c instanceof _l||c instanceof On)return!1;const s=c instanceof Zs||c instanceof Cn;let h=!0;return c.eachChild(m=>{h=s?h&&sh(m):h&&m instanceof _s}),!!h&&ah(c)&&ic(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ah(c){if(c instanceof Yn&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof On)return!1;let s=!0;return c.eachChild(h=>{s&&!ah(h)&&(s=!1)}),s}function rc(c){if(c instanceof Yn&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(h=>{s&&!rc(h)&&(s=!1)}),s}function ic(c,s){if(c instanceof Yn&&s.indexOf(c.name)>=0)return!1;let h=!0;return c.eachChild(m=>{h&&!ic(m,s)&&(h=!1)}),h}function ha(c,s){const h=c.length-1;let m,E,I=0,O=h,F=0;for(;I<=O;)if(F=Math.floor((I+O)/2),m=c[F],E=c[F+1],m<=s){if(F===h||s<E)return F;I=F+1}else{if(!(m>s))throw new Lr("Input is not a number.");O=F-1}return 0}class oc{constructor(s,h,m){this.type=s,this.input=h,this.labels=[],this.outputs=[];for(const[E,I]of m)this.labels.push(E),this.outputs.push(I)}static parse(s,h){if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");const m=h.parse(s[1],1,kt);if(!m)return null;const E=[];let I=null;h.expectedType&&h.expectedType.kind!=="value"&&(I=h.expectedType);for(let O=1;O<s.length;O+=2){const F=O===1?-1/0:s[O],$=s[O+1],W=O,ne=O+1;if(typeof F!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(E.length&&E[E.length-1][0]>=F)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);const ie=h.parse($,ne,I);if(!ie)return null;I=I||ie.type,E.push([F,ie])}return new oc(I,m,E)}evaluate(s){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(s);const E=this.input.evaluate(s);if(E<=h[0])return m[0].evaluate(s);const I=h.length;return E>=h[I-1]?m[I-1].evaluate(s):m[ha(h,E)].evaluate(s)}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function gf(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var uo=lu;function lu(c,s,h,m){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(m-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=h,this.p2y=m}lu.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(s===void 0&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,m=0;m<8;m++){var E=this.sampleCurveX(h)-c;if(Math.abs(E)<s)return h;var I=this.sampleCurveDerivativeX(h);if(Math.abs(I)<1e-6)break;h-=E/I}var O=0,F=1;for(h=c,m=0;m<20&&(E=this.sampleCurveX(h),!(Math.abs(E-c)<s));m++)c>E?O=h:F=h,h=.5*(F-O)+O;return h},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};var Xg=gf(uo);function uu(c,s,h){return c+h*(s-c)}function Ad(c,s,h){return c.map((m,E)=>uu(m,s[E],h))}const Io={number:uu,color:function(c,s,h,m="rgb"){switch(m){case"rgb":{const[E,I,O,F]=Ad(c.rgb,s.rgb,h);return new sr(E,I,O,F,!1)}case"hcl":{const[E,I,O,F]=c.hcl,[$,W,ne,ie]=s.hcl;let fe,de;if(isNaN(E)||isNaN($))isNaN(E)?isNaN($)?fe=NaN:(fe=$,O!==1&&O!==0||(de=W)):(fe=E,ne!==1&&ne!==0||(de=I));else{let tt=$-E;$>E&&tt>180?tt-=360:$<E&&E-$>180&&(tt+=360),fe=E+h*tt}const[_e,Te,Re,Ve]=function([tt,Ze,Ye,yt]){return tt=isNaN(tt)?0:tt*sn,Nr([Ye,Math.cos(tt)*Ze,Math.sin(tt)*Ze,yt])}([fe,de??uu(I,W,h),uu(O,ne,h),uu(F,ie,h)]);return new sr(_e,Te,Re,Ve,!1)}case"lab":{const[E,I,O,F]=Nr(Ad(c.lab,s.lab,h));return new sr(E,I,O,F,!1)}}},array:Ad,padding:function(c,s,h){return new Co(Ad(c.values,s.values,h))},variableAnchorOffsetCollection:function(c,s,h){const m=c.values,E=s.values;if(m.length!==E.length)throw new Lr(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${s.toString()}`);const I=[];for(let O=0;O<m.length;O+=2){if(m[O]!==E[O])throw new Lr(`Cannot interpolate values containing mismatched anchors. from[${O}]: ${m[O]}, to[${O}]: ${E[O]}`);I.push(m[O]);const[F,$]=m[O+1],[W,ne]=E[O+1];I.push([uu(F,W,h),uu($,ne,h)])}return new gs(I)}};class Yi{constructor(s,h,m,E,I){this.type=s,this.operator=h,this.interpolation=m,this.input=E,this.labels=[],this.outputs=[];for(const[O,F]of I)this.labels.push(O),this.outputs.push(F)}static interpolationFactor(s,h,m,E){let I=0;if(s.name==="exponential")I=hr(h,s.base,m,E);else if(s.name==="linear")I=hr(h,1,m,E);else if(s.name==="cubic-bezier"){const O=s.controlPoints;I=new Xg(O[0],O[1],O[2],O[3]).solve(hr(h,1,m,E))}return I}static parse(s,h){let[m,E,I,...O]=s;if(!Array.isArray(E)||E.length===0)return h.error("Expected an interpolation type expression.",1);if(E[0]==="linear")E={name:"linear"};else if(E[0]==="exponential"){const W=E[1];if(typeof W!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);E={name:"exponential",base:W}}else{if(E[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(E[0])}`,1,0);{const W=E.slice(1);if(W.length!==4||W.some(ne=>typeof ne!="number"||ne<0||ne>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);E={name:"cubic-bezier",controlPoints:W}}}if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(I=h.parse(I,2,kt),!I)return null;const F=[];let $=null;m==="interpolate-hcl"||m==="interpolate-lab"?$=Cr:h.expectedType&&h.expectedType.kind!=="value"&&($=h.expectedType);for(let W=0;W<O.length;W+=2){const ne=O[W],ie=O[W+1],fe=W+3,de=W+4;if(typeof ne!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',fe);if(F.length&&F[F.length-1][0]>=ne)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',fe);const _e=h.parse(ie,de,$);if(!_e)return null;$=$||_e.type,F.push([ne,_e])}return qe($,kt)||qe($,Cr)||qe($,Oe)||qe($,te)||qe($,le(kt))?new Yi($,m,E,I,F):h.error(`Type ${pe($)} is not interpolatable.`)}evaluate(s){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(s);const E=this.input.evaluate(s);if(E<=h[0])return m[0].evaluate(s);const I=h.length;if(E>=h[I-1])return m[I-1].evaluate(s);const O=ha(h,E),F=Yi.interpolationFactor(this.interpolation,E,h[O],h[O+1]),$=m[O].evaluate(s),W=m[O+1].evaluate(s);switch(this.operator){case"interpolate":return Io[this.type.kind]($,W,F);case"interpolate-hcl":return Io.color($,W,F,"hcl");case"interpolate-lab":return Io.color($,W,F,"lab")}}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function hr(c,s,h,m){const E=m-h,I=c-h;return E===0?0:s===1?I/E:(Math.pow(s,I)-1)/(Math.pow(s,E)-1)}class yf{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expectected at least one argument.");let m=null;const E=h.expectedType;E&&E.kind!=="value"&&(m=E);const I=[];for(const F of s.slice(1)){const $=h.parse(F,1+I.length,m,void 0,{typeAnnotation:"omit"});if(!$)return null;m=m||$.type,I.push($)}if(!m)throw new Error("No output type");const O=E&&I.some(F=>ge(E,F.type));return new yf(O?Tn:m,I)}evaluate(s){let h,m=null,E=0;for(const I of this.args)if(E++,m=I.evaluate(s),m&&m instanceof ys&&!m.available&&(h||(h=m.name),m=null,E===this.args.length&&(m=h)),m!==null)break;return m}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}class Jn{constructor(s,h){this.type=h.type,this.bindings=[].concat(s),this.result=h}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const h of this.bindings)s(h[1]);s(this.result)}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const m=[];for(let I=1;I<s.length-1;I+=2){const O=s[I];if(typeof O!="string")return h.error(`Expected string, but found ${typeof O} instead.`,I);if(/[^a-zA-Z0-9_]/.test(O))return h.error("Variable names must contain only alphanumeric characters or '_'.",I);const F=h.parse(s[I+1],I+1);if(!F)return null;m.push([O,F])}const E=h.parse(s[s.length-1],s.length-1,h.expectedType,m);return E?new Jn(m,E):null}outputDefined(){return this.result.outputDefined()}}class mm{constructor(s,h,m){this.type=s,this.index=h,this.input=m}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,kt),E=h.parse(s[2],2,le(h.expectedType||Tn));return m&&E?new mm(E.type.itemType,m,E):null}evaluate(s){const h=this.index.evaluate(s),m=this.input.evaluate(s);if(h<0)throw new Lr(`Array index out of bounds: ${h} < 0.`);if(h>=m.length)throw new Lr(`Array index out of bounds: ${h} > ${m.length-1}.`);if(h!==Math.floor(h))throw new Lr(`Array index must be an integer, but found ${h} instead.`);return m[h]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class xs{constructor(s,h){this.type=Pn,this.needle=s,this.haystack=h}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Tn),E=h.parse(s[2],2,Tn);return m&&E?ze(m.type,[Pn,_n,kt,Xr,Tn])?new xs(m,E):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(m.type)} instead`):null}evaluate(s){const h=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!m)return!1;if(!Ie(h,["boolean","string","number","null"]))throw new Lr(`Expected first argument to be of type boolean, string, number or null, but found ${pe(jn(h))} instead.`);if(!Ie(m,["string","array"]))throw new Lr(`Expected second argument to be of type array or string, but found ${pe(jn(m))} instead.`);return m.indexOf(h)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class cu{constructor(s,h,m){this.type=kt,this.needle=s,this.haystack=h,this.fromIndex=m}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Tn),E=h.parse(s[2],2,Tn);if(!m||!E)return null;if(!ze(m.type,[Pn,_n,kt,Xr,Tn]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(m.type)} instead`);if(s.length===4){const I=h.parse(s[3],3,kt);return I?new cu(m,E,I):null}return new cu(m,E)}evaluate(s){const h=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!Ie(h,["boolean","string","number","null"]))throw new Lr(`Expected first argument to be of type boolean, string, number or null, but found ${pe(jn(h))} instead.`);if(!Ie(m,["string","array"]))throw new Lr(`Expected second argument to be of type array or string, but found ${pe(jn(m))} instead.`);if(this.fromIndex){const E=this.fromIndex.evaluate(s);return m.indexOf(h,E)}return m.indexOf(h)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class Od{constructor(s,h,m,E,I,O){this.inputType=s,this.type=h,this.input=m,this.cases=E,this.outputs=I,this.otherwise=O}static parse(s,h){if(s.length<5)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return h.error("Expected an even number of arguments.");let m,E;h.expectedType&&h.expectedType.kind!=="value"&&(E=h.expectedType);const I={},O=[];for(let W=2;W<s.length-1;W+=2){let ne=s[W];const ie=s[W+1];Array.isArray(ne)||(ne=[ne]);const fe=h.concat(W);if(ne.length===0)return fe.error("Expected at least one branch label.");for(const _e of ne){if(typeof _e!="number"&&typeof _e!="string")return fe.error("Branch labels must be numbers or strings.");if(typeof _e=="number"&&Math.abs(_e)>Number.MAX_SAFE_INTEGER)return fe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof _e=="number"&&Math.floor(_e)!==_e)return fe.error("Numeric branch labels must be integer values.");if(m){if(fe.checkSubtype(m,jn(_e)))return null}else m=jn(_e);if(I[String(_e)]!==void 0)return fe.error("Branch labels must be unique.");I[String(_e)]=O.length}const de=h.parse(ie,W,E);if(!de)return null;E=E||de.type,O.push(de)}const F=h.parse(s[1],1,Tn);if(!F)return null;const $=h.parse(s[s.length-1],s.length-1,E);return $?F.type.kind!=="value"&&h.concat(1).checkSubtype(m,F.type)?null:new Od(m,E,F,I,O,$):null}evaluate(s){const h=this.input.evaluate(s);return(jn(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class gm{constructor(s,h,m){this.type=s,this.branches=h,this.otherwise=m}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return h.error("Expected an odd number of arguments.");let m;h.expectedType&&h.expectedType.kind!=="value"&&(m=h.expectedType);const E=[];for(let O=1;O<s.length-1;O+=2){const F=h.parse(s[O],O,Pn);if(!F)return null;const $=h.parse(s[O+1],O+1,m);if(!$)return null;E.push([F,$]),m=m||$.type}const I=h.parse(s[s.length-1],s.length-1,m);if(!I)return null;if(!m)throw new Error("Can't infer output type");return new gm(m,E,I)}evaluate(s){for(const[h,m]of this.branches)if(h.evaluate(s))return m.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[h,m]of this.branches)s(h),s(m);s(this.otherwise)}outputDefined(){return this.branches.every(([s,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class lh{constructor(s,h,m,E){this.type=s,this.input=h,this.beginIndex=m,this.endIndex=E}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Tn),E=h.parse(s[2],2,kt);if(!m||!E)return null;if(!ze(m.type,[le(Tn),_n,Tn]))return h.error(`Expected first argument to be of type array or string, but found ${pe(m.type)} instead`);if(s.length===4){const I=h.parse(s[3],3,kt);return I?new lh(m.type,m,E,I):null}return new lh(m.type,m,E)}evaluate(s){const h=this.input.evaluate(s),m=this.beginIndex.evaluate(s);if(!Ie(h,["string","array"]))throw new Lr(`Expected first argument to be of type array or string, but found ${pe(jn(h))} instead.`);if(this.endIndex){const E=this.endIndex.evaluate(s);return h.slice(m,E)}return h.slice(m)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function Yg(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function ym(c,s,h,m){return m.compare(s,h)===0}function uh(c,s,h){const m=c!=="=="&&c!=="!=";return class $6{constructor(I,O,F){this.type=Pn,this.lhs=I,this.rhs=O,this.collator=F,this.hasUntypedArgument=I.type.kind==="value"||O.type.kind==="value"}static parse(I,O){if(I.length!==3&&I.length!==4)return O.error("Expected two or three arguments.");const F=I[0];let $=O.parse(I[1],1,Tn);if(!$)return null;if(!Yg(F,$.type))return O.concat(1).error(`"${F}" comparisons are not supported for type '${pe($.type)}'.`);let W=O.parse(I[2],2,Tn);if(!W)return null;if(!Yg(F,W.type))return O.concat(2).error(`"${F}" comparisons are not supported for type '${pe(W.type)}'.`);if($.type.kind!==W.type.kind&&$.type.kind!=="value"&&W.type.kind!=="value")return O.error(`Cannot compare types '${pe($.type)}' and '${pe(W.type)}'.`);m&&($.type.kind==="value"&&W.type.kind!=="value"?$=new Cn(W.type,[$]):$.type.kind!=="value"&&W.type.kind==="value"&&(W=new Cn($.type,[W])));let ne=null;if(I.length===4){if($.type.kind!=="string"&&W.type.kind!=="string"&&$.type.kind!=="value"&&W.type.kind!=="value")return O.error("Cannot use collator to compare non-string types.");if(ne=O.parse(I[3],3,Hs),!ne)return null}return new $6($,W,ne)}evaluate(I){const O=this.lhs.evaluate(I),F=this.rhs.evaluate(I);if(m&&this.hasUntypedArgument){const $=jn(O),W=jn(F);if($.kind!==W.kind||$.kind!=="string"&&$.kind!=="number")throw new Lr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${$.kind}, ${W.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const $=jn(O),W=jn(F);if($.kind!=="string"||W.kind!=="string")return s(I,O,F)}return this.collator?h(I,O,F,this.collator.evaluate(I)):s(I,O,F)}eachChild(I){I(this.lhs),I(this.rhs),this.collator&&I(this.collator)}outputDefined(){return!0}}}const xv=uh("==",function(c,s,h){return s===h},ym),_m=uh("!=",function(c,s,h){return s!==h},function(c,s,h,m){return!ym(0,s,h,m)}),bv=uh("<",function(c,s,h){return s<h},function(c,s,h,m){return m.compare(s,h)<0}),Ua=uh(">",function(c,s,h){return s>h},function(c,s,h,m){return m.compare(s,h)>0}),wv=uh("<=",function(c,s,h){return s<=h},function(c,s,h,m){return m.compare(s,h)<=0}),Jg=uh(">=",function(c,s,h){return s>=h},function(c,s,h,m){return m.compare(s,h)>=0});class Va{constructor(s,h,m,E,I){this.type=_n,this.number=s,this.locale=h,this.currency=m,this.minFractionDigits=E,this.maxFractionDigits=I}static parse(s,h){if(s.length!==3)return h.error("Expected two arguments.");const m=h.parse(s[1],1,kt);if(!m)return null;const E=s[2];if(typeof E!="object"||Array.isArray(E))return h.error("NumberFormat options argument must be an object.");let I=null;if(E.locale&&(I=h.parse(E.locale,1,_n),!I))return null;let O=null;if(E.currency&&(O=h.parse(E.currency,1,_n),!O))return null;let F=null;if(E["min-fraction-digits"]&&(F=h.parse(E["min-fraction-digits"],1,kt),!F))return null;let $=null;return E["max-fraction-digits"]&&($=h.parse(E["max-fraction-digits"],1,kt),!$)?null:new Va(m,I,O,F,$)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class _f{constructor(s){this.type=qr,this.sections=s}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const m=s[1];if(!Array.isArray(m)&&typeof m=="object")return h.error("First argument must be an image or text section.");const E=[];let I=!1;for(let O=1;O<=s.length-1;++O){const F=s[O];if(I&&typeof F=="object"&&!Array.isArray(F)){I=!1;let $=null;if(F["font-scale"]&&($=h.parse(F["font-scale"],1,kt),!$))return null;let W=null;if(F["text-font"]&&(W=h.parse(F["text-font"],1,le(_n)),!W))return null;let ne=null;if(F["text-color"]&&(ne=h.parse(F["text-color"],1,Cr),!ne))return null;const ie=E[E.length-1];ie.scale=$,ie.font=W,ie.textColor=ne}else{const $=h.parse(s[O],1,Tn);if(!$)return null;const W=$.type.kind;if(W!=="string"&&W!=="value"&&W!=="null"&&W!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");I=!0,E.push({content:$,scale:null,font:null,textColor:null})}}return new _f(E)}evaluate(s){return new ms(this.sections.map(h=>{const m=h.content.evaluate(s);return jn(m)===K?new fm("",m,null,null,null):new fm(su(m),null,h.scale?h.scale.evaluate(s):null,h.font?h.font.evaluate(s).join(","):null,h.textColor?h.textColor.evaluate(s):null)}))}eachChild(s){for(const h of this.sections)s(h.content),h.scale&&s(h.scale),h.font&&s(h.font),h.textColor&&s(h.textColor)}outputDefined(){return!1}}class kd{constructor(s){this.type=K,this.input=s}static parse(s,h){if(s.length!==2)return h.error("Expected two arguments.");const m=h.parse(s[1],1,_n);return m?new kd(m):h.error("No image name provided.")}evaluate(s){const h=this.input.evaluate(s),m=ys.fromString(h);return m&&s.availableImages&&(m.available=s.availableImages.indexOf(h)>-1),m}eachChild(s){s(this.input)}outputDefined(){return!1}}class vf{constructor(s){this.type=kt,this.input=s}static parse(s,h){if(s.length!==2)return h.error(`Expected 1 argument, but found ${s.length-1} instead.`);const m=h.parse(s[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${pe(m.type)} instead.`):new vf(m):null}evaluate(s){const h=this.input.evaluate(s);if(typeof h=="string"||Array.isArray(h))return h.length;throw new Lr(`Expected value to be of type string or array, but found ${pe(jn(h))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const ch={"==":xv,"!=":_m,">":Ua,"<":bv,">=":Jg,"<=":wv,array:Cn,at:mm,boolean:Cn,case:gm,coalesce:yf,collator:_l,format:_f,image:kd,in:xs,"index-of":cu,interpolate:Yi,"interpolate-hcl":Yi,"interpolate-lab":Yi,length:vf,let:Jn,literal:_s,match:Od,number:Cn,"number-format":Va,object:Cn,slice:lh,step:oc,string:Cn,"to-boolean":Zs,"to-color":Zs,"to-number":Zs,"to-string":Zs,var:vs,within:On};function vm(c,[s,h,m,E]){s=s.evaluate(c),h=h.evaluate(c),m=m.evaluate(c);const I=E?E.evaluate(c):1,O=$a(s,h,m,I);if(O)throw new Lr(O);return new sr(s/255,h/255,m/255,I,!1)}function xm(c,s){return c in s}function bm(c,s){const h=s[c];return h===void 0?null:h}function sc(c){return{type:c}}function Rd(c){return{result:"success",value:c}}function hh(c){return{result:"error",value:c}}function ac(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function wm(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function fh(c){return!!c.expression&&c.expression.interpolated}function $n(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Md(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function xf(c){return c}function bs(c,s){const h=s.type==="color",m=c.stops&&typeof c.stops[0][0]=="object",E=m||!(m||c.property!==void 0),I=c.type||(fh(s)?"exponential":"interval");if(h||s.type==="padding"){const ne=h?sr.parse:Co.parse;(c=Vn({},c)).stops&&(c.stops=c.stops.map(ie=>[ie[0],ne(ie[1])])),c.default=ne(c.default?c.default:s.default)}if(c.colorSpace&&(O=c.colorSpace)!=="rgb"&&O!=="hcl"&&O!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var O;let F,$,W;if(I==="exponential")F=Hn;else if(I==="interval")F=Ev;else if(I==="categorical"){F=hi,$=Object.create(null);for(const ne of c.stops)$[ne[0]]=ne[1];W=typeof c.stops[0][0]}else{if(I!=="identity")throw new Error(`Unknown function type "${I}"`);F=bf}if(m){const ne={},ie=[];for(let _e=0;_e<c.stops.length;_e++){const Te=c.stops[_e],Re=Te[0].zoom;ne[Re]===void 0&&(ne[Re]={zoom:Re,type:c.type,property:c.property,default:c.default,stops:[]},ie.push(Re)),ne[Re].stops.push([Te[0].value,Te[1]])}const fe=[];for(const _e of ie)fe.push([ne[_e].zoom,bs(ne[_e],s)]);const de={name:"linear"};return{kind:"composite",interpolationType:de,interpolationFactor:Yi.interpolationFactor.bind(void 0,de),zoomStops:fe.map(_e=>_e[0]),evaluate:({zoom:_e},Te)=>Hn({stops:fe,base:c.base},s,_e).evaluate(_e,Te)}}if(E){const ne=I==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:Yi.interpolationFactor.bind(void 0,ne),zoomStops:c.stops.map(ie=>ie[0]),evaluate:({zoom:ie})=>F(c,s,ie,$,W)}}return{kind:"source",evaluate(ne,ie){const fe=ie&&ie.properties?ie.properties[c.property]:void 0;return fe===void 0?dh(c.default,s.default):F(c,s,fe,$,W)}}}function dh(c,s,h){return c!==void 0?c:s!==void 0?s:h!==void 0?h:void 0}function hi(c,s,h,m,E){return dh(typeof h===E?m[h]:void 0,c.default,s.default)}function Ev(c,s,h){if($n(h)!=="number")return dh(c.default,s.default);const m=c.stops.length;if(m===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[m-1][0])return c.stops[m-1][1];const E=ha(c.stops.map(I=>I[0]),h);return c.stops[E][1]}function Hn(c,s,h){const m=c.base!==void 0?c.base:1;if($n(h)!=="number")return dh(c.default,s.default);const E=c.stops.length;if(E===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[E-1][0])return c.stops[E-1][1];const I=ha(c.stops.map(ne=>ne[0]),h),O=function(ne,ie,fe,de){const _e=de-fe,Te=ne-fe;return _e===0?0:ie===1?Te/_e:(Math.pow(ie,Te)-1)/(Math.pow(ie,_e)-1)}(h,m,c.stops[I][0],c.stops[I+1][0]),F=c.stops[I][1],$=c.stops[I+1][1],W=Io[s.type]||xf;return typeof F.evaluate=="function"?{evaluate(...ne){const ie=F.evaluate.apply(void 0,ne),fe=$.evaluate.apply(void 0,ne);if(ie!==void 0&&fe!==void 0)return W(ie,fe,O,c.colorSpace)}}:W(F,$,O,c.colorSpace)}function bf(c,s,h){switch(s.type){case"color":h=sr.parse(h);break;case"formatted":h=ms.fromString(h.toString());break;case"resolvedImage":h=ys.fromString(h.toString());break;case"padding":h=Co.parse(h);break;default:$n(h)===s.type||s.type==="enum"&&s.values[h]||(h=void 0)}return dh(h,c.default,s.default)}Yn.register(ch,{error:[{kind:"error"},[_n],(c,[s])=>{throw new Lr(s.evaluate(c))}],typeof:[_n,[Tn],(c,[s])=>pe(jn(s.evaluate(c)))],"to-rgba":[le(kt,4),[Cr],(c,[s])=>{const[h,m,E,I]=s.evaluate(c).rgb;return[255*h,255*m,255*E,I]}],rgb:[Cr,[kt,kt,kt],vm],rgba:[Cr,[kt,kt,kt,kt],vm],has:{type:Pn,overloads:[[[_n],(c,[s])=>xm(s.evaluate(c),c.properties())],[[_n,Zo],(c,[s,h])=>xm(s.evaluate(c),h.evaluate(c))]]},get:{type:Tn,overloads:[[[_n],(c,[s])=>bm(s.evaluate(c),c.properties())],[[_n,Zo],(c,[s,h])=>bm(s.evaluate(c),h.evaluate(c))]]},"feature-state":[Tn,[_n],(c,[s])=>bm(s.evaluate(c),c.featureState||{})],properties:[Zo,[],c=>c.properties()],"geometry-type":[_n,[],c=>c.geometryType()],id:[Tn,[],c=>c.id()],zoom:[kt,[],c=>c.globals.zoom],"heatmap-density":[kt,[],c=>c.globals.heatmapDensity||0],"line-progress":[kt,[],c=>c.globals.lineProgress||0],accumulated:[Tn,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[kt,sc(kt),(c,s)=>{let h=0;for(const m of s)h+=m.evaluate(c);return h}],"*":[kt,sc(kt),(c,s)=>{let h=1;for(const m of s)h*=m.evaluate(c);return h}],"-":{type:kt,overloads:[[[kt,kt],(c,[s,h])=>s.evaluate(c)-h.evaluate(c)],[[kt],(c,[s])=>-s.evaluate(c)]]},"/":[kt,[kt,kt],(c,[s,h])=>s.evaluate(c)/h.evaluate(c)],"%":[kt,[kt,kt],(c,[s,h])=>s.evaluate(c)%h.evaluate(c)],ln2:[kt,[],()=>Math.LN2],pi:[kt,[],()=>Math.PI],e:[kt,[],()=>Math.E],"^":[kt,[kt,kt],(c,[s,h])=>Math.pow(s.evaluate(c),h.evaluate(c))],sqrt:[kt,[kt],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[kt,[kt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[kt,[kt],(c,[s])=>Math.log(s.evaluate(c))],log2:[kt,[kt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[kt,[kt],(c,[s])=>Math.sin(s.evaluate(c))],cos:[kt,[kt],(c,[s])=>Math.cos(s.evaluate(c))],tan:[kt,[kt],(c,[s])=>Math.tan(s.evaluate(c))],asin:[kt,[kt],(c,[s])=>Math.asin(s.evaluate(c))],acos:[kt,[kt],(c,[s])=>Math.acos(s.evaluate(c))],atan:[kt,[kt],(c,[s])=>Math.atan(s.evaluate(c))],min:[kt,sc(kt),(c,s)=>Math.min(...s.map(h=>h.evaluate(c)))],max:[kt,sc(kt),(c,s)=>Math.max(...s.map(h=>h.evaluate(c)))],abs:[kt,[kt],(c,[s])=>Math.abs(s.evaluate(c))],round:[kt,[kt],(c,[s])=>{const h=s.evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[kt,[kt],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[kt,[kt],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[Pn,[_n,Tn],(c,[s,h])=>c.properties()[s.value]===h.value],"filter-id-==":[Pn,[Tn],(c,[s])=>c.id()===s.value],"filter-type-==":[Pn,[_n],(c,[s])=>c.geometryType()===s.value],"filter-<":[Pn,[_n,Tn],(c,[s,h])=>{const m=c.properties()[s.value],E=h.value;return typeof m==typeof E&&m<E}],"filter-id-<":[Pn,[Tn],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h<m}],"filter->":[Pn,[_n,Tn],(c,[s,h])=>{const m=c.properties()[s.value],E=h.value;return typeof m==typeof E&&m>E}],"filter-id->":[Pn,[Tn],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h>m}],"filter-<=":[Pn,[_n,Tn],(c,[s,h])=>{const m=c.properties()[s.value],E=h.value;return typeof m==typeof E&&m<=E}],"filter-id-<=":[Pn,[Tn],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h<=m}],"filter->=":[Pn,[_n,Tn],(c,[s,h])=>{const m=c.properties()[s.value],E=h.value;return typeof m==typeof E&&m>=E}],"filter-id->=":[Pn,[Tn],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h>=m}],"filter-has":[Pn,[Tn],(c,[s])=>s.value in c.properties()],"filter-has-id":[Pn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Pn,[le(_n)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[Pn,[le(Tn)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[Pn,[_n,le(Tn)],(c,[s,h])=>h.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[Pn,[_n,le(Tn)],(c,[s,h])=>function(m,E,I,O){for(;I<=O;){const F=I+O>>1;if(E[F]===m)return!0;E[F]>m?O=F-1:I=F+1}return!1}(c.properties()[s.value],h.value,0,h.value.length-1)],all:{type:Pn,overloads:[[[Pn,Pn],(c,[s,h])=>s.evaluate(c)&&h.evaluate(c)],[sc(Pn),(c,s)=>{for(const h of s)if(!h.evaluate(c))return!1;return!0}]]},any:{type:Pn,overloads:[[[Pn,Pn],(c,[s,h])=>s.evaluate(c)||h.evaluate(c)],[sc(Pn),(c,s)=>{for(const h of s)if(h.evaluate(c))return!0;return!1}]]},"!":[Pn,[Pn],(c,[s])=>!s.evaluate(c)],"is-supported-script":[Pn,[_n],(c,[s])=>{const h=c.globals&&c.globals.isSupportedScript;return!h||h(s.evaluate(c))}],upcase:[_n,[_n],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[_n,[_n],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[_n,sc(Tn),(c,s)=>s.map(h=>su(h.evaluate(c))).join("")],"resolved-locale":[_n,[Hs],(c,[s])=>s.evaluate(c).resolvedLocale()]});class Br{constructor(s,h){var m;this.expression=s,this._warningHistory={},this._evaluator=new qn,this._defaultValue=h?(m=h).type==="color"&&Md(m.default)?new sr(0,0,0,0):m.type==="color"?sr.parse(m.default)||null:m.type==="padding"?Co.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?gs.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(s,h,m,E,I,O){return this._evaluator.globals=s,this._evaluator.feature=h,this._evaluator.featureState=m,this._evaluator.canonical=E,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=O,this.expression.evaluate(this._evaluator)}evaluate(s,h,m,E,I,O){this._evaluator.globals=s,this._evaluator.feature=h||null,this._evaluator.featureState=m||null,this._evaluator.canonical=E,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=O||null;try{const F=this.expression.evaluate(this._evaluator);if(F==null||typeof F=="number"&&F!=F)return this._defaultValue;if(this._enumValues&&!(F in this._enumValues))throw new Lr(`Expected value to be one of ${Object.keys(this._enumValues).map($=>JSON.stringify($)).join(", ")}, but found ${JSON.stringify(F)} instead.`);return F}catch(F){return this._warningHistory[F.message]||(this._warningHistory[F.message]=!0,typeof console<"u"&&console.warn(F.message)),this._defaultValue}}}function kr(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in ch}function hu(c,s){const h=new Id(ch,sh,[],s?function(E){const I={color:Cr,string:_n,number:kt,enum:_n,boolean:Pn,formatted:qr,padding:Oe,resolvedImage:K,variableAnchorOffsetCollection:te};return E.type==="array"?le(I[E.value]||Tn,E.length):I[E.type]}(s):void 0),m=h.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Rd(new Br(m,s)):hh(h.errors)}class Nd{constructor(s,h){this.kind=s,this._styleExpression=h,this.isStateDependent=s!=="constant"&&!rc(h.expression)}evaluateWithoutErrorHandling(s,h,m,E,I,O){return this._styleExpression.evaluateWithoutErrorHandling(s,h,m,E,I,O)}evaluate(s,h,m,E,I,O){return this._styleExpression.evaluate(s,h,m,E,I,O)}}class ws{constructor(s,h,m,E){this.kind=s,this.zoomStops=m,this._styleExpression=h,this.isStateDependent=s!=="camera"&&!rc(h.expression),this.interpolationType=E}evaluateWithoutErrorHandling(s,h,m,E,I,O){return this._styleExpression.evaluateWithoutErrorHandling(s,h,m,E,I,O)}evaluate(s,h,m,E,I,O){return this._styleExpression.evaluate(s,h,m,E,I,O)}interpolationFactor(s,h,m){return this.interpolationType?Yi.interpolationFactor(this.interpolationType,s,h,m):0}}function lc(c,s){const h=hu(c,s);if(h.result==="error")return h;const m=h.value.expression,E=ah(m);if(!E&&!ac(s))return hh([new _r("","data expressions not supported")]);const I=ic(m,["zoom"]);if(!I&&!wm(s))return hh([new _r("","zoom expressions not supported")]);const O=Ws(m);return O||I?O instanceof _r?hh([O]):O instanceof Yi&&!fh(s)?hh([new _r("",'"interpolate" expressions cannot be used with this property')]):Rd(O?new ws(E?"camera":"composite",h.value,O.labels,O instanceof Yi?O.interpolation:void 0):new Nd(E?"constant":"source",h.value)):hh([new _r("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Dd{constructor(s,h){this._parameters=s,this._specification=h,Vn(this,bs(this._parameters,this._specification))}static deserialize(s){return new Dd(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Ws(c){let s=null;if(c instanceof Jn)s=Ws(c.result);else if(c instanceof yf){for(const h of c.args)if(s=Ws(h),s)break}else(c instanceof oc||c instanceof Yi)&&c.input instanceof Yn&&c.input.name==="zoom"&&(s=c);return s instanceof _r||c.eachChild(h=>{const m=Ws(h);m instanceof _r?s=m:!s&&m?s=new _r("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&m&&s!==m&&(s=new _r("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function zd(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!zd(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const uc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fd(c){if(c==null)return{filter:()=>!0,needGeometry:!1};zd(c)||(c=cc(c));const s=hu(c,uc);if(s.result==="error")throw new Error(s.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,m,E)=>s.value.evaluate(h,m,{},E),needGeometry:wf(c)}}function ph(c,s){return c<s?-1:c>s?1:0}function wf(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let s=1;s<c.length;s++)if(wf(c[s]))return!0;return!1}function cc(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?Em(c[1],c[2],"=="):s==="!="?Bd(Em(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Em(c[1],c[2],s):s==="any"?(h=c.slice(1),["any"].concat(h.map(cc))):s==="all"?["all"].concat(c.slice(1).map(cc)):s==="none"?["all"].concat(c.slice(1).map(cc).map(Bd)):s==="in"?vl(c[1],c.slice(2)):s==="!in"?Bd(vl(c[1],c.slice(2))):s==="has"?Ef(c[1]):s==="!has"?Bd(Ef(c[1])):s!=="within"||c;var h}function Em(c,s,h){switch(c){case"$type":return[`filter-type-${h}`,s];case"$id":return[`filter-id-${h}`,s];default:return[`filter-${h}`,c,s]}}function vl(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(h=>typeof h!=typeof s[0])?["filter-in-large",c,["literal",s.sort(ph)]]:["filter-in-small",c,["literal",s]]}}function Ef(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Bd(c){return["!",c]}function Sf(c){const s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let E="[";for(const I of c)E+=`${Sf(I)},`;return`${E}]`}const h=Object.keys(c).sort();let m="{";for(let E=0;E<h.length;E++)m+=`${JSON.stringify(h[E])}:${Sf(c[h[E]])},`;return`${m}}`}function Sv(c){let s="";for(const h of lt)s+=`/${Sf(c[h])}`;return s}function qa(c){const s=c.value;return s?[new bt(c.key,s,"constants have been deprecated as of v8")]:[]}function oi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Es(c){if(Array.isArray(c))return c.map(Es);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const h in c)s[h]=Es(c[h]);return s}return oi(c)}function Fo(c){const s=c.key,h=c.value,m=c.valueSpec||{},E=c.objectElementValidators||{},I=c.style,O=c.styleSpec,F=c.validateSpec;let $=[];const W=$n(h);if(W!=="object")return[new bt(s,h,`object expected, ${W} found`)];for(const ne in h){const ie=ne.split(".")[0],fe=m[ie]||m["*"];let de;if(E[ie])de=E[ie];else if(m[ie])de=F;else if(E["*"])de=E["*"];else{if(!m["*"]){$.push(new bt(s,h[ne],`unknown property "${ne}"`));continue}de=F}$=$.concat(de({key:(s&&`${s}.`)+ne,value:h[ne],valueSpec:fe,style:I,styleSpec:O,object:h,objectKey:ne,validateSpec:F},h))}for(const ne in m)E[ne]||m[ne].required&&m[ne].default===void 0&&h[ne]===void 0&&$.push(new bt(s,h,`missing required property "${ne}"`));return $}function fa(c){const s=c.value,h=c.valueSpec,m=c.style,E=c.styleSpec,I=c.key,O=c.arrayElementValidator||c.validateSpec;if($n(s)!=="array")return[new bt(I,s,`array expected, ${$n(s)} found`)];if(h.length&&s.length!==h.length)return[new bt(I,s,`array length ${h.length} expected, length ${s.length} found`)];if(h["min-length"]&&s.length<h["min-length"])return[new bt(I,s,`array length at least ${h["min-length"]} expected, length ${s.length} found`)];let F={type:h.value,values:h.values};E.$version<7&&(F.function=h.function),$n(h.value)==="object"&&(F=h.value);let $=[];for(let W=0;W<s.length;W++)$=$.concat(O({array:s,arrayIndex:W,value:s[W],valueSpec:F,validateSpec:c.validateSpec,style:m,styleSpec:E,key:`${I}[${W}]`}));return $}function hc(c){const s=c.key,h=c.value,m=c.valueSpec;let E=$n(h);return E==="number"&&h!=h&&(E="NaN"),E!=="number"?[new bt(s,h,`number expected, ${E} found`)]:"minimum"in m&&h<m.minimum?[new bt(s,h,`${h} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&h>m.maximum?[new bt(s,h,`${h} is greater than the maximum value ${m.maximum}`)]:[]}function Sm(c){const s=c.valueSpec,h=oi(c.value.type);let m,E,I,O={};const F=h!=="categorical"&&c.value.property===void 0,$=!F,W=$n(c.value.stops)==="array"&&$n(c.value.stops[0])==="array"&&$n(c.value.stops[0][0])==="object",ne=Fo({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(de){if(h==="identity")return[new bt(de.key,de.value,'identity function may not have a "stops" property')];let _e=[];const Te=de.value;return _e=_e.concat(fa({key:de.key,value:Te,valueSpec:de.valueSpec,validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec,arrayElementValidator:ie})),$n(Te)==="array"&&Te.length===0&&_e.push(new bt(de.key,Te,"array must have at least one stop")),_e},default:function(de){return de.validateSpec({key:de.key,value:de.value,valueSpec:s,validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec})}}});return h==="identity"&&F&&ne.push(new bt(c.key,c.value,'missing required property "property"')),h==="identity"||c.value.stops||ne.push(new bt(c.key,c.value,'missing required property "stops"')),h==="exponential"&&c.valueSpec.expression&&!fh(c.valueSpec)&&ne.push(new bt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&($&&!ac(c.valueSpec)?ne.push(new bt(c.key,c.value,"property functions not supported")):F&&!wm(c.valueSpec)&&ne.push(new bt(c.key,c.value,"zoom functions not supported"))),h!=="categorical"&&!W||c.value.property!==void 0||ne.push(new bt(c.key,c.value,'"property" property is required')),ne;function ie(de){let _e=[];const Te=de.value,Re=de.key;if($n(Te)!=="array")return[new bt(Re,Te,`array expected, ${$n(Te)} found`)];if(Te.length!==2)return[new bt(Re,Te,`array length 2 expected, length ${Te.length} found`)];if(W){if($n(Te[0])!=="object")return[new bt(Re,Te,`object expected, ${$n(Te[0])} found`)];if(Te[0].zoom===void 0)return[new bt(Re,Te,"object stop key must have zoom")];if(Te[0].value===void 0)return[new bt(Re,Te,"object stop key must have value")];if(I&&I>oi(Te[0].zoom))return[new bt(Re,Te[0].zoom,"stop zoom values must appear in ascending order")];oi(Te[0].zoom)!==I&&(I=oi(Te[0].zoom),E=void 0,O={}),_e=_e.concat(Fo({key:`${Re}[0]`,value:Te[0],valueSpec:{zoom:{}},validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec,objectElementValidators:{zoom:hc,value:fe}}))}else _e=_e.concat(fe({key:`${Re}[0]`,value:Te[0],valueSpec:{},validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec},Te));return kr(Es(Te[1]))?_e.concat([new bt(`${Re}[1]`,Te[1],"expressions are not allowed in function stops.")]):_e.concat(de.validateSpec({key:`${Re}[1]`,value:Te[1],valueSpec:s,validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec}))}function fe(de,_e){const Te=$n(de.value),Re=oi(de.value),Ve=de.value!==null?de.value:_e;if(m){if(Te!==m)return[new bt(de.key,Ve,`${Te} stop domain type must match previous stop domain type ${m}`)]}else m=Te;if(Te!=="number"&&Te!=="string"&&Te!=="boolean")return[new bt(de.key,Ve,"stop domain value must be a number, string, or boolean")];if(Te!=="number"&&h!=="categorical"){let tt=`number expected, ${Te} found`;return ac(s)&&h===void 0&&(tt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new bt(de.key,Ve,tt)]}return h!=="categorical"||Te!=="number"||isFinite(Re)&&Math.floor(Re)===Re?h!=="categorical"&&Te==="number"&&E!==void 0&&Re<E?[new bt(de.key,Ve,"stop domain values must appear in ascending order")]:(E=Re,h==="categorical"&&Re in O?[new bt(de.key,Ve,"stop domain values must be unique")]:(O[Re]=!0,[])):[new bt(de.key,Ve,`integer expected, found ${Re}`)]}}function Ga(c){const s=(c.expressionContext==="property"?lc:hu)(Es(c.value),c.valueSpec);if(s.result==="error")return s.value.map(m=>new bt(`${c.key}${m.key}`,c.value,m.message));const h=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!h.outputDefined())return[new bt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!rc(h))return[new bt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!rc(h))return[new bt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!ic(h,["zoom","feature-state"]))return[new bt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!ah(h))return[new bt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function da(c){const s=c.key,h=c.value,m=c.valueSpec,E=[];return Array.isArray(m.values)?m.values.indexOf(oi(h))===-1&&E.push(new bt(s,h,`expected one of [${m.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(m.values).indexOf(oi(h))===-1&&E.push(new bt(s,h,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(h)} found`)),E}function fu(c){return zd(Es(c.value))?Ga(Vn({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):mh(c)}function mh(c){const s=c.value,h=c.key;if($n(s)!=="array")return[new bt(h,s,`array expected, ${$n(s)} found`)];const m=c.styleSpec;let E,I=[];if(s.length<1)return[new bt(h,s,"filter array must have at least 1 element")];switch(I=I.concat(da({key:`${h}[0]`,value:s[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),oi(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&oi(s[1])==="$type"&&I.push(new bt(h,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&I.push(new bt(h,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(E=$n(s[1]),E!=="string"&&I.push(new bt(`${h}[1]`,s[1],`string expected, ${E} found`)));for(let O=2;O<s.length;O++)E=$n(s[O]),oi(s[1])==="$type"?I=I.concat(da({key:`${h}[${O}]`,value:s[O],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):E!=="string"&&E!=="number"&&E!=="boolean"&&I.push(new bt(`${h}[${O}]`,s[O],`string, number, or boolean expected, ${E} found`));break;case"any":case"all":case"none":for(let O=1;O<s.length;O++)I=I.concat(mh({key:`${h}[${O}]`,value:s[O],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":E=$n(s[1]),s.length!==2?I.push(new bt(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):E!=="string"&&I.push(new bt(`${h}[1]`,s[1],`string expected, ${E} found`));break;case"within":E=$n(s[1]),s.length!==2?I.push(new bt(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):E!=="object"&&I.push(new bt(`${h}[1]`,s[1],`object expected, ${E} found`))}return I}function xl(c,s){const h=c.key,m=c.validateSpec,E=c.style,I=c.styleSpec,O=c.value,F=c.objectKey,$=I[`${s}_${c.layerType}`];if(!$)return[];const W=F.match(/^(.*)-transition$/);if(s==="paint"&&W&&$[W[1]]&&$[W[1]].transition)return m({key:h,value:O,valueSpec:I.transition,style:E,styleSpec:I});const ne=c.valueSpec||$[F];if(!ne)return[new bt(h,O,`unknown property "${F}"`)];let ie;if($n(O)==="string"&&ac(ne)&&!ne.tokens&&(ie=/^{([^}]+)}$/.exec(O)))return[new bt(h,O,`"${F}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ie[1])} }\`.`)];const fe=[];return c.layerType==="symbol"&&(F==="text-field"&&E&&!E.glyphs&&fe.push(new bt(h,O,'use of "text-field" requires a style "glyphs" property')),F==="text-font"&&Md(Es(O))&&oi(O.type)==="identity"&&fe.push(new bt(h,O,'"text-font" does not support identity functions'))),fe.concat(m({key:c.key,value:O,valueSpec:ne,style:E,styleSpec:I,expressionContext:"property",propertyType:s,propertyKey:F}))}function gh(c){return xl(c,"paint")}function Tf(c){return xl(c,"layout")}function yh(c){let s=[];const h=c.value,m=c.key,E=c.style,I=c.styleSpec;h.type||h.ref||s.push(new bt(m,h,'either "type" or "ref" is required'));let O=oi(h.type);const F=oi(h.ref);if(h.id){const $=oi(h.id);for(let W=0;W<c.arrayIndex;W++){const ne=E.layers[W];oi(ne.id)===$&&s.push(new bt(m,h.id,`duplicate layer id "${h.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in h){let $;["type","source","source-layer","filter","layout"].forEach(W=>{W in h&&s.push(new bt(m,h[W],`"${W}" is prohibited for ref layers`))}),E.layers.forEach(W=>{oi(W.id)===F&&($=W)}),$?$.ref?s.push(new bt(m,h.ref,"ref cannot reference another ref layer")):O=oi($.type):s.push(new bt(m,h.ref,`ref layer "${F}" not found`))}else if(O!=="background")if(h.source){const $=E.sources&&E.sources[h.source],W=$&&oi($.type);$?W==="vector"&&O==="raster"?s.push(new bt(m,h.source,`layer "${h.id}" requires a raster source`)):W!=="raster-dem"&&O==="hillshade"?s.push(new bt(m,h.source,`layer "${h.id}" requires a raster-dem source`)):W==="raster"&&O!=="raster"?s.push(new bt(m,h.source,`layer "${h.id}" requires a vector source`)):W!=="vector"||h["source-layer"]?W==="raster-dem"&&O!=="hillshade"?s.push(new bt(m,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):O!=="line"||!h.paint||!h.paint["line-gradient"]||W==="geojson"&&$.lineMetrics||s.push(new bt(m,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new bt(m,h,`layer "${h.id}" must specify a "source-layer"`)):s.push(new bt(m,h.source,`source "${h.source}" not found`))}else s.push(new bt(m,h,'missing required property "source"'));return s=s.concat(Fo({key:m,value:h,valueSpec:I.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${m}.type`,value:h.type,valueSpec:I.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:h,objectKey:"type"}),filter:fu,layout:$=>Fo({layer:h,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,validateSpec:$.validateSpec,objectElementValidators:{"*":W=>Tf(Vn({layerType:O},W))}}),paint:$=>Fo({layer:h,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,validateSpec:$.validateSpec,objectElementValidators:{"*":W=>gh(Vn({layerType:O},W))}})}})),s}function fc(c){const s=c.value,h=c.key,m=$n(s);return m!=="string"?[new bt(h,s,`string expected, ${m} found`)]:[]}const Cf={promoteId:function({key:c,value:s}){if($n(s)==="string")return fc({key:c,value:s});{const h=[];for(const m in s)h.push(...fc({key:`${c}.${m}`,value:s[m]}));return h}}};function Qg(c){const s=c.value,h=c.key,m=c.styleSpec,E=c.style,I=c.validateSpec;if(!s.type)return[new bt(h,s,'"type" is required')];const O=oi(s.type);let F;switch(O){case"vector":case"raster":return F=Fo({key:h,value:s,valueSpec:m[`source_${O.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:Cf,validateSpec:I}),F;case"raster-dem":return F=function($){var W;const ne=(W=$.sourceName)!==null&&W!==void 0?W:"",ie=$.value,fe=$.styleSpec,de=fe.source_raster_dem,_e=$.style;let Te=[];const Re=$n(ie);if(ie===void 0)return Te;if(Re!=="object")return Te.push(new bt("source_raster_dem",ie,`object expected, ${Re} found`)),Te;const Ve=oi(ie.encoding)==="custom",tt=["redFactor","greenFactor","blueFactor","baseShift"],Ze=$.value.encoding?`"${$.value.encoding}"`:"Default";for(const Ye in ie)!Ve&&tt.includes(Ye)?Te.push(new bt(Ye,ie[Ye],`In "${ne}": "${Ye}" is only valid when "encoding" is set to "custom". ${Ze} encoding found`)):de[Ye]?Te=Te.concat($.validateSpec({key:Ye,value:ie[Ye],valueSpec:de[Ye],validateSpec:$.validateSpec,style:_e,styleSpec:fe})):Te.push(new bt(Ye,ie[Ye],`unknown property "${Ye}"`));return Te}({sourceName:h,value:s,style:c.style,styleSpec:m,validateSpec:I}),F;case"geojson":if(F=Fo({key:h,value:s,valueSpec:m.source_geojson,style:E,styleSpec:m,validateSpec:I,objectElementValidators:Cf}),s.cluster)for(const $ in s.clusterProperties){const[W,ne]=s.clusterProperties[$],ie=typeof W=="string"?[W,["accumulated"],["get",$]]:W;F.push(...Ga({key:`${h}.${$}.map`,value:ne,validateSpec:I,expressionContext:"cluster-map"})),F.push(...Ga({key:`${h}.${$}.reduce`,value:ie,validateSpec:I,expressionContext:"cluster-reduce"}))}return F;case"video":return Fo({key:h,value:s,valueSpec:m.source_video,style:E,validateSpec:I,styleSpec:m});case"image":return Fo({key:h,value:s,valueSpec:m.source_image,style:E,validateSpec:I,styleSpec:m});case"canvas":return[new bt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return da({key:`${h}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:E,validateSpec:I,styleSpec:m})}}function Tm(c){const s=c.value,h=c.styleSpec,m=h.light,E=c.style;let I=[];const O=$n(s);if(s===void 0)return I;if(O!=="object")return I=I.concat([new bt("light",s,`object expected, ${O} found`)]),I;for(const F in s){const $=F.match(/^(.*)-transition$/);I=I.concat($&&m[$[1]]&&m[$[1]].transition?c.validateSpec({key:F,value:s[F],valueSpec:h.transition,validateSpec:c.validateSpec,style:E,styleSpec:h}):m[F]?c.validateSpec({key:F,value:s[F],valueSpec:m[F],validateSpec:c.validateSpec,style:E,styleSpec:h}):[new bt(F,s[F],`unknown property "${F}"`)])}return I}function ey(c){const s=c.value,h=c.styleSpec,m=h.sky,E=c.style,I=$n(s);if(s===void 0)return[];if(I!=="object")return[new bt("sky",s,`object expected, ${I} found`)];let O=[];for(const F in s)O=O.concat(m[F]?Ss({key:F,value:s[F],valueSpec:m[F],style:E,styleSpec:h}):[new bt(F,s[F],`unknown property "${F}"`)]);return O}function _h(c){const s=c.value,h=c.styleSpec,m=h.terrain,E=c.style;let I=[];const O=$n(s);if(s===void 0)return I;if(O!=="object")return I=I.concat([new bt("terrain",s,`object expected, ${O} found`)]),I;for(const F in s)I=I.concat(m[F]?c.validateSpec({key:F,value:s[F],valueSpec:m[F],validateSpec:c.validateSpec,style:E,styleSpec:h}):[new bt(F,s[F],`unknown property "${F}"`)]);return I}function If(c){let s=[];const h=c.value,m=c.key;if(Array.isArray(h)){const E=[],I=[];for(const O in h)h[O].id&&E.includes(h[O].id)&&s.push(new bt(m,h,`all the sprites' ids must be unique, but ${h[O].id} is duplicated`)),E.push(h[O].id),h[O].url&&I.includes(h[O].url)&&s.push(new bt(m,h,`all the sprites' URLs must be unique, but ${h[O].url} is duplicated`)),I.push(h[O].url),s=s.concat(Fo({key:`${m}[${O}]`,value:h[O],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return fc({key:m,value:h})}const si={"*":()=>[],array:fa,boolean:function(c){const s=c.value,h=c.key,m=$n(s);return m!=="boolean"?[new bt(h,s,`boolean expected, ${m} found`)]:[]},number:hc,color:function(c){const s=c.key,h=c.value,m=$n(h);return m!=="string"?[new bt(s,h,`color expected, ${m} found`)]:sr.parse(String(h))?[]:[new bt(s,h,`color expected, "${h}" found`)]},constants:qa,enum:da,filter:fu,function:Sm,layer:yh,object:Fo,source:Qg,light:Tm,sky:ey,terrain:_h,string:fc,formatted:function(c){return fc(c).length===0?[]:Ga(c)},resolvedImage:function(c){return fc(c).length===0?[]:Ga(c)},padding:function(c){const s=c.key,h=c.value;if($n(h)==="array"){if(h.length<1||h.length>4)return[new bt(s,h,`padding requires 1 to 4 values; ${h.length} values found`)];const m={type:"number"};let E=[];for(let I=0;I<h.length;I++)E=E.concat(c.validateSpec({key:`${s}[${I}]`,value:h[I],validateSpec:c.validateSpec,valueSpec:m}));return E}return hc({key:s,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(c){const s=c.key,h=c.value,m=$n(h),E=c.styleSpec;if(m!=="array"||h.length<1||h.length%2!=0)return[new bt(s,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let I=[];for(let O=0;O<h.length;O+=2)I=I.concat(da({key:`${s}[${O}]`,value:h[O],valueSpec:E.layout_symbol["text-anchor"]})),I=I.concat(fa({key:`${s}[${O+1}]`,value:h[O+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:E}));return I},sprite:If};function Ss(c){const s=c.value,h=c.valueSpec,m=c.styleSpec;return c.validateSpec=Ss,h.expression&&Md(oi(s))?Sm(c):h.expression&&kr(Es(s))?Ga(c):h.type&&si[h.type]?si[h.type](c):Fo(Vn({},c,{valueSpec:h.type?m[h.type]:h}))}function Cm(c){const s=c.value,h=c.key,m=fc(c);return m.length||(s.indexOf("{fontstack}")===-1&&m.push(new bt(h,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&m.push(new bt(h,s,'"glyphs" url must include a "{range}" token'))),m}function Ko(c,s=rt){let h=[];return h=h.concat(Ss({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:Ss,objectElementValidators:{glyphs:Cm,"*":()=>[]}})),c.constants&&(h=h.concat(qa({key:"constants",value:c.constants,style:c,styleSpec:s,validateSpec:Ss}))),dc(h)}function Ha(c){return function(s){return c({...s,validateSpec:Ss})}}function dc(c){return[].concat(c).sort((s,h)=>s.line-h.line)}function pa(c){return function(...s){return dc(c.apply(this,s))}}Ko.source=pa(Ha(Qg)),Ko.sprite=pa(Ha(If)),Ko.glyphs=pa(Ha(Cm)),Ko.light=pa(Ha(Tm)),Ko.sky=pa(Ha(ey)),Ko.terrain=pa(Ha(_h)),Ko.layer=pa(Ha(yh)),Ko.filter=pa(Ha(fu)),Ko.paintProperty=pa(Ha(gh)),Ko.layoutProperty=pa(Ha(Tf));const ma=Ko,Tv=ma.light,du=ma.paintProperty,ty=ma.layoutProperty;function pc(c,s){let h=!1;if(s&&s.length)for(const m of s)c.fire(new Gt(new Error(m.message))),h=!0;return h}class Pf{constructor(s,h,m){const E=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const O=new Int32Array(this.arrayBuffer);s=O[0],this.d=(h=O[1])+2*(m=O[2]);for(let $=0;$<this.d*this.d;$++){const W=O[3+$],ne=O[3+$+1];E.push(W===ne?null:O.subarray(W,ne))}const F=O[3+E.length+1];this.keys=O.subarray(O[3+E.length],F),this.bboxes=O.subarray(F),this.insert=this._insertReadonly}else{this.d=h+2*m;for(let O=0;O<this.d*this.d;O++)E.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=s,this.padding=m,this.scale=h/s,this.uid=0;const I=m/h*s;this.min=-I,this.max=s+I}insert(s,h,m,E,I){this._forEachCell(h,m,E,I,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(E),this.bboxes.push(I)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,h,m,E,I,O){this.cells[I].push(O)}query(s,h,m,E,I){const O=this.min,F=this.max;if(s<=O&&h<=O&&F<=m&&F<=E&&!I)return Array.prototype.slice.call(this.keys);{const $=[];return this._forEachCell(s,h,m,E,this._queryCell,$,{},I),$}}_queryCell(s,h,m,E,I,O,F,$){const W=this.cells[I];if(W!==null){const ne=this.keys,ie=this.bboxes;for(let fe=0;fe<W.length;fe++){const de=W[fe];if(F[de]===void 0){const _e=4*de;($?$(ie[_e+0],ie[_e+1],ie[_e+2],ie[_e+3]):s<=ie[_e+2]&&h<=ie[_e+3]&&m>=ie[_e+0]&&E>=ie[_e+1])?(F[de]=!0,O.push(ne[de])):F[de]=!1}}}}_forEachCell(s,h,m,E,I,O,F,$){const W=this._convertToCellCoord(s),ne=this._convertToCellCoord(h),ie=this._convertToCellCoord(m),fe=this._convertToCellCoord(E);for(let de=W;de<=ie;de++)for(let _e=ne;_e<=fe;_e++){const Te=this.d*_e+de;if((!$||$(this._convertFromCellCoord(de),this._convertFromCellCoord(_e),this._convertFromCellCoord(de+1),this._convertFromCellCoord(_e+1)))&&I.call(this,s,h,m,E,Te,O,F,$))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,h=3+this.cells.length+1+1;let m=0;for(let O=0;O<this.cells.length;O++)m+=this.cells[O].length;const E=new Int32Array(h+m+this.keys.length+this.bboxes.length);E[0]=this.extent,E[1]=this.n,E[2]=this.padding;let I=h;for(let O=0;O<s.length;O++){const F=s[O];E[3+O]=I,E.set(F,I),I+=F.length}return E[3+s.length]=I,E.set(this.keys,I),I+=this.keys.length,E[3+s.length+1]=I,E.set(this.bboxes,I),I+=this.bboxes.length,E.buffer}static serialize(s,h){const m=s.toArrayBuffer();return h&&h.push(m),{buffer:m}}static deserialize(s){return new Pf(s.buffer)}}const Ji={};function Jt(c,s,h={}){if(Ji[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),Ji[c]={klass:s,omit:h.omit||[],shallow:h.shallow||[]}}Jt("Object",Object),Jt("TransferableGridIndex",Pf),Jt("Color",sr),Jt("Error",Error),Jt("AJAXError",it),Jt("ResolvedImage",ys),Jt("StylePropertyFunction",Dd),Jt("StyleExpression",Br,{omit:["_evaluator"]}),Jt("ZoomDependentExpression",ws),Jt("ZoomConstantExpression",Nd),Jt("CompoundExpression",Yn,{omit:["_evaluate"]});for(const c in ch)ch[c]._classRegistryKey||Jt(`Expression_${c}`,ch[c]);function Lf(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Za(c,s){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error)return c;if(Lf(c)||De(c))return s&&s.push(c),c;if(ArrayBuffer.isView(c)){const h=c;return s&&s.push(h.buffer),h}if(c instanceof ImageData)return s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const h=[];for(const m of c)h.push(Za(m,s));return h}if(typeof c=="object"){const h=c.constructor,m=h._classRegistryKey;if(!m)throw new Error(`can't serialize object of unregistered class ${h.name}`);if(!Ji[m])throw new Error(`${m} is not registered.`);const E=h.serialize?h.serialize(c,s):{};if(h.serialize){if(s&&E===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const I in c){if(!c.hasOwnProperty(I)||Ji[m].omit.indexOf(I)>=0)continue;const O=c[I];E[I]=Ji[m].shallow.indexOf(I)>=0?O:Za(O,s)}c instanceof Error&&(E.message=c.message)}if(E.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(E.$name=m),E}throw new Error("can't serialize object of type "+typeof c)}function vh(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||Lf(c)||De(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(vh);if(typeof c=="object"){const s=c.$name||"Object";if(!Ji[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:h}=Ji[s];if(!h)throw new Error(`can't deserialize unregistered class ${s}`);if(h.deserialize)return h.deserialize(c);const m=Object.create(h.prototype);for(const E of Object.keys(c)){if(E==="$name")continue;const I=c[E];m[E]=Ji[s].shallow.indexOf(E)>=0?I:vh(I)}return m}throw new Error("can't deserialize object of type "+typeof c)}class Af{constructor(){this.first=!0}update(s,h){const m=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=h),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=m,!0))}}const qt={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function mc(c){for(const s of c)if(Of(s.charCodeAt(0)))return!0;return!1}function Im(c){for(const s of c)if(!ny(s.charCodeAt(0)))return!1;return!0}function ny(c){return!(qt.Arabic(c)||qt["Arabic Supplement"](c)||qt["Arabic Extended-A"](c)||qt["Arabic Presentation Forms-A"](c)||qt["Arabic Presentation Forms-B"](c))}function Of(c){return!(c!==746&&c!==747&&(c<4352||!(qt["Bopomofo Extended"](c)||qt.Bopomofo(c)||qt["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||qt["CJK Compatibility Ideographs"](c)||qt["CJK Compatibility"](c)||qt["CJK Radicals Supplement"](c)||qt["CJK Strokes"](c)||!(!qt["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||qt["CJK Unified Ideographs Extension A"](c)||qt["CJK Unified Ideographs"](c)||qt["Enclosed CJK Letters and Months"](c)||qt["Hangul Compatibility Jamo"](c)||qt["Hangul Jamo Extended-A"](c)||qt["Hangul Jamo Extended-B"](c)||qt["Hangul Jamo"](c)||qt["Hangul Syllables"](c)||qt.Hiragana(c)||qt["Ideographic Description Characters"](c)||qt.Kanbun(c)||qt["Kangxi Radicals"](c)||qt["Katakana Phonetic Extensions"](c)||qt.Katakana(c)&&c!==12540||!(!qt["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!qt["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||qt["Unified Canadian Aboriginal Syllabics"](c)||qt["Unified Canadian Aboriginal Syllabics Extended"](c)||qt["Vertical Forms"](c)||qt["Yijing Hexagram Symbols"](c)||qt["Yi Syllables"](c)||qt["Yi Radicals"](c))))}function jd(c){return!(Of(c)||function(s){return!!(qt["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||qt["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||qt["Letterlike Symbols"](s)||qt["Number Forms"](s)||qt["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||qt["Control Pictures"](s)&&s!==9251||qt["Optical Character Recognition"](s)||qt["Enclosed Alphanumerics"](s)||qt["Geometric Shapes"](s)||qt["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||qt["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||qt["CJK Symbols and Punctuation"](s)||qt.Katakana(s)||qt["Private Use Area"](s)||qt["CJK Compatibility Forms"](s)||qt["Small Form Variants"](s)||qt["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}function kf(c){return c>=1424&&c<=2303||qt["Arabic Presentation Forms-A"](c)||qt["Arabic Presentation Forms-B"](c)}function Pm(c,s){return!(!s&&kf(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||qt.Khmer(c))}function ry(c){for(const s of c)if(kf(s.charCodeAt(0)))return!0;return!1}const pu=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class jr{constructor(s,h){this.zoom=s,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Af,this.transition={})}isSupportedScript(s){return function(h,m){for(const E of h)if(!Pm(E.charCodeAt(0),m))return!1;return!0}(s,pu.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,h=s-Math.floor(s),m=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*h}}}class xh{constructor(s,h){this.property=s,this.value=h,this.expression=function(m,E){if(Md(m))return new Dd(m,E);if(kr(m)){const I=lc(m,E);if(I.result==="error")throw new Error(I.value.map(O=>`${O.key}: ${O.message}`).join(", "));return I.value}{let I=m;return E.type==="color"&&typeof m=="string"?I=sr.parse(m):E.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?E.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(I=gs.parse(m)):I=Co.parse(m),{kind:"constant",evaluate:()=>I}}}(h===void 0?s.specification.default:h,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,h,m){return this.property.possiblyEvaluate(this,s,h,m)}}class $d{constructor(s){this.property=s,this.value=new xh(s,void 0)}transitioned(s,h){return new b(this.property,this.value,h,G({},s.transition,this.transition),s.now)}untransitioned(){return new b(this.property,this.value,null,{},0)}}class f{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return X(this._values[s].value.value)}setValue(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new $d(this._values[s].property)),this._values[s].value=new xh(this._values[s].property,h===null?void 0:X(h))}getTransition(s){return X(this._values[s].transition)}setTransition(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new $d(this._values[s].property)),this._values[s].transition=X(h)||void 0}serialize(){const s={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(s[h]=m);const E=this.getTransition(h);E!==void 0&&(s[`${h}-transition`]=E)}return s}transitioned(s,h){const m=new N(this._properties);for(const E of Object.keys(this._values))m._values[E]=this._values[E].transitioned(s,h._values[E]);return m}untransitioned(){const s=new N(this._properties);for(const h of Object.keys(this._values))s._values[h]=this._values[h].untransitioned();return s}}class b{constructor(s,h,m,E,I){this.property=s,this.value=h,this.begin=I+E.delay||0,this.end=this.begin+E.duration||0,s.specification.transition&&(E.delay||E.duration)&&(this.prior=m)}possiblyEvaluate(s,h,m){const E=s.now||0,I=this.value.possiblyEvaluate(s,h,m),O=this.prior;if(O){if(E>this.end)return this.prior=null,I;if(this.value.isDataDriven())return this.prior=null,I;if(E<this.begin)return O.possiblyEvaluate(s,h,m);{const F=(E-this.begin)/(this.end-this.begin);return this.property.interpolate(O.possiblyEvaluate(s,h,m),I,function($){if($<=0)return 0;if($>=1)return 1;const W=$*$,ne=W*$;return 4*($<.5?ne:3*($-W)+ne-.75)}(F))}}return I}}class N{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,h,m){const E=new me(this._properties);for(const I of Object.keys(this._values))E._values[I]=this._values[I].possiblyEvaluate(s,h,m);return E}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class q{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return X(this._values[s].value)}setValue(s,h){this._values[s]=new xh(this._values[s].property,h===null?void 0:X(h))}serialize(){const s={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(s[h]=m)}return s}possiblyEvaluate(s,h,m){const E=new me(this._properties);for(const I of Object.keys(this._values))E._values[I]=this._values[I].possiblyEvaluate(s,h,m);return E}}class re{constructor(s,h,m){this.property=s,this.value=h,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,h,m,E){return this.property.evaluate(this.value,this.parameters,s,h,m,E)}}class me{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Ce{constructor(s){this.specification=s}possiblyEvaluate(s,h){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(h)}interpolate(s,h,m){const E=Io[this.specification.type];return E?E(s,h,m):s}}class We{constructor(s,h){this.specification=s,this.overrides=h}possiblyEvaluate(s,h,m,E){return new re(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(h,null,{},m,E)}:s.expression,h)}interpolate(s,h,m){if(s.value.kind!=="constant"||h.value.kind!=="constant")return s;if(s.value.value===void 0||h.value.value===void 0)return new re(this,{kind:"constant",value:void 0},s.parameters);const E=Io[this.specification.type];if(E){const I=E(s.value.value,h.value.value,m);return new re(this,{kind:"constant",value:I},s.parameters)}return s}evaluate(s,h,m,E,I,O){return s.kind==="constant"?s.value:s.evaluate(h,m,E,I,O)}}class dt extends We{possiblyEvaluate(s,h,m,E){if(s.value===void 0)return new re(this,{kind:"constant",value:void 0},h);if(s.expression.kind==="constant"){const I=s.expression.evaluate(h,null,{},m,E),O=s.property.specification.type==="resolvedImage"&&typeof I!="string"?I.name:I,F=this._calculate(O,O,O,h);return new re(this,{kind:"constant",value:F},h)}if(s.expression.kind==="camera"){const I=this._calculate(s.expression.evaluate({zoom:h.zoom-1}),s.expression.evaluate({zoom:h.zoom}),s.expression.evaluate({zoom:h.zoom+1}),h);return new re(this,{kind:"constant",value:I},h)}return new re(this,s.expression,h)}evaluate(s,h,m,E,I,O){if(s.kind==="source"){const F=s.evaluate(h,m,E,I,O);return this._calculate(F,F,F,h)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(h.zoom)-1},m,E),s.evaluate({zoom:Math.floor(h.zoom)},m,E),s.evaluate({zoom:Math.floor(h.zoom)+1},m,E),h):s.value}_calculate(s,h,m,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:m,to:h}}interpolate(s){return s}}class It{constructor(s){this.specification=s}possiblyEvaluate(s,h,m,E){if(s.value!==void 0){if(s.expression.kind==="constant"){const I=s.expression.evaluate(h,null,{},m,E);return this._calculate(I,I,I,h)}return this._calculate(s.expression.evaluate(new jr(Math.floor(h.zoom-1),h)),s.expression.evaluate(new jr(Math.floor(h.zoom),h)),s.expression.evaluate(new jr(Math.floor(h.zoom+1),h)),h)}}_calculate(s,h,m,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:m,to:h}}interpolate(s){return s}}class tn{constructor(s){this.specification=s}possiblyEvaluate(s,h,m,E){return!!s.expression.evaluate(h,null,{},m,E)}interpolate(){return!1}}class hn{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in s){const m=s[h];m.specification.overridable&&this.overridableProperties.push(h);const E=this.defaultPropertyValues[h]=new xh(m,void 0),I=this.defaultTransitionablePropertyValues[h]=new $d(m);this.defaultTransitioningPropertyValues[h]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=E.possiblyEvaluate({})}}}Jt("DataDrivenProperty",We),Jt("DataConstantProperty",Ce),Jt("CrossFadedDataDrivenProperty",dt),Jt("CrossFadedProperty",It),Jt("ColorRampProperty",tn);const Zn="-transition";class Hr extends Tr{constructor(s,h){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),h.layout&&(this._unevaluatedLayout=new q(h.layout)),h.paint)){this._transitionablePaint=new f(h.paint);for(const m in s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(const m in s.layout)this.setLayoutProperty(m,s.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new me(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,h,m={}){h!=null&&this._validate(ty,`layers.${this.id}.layout.${s}`,s,h,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,h):this.visibility=h)}getPaintProperty(s){return s.endsWith(Zn)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,h,m={}){if(h!=null&&this._validate(du,`layers.${this.id}.paint.${s}`,s,h,m))return!1;if(s.endsWith(Zn))return this._transitionablePaint.setTransition(s.slice(0,-11),h||void 0),!1;{const E=this._transitionablePaint._values[s],I=E.property.specification["property-type"]==="cross-faded-data-driven",O=E.value.isDataDriven(),F=E.value;this._transitionablePaint.setValue(s,h),this._handleSpecialPaintPropertyUpdate(s);const $=this._transitionablePaint._values[s].value;return $.isDataDriven()||O||I||this._handleOverridablePaintPropertyUpdate(s,F,$)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,h,m){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,h){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,h)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Y(s,(h,m)=>!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length))}_validate(s,h,m,E,I={}){return(!I||I.validate!==!1)&&pc(this,s.call(ma,{key:h,layerType:this.type,objectKey:m,value:E,styleSpec:rt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const h=this.paint.get(s);if(h instanceof re&&ac(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const $i={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Po{constructor(s,h){this._structArray=s,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class nr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,h){return s._trim(),h&&(s.isTransferred=!0,h.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const h=Object.create(this.prototype);return h.arrayBuffer=s.arrayBuffer,h.length=s.length,h.capacity=s.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function $r(c,s=1){let h=0,m=0;return{members:c.map(E=>{const I=$i[E.type].BYTES_PER_ELEMENT,O=h=iy(h,Math.max(s,I)),F=E.components||1;return m=Math.max(m,I),h+=I*F,{name:E.name,type:E.type,components:F,offset:O}}),size:iy(h,Math.max(m,s)),alignment:s}}function iy(c,s){return Math.ceil(c/s)*s}class Rf extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const E=2*s;return this.int16[E+0]=h,this.int16[E+1]=m,s}}Rf.prototype.bytesPerElement=4,Jt("StructArrayLayout2i4",Rf);class bl extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m){const E=this.length;return this.resize(E+1),this.emplace(E,s,h,m)}emplace(s,h,m,E){const I=3*s;return this.int16[I+0]=h,this.int16[I+1]=m,this.int16[I+2]=E,s}}bl.prototype.bytesPerElement=6,Jt("StructArrayLayout3i6",bl);class Ud extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,h,m,E)}emplace(s,h,m,E,I){const O=4*s;return this.int16[O+0]=h,this.int16[O+1]=m,this.int16[O+2]=E,this.int16[O+3]=I,s}}Ud.prototype.bytesPerElement=8,Jt("StructArrayLayout4i8",Ud);class Lm extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,O){const F=this.length;return this.resize(F+1),this.emplace(F,s,h,m,E,I,O)}emplace(s,h,m,E,I,O,F){const $=6*s;return this.int16[$+0]=h,this.int16[$+1]=m,this.int16[$+2]=E,this.int16[$+3]=I,this.int16[$+4]=O,this.int16[$+5]=F,s}}Lm.prototype.bytesPerElement=12,Jt("StructArrayLayout2i4i12",Lm);class Vd extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,O){const F=this.length;return this.resize(F+1),this.emplace(F,s,h,m,E,I,O)}emplace(s,h,m,E,I,O,F){const $=4*s,W=8*s;return this.int16[$+0]=h,this.int16[$+1]=m,this.uint8[W+4]=E,this.uint8[W+5]=I,this.uint8[W+6]=O,this.uint8[W+7]=F,s}}Vd.prototype.bytesPerElement=8,Jt("StructArrayLayout2i4ub8",Vd);class Qr extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const E=2*s;return this.float32[E+0]=h,this.float32[E+1]=m,s}}Qr.prototype.bytesPerElement=8,Jt("StructArrayLayout2f8",Qr);class gc extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,O,F,$,W,ne){const ie=this.length;return this.resize(ie+1),this.emplace(ie,s,h,m,E,I,O,F,$,W,ne)}emplace(s,h,m,E,I,O,F,$,W,ne,ie){const fe=10*s;return this.uint16[fe+0]=h,this.uint16[fe+1]=m,this.uint16[fe+2]=E,this.uint16[fe+3]=I,this.uint16[fe+4]=O,this.uint16[fe+5]=F,this.uint16[fe+6]=$,this.uint16[fe+7]=W,this.uint16[fe+8]=ne,this.uint16[fe+9]=ie,s}}gc.prototype.bytesPerElement=20,Jt("StructArrayLayout10ui20",gc);class Am extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,O,F,$,W,ne,ie,fe){const de=this.length;return this.resize(de+1),this.emplace(de,s,h,m,E,I,O,F,$,W,ne,ie,fe)}emplace(s,h,m,E,I,O,F,$,W,ne,ie,fe,de){const _e=12*s;return this.int16[_e+0]=h,this.int16[_e+1]=m,this.int16[_e+2]=E,this.int16[_e+3]=I,this.uint16[_e+4]=O,this.uint16[_e+5]=F,this.uint16[_e+6]=$,this.uint16[_e+7]=W,this.int16[_e+8]=ne,this.int16[_e+9]=ie,this.int16[_e+10]=fe,this.int16[_e+11]=de,s}}Am.prototype.bytesPerElement=24,Jt("StructArrayLayout4i4ui4i24",Am);class Om extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m){const E=this.length;return this.resize(E+1),this.emplace(E,s,h,m)}emplace(s,h,m,E){const I=3*s;return this.float32[I+0]=h,this.float32[I+1]=m,this.float32[I+2]=E,s}}Om.prototype.bytesPerElement=12,Jt("StructArrayLayout3f12",Om);class wl extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint32[1*s+0]=h,s}}wl.prototype.bytesPerElement=4,Jt("StructArrayLayout1ul4",wl);class bh extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,O,F,$,W){const ne=this.length;return this.resize(ne+1),this.emplace(ne,s,h,m,E,I,O,F,$,W)}emplace(s,h,m,E,I,O,F,$,W,ne){const ie=10*s,fe=5*s;return this.int16[ie+0]=h,this.int16[ie+1]=m,this.int16[ie+2]=E,this.int16[ie+3]=I,this.int16[ie+4]=O,this.int16[ie+5]=F,this.uint32[fe+3]=$,this.uint16[ie+8]=W,this.uint16[ie+9]=ne,s}}bh.prototype.bytesPerElement=20,Jt("StructArrayLayout6i1ul2ui20",bh);class wh extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,O){const F=this.length;return this.resize(F+1),this.emplace(F,s,h,m,E,I,O)}emplace(s,h,m,E,I,O,F){const $=6*s;return this.int16[$+0]=h,this.int16[$+1]=m,this.int16[$+2]=E,this.int16[$+3]=I,this.int16[$+4]=O,this.int16[$+5]=F,s}}wh.prototype.bytesPerElement=12,Jt("StructArrayLayout2i2i2i12",wh);class qd extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I){const O=this.length;return this.resize(O+1),this.emplace(O,s,h,m,E,I)}emplace(s,h,m,E,I,O){const F=4*s,$=8*s;return this.float32[F+0]=h,this.float32[F+1]=m,this.float32[F+2]=E,this.int16[$+6]=I,this.int16[$+7]=O,s}}qd.prototype.bytesPerElement=16,Jt("StructArrayLayout2f1f2i16",qd);class km extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,h,m,E)}emplace(s,h,m,E,I){const O=12*s,F=3*s;return this.uint8[O+0]=h,this.uint8[O+1]=m,this.float32[F+1]=E,this.float32[F+2]=I,s}}km.prototype.bytesPerElement=12,Jt("StructArrayLayout2ub2f12",km);class oy extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m){const E=this.length;return this.resize(E+1),this.emplace(E,s,h,m)}emplace(s,h,m,E){const I=3*s;return this.uint16[I+0]=h,this.uint16[I+1]=m,this.uint16[I+2]=E,s}}oy.prototype.bytesPerElement=6,Jt("StructArrayLayout3ui6",oy);class Gd extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,O,F,$,W,ne,ie,fe,de,_e,Te,Re,Ve){const tt=this.length;return this.resize(tt+1),this.emplace(tt,s,h,m,E,I,O,F,$,W,ne,ie,fe,de,_e,Te,Re,Ve)}emplace(s,h,m,E,I,O,F,$,W,ne,ie,fe,de,_e,Te,Re,Ve,tt){const Ze=24*s,Ye=12*s,yt=48*s;return this.int16[Ze+0]=h,this.int16[Ze+1]=m,this.uint16[Ze+2]=E,this.uint16[Ze+3]=I,this.uint32[Ye+2]=O,this.uint32[Ye+3]=F,this.uint32[Ye+4]=$,this.uint16[Ze+10]=W,this.uint16[Ze+11]=ne,this.uint16[Ze+12]=ie,this.float32[Ye+7]=fe,this.float32[Ye+8]=de,this.uint8[yt+36]=_e,this.uint8[yt+37]=Te,this.uint8[yt+38]=Re,this.uint32[Ye+10]=Ve,this.int16[Ze+22]=tt,s}}Gd.prototype.bytesPerElement=48,Jt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Gd);class Mf extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,E,I,O,F,$,W,ne,ie,fe,de,_e,Te,Re,Ve,tt,Ze,Ye,yt,wt,Xt,ln,Wt,Ht,Nt,nn){const Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,s,h,m,E,I,O,F,$,W,ne,ie,fe,de,_e,Te,Re,Ve,tt,Ze,Ye,yt,wt,Xt,ln,Wt,Ht,Nt,nn)}emplace(s,h,m,E,I,O,F,$,W,ne,ie,fe,de,_e,Te,Re,Ve,tt,Ze,Ye,yt,wt,Xt,ln,Wt,Ht,Nt,nn,Ut){const Ot=32*s,mn=16*s;return this.int16[Ot+0]=h,this.int16[Ot+1]=m,this.int16[Ot+2]=E,this.int16[Ot+3]=I,this.int16[Ot+4]=O,this.int16[Ot+5]=F,this.int16[Ot+6]=$,this.int16[Ot+7]=W,this.uint16[Ot+8]=ne,this.uint16[Ot+9]=ie,this.uint16[Ot+10]=fe,this.uint16[Ot+11]=de,this.uint16[Ot+12]=_e,this.uint16[Ot+13]=Te,this.uint16[Ot+14]=Re,this.uint16[Ot+15]=Ve,this.uint16[Ot+16]=tt,this.uint16[Ot+17]=Ze,this.uint16[Ot+18]=Ye,this.uint16[Ot+19]=yt,this.uint16[Ot+20]=wt,this.uint16[Ot+21]=Xt,this.uint16[Ot+22]=ln,this.uint32[mn+12]=Wt,this.float32[mn+13]=Ht,this.float32[mn+14]=Nt,this.uint16[Ot+30]=nn,this.uint16[Ot+31]=Ut,s}}Mf.prototype.bytesPerElement=64,Jt("StructArrayLayout8i15ui1ul2f2ui64",Mf);class sy extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.float32[1*s+0]=h,s}}sy.prototype.bytesPerElement=4,Jt("StructArrayLayout1f4",sy);class ay extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m){const E=this.length;return this.resize(E+1),this.emplace(E,s,h,m)}emplace(s,h,m,E){const I=3*s;return this.uint16[6*s+0]=h,this.float32[I+1]=m,this.float32[I+2]=E,s}}ay.prototype.bytesPerElement=12,Jt("StructArrayLayout1ui2f12",ay);class Nf extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m){const E=this.length;return this.resize(E+1),this.emplace(E,s,h,m)}emplace(s,h,m,E){const I=4*s;return this.uint32[2*s+0]=h,this.uint16[I+2]=m,this.uint16[I+3]=E,s}}Nf.prototype.bytesPerElement=8,Jt("StructArrayLayout1ul2ui8",Nf);class Cv extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const E=2*s;return this.uint16[E+0]=h,this.uint16[E+1]=m,s}}Cv.prototype.bytesPerElement=4,Jt("StructArrayLayout2ui4",Cv);class Iv extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint16[1*s+0]=h,s}}Iv.prototype.bytesPerElement=2,Jt("StructArrayLayout1ui2",Iv);class ly extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,h,m,E)}emplace(s,h,m,E,I){const O=4*s;return this.float32[O+0]=h,this.float32[O+1]=m,this.float32[O+2]=E,this.float32[O+3]=I,s}}ly.prototype.bytesPerElement=16,Jt("StructArrayLayout4f16",ly);class Ox extends Po{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new y(this.anchorPointX,this.anchorPointY)}}Ox.prototype.size=20;class S extends bh{get(s){return new Ox(this,s)}}Jt("CollisionBoxArray",S);class a extends Po{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}a.prototype.size=48;class d extends Gd{get(s){return new a(this,s)}}Jt("PlacedSymbolArray",d);class v extends Po{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}v.prototype.size=64;class w extends Mf{get(s){return new v(this,s)}}Jt("SymbolInstanceArray",w);class C extends sy{getoffsetX(s){return this.float32[1*s+0]}}Jt("GlyphOffsetArray",C);class B extends bl{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Jt("SymbolLineVertexArray",B);class j extends Po{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}j.prototype.size=12;class Z extends ay{get(s){return new j(this,s)}}Jt("TextAnchorOffsetArray",Z);class Q extends Po{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Q.prototype.size=8;class se extends Nf{get(s){return new Q(this,s)}}Jt("FeatureIndexArray",se);class ue extends Rf{}class ye extends Rf{}class Le extends Rf{}class Pe extends Lm{}class Me extends Vd{}class Se extends Qr{}class Ke extends gc{}class at extends Am{}class Fe extends Om{}class Je extends wl{}class ut extends wh{}class ft extends km{}class mt extends oy{}class Tt extends Cv{}const Et=$r([{name:"a_pos",components:2,type:"Int16"}],4),{members:Mt}=Et;class zt{constructor(s=[]){this.segments=s}prepareSegment(s,h,m,E){let I=this.segments[this.segments.length-1];return s>zt.MAX_VERTEX_ARRAY_LENGTH&&ce(`Max vertices per segment is ${zt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!I||I.vertexLength+s>zt.MAX_VERTEX_ARRAY_LENGTH||I.sortKey!==E)&&(I={vertexOffset:h.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},E!==void 0&&(I.sortKey=E),this.segments.push(I)),I}get(){return this.segments}destroy(){for(const s of this.segments)for(const h in s.vaos)s.vaos[h].destroy()}static simpleSegment(s,h,m,E){return new zt([{vertexOffset:s,primitiveOffset:h,vertexLength:m,primitiveLength:E,vaos:{},sortKey:0}])}}function Nn(c,s){return 256*(c=U(Math.floor(c),0,255))+U(Math.floor(s),0,255)}zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jt("SegmentVector",zt);const $t=$r([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var yn={exports:{}},Dn={exports:{}};Dn.exports=function(c,s){var h,m,E,I,O,F,$,W;for(m=c.length-(h=3&c.length),E=s,O=3432918353,F=461845907,W=0;W<m;)$=255&c.charCodeAt(W)|(255&c.charCodeAt(++W))<<8|(255&c.charCodeAt(++W))<<16|(255&c.charCodeAt(++W))<<24,++W,E=27492+(65535&(I=5*(65535&(E=(E^=$=(65535&($=($=(65535&$)*O+((($>>>16)*O&65535)<<16)&4294967295)<<15|$>>>17))*F+((($>>>16)*F&65535)<<16)&4294967295)<<13|E>>>19))+((5*(E>>>16)&65535)<<16)&4294967295))+((58964+(I>>>16)&65535)<<16);switch($=0,h){case 3:$^=(255&c.charCodeAt(W+2))<<16;case 2:$^=(255&c.charCodeAt(W+1))<<8;case 1:E^=$=(65535&($=($=(65535&($^=255&c.charCodeAt(W)))*O+((($>>>16)*O&65535)<<16)&4294967295)<<15|$>>>17))*F+((($>>>16)*F&65535)<<16)&4294967295}return E^=c.length,E=2246822507*(65535&(E^=E>>>16))+((2246822507*(E>>>16)&65535)<<16)&4294967295,E=3266489909*(65535&(E^=E>>>13))+((3266489909*(E>>>16)&65535)<<16)&4294967295,(E^=E>>>16)>>>0};var rr=Dn.exports,Ln={exports:{}};Ln.exports=function(c,s){for(var h,m=c.length,E=s^m,I=0;m>=4;)h=1540483477*(65535&(h=255&c.charCodeAt(I)|(255&c.charCodeAt(++I))<<8|(255&c.charCodeAt(++I))<<16|(255&c.charCodeAt(++I))<<24))+((1540483477*(h>>>16)&65535)<<16),E=1540483477*(65535&E)+((1540483477*(E>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++I;switch(m){case 3:E^=(255&c.charCodeAt(I+2))<<16;case 2:E^=(255&c.charCodeAt(I+1))<<8;case 1:E=1540483477*(65535&(E^=255&c.charCodeAt(I)))+((1540483477*(E>>>16)&65535)<<16)}return E=1540483477*(65535&(E^=E>>>13))+((1540483477*(E>>>16)&65535)<<16),(E^=E>>>15)>>>0};var Fn=rr,Gn=Ln.exports;yn.exports=Fn,yn.exports.murmur3=Fn,yn.exports.murmur2=Gn;var wi=p(yn.exports);class Rr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,h,m,E){this.ids.push(ga(s)),this.positions.push(h,m,E)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=ga(s);let m=0,E=this.ids.length-1;for(;m<E;){const O=m+E>>1;this.ids[O]>=h?E=O:m=O+1}const I=[];for(;this.ids[m]===h;)I.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return I}static serialize(s,h){const m=new Float64Array(s.ids),E=new Uint32Array(s.positions);return co(m,E,0,m.length-1),h&&h.push(m.buffer,E.buffer),{ids:m,positions:E}}static deserialize(s){const h=new Rr;return h.ids=s.ids,h.positions=s.positions,h.indexed=!0,h}}function ga(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:wi(String(c))}function co(c,s,h,m){for(;h<m;){const E=c[h+m>>1];let I=h-1,O=m+1;for(;;){do I++;while(c[I]<E);do O--;while(c[O]>E);if(I>=O)break;fi(c,I,O),fi(s,3*I,3*O),fi(s,3*I+1,3*O+1),fi(s,3*I+2,3*O+2)}O-h<m-O?(co(c,s,h,O),h=O+1):(co(c,s,O+1,m),m=O)}}function fi(c,s,h){const m=c[s];c[s]=c[h],c[h]=m}Jt("FeaturePositionMap",Rr);class ho{constructor(s,h){this.gl=s.gl,this.location=h}}class ya extends ho{constructor(s,h){super(s,h),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class mu extends ho{constructor(s,h){super(s,h),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class Eh extends ho{constructor(s,h){super(s,h),this.current=sr.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const Rm=new Float32Array(16);function Sh(c){return[Nn(255*c.r,255*c.g),Nn(255*c.b,255*c.a)]}class gu{constructor(s,h,m){this.value=s,this.uniformNames=h.map(E=>`u_${E}`),this.type=m}setUniform(s,h,m){s.set(m.constantOr(this.value))}getBinding(s,h,m){return this.type==="color"?new Eh(s,h):new ya(s,h)}}class Qi{constructor(s,h){this.uniformNames=h.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=s.tlbr}setUniform(s,h,m,E){const I=E==="u_pattern_to"?this.patternTo:E==="u_pattern_from"?this.patternFrom:E==="u_pixel_ratio_to"?this.pixelRatioTo:E==="u_pixel_ratio_from"?this.pixelRatioFrom:null;I&&s.set(I)}getBinding(s,h,m){return m.substr(0,9)==="u_pattern"?new mu(s,h):new ya(s,h)}}class di{constructor(s,h,m,E){this.expression=s,this.type=m,this.maxValue=0,this.paintVertexAttributes=h.map(I=>({name:`a_${I}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new E}populatePaintArray(s,h,m,E,I){const O=this.paintVertexArray.length,F=this.expression.evaluate(new jr(0),h,{},E,[],I);this.paintVertexArray.resize(s),this._setPaintValue(O,s,F)}updatePaintArray(s,h,m,E){const I=this.expression.evaluate({zoom:0},m,E);this._setPaintValue(s,h,I)}_setPaintValue(s,h,m){if(this.type==="color"){const E=Sh(m);for(let I=s;I<h;I++)this.paintVertexArray.emplace(I,E[0],E[1])}else{for(let E=s;E<h;E++)this.paintVertexArray.emplace(E,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ai{constructor(s,h,m,E,I,O){this.expression=s,this.uniformNames=h.map(F=>`u_${F}_t`),this.type=m,this.useIntegerZoom=E,this.zoom=I,this.maxValue=0,this.paintVertexAttributes=h.map(F=>({name:`a_${F}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new O}populatePaintArray(s,h,m,E,I){const O=this.expression.evaluate(new jr(this.zoom),h,{},E,[],I),F=this.expression.evaluate(new jr(this.zoom+1),h,{},E,[],I),$=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue($,s,O,F)}updatePaintArray(s,h,m,E){const I=this.expression.evaluate({zoom:this.zoom},m,E),O=this.expression.evaluate({zoom:this.zoom+1},m,E);this._setPaintValue(s,h,I,O)}_setPaintValue(s,h,m,E){if(this.type==="color"){const I=Sh(m),O=Sh(E);for(let F=s;F<h;F++)this.paintVertexArray.emplace(F,I[0],I[1],O[0],O[1])}else{for(let I=s;I<h;I++)this.paintVertexArray.emplace(I,m,E);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(E))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,h){const m=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,E=U(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);s.set(E)}getBinding(s,h,m){return new ya(s,h)}}class Wa{constructor(s,h,m,E,I,O){this.expression=s,this.type=h,this.useIntegerZoom=m,this.zoom=E,this.layerId=O,this.zoomInPaintVertexArray=new I,this.zoomOutPaintVertexArray=new I}populatePaintArray(s,h,m){const E=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(E,s,h.patterns&&h.patterns[this.layerId],m)}updatePaintArray(s,h,m,E,I){this._setPaintValues(s,h,m.patterns&&m.patterns[this.layerId],I)}_setPaintValues(s,h,m,E){if(!E||!m)return;const{min:I,mid:O,max:F}=m,$=E[I],W=E[O],ne=E[F];if($&&W&&ne)for(let ie=s;ie<h;ie++)this.zoomInPaintVertexArray.emplace(ie,W.tl[0],W.tl[1],W.br[0],W.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],W.pixelRatio,$.pixelRatio),this.zoomOutPaintVertexArray.emplace(ie,W.tl[0],W.tl[1],W.br[0],W.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],W.pixelRatio,ne.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,$t.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,$t.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class eo{constructor(s,h,m){this.binders={},this._buffers=[];const E=[];for(const I in s.paint._values){if(!m(I))continue;const O=s.paint.get(I);if(!(O instanceof re&&ac(O.property.specification)))continue;const F=Ka(I,s.type),$=O.value,W=O.property.specification.type,ne=O.property.useIntegerZoom,ie=O.property.specification["property-type"],fe=ie==="cross-faded"||ie==="cross-faded-data-driven";if($.kind==="constant")this.binders[I]=fe?new Qi($.value,F):new gu($.value,F,W),E.push(`/u_${I}`);else if($.kind==="source"||fe){const de=to(I,W,"source");this.binders[I]=fe?new Wa($,W,ne,h,de,s.id):new di($,F,W,de),E.push(`/a_${I}`)}else{const de=to(I,W,"composite");this.binders[I]=new ai($,F,W,ne,h,de),E.push(`/z_${I}`)}}this.cacheKey=E.sort().join("")}getMaxValue(s){const h=this.binders[s];return h instanceof di||h instanceof ai?h.maxValue:0}populatePaintArrays(s,h,m,E,I){for(const O in this.binders){const F=this.binders[O];(F instanceof di||F instanceof ai||F instanceof Wa)&&F.populatePaintArray(s,h,m,E,I)}}setConstantPatternPositions(s,h){for(const m in this.binders){const E=this.binders[m];E instanceof Qi&&E.setConstantPatternPositions(s,h)}}updatePaintArrays(s,h,m,E,I){let O=!1;for(const F in s){const $=h.getPositions(F);for(const W of $){const ne=m.feature(W.index);for(const ie in this.binders){const fe=this.binders[ie];if((fe instanceof di||fe instanceof ai||fe instanceof Wa)&&fe.expression.isStateDependent===!0){const de=E.paint.get(ie);fe.expression=de.value,fe.updatePaintArray(W.start,W.end,ne,s[F],I),O=!0}}}}return O}defines(){const s=[];for(const h in this.binders){const m=this.binders[h];(m instanceof gu||m instanceof Qi)&&s.push(...m.uniformNames.map(E=>`#define HAS_UNIFORM_${E}`))}return s}getBinderAttributes(){const s=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof di||m instanceof ai)for(let E=0;E<m.paintVertexAttributes.length;E++)s.push(m.paintVertexAttributes[E].name);else if(m instanceof Wa)for(let E=0;E<$t.members.length;E++)s.push($t.members[E].name)}return s}getBinderUniforms(){const s=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof gu||m instanceof Qi||m instanceof ai)for(const E of m.uniformNames)s.push(E)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,h){const m=[];for(const E in this.binders){const I=this.binders[E];if(I instanceof gu||I instanceof Qi||I instanceof ai){for(const O of I.uniformNames)if(h[O]){const F=I.getBinding(s,h[O],O);m.push({name:O,property:E,binding:F})}}}return m}setUniforms(s,h,m,E){for(const{name:I,property:O,binding:F}of h)this.binders[O].setUniform(F,E,m.get(O),I)}updatePaintBuffers(s){this._buffers=[];for(const h in this.binders){const m=this.binders[h];if(s&&m instanceof Wa){const E=s.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;E&&this._buffers.push(E)}else(m instanceof di||m instanceof ai)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(s){for(const h in this.binders){const m=this.binders[h];(m instanceof di||m instanceof ai||m instanceof Wa)&&m.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const h=this.binders[s];(h instanceof di||h instanceof ai||h instanceof Wa)&&h.destroy()}}}class pi{constructor(s,h,m=()=>!0){this.programConfigurations={};for(const E of s)this.programConfigurations[E.id]=new eo(E,h,m);this.needsUpload=!1,this._featureMap=new Rr,this._bufferOffset=0}populatePaintArrays(s,h,m,E,I,O){for(const F in this.programConfigurations)this.programConfigurations[F].populatePaintArrays(s,h,E,I,O);h.id!==void 0&&this._featureMap.add(h.id,m,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,h,m,E){for(const I of m)this.needsUpload=this.programConfigurations[I.id].updatePaintArrays(s,this._featureMap,h,I,E)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function Ka(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function to(c,s,h){const m={color:{source:Qr,composite:ly},number:{source:sy,composite:Qr}},E=function(I){return{"line-pattern":{source:Ke,composite:Ke},"fill-pattern":{source:Ke,composite:Ke},"fill-extrusion-pattern":{source:Ke,composite:Ke}}[I]}(c);return E&&E[h]||m[s][h]}Jt("ConstantBinder",gu),Jt("CrossFadedConstantBinder",Qi),Jt("SourceExpressionBinder",di),Jt("CrossFadedCompositeBinder",Wa),Jt("CompositeExpressionBinder",ai),Jt("ProgramConfiguration",eo,{omit:["_buffers"]}),Jt("ProgramConfigurationSet",pi);const Mi=8192,Pv=Math.pow(2,14)-1,kx=-Pv-1;function Df(c){const s=Mi/c.extent,h=c.loadGeometry();for(let m=0;m<h.length;m++){const E=h[m];for(let I=0;I<E.length;I++){const O=E[I],F=Math.round(O.x*s),$=Math.round(O.y*s);O.x=U(F,kx,Pv),O.y=U($,kx,Pv),(F<O.x||F>O.x+1||$<O.y||$>O.y+1)&&ce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function zf(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?Df(c):[]}}function uy(c,s,h,m,E){c.emplaceBack(2*s+(m+1)/2,2*h+(E+1)/2)}class Th{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new ye,this.indexArray=new mt,this.segments=new zt,this.programConfigurations=new pi(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){const E=this.layers[0],I=[];let O=null,F=!1;E.type==="circle"&&(O=E.layout.get("circle-sort-key"),F=!O.isConstant());for(const{feature:$,id:W,index:ne,sourceLayerIndex:ie}of s){const fe=this.layers[0]._featureFilter.needGeometry,de=zf($,fe);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),de,m))continue;const _e=F?O.evaluate(de,{},m):void 0,Te={id:W,properties:$.properties,type:$.type,sourceLayerIndex:ie,index:ne,geometry:fe?de.geometry:Df($),patterns:{},sortKey:_e};I.push(Te)}F&&I.sort(($,W)=>$.sortKey-W.sortKey);for(const $ of I){const{geometry:W,index:ne,sourceLayerIndex:ie}=$,fe=s[ne].feature;this.addFeature($,W,ne,m),h.featureIndex.insert(fe,W,ne,ie,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Mt),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,h,m,E){for(const I of h)for(const O of I){const F=O.x,$=O.y;if(F<0||F>=Mi||$<0||$>=Mi)continue;const W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),ne=W.vertexLength;uy(this.layoutVertexArray,F,$,-1,-1),uy(this.layoutVertexArray,F,$,1,-1),uy(this.layoutVertexArray,F,$,1,1),uy(this.layoutVertexArray,F,$,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),W.vertexLength+=4,W.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{},E)}}function Lv(c,s){for(let h=0;h<c.length;h++)if(hy(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(hy(c,s[h]))return!0;return!!cy(c,s)}function Rx(c,s,h){return!!hy(c,s)||!!fT(s,c,h)}function Av(c,s){if(c.length===1)return NO(s,c[0]);for(let h=0;h<s.length;h++){const m=s[h];for(let E=0;E<m.length;E++)if(hy(c,m[E]))return!0}for(let h=0;h<c.length;h++)if(NO(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(cy(c,s[h]))return!0;return!1}function Ov(c,s,h){if(c.length>1){if(cy(c,s))return!0;for(let m=0;m<s.length;m++)if(fT(s[m],c,h))return!0}for(let m=0;m<c.length;m++)if(fT(c[m],s,h))return!0;return!1}function cy(c,s){if(c.length===0||s.length===0)return!1;for(let h=0;h<c.length-1;h++){const m=c[h],E=c[h+1];for(let I=0;I<s.length-1;I++)if(kv(m,E,s[I],s[I+1]))return!0}return!1}function kv(c,s,h,m){return oe(c,h,m)!==oe(s,h,m)&&oe(c,s,h)!==oe(c,s,m)}function fT(c,s,h){const m=h*h;if(s.length===1)return c.distSqr(s[0])<m;for(let E=1;E<s.length;E++)if(MO(c,s[E-1],s[E])<m)return!0;return!1}function MO(c,s,h){const m=s.distSqr(h);if(m===0)return c.distSqr(s);const E=((c.x-s.x)*(h.x-s.x)+(c.y-s.y)*(h.y-s.y))/m;return c.distSqr(E<0?s:E>1?h:h.sub(s)._mult(E)._add(s))}function NO(c,s){let h,m,E,I=!1;for(let O=0;O<c.length;O++){h=c[O];for(let F=0,$=h.length-1;F<h.length;$=F++)m=h[F],E=h[$],m.y>s.y!=E.y>s.y&&s.x<(E.x-m.x)*(s.y-m.y)/(E.y-m.y)+m.x&&(I=!I)}return I}function hy(c,s){let h=!1;for(let m=0,E=c.length-1;m<c.length;E=m++){const I=c[m],O=c[E];I.y>s.y!=O.y>s.y&&s.x<(O.x-I.x)*(s.y-I.y)/(O.y-I.y)+I.x&&(h=!h)}return h}function B8(c,s,h){const m=h[0],E=h[2];if(c.x<m.x&&s.x<m.x||c.x>E.x&&s.x>E.x||c.y<m.y&&s.y<m.y||c.y>E.y&&s.y>E.y)return!1;const I=oe(c,s,h[0]);return I!==oe(c,s,h[1])||I!==oe(c,s,h[2])||I!==oe(c,s,h[3])}function Rv(c,s,h){const m=s.paint.get(c).value;return m.kind==="constant"?m.value:h.programConfigurations.get(s.id).getMaxValue(c)}function Mx(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Nx(c,s,h,m,E){if(!s[0]&&!s[1])return c;const I=y.convert(s)._mult(E);h==="viewport"&&I._rotate(-m);const O=[];for(let F=0;F<c.length;F++)O.push(c[F].sub(I));return O}let DO,zO;Jt("CircleBucket",Th,{omit:["layers"]});var j8={get paint(){return zO=zO||new hn({"circle-radius":new We(rt.paint_circle["circle-radius"]),"circle-color":new We(rt.paint_circle["circle-color"]),"circle-blur":new We(rt.paint_circle["circle-blur"]),"circle-opacity":new We(rt.paint_circle["circle-opacity"]),"circle-translate":new Ce(rt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ce(rt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ce(rt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ce(rt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new We(rt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new We(rt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new We(rt.paint_circle["circle-stroke-opacity"])})},get layout(){return DO=DO||new hn({"circle-sort-key":new We(rt.layout_circle["circle-sort-key"])})}},Ks=1e-6,fy=typeof Float32Array<"u"?Float32Array:Array;function dT(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function FO(c,s,h){var m=s[0],E=s[1],I=s[2],O=s[3],F=s[4],$=s[5],W=s[6],ne=s[7],ie=s[8],fe=s[9],de=s[10],_e=s[11],Te=s[12],Re=s[13],Ve=s[14],tt=s[15],Ze=h[0],Ye=h[1],yt=h[2],wt=h[3];return c[0]=Ze*m+Ye*F+yt*ie+wt*Te,c[1]=Ze*E+Ye*$+yt*fe+wt*Re,c[2]=Ze*I+Ye*W+yt*de+wt*Ve,c[3]=Ze*O+Ye*ne+yt*_e+wt*tt,c[4]=(Ze=h[4])*m+(Ye=h[5])*F+(yt=h[6])*ie+(wt=h[7])*Te,c[5]=Ze*E+Ye*$+yt*fe+wt*Re,c[6]=Ze*I+Ye*W+yt*de+wt*Ve,c[7]=Ze*O+Ye*ne+yt*_e+wt*tt,c[8]=(Ze=h[8])*m+(Ye=h[9])*F+(yt=h[10])*ie+(wt=h[11])*Te,c[9]=Ze*E+Ye*$+yt*fe+wt*Re,c[10]=Ze*I+Ye*W+yt*de+wt*Ve,c[11]=Ze*O+Ye*ne+yt*_e+wt*tt,c[12]=(Ze=h[12])*m+(Ye=h[13])*F+(yt=h[14])*ie+(wt=h[15])*Te,c[13]=Ze*E+Ye*$+yt*fe+wt*Re,c[14]=Ze*I+Ye*W+yt*de+wt*Ve,c[15]=Ze*O+Ye*ne+yt*_e+wt*tt,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var Mv,$8=FO;function Dx(c,s,h){var m=s[0],E=s[1],I=s[2],O=s[3];return c[0]=h[0]*m+h[4]*E+h[8]*I+h[12]*O,c[1]=h[1]*m+h[5]*E+h[9]*I+h[13]*O,c[2]=h[2]*m+h[6]*E+h[10]*I+h[14]*O,c[3]=h[3]*m+h[7]*E+h[11]*I+h[15]*O,c}Mv=new fy(4),fy!=Float32Array&&(Mv[0]=0,Mv[1]=0,Mv[2]=0,Mv[3]=0);class U8 extends Hr{constructor(s){super(s,j8)}createBucket(s){return new Th(s)}queryRadius(s){const h=s;return Rv("circle-radius",this,h)+Rv("circle-stroke-width",this,h)+Mx(this.paint.get("circle-translate"))}queryIntersectsFeature(s,h,m,E,I,O,F,$){const W=Nx(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),O.angle,F),ne=this.paint.get("circle-radius").evaluate(h,m)+this.paint.get("circle-stroke-width").evaluate(h,m),ie=this.paint.get("circle-pitch-alignment")==="map",fe=ie?W:function(_e,Te){return _e.map(Re=>BO(Re,Te))}(W,$),de=ie?ne*F:ne;for(const _e of E)for(const Te of _e){const Re=ie?Te:BO(Te,$);let Ve=de;const tt=Dx([],[Te.x,Te.y,0,1],$);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ve*=tt[3]/O.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ve*=O.cameraToCenterDistance/tt[3]),Rx(fe,Re,Ve))return!0}return!1}}function BO(c,s){const h=Dx([],[c.x,c.y,0,1],s);return new y(h[0]/h[3],h[1]/h[3])}class jO extends Th{}let $O;Jt("HeatmapBucket",jO,{omit:["layers"]});var V8={get paint(){return $O=$O||new hn({"heatmap-radius":new We(rt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new We(rt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ce(rt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new tn(rt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ce(rt.paint_heatmap["heatmap-opacity"])})}};function pT(c,{width:s,height:h},m,E){if(E){if(E instanceof Uint8ClampedArray)E=new Uint8Array(E.buffer);else if(E.length!==s*h*m)throw new RangeError(`mismatched image size. expected: ${E.length} but got: ${s*h*m}`)}else E=new Uint8Array(s*h*m);return c.width=s,c.height=h,c.data=E,c}function UO(c,{width:s,height:h},m){if(s===c.width&&h===c.height)return;const E=pT({},{width:s,height:h},m);mT(c,E,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,h)},m),c.width=s,c.height=h,c.data=E.data}function mT(c,s,h,m,E,I){if(E.width===0||E.height===0)return s;if(E.width>c.width||E.height>c.height||h.x>c.width-E.width||h.y>c.height-E.height)throw new RangeError("out of range source coordinates for image copy");if(E.width>s.width||E.height>s.height||m.x>s.width-E.width||m.y>s.height-E.height)throw new RangeError("out of range destination coordinates for image copy");const O=c.data,F=s.data;if(O===F)throw new Error("srcData equals dstData, so image is already copied");for(let $=0;$<E.height;$++){const W=((h.y+$)*c.width+h.x)*I,ne=((m.y+$)*s.width+m.x)*I;for(let ie=0;ie<E.width*I;ie++)F[ne+ie]=O[W+ie]}return s}class Nv{constructor(s,h){pT(this,s,1,h)}resize(s){UO(this,s,1)}clone(){return new Nv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,m,E,I){mT(s,h,m,E,I,1)}}class El{constructor(s,h){pT(this,s,4,h)}resize(s){UO(this,s,4)}replace(s,h){h?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new El({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,m,E,I){mT(s,h,m,E,I,4)}}function VO(c){const s={},h=c.resolution||256,m=c.clips?c.clips.length:1,E=c.image||new El({width:h,height:m});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const I=(O,F,$)=>{s[c.evaluationKey]=$;const W=c.expression.evaluate(s);E.data[O+F+0]=Math.floor(255*W.r/W.a),E.data[O+F+1]=Math.floor(255*W.g/W.a),E.data[O+F+2]=Math.floor(255*W.b/W.a),E.data[O+F+3]=Math.floor(255*W.a)};if(c.clips)for(let O=0,F=0;O<m;++O,F+=4*h)for(let $=0,W=0;$<h;$++,W+=4){const ne=$/(h-1),{start:ie,end:fe}=c.clips[O];I(F,W,ie*(1-ne)+fe*ne)}else for(let O=0,F=0;O<h;O++,F+=4)I(0,F,O/(h-1));return E}Jt("AlphaImage",Nv),Jt("RGBAImage",El);class q8 extends Hr{createBucket(s){return new jO(s)}constructor(s){super(s,V8),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=VO({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let qO;var G8={get paint(){return qO=qO||new hn({"hillshade-illumination-direction":new Ce(rt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ce(rt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ce(rt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ce(rt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ce(rt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ce(rt.paint_hillshade["hillshade-accent-color"])})}};class H8 extends Hr{constructor(s){super(s,G8)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Z8=$r([{name:"a_pos",components:2,type:"Int16"}],4),{members:W8}=Z8;var gT={exports:{}};function zx(c,s,h){h=h||2;var m,E,I,O,F,$,W,ne=s&&s.length,ie=ne?s[0]*h:c.length,fe=GO(c,0,ie,h,!0),de=[];if(!fe||fe.next===fe.prev)return de;if(ne&&(fe=function(Te,Re,Ve,tt){var Ze,Ye,yt,wt=[];for(Ze=0,Ye=Re.length;Ze<Ye;Ze++)(yt=GO(Te,Re[Ze]*tt,Ze<Ye-1?Re[Ze+1]*tt:Te.length,tt,!1))===yt.next&&(yt.steiner=!0),wt.push(nU(yt));for(wt.sort(Q8),Ze=0;Ze<wt.length;Ze++)Ve=eU(wt[Ze],Ve);return Ve}(c,s,fe,h)),c.length>80*h){m=I=c[0],E=O=c[1];for(var _e=h;_e<ie;_e+=h)(F=c[_e])<m&&(m=F),($=c[_e+1])<E&&(E=$),F>I&&(I=F),$>O&&(O=$);W=(W=Math.max(I-m,O-E))!==0?32767/W:0}return Dv(fe,de,h,m,E,W,0),de}function GO(c,s,h,m,E){var I,O;if(E===vT(c,s,h,m)>0)for(I=s;I<h;I+=m)O=WO(I,c[I],c[I+1],O);else for(I=h-m;I>=s;I-=m)O=WO(I,c[I],c[I+1],O);return O&&Fx(O,O.next)&&(Fv(O),O=O.next),O}function Mm(c,s){if(!c)return c;s||(s=c);var h,m=c;do if(h=!1,m.steiner||!Fx(m,m.next)&&Ui(m.prev,m,m.next)!==0)m=m.next;else{if(Fv(m),(m=s=m.prev)===m.next)break;h=!0}while(h||m!==s);return s}function Dv(c,s,h,m,E,I,O){if(c){!O&&I&&function(ne,ie,fe,de){var _e=ne;do _e.z===0&&(_e.z=yT(_e.x,_e.y,ie,fe,de)),_e.prevZ=_e.prev,_e.nextZ=_e.next,_e=_e.next;while(_e!==ne);_e.prevZ.nextZ=null,_e.prevZ=null,function(Te){var Re,Ve,tt,Ze,Ye,yt,wt,Xt,ln=1;do{for(Ve=Te,Te=null,Ye=null,yt=0;Ve;){for(yt++,tt=Ve,wt=0,Re=0;Re<ln&&(wt++,tt=tt.nextZ);Re++);for(Xt=ln;wt>0||Xt>0&&tt;)wt!==0&&(Xt===0||!tt||Ve.z<=tt.z)?(Ze=Ve,Ve=Ve.nextZ,wt--):(Ze=tt,tt=tt.nextZ,Xt--),Ye?Ye.nextZ=Ze:Te=Ze,Ze.prevZ=Ye,Ye=Ze;Ve=tt}Ye.nextZ=null,ln*=2}while(yt>1)}(_e)}(c,m,E,I);for(var F,$,W=c;c.prev!==c.next;)if(F=c.prev,$=c.next,I?X8(c,m,E,I):K8(c))s.push(F.i/h|0),s.push(c.i/h|0),s.push($.i/h|0),Fv(c),c=$.next,W=$.next;else if((c=$)===W){O?O===1?Dv(c=Y8(Mm(c),s,h),s,h,m,E,I,2):O===2&&J8(c,s,h,m,E,I):Dv(Mm(c),s,h,m,E,I,1);break}}}function K8(c){var s=c.prev,h=c,m=c.next;if(Ui(s,h,m)>=0)return!1;for(var E=s.x,I=h.x,O=m.x,F=s.y,$=h.y,W=m.y,ne=E<I?E<O?E:O:I<O?I:O,ie=F<$?F<W?F:W:$<W?$:W,fe=E>I?E>O?E:O:I>O?I:O,de=F>$?F>W?F:W:$>W?$:W,_e=m.next;_e!==s;){if(_e.x>=ne&&_e.x<=fe&&_e.y>=ie&&_e.y<=de&&dy(E,F,I,$,O,W,_e.x,_e.y)&&Ui(_e.prev,_e,_e.next)>=0)return!1;_e=_e.next}return!0}function X8(c,s,h,m){var E=c.prev,I=c,O=c.next;if(Ui(E,I,O)>=0)return!1;for(var F=E.x,$=I.x,W=O.x,ne=E.y,ie=I.y,fe=O.y,de=F<$?F<W?F:W:$<W?$:W,_e=ne<ie?ne<fe?ne:fe:ie<fe?ie:fe,Te=F>$?F>W?F:W:$>W?$:W,Re=ne>ie?ne>fe?ne:fe:ie>fe?ie:fe,Ve=yT(de,_e,s,h,m),tt=yT(Te,Re,s,h,m),Ze=c.prevZ,Ye=c.nextZ;Ze&&Ze.z>=Ve&&Ye&&Ye.z<=tt;){if(Ze.x>=de&&Ze.x<=Te&&Ze.y>=_e&&Ze.y<=Re&&Ze!==E&&Ze!==O&&dy(F,ne,$,ie,W,fe,Ze.x,Ze.y)&&Ui(Ze.prev,Ze,Ze.next)>=0||(Ze=Ze.prevZ,Ye.x>=de&&Ye.x<=Te&&Ye.y>=_e&&Ye.y<=Re&&Ye!==E&&Ye!==O&&dy(F,ne,$,ie,W,fe,Ye.x,Ye.y)&&Ui(Ye.prev,Ye,Ye.next)>=0))return!1;Ye=Ye.nextZ}for(;Ze&&Ze.z>=Ve;){if(Ze.x>=de&&Ze.x<=Te&&Ze.y>=_e&&Ze.y<=Re&&Ze!==E&&Ze!==O&&dy(F,ne,$,ie,W,fe,Ze.x,Ze.y)&&Ui(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.prevZ}for(;Ye&&Ye.z<=tt;){if(Ye.x>=de&&Ye.x<=Te&&Ye.y>=_e&&Ye.y<=Re&&Ye!==E&&Ye!==O&&dy(F,ne,$,ie,W,fe,Ye.x,Ye.y)&&Ui(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.nextZ}return!0}function Y8(c,s,h){var m=c;do{var E=m.prev,I=m.next.next;!Fx(E,I)&&HO(E,m,m.next,I)&&zv(E,I)&&zv(I,E)&&(s.push(E.i/h|0),s.push(m.i/h|0),s.push(I.i/h|0),Fv(m),Fv(m.next),m=c=I),m=m.next}while(m!==c);return Mm(m)}function J8(c,s,h,m,E,I){var O=c;do{for(var F=O.next.next;F!==O.prev;){if(O.i!==F.i&&rU(O,F)){var $=ZO(O,F);return O=Mm(O,O.next),$=Mm($,$.next),Dv(O,s,h,m,E,I,0),void Dv($,s,h,m,E,I,0)}F=F.next}O=O.next}while(O!==c)}function Q8(c,s){return c.x-s.x}function eU(c,s){var h=function(E,I){var O,F=I,$=E.x,W=E.y,ne=-1/0;do{if(W<=F.y&&W>=F.next.y&&F.next.y!==F.y){var ie=F.x+(W-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(ie<=$&&ie>ne&&(ne=ie,O=F.x<F.next.x?F:F.next,ie===$))return O}F=F.next}while(F!==I);if(!O)return null;var fe,de=O,_e=O.x,Te=O.y,Re=1/0;F=O;do $>=F.x&&F.x>=_e&&$!==F.x&&dy(W<Te?$:ne,W,_e,Te,W<Te?ne:$,W,F.x,F.y)&&(fe=Math.abs(W-F.y)/($-F.x),zv(F,E)&&(fe<Re||fe===Re&&(F.x>O.x||F.x===O.x&&tU(O,F)))&&(O=F,Re=fe)),F=F.next;while(F!==de);return O}(c,s);if(!h)return s;var m=ZO(h,c);return Mm(m,m.next),Mm(h,h.next)}function tU(c,s){return Ui(c.prev,c,s.prev)<0&&Ui(s.next,c,c.next)<0}function yT(c,s,h,m,E){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-h)*E|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-m)*E|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function nU(c){var s=c,h=c;do(s.x<h.x||s.x===h.x&&s.y<h.y)&&(h=s),s=s.next;while(s!==c);return h}function dy(c,s,h,m,E,I,O,F){return(E-O)*(s-F)>=(c-O)*(I-F)&&(c-O)*(m-F)>=(h-O)*(s-F)&&(h-O)*(I-F)>=(E-O)*(m-F)}function rU(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(h,m){var E=h;do{if(E.i!==h.i&&E.next.i!==h.i&&E.i!==m.i&&E.next.i!==m.i&&HO(E,E.next,h,m))return!0;E=E.next}while(E!==h);return!1}(c,s)&&(zv(c,s)&&zv(s,c)&&function(h,m){var E=h,I=!1,O=(h.x+m.x)/2,F=(h.y+m.y)/2;do E.y>F!=E.next.y>F&&E.next.y!==E.y&&O<(E.next.x-E.x)*(F-E.y)/(E.next.y-E.y)+E.x&&(I=!I),E=E.next;while(E!==h);return I}(c,s)&&(Ui(c.prev,c,s.prev)||Ui(c,s.prev,s))||Fx(c,s)&&Ui(c.prev,c,c.next)>0&&Ui(s.prev,s,s.next)>0)}function Ui(c,s,h){return(s.y-c.y)*(h.x-s.x)-(s.x-c.x)*(h.y-s.y)}function Fx(c,s){return c.x===s.x&&c.y===s.y}function HO(c,s,h,m){var E=jx(Ui(c,s,h)),I=jx(Ui(c,s,m)),O=jx(Ui(h,m,c)),F=jx(Ui(h,m,s));return E!==I&&O!==F||!(E!==0||!Bx(c,h,s))||!(I!==0||!Bx(c,m,s))||!(O!==0||!Bx(h,c,m))||!(F!==0||!Bx(h,s,m))}function Bx(c,s,h){return s.x<=Math.max(c.x,h.x)&&s.x>=Math.min(c.x,h.x)&&s.y<=Math.max(c.y,h.y)&&s.y>=Math.min(c.y,h.y)}function jx(c){return c>0?1:c<0?-1:0}function zv(c,s){return Ui(c.prev,c,c.next)<0?Ui(c,s,c.next)>=0&&Ui(c,c.prev,s)>=0:Ui(c,s,c.prev)<0||Ui(c,c.next,s)<0}function ZO(c,s){var h=new _T(c.i,c.x,c.y),m=new _T(s.i,s.x,s.y),E=c.next,I=s.prev;return c.next=s,s.prev=c,h.next=E,E.prev=h,m.next=h,h.prev=m,I.next=m,m.prev=I,m}function WO(c,s,h,m){var E=new _T(c,s,h);return m?(E.next=m.next,E.prev=m,m.next.prev=E,m.next=E):(E.prev=E,E.next=E),E}function Fv(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function _T(c,s,h){this.i=c,this.x=s,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vT(c,s,h,m){for(var E=0,I=s,O=h-m;I<h;I+=m)E+=(c[O]-c[I])*(c[I+1]+c[O+1]),O=I;return E}gT.exports=zx,gT.exports.default=zx,zx.deviation=function(c,s,h,m){var E=s&&s.length,I=Math.abs(vT(c,0,E?s[0]*h:c.length,h));if(E)for(var O=0,F=s.length;O<F;O++)I-=Math.abs(vT(c,s[O]*h,O<F-1?s[O+1]*h:c.length,h));var $=0;for(O=0;O<m.length;O+=3){var W=m[O]*h,ne=m[O+1]*h,ie=m[O+2]*h;$+=Math.abs((c[W]-c[ie])*(c[ne+1]-c[W+1])-(c[W]-c[ne])*(c[ie+1]-c[W+1]))}return I===0&&$===0?0:Math.abs(($-I)/I)},zx.flatten=function(c){for(var s=c[0][0].length,h={vertices:[],holes:[],dimensions:s},m=0,E=0;E<c.length;E++){for(var I=0;I<c[E].length;I++)for(var O=0;O<s;O++)h.vertices.push(c[E][I][O]);E>0&&h.holes.push(m+=c[E-1].length)}return h};var KO=p(gT.exports);function iU(c,s,h,m,E){XO(c,s,h||0,m||c.length-1,E||oU)}function XO(c,s,h,m,E){for(;m>h;){if(m-h>600){var I=m-h+1,O=s-h+1,F=Math.log(I),$=.5*Math.exp(2*F/3),W=.5*Math.sqrt(F*$*(I-$)/I)*(O-I/2<0?-1:1);XO(c,s,Math.max(h,Math.floor(s-O*$/I+W)),Math.min(m,Math.floor(s+(I-O)*$/I+W)),E)}var ne=c[s],ie=h,fe=m;for(Bv(c,h,s),E(c[m],ne)>0&&Bv(c,h,m);ie<fe;){for(Bv(c,ie,fe),ie++,fe--;E(c[ie],ne)<0;)ie++;for(;E(c[fe],ne)>0;)fe--}E(c[h],ne)===0?Bv(c,h,fe):Bv(c,++fe,m),fe<=s&&(h=fe+1),s<=fe&&(m=fe-1)}}function Bv(c,s,h){var m=c[s];c[s]=c[h],c[h]=m}function oU(c,s){return c<s?-1:c>s?1:0}function xT(c,s){const h=c.length;if(h<=1)return[c];const m=[];let E,I;for(let O=0;O<h;O++){const F=we(c[O]);F!==0&&(c[O].area=Math.abs(F),I===void 0&&(I=F<0),I===F<0?(E&&m.push(E),E=[c[O]]):E.push(c[O]))}if(E&&m.push(E),s>1)for(let O=0;O<m.length;O++)m[O].length<=s||(iU(m[O],s,1,m[O].length-1,sU),m[O]=m[O].slice(0,s));return m}function sU(c,s){return s.area-c.area}function bT(c,s,h){const m=h.patternDependencies;let E=!1;for(const I of s){const O=I.paint.get(`${c}-pattern`);O.isConstant()||(E=!0);const F=O.constantOr(null);F&&(E=!0,m[F.to]=!0,m[F.from]=!0)}return E}function wT(c,s,h,m,E){const I=E.patternDependencies;for(const O of s){const F=O.paint.get(`${c}-pattern`).value;if(F.kind!=="constant"){let $=F.evaluate({zoom:m-1},h,{},E.availableImages),W=F.evaluate({zoom:m},h,{},E.availableImages),ne=F.evaluate({zoom:m+1},h,{},E.availableImages);$=$&&$.name?$.name:$,W=W&&W.name?W.name:W,ne=ne&&ne.name?ne.name:ne,I[$]=!0,I[W]=!0,I[ne]=!0,h.patterns[O.id]={min:$,mid:W,max:ne}}}return h}class ET{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Le,this.indexArray=new mt,this.indexArray2=new Tt,this.programConfigurations=new pi(s.layers,s.zoom),this.segments=new zt,this.segments2=new zt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.hasPattern=bT("fill",this.layers,h);const E=this.layers[0].layout.get("fill-sort-key"),I=!E.isConstant(),O=[];for(const{feature:F,id:$,index:W,sourceLayerIndex:ne}of s){const ie=this.layers[0]._featureFilter.needGeometry,fe=zf(F,ie);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),fe,m))continue;const de=I?E.evaluate(fe,{},m,h.availableImages):void 0,_e={id:$,properties:F.properties,type:F.type,sourceLayerIndex:ne,index:W,geometry:ie?fe.geometry:Df(F),patterns:{},sortKey:de};O.push(_e)}I&&O.sort((F,$)=>F.sortKey-$.sortKey);for(const F of O){const{geometry:$,index:W,sourceLayerIndex:ne}=F;if(this.hasPattern){const ie=wT("fill",this.layers,F,this.zoom,h);this.patternFeatures.push(ie)}else this.addFeature(F,$,W,m,{});h.featureIndex.insert(s[W].feature,$,W,ne,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}addFeatures(s,h,m){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,W8),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,h,m,E,I){for(const O of xT(h,500)){let F=0;for(const de of O)F+=de.length;const $=this.segments.prepareSegment(F,this.layoutVertexArray,this.indexArray),W=$.vertexLength,ne=[],ie=[];for(const de of O){if(de.length===0)continue;de!==O[0]&&ie.push(ne.length/2);const _e=this.segments2.prepareSegment(de.length,this.layoutVertexArray,this.indexArray2),Te=_e.vertexLength;this.layoutVertexArray.emplaceBack(de[0].x,de[0].y),this.indexArray2.emplaceBack(Te+de.length-1,Te),ne.push(de[0].x),ne.push(de[0].y);for(let Re=1;Re<de.length;Re++)this.layoutVertexArray.emplaceBack(de[Re].x,de[Re].y),this.indexArray2.emplaceBack(Te+Re-1,Te+Re),ne.push(de[Re].x),ne.push(de[Re].y);_e.vertexLength+=de.length,_e.primitiveLength+=de.length}const fe=KO(ne,ie);for(let de=0;de<fe.length;de+=3)this.indexArray.emplaceBack(W+fe[de],W+fe[de+1],W+fe[de+2]);$.vertexLength+=F,$.primitiveLength+=fe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,I,E)}}let YO,JO;Jt("FillBucket",ET,{omit:["layers","patternFeatures"]});var aU={get paint(){return JO=JO||new hn({"fill-antialias":new Ce(rt.paint_fill["fill-antialias"]),"fill-opacity":new We(rt.paint_fill["fill-opacity"]),"fill-color":new We(rt.paint_fill["fill-color"]),"fill-outline-color":new We(rt.paint_fill["fill-outline-color"]),"fill-translate":new Ce(rt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ce(rt.paint_fill["fill-translate-anchor"]),"fill-pattern":new dt(rt.paint_fill["fill-pattern"])})},get layout(){return YO=YO||new hn({"fill-sort-key":new We(rt.layout_fill["fill-sort-key"])})}};class lU extends Hr{constructor(s){super(s,aU)}recalculate(s,h){super.recalculate(s,h);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new ET(s)}queryRadius(){return Mx(this.paint.get("fill-translate"))}queryIntersectsFeature(s,h,m,E,I,O,F){return Av(Nx(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),O.angle,F),E)}isTileClipped(){return!0}}const uU=$r([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),cU=$r([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hU}=uU;var Hd={},fU=g,QO=py;function py(c,s,h,m,E){this.properties={},this.extent=h,this.type=0,this._pbf=c,this._geometry=-1,this._keys=m,this._values=E,c.readFields(dU,this,s)}function dU(c,s,h){c==1?s.id=h.readVarint():c==2?function(m,E){for(var I=m.readVarint()+m.pos;m.pos<I;){var O=E._keys[m.readVarint()],F=E._values[m.readVarint()];E.properties[O]=F}}(h,s):c==3?s.type=h.readVarint():c==4&&(s._geometry=h.pos)}function pU(c){for(var s,h,m=0,E=0,I=c.length,O=I-1;E<I;O=E++)m+=((h=c[O]).x-(s=c[E]).x)*(s.y+h.y);return m}py.types=["Unknown","Point","LineString","Polygon"],py.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var s,h=c.readVarint()+c.pos,m=1,E=0,I=0,O=0,F=[];c.pos<h;){if(E<=0){var $=c.readVarint();m=7&$,E=$>>3}if(E--,m===1||m===2)I+=c.readSVarint(),O+=c.readSVarint(),m===1&&(s&&F.push(s),s=[]),s.push(new fU(I,O));else{if(m!==7)throw new Error("unknown command "+m);s&&s.push(s[0].clone())}}return s&&F.push(s),F},py.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var s=c.readVarint()+c.pos,h=1,m=0,E=0,I=0,O=1/0,F=-1/0,$=1/0,W=-1/0;c.pos<s;){if(m<=0){var ne=c.readVarint();h=7&ne,m=ne>>3}if(m--,h===1||h===2)(E+=c.readSVarint())<O&&(O=E),E>F&&(F=E),(I+=c.readSVarint())<$&&($=I),I>W&&(W=I);else if(h!==7)throw new Error("unknown command "+h)}return[O,$,F,W]},py.prototype.toGeoJSON=function(c,s,h){var m,E,I=this.extent*Math.pow(2,h),O=this.extent*c,F=this.extent*s,$=this.loadGeometry(),W=py.types[this.type];function ne(de){for(var _e=0;_e<de.length;_e++){var Te=de[_e];de[_e]=[360*(Te.x+O)/I-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+F)/I)*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(m=0;m<$.length;m++)ie[m]=$[m][0];ne($=ie);break;case 2:for(m=0;m<$.length;m++)ne($[m]);break;case 3:for($=function(de){var _e=de.length;if(_e<=1)return[de];for(var Te,Re,Ve=[],tt=0;tt<_e;tt++){var Ze=pU(de[tt]);Ze!==0&&(Re===void 0&&(Re=Ze<0),Re===Ze<0?(Te&&Ve.push(Te),Te=[de[tt]]):Te.push(de[tt]))}return Te&&Ve.push(Te),Ve}($),m=0;m<$.length;m++)for(E=0;E<$[m].length;E++)ne($[m][E])}$.length===1?$=$[0]:W="Multi"+W;var fe={type:"Feature",geometry:{type:W,coordinates:$},properties:this.properties};return"id"in this&&(fe.id=this.id),fe};var mU=QO,ek=tk;function tk(c,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(gU,this,s),this.length=this._features.length}function gU(c,s,h){c===15?s.version=h.readVarint():c===1?s.name=h.readString():c===5?s.extent=h.readVarint():c===2?s._features.push(h.pos):c===3?s._keys.push(h.readString()):c===4&&s._values.push(function(m){for(var E=null,I=m.readVarint()+m.pos;m.pos<I;){var O=m.readVarint()>>3;E=O===1?m.readString():O===2?m.readFloat():O===3?m.readDouble():O===4?m.readVarint64():O===5?m.readVarint():O===6?m.readSVarint():O===7?m.readBoolean():null}return E}(h))}tk.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var s=this._pbf.readVarint()+this._pbf.pos;return new mU(this._pbf,s,this.extent,this._keys,this._values)};var yU=ek;function _U(c,s,h){if(c===3){var m=new yU(h,h.readVarint()+h.pos);m.length&&(s[m.name]=m)}}Hd.VectorTile=function(c,s){this.layers=c.readFields(_U,{},s)},Hd.VectorTileFeature=QO,Hd.VectorTileLayer=ek;const vU=Hd.VectorTileFeature.types,ST=Math.pow(2,13);function jv(c,s,h,m,E,I,O,F){c.emplaceBack(s,h,2*Math.floor(m*ST)+O,E*ST*2,I*ST*2,Math.round(F))}class TT{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Pe,this.centroidVertexArray=new ue,this.indexArray=new mt,this.programConfigurations=new pi(s.layers,s.zoom),this.segments=new zt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.features=[],this.hasPattern=bT("fill-extrusion",this.layers,h);for(const{feature:E,id:I,index:O,sourceLayerIndex:F}of s){const $=this.layers[0]._featureFilter.needGeometry,W=zf(E,$);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),W,m))continue;const ne={id:I,sourceLayerIndex:F,index:O,geometry:$?W.geometry:Df(E),properties:E.properties,type:E.type,patterns:{}};this.hasPattern?this.features.push(wT("fill-extrusion",this.layers,ne,this.zoom,h)):this.addFeature(ne,ne.geometry,O,m,{}),h.featureIndex.insert(E,ne.geometry,O,F,this.index,!0)}}addFeatures(s,h,m){for(const E of this.features){const{geometry:I}=E;this.addFeature(E,I,E.index,h,m)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,hU),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,cU.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,h,m,E,I){const O={x:0,y:0,vertexCount:0};for(const F of xT(h,500)){let $=0;for(const _e of F)$+=_e.length;let W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const _e of F){if(_e.length===0||bU(_e))continue;let Te=0;for(let Re=0;Re<_e.length;Re++){const Ve=_e[Re];if(Re>=1){const tt=_e[Re-1];if(!xU(Ve,tt)){W.vertexLength+4>zt.MAX_VERTEX_ARRAY_LENGTH&&(W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ze=Ve.sub(tt)._perp()._unit(),Ye=tt.dist(Ve);Te+Ye>32768&&(Te=0),jv(this.layoutVertexArray,Ve.x,Ve.y,Ze.x,Ze.y,0,0,Te),jv(this.layoutVertexArray,Ve.x,Ve.y,Ze.x,Ze.y,0,1,Te),O.x+=2*Ve.x,O.y+=2*Ve.y,O.vertexCount+=2,Te+=Ye,jv(this.layoutVertexArray,tt.x,tt.y,Ze.x,Ze.y,0,0,Te),jv(this.layoutVertexArray,tt.x,tt.y,Ze.x,Ze.y,0,1,Te),O.x+=2*tt.x,O.y+=2*tt.y,O.vertexCount+=2;const yt=W.vertexLength;this.indexArray.emplaceBack(yt,yt+2,yt+1),this.indexArray.emplaceBack(yt+1,yt+2,yt+3),W.vertexLength+=4,W.primitiveLength+=2}}}}if(W.vertexLength+$>zt.MAX_VERTEX_ARRAY_LENGTH&&(W=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray)),vU[s.type]!=="Polygon")continue;const ne=[],ie=[],fe=W.vertexLength;for(const _e of F)if(_e.length!==0){_e!==F[0]&&ie.push(ne.length/2);for(let Te=0;Te<_e.length;Te++){const Re=_e[Te];jv(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),O.x+=Re.x,O.y+=Re.y,O.vertexCount+=1,ne.push(Re.x),ne.push(Re.y)}}const de=KO(ne,ie);for(let _e=0;_e<de.length;_e+=3)this.indexArray.emplaceBack(fe+de[_e],fe+de[_e+2],fe+de[_e+1]);W.primitiveLength+=de.length/3,W.vertexLength+=$}for(let F=0;F<O.vertexCount;F++)this.centroidVertexArray.emplaceBack(Math.floor(O.x/O.vertexCount),Math.floor(O.y/O.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,I,E)}}function xU(c,s){return c.x===s.x&&(c.x<0||c.x>Mi)||c.y===s.y&&(c.y<0||c.y>Mi)}function bU(c){return c.every(s=>s.x<0)||c.every(s=>s.x>Mi)||c.every(s=>s.y<0)||c.every(s=>s.y>Mi)}let nk;Jt("FillExtrusionBucket",TT,{omit:["layers","features"]});var wU={get paint(){return nk=nk||new hn({"fill-extrusion-opacity":new Ce(rt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new We(rt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ce(rt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ce(rt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new dt(rt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new We(rt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new We(rt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ce(rt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class EU extends Hr{constructor(s){super(s,wU)}createBucket(s){return new TT(s)}queryRadius(){return Mx(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(s,h,m,E,I,O,F,$){const W=Nx(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),O.angle,F),ne=this.paint.get("fill-extrusion-height").evaluate(h,m),ie=this.paint.get("fill-extrusion-base").evaluate(h,m),fe=function(_e,Te,Re,Ve){const tt=[];for(const Ze of _e){const Ye=[Ze.x,Ze.y,0,1];Dx(Ye,Ye,Te),tt.push(new y(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return tt}(W,$),de=function(_e,Te,Re,Ve){const tt=[],Ze=[],Ye=Ve[8]*Te,yt=Ve[9]*Te,wt=Ve[10]*Te,Xt=Ve[11]*Te,ln=Ve[8]*Re,Wt=Ve[9]*Re,Ht=Ve[10]*Re,Nt=Ve[11]*Re;for(const nn of _e){const Ut=[],Ot=[];for(const mn of nn){const un=mn.x,Wn=mn.y,ei=Ve[0]*un+Ve[4]*Wn+Ve[12],li=Ve[1]*un+Ve[5]*Wn+Ve[13],po=Ve[2]*un+Ve[6]*Wn+Ve[14],Xa=Ve[3]*un+Ve[7]*Wn+Ve[15],Xs=po+wt,no=Xa+Xt,Bo=ei+ln,Yo=li+Wt,Ys=po+Ht,Js=Xa+Nt,mo=new y((ei+Ye)/no,(li+yt)/no);mo.z=Xs/no,Ut.push(mo);const go=new y(Bo/Js,Yo/Js);go.z=Ys/Js,Ot.push(go)}tt.push(Ut),Ze.push(Ot)}return[tt,Ze]}(E,ie,ne,$);return function(_e,Te,Re){let Ve=1/0;Av(Re,Te)&&(Ve=rk(Re,Te[0]));for(let tt=0;tt<Te.length;tt++){const Ze=Te[tt],Ye=_e[tt];for(let yt=0;yt<Ze.length-1;yt++){const wt=Ze[yt],Xt=[wt,Ze[yt+1],Ye[yt+1],Ye[yt],wt];Lv(Re,Xt)&&(Ve=Math.min(Ve,rk(Re,Xt)))}}return Ve!==1/0&&Ve}(de[0],de[1],fe)}}function $v(c,s){return c.x*s.x+c.y*s.y}function rk(c,s){if(c.length===1){let h=0;const m=s[h++];let E;for(;!E||m.equals(E);)if(E=s[h++],!E)return 1/0;for(;h<s.length;h++){const I=s[h],O=c[0],F=E.sub(m),$=I.sub(m),W=O.sub(m),ne=$v(F,F),ie=$v(F,$),fe=$v($,$),de=$v(W,F),_e=$v(W,$),Te=ne*fe-ie*ie,Re=(fe*de-ie*_e)/Te,Ve=(ne*_e-ie*de)/Te,tt=m.z*(1-Re-Ve)+E.z*Re+I.z*Ve;if(isFinite(tt))return tt}return 1/0}{let h=1/0;for(const m of s)h=Math.min(h,m.z);return h}}const SU=$r([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:TU}=SU,CU=$r([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:IU}=CU,PU=Hd.VectorTileFeature.types,LU=Math.cos(Math.PI/180*37.5),ik=Math.pow(2,14)/.5;class CT{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Me,this.layoutVertexArray2=new Se,this.indexArray=new mt,this.programConfigurations=new pi(s.layers,s.zoom),this.segments=new zt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.hasPattern=bT("line",this.layers,h);const E=this.layers[0].layout.get("line-sort-key"),I=!E.isConstant(),O=[];for(const{feature:F,id:$,index:W,sourceLayerIndex:ne}of s){const ie=this.layers[0]._featureFilter.needGeometry,fe=zf(F,ie);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),fe,m))continue;const de=I?E.evaluate(fe,{},m):void 0,_e={id:$,properties:F.properties,type:F.type,sourceLayerIndex:ne,index:W,geometry:ie?fe.geometry:Df(F),patterns:{},sortKey:de};O.push(_e)}I&&O.sort((F,$)=>F.sortKey-$.sortKey);for(const F of O){const{geometry:$,index:W,sourceLayerIndex:ne}=F;if(this.hasPattern){const ie=wT("line",this.layers,F,this.zoom,h);this.patternFeatures.push(ie)}else this.addFeature(F,$,W,m,{});h.featureIndex.insert(s[W].feature,$,W,ne,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}addFeatures(s,h,m){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,IU)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,TU),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,h,m,E,I){const O=this.layers[0].layout,F=O.get("line-join").evaluate(s,{}),$=O.get("line-cap"),W=O.get("line-miter-limit"),ne=O.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const ie of h)this.addLine(ie,s,F,$,W,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,I,E)}addLine(s,h,m,E,I,O){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ve=0;Ve<s.length-1;Ve++)this.totalDistance+=s[Ve].dist(s[Ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const F=PU[h.type]==="Polygon";let $=s.length;for(;$>=2&&s[$-1].equals(s[$-2]);)$--;let W=0;for(;W<$-1&&s[W].equals(s[W+1]);)W++;if($<(F?3:2))return;m==="bevel"&&(I=1.05);const ne=this.overscaling<=16?15*Mi/(512*this.overscaling):0,ie=this.segments.prepareSegment(10*$,this.layoutVertexArray,this.indexArray);let fe,de,_e,Te,Re;this.e1=this.e2=-1,F&&(fe=s[$-2],Re=s[W].sub(fe)._unit()._perp());for(let Ve=W;Ve<$;Ve++){if(_e=Ve===$-1?F?s[W+1]:void 0:s[Ve+1],_e&&s[Ve].equals(_e))continue;Re&&(Te=Re),fe&&(de=fe),fe=s[Ve],Re=_e?_e.sub(fe)._unit()._perp():Te,Te=Te||Re;let tt=Te.add(Re);tt.x===0&&tt.y===0||tt._unit();const Ze=Te.x*Re.x+Te.y*Re.y,Ye=tt.x*Re.x+tt.y*Re.y,yt=Ye!==0?1/Ye:1/0,wt=2*Math.sqrt(2-2*Ye),Xt=Ye<LU&&de&&_e,ln=Te.x*Re.y-Te.y*Re.x>0;if(Xt&&Ve>W){const Nt=fe.dist(de);if(Nt>2*ne){const nn=fe.sub(fe.sub(de)._mult(ne/Nt)._round());this.updateDistance(de,nn),this.addCurrentVertex(nn,Te,0,0,ie),de=nn}}const Wt=de&&_e;let Ht=Wt?m:F?"butt":E;if(Wt&&Ht==="round"&&(yt<O?Ht="miter":yt<=2&&(Ht="fakeround")),Ht==="miter"&&yt>I&&(Ht="bevel"),Ht==="bevel"&&(yt>2&&(Ht="flipbevel"),yt<I&&(Ht="miter")),de&&this.updateDistance(de,fe),Ht==="miter")tt._mult(yt),this.addCurrentVertex(fe,tt,0,0,ie);else if(Ht==="flipbevel"){if(yt>100)tt=Re.mult(-1);else{const Nt=yt*Te.add(Re).mag()/Te.sub(Re).mag();tt._perp()._mult(Nt*(ln?-1:1))}this.addCurrentVertex(fe,tt,0,0,ie),this.addCurrentVertex(fe,tt.mult(-1),0,0,ie)}else if(Ht==="bevel"||Ht==="fakeround"){const Nt=-Math.sqrt(yt*yt-1),nn=ln?Nt:0,Ut=ln?0:Nt;if(de&&this.addCurrentVertex(fe,Te,nn,Ut,ie),Ht==="fakeround"){const Ot=Math.round(180*wt/Math.PI/20);for(let mn=1;mn<Ot;mn++){let un=mn/Ot;if(un!==.5){const ei=un-.5;un+=un*ei*(un-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*ei*ei+(.848013+Ze*(.215638*Ze-1.06021)))}const Wn=Re.sub(Te)._mult(un)._add(Te)._unit()._mult(ln?-1:1);this.addHalfVertex(fe,Wn.x,Wn.y,!1,ln,0,ie)}}_e&&this.addCurrentVertex(fe,Re,-nn,-Ut,ie)}else if(Ht==="butt")this.addCurrentVertex(fe,tt,0,0,ie);else if(Ht==="square"){const Nt=de?1:-1;this.addCurrentVertex(fe,tt,Nt,Nt,ie)}else Ht==="round"&&(de&&(this.addCurrentVertex(fe,Te,0,0,ie),this.addCurrentVertex(fe,Te,1,1,ie,!0)),_e&&(this.addCurrentVertex(fe,Re,-1,-1,ie,!0),this.addCurrentVertex(fe,Re,0,0,ie)));if(Xt&&Ve<$-1){const Nt=fe.dist(_e);if(Nt>2*ne){const nn=fe.add(_e.sub(fe)._mult(ne/Nt)._round());this.updateDistance(fe,nn),this.addCurrentVertex(nn,Re,0,0,ie),fe=nn}}}}addCurrentVertex(s,h,m,E,I,O=!1){const F=h.y*E-h.x,$=-h.y-h.x*E;this.addHalfVertex(s,h.x+h.y*m,h.y-h.x*m,O,!1,m,I),this.addHalfVertex(s,F,$,O,!0,-E,I),this.distance>ik/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,h,m,E,I,O))}addHalfVertex({x:s,y:h},m,E,I,O,F,$){const W=.5*(this.lineClips?this.scaledDistance*(ik-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(I?1:0),(h<<1)+(O?1:0),Math.round(63*m)+128,Math.round(63*E)+128,1+(F===0?0:F<0?-1:1)|(63&W)<<2,W>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=$.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),$.primitiveLength++),O?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,h){this.distance+=s.dist(h),this.updateScaledDistance()}}let ok,sk;Jt("LineBucket",CT,{omit:["layers","patternFeatures"]});var ak={get paint(){return sk=sk||new hn({"line-opacity":new We(rt.paint_line["line-opacity"]),"line-color":new We(rt.paint_line["line-color"]),"line-translate":new Ce(rt.paint_line["line-translate"]),"line-translate-anchor":new Ce(rt.paint_line["line-translate-anchor"]),"line-width":new We(rt.paint_line["line-width"]),"line-gap-width":new We(rt.paint_line["line-gap-width"]),"line-offset":new We(rt.paint_line["line-offset"]),"line-blur":new We(rt.paint_line["line-blur"]),"line-dasharray":new It(rt.paint_line["line-dasharray"]),"line-pattern":new dt(rt.paint_line["line-pattern"]),"line-gradient":new tn(rt.paint_line["line-gradient"])})},get layout(){return ok=ok||new hn({"line-cap":new Ce(rt.layout_line["line-cap"]),"line-join":new We(rt.layout_line["line-join"]),"line-miter-limit":new Ce(rt.layout_line["line-miter-limit"]),"line-round-limit":new Ce(rt.layout_line["line-round-limit"]),"line-sort-key":new We(rt.layout_line["line-sort-key"])})}};class AU extends We{possiblyEvaluate(s,h){return h=new jr(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(s,h)}evaluate(s,h,m,E){return h=G({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(s,h,m,E)}}let $x;class OU extends Hr{constructor(s){super(s,ak),this.gradientVersion=0,$x||($x=new AU(ak.paint.properties["line-width"].specification),$x.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof oc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,h){super.recalculate(s,h),this.paint._values["line-floorwidth"]=$x.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new CT(s)}queryRadius(s){const h=s,m=lk(Rv("line-width",this,h),Rv("line-gap-width",this,h)),E=Rv("line-offset",this,h);return m/2+Math.abs(E)+Mx(this.paint.get("line-translate"))}queryIntersectsFeature(s,h,m,E,I,O,F){const $=Nx(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),O.angle,F),W=F/2*lk(this.paint.get("line-width").evaluate(h,m),this.paint.get("line-gap-width").evaluate(h,m)),ne=this.paint.get("line-offset").evaluate(h,m);return ne&&(E=function(ie,fe){const de=[];for(let _e=0;_e<ie.length;_e++){const Te=ie[_e],Re=[];for(let Ve=0;Ve<Te.length;Ve++){const tt=Te[Ve-1],Ze=Te[Ve],Ye=Te[Ve+1],yt=Ve===0?new y(0,0):Ze.sub(tt)._unit()._perp(),wt=Ve===Te.length-1?new y(0,0):Ye.sub(Ze)._unit()._perp(),Xt=yt._add(wt)._unit(),ln=Xt.x*wt.x+Xt.y*wt.y;ln!==0&&Xt._mult(1/ln),Re.push(Xt._mult(fe)._add(Ze))}de.push(Re)}return de}(E,ne*F)),function(ie,fe,de){for(let _e=0;_e<fe.length;_e++){const Te=fe[_e];if(ie.length>=3){for(let Re=0;Re<Te.length;Re++)if(hy(ie,Te[Re]))return!0}if(Ov(ie,Te,de))return!0}return!1}($,E,W)}isTileClipped(){return!0}}function lk(c,s){return s>0?s+2*c:c}const kU=$r([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),RU=$r([{name:"a_projected_pos",components:3,type:"Float32"}],4);$r([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const MU=$r([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);$r([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const uk=$r([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),NU=$r([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function DU(c,s,h){return c.sections.forEach(m=>{m.text=function(E,I,O){const F=I.layout.get("text-transform").evaluate(O,{});return F==="uppercase"?E=E.toLocaleUpperCase():F==="lowercase"&&(E=E.toLocaleLowerCase()),pu.applyArabicShaping&&(E=pu.applyArabicShaping(E)),E}(m.text,s,h)}),c}$r([{name:"triangle",components:3,type:"Uint16"}]),$r([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),$r([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),$r([{type:"Float32",name:"offsetX"}]),$r([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),$r([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Uv={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var fo=24,ck=Dr,hk=function(c,s,h,m,E){var I,O,F=8*E-m-1,$=(1<<F)-1,W=$>>1,ne=-7,ie=h?E-1:0,fe=h?-1:1,de=c[s+ie];for(ie+=fe,I=de&(1<<-ne)-1,de>>=-ne,ne+=F;ne>0;I=256*I+c[s+ie],ie+=fe,ne-=8);for(O=I&(1<<-ne)-1,I>>=-ne,ne+=m;ne>0;O=256*O+c[s+ie],ie+=fe,ne-=8);if(I===0)I=1-W;else{if(I===$)return O?NaN:1/0*(de?-1:1);O+=Math.pow(2,m),I-=W}return(de?-1:1)*O*Math.pow(2,I-m)},fk=function(c,s,h,m,E,I){var O,F,$,W=8*I-E-1,ne=(1<<W)-1,ie=ne>>1,fe=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,de=m?0:I-1,_e=m?1:-1,Te=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(F=isNaN(s)?1:0,O=ne):(O=Math.floor(Math.log(s)/Math.LN2),s*($=Math.pow(2,-O))<1&&(O--,$*=2),(s+=O+ie>=1?fe/$:fe*Math.pow(2,1-ie))*$>=2&&(O++,$/=2),O+ie>=ne?(F=0,O=ne):O+ie>=1?(F=(s*$-1)*Math.pow(2,E),O+=ie):(F=s*Math.pow(2,ie-1)*Math.pow(2,E),O=0));E>=8;c[h+de]=255&F,de+=_e,F/=256,E-=8);for(O=O<<E|F,W+=E;W>0;c[h+de]=255&O,de+=_e,O/=256,W-=8);c[h+de-_e]|=128*Te};function Dr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Dr.Varint=0,Dr.Fixed64=1,Dr.Bytes=2,Dr.Fixed32=5;var IT=4294967296,dk=1/IT,pk=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ff(c){return c.type===Dr.Bytes?c.readVarint()+c.pos:c.pos+1}function my(c,s,h){return h?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}function mk(c,s,h){var m=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));h.realloc(m);for(var E=h.pos-1;E>=c;E--)h.buf[E+m]=h.buf[E]}function zU(c,s){for(var h=0;h<c.length;h++)s.writeVarint(c[h])}function FU(c,s){for(var h=0;h<c.length;h++)s.writeSVarint(c[h])}function BU(c,s){for(var h=0;h<c.length;h++)s.writeFloat(c[h])}function jU(c,s){for(var h=0;h<c.length;h++)s.writeDouble(c[h])}function $U(c,s){for(var h=0;h<c.length;h++)s.writeBoolean(c[h])}function UU(c,s){for(var h=0;h<c.length;h++)s.writeFixed32(c[h])}function VU(c,s){for(var h=0;h<c.length;h++)s.writeSFixed32(c[h])}function qU(c,s){for(var h=0;h<c.length;h++)s.writeFixed64(c[h])}function GU(c,s){for(var h=0;h<c.length;h++)s.writeSFixed64(c[h])}function Ux(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+16777216*c[s+3]}function gy(c,s,h){c[h]=s,c[h+1]=s>>>8,c[h+2]=s>>>16,c[h+3]=s>>>24}function gk(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+(c[s+3]<<24)}Dr.prototype={destroy:function(){this.buf=null},readFields:function(c,s,h){for(h=h||this.length;this.pos<h;){var m=this.readVarint(),E=m>>3,I=this.pos;this.type=7&m,c(E,s,this),this.pos===I&&this.skip(m)}return s},readMessage:function(c,s){return this.readFields(c,s,this.readVarint()+this.pos)},readFixed32:function(){var c=Ux(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=gk(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=Ux(this.buf,this.pos)+Ux(this.buf,this.pos+4)*IT;return this.pos+=8,c},readSFixed64:function(){var c=Ux(this.buf,this.pos)+gk(this.buf,this.pos+4)*IT;return this.pos+=8,c},readFloat:function(){var c=hk(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=hk(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var s,h,m=this.buf;return s=127&(h=m[this.pos++]),h<128?s:(s|=(127&(h=m[this.pos++]))<<7,h<128?s:(s|=(127&(h=m[this.pos++]))<<14,h<128?s:(s|=(127&(h=m[this.pos++]))<<21,h<128?s:function(E,I,O){var F,$,W=O.buf;if(F=(112&($=W[O.pos++]))>>4,$<128||(F|=(127&($=W[O.pos++]))<<3,$<128)||(F|=(127&($=W[O.pos++]))<<10,$<128)||(F|=(127&($=W[O.pos++]))<<17,$<128)||(F|=(127&($=W[O.pos++]))<<24,$<128)||(F|=(1&($=W[O.pos++]))<<31,$<128))return my(E,F,I);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(h=m[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,s=this.pos;return this.pos=c,c-s>=12&&pk?function(h,m,E){return pk.decode(h.subarray(m,E))}(this.buf,s,c):function(h,m,E){for(var I="",O=m;O<E;){var F,$,W,ne=h[O],ie=null,fe=ne>239?4:ne>223?3:ne>191?2:1;if(O+fe>E)break;fe===1?ne<128&&(ie=ne):fe===2?(192&(F=h[O+1]))==128&&(ie=(31&ne)<<6|63&F)<=127&&(ie=null):fe===3?($=h[O+2],(192&(F=h[O+1]))==128&&(192&$)==128&&((ie=(15&ne)<<12|(63&F)<<6|63&$)<=2047||ie>=55296&&ie<=57343)&&(ie=null)):fe===4&&($=h[O+2],W=h[O+3],(192&(F=h[O+1]))==128&&(192&$)==128&&(192&W)==128&&((ie=(15&ne)<<18|(63&F)<<12|(63&$)<<6|63&W)<=65535||ie>=1114112)&&(ie=null)),ie===null?(ie=65533,fe=1):ie>65535&&(ie-=65536,I+=String.fromCharCode(ie>>>10&1023|55296),ie=56320|1023&ie),I+=String.fromCharCode(ie),O+=fe}return I}(this.buf,s,c)},readBytes:function(){var c=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,c);return this.pos=c,s},readPackedVarint:function(c,s){if(this.type!==Dr.Bytes)return c.push(this.readVarint(s));var h=Ff(this);for(c=c||[];this.pos<h;)c.push(this.readVarint(s));return c},readPackedSVarint:function(c){if(this.type!==Dr.Bytes)return c.push(this.readSVarint());var s=Ff(this);for(c=c||[];this.pos<s;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Dr.Bytes)return c.push(this.readBoolean());var s=Ff(this);for(c=c||[];this.pos<s;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Dr.Bytes)return c.push(this.readFloat());var s=Ff(this);for(c=c||[];this.pos<s;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Dr.Bytes)return c.push(this.readDouble());var s=Ff(this);for(c=c||[];this.pos<s;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Dr.Bytes)return c.push(this.readFixed32());var s=Ff(this);for(c=c||[];this.pos<s;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Dr.Bytes)return c.push(this.readSFixed32());var s=Ff(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Dr.Bytes)return c.push(this.readFixed64());var s=Ff(this);for(c=c||[];this.pos<s;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Dr.Bytes)return c.push(this.readSFixed64());var s=Ff(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed64());return c},skip:function(c){var s=7&c;if(s===Dr.Varint)for(;this.buf[this.pos++]>127;);else if(s===Dr.Bytes)this.pos=this.readVarint()+this.pos;else if(s===Dr.Fixed32)this.pos+=4;else{if(s!==Dr.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(c,s){this.writeVarint(c<<3|s)},realloc:function(c){for(var s=this.length||16;s<this.pos+c;)s*=2;if(s!==this.length){var h=new Uint8Array(s);h.set(this.buf),this.buf=h,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),gy(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),gy(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),gy(this.buf,-1&c,this.pos),gy(this.buf,Math.floor(c*dk),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),gy(this.buf,-1&c,this.pos),gy(this.buf,Math.floor(c*dk),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(s,h){var m,E;if(s>=0?(m=s%4294967296|0,E=s/4294967296|0):(E=~(-s/4294967296),4294967295^(m=~(-s%4294967296))?m=m+1|0:(m=0,E=E+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(I,O,F){F.buf[F.pos++]=127&I|128,I>>>=7,F.buf[F.pos++]=127&I|128,I>>>=7,F.buf[F.pos++]=127&I|128,I>>>=7,F.buf[F.pos++]=127&I|128,F.buf[F.pos]=127&(I>>>=7)}(m,0,h),function(I,O){var F=(7&I)<<4;O.buf[O.pos++]|=F|((I>>>=3)?128:0),I&&(O.buf[O.pos++]=127&I|((I>>>=7)?128:0),I&&(O.buf[O.pos++]=127&I|((I>>>=7)?128:0),I&&(O.buf[O.pos++]=127&I|((I>>>=7)?128:0),I&&(O.buf[O.pos++]=127&I|((I>>>=7)?128:0),I&&(O.buf[O.pos++]=127&I)))))}(E,h)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var s=this.pos;this.pos=function(m,E,I){for(var O,F,$=0;$<E.length;$++){if((O=E.charCodeAt($))>55295&&O<57344){if(!F){O>56319||$+1===E.length?(m[I++]=239,m[I++]=191,m[I++]=189):F=O;continue}if(O<56320){m[I++]=239,m[I++]=191,m[I++]=189,F=O;continue}O=F-55296<<10|O-56320|65536,F=null}else F&&(m[I++]=239,m[I++]=191,m[I++]=189,F=null);O<128?m[I++]=O:(O<2048?m[I++]=O>>6|192:(O<65536?m[I++]=O>>12|224:(m[I++]=O>>18|240,m[I++]=O>>12&63|128),m[I++]=O>>6&63|128),m[I++]=63&O|128)}return I}(this.buf,c,this.pos);var h=this.pos-s;h>=128&&mk(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeFloat:function(c){this.realloc(4),fk(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),fk(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var s=c.length;this.writeVarint(s),this.realloc(s);for(var h=0;h<s;h++)this.buf[this.pos++]=c[h]},writeRawMessage:function(c,s){this.pos++;var h=this.pos;c(s,this);var m=this.pos-h;m>=128&&mk(h,m,this),this.pos=h-1,this.writeVarint(m),this.pos+=m},writeMessage:function(c,s,h){this.writeTag(c,Dr.Bytes),this.writeRawMessage(s,h)},writePackedVarint:function(c,s){s.length&&this.writeMessage(c,zU,s)},writePackedSVarint:function(c,s){s.length&&this.writeMessage(c,FU,s)},writePackedBoolean:function(c,s){s.length&&this.writeMessage(c,$U,s)},writePackedFloat:function(c,s){s.length&&this.writeMessage(c,BU,s)},writePackedDouble:function(c,s){s.length&&this.writeMessage(c,jU,s)},writePackedFixed32:function(c,s){s.length&&this.writeMessage(c,UU,s)},writePackedSFixed32:function(c,s){s.length&&this.writeMessage(c,VU,s)},writePackedFixed64:function(c,s){s.length&&this.writeMessage(c,qU,s)},writePackedSFixed64:function(c,s){s.length&&this.writeMessage(c,GU,s)},writeBytesField:function(c,s){this.writeTag(c,Dr.Bytes),this.writeBytes(s)},writeFixed32Field:function(c,s){this.writeTag(c,Dr.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(c,s){this.writeTag(c,Dr.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(c,s){this.writeTag(c,Dr.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(c,s){this.writeTag(c,Dr.Fixed64),this.writeSFixed64(s)},writeVarintField:function(c,s){this.writeTag(c,Dr.Varint),this.writeVarint(s)},writeSVarintField:function(c,s){this.writeTag(c,Dr.Varint),this.writeSVarint(s)},writeStringField:function(c,s){this.writeTag(c,Dr.Bytes),this.writeString(s)},writeFloatField:function(c,s){this.writeTag(c,Dr.Fixed32),this.writeFloat(s)},writeDoubleField:function(c,s){this.writeTag(c,Dr.Fixed64),this.writeDouble(s)},writeBooleanField:function(c,s){this.writeVarintField(c,!!s)}};var PT=p(ck);const LT=3;function HU(c,s,h){c===1&&h.readMessage(ZU,s)}function ZU(c,s,h){if(c===3){const{id:m,bitmap:E,width:I,height:O,left:F,top:$,advance:W}=h.readMessage(WU,{});s.push({id:m,bitmap:new Nv({width:I+2*LT,height:O+2*LT},E),metrics:{width:I,height:O,left:F,top:$,advance:W}})}}function WU(c,s,h){c===1?s.id=h.readVarint():c===2?s.bitmap=h.readBytes():c===3?s.width=h.readVarint():c===4?s.height=h.readVarint():c===5?s.left=h.readSVarint():c===6?s.top=h.readSVarint():c===7&&(s.advance=h.readVarint())}const yk=LT;function _k(c){let s=0,h=0;for(const O of c)s+=O.w*O.h,h=Math.max(h,O.w);c.sort((O,F)=>F.h-O.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),h),h:1/0}];let E=0,I=0;for(const O of c)for(let F=m.length-1;F>=0;F--){const $=m[F];if(!(O.w>$.w||O.h>$.h)){if(O.x=$.x,O.y=$.y,I=Math.max(I,O.y+O.h),E=Math.max(E,O.x+O.w),O.w===$.w&&O.h===$.h){const W=m.pop();F<m.length&&(m[F]=W)}else O.h===$.h?($.x+=O.w,$.w-=O.w):O.w===$.w?($.y+=O.h,$.h-=O.h):(m.push({x:$.x+O.w,y:$.y,w:$.w-O.w,h:O.h}),$.y+=O.h,$.h-=O.h);break}}return{w:E,h:I,fill:s/(E*I)||0}}const _a=1;class AT{constructor(s,{pixelRatio:h,version:m,stretchX:E,stretchY:I,content:O}){this.paddedRect=s,this.pixelRatio=h,this.stretchX=E,this.stretchY=I,this.content=O,this.version=m}get tl(){return[this.paddedRect.x+_a,this.paddedRect.y+_a]}get br(){return[this.paddedRect.x+this.paddedRect.w-_a,this.paddedRect.y+this.paddedRect.h-_a]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*_a)/this.pixelRatio,(this.paddedRect.h-2*_a)/this.pixelRatio]}}class vk{constructor(s,h){const m={},E={};this.haveRenderCallbacks=[];const I=[];this.addImages(s,m,I),this.addImages(h,E,I);const{w:O,h:F}=_k(I),$=new El({width:O||1,height:F||1});for(const W in s){const ne=s[W],ie=m[W].paddedRect;El.copy(ne.data,$,{x:0,y:0},{x:ie.x+_a,y:ie.y+_a},ne.data)}for(const W in h){const ne=h[W],ie=E[W].paddedRect,fe=ie.x+_a,de=ie.y+_a,_e=ne.data.width,Te=ne.data.height;El.copy(ne.data,$,{x:0,y:0},{x:fe,y:de},ne.data),El.copy(ne.data,$,{x:0,y:Te-1},{x:fe,y:de-1},{width:_e,height:1}),El.copy(ne.data,$,{x:0,y:0},{x:fe,y:de+Te},{width:_e,height:1}),El.copy(ne.data,$,{x:_e-1,y:0},{x:fe-1,y:de},{width:1,height:Te}),El.copy(ne.data,$,{x:0,y:0},{x:fe+_e,y:de},{width:1,height:Te})}this.image=$,this.iconPositions=m,this.patternPositions=E}addImages(s,h,m){for(const E in s){const I=s[E],O={x:0,y:0,w:I.data.width+2*_a,h:I.data.height+2*_a};m.push(O),h[E]=new AT(O,I),I.hasRenderCallback&&this.haveRenderCallbacks.push(E)}}patchUpdatedImages(s,h){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in s.updatedImages)this.patchUpdatedImage(this.iconPositions[m],s.getImage(m),h),this.patchUpdatedImage(this.patternPositions[m],s.getImage(m),h)}patchUpdatedImage(s,h,m){if(!s||!h||s.version===h.version)return;s.version=h.version;const[E,I]=s.tl;m.update(h.data,void 0,{x:E,y:I})}}var Zd;Jt("ImagePosition",AT),Jt("ImageAtlas",vk),u.ah=void 0,(Zd=u.ah||(u.ah={}))[Zd.none=0]="none",Zd[Zd.horizontal=1]="horizontal",Zd[Zd.vertical=2]="vertical",Zd[Zd.horizontalOnly=3]="horizontalOnly";const Vv=-17;class qv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,h){const m=new qv;return m.scale=s||1,m.fontStack=h,m}static forImage(s){const h=new qv;return h.imageName=s,h}}class yy{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,h){const m=new yy;for(let E=0;E<s.sections.length;E++){const I=s.sections[E];I.image?m.addImageSection(I):m.addTextSection(I,h)}return m}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let h="";for(let m=0;m<s.length;m++){const E=s.charCodeAt(m+1)||null,I=s.charCodeAt(m-1)||null;h+=E&&jd(E)&&!Uv[s[m+1]]||I&&jd(I)&&!Uv[s[m-1]]||!Uv[s[m]]?s[m]:Uv[s[m]]}return h}(this.text)}trim(){let s=0;for(let m=0;m<this.text.length&&qx[this.text.charCodeAt(m)];m++)s++;let h=this.text.length;for(let m=this.text.length-1;m>=0&&m>=s&&qx[this.text.charCodeAt(m)];m--)h--;this.text=this.text.substring(s,h),this.sectionIndex=this.sectionIndex.slice(s,h)}substring(s,h){const m=new yy;return m.text=this.text.substring(s,h),m.sectionIndex=this.sectionIndex.slice(s,h),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,h)=>Math.max(s,this.sections[h].scale),0)}addTextSection(s,h){this.text+=s.text,this.sections.push(qv.forText(s.scale,s.fontStack||h));const m=this.sections.length-1;for(let E=0;E<s.text.length;++E)this.sectionIndex.push(m)}addImageSection(s){const h=s.image?s.image.name:"";if(h.length===0)return void ce("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(qv.forImage(h)),this.sectionIndex.push(this.sections.length-1)):ce("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Vx(c,s,h,m,E,I,O,F,$,W,ne,ie,fe,de,_e,Te){const Re=yy.fromFeature(c,E);let Ve;ie===u.ah.vertical&&Re.verticalizePunctuation();const{processBidirectionalText:tt,processStyledBidirectionalText:Ze}=pu;if(tt&&Re.sections.length===1){Ve=[];const wt=tt(Re.toString(),OT(Re,W,I,s,m,de,_e));for(const Xt of wt){const ln=new yy;ln.text=Xt,ln.sections=Re.sections;for(let Wt=0;Wt<Xt.length;Wt++)ln.sectionIndex.push(0);Ve.push(ln)}}else if(Ze){Ve=[];const wt=Ze(Re.text,Re.sectionIndex,OT(Re,W,I,s,m,de,_e));for(const Xt of wt){const ln=new yy;ln.text=Xt[0],ln.sectionIndex=Xt[1],ln.sections=Re.sections,Ve.push(ln)}}else Ve=function(wt,Xt){const ln=[],Wt=wt.text;let Ht=0;for(const Nt of Xt)ln.push(wt.substring(Ht,Nt)),Ht=Nt;return Ht<Wt.length&&ln.push(wt.substring(Ht,Wt.length)),ln}(Re,OT(Re,W,I,s,m,de,_e));const Ye=[],yt={positionedLines:Ye,text:Re.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:ie,iconsInText:!1,verticalizable:!1};return function(wt,Xt,ln,Wt,Ht,Nt,nn,Ut,Ot,mn,un,Wn){let ei=0,li=Vv,po=0,Xa=0;const Xs=Ut==="right"?1:Ut==="left"?0:.5;let no=0;for(const mo of Ht){mo.trim();const go=mo.getMaxScale(),Ts=(go-1)*fo,Qs={positionedGlyphs:[],lineOffset:0};wt.positionedLines[no]=Qs;const Cs=Qs.positionedGlyphs;let va=0;if(!mo.length()){li+=Nt,++no;continue}for(let yo=0;yo<mo.length();yo++){const Qn=mo.getSection(yo),Is=mo.getSectionIndex(yo),Jo=mo.getCharCode(yo);let _o=0,yu=null,yc=null,_c=null,Bf=fo;const _u=!(Ot===u.ah.horizontal||!un&&!Of(Jo)||un&&(qx[Jo]||(Bo=Jo,qt.Arabic(Bo)||qt["Arabic Supplement"](Bo)||qt["Arabic Extended-A"](Bo)||qt["Arabic Presentation Forms-A"](Bo)||qt["Arabic Presentation Forms-B"](Bo))));if(Qn.imageName){const Tl=Wt[Qn.imageName];if(!Tl)continue;_c=Qn.imageName,wt.iconsInText=wt.iconsInText||!0,yc=Tl.paddedRect;const ba=Tl.displaySize;Qn.scale=Qn.scale*fo/Wn,yu={width:ba[0],height:ba[1],left:_a,top:-yk,advance:_u?ba[1]:ba[0]},_o=Ts+(fo-ba[1]*Qn.scale),Bf=yu.advance;const jf=_u?ba[0]*Qn.scale-fo*go:ba[1]*Qn.scale-fo*go;jf>0&&jf>va&&(va=jf)}else{const Tl=ln[Qn.fontStack],ba=Tl&&Tl[Jo];if(ba&&ba.rect)yc=ba.rect,yu=ba.metrics;else{const jf=Xt[Qn.fontStack],Kv=jf&&jf[Jo];if(!Kv)continue;yu=Kv.metrics}_o=(go-Qn.scale)*fo}_u?(wt.verticalizable=!0,Cs.push({glyph:Jo,imageName:_c,x:ei,y:li+_o,vertical:_u,scale:Qn.scale,fontStack:Qn.fontStack,sectionIndex:Is,metrics:yu,rect:yc}),ei+=Bf*Qn.scale+mn):(Cs.push({glyph:Jo,imageName:_c,x:ei,y:li+_o,vertical:_u,scale:Qn.scale,fontStack:Qn.fontStack,sectionIndex:Is,metrics:yu,rect:yc}),ei+=yu.advance*Qn.scale+mn)}Cs.length!==0&&(po=Math.max(ei-mn,po),YU(Cs,0,Cs.length-1,Xs,va)),ei=0;const xa=Nt*go+va;Qs.lineOffset=Math.max(va,Ts),li+=xa,Xa=Math.max(xa,Xa),++no}var Bo;const Yo=li-Vv,{horizontalAlign:Ys,verticalAlign:Js}=kT(nn);(function(mo,go,Ts,Qs,Cs,va,xa,yo,Qn){const Is=(go-Ts)*Cs;let Jo=0;Jo=va!==xa?-yo*Qs-Vv:(-Qs*Qn+.5)*xa;for(const _o of mo)for(const yu of _o.positionedGlyphs)yu.x+=Is,yu.y+=Jo})(wt.positionedLines,Xs,Ys,Js,po,Xa,Nt,Yo,Ht.length),wt.top+=-Js*Yo,wt.bottom=wt.top+Yo,wt.left+=-Ys*po,wt.right=wt.left+po}(yt,s,h,m,Ve,O,F,$,ie,W,fe,Te),!function(wt){for(const Xt of wt)if(Xt.positionedGlyphs.length!==0)return!1;return!0}(Ye)&&yt}const qx={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},KU={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function xk(c,s,h,m,E,I){if(s.imageName){const O=m[s.imageName];return O?O.displaySize[0]*s.scale*fo/I+E:0}{const O=h[s.fontStack],F=O&&O[c];return F?F.metrics.advance*s.scale+E:0}}function bk(c,s,h,m){const E=Math.pow(c-s,2);return m?c<s?E/2:2*E:E+Math.abs(h)*h}function XU(c,s,h){let m=0;return c===10&&(m-=1e4),h&&(m+=150),c!==40&&c!==65288||(m+=50),s!==41&&s!==65289||(m+=50),m}function wk(c,s,h,m,E,I){let O=null,F=bk(s,h,E,I);for(const $ of m){const W=bk(s-$.x,h,E,I)+$.badness;W<=F&&(O=$,F=W)}return{index:c,x:s,priorBreak:O,badness:F}}function Ek(c){return c?Ek(c.priorBreak).concat(c.index):[]}function OT(c,s,h,m,E,I,O){if(I!=="point")return[];if(!c)return[];const F=[],$=function(fe,de,_e,Te,Re,Ve){let tt=0;for(let Ze=0;Ze<fe.length();Ze++){const Ye=fe.getSection(Ze);tt+=xk(fe.getCharCode(Ze),Ye,Te,Re,de,Ve)}return tt/Math.max(1,Math.ceil(tt/_e))}(c,s,h,m,E,O),W=c.text.indexOf("")>=0;let ne=0;for(let fe=0;fe<c.length();fe++){const de=c.getSection(fe),_e=c.getCharCode(fe);if(qx[_e]||(ne+=xk(_e,de,m,E,s,O)),fe<c.length()-1){const Te=!((ie=_e)<11904||!(qt["Bopomofo Extended"](ie)||qt.Bopomofo(ie)||qt["CJK Compatibility Forms"](ie)||qt["CJK Compatibility Ideographs"](ie)||qt["CJK Compatibility"](ie)||qt["CJK Radicals Supplement"](ie)||qt["CJK Strokes"](ie)||qt["CJK Symbols and Punctuation"](ie)||qt["CJK Unified Ideographs Extension A"](ie)||qt["CJK Unified Ideographs"](ie)||qt["Enclosed CJK Letters and Months"](ie)||qt["Halfwidth and Fullwidth Forms"](ie)||qt.Hiragana(ie)||qt["Ideographic Description Characters"](ie)||qt["Kangxi Radicals"](ie)||qt["Katakana Phonetic Extensions"](ie)||qt.Katakana(ie)||qt["Vertical Forms"](ie)||qt["Yi Radicals"](ie)||qt["Yi Syllables"](ie)));(KU[_e]||Te||de.imageName)&&F.push(wk(fe+1,ne,$,F,XU(_e,c.getCharCode(fe+1),Te&&W),!1))}}var ie;return Ek(wk(c.length(),ne,$,F,0,!0))}function kT(c){let s=.5,h=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:s,verticalAlign:h}}function YU(c,s,h,m,E){if(!m&&!E)return;const I=c[h],O=(c[h].x+I.metrics.advance*I.scale)*m;for(let F=s;F<=h;F++)c[F].x-=O,c[F].y+=E}function JU(c,s,h){const{horizontalAlign:m,verticalAlign:E}=kT(h),I=s[0]-c.displaySize[0]*m,O=s[1]-c.displaySize[1]*E;return{image:c,top:O,bottom:O+c.displaySize[1],left:I,right:I+c.displaySize[0]}}function Sk(c,s,h,m,E,I){const O=c.image;let F;if(O.content){const Re=O.content,Ve=O.pixelRatio||1;F=[Re[0]/Ve,Re[1]/Ve,O.displaySize[0]-Re[2]/Ve,O.displaySize[1]-Re[3]/Ve]}const $=s.left*I,W=s.right*I;let ne,ie,fe,de;h==="width"||h==="both"?(de=E[0]+$-m[3],ie=E[0]+W+m[1]):(de=E[0]+($+W-O.displaySize[0])/2,ie=de+O.displaySize[0]);const _e=s.top*I,Te=s.bottom*I;return h==="height"||h==="both"?(ne=E[1]+_e-m[0],fe=E[1]+Te+m[2]):(ne=E[1]+(_e+Te-O.displaySize[1])/2,fe=ne+O.displaySize[1]),{image:O,top:ne,right:ie,bottom:fe,left:de,collisionPadding:F}}const Gv=255,Ch=128,Wd=Gv*Ch;function Tk(c,s){const{expression:h}=s;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new jr(c+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:E}=h;let I=0;for(;I<m.length&&m[I]<=c;)I++;I=Math.max(0,I-1);let O=I;for(;O<m.length&&m[O]<c+1;)O++;O=Math.min(m.length-1,O);const F=m[I],$=m[O];return h.kind==="composite"?{kind:"composite",minZoom:F,maxZoom:$,interpolationType:E}:{kind:"camera",minZoom:F,maxZoom:$,minSize:h.evaluate(new jr(F)),maxSize:h.evaluate(new jr($)),interpolationType:E}}}function RT(c,s,h){let m="never";const E=c.get(s);return E?m=E:c.get(h)&&(m="always"),m}const QU=Hd.VectorTileFeature.types,e7=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Gx(c,s,h,m,E,I,O,F,$,W,ne,ie,fe){const de=F?Math.min(Wd,Math.round(F[0])):0,_e=F?Math.min(Wd,Math.round(F[1])):0;c.emplaceBack(s,h,Math.round(32*m),Math.round(32*E),I,O,(de<<1)+($?1:0),_e,16*W,16*ne,256*ie,256*fe)}function MT(c,s,h){c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h)}function t7(c){for(const s of c.sections)if(ry(s.text))return!0;return!1}class NT{constructor(s){this.layoutVertexArray=new at,this.indexArray=new mt,this.programConfigurations=s,this.segments=new zt,this.dynamicLayoutVertexArray=new Fe,this.opacityVertexArray=new Je,this.hasVisibleVertices=!1,this.placedSymbolArray=new d}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,h,m,E){this.isEmpty()||(m&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,kU.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,RU.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,e7,!0),this.opacityVertexBuffer.itemSize=1),(m||E)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Jt("SymbolBuffers",NT);class DT{constructor(s,h,m){this.layoutVertexArray=new s,this.layoutAttributes=h,this.indexArray=new m,this.segments=new zt,this.collisionVertexArray=new ft}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,MU.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Jt("CollisionBuffers",DT);class _y{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(O=>O.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=dT([]),this.placementViewportMatrix=dT([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tk(this.zoom,h["text-size"]),this.iconSizeData=Tk(this.zoom,h["icon-size"]);const m=this.layers[0].layout,E=m.get("symbol-sort-key"),I=m.get("symbol-z-order");this.canOverlap=RT(m,"text-overlap","text-allow-overlap")!=="never"||RT(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=I!=="viewport-y"&&!E.isConstant(),this.sortFeaturesByY=(I==="viewport-y"||I==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(O=>u.ah[O])),this.stateDependentLayerIds=this.layers.filter(O=>O.isStateDependent()).map(O=>O.id),this.sourceID=s.sourceID}createArrays(){this.text=new NT(new pi(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new NT(new pi(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new C,this.lineVertexArray=new B,this.symbolInstances=new w,this.textAnchorOffsets=new Z}calculateGlyphDependencies(s,h,m,E,I){for(let O=0;O<s.length;O++)if(h[s.charCodeAt(O)]=!0,(m||E)&&I){const F=Uv[s.charAt(O)];F&&(h[F.charCodeAt(0)]=!0)}}populate(s,h,m){const E=this.layers[0],I=E.layout,O=I.get("text-font"),F=I.get("text-field"),$=I.get("icon-image"),W=(F.value.kind!=="constant"||F.value.value instanceof ms&&!F.value.value.isEmpty()||F.value.value.toString().length>0)&&(O.value.kind!=="constant"||O.value.value.length>0),ne=$.value.kind!=="constant"||!!$.value.value||Object.keys($.parameters).length>0,ie=I.get("symbol-sort-key");if(this.features=[],!W&&!ne)return;const fe=h.iconDependencies,de=h.glyphDependencies,_e=h.availableImages,Te=new jr(this.zoom);for(const{feature:Re,id:Ve,index:tt,sourceLayerIndex:Ze}of s){const Ye=E._featureFilter.needGeometry,yt=zf(Re,Ye);if(!E._featureFilter.filter(Te,yt,m))continue;let wt,Xt;if(Ye||(yt.geometry=Df(Re)),W){const Wt=E.getValueAndResolveTokens("text-field",yt,m,_e),Ht=ms.factory(Wt),Nt=this.hasRTLText=this.hasRTLText||t7(Ht);(!Nt||pu.getRTLTextPluginStatus()==="unavailable"||Nt&&pu.isParsed())&&(wt=DU(Ht,E,yt))}if(ne){const Wt=E.getValueAndResolveTokens("icon-image",yt,m,_e);Xt=Wt instanceof ys?Wt:ys.fromString(Wt)}if(!wt&&!Xt)continue;const ln=this.sortFeaturesByKey?ie.evaluate(yt,{},m):void 0;if(this.features.push({id:Ve,text:wt,icon:Xt,index:tt,sourceLayerIndex:Ze,geometry:yt.geometry,properties:Re.properties,type:QU[Re.type],sortKey:ln}),Xt&&(fe[Xt.name]=!0),wt){const Wt=O.evaluate(yt,{},m).join(","),Ht=I.get("text-rotation-alignment")!=="viewport"&&I.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ah.vertical)>=0;for(const Nt of wt.sections)if(Nt.image)fe[Nt.image.name]=!0;else{const nn=mc(wt.toString()),Ut=Nt.fontStack||Wt,Ot=de[Ut]=de[Ut]||{};this.calculateGlyphDependencies(Nt.text,Ot,Ht,this.allowVerticalPlacement,nn)}}}I.get("symbol-placement")==="line"&&(this.features=function(Re){const Ve={},tt={},Ze=[];let Ye=0;function yt(Wt){Ze.push(Re[Wt]),Ye++}function wt(Wt,Ht,Nt){const nn=tt[Wt];return delete tt[Wt],tt[Ht]=nn,Ze[nn].geometry[0].pop(),Ze[nn].geometry[0]=Ze[nn].geometry[0].concat(Nt[0]),nn}function Xt(Wt,Ht,Nt){const nn=Ve[Ht];return delete Ve[Ht],Ve[Wt]=nn,Ze[nn].geometry[0].shift(),Ze[nn].geometry[0]=Nt[0].concat(Ze[nn].geometry[0]),nn}function ln(Wt,Ht,Nt){const nn=Nt?Ht[0][Ht[0].length-1]:Ht[0][0];return`${Wt}:${nn.x}:${nn.y}`}for(let Wt=0;Wt<Re.length;Wt++){const Ht=Re[Wt],Nt=Ht.geometry,nn=Ht.text?Ht.text.toString():null;if(!nn){yt(Wt);continue}const Ut=ln(nn,Nt),Ot=ln(nn,Nt,!0);if(Ut in tt&&Ot in Ve&&tt[Ut]!==Ve[Ot]){const mn=Xt(Ut,Ot,Nt),un=wt(Ut,Ot,Ze[mn].geometry);delete Ve[Ut],delete tt[Ot],tt[ln(nn,Ze[un].geometry,!0)]=un,Ze[mn].geometry=null}else Ut in tt?wt(Ut,Ot,Nt):Ot in Ve?Xt(Ut,Ot,Nt):(yt(Wt),Ve[Ut]=Ye-1,tt[Ot]=Ye-1)}return Ze.filter(Wt=>Wt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,Ve)=>Re.sortKey-Ve.sortKey)}update(s,h,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,h,this.layers,m),this.icon.programConfigurations.updatePaintArrays(s,h,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,h){const m=this.lineVertexArray.length;if(s.segment!==void 0){let E=s.dist(h[s.segment+1]),I=s.dist(h[s.segment]);const O={};for(let F=s.segment+1;F<h.length;F++)O[F]={x:h[F].x,y:h[F].y,tileUnitDistanceFromAnchor:E},F<h.length-1&&(E+=h[F+1].dist(h[F]));for(let F=s.segment||0;F>=0;F--)O[F]={x:h[F].x,y:h[F].y,tileUnitDistanceFromAnchor:I},F>0&&(I+=h[F-1].dist(h[F]));for(let F=0;F<h.length;F++){const $=O[F];this.lineVertexArray.emplaceBack($.x,$.y,$.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(s,h,m,E,I,O,F,$,W,ne,ie,fe){const de=s.indexArray,_e=s.layoutVertexArray,Te=s.segments.prepareSegment(4*h.length,_e,de,this.canOverlap?O.sortKey:void 0),Re=this.glyphOffsetArray.length,Ve=Te.vertexLength,tt=this.allowVerticalPlacement&&F===u.ah.vertical?Math.PI/2:0,Ze=O.text&&O.text.sections;for(let Ye=0;Ye<h.length;Ye++){const{tl:yt,tr:wt,bl:Xt,br:ln,tex:Wt,pixelOffsetTL:Ht,pixelOffsetBR:Nt,minFontScaleX:nn,minFontScaleY:Ut,glyphOffset:Ot,isSDF:mn,sectionIndex:un}=h[Ye],Wn=Te.vertexLength,ei=Ot[1];Gx(_e,$.x,$.y,yt.x,ei+yt.y,Wt.x,Wt.y,m,mn,Ht.x,Ht.y,nn,Ut),Gx(_e,$.x,$.y,wt.x,ei+wt.y,Wt.x+Wt.w,Wt.y,m,mn,Nt.x,Ht.y,nn,Ut),Gx(_e,$.x,$.y,Xt.x,ei+Xt.y,Wt.x,Wt.y+Wt.h,m,mn,Ht.x,Nt.y,nn,Ut),Gx(_e,$.x,$.y,ln.x,ei+ln.y,Wt.x+Wt.w,Wt.y+Wt.h,m,mn,Nt.x,Nt.y,nn,Ut),MT(s.dynamicLayoutVertexArray,$,tt),de.emplaceBack(Wn,Wn+1,Wn+2),de.emplaceBack(Wn+1,Wn+2,Wn+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ot[0]),Ye!==h.length-1&&un===h[Ye+1].sectionIndex||s.programConfigurations.populatePaintArrays(_e.length,O,O.index,{},fe,Ze&&Ze[un])}s.placedSymbolArray.emplaceBack($.x,$.y,Re,this.glyphOffsetArray.length-Re,Ve,W,ne,$.segment,m?m[0]:0,m?m[1]:0,E[0],E[1],F,0,!1,0,ie)}_addCollisionDebugVertex(s,h,m,E,I,O){return h.emplaceBack(0,0),s.emplaceBack(m.x,m.y,E,I,Math.round(O.x),Math.round(O.y))}addCollisionDebugVertices(s,h,m,E,I,O,F){const $=I.segments.prepareSegment(4,I.layoutVertexArray,I.indexArray),W=$.vertexLength,ne=I.layoutVertexArray,ie=I.collisionVertexArray,fe=F.anchorX,de=F.anchorY;this._addCollisionDebugVertex(ne,ie,O,fe,de,new y(s,h)),this._addCollisionDebugVertex(ne,ie,O,fe,de,new y(m,h)),this._addCollisionDebugVertex(ne,ie,O,fe,de,new y(m,E)),this._addCollisionDebugVertex(ne,ie,O,fe,de,new y(s,E)),$.vertexLength+=4;const _e=I.indexArray;_e.emplaceBack(W,W+1),_e.emplaceBack(W+1,W+2),_e.emplaceBack(W+2,W+3),_e.emplaceBack(W+3,W),$.primitiveLength+=4}addDebugCollisionBoxes(s,h,m,E){for(let I=s;I<h;I++){const O=this.collisionBoxArray.get(I);this.addCollisionDebugVertices(O.x1,O.y1,O.x2,O.y2,E?this.textCollisionBox:this.iconCollisionBox,O.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new DT(ut,uk.members,Tt),this.iconCollisionBox=new DT(ut,uk.members,Tt);for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(s,h,m,E,I,O,F,$,W){const ne={};for(let ie=h;ie<m;ie++){const fe=s.get(ie);ne.textBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.textFeatureIndex=fe.featureIndex;break}for(let ie=E;ie<I;ie++){const fe=s.get(ie);ne.verticalTextBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.verticalTextFeatureIndex=fe.featureIndex;break}for(let ie=O;ie<F;ie++){const fe=s.get(ie);ne.iconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.iconFeatureIndex=fe.featureIndex;break}for(let ie=$;ie<W;ie++){const fe=s.get(ie);ne.verticalIconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.verticalIconFeatureIndex=fe.featureIndex;break}return ne}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const m=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,h){const m=s.placedSymbolArray.get(h),E=m.vertexStartIndex+4*m.numGlyphs;for(let I=m.vertexStartIndex;I<E;I+=4)s.indexArray.emplaceBack(I,I+1,I+2),s.indexArray.emplaceBack(I+1,I+2,I+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(s),m=Math.cos(s),E=[],I=[],O=[];for(let F=0;F<this.symbolInstances.length;++F){O.push(F);const $=this.symbolInstances.get(F);E.push(0|Math.round(h*$.anchorX+m*$.anchorY)),I.push($.featureIndex)}return O.sort((F,$)=>E[F]-E[$]||I[$]-I[F]),O}addToSortKeyRanges(s,h){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===h?m.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const m=this.symbolInstances.get(h);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((E,I,O)=>{E>=0&&O.indexOf(E)===I&&this.addIndicesForPlacedSymbol(this.text,E)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Ck,Ik;Jt("SymbolBucket",_y,{omit:["layers","collisionBoxArray","features","compareText"]}),_y.MAX_GLYPHS=65535,_y.addDynamicAttributes=MT;var zT={get paint(){return Ik=Ik||new hn({"icon-opacity":new We(rt.paint_symbol["icon-opacity"]),"icon-color":new We(rt.paint_symbol["icon-color"]),"icon-halo-color":new We(rt.paint_symbol["icon-halo-color"]),"icon-halo-width":new We(rt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new We(rt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ce(rt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ce(rt.paint_symbol["icon-translate-anchor"]),"text-opacity":new We(rt.paint_symbol["text-opacity"]),"text-color":new We(rt.paint_symbol["text-color"],{runtimeType:Cr,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new We(rt.paint_symbol["text-halo-color"]),"text-halo-width":new We(rt.paint_symbol["text-halo-width"]),"text-halo-blur":new We(rt.paint_symbol["text-halo-blur"]),"text-translate":new Ce(rt.paint_symbol["text-translate"]),"text-translate-anchor":new Ce(rt.paint_symbol["text-translate-anchor"])})},get layout(){return Ck=Ck||new hn({"symbol-placement":new Ce(rt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ce(rt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ce(rt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new We(rt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ce(rt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ce(rt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ce(rt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ce(rt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ce(rt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ce(rt.layout_symbol["icon-rotation-alignment"]),"icon-size":new We(rt.layout_symbol["icon-size"]),"icon-text-fit":new Ce(rt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ce(rt.layout_symbol["icon-text-fit-padding"]),"icon-image":new We(rt.layout_symbol["icon-image"]),"icon-rotate":new We(rt.layout_symbol["icon-rotate"]),"icon-padding":new We(rt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ce(rt.layout_symbol["icon-keep-upright"]),"icon-offset":new We(rt.layout_symbol["icon-offset"]),"icon-anchor":new We(rt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ce(rt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ce(rt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ce(rt.layout_symbol["text-rotation-alignment"]),"text-field":new We(rt.layout_symbol["text-field"]),"text-font":new We(rt.layout_symbol["text-font"]),"text-size":new We(rt.layout_symbol["text-size"]),"text-max-width":new We(rt.layout_symbol["text-max-width"]),"text-line-height":new Ce(rt.layout_symbol["text-line-height"]),"text-letter-spacing":new We(rt.layout_symbol["text-letter-spacing"]),"text-justify":new We(rt.layout_symbol["text-justify"]),"text-radial-offset":new We(rt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ce(rt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new We(rt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new We(rt.layout_symbol["text-anchor"]),"text-max-angle":new Ce(rt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ce(rt.layout_symbol["text-writing-mode"]),"text-rotate":new We(rt.layout_symbol["text-rotate"]),"text-padding":new Ce(rt.layout_symbol["text-padding"]),"text-keep-upright":new Ce(rt.layout_symbol["text-keep-upright"]),"text-transform":new We(rt.layout_symbol["text-transform"]),"text-offset":new We(rt.layout_symbol["text-offset"]),"text-allow-overlap":new Ce(rt.layout_symbol["text-allow-overlap"]),"text-overlap":new Ce(rt.layout_symbol["text-overlap"]),"text-ignore-placement":new Ce(rt.layout_symbol["text-ignore-placement"]),"text-optional":new Ce(rt.layout_symbol["text-optional"])})}};class Pk{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Xr,this.defaultValue=s}evaluate(s){if(s.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(s.formattedSection))return h.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Jt("FormatSectionOverride",Pk,{omit:["defaultValue"]});class Hx extends Hr{constructor(s){super(s,zT)}recalculate(s,h){if(super.recalculate(s,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const E=[];for(const I of m)E.indexOf(I)<0&&E.push(I);this.layout._values["text-writing-mode"]=E}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,h,m,E){const I=this.layout.get(s).evaluate(h,{},m,E),O=this._unevaluatedLayout._values[s];return O.isDataDriven()||kr(O.value)||!I?I:function(F,$){return $.replace(/{([^{}]+)}/g,(W,ne)=>F&&ne in F?String(F[ne]):"")}(h.properties,I)}createBucket(s){return new _y(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of zT.paint.overridableProperties){if(!Hx.hasPaintOverride(this.layout,s))continue;const h=this.paint.get(s),m=new Pk(h),E=new Br(m,h.property.specification);let I=null;I=h.value.kind==="constant"||h.value.kind==="source"?new Nd("source",E):new ws("composite",E,h.value.zoomStops),this.paint._values[s]=new re(h.property,I,h.parameters)}}_handleOverridablePaintPropertyUpdate(s,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&Hx.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,h){const m=s.get("text-field"),E=zT.paint.properties[h];let I=!1;const O=F=>{for(const $ of F)if(E.overrides&&E.overrides.hasOverride($))return void(I=!0)};if(m.value.kind==="constant"&&m.value.value instanceof ms)O(m.value.value.sections);else if(m.value.kind==="source"){const F=W=>{I||(W instanceof _s&&jn(W.value)===qr?O(W.value.sections):W instanceof _f?O(W.sections):W.eachChild(F))},$=m.value;$._styleExpression&&F($._styleExpression.expression)}return I}}let Lk;var n7={get paint(){return Lk=Lk||new hn({"background-color":new Ce(rt.paint_background["background-color"]),"background-pattern":new It(rt.paint_background["background-pattern"]),"background-opacity":new Ce(rt.paint_background["background-opacity"])})}};class r7 extends Hr{constructor(s){super(s,n7)}}let Ak;var i7={get paint(){return Ak=Ak||new hn({"raster-opacity":new Ce(rt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ce(rt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ce(rt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ce(rt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ce(rt.paint_raster["raster-saturation"]),"raster-contrast":new Ce(rt.paint_raster["raster-contrast"]),"raster-resampling":new Ce(rt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ce(rt.paint_raster["raster-fade-duration"])})}};class o7 extends Hr{constructor(s){super(s,i7)}}class s7 extends Hr{constructor(s){super(s,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class a7{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const FT=63710088e-1;class Kd{constructor(s,h){if(isNaN(s)||isNaN(h))throw new Error(`Invalid LngLat object: (${s}, ${h})`);if(this.lng=+s,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Kd(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const h=Math.PI/180,m=this.lat*h,E=s.lat*h,I=Math.sin(m)*Math.sin(E)+Math.cos(m)*Math.cos(E)*Math.cos((s.lng-this.lng)*h);return FT*Math.acos(Math.min(I,1))}static convert(s){if(s instanceof Kd)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Kd(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Kd(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ok=2*Math.PI*FT;function kk(c){return Ok*Math.cos(c*Math.PI/180)}function Rk(c){return(180+c)/360}function Mk(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function Nk(c,s){return c/kk(s)}function BT(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class Zx{constructor(s,h,m=0){this.x=+s,this.y=+h,this.z=+m}static fromLngLat(s,h=0){const m=Kd.convert(s);return new Zx(Rk(m.lng),Mk(m.lat),Nk(h,m.lat))}toLngLat(){return new Kd(360*this.x-180,BT(this.y))}toAltitude(){return this.z*kk(BT(this.y))}meterInMercatorCoordinateUnits(){return 1/Ok*(s=BT(this.y),1/Math.cos(s*Math.PI/180));var s}}function Dk(c,s,h){var m=2*Math.PI*6378137/256/Math.pow(2,h);return[c*m-2*Math.PI*6378137/2,s*m-2*Math.PI*6378137/2]}class jT{constructor(s,h,m){if(s<0||s>25||m<0||m>=Math.pow(2,s)||h<0||h>=Math.pow(2,s))throw new Error(`x=${h}, y=${m}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=h,this.y=m,this.key=Hv(0,s,s,h,m)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,h,m){const E=(O=this.y,F=this.z,$=Dk(256*(I=this.x),256*(O=Math.pow(2,F)-O-1),F),W=Dk(256*(I+1),256*(O+1),F),$[0]+","+$[1]+","+W[0]+","+W[1]);var I,O,F,$,W;const ne=function(ie,fe,de){let _e,Te="";for(let Re=ie;Re>0;Re--)_e=1<<Re-1,Te+=(fe&_e?1:0)+(de&_e?2:0);return Te}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,E)}isChildOf(s){const h=this.z-s.z;return h>0&&s.x===this.x>>h&&s.y===this.y>>h}getTilePoint(s){const h=Math.pow(2,this.z);return new y((s.x*h-this.x)*Mi,(s.y*h-this.y)*Mi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class zk{constructor(s,h){this.wrap=s,this.canonical=h,this.key=Hv(s,h.z,h.z,h.x,h.y)}}class Sl{constructor(s,h,m,E,I){if(s<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${m}`);this.overscaledZ=s,this.wrap=h,this.canonical=new jT(m,+E,+I),this.key=Hv(h,s,m,E,I)}clone(){return new Sl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-s;return s>this.canonical.z?new Sl(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Sl(s,this.wrap,s,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(s,h){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-s;return s>this.canonical.z?Hv(this.wrap*+h,s,this.canonical.z,this.canonical.x,this.canonical.y):Hv(this.wrap*+h,s,s,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const h=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>h&&s.canonical.y===this.canonical.y>>h}children(s){if(this.overscaledZ>=s)return[new Sl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,m=2*this.canonical.x,E=2*this.canonical.y;return[new Sl(h,this.wrap,h,m,E),new Sl(h,this.wrap,h,m+1,E),new Sl(h,this.wrap,h,m,E+1),new Sl(h,this.wrap,h,m+1,E+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new Sl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new Sl(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new zk(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Zx(s.x-this.wrap,s.y))}}function Hv(c,s,h,m,E){(c*=2)<0&&(c=-1*c-1);const I=1<<h;return(I*I*c+I*E+m).toString(36)+h.toString(36)+s.toString(36)}Jt("CanonicalTileID",jT),Jt("OverscaledTileID",Sl,{omit:["posMatrix"]});class Fk{constructor(s,h,m,E=1,I=1,O=1,F=0){if(this.uid=s,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void ce(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const $=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=E,this.greenFactor=I,this.blueFactor=O,this.baseShift=F;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let W=0;W<$;W++)this.data[this._idx(-1,W)]=this.data[this._idx(0,W)],this.data[this._idx($,W)]=this.data[this._idx($-1,W)],this.data[this._idx(W,-1)]=this.data[this._idx(W,0)],this.data[this._idx(W,$)]=this.data[this._idx(W,$-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx($,-1)]=this.data[this._idx($-1,0)],this.data[this._idx(-1,$)]=this.data[this._idx(0,$-1)],this.data[this._idx($,$)]=this.data[this._idx($-1,$-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let W=0;W<$;W++)for(let ne=0;ne<$;ne++){const ie=this.get(W,ne);ie>this.max&&(this.max=ie),ie<this.min&&(this.min=ie)}}get(s,h){const m=new Uint8Array(this.data.buffer),E=4*this._idx(s,h);return this.unpack(m[E],m[E+1],m[E+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,h){if(s<-1||s>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(s+1)}unpack(s,h,m){return s*this.redFactor+h*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new El({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,h,m){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let E=h*this.dim,I=h*this.dim+this.dim,O=m*this.dim,F=m*this.dim+this.dim;switch(h){case-1:E=I-1;break;case 1:I=E+1}switch(m){case-1:O=F-1;break;case 1:F=O+1}const $=-h*this.dim,W=-m*this.dim;for(let ne=O;ne<F;ne++)for(let ie=E;ie<I;ie++)this.data[this._idx(ie,ne)]=s.data[this._idx(ie+$,ne+W)]}}Jt("DEMData",Fk);class Bk{constructor(s){this._stringToNumber={},this._numberToString=[];for(let h=0;h<s.length;h++){const m=s[h];this._stringToNumber[m]=h,this._numberToString[h]=m}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class jk{constructor(s,h,m,E,I){this.type="Feature",this._vectorTileFeature=s,s._z=h,s._x=m,s._y=E,this.properties=s.properties,this.id=I}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(s[h]=this[h]);return s}}class $k{constructor(s,h){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Pf(Mi,16,0),this.grid3D=new Pf(Mi,16,0),this.featureIndexArray=new se,this.promoteId=h}insert(s,h,m,E,I,O){const F=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,E,I);const $=O?this.grid3D:this.grid;for(let W=0;W<h.length;W++){const ne=h[W],ie=[1/0,1/0,-1/0,-1/0];for(let fe=0;fe<ne.length;fe++){const de=ne[fe];ie[0]=Math.min(ie[0],de.x),ie[1]=Math.min(ie[1],de.y),ie[2]=Math.max(ie[2],de.x),ie[3]=Math.max(ie[3],de.y)}ie[0]<Mi&&ie[1]<Mi&&ie[2]>=0&&ie[3]>=0&&$.insert(F,ie[0],ie[1],ie[2],ie[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Hd.VectorTile(new PT(this.rawTileData)).layers,this.sourceLayerCoder=new Bk(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,h,m,E){this.loadVTLayers();const I=s.params||{},O=Mi/s.tileSize/s.scale,F=Fd(I.filter),$=s.queryGeometry,W=s.queryPadding*O,ne=Vk($),ie=this.grid.query(ne.minX-W,ne.minY-W,ne.maxX+W,ne.maxY+W),fe=Vk(s.cameraQueryGeometry),de=this.grid3D.query(fe.minX-W,fe.minY-W,fe.maxX+W,fe.maxY+W,(Re,Ve,tt,Ze)=>function(Ye,yt,wt,Xt,ln){for(const Ht of Ye)if(yt<=Ht.x&&wt<=Ht.y&&Xt>=Ht.x&&ln>=Ht.y)return!0;const Wt=[new y(yt,wt),new y(yt,ln),new y(Xt,ln),new y(Xt,wt)];if(Ye.length>2){for(const Ht of Wt)if(hy(Ye,Ht))return!0}for(let Ht=0;Ht<Ye.length-1;Ht++)if(B8(Ye[Ht],Ye[Ht+1],Wt))return!0;return!1}(s.cameraQueryGeometry,Re-W,Ve-W,tt+W,Ze+W));for(const Re of de)ie.push(Re);ie.sort(l7);const _e={};let Te;for(let Re=0;Re<ie.length;Re++){const Ve=ie[Re];if(Ve===Te)continue;Te=Ve;const tt=this.featureIndexArray.get(Ve);let Ze=null;this.loadMatchingFeature(_e,tt.bucketIndex,tt.sourceLayerIndex,tt.featureIndex,F,I.layers,I.availableImages,h,m,E,(Ye,yt,wt)=>(Ze||(Ze=Df(Ye)),yt.queryIntersectsFeature($,Ye,wt,Ze,this.z,s.transform,O,s.pixelPosMatrix)))}return _e}loadMatchingFeature(s,h,m,E,I,O,F,$,W,ne,ie){const fe=this.bucketLayerIDs[h];if(O&&!function(Re,Ve){for(let tt=0;tt<Re.length;tt++)if(Ve.indexOf(Re[tt])>=0)return!0;return!1}(O,fe))return;const de=this.sourceLayerCoder.decode(m),_e=this.vtLayers[de].feature(E);if(I.needGeometry){const Re=zf(_e,!0);if(!I.filter(new jr(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!I.filter(new jr(this.tileID.overscaledZ),_e))return;const Te=this.getId(_e,de);for(let Re=0;Re<fe.length;Re++){const Ve=fe[Re];if(O&&O.indexOf(Ve)<0)continue;const tt=$[Ve];if(!tt)continue;let Ze={};Te&&ne&&(Ze=ne.getState(tt.sourceLayer||"_geojsonTileLayer",Te));const Ye=G({},W[Ve]);Ye.paint=Uk(Ye.paint,tt.paint,_e,Ze,F),Ye.layout=Uk(Ye.layout,tt.layout,_e,Ze,F);const yt=!ie||ie(_e,tt,Ze);if(!yt)continue;const wt=new jk(_e,this.z,this.x,this.y,Te);wt.layer=Ye;let Xt=s[Ve];Xt===void 0&&(Xt=s[Ve]=[]),Xt.push({featureIndex:E,feature:wt,intersectionZ:yt})}}lookupSymbolFeatures(s,h,m,E,I,O,F,$){const W={};this.loadVTLayers();const ne=Fd(I);for(const ie of s)this.loadMatchingFeature(W,m,E,ie,ne,O,F,$,h);return W}hasLayer(s){for(const h of this.bucketLayerIDs)for(const m of h)if(s===m)return!0;return!1}getId(s,h){let m=s.id;return this.promoteId&&(m=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof m=="boolean"&&(m=Number(m))),m}}function Uk(c,s,h,m,E){return J(c,(I,O)=>{const F=s instanceof me?s.get(O):null;return F&&F.evaluate?F.evaluate(h,m,E):F})}function Vk(c){let s=1/0,h=1/0,m=-1/0,E=-1/0;for(const I of c)s=Math.min(s,I.x),h=Math.min(h,I.y),m=Math.max(m,I.x),E=Math.max(E,I.y);return{minX:s,minY:h,maxX:m,maxY:E}}function l7(c,s){return s-c}function qk(c,s,h,m,E){const I=[];for(let O=0;O<c.length;O++){const F=c[O];let $;for(let W=0;W<F.length-1;W++){let ne=F[W],ie=F[W+1];ne.x<s&&ie.x<s||(ne.x<s?ne=new y(s,ne.y+(s-ne.x)/(ie.x-ne.x)*(ie.y-ne.y))._round():ie.x<s&&(ie=new y(s,ne.y+(s-ne.x)/(ie.x-ne.x)*(ie.y-ne.y))._round()),ne.y<h&&ie.y<h||(ne.y<h?ne=new y(ne.x+(h-ne.y)/(ie.y-ne.y)*(ie.x-ne.x),h)._round():ie.y<h&&(ie=new y(ne.x+(h-ne.y)/(ie.y-ne.y)*(ie.x-ne.x),h)._round()),ne.x>=m&&ie.x>=m||(ne.x>=m?ne=new y(m,ne.y+(m-ne.x)/(ie.x-ne.x)*(ie.y-ne.y))._round():ie.x>=m&&(ie=new y(m,ne.y+(m-ne.x)/(ie.x-ne.x)*(ie.y-ne.y))._round()),ne.y>=E&&ie.y>=E||(ne.y>=E?ne=new y(ne.x+(E-ne.y)/(ie.y-ne.y)*(ie.x-ne.x),E)._round():ie.y>=E&&(ie=new y(ne.x+(E-ne.y)/(ie.y-ne.y)*(ie.x-ne.x),E)._round()),$&&ne.equals($[$.length-1])||($=[ne],I.push($)),$.push(ie)))))}}return I}Jt("FeatureIndex",$k,{omit:["rawTileData","sourceLayerCoder"]});class Xd extends y{constructor(s,h,m,E){super(s,h),this.angle=m,E!==void 0&&(this.segment=E)}clone(){return new Xd(this.x,this.y,this.angle,this.segment)}}function Gk(c,s,h,m,E){if(s.segment===void 0||h===0)return!0;let I=s,O=s.segment+1,F=0;for(;F>-h/2;){if(O--,O<0)return!1;F-=c[O].dist(I),I=c[O]}F+=c[O].dist(c[O+1]),O++;const $=[];let W=0;for(;F<h/2;){const ne=c[O],ie=c[O+1];if(!ie)return!1;let fe=c[O-1].angleTo(ne)-ne.angleTo(ie);for(fe=Math.abs((fe+3*Math.PI)%(2*Math.PI)-Math.PI),$.push({distance:F,angleDelta:fe}),W+=fe;F-$[0].distance>m;)W-=$.shift().angleDelta;if(W>E)return!1;O++,F+=ne.dist(ie)}return!0}function Hk(c){let s=0;for(let h=0;h<c.length-1;h++)s+=c[h].dist(c[h+1]);return s}function Zk(c,s,h){return c?.6*s*h:0}function Wk(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function u7(c,s,h,m,E,I){const O=Zk(h,E,I),F=Wk(h,m)*I;let $=0;const W=Hk(c)/2;for(let ne=0;ne<c.length-1;ne++){const ie=c[ne],fe=c[ne+1],de=ie.dist(fe);if($+de>W){const _e=(W-$)/de,Te=Io.number(ie.x,fe.x,_e),Re=Io.number(ie.y,fe.y,_e),Ve=new Xd(Te,Re,fe.angleTo(ie),ne);return Ve._round(),!O||Gk(c,Ve,F,O,s)?Ve:void 0}$+=de}}function c7(c,s,h,m,E,I,O,F,$){const W=Zk(m,I,O),ne=Wk(m,E),ie=ne*O,fe=c[0].x===0||c[0].x===$||c[0].y===0||c[0].y===$;return s-ie<s/4&&(s=ie+s/4),Kk(c,fe?s/2*F%s:(ne/2+2*I)*O*F%s,s,W,h,ie,fe,!1,$)}function Kk(c,s,h,m,E,I,O,F,$){const W=I/2,ne=Hk(c);let ie=0,fe=s-h,de=[];for(let _e=0;_e<c.length-1;_e++){const Te=c[_e],Re=c[_e+1],Ve=Te.dist(Re),tt=Re.angleTo(Te);for(;fe+h<ie+Ve;){fe+=h;const Ze=(fe-ie)/Ve,Ye=Io.number(Te.x,Re.x,Ze),yt=Io.number(Te.y,Re.y,Ze);if(Ye>=0&&Ye<$&&yt>=0&&yt<$&&fe-W>=0&&fe+W<=ne){const wt=new Xd(Ye,yt,tt,_e);wt._round(),m&&!Gk(c,wt,I,m,E)||de.push(wt)}}ie+=Ve}return F||de.length||O||(de=Kk(c,ie/2,h,m,E,I,O,!0,$)),de}Jt("Anchor",Xd);const vy=_a;function Xk(c,s,h,m){const E=[],I=c.image,O=I.pixelRatio,F=I.paddedRect.w-2*vy,$=I.paddedRect.h-2*vy,W=c.right-c.left,ne=c.bottom-c.top,ie=I.stretchX||[[0,F]],fe=I.stretchY||[[0,$]],de=(Nt,nn)=>Nt+nn[1]-nn[0],_e=ie.reduce(de,0),Te=fe.reduce(de,0),Re=F-_e,Ve=$-Te;let tt=0,Ze=_e,Ye=0,yt=Te,wt=0,Xt=Re,ln=0,Wt=Ve;if(I.content&&m){const Nt=I.content;tt=Wx(ie,0,Nt[0]),Ye=Wx(fe,0,Nt[1]),Ze=Wx(ie,Nt[0],Nt[2]),yt=Wx(fe,Nt[1],Nt[3]),wt=Nt[0]-tt,ln=Nt[1]-Ye,Xt=Nt[2]-Nt[0]-Ze,Wt=Nt[3]-Nt[1]-yt}const Ht=(Nt,nn,Ut,Ot)=>{const mn=Kx(Nt.stretch-tt,Ze,W,c.left),un=Xx(Nt.fixed-wt,Xt,Nt.stretch,_e),Wn=Kx(nn.stretch-Ye,yt,ne,c.top),ei=Xx(nn.fixed-ln,Wt,nn.stretch,Te),li=Kx(Ut.stretch-tt,Ze,W,c.left),po=Xx(Ut.fixed-wt,Xt,Ut.stretch,_e),Xa=Kx(Ot.stretch-Ye,yt,ne,c.top),Xs=Xx(Ot.fixed-ln,Wt,Ot.stretch,Te),no=new y(mn,Wn),Bo=new y(li,Wn),Yo=new y(li,Xa),Ys=new y(mn,Xa),Js=new y(un/O,ei/O),mo=new y(po/O,Xs/O),go=s*Math.PI/180;if(go){const Cs=Math.sin(go),va=Math.cos(go),xa=[va,-Cs,Cs,va];no._matMult(xa),Bo._matMult(xa),Ys._matMult(xa),Yo._matMult(xa)}const Ts=Nt.stretch+Nt.fixed,Qs=nn.stretch+nn.fixed;return{tl:no,tr:Bo,bl:Ys,br:Yo,tex:{x:I.paddedRect.x+vy+Ts,y:I.paddedRect.y+vy+Qs,w:Ut.stretch+Ut.fixed-Ts,h:Ot.stretch+Ot.fixed-Qs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Js,pixelOffsetBR:mo,minFontScaleX:Xt/O/W,minFontScaleY:Wt/O/ne,isSDF:h}};if(m&&(I.stretchX||I.stretchY)){const Nt=Yk(ie,Re,_e),nn=Yk(fe,Ve,Te);for(let Ut=0;Ut<Nt.length-1;Ut++){const Ot=Nt[Ut],mn=Nt[Ut+1];for(let un=0;un<nn.length-1;un++)E.push(Ht(Ot,nn[un],mn,nn[un+1]))}}else E.push(Ht({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:F+1},{fixed:0,stretch:$+1}));return E}function Wx(c,s,h){let m=0;for(const E of c)m+=Math.max(s,Math.min(h,E[1]))-Math.max(s,Math.min(h,E[0]));return m}function Yk(c,s,h){const m=[{fixed:-vy,stretch:0}];for(const[E,I]of c){const O=m[m.length-1];m.push({fixed:E-O.stretch,stretch:O.stretch}),m.push({fixed:E-O.stretch,stretch:O.stretch+(I-E)})}return m.push({fixed:s+vy,stretch:h}),m}function Kx(c,s,h,m){return c/s*h+m}function Xx(c,s,h,m){return c-s*h/m}class Yx{constructor(s,h,m,E,I,O,F,$,W,ne){if(this.boxStartIndex=s.length,W){let ie=O.top,fe=O.bottom;const de=O.collisionPadding;de&&(ie-=de[1],fe+=de[3]);let _e=fe-ie;_e>0&&(_e=Math.max(10,_e),this.circleDiameter=_e)}else{let ie=O.top*F-$[0],fe=O.bottom*F+$[2],de=O.left*F-$[3],_e=O.right*F+$[1];const Te=O.collisionPadding;if(Te&&(de-=Te[0]*F,ie-=Te[1]*F,_e+=Te[2]*F,fe+=Te[3]*F),ne){const Re=new y(de,ie),Ve=new y(_e,ie),tt=new y(de,fe),Ze=new y(_e,fe),Ye=ne*Math.PI/180;Re._rotate(Ye),Ve._rotate(Ye),tt._rotate(Ye),Ze._rotate(Ye),de=Math.min(Re.x,Ve.x,tt.x,Ze.x),_e=Math.max(Re.x,Ve.x,tt.x,Ze.x),ie=Math.min(Re.y,Ve.y,tt.y,Ze.y),fe=Math.max(Re.y,Ve.y,tt.y,Ze.y)}s.emplaceBack(h.x,h.y,de,ie,_e,fe,m,E,I)}this.boxEndIndex=s.length}}class h7{constructor(s=[],h=f7){if(this.data=s,this.length=this.data.length,this.compare=h,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:h,compare:m}=this,E=h[s];for(;s>0;){const I=s-1>>1,O=h[I];if(m(E,O)>=0)break;h[s]=O,s=I}h[s]=E}_down(s){const{data:h,compare:m}=this,E=this.length>>1,I=h[s];for(;s<E;){let O=1+(s<<1),F=h[O];const $=O+1;if($<this.length&&m(h[$],F)<0&&(O=$,F=h[$]),m(F,I)>=0)break;h[s]=F,s=O}h[s]=I}}function f7(c,s){return c<s?-1:c>s?1:0}function d7(c,s=1,h=!1){let m=1/0,E=1/0,I=-1/0,O=-1/0;const F=c[0];for(let de=0;de<F.length;de++){const _e=F[de];(!de||_e.x<m)&&(m=_e.x),(!de||_e.y<E)&&(E=_e.y),(!de||_e.x>I)&&(I=_e.x),(!de||_e.y>O)&&(O=_e.y)}const $=Math.min(I-m,O-E);let W=$/2;const ne=new h7([],p7);if($===0)return new y(m,E);for(let de=m;de<I;de+=$)for(let _e=E;_e<O;_e+=$)ne.push(new xy(de+W,_e+W,W,c));let ie=function(de){let _e=0,Te=0,Re=0;const Ve=de[0];for(let tt=0,Ze=Ve.length,Ye=Ze-1;tt<Ze;Ye=tt++){const yt=Ve[tt],wt=Ve[Ye],Xt=yt.x*wt.y-wt.x*yt.y;Te+=(yt.x+wt.x)*Xt,Re+=(yt.y+wt.y)*Xt,_e+=3*Xt}return new xy(Te/_e,Re/_e,0,de)}(c),fe=ne.length;for(;ne.length;){const de=ne.pop();(de.d>ie.d||!ie.d)&&(ie=de,h&&console.log("found best %d after %d probes",Math.round(1e4*de.d)/1e4,fe)),de.max-ie.d<=s||(W=de.h/2,ne.push(new xy(de.p.x-W,de.p.y-W,W,c)),ne.push(new xy(de.p.x+W,de.p.y-W,W,c)),ne.push(new xy(de.p.x-W,de.p.y+W,W,c)),ne.push(new xy(de.p.x+W,de.p.y+W,W,c)),fe+=4)}return h&&(console.log(`num probes: ${fe}`),console.log(`best distance: ${ie.d}`)),ie.p}function p7(c,s){return s.max-c.max}function xy(c,s,h,m){this.p=new y(c,s),this.h=h,this.d=function(E,I){let O=!1,F=1/0;for(let $=0;$<I.length;$++){const W=I[$];for(let ne=0,ie=W.length,fe=ie-1;ne<ie;fe=ne++){const de=W[ne],_e=W[fe];de.y>E.y!=_e.y>E.y&&E.x<(_e.x-de.x)*(E.y-de.y)/(_e.y-de.y)+de.x&&(O=!O),F=Math.min(F,MO(E,de,_e))}}return(O?1:-1)*Math.sqrt(F)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Xo;u.ap=void 0,(Xo=u.ap||(u.ap={}))[Xo.center=1]="center",Xo[Xo.left=2]="left",Xo[Xo.right=3]="right",Xo[Xo.top=4]="top",Xo[Xo.bottom=5]="bottom",Xo[Xo["top-left"]=6]="top-left",Xo[Xo["top-right"]=7]="top-right",Xo[Xo["bottom-left"]=8]="bottom-left",Xo[Xo["bottom-right"]=9]="bottom-right";const Yd=7,$T=Number.POSITIVE_INFINITY;function Jk(c,s){return s[1]!==$T?function(h,m,E){let I=0,O=0;switch(m=Math.abs(m),E=Math.abs(E),h){case"top-right":case"top-left":case"top":O=E-Yd;break;case"bottom-right":case"bottom-left":case"bottom":O=-E+Yd}switch(h){case"top-right":case"bottom-right":case"right":I=-m;break;case"top-left":case"bottom-left":case"left":I=m}return[I,O]}(c,s[0],s[1]):function(h,m){let E=0,I=0;m<0&&(m=0);const O=m/Math.SQRT2;switch(h){case"top-right":case"top-left":I=O-Yd;break;case"bottom-right":case"bottom-left":I=-O+Yd;break;case"bottom":I=-m+Yd;break;case"top":I=m-Yd}switch(h){case"top-right":case"bottom-right":E=-O;break;case"top-left":case"bottom-left":E=O;break;case"left":E=m;break;case"right":E=-m}return[E,I]}(c,s[0])}function Qk(c,s,h){var m;const E=c.layout,I=(m=E.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(s,{},h);if(I){const F=I.values,$=[];for(let W=0;W<F.length;W+=2){const ne=$[W]=F[W],ie=F[W+1].map(fe=>fe*fo);ne.startsWith("top")?ie[1]-=Yd:ne.startsWith("bottom")&&(ie[1]+=Yd),$[W+1]=ie}return new gs($)}const O=E.get("text-variable-anchor");if(O){let F;F=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[E.get("text-radial-offset").evaluate(s,{},h)*fo,$T]:E.get("text-offset").evaluate(s,{},h).map(W=>W*fo);const $=[];for(const W of O)$.push(W,Jk(W,F));return new gs($)}return null}function UT(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function m7(c,s,h,m,E,I,O,F,$,W,ne){let ie=I.textMaxSize.evaluate(s,{});ie===void 0&&(ie=O);const fe=c.layers[0].layout,de=fe.get("icon-offset").evaluate(s,{},ne),_e=tR(h.horizontal),Te=O/24,Re=c.tilePixelRatio*Te,Ve=c.tilePixelRatio*ie/24,tt=c.tilePixelRatio*F,Ze=c.tilePixelRatio*fe.get("symbol-spacing"),Ye=fe.get("text-padding")*c.tilePixelRatio,yt=function(Ot,mn,un,Wn=1){const ei=Ot.get("icon-padding").evaluate(mn,{},un),li=ei&&ei.values;return[li[0]*Wn,li[1]*Wn,li[2]*Wn,li[3]*Wn]}(fe,s,ne,c.tilePixelRatio),wt=fe.get("text-max-angle")/180*Math.PI,Xt=fe.get("text-rotation-alignment")!=="viewport"&&fe.get("symbol-placement")!=="point",ln=fe.get("icon-rotation-alignment")==="map"&&fe.get("symbol-placement")!=="point",Wt=fe.get("symbol-placement"),Ht=Ze/2,Nt=fe.get("icon-text-fit");let nn;m&&Nt!=="none"&&(c.allowVerticalPlacement&&h.vertical&&(nn=Sk(m,h.vertical,Nt,fe.get("icon-text-fit-padding"),de,Te)),_e&&(m=Sk(m,_e,Nt,fe.get("icon-text-fit-padding"),de,Te)));const Ut=(Ot,mn)=>{mn.x<0||mn.x>=Mi||mn.y<0||mn.y>=Mi||function(un,Wn,ei,li,po,Xa,Xs,no,Bo,Yo,Ys,Js,mo,go,Ts,Qs,Cs,va,xa,yo,Qn,Is,Jo,_o,yu){const yc=un.addToLineVertexArray(Wn,ei);let _c,Bf,_u,Tl,ba=0,jf=0,Kv=0,oR=0,XT=-1,YT=-1;const $f={};let sR=wi("");if(un.allowVerticalPlacement&&li.vertical){const Ps=no.layout.get("text-rotate").evaluate(Qn,{},_o)+90;_u=new Yx(Bo,Wn,Yo,Ys,Js,li.vertical,mo,go,Ts,Ps),Xs&&(Tl=new Yx(Bo,Wn,Yo,Ys,Js,Xs,Cs,va,Ts,Ps))}if(po){const Ps=no.layout.get("icon-rotate").evaluate(Qn,{}),Cl=no.layout.get("icon-text-fit")!=="none",Nm=Xk(po,Ps,Jo,Cl),xc=Xs?Xk(Xs,Ps,Jo,Cl):void 0;Bf=new Yx(Bo,Wn,Yo,Ys,Js,po,Cs,va,!1,Ps),ba=4*Nm.length;const Dm=un.iconSizeData;let Ih=null;Dm.kind==="source"?(Ih=[Ch*no.layout.get("icon-size").evaluate(Qn,{})],Ih[0]>Wd&&ce(`${un.layerIds[0]}: Value for "icon-size" is >= ${Gv}. Reduce your "icon-size".`)):Dm.kind==="composite"&&(Ih=[Ch*Is.compositeIconSizes[0].evaluate(Qn,{},_o),Ch*Is.compositeIconSizes[1].evaluate(Qn,{},_o)],(Ih[0]>Wd||Ih[1]>Wd)&&ce(`${un.layerIds[0]}: Value for "icon-size" is >= ${Gv}. Reduce your "icon-size".`)),un.addSymbols(un.icon,Nm,Ih,yo,xa,Qn,u.ah.none,Wn,yc.lineStartIndex,yc.lineLength,-1,_o),XT=un.icon.placedSymbolArray.length-1,xc&&(jf=4*xc.length,un.addSymbols(un.icon,xc,Ih,yo,xa,Qn,u.ah.vertical,Wn,yc.lineStartIndex,yc.lineLength,-1,_o),YT=un.icon.placedSymbolArray.length-1)}const aR=Object.keys(li.horizontal);for(const Ps of aR){const Cl=li.horizontal[Ps];if(!_c){sR=wi(Cl.text);const xc=no.layout.get("text-rotate").evaluate(Qn,{},_o);_c=new Yx(Bo,Wn,Yo,Ys,Js,Cl,mo,go,Ts,xc)}const Nm=Cl.positionedLines.length===1;if(Kv+=eR(un,Wn,Cl,Xa,no,Ts,Qn,Qs,yc,li.vertical?u.ah.horizontal:u.ah.horizontalOnly,Nm?aR:[Ps],$f,XT,Is,_o),Nm)break}li.vertical&&(oR+=eR(un,Wn,li.vertical,Xa,no,Ts,Qn,Qs,yc,u.ah.vertical,["vertical"],$f,YT,Is,_o));const _7=_c?_c.boxStartIndex:un.collisionBoxArray.length,v7=_c?_c.boxEndIndex:un.collisionBoxArray.length,x7=_u?_u.boxStartIndex:un.collisionBoxArray.length,b7=_u?_u.boxEndIndex:un.collisionBoxArray.length,w7=Bf?Bf.boxStartIndex:un.collisionBoxArray.length,E7=Bf?Bf.boxEndIndex:un.collisionBoxArray.length,S7=Tl?Tl.boxStartIndex:un.collisionBoxArray.length,T7=Tl?Tl.boxEndIndex:un.collisionBoxArray.length;let vc=-1;const Qx=(Ps,Cl)=>Ps&&Ps.circleDiameter?Math.max(Ps.circleDiameter,Cl):Cl;vc=Qx(_c,vc),vc=Qx(_u,vc),vc=Qx(Bf,vc),vc=Qx(Tl,vc);const lR=vc>-1?1:0;lR&&(vc*=yu/fo),un.glyphOffsetArray.length>=_y.MAX_GLYPHS&&ce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qn.sortKey!==void 0&&un.addToSortKeyRanges(un.symbolInstances.length,Qn.sortKey);const C7=Qk(no,Qn,_o),[I7,P7]=function(Ps,Cl){const Nm=Ps.length,xc=Cl==null?void 0:Cl.values;if((xc==null?void 0:xc.length)>0)for(let Dm=0;Dm<xc.length;Dm+=2){const Ih=xc[Dm+1];Ps.emplaceBack(u.ap[xc[Dm]],Ih[0],Ih[1])}return[Nm,Ps.length]}(un.textAnchorOffsets,C7);un.symbolInstances.emplaceBack(Wn.x,Wn.y,$f.right>=0?$f.right:-1,$f.center>=0?$f.center:-1,$f.left>=0?$f.left:-1,$f.vertical||-1,XT,YT,sR,_7,v7,x7,b7,w7,E7,S7,T7,Yo,Kv,oR,ba,jf,lR,0,mo,vc,I7,P7)}(c,mn,Ot,h,m,E,nn,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,Re,[Ye,Ye,Ye,Ye],Xt,$,tt,yt,ln,de,s,I,W,ne,O)};if(Wt==="line")for(const Ot of qk(s.geometry,0,0,Mi,Mi)){const mn=c7(Ot,Ze,wt,h.vertical||_e,m,24,Ve,c.overscaling,Mi);for(const un of mn)_e&&g7(c,_e.text,Ht,un)||Ut(Ot,un)}else if(Wt==="line-center"){for(const Ot of s.geometry)if(Ot.length>1){const mn=u7(Ot,wt,h.vertical||_e,m,24,Ve);mn&&Ut(Ot,mn)}}else if(s.type==="Polygon")for(const Ot of xT(s.geometry,0)){const mn=d7(Ot,16);Ut(Ot[0],new Xd(mn.x,mn.y,0))}else if(s.type==="LineString")for(const Ot of s.geometry)Ut(Ot,new Xd(Ot[0].x,Ot[0].y,0));else if(s.type==="Point")for(const Ot of s.geometry)for(const mn of Ot)Ut([mn],new Xd(mn.x,mn.y,0))}function eR(c,s,h,m,E,I,O,F,$,W,ne,ie,fe,de,_e){const Te=function(tt,Ze,Ye,yt,wt,Xt,ln,Wt){const Ht=yt.layout.get("text-rotate").evaluate(Xt,{})*Math.PI/180,Nt=[];for(const nn of Ze.positionedLines)for(const Ut of nn.positionedGlyphs){if(!Ut.rect)continue;const Ot=Ut.rect||{};let mn=yk+1,un=!0,Wn=1,ei=0;const li=(wt||Wt)&&Ut.vertical,po=Ut.metrics.advance*Ut.scale/2;if(Wt&&Ze.verticalizable&&(ei=nn.lineOffset/2-(Ut.imageName?-(fo-Ut.metrics.width*Ut.scale)/2:(Ut.scale-1)*fo)),Ut.imageName){const yo=ln[Ut.imageName];un=yo.sdf,Wn=yo.pixelRatio,mn=_a/Wn}const Xa=wt?[Ut.x+po,Ut.y]:[0,0];let Xs=wt?[0,0]:[Ut.x+po+Ye[0],Ut.y+Ye[1]-ei],no=[0,0];li&&(no=Xs,Xs=[0,0]);const Bo=Ut.metrics.isDoubleResolution?2:1,Yo=(Ut.metrics.left-mn)*Ut.scale-po+Xs[0],Ys=(-Ut.metrics.top-mn)*Ut.scale+Xs[1],Js=Yo+Ot.w/Bo*Ut.scale/Wn,mo=Ys+Ot.h/Bo*Ut.scale/Wn,go=new y(Yo,Ys),Ts=new y(Js,Ys),Qs=new y(Yo,mo),Cs=new y(Js,mo);if(li){const yo=new y(-po,po-Vv),Qn=-Math.PI/2,Is=fo/2-po,Jo=new y(5-Vv-Is,-(Ut.imageName?Is:0)),_o=new y(...no);go._rotateAround(Qn,yo)._add(Jo)._add(_o),Ts._rotateAround(Qn,yo)._add(Jo)._add(_o),Qs._rotateAround(Qn,yo)._add(Jo)._add(_o),Cs._rotateAround(Qn,yo)._add(Jo)._add(_o)}if(Ht){const yo=Math.sin(Ht),Qn=Math.cos(Ht),Is=[Qn,-yo,yo,Qn];go._matMult(Is),Ts._matMult(Is),Qs._matMult(Is),Cs._matMult(Is)}const va=new y(0,0),xa=new y(0,0);Nt.push({tl:go,tr:Ts,bl:Qs,br:Cs,tex:Ot,writingMode:Ze.writingMode,glyphOffset:Xa,sectionIndex:Ut.sectionIndex,isSDF:un,pixelOffsetTL:va,pixelOffsetBR:xa,minFontScaleX:0,minFontScaleY:0})}return Nt}(0,h,F,E,I,O,m,c.allowVerticalPlacement),Re=c.textSizeData;let Ve=null;Re.kind==="source"?(Ve=[Ch*E.layout.get("text-size").evaluate(O,{})],Ve[0]>Wd&&ce(`${c.layerIds[0]}: Value for "text-size" is >= ${Gv}. Reduce your "text-size".`)):Re.kind==="composite"&&(Ve=[Ch*de.compositeTextSizes[0].evaluate(O,{},_e),Ch*de.compositeTextSizes[1].evaluate(O,{},_e)],(Ve[0]>Wd||Ve[1]>Wd)&&ce(`${c.layerIds[0]}: Value for "text-size" is >= ${Gv}. Reduce your "text-size".`)),c.addSymbols(c.text,Te,Ve,F,I,O,W,s,$.lineStartIndex,$.lineLength,fe,_e);for(const tt of ne)ie[tt]=c.text.placedSymbolArray.length-1;return 4*Te.length}function tR(c){for(const s in c)return c[s];return null}function g7(c,s,h,m){const E=c.compareText;if(s in E){const I=E[s];for(let O=I.length-1;O>=0;O--)if(m.dist(I[O])<h)return!0}else E[s]=[];return E[s].push(m),!1}const nR=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class VT{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,m]=new Uint8Array(s,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const E=m>>4;if(E!==1)throw new Error(`Got v${E} data when expected v1.`);const I=nR[15&m];if(!I)throw new Error("Unrecognized array type.");const[O]=new Uint16Array(s,2,1),[F]=new Uint32Array(s,4,1);return new VT(F,O,I,s)}constructor(s,h=64,m=Float64Array,E){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=m,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const I=nR.indexOf(this.ArrayType),O=2*s*this.ArrayType.BYTES_PER_ELEMENT,F=s*this.IndexArrayType.BYTES_PER_ELEMENT,$=(8-F%8)%8;if(I<0)throw new Error(`Unexpected typed array class: ${m}.`);E&&E instanceof ArrayBuffer?(this.data=E,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+F+$,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+O+F+$),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+F+$,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+I]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=s)}add(s,h){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=s,this.coords[this._pos++]=h,m}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return qT(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,h,m,E){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:I,coords:O,nodeSize:F}=this,$=[0,I.length-1,0],W=[];for(;$.length;){const ne=$.pop()||0,ie=$.pop()||0,fe=$.pop()||0;if(ie-fe<=F){for(let Re=fe;Re<=ie;Re++){const Ve=O[2*Re],tt=O[2*Re+1];Ve>=s&&Ve<=m&&tt>=h&&tt<=E&&W.push(I[Re])}continue}const de=fe+ie>>1,_e=O[2*de],Te=O[2*de+1];_e>=s&&_e<=m&&Te>=h&&Te<=E&&W.push(I[de]),(ne===0?s<=_e:h<=Te)&&($.push(fe),$.push(de-1),$.push(1-ne)),(ne===0?m>=_e:E>=Te)&&($.push(de+1),$.push(ie),$.push(1-ne))}return W}within(s,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:I,nodeSize:O}=this,F=[0,E.length-1,0],$=[],W=m*m;for(;F.length;){const ne=F.pop()||0,ie=F.pop()||0,fe=F.pop()||0;if(ie-fe<=O){for(let Re=fe;Re<=ie;Re++)iR(I[2*Re],I[2*Re+1],s,h)<=W&&$.push(E[Re]);continue}const de=fe+ie>>1,_e=I[2*de],Te=I[2*de+1];iR(_e,Te,s,h)<=W&&$.push(E[de]),(ne===0?s-m<=_e:h-m<=Te)&&(F.push(fe),F.push(de-1),F.push(1-ne)),(ne===0?s+m>=_e:h+m>=Te)&&(F.push(de+1),F.push(ie),F.push(1-ne))}return $}}function qT(c,s,h,m,E,I){if(E-m<=h)return;const O=m+E>>1;rR(c,s,O,m,E,I),qT(c,s,h,m,O-1,1-I),qT(c,s,h,O+1,E,1-I)}function rR(c,s,h,m,E,I){for(;E>m;){if(E-m>600){const W=E-m+1,ne=h-m+1,ie=Math.log(W),fe=.5*Math.exp(2*ie/3),de=.5*Math.sqrt(ie*fe*(W-fe)/W)*(ne-W/2<0?-1:1);rR(c,s,h,Math.max(m,Math.floor(h-ne*fe/W+de)),Math.min(E,Math.floor(h+(W-ne)*fe/W+de)),I)}const O=s[2*h+I];let F=m,$=E;for(Zv(c,s,m,h),s[2*E+I]>O&&Zv(c,s,m,E);F<$;){for(Zv(c,s,F,$),F++,$--;s[2*F+I]<O;)F++;for(;s[2*$+I]>O;)$--}s[2*m+I]===O?Zv(c,s,m,$):($++,Zv(c,s,$,E)),$<=h&&(m=$+1),h<=$&&(E=$-1)}}function Zv(c,s,h,m){GT(c,h,m),GT(s,2*h,2*m),GT(s,2*h+1,2*m+1)}function GT(c,s,h){const m=c[s];c[s]=c[h],c[h]=m}function iR(c,s,h,m){const E=c-h,I=s-m;return E*E+I*I}var HT;u.bd=void 0,(HT=u.bd||(u.bd={})).create="create",HT.load="load",HT.fullLoad="fullLoad";let Jx=null,Wv=[];const ZT=1e3/60,WT="loadTime",KT="fullLoadTime",y7={mark(c){performance.mark(c)},frame(c){const s=c;Jx!=null&&Wv.push(s-Jx),Jx=s},clearMetrics(){Jx=null,Wv=[],performance.clearMeasures(WT),performance.clearMeasures(KT);for(const c in u.bd)performance.clearMarks(u.bd[c])},getPerformanceMetrics(){performance.measure(WT,u.bd.create,u.bd.load),performance.measure(KT,u.bd.create,u.bd.fullLoad);const c=performance.getEntriesByName(WT)[0].duration,s=performance.getEntriesByName(KT)[0].duration,h=Wv.length,m=1/(Wv.reduce((I,O)=>I+O,0)/h/1e3),E=Wv.filter(I=>I>ZT).reduce((I,O)=>I+(O-ZT)/ZT,0);return{loadTime:c,fullLoadTime:s,fps:m,percentDroppedFrames:E/(h+E)*100,totalFrames:h}}};u.$=zt,u.A=fy,u.B=function(c){if(Be==null){const s=c.navigator?c.navigator.userAgent:null;Be=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Be},u.C=class{constructor(c,s){this.target=c,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new a7(()=>this.process()),this.subscription=function(h,m,E,I){return h.addEventListener(m,E,!1),{unsubscribe:()=>{h.removeEventListener(m,E,!1)}}}(this.target,"message",h=>this.receive(h)),this.globalScope=Ne(self)?c:window}registerMessageHandler(c,s){this.messageHandlers[c]=s}sendAsync(c,s){return new Promise((h,m)=>{const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[E]={resolve:h,reject:m},s&&s.signal.addEventListener("abort",()=>{delete this.resolveRejects[E];const F={id:E,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)},{once:!0});const I=[],O=Object.assign(Object.assign({},c),{id:E,sourceMapId:this.mapId,origin:location.origin,data:Za(c.data,I)});this.target.postMessage(O,{transfer:I})})}receive(c){const s=c.data,h=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[h];const m=this.abortControllers[h];return delete this.abortControllers[h],void(m&&m.abort())}if(Ne(self)||s.mustQueue)return this.tasks[h]=s,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,s)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){return l(this,void 0,void 0,function*(){if(s.type==="<response>"){const E=this.resolveRejects[c];return delete this.resolveRejects[c],E?void(s.error?E.reject(vh(s.error)):E.resolve(vh(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=vh(s.data),m=new AbortController;this.abortControllers[c]=m;try{const E=yield this.messageHandlers[s.type](s.sourceMapId,h,m);this.completeTask(c,null,E)}catch(E){this.completeTask(c,E)}})}completeTask(c,s,h){const m=[];delete this.abortControllers[c];const E={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?Za(s):null,data:Za(h,m)};this.target.postMessage(E,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.D=Ce,u.E=Tr,u.F=function(){var c=new fy(16);return fy!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},u.G=He,u.H=function(c,s,h){var m,E,I,O,F,$,W,ne,ie,fe,de,_e,Te=h[0],Re=h[1],Ve=h[2];return s===c?(c[12]=s[0]*Te+s[4]*Re+s[8]*Ve+s[12],c[13]=s[1]*Te+s[5]*Re+s[9]*Ve+s[13],c[14]=s[2]*Te+s[6]*Re+s[10]*Ve+s[14],c[15]=s[3]*Te+s[7]*Re+s[11]*Ve+s[15]):(E=s[1],I=s[2],O=s[3],F=s[4],$=s[5],W=s[6],ne=s[7],ie=s[8],fe=s[9],de=s[10],_e=s[11],c[0]=m=s[0],c[1]=E,c[2]=I,c[3]=O,c[4]=F,c[5]=$,c[6]=W,c[7]=ne,c[8]=ie,c[9]=fe,c[10]=de,c[11]=_e,c[12]=m*Te+F*Re+ie*Ve+s[12],c[13]=E*Te+$*Re+fe*Ve+s[13],c[14]=I*Te+W*Re+de*Ve+s[14],c[15]=O*Te+ne*Re+_e*Ve+s[15]),c},u.I=AT,u.J=function(c,s,h){var m=h[0],E=h[1],I=h[2];return c[0]=s[0]*m,c[1]=s[1]*m,c[2]=s[2]*m,c[3]=s[3]*m,c[4]=s[4]*E,c[5]=s[5]*E,c[6]=s[6]*E,c[7]=s[7]*E,c[8]=s[8]*I,c[9]=s[9]*I,c[10]=s[10]*I,c[11]=s[11]*I,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},u.K=FO,u.L=function(c,s){const h={};for(let m=0;m<s.length;m++){const E=s[m];E in c&&(h[E]=c[E])}return h},u.M=Kd,u.N=Rk,u.O=Mk,u.P=y,u.Q=Sl,u.R=El,u.S=k,u.T=f,u.U=R,u.V=ve,u.W=Mi,u.X=$r,u.Y=Zx,u.Z=class extends Ud{},u._=l,u.a=$e,u.a$=function(c,s,h){return c[0]=s[0]*h[0],c[1]=s[1]*h[1],c[2]=s[2]*h[2],c[3]=s[3]*h[3],c},u.a0=jT,u.a1=bt,u.a2=c=>{const s=window.document.createElement("video");return s.muted=!0,new Promise(h=>{s.onloadstart=()=>{h(s)};for(const m of c){const E=window.document.createElement("source");Dt(m)||(s.crossOrigin="Anonymous"),E.src=m,s.appendChild(E)}})},u.a3=function(){return H++},u.a4=S,u.a5=_y,u.a6=Fd,u.a7=zf,u.a8=jr,u.a9=jk,u.aA=X,u.aB=function(c,s){if(!c)return[{command:"setStyle",args:[s]}];let h=[];try{if(!_t(c.version,s.version))return[{command:"setStyle",args:[s]}];_t(c.center,s.center)||h.push({command:"setCenter",args:[s.center]}),_t(c.zoom,s.zoom)||h.push({command:"setZoom",args:[s.zoom]}),_t(c.bearing,s.bearing)||h.push({command:"setBearing",args:[s.bearing]}),_t(c.pitch,s.pitch)||h.push({command:"setPitch",args:[s.pitch]}),_t(c.sprite,s.sprite)||h.push({command:"setSprite",args:[s.sprite]}),_t(c.glyphs,s.glyphs)||h.push({command:"setGlyphs",args:[s.glyphs]}),_t(c.transition,s.transition)||h.push({command:"setTransition",args:[s.transition]}),_t(c.light,s.light)||h.push({command:"setLight",args:[s.light]}),_t(c.terrain,s.terrain)||h.push({command:"setTerrain",args:[s.terrain]}),_t(c.sky,s.sky)||h.push({command:"setSky",args:[s.sky]});const m={},E=[];(function(O,F,$,W){let ne;for(ne in F=F||{},O=O||{})Object.prototype.hasOwnProperty.call(O,ne)&&(Object.prototype.hasOwnProperty.call(F,ne)||vt(ne,$,W));for(ne in F)Object.prototype.hasOwnProperty.call(F,ne)&&(Object.prototype.hasOwnProperty.call(O,ne)?_t(O[ne],F[ne])||(O[ne].type==="geojson"&&F[ne].type==="geojson"&&Lt(O,F,ne)?Pt($,{command:"setGeoJSONSourceData",args:[ne,F[ne].data]}):St(ne,F,$,W)):je(ne,F,$))})(c.sources,s.sources,E,m);const I=[];c.layers&&c.layers.forEach(O=>{"source"in O&&m[O.source]?h.push({command:"removeLayer",args:[O.id]}):I.push(O)}),h=h.concat(E),function(O,F,$){F=F||[];const W=(O=O||[]).map(wn),ne=F.map(wn),ie=O.reduce(gn,{}),fe=F.reduce(gn,{}),de=W.slice(),_e=Object.create(null);let Te,Re,Ve,tt,Ze;for(let Ye=0,yt=0;Ye<W.length;Ye++)Te=W[Ye],Object.prototype.hasOwnProperty.call(fe,Te)?yt++:(Pt($,{command:"removeLayer",args:[Te]}),de.splice(de.indexOf(Te,yt),1));for(let Ye=0,yt=0;Ye<ne.length;Ye++)Te=ne[ne.length-1-Ye],de[de.length-1-Ye]!==Te&&(Object.prototype.hasOwnProperty.call(ie,Te)?(Pt($,{command:"removeLayer",args:[Te]}),de.splice(de.lastIndexOf(Te,de.length-yt),1)):yt++,tt=de[de.length-Ye],Pt($,{command:"addLayer",args:[fe[Te],tt]}),de.splice(de.length-Ye,0,Te),_e[Te]=!0);for(let Ye=0;Ye<ne.length;Ye++)if(Te=ne[Ye],Re=ie[Te],Ve=fe[Te],!_e[Te]&&!_t(Re,Ve))if(_t(Re.source,Ve.source)&&_t(Re["source-layer"],Ve["source-layer"])&&_t(Re.type,Ve.type)){for(Ze in en(Re.layout,Ve.layout,$,Te,null,"setLayoutProperty"),en(Re.paint,Ve.paint,$,Te,null,"setPaintProperty"),_t(Re.filter,Ve.filter)||Pt($,{command:"setFilter",args:[Te,Ve.filter]}),_t(Re.minzoom,Ve.minzoom)&&_t(Re.maxzoom,Ve.maxzoom)||Pt($,{command:"setLayerZoomRange",args:[Te,Ve.minzoom,Ve.maxzoom]}),Re)Object.prototype.hasOwnProperty.call(Re,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?en(Re[Ze],Ve[Ze],$,Te,Ze.slice(6),"setPaintProperty"):_t(Re[Ze],Ve[Ze])||Pt($,{command:"setLayerProperty",args:[Te,Ze,Ve[Ze]]}));for(Ze in Ve)Object.prototype.hasOwnProperty.call(Ve,Ze)&&!Object.prototype.hasOwnProperty.call(Re,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?en(Re[Ze],Ve[Ze],$,Te,Ze.slice(6),"setPaintProperty"):_t(Re[Ze],Ve[Ze])||Pt($,{command:"setLayerProperty",args:[Te,Ze,Ve[Ze]]}))}else Pt($,{command:"removeLayer",args:[Te]}),tt=de[de.lastIndexOf(Te)+1],Pt($,{command:"addLayer",args:[Ve,tt]})}(I,s.layers,h)}catch(m){console.warn("Unable to compute style diff:",m),h=[{command:"setStyle",args:[s]}]}return h},u.aC=function(c){const s=[],h=c.id;return h===void 0&&s.push({message:`layers.${h}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${h}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),s},u.aD=function c(s,h){if(Array.isArray(s)){if(!Array.isArray(h)||s.length!==h.length)return!1;for(let m=0;m<s.length;m++)if(!c(s[m],h[m]))return!1;return!0}if(typeof s=="object"&&s!==null&&h!==null){if(typeof h!="object"||Object.keys(s).length!==Object.keys(h).length)return!1;for(const m in s)if(!c(s[m],h[m]))return!1;return!0}return s===h},u.aE=J,u.aF=Y,u.aG=class extends ho{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},u.aH=ya,u.aI=class extends ho{constructor(c,s){super(c,s),this.current=Rm}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},u.aJ=mu,u.aK=class extends ho{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},u.aL=class extends ho{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},u.aM=Eh,u.aN=function(c,s,h,m,E,I,O){var F=1/(s-h),$=1/(m-E),W=1/(I-O);return c[0]=-2*F,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*$,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*W,c[11]=0,c[12]=(s+h)*F,c[13]=(E+m)*$,c[14]=(O+I)*W,c[15]=1,c},u.aO=sr,u.aP=$8,u.aQ=class extends qd{},u.aR=NU,u.aS=class extends oy{},u.aT=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},u.aU=VO,u.aV=ue,u.aW=class extends Iv{},u.aX=mt,u.aY=function(c,s){return c[0]===s[0]&&c[1]===s[1]&&c[2]===s[2]&&c[3]===s[3]&&c[4]===s[4]&&c[5]===s[5]&&c[6]===s[6]&&c[7]===s[7]&&c[8]===s[8]&&c[9]===s[9]&&c[10]===s[10]&&c[11]===s[11]&&c[12]===s[12]&&c[13]===s[13]&&c[14]===s[14]&&c[15]===s[15]},u.aZ=function(c,s){var h=c[0],m=c[1],E=c[2],I=c[3],O=c[4],F=c[5],$=c[6],W=c[7],ne=c[8],ie=c[9],fe=c[10],de=c[11],_e=c[12],Te=c[13],Re=c[14],Ve=c[15],tt=s[0],Ze=s[1],Ye=s[2],yt=s[3],wt=s[4],Xt=s[5],ln=s[6],Wt=s[7],Ht=s[8],Nt=s[9],nn=s[10],Ut=s[11],Ot=s[12],mn=s[13],un=s[14],Wn=s[15];return Math.abs(h-tt)<=Ks*Math.max(1,Math.abs(h),Math.abs(tt))&&Math.abs(m-Ze)<=Ks*Math.max(1,Math.abs(m),Math.abs(Ze))&&Math.abs(E-Ye)<=Ks*Math.max(1,Math.abs(E),Math.abs(Ye))&&Math.abs(I-yt)<=Ks*Math.max(1,Math.abs(I),Math.abs(yt))&&Math.abs(O-wt)<=Ks*Math.max(1,Math.abs(O),Math.abs(wt))&&Math.abs(F-Xt)<=Ks*Math.max(1,Math.abs(F),Math.abs(Xt))&&Math.abs($-ln)<=Ks*Math.max(1,Math.abs($),Math.abs(ln))&&Math.abs(W-Wt)<=Ks*Math.max(1,Math.abs(W),Math.abs(Wt))&&Math.abs(ne-Ht)<=Ks*Math.max(1,Math.abs(ne),Math.abs(Ht))&&Math.abs(ie-Nt)<=Ks*Math.max(1,Math.abs(ie),Math.abs(Nt))&&Math.abs(fe-nn)<=Ks*Math.max(1,Math.abs(fe),Math.abs(nn))&&Math.abs(de-Ut)<=Ks*Math.max(1,Math.abs(de),Math.abs(Ut))&&Math.abs(_e-Ot)<=Ks*Math.max(1,Math.abs(_e),Math.abs(Ot))&&Math.abs(Te-mn)<=Ks*Math.max(1,Math.abs(Te),Math.abs(mn))&&Math.abs(Re-un)<=Ks*Math.max(1,Math.abs(Re),Math.abs(un))&&Math.abs(Ve-Wn)<=Ks*Math.max(1,Math.abs(Ve),Math.abs(Wn))},u.a_=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},u.aa=function(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,m,E,I)=>{const O=E||I;return s[m]=!O||O.toLowerCase(),""}),s["max-age"]){const h=parseInt(s["max-age"],10);isNaN(h)?delete s["max-age"]:s["max-age"]=h}return s},u.ab=function(c,s){const h=[];for(const m in c)m in s||h.push(m);return h},u.ac=U,u.ad=function(c,s,h){var m=Math.sin(h),E=Math.cos(h),I=s[0],O=s[1],F=s[2],$=s[3],W=s[4],ne=s[5],ie=s[6],fe=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=I*E+W*m,c[1]=O*E+ne*m,c[2]=F*E+ie*m,c[3]=$*E+fe*m,c[4]=W*E-I*m,c[5]=ne*E-O*m,c[6]=ie*E-F*m,c[7]=fe*E-$*m,c},u.ae=function(c){var s=new fy(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},u.af=Dx,u.ag=function(c,s){let h=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:E,minZoom:I,maxZoom:O}=c,F=E?U(Yi.interpolationFactor(E,s,I,O),0,1):0;c.kind==="camera"?m=Io.number(c.minSize,c.maxSize,F):h=F}return{uSizeT:h,uSize:m}},u.ai=function(c,{uSize:s,uSizeT:h},{lowerSize:m,upperSize:E}){return c.kind==="source"?m/Ch:c.kind==="composite"?Io.number(m/Ch,E/Ch,h):s},u.aj=MT,u.ak=function(c,s,h,m){const E=s.y-c.y,I=s.x-c.x,O=m.y-h.y,F=m.x-h.x,$=O*I-F*E;if($===0)return null;const W=(F*(c.y-h.y)-O*(c.x-h.x))/$;return new y(c.x+W*I,c.y+W*E)},u.al=qk,u.am=Lv,u.an=dT,u.ao=fo,u.aq=RT,u.ar=function(c,s){var h=s[0],m=s[1],E=s[2],I=s[3],O=s[4],F=s[5],$=s[6],W=s[7],ne=s[8],ie=s[9],fe=s[10],de=s[11],_e=s[12],Te=s[13],Re=s[14],Ve=s[15],tt=h*F-m*O,Ze=h*$-E*O,Ye=h*W-I*O,yt=m*$-E*F,wt=m*W-I*F,Xt=E*W-I*$,ln=ne*Te-ie*_e,Wt=ne*Re-fe*_e,Ht=ne*Ve-de*_e,Nt=ie*Re-fe*Te,nn=ie*Ve-de*Te,Ut=fe*Ve-de*Re,Ot=tt*Ut-Ze*nn+Ye*Nt+yt*Ht-wt*Wt+Xt*ln;return Ot?(c[0]=(F*Ut-$*nn+W*Nt)*(Ot=1/Ot),c[1]=(E*nn-m*Ut-I*Nt)*Ot,c[2]=(Te*Xt-Re*wt+Ve*yt)*Ot,c[3]=(fe*wt-ie*Xt-de*yt)*Ot,c[4]=($*Ht-O*Ut-W*Wt)*Ot,c[5]=(h*Ut-E*Ht+I*Wt)*Ot,c[6]=(Re*Ye-_e*Xt-Ve*Ze)*Ot,c[7]=(ne*Xt-fe*Ye+de*Ze)*Ot,c[8]=(O*nn-F*Ht+W*ln)*Ot,c[9]=(m*Ht-h*nn-I*ln)*Ot,c[10]=(_e*wt-Te*Ye+Ve*tt)*Ot,c[11]=(ie*Ye-ne*wt-de*tt)*Ot,c[12]=(F*Wt-O*Nt-$*ln)*Ot,c[13]=(h*Nt-m*Wt+E*ln)*Ot,c[14]=(Te*Ze-_e*yt-Re*tt)*Ot,c[15]=(ne*yt-ie*Ze+fe*tt)*Ot,c):null},u.as=UT,u.at=kT,u.au=VT,u.av=function(){const c={},s=rt.$version;for(const h in rt.$root){const m=rt.$root[h];if(m.required){let E=null;E=h==="version"?s:m.type==="array"?[]:{},E!=null&&(c[h]=E)}}return c},u.aw=Af,u.ax=ct,u.ay=function(c){c=c.slice();const s=Object.create(null);for(let h=0;h<c.length;h++)s[c[h].id]=c[h];for(let h=0;h<c.length;h++)"ref"in c[h]&&(c[h]=gt(c[h],s[c[h].ref]));return c},u.az=function(c){if(c.type==="custom")return new s7(c);switch(c.type){case"background":return new r7(c);case"circle":return new U8(c);case"fill":return new lU(c);case"fill-extrusion":return new EU(c);case"heatmap":return new q8(c);case"hillshade":return new H8(c);case"line":return new OU(c);case"raster":return new o7(c);case"symbol":return new Hx(c)}},u.b=De,u.b0=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]*s[3]},u.b1=V,u.b2=zk,u.b3=Nk,u.b4=function(c,s,h,m,E){var I,O=1/Math.tan(s/2);return c[0]=O/h,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=O,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,E!=null&&E!==1/0?(c[10]=(E+m)*(I=1/(m-E)),c[14]=2*E*m*I):(c[10]=-1,c[14]=-2*m),c},u.b5=function(c,s,h){var m=Math.sin(h),E=Math.cos(h),I=s[4],O=s[5],F=s[6],$=s[7],W=s[8],ne=s[9],ie=s[10],fe=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=I*E+W*m,c[5]=O*E+ne*m,c[6]=F*E+ie*m,c[7]=$*E+fe*m,c[8]=W*E-I*m,c[9]=ne*E-O*m,c[10]=ie*E-F*m,c[11]=fe*E-$*m,c},u.b6=z,u.b7=D,u.b8=function(c){return c*Math.PI/180},u.b9=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},u.bA=pu,u.ba=class extends bl{},u.bb=FT,u.bc=y7,u.be=it,u.bf=function(c,s){$e.REGISTERED_PROTOCOLS[c]=s},u.bg=function(c){delete $e.REGISTERED_PROTOCOLS[c]},u.bh=function(c,s){const h={};for(let E=0;E<c.length;E++){const I=s&&s[c[E].id]||Sv(c[E]);s&&(s[c[E].id]=I);let O=h[I];O||(O=h[I]=[]),O.push(c[E])}const m=[];for(const E in h)m.push(h[E]);return m},u.bi=Jt,u.bj=Bk,u.bk=$k,u.bl=vk,u.bm=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Mi/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0],h=s.layout,m=s._unevaluatedLayout._values,E={layoutIconSize:m["icon-size"].possiblyEvaluate(new jr(c.bucket.zoom+1),c.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new jr(c.bucket.zoom+1),c.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new jr(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:W,maxZoom:ne}=c.bucket.textSizeData;E.compositeTextSizes=[m["text-size"].possiblyEvaluate(new jr(W),c.canonical),m["text-size"].possiblyEvaluate(new jr(ne),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:W,maxZoom:ne}=c.bucket.iconSizeData;E.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new jr(W),c.canonical),m["icon-size"].possiblyEvaluate(new jr(ne),c.canonical)]}const I=h.get("text-line-height")*fo,O=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",F=h.get("text-keep-upright"),$=h.get("text-size");for(const W of c.bucket.features){const ne=h.get("text-font").evaluate(W,{},c.canonical).join(","),ie=$.evaluate(W,{},c.canonical),fe=E.layoutTextSize.evaluate(W,{},c.canonical),de=E.layoutIconSize.evaluate(W,{},c.canonical),_e={horizontal:{},vertical:void 0},Te=W.text;let Re,Ve=[0,0];if(Te){const Ye=Te.toString(),yt=h.get("text-letter-spacing").evaluate(W,{},c.canonical)*fo,wt=Im(Ye)?yt:0,Xt=h.get("text-anchor").evaluate(W,{},c.canonical),ln=Qk(s,W,c.canonical);if(!ln){const Ut=h.get("text-radial-offset").evaluate(W,{},c.canonical);Ve=Ut?Jk(Xt,[Ut*fo,$T]):h.get("text-offset").evaluate(W,{},c.canonical).map(Ot=>Ot*fo)}let Wt=O?"center":h.get("text-justify").evaluate(W,{},c.canonical);const Ht=h.get("symbol-placement"),Nt=Ht==="point"?h.get("text-max-width").evaluate(W,{},c.canonical)*fo:0,nn=()=>{c.bucket.allowVerticalPlacement&&mc(Ye)&&(_e.vertical=Vx(Te,c.glyphMap,c.glyphPositions,c.imagePositions,ne,Nt,I,Xt,"left",wt,Ve,u.ah.vertical,!0,Ht,fe,ie))};if(!O&&ln){const Ut=new Set;if(Wt==="auto")for(let mn=0;mn<ln.values.length;mn+=2)Ut.add(UT(ln.values[mn]));else Ut.add(Wt);let Ot=!1;for(const mn of Ut)if(!_e.horizontal[mn])if(Ot)_e.horizontal[mn]=_e.horizontal[0];else{const un=Vx(Te,c.glyphMap,c.glyphPositions,c.imagePositions,ne,Nt,I,"center",mn,wt,Ve,u.ah.horizontal,!1,Ht,fe,ie);un&&(_e.horizontal[mn]=un,Ot=un.positionedLines.length===1)}nn()}else{Wt==="auto"&&(Wt=UT(Xt));const Ut=Vx(Te,c.glyphMap,c.glyphPositions,c.imagePositions,ne,Nt,I,Xt,Wt,wt,Ve,u.ah.horizontal,!1,Ht,fe,ie);Ut&&(_e.horizontal[Wt]=Ut),nn(),mc(Ye)&&O&&F&&(_e.vertical=Vx(Te,c.glyphMap,c.glyphPositions,c.imagePositions,ne,Nt,I,Xt,Wt,wt,Ve,u.ah.vertical,!1,Ht,fe,ie))}}let tt=!1;if(W.icon&&W.icon.name){const Ye=c.imageMap[W.icon.name];Ye&&(Re=JU(c.imagePositions[W.icon.name],h.get("icon-offset").evaluate(W,{},c.canonical),h.get("icon-anchor").evaluate(W,{},c.canonical)),tt=!!Ye.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=tt:c.bucket.sdfIcons!==tt&&ce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ye.pixelRatio!==c.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Ze=tR(_e.horizontal)||_e.vertical;c.bucket.iconsInText=!!Ze&&Ze.iconsInText,(Ze||Re)&&m7(c.bucket,W,_e,Re,c.imageMap,E,fe,de,Ve,tt,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},u.bn=CT,u.bo=ET,u.bp=TT,u.bq=Hd,u.br=PT,u.bs=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},u.bt=function(c,s,h,m,E){return l(this,void 0,void 0,function*(){if(R())try{return yield ve(c,s,h,m,E)}catch{}return function(I,O,F,$,W){const ne=I.width,ie=I.height;he&&xe||(he=new OffscreenCanvas(ne,ie),xe=he.getContext("2d",{willReadFrequently:!0})),he.width=ne,he.height=ie,xe.drawImage(I,0,0,ne,ie);const fe=xe.getImageData(O,F,$,W);return xe.clearRect(0,0,ne,ie),fe.data}(c,s,h,m,E)})},u.bu=Fk,u.bv=p,u.bw=g,u.bx=ck,u.by=hu,u.bz=function(c){return c.message===Ee},u.c=Ge,u.d=c=>l(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const s=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(s)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),u.e=G,u.f=c=>new Promise((s,h)=>{const m=new Image;m.onload=()=>{s(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Ae})},m.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const E=new Blob([new Uint8Array(c)],{type:"image/png"});m.src=c.byteLength?URL.createObjectURL(E):Ae}),u.g=be,u.h=(c,s)=>xt(G(c,{type:"json"}),s),u.i=Ne,u.j=Gt,u.k=Kt,u.l=(c,s)=>xt(G(c,{type:"arrayBuffer"}),s),u.m=xt,u.n=function(c){return new PT(c).readFields(HU,[])},u.o=Nv,u.p=_k,u.q=hn,u.r=Tv,u.s=Dt,u.t=pc,u.u=qt,u.v=rt,u.w=ce,u.x=ma,u.y=function([c,s,h]){return s+=90,s*=Math.PI/180,h*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(h),y:c*Math.sin(s)*Math.sin(h),z:c*Math.cos(h)}},u.z=Io}),i("worker",["./shared"],function(u){class l{constructor(K){this.keyCache={},K&&this.replace(K)}replace(K){this._layerConfigs={},this._layers={},this.update(K,[])}update(K,te){for(const pe of K){this._layerConfigs[pe.id]=pe;const ke=this._layers[pe.id]=u.az(pe);ke._featureFilter=u.a6(ke.filter),this.keyCache[pe.id]&&delete this.keyCache[pe.id]}for(const pe of te)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};const le=u.bh(Object.values(this._layerConfigs),this.keyCache);for(const pe of le){const ke=pe.map(ot=>this._layers[ot.id]),ge=ke[0];if(ge.visibility==="none")continue;const ze=ge.source||"";let Ie=this.familiesBySource[ze];Ie||(Ie=this.familiesBySource[ze]={});const qe=ge.sourceLayer||"_geojsonTileLayer";let Qe=Ie[qe];Qe||(Qe=Ie[qe]=[]),Qe.push(ke)}}}class p{constructor(K){const te={},le=[];for(const ze in K){const Ie=K[ze],qe=te[ze]={};for(const Qe in Ie){const ot=Ie[+Qe];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const et={x:0,y:0,w:ot.bitmap.width+2,h:ot.bitmap.height+2};le.push(et),qe[Qe]={rect:et,metrics:ot.metrics}}}const{w:pe,h:ke}=u.p(le),ge=new u.o({width:pe||1,height:ke||1});for(const ze in K){const Ie=K[ze];for(const qe in Ie){const Qe=Ie[+qe];if(!Qe||Qe.bitmap.width===0||Qe.bitmap.height===0)continue;const ot=te[ze][qe].rect;u.o.copy(Qe.bitmap,ge,{x:0,y:0},{x:ot.x+1,y:ot.y+1},Qe.bitmap)}}this.image=ge,this.positions=te}}u.bi("GlyphAtlas",p);class g{constructor(K){this.tileID=new u.Q(K.tileID.overscaledZ,K.tileID.wrap,K.tileID.canonical.z,K.tileID.canonical.x,K.tileID.canonical.y),this.uid=K.uid,this.zoom=K.zoom,this.pixelRatio=K.pixelRatio,this.tileSize=K.tileSize,this.source=K.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=K.showCollisionBoxes,this.collectResourceTiming=!!K.collectResourceTiming,this.returnDependencies=!!K.returnDependencies,this.promoteId=K.promoteId,this.inFlightDependencies=[]}parse(K,te,le,pe){return u._(this,void 0,void 0,function*(){this.status="parsing",this.data=K,this.collisionBoxArray=new u.a4;const ke=new u.bj(Object.keys(K.layers).sort()),ge=new u.bk(this.tileID,this.promoteId);ge.bucketLayerIDs=[];const ze={},Ie={featureIndex:ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:le},qe=te.familiesBySource[this.source];for(const vn in qe){const Nr=K.layers[vn];if(!Nr)continue;Nr.version===1&&u.w(`Vector tile source "${this.source}" layer "${vn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Gr=ke.encode(vn),ji=[];for(let bi=0;bi<Nr.length;bi++){const Yr=Nr.feature(bi),Bn=ge.getId(Yr,vn);ji.push({feature:Yr,id:Bn,index:bi,sourceLayerIndex:Gr})}for(const bi of qe[vn]){const Yr=bi[0];Yr.source!==this.source&&u.w(`layer.source = ${Yr.source} does not equal this.source = ${this.source}`),Yr.minzoom&&this.zoom<Math.floor(Yr.minzoom)||Yr.maxzoom&&this.zoom>=Yr.maxzoom||Yr.visibility!=="none"&&(x(bi,this.zoom,le),(ze[Yr.id]=Yr.createBucket({index:ge.bucketLayerIDs.length,layers:bi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gr,sourceID:this.source})).populate(ji,Ie,this.tileID.canonical),ge.bucketLayerIDs.push(bi.map(Bn=>Bn.id)))}}const Qe=u.aE(Ie.glyphDependencies,vn=>Object.keys(vn).map(Number));this.inFlightDependencies.forEach(vn=>vn==null?void 0:vn.abort()),this.inFlightDependencies=[];let ot=Promise.resolve({});if(Object.keys(Qe).length){const vn=new AbortController;this.inFlightDependencies.push(vn),ot=pe.sendAsync({type:"GG",data:{stacks:Qe,source:this.source,tileID:this.tileID,type:"glyphs"}},vn)}const et=Object.keys(Ie.iconDependencies);let ht=Promise.resolve({});if(et.length){const vn=new AbortController;this.inFlightDependencies.push(vn),ht=pe.sendAsync({type:"GI",data:{icons:et,source:this.source,tileID:this.tileID,type:"icons"}},vn)}const Zt=Object.keys(Ie.patternDependencies);let an=Promise.resolve({});if(Zt.length){const vn=new AbortController;this.inFlightDependencies.push(vn),an=pe.sendAsync({type:"GI",data:{icons:Zt,source:this.source,tileID:this.tileID,type:"patterns"}},vn)}const[sn,Rn,or]=yield Promise.all([ot,ht,an]),fr=new p(sn),ur=new u.bl(Rn,or);for(const vn in ze){const Nr=ze[vn];Nr instanceof u.a5?(x(Nr.layers,this.zoom,le),u.bm({bucket:Nr,glyphMap:sn,glyphPositions:fr.positions,imageMap:Rn,imagePositions:ur.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Nr.hasPattern&&(Nr instanceof u.bn||Nr instanceof u.bo||Nr instanceof u.bp)&&(x(Nr.layers,this.zoom,le),Nr.addFeatures(Ie,this.tileID.canonical,ur.patternPositions))}return this.status="done",{buckets:Object.values(ze).filter(vn=>!vn.isEmpty()),featureIndex:ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:fr.image,imageAtlas:ur,glyphMap:this.returnDependencies?sn:null,iconMap:this.returnDependencies?Rn:null,glyphPositions:this.returnDependencies?fr.positions:null}})}}function x(Oe,K,te){const le=new u.a8(K);for(const pe of Oe)pe.recalculate(le,te)}class y{constructor(K,te,le){this.actor=K,this.layerIndex=te,this.availableImages=le,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(K,te){return u._(this,void 0,void 0,function*(){const le=yield u.l(K.request,te);try{return{vectorTile:new u.bq.VectorTile(new u.br(le.data)),rawData:le.data,cacheControl:le.cacheControl,expires:le.expires}}catch(pe){const ke=new Uint8Array(le.data);let ge=`Unable to parse the tile at ${K.request.url}, `;throw ge+=ke[0]===31&&ke[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.messge}`,new Error(ge)}})}loadTile(K){return u._(this,void 0,void 0,function*(){const te=K.uid,le=!!(K&&K.request&&K.request.collectResourceTiming)&&new u.bs(K.request),pe=new g(K);this.loading[te]=pe;const ke=new AbortController;pe.abort=ke;try{const ge=yield this.loadVectorTile(K,ke);if(delete this.loading[te],!ge)return null;const ze=ge.rawData,Ie={};ge.expires&&(Ie.expires=ge.expires),ge.cacheControl&&(Ie.cacheControl=ge.cacheControl);const qe={};if(le){const ot=le.finish();ot&&(qe.resourceTiming=JSON.parse(JSON.stringify(ot)))}pe.vectorTile=ge.vectorTile;const Qe=pe.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[te]=pe,this.fetching[te]={rawTileData:ze,cacheControl:Ie,resourceTiming:qe};try{const ot=yield Qe;return u.e({rawTileData:ze.slice(0)},ot,Ie,qe)}finally{delete this.fetching[te]}}catch(ge){throw delete this.loading[te],pe.status="done",this.loaded[te]=pe,ge}})}reloadTile(K){return u._(this,void 0,void 0,function*(){const te=K.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const le=this.loaded[te];if(le.showCollisionBoxes=K.showCollisionBoxes,le.status==="parsing"){const pe=yield le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor);let ke;if(this.fetching[te]){const{rawTileData:ge,cacheControl:ze,resourceTiming:Ie}=this.fetching[te];delete this.fetching[te],ke=u.e({rawTileData:ge.slice(0)},pe,ze,Ie)}else ke=pe;return ke}if(le.status==="done"&&le.vectorTile)return le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(K){return u._(this,void 0,void 0,function*(){const te=this.loading,le=K.uid;te&&te[le]&&te[le].abort&&(te[le].abort.abort(),delete te[le])})}removeTile(K){return u._(this,void 0,void 0,function*(){this.loaded&&this.loaded[K.uid]&&delete this.loaded[K.uid]})}}class _{constructor(){this.loaded={}}loadTile(K){return u._(this,void 0,void 0,function*(){const{uid:te,encoding:le,rawImageData:pe,redFactor:ke,greenFactor:ge,blueFactor:ze,baseShift:Ie}=K,qe=pe.width+2,Qe=pe.height+2,ot=u.b(pe)?new u.R({width:qe,height:Qe},yield u.bt(pe,-1,-1,qe,Qe)):pe,et=new u.bu(te,ot,le,ke,ge,ze,Ie);return this.loaded=this.loaded||{},this.loaded[te]=et,et})}removeTile(K){const te=this.loaded,le=K.uid;te&&te[le]&&delete te[le]}}function T(Oe,K){if(Oe.length!==0){P(Oe[0],K);for(var te=1;te<Oe.length;te++)P(Oe[te],!K)}}function P(Oe,K){for(var te=0,le=0,pe=0,ke=Oe.length,ge=ke-1;pe<ke;ge=pe++){var ze=(Oe[pe][0]-Oe[ge][0])*(Oe[ge][1]+Oe[pe][1]),Ie=te+ze;le+=Math.abs(te)>=Math.abs(ze)?te-Ie+ze:ze-Ie+te,te=Ie}te+le>=0!=!!K&&Oe.reverse()}var A=u.bv(function Oe(K,te){var le,pe=K&&K.type;if(pe==="FeatureCollection")for(le=0;le<K.features.length;le++)Oe(K.features[le],te);else if(pe==="GeometryCollection")for(le=0;le<K.geometries.length;le++)Oe(K.geometries[le],te);else if(pe==="Feature")Oe(K.geometry,te);else if(pe==="Polygon")T(K.coordinates,te);else if(pe==="MultiPolygon")for(le=0;le<K.coordinates.length;le++)T(K.coordinates[le],te);return K});const M=u.bq.VectorTileFeature.prototype.toGeoJSON;var k={exports:{}},R=u.bw,z=u.bq.VectorTileFeature,D=U;function U(Oe,K){this.options=K||{},this.features=Oe,this.length=Oe.length}function V(Oe,K){this.id=typeof Oe.id=="number"?Oe.id:void 0,this.type=Oe.type,this.rawGeometry=Oe.type===1?[Oe.geometry]:Oe.geometry,this.properties=Oe.tags,this.extent=K||4096}U.prototype.feature=function(Oe){return new V(this.features[Oe],this.options.extent)},V.prototype.loadGeometry=function(){var Oe=this.rawGeometry;this.geometry=[];for(var K=0;K<Oe.length;K++){for(var te=Oe[K],le=[],pe=0;pe<te.length;pe++)le.push(new R(te[pe][0],te[pe][1]));this.geometry.push(le)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Oe=this.geometry,K=1/0,te=-1/0,le=1/0,pe=-1/0,ke=0;ke<Oe.length;ke++)for(var ge=Oe[ke],ze=0;ze<ge.length;ze++){var Ie=ge[ze];K=Math.min(K,Ie.x),te=Math.max(te,Ie.x),le=Math.min(le,Ie.y),pe=Math.max(pe,Ie.y)}return[K,le,te,pe]},V.prototype.toGeoJSON=z.prototype.toGeoJSON;var G=u.bx,H=D;function J(Oe){var K=new G;return function(te,le){for(var pe in te.layers)le.writeMessage(3,Y,te.layers[pe])}(Oe,K),K.finish()}function Y(Oe,K){var te;K.writeVarintField(15,Oe.version||1),K.writeStringField(1,Oe.name||""),K.writeVarintField(5,Oe.extent||4096);var le={keys:[],values:[],keycache:{},valuecache:{}};for(te=0;te<Oe.length;te++)le.feature=Oe.feature(te),K.writeMessage(2,X,le);var pe=le.keys;for(te=0;te<pe.length;te++)K.writeStringField(3,pe[te]);var ke=le.values;for(te=0;te<ke.length;te++)K.writeMessage(4,Ne,ke[te])}function X(Oe,K){var te=Oe.feature;te.id!==void 0&&K.writeVarintField(1,te.id),K.writeMessage(2,ee,Oe),K.writeVarintField(3,te.type),K.writeMessage(4,we,te)}function ee(Oe,K){var te=Oe.feature,le=Oe.keys,pe=Oe.values,ke=Oe.keycache,ge=Oe.valuecache;for(var ze in te.properties){var Ie=te.properties[ze],qe=ke[ze];if(Ie!==null){qe===void 0&&(le.push(ze),ke[ze]=qe=le.length-1),K.writeVarint(qe);var Qe=typeof Ie;Qe!=="string"&&Qe!=="boolean"&&Qe!=="number"&&(Ie=JSON.stringify(Ie));var ot=Qe+":"+Ie,et=ge[ot];et===void 0&&(pe.push(Ie),ge[ot]=et=pe.length-1),K.writeVarint(et)}}}function ce(Oe,K){return(K<<3)+(7&Oe)}function oe(Oe){return Oe<<1^Oe>>31}function we(Oe,K){for(var te=Oe.loadGeometry(),le=Oe.type,pe=0,ke=0,ge=te.length,ze=0;ze<ge;ze++){var Ie=te[ze],qe=1;le===1&&(qe=Ie.length),K.writeVarint(ce(1,qe));for(var Qe=le===3?Ie.length-1:Ie.length,ot=0;ot<Qe;ot++){ot===1&&le!==1&&K.writeVarint(ce(2,Qe-1));var et=Ie[ot].x-pe,ht=Ie[ot].y-ke;K.writeVarint(oe(et)),K.writeVarint(oe(ht)),pe+=et,ke+=ht}le===3&&K.writeVarint(ce(7,1))}}function Ne(Oe,K){var te=typeof Oe;te==="string"?K.writeStringField(1,Oe):te==="boolean"?K.writeBooleanField(7,Oe):te==="number"&&(Oe%1!=0?K.writeDoubleField(3,Oe):Oe<0?K.writeSVarintField(6,Oe):K.writeVarintField(5,Oe))}k.exports=J,k.exports.fromVectorTileJs=J,k.exports.fromGeojsonVt=function(Oe,K){K=K||{};var te={};for(var le in Oe)te[le]=new H(Oe[le].features,K),te[le].name=le,te[le].version=K.version,te[le].extent=K.extent;return J({layers:te})},k.exports.GeoJSONWrapper=H;var Be=u.bv(k.exports);const De={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Oe=>Oe},Ae=Math.fround||(ve=new Float32Array(1),Oe=>(ve[0]=+Oe,ve[0]));var ve;const he=3,xe=5,Ee=6;class Ge{constructor(K){this.options=Object.assign(Object.create(De),K),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(K){const{log:te,minZoom:le,maxZoom:pe}=this.options;te&&console.time("total time");const ke=`prepare ${K.length} points`;te&&console.time(ke),this.points=K;const ge=[];for(let Ie=0;Ie<K.length;Ie++){const qe=K[Ie];if(!qe.geometry)continue;const[Qe,ot]=qe.geometry.coordinates,et=Ae(He(Qe)),ht=Ae(it(ot));ge.push(et,ht,1/0,Ie,-1,1),this.options.reduce&&ge.push(0)}let ze=this.trees[pe+1]=this._createTree(ge);te&&console.timeEnd(ke);for(let Ie=pe;Ie>=le;Ie--){const qe=+Date.now();ze=this.trees[Ie]=this._createTree(this._cluster(ze,Ie)),te&&console.log("z%d: %d clusters in %dms",Ie,ze.numItems,+Date.now()-qe)}return te&&console.timeEnd("total time"),this}getClusters(K,te){let le=((K[0]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,K[1]));let ke=K[2]===180?180:((K[2]+180)%360+360)%360-180;const ge=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)le=-180,ke=180;else if(le>ke){const ot=this.getClusters([le,pe,180,ge],te),et=this.getClusters([-180,pe,ke,ge],te);return ot.concat(et)}const ze=this.trees[this._limitZoom(te)],Ie=ze.range(He(le),it(ge),He(ke),it(pe)),qe=ze.data,Qe=[];for(const ot of Ie){const et=this.stride*ot;Qe.push(qe[et+xe]>1?$e(qe,et,this.clusterProps):this.points[qe[et+he]])}return Qe}getChildren(K){const te=this._getOriginId(K),le=this._getOriginZoom(K),pe="No cluster with the specified id.",ke=this.trees[le];if(!ke)throw new Error(pe);const ge=ke.data;if(te*this.stride>=ge.length)throw new Error(pe);const ze=this.options.radius/(this.options.extent*Math.pow(2,le-1)),Ie=ke.within(ge[te*this.stride],ge[te*this.stride+1],ze),qe=[];for(const Qe of Ie){const ot=Qe*this.stride;ge[ot+4]===K&&qe.push(ge[ot+xe]>1?$e(ge,ot,this.clusterProps):this.points[ge[ot+he]])}if(qe.length===0)throw new Error(pe);return qe}getLeaves(K,te,le){const pe=[];return this._appendLeaves(pe,K,te=te||10,le=le||0,0),pe}getTile(K,te,le){const pe=this.trees[this._limitZoom(K)],ke=Math.pow(2,K),{extent:ge,radius:ze}=this.options,Ie=ze/ge,qe=(le-Ie)/ke,Qe=(le+1+Ie)/ke,ot={features:[]};return this._addTileFeatures(pe.range((te-Ie)/ke,qe,(te+1+Ie)/ke,Qe),pe.data,te,le,ke,ot),te===0&&this._addTileFeatures(pe.range(1-Ie/ke,qe,1,Qe),pe.data,ke,le,ke,ot),te===ke-1&&this._addTileFeatures(pe.range(0,qe,Ie/ke,Qe),pe.data,-1,le,ke,ot),ot.features.length?ot:null}getClusterExpansionZoom(K){let te=this._getOriginZoom(K)-1;for(;te<=this.options.maxZoom;){const le=this.getChildren(K);if(te++,le.length!==1)break;K=le[0].properties.cluster_id}return te}_appendLeaves(K,te,le,pe,ke){const ge=this.getChildren(te);for(const ze of ge){const Ie=ze.properties;if(Ie&&Ie.cluster?ke+Ie.point_count<=pe?ke+=Ie.point_count:ke=this._appendLeaves(K,Ie.cluster_id,le,pe,ke):ke<pe?ke++:K.push(ze),K.length===le)break}return ke}_createTree(K){const te=new u.au(K.length/this.stride|0,this.options.nodeSize,Float32Array);for(let le=0;le<K.length;le+=this.stride)te.add(K[le],K[le+1]);return te.finish(),te.data=K,te}_addTileFeatures(K,te,le,pe,ke,ge){for(const ze of K){const Ie=ze*this.stride,qe=te[Ie+xe]>1;let Qe,ot,et;if(qe)Qe=be(te,Ie,this.clusterProps),ot=te[Ie],et=te[Ie+1];else{const an=this.points[te[Ie+he]];Qe=an.properties;const[sn,Rn]=an.geometry.coordinates;ot=He(sn),et=it(Rn)}const ht={type:1,geometry:[[Math.round(this.options.extent*(ot*ke-le)),Math.round(this.options.extent*(et*ke-pe))]],tags:Qe};let Zt;Zt=qe||this.options.generateId?te[Ie+he]:this.points[te[Ie+he]].id,Zt!==void 0&&(ht.id=Zt),ge.features.push(ht)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,te){const{radius:le,extent:pe,reduce:ke,minPoints:ge}=this.options,ze=le/(pe*Math.pow(2,te)),Ie=K.data,qe=[],Qe=this.stride;for(let ot=0;ot<Ie.length;ot+=Qe){if(Ie[ot+2]<=te)continue;Ie[ot+2]=te;const et=Ie[ot],ht=Ie[ot+1],Zt=K.within(Ie[ot],Ie[ot+1],ze),an=Ie[ot+xe];let sn=an;for(const Rn of Zt){const or=Rn*Qe;Ie[or+2]>te&&(sn+=Ie[or+xe])}if(sn>an&&sn>=ge){let Rn,or=et*an,fr=ht*an,ur=-1;const vn=((ot/Qe|0)<<5)+(te+1)+this.points.length;for(const Nr of Zt){const Gr=Nr*Qe;if(Ie[Gr+2]<=te)continue;Ie[Gr+2]=te;const ji=Ie[Gr+xe];or+=Ie[Gr]*ji,fr+=Ie[Gr+1]*ji,Ie[Gr+4]=vn,ke&&(Rn||(Rn=this._map(Ie,ot,!0),ur=this.clusterProps.length,this.clusterProps.push(Rn)),ke(Rn,this._map(Ie,Gr)))}Ie[ot+4]=vn,qe.push(or/sn,fr/sn,1/0,vn,-1,sn),ke&&qe.push(ur)}else{for(let Rn=0;Rn<Qe;Rn++)qe.push(Ie[ot+Rn]);if(sn>1)for(const Rn of Zt){const or=Rn*Qe;if(!(Ie[or+2]<=te)){Ie[or+2]=te;for(let fr=0;fr<Qe;fr++)qe.push(Ie[or+fr])}}}}return qe}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,te,le){if(K[te+xe]>1){const ge=this.clusterProps[K[te+Ee]];return le?Object.assign({},ge):ge}const pe=this.points[K[te+he]].properties,ke=this.options.map(pe);return le&&ke===pe?Object.assign({},ke):ke}}function $e(Oe,K,te){return{type:"Feature",id:Oe[K+he],properties:be(Oe,K,te),geometry:{type:"Point",coordinates:[(le=Oe[K],360*(le-.5)),ct(Oe[K+1])]}};var le}function be(Oe,K,te){const le=Oe[K+xe],pe=le>=1e4?`${Math.round(le/1e3)}k`:le>=1e3?Math.round(le/100)/10+"k":le,ke=Oe[K+Ee],ge=ke===-1?{}:Object.assign({},te[ke]);return Object.assign(ge,{cluster:!0,cluster_id:Oe[K+he],point_count:le,point_count_abbreviated:pe})}function He(Oe){return Oe/360+.5}function it(Oe){const K=Math.sin(Oe*Math.PI/180),te=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return te<0?0:te>1?1:te}function ct(Oe){const K=(180-360*Oe)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function xt(Oe,K,te,le){for(var pe,ke=le,ge=te-K>>1,ze=te-K,Ie=Oe[K],qe=Oe[K+1],Qe=Oe[te],ot=Oe[te+1],et=K+3;et<te;et+=3){var ht=Dt(Oe[et],Oe[et+1],Ie,qe,Qe,ot);if(ht>ke)pe=et,ke=ht;else if(ht===ke){var Zt=Math.abs(et-ge);Zt<ze&&(pe=et,ze=Zt)}}ke>le&&(pe-K>3&&xt(Oe,K,pe,le),Oe[pe+2]=ke,te-pe>3&&xt(Oe,pe,te,le))}function Dt(Oe,K,te,le,pe,ke){var ge=pe-te,ze=ke-le;if(ge!==0||ze!==0){var Ie=((Oe-te)*ge+(K-le)*ze)/(ge*ge+ze*ze);Ie>1?(te=pe,le=ke):Ie>0&&(te+=ge*Ie,le+=ze*Ie)}return(ge=Oe-te)*ge+(ze=K-le)*ze}function Qt(Oe,K,te,le){var pe={id:Oe===void 0?null:Oe,type:K,geometry:te,tags:le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ke){var ge=ke.geometry,ze=ke.type;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")Ft(ke,ge);else if(ze==="Polygon"||ze==="MultiLineString")for(var Ie=0;Ie<ge.length;Ie++)Ft(ke,ge[Ie]);else if(ze==="MultiPolygon")for(Ie=0;Ie<ge.length;Ie++)for(var qe=0;qe<ge[Ie].length;qe++)Ft(ke,ge[Ie][qe])}(pe),pe}function Ft(Oe,K){for(var te=0;te<K.length;te+=3)Oe.minX=Math.min(Oe.minX,K[te]),Oe.minY=Math.min(Oe.minY,K[te+1]),Oe.maxX=Math.max(Oe.maxX,K[te]),Oe.maxY=Math.max(Oe.maxY,K[te+1])}function Kt(Oe,K,te,le){if(K.geometry){var pe=K.geometry.coordinates,ke=K.geometry.type,ge=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2),ze=[],Ie=K.id;if(te.promoteId?Ie=K.properties[te.promoteId]:te.generateId&&(Ie=le||0),ke==="Point")Gt(pe,ze);else if(ke==="MultiPoint")for(var qe=0;qe<pe.length;qe++)Gt(pe[qe],ze);else if(ke==="LineString")Tr(pe,ze,ge,!1);else if(ke==="MultiLineString"){if(te.lineMetrics){for(qe=0;qe<pe.length;qe++)Tr(pe[qe],ze=[],ge,!1),Oe.push(Qt(Ie,"LineString",ze,K.properties));return}rt(pe,ze,ge,!1)}else if(ke==="Polygon")rt(pe,ze,ge,!0);else{if(ke!=="MultiPolygon"){if(ke==="GeometryCollection"){for(qe=0;qe<K.geometry.geometries.length;qe++)Kt(Oe,{id:Ie,geometry:K.geometry.geometries[qe],properties:K.properties},te,le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(qe=0;qe<pe.length;qe++){var Qe=[];rt(pe[qe],Qe,ge,!0),ze.push(Qe)}}Oe.push(Qt(Ie,ke,ze,K.properties))}}function Gt(Oe,K){K.push(lt(Oe[0])),K.push(gt(Oe[1])),K.push(0)}function Tr(Oe,K,te,le){for(var pe,ke,ge=0,ze=0;ze<Oe.length;ze++){var Ie=lt(Oe[ze][0]),qe=gt(Oe[ze][1]);K.push(Ie),K.push(qe),K.push(0),ze>0&&(ge+=le?(pe*qe-Ie*ke)/2:Math.sqrt(Math.pow(Ie-pe,2)+Math.pow(qe-ke,2))),pe=Ie,ke=qe}var Qe=K.length-3;K[2]=1,xt(K,0,Qe,te),K[Qe+2]=1,K.size=Math.abs(ge),K.start=0,K.end=K.size}function rt(Oe,K,te,le){for(var pe=0;pe<Oe.length;pe++){var ke=[];Tr(Oe[pe],ke,te,le),K.push(ke)}}function lt(Oe){return Oe/360+.5}function gt(Oe){var K=Math.sin(Oe*Math.PI/180),te=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return te<0?0:te>1?1:te}function _t(Oe,K,te,le,pe,ke,ge,ze){if(le/=K,ke>=(te/=K)&&ge<le)return Oe;if(ge<te||ke>=le)return null;for(var Ie=[],qe=0;qe<Oe.length;qe++){var Qe=Oe[qe],ot=Qe.geometry,et=Qe.type,ht=pe===0?Qe.minX:Qe.minY,Zt=pe===0?Qe.maxX:Qe.maxY;if(ht>=te&&Zt<le)Ie.push(Qe);else if(!(Zt<te||ht>=le)){var an=[];if(et==="Point"||et==="MultiPoint")Pt(ot,an,te,le,pe);else if(et==="LineString")je(ot,an,te,le,pe,!1,ze.lineMetrics);else if(et==="MultiLineString")St(ot,an,te,le,pe,!1);else if(et==="Polygon")St(ot,an,te,le,pe,!0);else if(et==="MultiPolygon")for(var sn=0;sn<ot.length;sn++){var Rn=[];St(ot[sn],Rn,te,le,pe,!0),Rn.length&&an.push(Rn)}if(an.length){if(ze.lineMetrics&&et==="LineString"){for(sn=0;sn<an.length;sn++)Ie.push(Qt(Qe.id,et,an[sn],Qe.tags));continue}et!=="LineString"&&et!=="MultiLineString"||(an.length===1?(et="LineString",an=an[0]):et="MultiLineString"),et!=="Point"&&et!=="MultiPoint"||(et=an.length===3?"Point":"MultiPoint"),Ie.push(Qt(Qe.id,et,an,Qe.tags))}}}return Ie.length?Ie:null}function Pt(Oe,K,te,le,pe){for(var ke=0;ke<Oe.length;ke+=3){var ge=Oe[ke+pe];ge>=te&&ge<=le&&(K.push(Oe[ke]),K.push(Oe[ke+1]),K.push(Oe[ke+2]))}}function je(Oe,K,te,le,pe,ke,ge){for(var ze,Ie,qe=vt(Oe),Qe=pe===0?en:wn,ot=Oe.start,et=0;et<Oe.length-3;et+=3){var ht=Oe[et],Zt=Oe[et+1],an=Oe[et+2],sn=Oe[et+3],Rn=Oe[et+4],or=pe===0?ht:Zt,fr=pe===0?sn:Rn,ur=!1;ge&&(ze=Math.sqrt(Math.pow(ht-sn,2)+Math.pow(Zt-Rn,2))),or<te?fr>te&&(Ie=Qe(qe,ht,Zt,sn,Rn,te),ge&&(qe.start=ot+ze*Ie)):or>le?fr<le&&(Ie=Qe(qe,ht,Zt,sn,Rn,le),ge&&(qe.start=ot+ze*Ie)):Lt(qe,ht,Zt,an),fr<te&&or>=te&&(Ie=Qe(qe,ht,Zt,sn,Rn,te),ur=!0),fr>le&&or<=le&&(Ie=Qe(qe,ht,Zt,sn,Rn,le),ur=!0),!ke&&ur&&(ge&&(qe.end=ot+ze*Ie),K.push(qe),qe=vt(Oe)),ge&&(ot+=ze)}var vn=Oe.length-3;ht=Oe[vn],Zt=Oe[vn+1],an=Oe[vn+2],(or=pe===0?ht:Zt)>=te&&or<=le&&Lt(qe,ht,Zt,an),vn=qe.length-3,ke&&vn>=3&&(qe[vn]!==qe[0]||qe[vn+1]!==qe[1])&&Lt(qe,qe[0],qe[1],qe[2]),qe.length&&K.push(qe)}function vt(Oe){var K=[];return K.size=Oe.size,K.start=Oe.start,K.end=Oe.end,K}function St(Oe,K,te,le,pe,ke){for(var ge=0;ge<Oe.length;ge++)je(Oe[ge],K,te,le,pe,ke,!1)}function Lt(Oe,K,te,le){Oe.push(K),Oe.push(te),Oe.push(le)}function en(Oe,K,te,le,pe,ke){var ge=(ke-K)/(le-K);return Oe.push(ke),Oe.push(te+(pe-te)*ge),Oe.push(1),ge}function wn(Oe,K,te,le,pe,ke){var ge=(ke-te)/(pe-te);return Oe.push(K+(le-K)*ge),Oe.push(ke),Oe.push(1),ge}function gn(Oe,K){for(var te=[],le=0;le<Oe.length;le++){var pe,ke=Oe[le],ge=ke.type;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")pe=bt(ke.geometry,K);else if(ge==="MultiLineString"||ge==="Polygon"){pe=[];for(var ze=0;ze<ke.geometry.length;ze++)pe.push(bt(ke.geometry[ze],K))}else if(ge==="MultiPolygon")for(pe=[],ze=0;ze<ke.geometry.length;ze++){for(var Ie=[],qe=0;qe<ke.geometry[ze].length;qe++)Ie.push(bt(ke.geometry[ze][qe],K));pe.push(Ie)}te.push(Qt(ke.id,ge,pe,ke.tags))}return te}function bt(Oe,K){var te=[];te.size=Oe.size,Oe.start!==void 0&&(te.start=Oe.start,te.end=Oe.end);for(var le=0;le<Oe.length;le+=3)te.push(Oe[le]+K,Oe[le+1],Oe[le+2]);return te}function Vn(Oe,K){if(Oe.transformed)return Oe;var te,le,pe,ke=1<<Oe.z,ge=Oe.x,ze=Oe.y;for(te=0;te<Oe.features.length;te++){var Ie=Oe.features[te],qe=Ie.geometry,Qe=Ie.type;if(Ie.geometry=[],Qe===1)for(le=0;le<qe.length;le+=2)Ie.geometry.push(_r(qe[le],qe[le+1],K,ke,ge,ze));else for(le=0;le<qe.length;le++){var ot=[];for(pe=0;pe<qe[le].length;pe+=2)ot.push(_r(qe[le][pe],qe[le][pe+1],K,ke,ge,ze));Ie.geometry.push(ot)}}return Oe.transformed=!0,Oe}function _r(Oe,K,te,le,pe,ke){return[Math.round(te*(Oe*le-pe)),Math.round(te*(K*le-ke))]}function Gs(Oe,K,te,le,pe){for(var ke=K===pe.maxZoom?0:pe.tolerance/((1<<K)*pe.extent),ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:te,y:le,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ze=0;ze<Oe.length;ze++){ge.numFeatures++,Xr(ge,Oe[ze],ke,pe);var Ie=Oe[ze].minX,qe=Oe[ze].minY,Qe=Oe[ze].maxX,ot=Oe[ze].maxY;Ie<ge.minX&&(ge.minX=Ie),qe<ge.minY&&(ge.minY=qe),Qe>ge.maxX&&(ge.maxX=Qe),ot>ge.maxY&&(ge.maxY=ot)}return ge}function Xr(Oe,K,te,le){var pe=K.geometry,ke=K.type,ge=[];if(ke==="Point"||ke==="MultiPoint")for(var ze=0;ze<pe.length;ze+=3)ge.push(pe[ze]),ge.push(pe[ze+1]),Oe.numPoints++,Oe.numSimplified++;else if(ke==="LineString")kt(ge,pe,Oe,te,!1,!1);else if(ke==="MultiLineString"||ke==="Polygon")for(ze=0;ze<pe.length;ze++)kt(ge,pe[ze],Oe,te,ke==="Polygon",ze===0);else if(ke==="MultiPolygon")for(var Ie=0;Ie<pe.length;Ie++){var qe=pe[Ie];for(ze=0;ze<qe.length;ze++)kt(ge,qe[ze],Oe,te,!0,ze===0)}if(ge.length){var Qe=K.tags||null;if(ke==="LineString"&&le.lineMetrics){for(var ot in Qe={},K.tags)Qe[ot]=K.tags[ot];Qe.mapbox_clip_start=pe.start/pe.size,Qe.mapbox_clip_end=pe.end/pe.size}var et={geometry:ge,type:ke==="Polygon"||ke==="MultiPolygon"?3:ke==="LineString"||ke==="MultiLineString"?2:1,tags:Qe};K.id!==null&&(et.id=K.id),Oe.features.push(et)}}function kt(Oe,K,te,le,pe,ke){var ge=le*le;if(le>0&&K.size<(pe?ge:le))te.numPoints+=K.length/3;else{for(var ze=[],Ie=0;Ie<K.length;Ie+=3)(le===0||K[Ie+2]>ge)&&(te.numSimplified++,ze.push(K[Ie]),ze.push(K[Ie+1])),te.numPoints++;pe&&function(qe,Qe){for(var ot=0,et=0,ht=qe.length,Zt=ht-2;et<ht;Zt=et,et+=2)ot+=(qe[et]-qe[Zt])*(qe[et+1]+qe[Zt+1]);if(ot>0===Qe)for(et=0,ht=qe.length;et<ht/2;et+=2){var an=qe[et],sn=qe[et+1];qe[et]=qe[ht-2-et],qe[et+1]=qe[ht-1-et],qe[ht-2-et]=an,qe[ht-1-et]=sn}}(ze,ke),Oe.push(ze)}}function _n(Oe,K){var te=(K=this.options=function(pe,ke){for(var ge in ke)pe[ge]=ke[ge];return pe}(Object.create(this.options),K)).debug;if(te&&console.time("preprocess data"),K.maxZoom<0||K.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(K.promoteId&&K.generateId)throw new Error("promoteId and generateId cannot be used together.");var le=function(pe,ke){var ge=[];if(pe.type==="FeatureCollection")for(var ze=0;ze<pe.features.length;ze++)Kt(ge,pe.features[ze],ke,ze);else Kt(ge,pe.type==="Feature"?pe:{geometry:pe},ke);return ge}(Oe,K);this.tiles={},this.tileCoords=[],te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",K.indexMaxZoom,K.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),le=function(pe,ke){var ge=ke.buffer/ke.extent,ze=pe,Ie=_t(pe,1,-1-ge,ge,0,-1,2,ke),qe=_t(pe,1,1-ge,2+ge,0,-1,2,ke);return(Ie||qe)&&(ze=_t(pe,1,-ge,1+ge,0,-1,2,ke)||[],Ie&&(ze=gn(Ie,1).concat(ze)),qe&&(ze=ze.concat(gn(qe,-1)))),ze}(le,K),le.length&&this.splitTile(le,0,0,0),te&&(le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Pn(Oe,K,te){return 32*((1<<Oe)*te+K)+Oe}function Cr(Oe,K){return K?Oe.properties[K]:Oe.id}function Zo(Oe,K){if(Oe==null)return!0;if(Oe.type==="Feature")return Cr(Oe,K)!=null;if(Oe.type==="FeatureCollection"){const te=new Set;for(const le of Oe.features){const pe=Cr(le,K);if(pe==null||te.has(pe))return!1;te.add(pe)}return!0}return!1}function Tn(Oe,K){const te=new Map;if(Oe!=null)if(Oe.type==="Feature")te.set(Cr(Oe,K),Oe);else for(const le of Oe.features)te.set(Cr(le,K),le);return te}_n.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_n.prototype.splitTile=function(Oe,K,te,le,pe,ke,ge){for(var ze=[Oe,K,te,le],Ie=this.options,qe=Ie.debug;ze.length;){le=ze.pop(),te=ze.pop(),K=ze.pop(),Oe=ze.pop();var Qe=1<<K,ot=Pn(K,te,le),et=this.tiles[ot];if(!et&&(qe>1&&console.time("creation"),et=this.tiles[ot]=Gs(Oe,K,te,le,Ie),this.tileCoords.push({z:K,x:te,y:le}),qe)){qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",K,te,le,et.numFeatures,et.numPoints,et.numSimplified),console.timeEnd("creation"));var ht="z"+K;this.stats[ht]=(this.stats[ht]||0)+1,this.total++}if(et.source=Oe,pe){if(K===Ie.maxZoom||K===pe)continue;var Zt=1<<pe-K;if(te!==Math.floor(ke/Zt)||le!==Math.floor(ge/Zt))continue}else if(K===Ie.indexMaxZoom||et.numPoints<=Ie.indexMaxPoints)continue;if(et.source=null,Oe.length!==0){qe>1&&console.time("clipping");var an,sn,Rn,or,fr,ur,vn=.5*Ie.buffer/Ie.extent,Nr=.5-vn,Gr=.5+vn,ji=1+vn;an=sn=Rn=or=null,fr=_t(Oe,Qe,te-vn,te+Gr,0,et.minX,et.maxX,Ie),ur=_t(Oe,Qe,te+Nr,te+ji,0,et.minX,et.maxX,Ie),Oe=null,fr&&(an=_t(fr,Qe,le-vn,le+Gr,1,et.minY,et.maxY,Ie),sn=_t(fr,Qe,le+Nr,le+ji,1,et.minY,et.maxY,Ie),fr=null),ur&&(Rn=_t(ur,Qe,le-vn,le+Gr,1,et.minY,et.maxY,Ie),or=_t(ur,Qe,le+Nr,le+ji,1,et.minY,et.maxY,Ie),ur=null),qe>1&&console.timeEnd("clipping"),ze.push(an||[],K+1,2*te,2*le),ze.push(sn||[],K+1,2*te,2*le+1),ze.push(Rn||[],K+1,2*te+1,2*le),ze.push(or||[],K+1,2*te+1,2*le+1)}}},_n.prototype.getTile=function(Oe,K,te){var le=this.options,pe=le.extent,ke=le.debug;if(Oe<0||Oe>24)return null;var ge=1<<Oe,ze=Pn(Oe,K=(K%ge+ge)%ge,te);if(this.tiles[ze])return Vn(this.tiles[ze],pe);ke>1&&console.log("drilling down to z%d-%d-%d",Oe,K,te);for(var Ie,qe=Oe,Qe=K,ot=te;!Ie&&qe>0;)qe--,Qe=Math.floor(Qe/2),ot=Math.floor(ot/2),Ie=this.tiles[Pn(qe,Qe,ot)];return Ie&&Ie.source?(ke>1&&console.log("found parent tile z%d-%d-%d",qe,Qe,ot),ke>1&&console.time("drilling down"),this.splitTile(Ie.source,qe,Qe,ot,Oe,K,te),ke>1&&console.timeEnd("drilling down"),this.tiles[ze]?Vn(this.tiles[ze],pe):null):null};class Hs extends y{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(K,te){return u._(this,void 0,void 0,function*(){const le=K.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const pe=this._geoJSONIndex.getTile(le.z,le.x,le.y);if(!pe)return null;const ke=new class{constructor(ze){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.W,this.length=ze.length,this._features=ze}feature(ze){return new class{constructor(Ie){this._feature=Ie,this.extent=u.W,this.type=Ie.type,this.properties=Ie.tags,"id"in Ie&&!isNaN(Ie.id)&&(this.id=parseInt(Ie.id,10))}loadGeometry(){if(this._feature.type===1){const Ie=[];for(const qe of this._feature.geometry)Ie.push([new u.P(qe[0],qe[1])]);return Ie}{const Ie=[];for(const qe of this._feature.geometry){const Qe=[];for(const ot of qe)Qe.push(new u.P(ot[0],ot[1]));Ie.push(Qe)}return Ie}}toGeoJSON(Ie,qe,Qe){return M.call(this,Ie,qe,Qe)}}(this._features[ze])}}(pe.features);let ge=Be(ke);return ge.byteOffset===0&&ge.byteLength===ge.buffer.byteLength||(ge=new Uint8Array(ge)),{vectorTile:ke,rawData:ge.buffer}})}loadData(K){return u._(this,void 0,void 0,function*(){var te;(te=this._pendingRequest)===null||te===void 0||te.abort();const le=!!(K&&K.request&&K.request.collectResourceTiming)&&new u.bs(K.request);this._pendingRequest=new AbortController;try{let pe=yield this.loadGeoJSON(K,this._pendingRequest);if(delete this._pendingRequest,typeof pe!="object")throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(A(pe,!0),K.filter){const ge=u.by(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ge.result==="error")throw new Error(ge.value.map(Ie=>`${Ie.key}: ${Ie.message}`).join(", "));pe={type:"FeatureCollection",features:pe.features.filter(Ie=>ge.value.evaluate({zoom:0},Ie))}}this._geoJSONIndex=K.cluster?new Ge(function({superclusterOptions:ge,clusterProperties:ze}){if(!ze||!ge)return ge;const Ie={},qe={},Qe={accumulated:null,zoom:0},ot={properties:null},et=Object.keys(ze);for(const ht of et){const[Zt,an]=ze[ht],sn=u.by(an),Rn=u.by(typeof Zt=="string"?[Zt,["accumulated"],["get",ht]]:Zt);Ie[ht]=sn.value,qe[ht]=Rn.value}return ge.map=ht=>{ot.properties=ht;const Zt={};for(const an of et)Zt[an]=Ie[an].evaluate(Qe,ot);return Zt},ge.reduce=(ht,Zt)=>{ot.properties=Zt;for(const an of et)Qe.accumulated=ht[an],ht[an]=qe[an].evaluate(Qe,ot)},ge}(K)).load(pe.features):function(ge,ze){return new _n(ge,ze)}(pe,K.geojsonVtOptions),this.loaded={};const ke={};if(le){const ge=le.finish();ge&&(ke.resourceTiming={},ke.resourceTiming[K.source]=JSON.parse(JSON.stringify(ge)))}return ke}catch(pe){if(delete this._pendingRequest,u.bz(pe))return{abandoned:!0};throw pe}})}reloadTile(K){const te=this.loaded;return te&&te[K.uid]?super.reloadTile(K):this.loadTile(K)}loadGeoJSON(K,te){return u._(this,void 0,void 0,function*(){const{promoteId:le}=K;if(K.request){const pe=yield u.h(K.request,te);return this._dataUpdateable=Zo(pe.data,le)?Tn(pe.data,le):void 0,pe.data}if(typeof K.data=="string")try{const pe=JSON.parse(K.data);return this._dataUpdateable=Zo(pe,le)?Tn(pe,le):void 0,pe}catch{throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`)}if(!K.dataDiff)throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${K.source}`);return function(pe,ke,ge){var ze,Ie,qe,Qe;if(ke.removeAll&&pe.clear(),ke.remove)for(const ot of ke.remove)pe.delete(ot);if(ke.add)for(const ot of ke.add){const et=Cr(ot,ge);et!=null&&pe.set(et,ot)}if(ke.update)for(const ot of ke.update){let et=pe.get(ot.id);if(et==null)continue;const ht=!ot.removeAllProperties&&(((ze=ot.removeProperties)===null||ze===void 0?void 0:ze.length)>0||((Ie=ot.addOrUpdateProperties)===null||Ie===void 0?void 0:Ie.length)>0);if((ot.newGeometry||ot.removeAllProperties||ht)&&(et=Object.assign({},et),pe.set(ot.id,et),ht&&(et.properties=Object.assign({},et.properties))),ot.newGeometry&&(et.geometry=ot.newGeometry),ot.removeAllProperties)et.properties={};else if(((qe=ot.removeProperties)===null||qe===void 0?void 0:qe.length)>0)for(const Zt of ot.removeProperties)Object.prototype.hasOwnProperty.call(et.properties,Zt)&&delete et.properties[Zt];if(((Qe=ot.addOrUpdateProperties)===null||Qe===void 0?void 0:Qe.length)>0)for(const{key:Zt,value:an}of ot.addOrUpdateProperties)et.properties[Zt]=an}}(this._dataUpdateable,K.dataDiff,le),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(K){return u._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(K){return this._geoJSONIndex.getClusterExpansionZoom(K.clusterId)}getClusterChildren(K){return this._geoJSONIndex.getChildren(K.clusterId)}getClusterLeaves(K){return this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset)}}class qr{constructor(K){this.self=K,this.actor=new u.C(K),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(te,le)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=le},this.self.addProtocol=u.bf,this.self.removeProtocol=u.bg,this.self.registerRTLTextPlugin=te=>{if(u.bA.isParsed())throw new Error("RTL text plugin already registered.");u.bA.setMethods(te)},this.actor.registerMessageHandler("LDT",(te,le)=>this._getDEMWorkerSource(te,le.source).loadTile(le)),this.actor.registerMessageHandler("RDT",(te,le)=>u._(this,void 0,void 0,function*(){this._getDEMWorkerSource(te,le.source).removeTile(le)})),this.actor.registerMessageHandler("GCEZ",(te,le)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(te,le.type,le.source).getClusterExpansionZoom(le)})),this.actor.registerMessageHandler("GCC",(te,le)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(te,le.type,le.source).getClusterChildren(le)})),this.actor.registerMessageHandler("GCL",(te,le)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(te,le.type,le.source).getClusterLeaves(le)})),this.actor.registerMessageHandler("LD",(te,le)=>this._getWorkerSource(te,le.type,le.source).loadData(le)),this.actor.registerMessageHandler("LT",(te,le)=>this._getWorkerSource(te,le.type,le.source).loadTile(le)),this.actor.registerMessageHandler("RT",(te,le)=>this._getWorkerSource(te,le.type,le.source).reloadTile(le)),this.actor.registerMessageHandler("AT",(te,le)=>this._getWorkerSource(te,le.type,le.source).abortTile(le)),this.actor.registerMessageHandler("RMT",(te,le)=>this._getWorkerSource(te,le.type,le.source).removeTile(le)),this.actor.registerMessageHandler("RS",(te,le)=>u._(this,void 0,void 0,function*(){if(!this.workerSources[te]||!this.workerSources[te][le.type]||!this.workerSources[te][le.type][le.source])return;const pe=this.workerSources[te][le.type][le.source];delete this.workerSources[te][le.type][le.source],pe.removeSource!==void 0&&pe.removeSource(le)})),this.actor.registerMessageHandler("RM",te=>u._(this,void 0,void 0,function*(){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te]})),this.actor.registerMessageHandler("SR",(te,le)=>u._(this,void 0,void 0,function*(){this.referrer=le})),this.actor.registerMessageHandler("SRPS",(te,le)=>this._syncRTLPluginState(te,le)),this.actor.registerMessageHandler("IS",(te,le)=>u._(this,void 0,void 0,function*(){this.self.importScripts(le)})),this.actor.registerMessageHandler("SI",(te,le)=>this._setImages(te,le)),this.actor.registerMessageHandler("UL",(te,le)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(te).update(le.layers,le.removedIds)})),this.actor.registerMessageHandler("SL",(te,le)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(te).replace(le)}))}_setImages(K,te){return u._(this,void 0,void 0,function*(){this.availableImages[K]=te;for(const le in this.workerSources[K]){const pe=this.workerSources[K][le];for(const ke in pe)pe[ke].availableImages=te}})}_syncRTLPluginState(K,te){return u._(this,void 0,void 0,function*(){if(u.bA.isParsed())return u.bA.getState();if(te.pluginStatus!=="loading")return u.bA.setState(te),te;const le=te.pluginURL;if(this.self.importScripts(le),u.bA.isParsed()){const pe={pluginStatus:"loaded",pluginURL:le};return u.bA.setState(pe),pe}throw u.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${le}`)})}_getAvailableImages(K){let te=this.availableImages[K];return te||(te=[]),te}_getLayerIndex(K){let te=this.layerIndexes[K];return te||(te=this.layerIndexes[K]=new l),te}_getWorkerSource(K,te,le){if(this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][te]||(this.workerSources[K][te]={}),!this.workerSources[K][te][le]){const pe={sendAsync:(ke,ge)=>(ke.targetMapId=K,this.actor.sendAsync(ke,ge))};switch(te){case"vector":this.workerSources[K][te][le]=new y(pe,this._getLayerIndex(K),this._getAvailableImages(K));break;case"geojson":this.workerSources[K][te][le]=new Hs(pe,this._getLayerIndex(K),this._getAvailableImages(K));break;default:this.workerSources[K][te][le]=new this.externalWorkerSourceTypes[te](pe,this._getLayerIndex(K),this._getAvailableImages(K))}}return this.workerSources[K][te][le]}_getDEMWorkerSource(K,te){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][te]||(this.demWorkerSources[K][te]=new _),this.demWorkerSources[K][te]}}return u.i(self)&&(self.worker=new qr(self)),qr}),i("index",["exports","./shared"],function(u,l){var p="4.1.3";let g,x;const y={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:S=>new Promise((a,d)=>{const v=requestAnimationFrame(a);S.signal.addEventListener("abort",()=>{cancelAnimationFrame(v),d(l.c())})}),getImageData(S,a=0){return this.getImageCanvasContext(S).getImageData(-a,-a,S.width+2*a,S.height+2*a)},getImageCanvasContext(S){const a=window.document.createElement("canvas"),d=a.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return a.width=S.width,a.height=S.height,d.drawImage(S,0,0,S.width,S.height),d},resolveURL:S=>(g||(g=document.createElement("a")),g.href=S,g.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(x==null&&(x=matchMedia("(prefers-reduced-motion: reduce)")),x.matches)}};class _{static testProp(a){if(!_.docStyle)return a[0];for(let d=0;d<a.length;d++)if(a[d]in _.docStyle)return a[d];return a[0]}static create(a,d,v){const w=window.document.createElement(a);return d!==void 0&&(w.className=d),v&&v.appendChild(w),w}static createNS(a,d){return window.document.createElementNS(a,d)}static disableDrag(){_.docStyle&&_.selectProp&&(_.userSelect=_.docStyle[_.selectProp],_.docStyle[_.selectProp]="none")}static enableDrag(){_.docStyle&&_.selectProp&&(_.docStyle[_.selectProp]=_.userSelect)}static setTransform(a,d){a.style[_.transformProp]=d}static addEventListener(a,d,v,w={}){a.addEventListener(d,v,"passive"in w?w:w.capture)}static removeEventListener(a,d,v,w={}){a.removeEventListener(d,v,"passive"in w?w:w.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",_.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",_.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",_.suppressClickInternal,!0)},0)}static getScale(a){const d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}static getPoint(a,d,v){const w=d.boundingClientRect;return new l.P((v.clientX-w.left)/d.x-a.clientLeft,(v.clientY-w.top)/d.y-a.clientTop)}static mousePos(a,d){const v=_.getScale(a);return _.getPoint(a,v,d)}static touchPos(a,d){const v=[],w=_.getScale(a);for(let C=0;C<d.length;C++)v.push(_.getPoint(a,w,d[C]));return v}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}_.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,_.selectProp=_.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),_.transformProp=_.testProp(["transform","WebkitTransform"]);const T={supported:!1,testSupport:function(S){!M&&A&&(k?R(S):P=S)}};let P,A,M=!1,k=!1;function R(S){const a=S.createTexture();S.bindTexture(S.TEXTURE_2D,a);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,A),S.isContextLost())return;T.supported=!0}catch{}S.deleteTexture(a),M=!0}var z;typeof document<"u"&&(A=document.createElement("img"),A.onload=function(){P&&R(P),P=null,k=!0},A.onerror=function(){M=!0,P=null},A.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(S){let a,d,v,w;S.resetRequestQueue=()=>{a=[],d=0,v=0,w={}},S.addThrottleControl=Z=>{const Q=v++;return w[Q]=Z,Q},S.removeThrottleControl=Z=>{delete w[Z],B()},S.getImage=(Z,Q,se=!0)=>new Promise((ue,ye)=>{T.supported&&(Z.headers||(Z.headers={}),Z.headers.accept="image/webp,*/*"),l.e(Z,{type:"image"}),a.push({abortController:Q,requestParameters:Z,supportImageRefresh:se,state:"queued",onError:Le=>{ye(Le)},onSuccess:Le=>{ue(Le)}}),B()});const C=Z=>l._(this,void 0,void 0,function*(){Z.state="running";const{requestParameters:Q,supportImageRefresh:se,onError:ue,onSuccess:ye,abortController:Le}=Z,Pe=se===!1&&!l.i(self)&&!l.g(Q.url)&&(!Q.headers||Object.keys(Q.headers).reduce((Ke,at)=>Ke&&at==="accept",!0));d++;const Me=Pe?j(Q,Le):l.m(Q,Le);try{const Ke=yield Me;delete Z.abortController,Z.state="completed",Ke.data instanceof HTMLImageElement||l.b(Ke.data)?ye(Ke):Ke.data&&ye({data:yield(Se=Ke.data,typeof createImageBitmap=="function"?l.d(Se):l.f(Se)),cacheControl:Ke.cacheControl,expires:Ke.expires})}catch(Ke){delete Z.abortController,ue(Ke)}finally{d--,B()}var Se}),B=()=>{const Z=(()=>{for(const Q of Object.keys(w))if(w[Q]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let Q=d;Q<Z&&a.length>0;Q++){const se=a.shift();se.abortController.signal.aborted?Q--:C(se)}},j=(Z,Q)=>new Promise((se,ue)=>{const ye=new Image,Le=Z.url,Pe=Z.credentials;Pe&&Pe==="include"?ye.crossOrigin="use-credentials":(Pe&&Pe==="same-origin"||!l.s(Le))&&(ye.crossOrigin="anonymous"),Q.signal.addEventListener("abort",()=>{ye.src="",ue(l.c())}),ye.fetchPriority="high",ye.onload=()=>{ye.onerror=ye.onload=null,se({data:ye})},ye.onerror=()=>{ye.onerror=ye.onload=null,Q.signal.aborted||ue(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ye.src=Le})}(z||(z={})),z.resetRequestQueue();class D{constructor(a){this._transformRequestFn=a}transformRequest(a,d){return this._transformRequestFn&&this._transformRequestFn(a,d)||{url:a}}normalizeSpriteURL(a,d,v){const w=function(C){const B=C.match(U);if(!B)throw new Error(`Unable to parse URL "${C}"`);return{protocol:B[1],authority:B[2],path:B[3]||"/",params:B[4]?B[4].split("&"):[]}}(a);return w.path+=`${d}${v}`,function(C){const B=C.params.length?`?${C.params.join("&")}`:"";return`${C.protocol}://${C.authority}${C.path}${B}`}(w)}setTransformRequest(a){this._transformRequestFn=a}}const U=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function V(S){var a=new l.A(3);return a[0]=S[0],a[1]=S[1],a[2]=S[2],a}var G,H=function(S,a,d){return S[0]=a[0]-d[0],S[1]=a[1]-d[1],S[2]=a[2]-d[2],S};G=new l.A(3),l.A!=Float32Array&&(G[0]=0,G[1]=0,G[2]=0);var J=function(S){var a=S[0],d=S[1];return a*a+d*d};function Y(S){const a=[];if(typeof S=="string")a.push({id:"default",url:S});else if(S&&S.length>0){const d=[];for(const{id:v,url:w}of S){const C=`${v}${w}`;d.indexOf(C)===-1&&(d.push(C),a.push({id:v,url:w}))}}return a}(function(){var S=new l.A(2);l.A!=Float32Array&&(S[0]=0,S[1]=0)})();class X{constructor(a,d,v,w){this.context=a,this.format=v,this.texture=a.gl.createTexture(),this.update(d,w)}update(a,d,v){const{width:w,height:C}=a,B=!(this.size&&this.size[0]===w&&this.size[1]===C||v),{context:j}=this,{gl:Z}=j;if(this.useMipmap=!!(d&&d.useMipmap),Z.bindTexture(Z.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===Z.RGBA&&(!d||d.premultiply!==!1)),B)this.size=[w,C],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||l.b(a)?Z.texImage2D(Z.TEXTURE_2D,0,this.format,this.format,Z.UNSIGNED_BYTE,a):Z.texImage2D(Z.TEXTURE_2D,0,this.format,w,C,0,this.format,Z.UNSIGNED_BYTE,a.data);else{const{x:Q,y:se}=v||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||l.b(a)?Z.texSubImage2D(Z.TEXTURE_2D,0,Q,se,Z.RGBA,Z.UNSIGNED_BYTE,a):Z.texSubImage2D(Z.TEXTURE_2D,0,Q,se,w,C,Z.RGBA,Z.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Z.generateMipmap(Z.TEXTURE_2D)}bind(a,d,v){const{context:w}=this,{gl:C}=w;C.bindTexture(C.TEXTURE_2D,this.texture),v!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=C.LINEAR),a!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,a),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,v||a),this.filter=a),d!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,d),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function ee(S){const{userImage:a}=S;return!!(a&&a.render&&a.render())&&(S.data.replace(new Uint8Array(a.data.buffer)),!0)}class ce extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:d,promiseResolve:v}of this.requestors)v(this._getImagesForIds(d));this.requestors=[]}}getImage(a){const d=this.images[a];if(d&&!d.data&&d.spriteData){const v=d.spriteData;d.data=new l.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),d.spriteData=null}return d}addImage(a,d){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,d)&&(this.images[a]=d)}_validate(a,d){let v=!0;const w=d.data||d.spriteData;return this._validateStretch(d.stretchX,w&&w.width)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,w&&w.height)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "content" value`))),v=!1),v}_validateStretch(a,d){if(!a)return!0;let v=0;for(const w of a){if(w[0]<v||w[1]<w[0]||d<w[1])return!1;v=w[1]}return!0}_validateContent(a,d){if(!a)return!0;if(a.length!==4)return!1;const v=d.spriteData,w=v&&v.width||d.data.width,C=v&&v.height||d.data.height;return!(a[0]<0||w<a[0]||a[1]<0||C<a[1]||a[2]<0||w<a[2]||a[3]<0||C<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,d,v=!0){const w=this.getImage(a);if(v&&(w.data.width!==d.data.width||w.data.height!==d.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=w.version+1,this.images[a]=d,this.updatedImages[a]=!0}removeImage(a){const d=this.images[a];delete this.images[a],delete this.patterns[a],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((d,v)=>{let w=!0;if(!this.isLoaded())for(const C of a)this.images[C]||(w=!1);this.isLoaded()||w?d(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:d})})}_getImagesForIds(a){const d={};for(const v of a){let w=this.getImage(v);w||(this.fire(new l.k("styleimagemissing",{id:v})),w=this.getImage(v)),w?d[v]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:l.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:a,height:d}=this.atlasImage;return{width:a,height:d}}getPattern(a){const d=this.patterns[a],v=this.getImage(a);if(!v)return null;if(d&&d.position.version===v.version)return d.position;if(d)d.position.version=v.version;else{const w={w:v.data.width+2,h:v.data.height+2,x:0,y:0},C=new l.I(w,v);this.patterns[a]={bin:w,position:C}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const d=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new X(a,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const C in this.patterns)a.push(this.patterns[C].bin);const{w:d,h:v}=l.p(a),w=this.atlasImage;w.resize({width:d||1,height:v||1});for(const C in this.patterns){const{bin:B}=this.patterns[C],j=B.x+1,Z=B.y+1,Q=this.getImage(C).data,se=Q.width,ue=Q.height;l.R.copy(Q,w,{x:0,y:0},{x:j,y:Z},{width:se,height:ue}),l.R.copy(Q,w,{x:0,y:ue-1},{x:j,y:Z-1},{width:se,height:1}),l.R.copy(Q,w,{x:0,y:0},{x:j,y:Z+ue},{width:se,height:1}),l.R.copy(Q,w,{x:se-1,y:0},{x:j-1,y:Z},{width:1,height:ue}),l.R.copy(Q,w,{x:0,y:0},{x:j+se,y:Z},{width:1,height:ue})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const d of a){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const v=this.getImage(d);v||l.w(`Image with ID: "${d}" was not found`),ee(v)&&this.updateImage(d,v)}}}const oe=1e20;function we(S,a,d,v,w,C,B,j,Z){for(let Q=a;Q<a+v;Q++)Ne(S,d*C+Q,C,w,B,j,Z);for(let Q=d;Q<d+w;Q++)Ne(S,Q*C+a,1,v,B,j,Z)}function Ne(S,a,d,v,w,C,B){C[0]=0,B[0]=-oe,B[1]=oe,w[0]=S[a];for(let j=1,Z=0,Q=0;j<v;j++){w[j]=S[a+j*d];const se=j*j;do{const ue=C[Z];Q=(w[j]-w[ue]+se-ue*ue)/(j-ue)/2}while(Q<=B[Z]&&--Z>-1);Z++,C[Z]=j,B[Z]=Q,B[Z+1]=oe}for(let j=0,Z=0;j<v;j++){for(;B[Z+1]<j;)Z++;const Q=C[Z],se=j-Q;S[a+j*d]=w[Q]+se*se}}class Be{constructor(a,d){this.requestManager=a,this.localIdeographFontFamily=d,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return l._(this,void 0,void 0,function*(){const d=[];for(const C in a)for(const B of a[C])d.push(this._getAndCacheGlyphsPromise(C,B));const v=yield Promise.all(d),w={};for(const{stack:C,id:B,glyph:j}of v)w[C]||(w[C]={}),w[C][B]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics};return w})}_getAndCacheGlyphsPromise(a,d){return l._(this,void 0,void 0,function*(){let v=this.entries[a];v||(v=this.entries[a]={glyphs:{},requests:{},ranges:{}});let w=v.glyphs[d];if(w!==void 0)return{stack:a,id:d,glyph:w};if(w=this._tinySDF(v,a,d),w)return v.glyphs[d]=w,{stack:a,id:d,glyph:w};const C=Math.floor(d/256);if(256*C>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[C])return{stack:a,id:d,glyph:w};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[C]){const j=Be.loadGlyphRange(a,C,this.url,this.requestManager);v.requests[C]=j}const B=yield v.requests[C];for(const j in B)this._doesCharSupportLocalGlyph(+j)||(v.glyphs[+j]=B[+j]);return v.ranges[C]=!0,{stack:a,id:d,glyph:B[d]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](a)||l.u["Hangul Syllables"](a)||l.u.Hiragana(a)||l.u.Katakana(a))}_tinySDF(a,d,v){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(v))return;let C=a.tinySDF;if(!C){let j="400";/bold/i.test(d)?j="900":/medium/i.test(d)?j="500":/light/i.test(d)&&(j="200"),C=a.tinySDF=new Be.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:w,fontWeight:j})}const B=C.draw(String.fromCharCode(v));return{id:v,bitmap:new l.o({width:B.width||60,height:B.height||60},B.data),metrics:{width:B.glyphWidth/2||24,height:B.glyphHeight/2||24,left:B.glyphLeft/2+.5||0,top:B.glyphTop/2-27.5||-8,advance:B.glyphAdvance/2||24,isDoubleResolution:!0}}}}Be.loadGlyphRange=function(S,a,d,v){return l._(this,void 0,void 0,function*(){const w=256*a,C=w+255,B=v.transformRequest(d.replace("{fontstack}",S).replace("{range}",`${w}-${C}`),"Glyphs"),j=yield l.l(B,new AbortController);if(!j||!j.data)throw new Error(`Could not load glyph range. range: ${a}, ${w}-${C}`);const Z={};for(const Q of l.n(j.data))Z[Q.id]=Q;return Z})},Be.TinySDF=class{constructor({fontSize:S=24,buffer:a=3,radius:d=8,cutoff:v=.25,fontFamily:w="sans-serif",fontWeight:C="normal",fontStyle:B="normal"}={}){this.buffer=a,this.cutoff=v,this.radius=d;const j=this.size=S+4*a,Z=this._createCanvas(j),Q=this.ctx=Z.getContext("2d",{willReadFrequently:!0});Q.font=`${B} ${C} ${S}px ${w}`,Q.textBaseline="alphabetic",Q.textAlign="left",Q.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(S){const a=document.createElement("canvas");return a.width=a.height=S,a}draw(S){const{width:a,actualBoundingBoxAscent:d,actualBoundingBoxDescent:v,actualBoundingBoxLeft:w,actualBoundingBoxRight:C}=this.ctx.measureText(S),B=Math.ceil(d),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(C-w))),Z=Math.min(this.size-this.buffer,B+Math.ceil(v)),Q=j+2*this.buffer,se=Z+2*this.buffer,ue=Math.max(Q*se,0),ye=new Uint8ClampedArray(ue),Le={data:ye,width:Q,height:se,glyphWidth:j,glyphHeight:Z,glyphTop:B,glyphLeft:0,glyphAdvance:a};if(j===0||Z===0)return Le;const{ctx:Pe,buffer:Me,gridInner:Se,gridOuter:Ke}=this;Pe.clearRect(Me,Me,j,Z),Pe.fillText(S,Me,Me+B);const at=Pe.getImageData(Me,Me,j,Z);Ke.fill(oe,0,ue),Se.fill(0,0,ue);for(let Fe=0;Fe<Z;Fe++)for(let Je=0;Je<j;Je++){const ut=at.data[4*(Fe*j+Je)+3]/255;if(ut===0)continue;const ft=(Fe+Me)*Q+Je+Me;if(ut===1)Ke[ft]=0,Se[ft]=oe;else{const mt=.5-ut;Ke[ft]=mt>0?mt*mt:0,Se[ft]=mt<0?mt*mt:0}}we(Ke,0,0,Q,se,Q,this.f,this.v,this.z),we(Se,Me,Me,j,Z,Q,this.f,this.v,this.z);for(let Fe=0;Fe<ue;Fe++){const Je=Math.sqrt(Ke[Fe])-Math.sqrt(Se[Fe]);ye[Fe]=Math.round(255-255*(Je/this.radius+this.cutoff))}return Le}};class De{constructor(){this.specification=l.v.light.position}possiblyEvaluate(a,d){return l.y(a.expression.evaluate(d))}interpolate(a,d,v){return{x:l.z.number(a.x,d.x,v),y:l.z.number(a.y,d.y,v),z:l.z.number(a.z,d.z,v)}}}let Ae;class ve extends l.E{constructor(a){super(),Ae=Ae||new l.q({anchor:new l.D(l.v.light.anchor),position:new De,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Ae),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,d={}){if(!this._validate(l.r,a,d))for(const v in a){const w=a[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),w):this._transitionable.setValue(v,w)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,v){return(!v||v.validate!==!1)&&l.t(this,a.call(l.x,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}class he{constructor(a,d){this.width=a,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,d){const v=a.join(",")+String(d);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(a,d)),this.dashEntry[v]}getDashRanges(a,d,v){const w=[];let C=a.length%2==1?-a[a.length-1]*v:0,B=a[0]*v,j=!0;w.push({left:C,right:B,isDash:j,zeroLength:a[0]===0});let Z=a[0];for(let Q=1;Q<a.length;Q++){j=!j;const se=a[Q];C=Z*v,Z+=se,B=Z*v,w.push({left:C,right:B,isDash:j,zeroLength:se===0})}return w}addRoundDash(a,d,v){const w=d/2;for(let C=-v;C<=v;C++){const B=this.width*(this.nextRow+v+C);let j=0,Z=a[j];for(let Q=0;Q<this.width;Q++){Q/Z.right>1&&(Z=a[++j]);const se=Math.abs(Q-Z.left),ue=Math.abs(Q-Z.right),ye=Math.min(se,ue);let Le;const Pe=C/v*(w+1);if(Z.isDash){const Me=w-Math.abs(Pe);Le=Math.sqrt(ye*ye+Me*Me)}else Le=w-Math.sqrt(ye*ye+Pe*Pe);this.data[B+Q]=Math.max(0,Math.min(255,Le+128))}}}addRegularDash(a){for(let j=a.length-1;j>=0;--j){const Z=a[j],Q=a[j+1];Z.zeroLength?a.splice(j,1):Q&&Q.isDash===Z.isDash&&(Q.left=Z.left,a.splice(j,1))}const d=a[0],v=a[a.length-1];d.isDash===v.isDash&&(d.left=v.left-this.width,v.right=d.right+this.width);const w=this.width*this.nextRow;let C=0,B=a[C];for(let j=0;j<this.width;j++){j/B.right>1&&(B=a[++C]);const Z=Math.abs(j-B.left),Q=Math.abs(j-B.right),se=Math.min(Z,Q);this.data[w+j]=Math.max(0,Math.min(255,(B.isDash?se:-se)+128))}}addDash(a,d){const v=d?7:0,w=2*v+1;if(this.nextRow+w>this.height)return l.w("LineAtlas out of space"),null;let C=0;for(let j=0;j<a.length;j++)C+=a[j];if(C!==0){const j=this.width/C,Z=this.getDashRanges(a,this.width,j);d?this.addRoundDash(Z,j,v):this.addRegularDash(Z)}const B={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:C};return this.nextRow+=w,this.dirty=!0,B}bind(a){const d=a.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const xe="maplibre_preloaded_worker_pool";class Ee{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<Ee.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[xe]}numActive(){return Object.keys(this.active).length}}const Ge=Math.floor(y.hardwareConcurrency/2);let $e,be;function He(){return $e||($e=new Ee),$e}Ee.workerCount=l.B(globalThis)?Math.max(Math.min(Ge,3),1):1;class it{constructor(a,d){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=d;const v=this.workerPool.acquire(d);for(let w=0;w<v.length;w++){const C=new l.C(v[w],d);C.name=`Worker ${w}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,d){const v=[];for(const w of this.actors)v.push(w.sendAsync({type:a,data:d}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,d){for(const v of this.actors)v.registerMessageHandler(a,d)}}function ct(){return be||(be=new it(He(),l.G),be.registerMessageHandler("GR",(S,a,d)=>l.m(a,d))),be}function xt(S,a){const d=l.F();return l.H(d,d,[1,1,0]),l.J(d,d,[.5*S.width,.5*S.height,1]),l.K(d,d,S.calculatePosMatrix(a.toUnwrapped()))}function Dt(S,a,d,v,w,C){const B=function(ue,ye,Le){if(ue)for(const Pe of ue){const Me=ye[Pe];if(Me&&Me.source===Le&&Me.type==="fill-extrusion")return!0}else for(const Pe in ye){const Me=ye[Pe];if(Me.source===Le&&Me.type==="fill-extrusion")return!0}return!1}(w&&w.layers,a,S.id),j=C.maxPitchScaleFactor(),Z=S.tilesIn(v,j,B);Z.sort(Qt);const Q=[];for(const ue of Z)Q.push({wrappedTileID:ue.tileID.wrapped().key,queryResults:ue.tile.queryRenderedFeatures(a,d,S._state,ue.queryGeometry,ue.cameraQueryGeometry,ue.scale,w,C,j,xt(S.transform,ue.tileID))});const se=function(ue){const ye={},Le={};for(const Pe of ue){const Me=Pe.queryResults,Se=Pe.wrappedTileID,Ke=Le[Se]=Le[Se]||{};for(const at in Me){const Fe=Me[at],Je=Ke[at]=Ke[at]||{},ut=ye[at]=ye[at]||[];for(const ft of Fe)Je[ft.featureIndex]||(Je[ft.featureIndex]=!0,ut.push(ft))}}return ye}(Q);for(const ue in se)se[ue].forEach(ye=>{const Le=ye.feature,Pe=S.getFeatureState(Le.layer["source-layer"],Le.id);Le.source=Le.layer.source,Le.layer["source-layer"]&&(Le.sourceLayer=Le.layer["source-layer"]),Le.state=Pe});return se}function Qt(S,a){const d=S.tileID,v=a.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function Ft(S,a,d){return l._(this,void 0,void 0,function*(){let v=S;if(S.url?v=(yield l.h(a.transformRequest(S.url,"Source"),d)).data:yield y.frameAsync(d),!v)return null;const w=l.L(l.e(v,S),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(w.vectorLayerIds=v.vector_layers.map(C=>C.id)),w})}class Kt{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof l.M?new l.M(a.lng,a.lat):l.M.convert(a),this}setSouthWest(a){return this._sw=a instanceof l.M?new l.M(a.lng,a.lat):l.M.convert(a),this}extend(a){const d=this._sw,v=this._ne;let w,C;if(a instanceof l.M)w=a,C=a;else{if(!(a instanceof Kt))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Kt.convert(a)):this.extend(l.M.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(l.M.convert(a)):this;if(w=a._sw,C=a._ne,!w||!C)return this}return d||v?(d.lng=Math.min(w.lng,d.lng),d.lat=Math.min(w.lat,d.lat),v.lng=Math.max(C.lng,v.lng),v.lat=Math.max(C.lat,v.lat)):(this._sw=new l.M(w.lng,w.lat),this._ne=new l.M(C.lng,C.lat)),this}getCenter(){return new l.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.M(this.getWest(),this.getNorth())}getSouthEast(){return new l.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:v}=l.M.convert(a);let w=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&w}static convert(a){return a instanceof Kt?a:a&&new Kt(a)}static fromLngLat(a,d=0){const v=360*d/40075017,w=v/Math.cos(Math.PI/180*a.lat);return new Kt(new l.M(a.lng-w,a.lat-v),new l.M(a.lng+w,a.lat+v))}}class Gt{constructor(a,d,v){this.bounds=Kt.convert(this.validateBounds(a)),this.minzoom=d||0,this.maxzoom=v||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const d=Math.pow(2,a.z),v=Math.floor(l.N(this.bounds.getWest())*d),w=Math.floor(l.O(this.bounds.getNorth())*d),C=Math.ceil(l.N(this.bounds.getEast())*d),B=Math.ceil(l.O(this.bounds.getSouth())*d);return a.x>=v&&a.x<C&&a.y>=w&&a.y<B}}class Tr extends l.E{constructor(a,d,v,w){if(super(),this.id=a,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.L(d,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(l.e(this,a),a.bounds&&(this.tileBounds=new Gt(a.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new l.j(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(a){return l._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(d,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};v.request.collectResourceTiming=this._collectResourceTiming;let w="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((C,B)=>{a.reloadPromise={resolve:C,reject:B}})}else a.actor=this.dispatcher.getActor(),w="LT";a.abortController=new AbortController;try{const C=yield a.actor.sendAsync({type:w,data:v},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,C)}catch(C){if(delete a.abortController,a.aborted)return;if(C&&C.status!==404)throw C;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,d){if(d&&d.resourceTiming&&(a.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&a.setExpiryData(d),a.loadVectorData(d,this.map.painter),a.reloadPromise){const v=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(v.resolve).catch(v.reject)}}abortTile(a){return l._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return l._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class rt extends l.E{constructor(a,d,v,w){super(),this.id=a,this.dispatcher=v,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},d),l.e(this,l.L(d,["url","scheme","tileSize"]))}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,a&&(l.e(this,a),a.bounds&&(this.tileBounds=new Gt(a.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new l.j(a))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return l.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return l._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const v=yield z.getImage(this.map._requestManager.transformRequest(d,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&a.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const w=this.map.painter.context,C=w.gl,B=v.data;a.texture=this.map.painter.getTileTexture(B.width),a.texture?a.texture.update(B,{useMipmap:!0}):(a.texture=new X(w,B,C.RGBA,{useMipmap:!0}),a.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),w.extTextureFilterAnisotropic&&C.texParameterf(C.TEXTURE_2D,w.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,w.extTextureFilterAnisotropicMax)),a.state="loaded"}}catch(v){if(delete a.abortController,a.aborted)a.state="unloaded";else if(v)throw a.state="errored",v}})}abortTile(a){return l._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return l._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class lt extends rt{constructor(a,d,v,w){super(a,d,v,w),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(a){return l._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(d,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const w=yield z.getImage(v,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(w&&w.data){const C=w.data;this.map._refreshExpiredTiles&&w.cacheControl&&w.expires&&a.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const B=l.b(C)&&l.S()?C:yield this.readImageNow(C),j={type:this.type,uid:a.uid,source:this.id,rawImageData:B,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();const Z=yield a.actor.sendAsync({type:"LDT",data:j});a.dem=Z,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(w){if(delete a.abortController,a.aborted)a.state="unloaded";else if(w)throw a.state="errored",w}})}readImageNow(a){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.U()){const d=a.width+2,v=a.height+2;try{return new l.R({width:d,height:v},yield l.V(a,-1,-1,d,v))}catch{}}return y.getImageData(a,1)})}_getNeighboringTiles(a){const d=a.canonical,v=Math.pow(2,d.z),w=(d.x-1+v)%v,C=d.x===0?a.wrap-1:a.wrap,B=(d.x+1+v)%v,j=d.x+1===v?a.wrap+1:a.wrap,Z={};return Z[new l.Q(a.overscaledZ,C,d.z,w,d.y).key]={backfilled:!1},Z[new l.Q(a.overscaledZ,j,d.z,B,d.y).key]={backfilled:!1},d.y>0&&(Z[new l.Q(a.overscaledZ,C,d.z,w,d.y-1).key]={backfilled:!1},Z[new l.Q(a.overscaledZ,a.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},Z[new l.Q(a.overscaledZ,j,d.z,B,d.y-1).key]={backfilled:!1}),d.y+1<v&&(Z[new l.Q(a.overscaledZ,C,d.z,w,d.y+1).key]={backfilled:!1},Z[new l.Q(a.overscaledZ,a.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},Z[new l.Q(a.overscaledZ,j,d.z,B,d.y+1).key]={backfilled:!1}),Z}unloadTile(a){return l._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class gt extends l.E{constructor(a,d,v,w){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(w),this._data=d.data,this._options=l.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const C=l.W/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*C,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*C,extent:l.W,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:l.W,radius:(d.clusterRadius||50)*C,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=a.clusterRadius),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,d,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:d,offset:v}})}_updateWorkerData(a){return l._(this,void 0,void 0,function*(){const d=l.e({type:this.type},this.workerOptions);a?d.dataDiff=a:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(y.resolveURL(this._data),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:d});if(this._pendingLoads--,this._removed||v.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let w=null;v.resourceTiming&&v.resourceTiming[this.id]&&(w=v.resourceTiming[this.id].slice(0));const C={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&l.e(C,{resourceTiming:w}),this.fire(new l.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))}catch(v){if(this._pendingLoads--,this._removed)return void this.fire(new l.k("dataabort",{dataType:"source"}));this.fire(new l.j(v))}})}loaded(){return this._pendingLoads===0}loadTile(a){return l._(this,void 0,void 0,function*(){const d=a.actor?"RT":"LT";a.actor=this.actor;const v={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.abortController=new AbortController;const w=yield this.actor.sendAsync({type:d,data:v},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(w,this.map.painter,d==="RT")})}abortTile(a){return l._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return l._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var _t=l.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Pt extends l.E{constructor(a,d,v,w){super(),this.id=a,this.dispatcher=v,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=d}load(a){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield z.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,a&&(this.coordinates=a),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new l.j(d))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const d=a.map(l.Y.fromLngLat);this.tileID=function(w){let C=1/0,B=1/0,j=-1/0,Z=-1/0;for(const ye of w)C=Math.min(C,ye.x),B=Math.min(B,ye.y),j=Math.max(j,ye.x),Z=Math.max(Z,ye.y);const Q=Math.max(j-C,Z-B),se=Math.max(0,Math.floor(-Math.log(Q)/Math.LN2)),ue=Math.pow(2,se);return new l.a0(se,Math.floor((C+j)/2*ue),Math.floor((B+Z)/2*ue))}(d),this.minzoom=this.maxzoom=this.tileID.z;const v=d.map(w=>this.tileID.getTilePoint(w)._round());return this._boundsArray=new l.Z,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,l.W,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,l.W),this._boundsArray.emplaceBack(v[2].x,v[2].y,l.W,l.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=l.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new X(a,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(const w in this.tiles){const C=this.tiles[w];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,v=!0)}v&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class je extends Pt{constructor(a,d,v,w){super(a,d,v,w),this.roundZoom=!0,this.type="video",this.options=d}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const d of a.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield l.a2(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new l.j(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const d=this.video.seekable;a<d.start(0)||a>d.end(0)?this.fire(new l.j(new l.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=l.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new X(a,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(const w in this.tiles){const C=this.tiles[w];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,v=!0)}v&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class vt extends Pt{constructor(a,d,v,w){super(a,d,v,w),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(C=>!Array.isArray(C)||C.length!==2||C.some(B=>typeof B!="number"))||this.fire(new l.j(new l.a1(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.a1(`sources.${a}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new l.j(new l.a1(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.a1(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.a1(`sources.${a}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,v=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=l.$.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new X(d,this.canvas,v.RGBA,{premultiply:!0});let w=!1;for(const C in this.tiles){const B=this.tiles[C];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,w=!0)}w&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const St={},Lt=S=>{switch(S){case"geojson":return gt;case"image":return Pt;case"raster":return rt;case"raster-dem":return lt;case"vector":return Tr;case"video":return je;case"canvas":return vt}return St[S]},en="RTLPluginLoaded";class wn extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ct()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return l._(this,arguments,void 0,function*(d,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=y.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.k(en))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let gn=null;function bt(){return gn||(gn=new wn),gn}class Vn{constructor(a,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=l.a3(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const d=a+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,d,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(w,C){const B={};if(!C)return B;for(const j of w){const Z=j.layerIds.map(Q=>C.getLayer(Q)).filter(Boolean);if(Z.length!==0){j.layers=Z,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map(Q=>Z.filter(se=>se.id===Q)[0]));for(const Q of Z)B[Q.id]=j}}return B}(a.buckets,d.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const C=this.buckets[w];if(C instanceof l.a5){if(this.hasSymbolBuckets=!0,!v)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const C=this.buckets[w];if(C instanceof l.a5&&C.hasRTLText){this.hasRTLText=!0,bt().lazyLoad();break}}this.queryPadding=0;for(const w in this.buckets){const C=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(w).queryRadius(C))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new l.a4}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const v in this.buckets){const w=this.buckets[v];w.uploadPending()&&w.upload(a)}const d=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new X(a,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new X(a,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,d,v,w,C,B,j,Z,Q,se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:C,scale:B,tileSize:this.tileSize,pixelPosMatrix:se,transform:Z,params:j,queryPadding:this.queryPadding*Q},a,d,v):{}}querySourceFeatures(a,d){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const w=v.loadVTLayers(),C=d&&d.sourceLayer?d.sourceLayer:"",B=w._geojsonTileLayer||w[C];if(!B)return;const j=l.a6(d&&d.filter),{z:Z,x:Q,y:se}=this.tileID.canonical,ue={z:Z,x:Q,y:se};for(let ye=0;ye<B.length;ye++){const Le=B.feature(ye);if(j.needGeometry){const Se=l.a7(Le,!0);if(!j.filter(new l.a8(this.tileID.overscaledZ),Se,this.tileID.canonical))continue}else if(!j.filter(new l.a8(this.tileID.overscaledZ),Le))continue;const Pe=v.getId(Le,C),Me=new l.a9(Le,Z,Q,se,Pe);Me.tile=ue,a.push(Me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const d=this.expirationTime;if(a.cacheControl){const v=l.aa(a.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const v=Date.now();let w=!1;if(this.expirationTime>v)w=!1;else if(d)if(this.expirationTime<d)w=!0;else{const C=this.expirationTime-d;C?this.expirationTime=v+Math.max(C,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!d.style.hasLayer(w))continue;const C=this.buckets[w],B=C.layers[0].sourceLayer||"_geojsonTileLayer",j=v[B],Z=a[B];if(!j||!Z||Object.keys(Z).length===0)continue;C.update(Z,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Q=d&&d.style&&d.style.getLayer(w);Q&&(this.queryPadding=Math.max(this.queryPadding,Q.queryRadius(C)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<y.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=y.now()+a}setDependencies(a,d){const v={};for(const w of d)v[w]=!0;this.dependencies[a]=v}hasDependency(a,d){for(const v of a){const w=this.dependencies[v];if(w){for(const C of d)if(w[C])return!0}}return!1}}class _r{constructor(a,d){this.max=a,this.onRemove=d,this.reset()}reset(){for(const a in this.data)for(const d of this.data[a])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(a,d,v){const w=a.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const C={value:d,timeout:void 0};if(v!==void 0&&(C.timeout=setTimeout(()=>{this.remove(a,C)},v)),this.data[w].push(C),this.order.push(w),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const d=this.data[a].shift();return d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),d.value}getByKey(a){const d=this.data[a];return d?d[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,d){if(!this.has(a))return this;const v=a.wrapped().key,w=d===void 0?0:this.data[v].indexOf(d),C=this.data[v][w];return this.data[v].splice(w,1),C.timeout&&clearTimeout(C.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(C.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(a){const d=[];for(const v in this.data)for(const w of this.data[v])a(w.value)||d.push(w);for(const v of d)this.remove(v.value.tileID,v)}}class Gs{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,d,v){const w=String(d);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][w]=this.stateChanges[a][w]||{},l.e(this.stateChanges[a][w],v),this.deletedStates[a]===null){this.deletedStates[a]={};for(const C in this.state[a])C!==w&&(this.deletedStates[a][C]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][w]===null){this.deletedStates[a][w]={};for(const C in this.state[a][w])v[C]||(this.deletedStates[a][w][C]=null)}else for(const C in v)this.deletedStates[a]&&this.deletedStates[a][w]&&this.deletedStates[a][w][C]===null&&delete this.deletedStates[a][w][C]}removeFeatureState(a,d,v){if(this.deletedStates[a]===null)return;const w=String(d);if(this.deletedStates[a]=this.deletedStates[a]||{},v&&d!==void 0)this.deletedStates[a][w]!==null&&(this.deletedStates[a][w]=this.deletedStates[a][w]||{},this.deletedStates[a][w][v]=null);else if(d!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][w])for(v in this.deletedStates[a][w]={},this.stateChanges[a][w])this.deletedStates[a][w][v]=null;else this.deletedStates[a][w]=null;else this.deletedStates[a]=null}getState(a,d){const v=String(d),w=l.e({},(this.state[a]||{})[v],(this.stateChanges[a]||{})[v]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const C=this.deletedStates[a][d];if(C===null)return{};for(const B in C)delete w[B]}return w}initializeTileState(a,d){a.setFeatureState(this.state,d)}coalesceChanges(a,d){const v={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const C={};for(const B in this.stateChanges[w])this.state[w][B]||(this.state[w][B]={}),l.e(this.state[w][B],this.stateChanges[w][B]),C[B]=this.state[w][B];v[w]=C}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const C={};if(this.deletedStates[w]===null)for(const B in this.state[w])C[B]={},this.state[w][B]={};else for(const B in this.deletedStates[w]){if(this.deletedStates[w][B]===null)this.state[w][B]={};else for(const j of Object.keys(this.deletedStates[w][B]))delete this.state[w][B][j];C[B]=this.state[w][B]}v[w]=v[w]||{},l.e(v[w],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const w in a)a[w].setFeatureState(v,d)}}class Xr extends l.E{constructor(a,d,v){super(),this.id=a,this.dispatcher=v,this.on("data",w=>this._dataHandler(w)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,C,B,j)=>{const Z=new(Lt(C.type))(w,C,B,j);if(Z.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${Z.id}`);return Z})(a,d,v,this),this._tiles={},this._cache=new _r(0,w=>this._unloadTile(w)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Gs,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const d=this._tiles[a];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,d,v){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,d,v)}catch(w){a.state="errored",w.status!==404?this._source.fire(new l.j(w,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new l.k("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const v=this._tiles[d];v.upload(a),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(kt).map(a=>a.key)}getRenderableIds(a){const d=[];for(const v in this._tiles)this._isIdRenderable(v,a)&&d.push(this._tiles[v]);return a?d.sort((v,w)=>{const C=v.tileID,B=w.tileID,j=new l.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),Z=new l.P(B.canonical.x,B.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-B.overscaledZ||Z.y-j.y||Z.x-j.x}).map(v=>v.tileID.key):d.map(v=>v.tileID).sort(kt).map(v=>v.key)}hasRenderableParent(a){const d=this.findLoadedParent(a,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(a,d){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(d||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")}}_reloadTile(a,d){return l._(this,void 0,void 0,function*(){const v=this._tiles[a];v&&(v.state!=="loading"&&(v.state=d),yield this._loadTile(v,a,d))})}_tileLoaded(a,d,v){a.timeAdded=y.now(),v==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(d,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const d=this.getRenderableIds();for(let w=0;w<d.length;w++){const C=d[w];if(a.neighboringTiles&&a.neighboringTiles[C]){const B=this.getTileByID(C);v(a,B),v(B,a)}}function v(w,C){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let B=C.tileID.canonical.x-w.tileID.canonical.x;const j=C.tileID.canonical.y-w.tileID.canonical.y,Z=Math.pow(2,w.tileID.canonical.z),Q=C.tileID.key;B===0&&j===0||Math.abs(j)>1||(Math.abs(B)>1&&(Math.abs(B+Z)===1?B+=Z:Math.abs(B-Z)===1&&(B-=Z)),C.dem&&w.dem&&(w.dem.backfillBorder(C.dem,B,j),w.neighboringTiles&&w.neighboringTiles[Q]&&(w.neighboringTiles[Q].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,d,v,w){for(const C in this._tiles){let B=this._tiles[C];if(w[C]||!B.hasData()||B.tileID.overscaledZ<=d||B.tileID.overscaledZ>v)continue;let j=B.tileID;for(;B&&B.tileID.overscaledZ>d+1;){const Q=B.tileID.scaledTo(B.tileID.overscaledZ-1);B=this._tiles[Q.key],B&&B.hasData()&&(j=Q)}let Z=j;for(;Z.overscaledZ>d;)if(Z=Z.scaledTo(Z.overscaledZ-1),a[Z.key]){w[j.key]=j;break}}}findLoadedParent(a,d){if(a.key in this._loadedParentTiles){const v=this._loadedParentTiles[a.key];return v&&v.tileID.overscaledZ>=d?v:null}for(let v=a.overscaledZ-1;v>=d;v--){const w=a.scaledTo(v),C=this._getLoadedTile(w);if(C)return C}}_getLoadedTile(a){const d=this._tiles[a.key];return d&&d.hasData()?d:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const d=Math.ceil(a.width/this._source.tileSize)+1,v=Math.ceil(a.height/this._source.tileSize)+1,w=Math.floor(d*v*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(C)}handleWrapJump(a){const d=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,d){const v={};for(const w in this._tiles){const C=this._tiles[w];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+d),v[C.tileID.key]=C}this._tiles=v;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}update(a,d){if(!this._sourceLoaded||this._paused)return;let v;this.transform=a,this.terrain=d,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(se=>new l.Q(se.canonical.z,se.wrap,se.canonical.z,se.canonical.x,se.canonical.y)):(v=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(v=v.filter(se=>this._source.hasTile(se)))):v=[];const w=a.coveringZoomLevel(this._source),C=Math.max(w-Xr.maxOverzooming,this._source.minzoom),B=Math.max(w+Xr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const se={};for(const ue of v)if(ue.canonical.z>this._source.minzoom){const ye=ue.scaledTo(ue.canonical.z-1);se[ye.key]=ye;const Le=ue.scaledTo(Math.max(this._source.minzoom,Math.min(ue.canonical.z,5)));se[Le.key]=Le}v=v.concat(Object.values(se))}const j=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,j&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const Z=this._updateRetainedTiles(v,w);if(_n(this._source.type)){const se={},ue={},ye=Object.keys(Z),Le=y.now();for(const Pe of ye){const Me=Z[Pe],Se=this._tiles[Pe];if(!Se||Se.fadeEndTime!==0&&Se.fadeEndTime<=Le)continue;const Ke=this.findLoadedParent(Me,C);Ke&&(this._addTile(Ke.tileID),se[Ke.tileID.key]=Ke.tileID),ue[Pe]=Me}this._retainLoadedChildren(ue,w,B,Z);for(const Pe in se)Z[Pe]||(this._coveredTiles[Pe]=!0,Z[Pe]=se[Pe]);if(d){const Pe={},Me={};for(const Se of v)this._tiles[Se.key].hasData()?Pe[Se.key]=Se:Me[Se.key]=Se;for(const Se in Me){const Ke=Me[Se].children(this._source.maxzoom);this._tiles[Ke[0].key]&&this._tiles[Ke[1].key]&&this._tiles[Ke[2].key]&&this._tiles[Ke[3].key]&&(Pe[Ke[0].key]=Z[Ke[0].key]=Ke[0],Pe[Ke[1].key]=Z[Ke[1].key]=Ke[1],Pe[Ke[2].key]=Z[Ke[2].key]=Ke[2],Pe[Ke[3].key]=Z[Ke[3].key]=Ke[3],delete Me[Se])}for(const Se in Me){const Ke=this.findLoadedParent(Me[Se],this._source.minzoom);if(Ke){Pe[Ke.tileID.key]=Z[Ke.tileID.key]=Ke.tileID;for(const at in Pe)Pe[at].isChildOf(Ke.tileID)&&delete Pe[at]}}for(const Se in this._tiles)Pe[Se]||(this._coveredTiles[Se]=!0)}}for(const se in Z)this._tiles[se].clearFadeHold();const Q=l.ab(this._tiles,Z);for(const se of Q){const ue=this._tiles[se];ue.hasSymbolBuckets&&!ue.holdingForFade()?ue.setHoldDuration(this.map._fadeDuration):ue.hasSymbolBuckets&&!ue.symbolFadeFinished()||this._removeTile(se)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,d){const v={},w={},C=Math.max(d-Xr.maxOverzooming,this._source.minzoom),B=Math.max(d+Xr.maxUnderzooming,this._source.minzoom),j={};for(const Z of a){const Q=this._addTile(Z);v[Z.key]=Z,Q.hasData()||d<this._source.maxzoom&&(j[Z.key]=Z)}this._retainLoadedChildren(j,d,B,v);for(const Z of a){let Q=this._tiles[Z.key];if(Q.hasData())continue;if(d+1>this._source.maxzoom){const ue=Z.children(this._source.maxzoom)[0],ye=this.getTile(ue);if(ye&&ye.hasData()){v[ue.key]=ue;continue}}else{const ue=Z.children(this._source.maxzoom);if(v[ue[0].key]&&v[ue[1].key]&&v[ue[2].key]&&v[ue[3].key])continue}let se=Q.wasRequested();for(let ue=Z.overscaledZ-1;ue>=C;--ue){const ye=Z.scaledTo(ue);if(w[ye.key])break;if(w[ye.key]=!0,Q=this.getTile(ye),!Q&&se&&(Q=this._addTile(ye)),Q){const Le=Q.hasData();if((se||Le)&&(v[ye.key]=ye),se=Q.wasRequested(),Le)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const d=[];let v,w=this._tiles[a].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){v=this._loadedParentTiles[w.key];break}d.push(w.key);const C=w.scaledTo(w.overscaledZ-1);if(v=this._getLoadedTile(C),v)break;w=C}for(const C of d)this._loadedParentTiles[C]=v}}_addTile(a){let d=this._tiles[a.key];if(d)return d;d=this._cache.getAndRemove(a),d&&(this._setTileReloadTimer(a.key,d),d.tileID=a,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,d)));const v=d;return d||(d=new Vn(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(d,a.key,d.state)),d.uses++,this._tiles[a.key]=d,v||this._source.fire(new l.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(a,d){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const v=d.getExpiryTimeout();v&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},v))}_removeTile(a){const d=this._tiles[a];d&&(d.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(a){const d=a.sourceDataType;a.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&d==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,d,v){const w=[],C=this.transform;if(!C)return w;const B=v?C.getCameraQueryGeometry(a):a,j=a.map(Pe=>C.pointCoordinate(Pe,this.terrain)),Z=B.map(Pe=>C.pointCoordinate(Pe,this.terrain)),Q=this.getIds();let se=1/0,ue=1/0,ye=-1/0,Le=-1/0;for(const Pe of Z)se=Math.min(se,Pe.x),ue=Math.min(ue,Pe.y),ye=Math.max(ye,Pe.x),Le=Math.max(Le,Pe.y);for(let Pe=0;Pe<Q.length;Pe++){const Me=this._tiles[Q[Pe]];if(Me.holdingForFade())continue;const Se=Me.tileID,Ke=Math.pow(2,C.zoom-Me.tileID.overscaledZ),at=d*Me.queryPadding*l.W/Me.tileSize/Ke,Fe=[Se.getTilePoint(new l.Y(se,ue)),Se.getTilePoint(new l.Y(ye,Le))];if(Fe[0].x-at<l.W&&Fe[0].y-at<l.W&&Fe[1].x+at>=0&&Fe[1].y+at>=0){const Je=j.map(ft=>Se.getTilePoint(ft)),ut=Z.map(ft=>Se.getTilePoint(ft));w.push({tile:Me,tileID:Se,queryGeometry:Je,cameraQueryGeometry:ut,scale:Ke})}}return w}getVisibleCoordinates(a){const d=this.getRenderableIds(a).map(v=>this._tiles[v].tileID);for(const v of d)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(_n(this._source.type)){const a=y.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=a)return!0}return!1}setFeatureState(a,d,v){this._state.updateState(a=a||"_geojsonTileLayer",d,v)}removeFeatureState(a,d,v){this._state.removeFeatureState(a=a||"_geojsonTileLayer",d,v)}getFeatureState(a,d){return this._state.getState(a=a||"_geojsonTileLayer",d)}setDependencies(a,d,v){const w=this._tiles[a];w&&w.setDependencies(d,v)}reloadTilesForDependencies(a,d){for(const v in this._tiles)this._tiles[v].hasDependency(a,d)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(a,d))}}function kt(S,a){const d=Math.abs(2*S.wrap)-+(S.wrap<0),v=Math.abs(2*a.wrap)-+(a.wrap<0);return S.overscaledZ-a.overscaledZ||v-d||a.canonical.y-S.canonical.y||a.canonical.x-S.canonical.x}function _n(S){return S==="raster"||S==="image"||S==="video"}Xr.maxOverzooming=10,Xr.maxUnderzooming=3;class Pn{constructor(a,d){this.reset(a,d)}reset(a,d){this.points=a||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=l.ac(a,0,1);let d=1,v=this._distances[d];const w=a*this.paddedLength+this.padding;for(;v<w&&d<this._distances.length;)v=this._distances[++d];const C=d-1,B=this._distances[C],j=v-B,Z=j>0?(w-B)/j:0;return this.points[C].mult(1-Z).add(this.points[d].mult(Z))}}function Cr(S,a){let d=!0;return S==="always"||S!=="never"&&a!=="never"||(d=!1),d}class Zo{constructor(a,d,v){const w=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(a/v),this.yCellCount=Math.ceil(d/v);for(let B=0;B<this.xCellCount*this.yCellCount;B++)w.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=d,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,d,v,w,C){this._forEachCell(d,v,w,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(w),this.bboxes.push(C)}insertCircle(a,d,v,w){this._forEachCell(d-w,v-w,d+w,v+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(d),this.circles.push(v),this.circles.push(w)}_insertBoxCell(a,d,v,w,C,B){this.boxCells[C].push(B)}_insertCircleCell(a,d,v,w,C,B){this.circleCells[C].push(B)}_query(a,d,v,w,C,B,j){if(v<0||a>this.width||w<0||d>this.height)return[];const Z=[];if(a<=0&&d<=0&&this.width<=v&&this.height<=w){if(C)return[{key:null,x1:a,y1:d,x2:v,y2:w}];for(let Q=0;Q<this.boxKeys.length;Q++)Z.push({key:this.boxKeys[Q],x1:this.bboxes[4*Q],y1:this.bboxes[4*Q+1],x2:this.bboxes[4*Q+2],y2:this.bboxes[4*Q+3]});for(let Q=0;Q<this.circleKeys.length;Q++){const se=this.circles[3*Q],ue=this.circles[3*Q+1],ye=this.circles[3*Q+2];Z.push({key:this.circleKeys[Q],x1:se-ye,y1:ue-ye,x2:se+ye,y2:ue+ye})}}else this._forEachCell(a,d,v,w,this._queryCell,Z,{hitTest:C,overlapMode:B,seenUids:{box:{},circle:{}}},j);return Z}query(a,d,v,w){return this._query(a,d,v,w,!1,null)}hitTest(a,d,v,w,C,B){return this._query(a,d,v,w,!0,C,B).length>0}hitTestCircle(a,d,v,w,C){const B=a-v,j=a+v,Z=d-v,Q=d+v;if(j<0||B>this.width||Q<0||Z>this.height)return!1;const se=[];return this._forEachCell(B,Z,j,Q,this._queryCellCircle,se,{hitTest:!0,overlapMode:w,circle:{x:a,y:d,radius:v},seenUids:{box:{},circle:{}}},C),se.length>0}_queryCell(a,d,v,w,C,B,j,Z){const{seenUids:Q,hitTest:se,overlapMode:ue}=j,ye=this.boxCells[C];if(ye!==null){const Pe=this.bboxes;for(const Me of ye)if(!Q.box[Me]){Q.box[Me]=!0;const Se=4*Me,Ke=this.boxKeys[Me];if(a<=Pe[Se+2]&&d<=Pe[Se+3]&&v>=Pe[Se+0]&&w>=Pe[Se+1]&&(!Z||Z(Ke))&&(!se||!Cr(ue,Ke.overlapMode))&&(B.push({key:Ke,x1:Pe[Se],y1:Pe[Se+1],x2:Pe[Se+2],y2:Pe[Se+3]}),se))return!0}}const Le=this.circleCells[C];if(Le!==null){const Pe=this.circles;for(const Me of Le)if(!Q.circle[Me]){Q.circle[Me]=!0;const Se=3*Me,Ke=this.circleKeys[Me];if(this._circleAndRectCollide(Pe[Se],Pe[Se+1],Pe[Se+2],a,d,v,w)&&(!Z||Z(Ke))&&(!se||!Cr(ue,Ke.overlapMode))){const at=Pe[Se],Fe=Pe[Se+1],Je=Pe[Se+2];if(B.push({key:Ke,x1:at-Je,y1:Fe-Je,x2:at+Je,y2:Fe+Je}),se)return!0}}}return!1}_queryCellCircle(a,d,v,w,C,B,j,Z){const{circle:Q,seenUids:se,overlapMode:ue}=j,ye=this.boxCells[C];if(ye!==null){const Pe=this.bboxes;for(const Me of ye)if(!se.box[Me]){se.box[Me]=!0;const Se=4*Me,Ke=this.boxKeys[Me];if(this._circleAndRectCollide(Q.x,Q.y,Q.radius,Pe[Se+0],Pe[Se+1],Pe[Se+2],Pe[Se+3])&&(!Z||Z(Ke))&&!Cr(ue,Ke.overlapMode))return B.push(!0),!0}}const Le=this.circleCells[C];if(Le!==null){const Pe=this.circles;for(const Me of Le)if(!se.circle[Me]){se.circle[Me]=!0;const Se=3*Me,Ke=this.circleKeys[Me];if(this._circlesCollide(Pe[Se],Pe[Se+1],Pe[Se+2],Q.x,Q.y,Q.radius)&&(!Z||Z(Ke))&&!Cr(ue,Ke.overlapMode))return B.push(!0),!0}}}_forEachCell(a,d,v,w,C,B,j,Z){const Q=this._convertToXCellCoord(a),se=this._convertToYCellCoord(d),ue=this._convertToXCellCoord(v),ye=this._convertToYCellCoord(w);for(let Le=Q;Le<=ue;Le++)for(let Pe=se;Pe<=ye;Pe++)if(C.call(this,a,d,v,w,this.xCellCount*Pe+Le,B,j,Z))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,d,v,w,C,B){const j=w-a,Z=C-d,Q=v+B;return Q*Q>j*j+Z*Z}_circleAndRectCollide(a,d,v,w,C,B,j){const Z=(B-w)/2,Q=Math.abs(a-(w+Z));if(Q>Z+v)return!1;const se=(j-C)/2,ue=Math.abs(d-(C+se));if(ue>se+v)return!1;if(Q<=Z||ue<=se)return!0;const ye=Q-Z,Le=ue-se;return ye*ye+Le*Le<=v*v}}function Tn(S,a,d,v,w){const C=l.F();return a?(l.J(C,C,[1/w,1/w,1]),d||l.ad(C,C,v.angle)):l.K(C,v.labelPlaneMatrix,S),C}function Hs(S,a,d,v,w){if(a){const C=l.ae(S);return l.J(C,C,[w,w,1]),d||l.ad(C,C,-v.angle),C}return v.glCoordMatrix}function qr(S,a,d){let v;d?(v=[S.x,S.y,d(S.x,S.y),1],l.af(v,v,a)):(v=[S.x,S.y,0,1],ht(v,v,a));const w=v[3];return{point:new l.P(v[0]/w,v[1]/w),signedDistanceFromCamera:w}}function Oe(S,a){return .5+S/a*.5}function K(S,a){const d=S[0]/S[3],v=S[1]/S[3];return d>=-a[0]&&d<=a[0]&&v>=-a[1]&&v<=a[1]}function te(S,a,d,v,w,C,B,j,Z,Q){const se=v?S.textSizeData:S.iconSizeData,ue=l.ag(se,d.transform.zoom),ye=[256/d.width*2+1,256/d.height*2+1],Le=v?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;Le.clear();const Pe=S.lineVertexArray,Me=v?S.text.placedSymbolArray:S.icon.placedSymbolArray,Se=d.transform.width/d.transform.height;let Ke=!1;for(let at=0;at<Me.length;at++){const Fe=Me.get(at);if(Fe.hidden||Fe.writingMode===l.ah.vertical&&!Ke){et(Fe.numGlyphs,Le);continue}let Je;if(Ke=!1,Q?(Je=[Fe.anchorX,Fe.anchorY,Q(Fe.anchorX,Fe.anchorY),1],l.af(Je,Je,a)):(Je=[Fe.anchorX,Fe.anchorY,0,1],ht(Je,Je,a)),!K(Je,ye)){et(Fe.numGlyphs,Le);continue}const ut=Oe(d.transform.cameraToCenterDistance,Je[3]),ft=l.ai(se,ue,Fe),mt=B?ft/ut:ft*ut,Tt=new l.P(Fe.anchorX,Fe.anchorY),Et=qr(Tt,w,Q).point,Mt={projections:{},offsets:{}},zt=ke(Fe,mt,!1,j,a,w,C,S.glyphOffsetArray,Pe,Le,Et,Tt,Mt,Se,Z,Q);Ke=zt.useVertical,(zt.notEnoughRoom||Ke||zt.needsFlipping&&ke(Fe,mt,!0,j,a,w,C,S.glyphOffsetArray,Pe,Le,Et,Tt,Mt,Se,Z,Q).notEnoughRoom)&&et(Fe.numGlyphs,Le)}v?S.text.dynamicLayoutVertexBuffer.updateData(Le):S.icon.dynamicLayoutVertexBuffer.updateData(Le)}function le(S,a,d,v,w,C,B,j,Z,Q,se,ue,ye){const Le=j.glyphStartIndex+j.numGlyphs,Pe=j.lineStartIndex,Me=j.lineStartIndex+j.lineLength,Se=a.getoffsetX(j.glyphStartIndex),Ke=a.getoffsetX(Le-1),at=Qe(S*Se,d,v,w,C,B,j.segment,Pe,Me,Z,Q,se,ue,ye);if(!at)return null;const Fe=Qe(S*Ke,d,v,w,C,B,j.segment,Pe,Me,Z,Q,se,ue,ye);return Fe?{first:at,last:Fe}:null}function pe(S,a,d,v){return S===l.ah.horizontal&&Math.abs(d.y-a.y)>Math.abs(d.x-a.x)*v?{useVertical:!0}:(S===l.ah.vertical?a.y<d.y:a.x>d.x)?{needsFlipping:!0}:null}function ke(S,a,d,v,w,C,B,j,Z,Q,se,ue,ye,Le,Pe,Me){const Se=a/24,Ke=S.lineOffsetX*Se,at=S.lineOffsetY*Se;let Fe;if(S.numGlyphs>1){const Je=S.glyphStartIndex+S.numGlyphs,ut=S.lineStartIndex,ft=S.lineStartIndex+S.lineLength,mt=le(Se,j,Ke,at,d,se,ue,S,Z,C,ye,Pe,Me);if(!mt)return{notEnoughRoom:!0};const Tt=qr(mt.first.point,B,Me).point,Et=qr(mt.last.point,B,Me).point;if(v&&!d){const Mt=pe(S.writingMode,Tt,Et,Le);if(Mt)return Mt}Fe=[mt.first];for(let Mt=S.glyphStartIndex+1;Mt<Je-1;Mt++)Fe.push(Qe(Se*j.getoffsetX(Mt),Ke,at,d,se,ue,S.segment,ut,ft,Z,C,ye,Pe,Me));Fe.push(mt.last)}else{if(v&&!d){const ut=qr(ue,w,Me).point,ft=S.lineStartIndex+S.segment+1,mt=new l.P(Z.getx(ft),Z.gety(ft)),Tt=qr(mt,w,Me),Et=Tt.signedDistanceFromCamera>0?Tt.point:ge(ue,mt,ut,1,w,Me),Mt=pe(S.writingMode,ut,Et,Le);if(Mt)return Mt}const Je=Qe(Se*j.getoffsetX(S.glyphStartIndex),Ke,at,d,se,ue,S.segment,S.lineStartIndex,S.lineStartIndex+S.lineLength,Z,C,ye,Pe,Me);if(!Je)return{notEnoughRoom:!0};Fe=[Je]}for(const Je of Fe)l.aj(Q,Je.point,Je.angle);return{}}function ge(S,a,d,v,w,C){const B=qr(S.add(S.sub(a)._unit()),w,C).point,j=d.sub(B);return d.add(j._mult(v/j.mag()))}function ze(S,a){const{projectionCache:d,lineVertexArray:v,labelPlaneMatrix:w,tileAnchorPoint:C,distanceFromAnchor:B,getElevation:j,previousVertex:Z,direction:Q,absOffsetX:se}=a;if(d.projections[S])return d.projections[S];const ue=new l.P(v.getx(S),v.gety(S)),ye=qr(ue,w,j);if(ye.signedDistanceFromCamera>0)return d.projections[S]=ye.point,ye.point;const Le=S-Q;return ge(B===0?C:new l.P(v.getx(Le),v.gety(Le)),ue,Z,se-B+1,w,j)}function Ie(S,a,d){return S._unit()._perp()._mult(a*d)}function qe(S,a,d,v,w,C,B,j){const{projectionCache:Z,direction:Q}=j;if(Z.offsets[S])return Z.offsets[S];const se=d.add(a);if(S+Q<v||S+Q>=w)return Z.offsets[S]=se,se;const ue=ze(S+Q,j),ye=Ie(ue.sub(d),B,Q),Le=d.add(ye),Pe=ue.add(ye);return Z.offsets[S]=l.ak(C,se,Le,Pe)||se,Z.offsets[S]}function Qe(S,a,d,v,w,C,B,j,Z,Q,se,ue,ye,Le){const Pe=v?S-a:S+a;let Me=Pe>0?1:-1,Se=0;v&&(Me*=-1,Se=Math.PI),Me<0&&(Se+=Math.PI);let Ke,at,Fe=Me>0?j+B:j+B+1,Je=w,ut=w,ft=0,mt=0;const Tt=Math.abs(Pe),Et=[];let Mt;for(;ft+mt<=Tt;){if(Fe+=Me,Fe<j||Fe>=Z)return null;ft+=mt,ut=Je,at=Ke;const $t={projectionCache:ue,lineVertexArray:Q,labelPlaneMatrix:se,tileAnchorPoint:C,distanceFromAnchor:ft,getElevation:Le,previousVertex:ut,direction:Me,absOffsetX:Tt};if(Je=ze(Fe,$t),d===0)Et.push(ut),Mt=Je.sub(ut);else{let yn;const Dn=Je.sub(ut);yn=Dn.mag()===0?Ie(ze(Fe+Me,$t).sub(Je),d,Me):Ie(Dn,d,Me),at||(at=ut.add(yn)),Ke=qe(Fe,yn,Je,j,Z,at,d,$t),Et.push(at),Mt=Ke.sub(at)}mt=Mt.mag()}const zt=Mt._mult((Tt-ft)/mt)._add(at||ut),Nn=Se+Math.atan2(Je.y-ut.y,Je.x-ut.x);return Et.push(zt),{point:zt,angle:ye?Nn:0,path:Et}}const ot=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function et(S,a){for(let d=0;d<S;d++){const v=a.length;a.resize(v+4),a.float32.set(ot,3*v)}}function ht(S,a,d){const v=a[0],w=a[1];return S[0]=d[0]*v+d[4]*w+d[12],S[1]=d[1]*v+d[5]*w+d[13],S[3]=d[3]*v+d[7]*w+d[15],S}const Zt=100;class an{constructor(a,d=new Zo(a.width+200,a.height+200,25),v=new Zo(a.width+200,a.height+200,25)){this.transform=a,this.grid=d,this.ignoredGrid=v,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Zt,this.screenBottomBoundary=a.height+Zt,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,d,v,w,C,B){const j=this.projectAndGetPerspectiveRatio(w,a.anchorPointX,a.anchorPointY,B),Z=v*j.perspectiveRatio,Q=a.x1*Z+j.point.x,se=a.y1*Z+j.point.y,ue=a.x2*Z+j.point.x,ye=a.y2*Z+j.point.y;return!this.isInsideGrid(Q,se,ue,ye)||d!=="always"&&this.grid.hitTest(Q,se,ue,ye,d,C)||j.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Q,se,ue,ye],offscreen:this.isOffscreen(Q,se,ue,ye)}}placeCollisionCircles(a,d,v,w,C,B,j,Z,Q,se,ue,ye,Le,Pe){const Me=[],Se=new l.P(d.anchorX,d.anchorY),Ke=qr(Se,B,Pe),at=Oe(this.transform.cameraToCenterDistance,Ke.signedDistanceFromCamera),Fe=(se?C/at:C*at)/l.ao,Je=qr(Se,j,Pe).point,ut=le(Fe,w,d.lineOffsetX*Fe,d.lineOffsetY*Fe,!1,Je,Se,d,v,j,{projections:{},offsets:{}},!1,Pe);let ft=!1,mt=!1,Tt=!0;if(ut){const Et=.5*ye*at+Le,Mt=new l.P(-100,-100),zt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Nn=new Pn,$t=ut.first,yn=ut.last;let Dn=[];for(let Fn=$t.path.length-1;Fn>=1;Fn--)Dn.push($t.path[Fn]);for(let Fn=1;Fn<yn.path.length;Fn++)Dn.push(yn.path[Fn]);const rr=2.5*Et;if(Z){const Fn=Dn.map(Gn=>qr(Gn,Z,Pe));Dn=Fn.some(Gn=>Gn.signedDistanceFromCamera<=0)?[]:Fn.map(Gn=>Gn.point)}let Ln=[];if(Dn.length>0){const Fn=Dn[0].clone(),Gn=Dn[0].clone();for(let wi=1;wi<Dn.length;wi++)Fn.x=Math.min(Fn.x,Dn[wi].x),Fn.y=Math.min(Fn.y,Dn[wi].y),Gn.x=Math.max(Gn.x,Dn[wi].x),Gn.y=Math.max(Gn.y,Dn[wi].y);Ln=Fn.x>=Mt.x&&Gn.x<=zt.x&&Fn.y>=Mt.y&&Gn.y<=zt.y?[Dn]:Gn.x<Mt.x||Fn.x>zt.x||Gn.y<Mt.y||Fn.y>zt.y?[]:l.al([Dn],Mt.x,Mt.y,zt.x,zt.y)}for(const Fn of Ln){Nn.reset(Fn,.25*Et);let Gn=0;Gn=Nn.length<=.5*Et?1:Math.ceil(Nn.paddedLength/rr)+1;for(let wi=0;wi<Gn;wi++){const Rr=wi/Math.max(Gn-1,1),ga=Nn.lerp(Rr),co=ga.x+Zt,fi=ga.y+Zt;Me.push(co,fi,Et,0);const ho=co-Et,ya=fi-Et,mu=co+Et,Eh=fi+Et;if(Tt=Tt&&this.isOffscreen(ho,ya,mu,Eh),mt=mt||this.isInsideGrid(ho,ya,mu,Eh),a!=="always"&&this.grid.hitTestCircle(co,fi,Et,a,ue)&&(ft=!0,!Q))return{circles:[],offscreen:!1,collisionDetected:ft}}}}return{circles:!Q&&ft||!mt||at<this.perspectiveRatioCutoff?[]:Me,offscreen:Tt,collisionDetected:ft}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let v=1/0,w=1/0,C=-1/0,B=-1/0;for(const se of a){const ue=new l.P(se.x+Zt,se.y+Zt);v=Math.min(v,ue.x),w=Math.min(w,ue.y),C=Math.max(C,ue.x),B=Math.max(B,ue.y),d.push(ue)}const j=this.grid.query(v,w,C,B).concat(this.ignoredGrid.query(v,w,C,B)),Z={},Q={};for(const se of j){const ue=se.key;if(Z[ue.bucketInstanceId]===void 0&&(Z[ue.bucketInstanceId]={}),Z[ue.bucketInstanceId][ue.featureIndex])continue;const ye=[new l.P(se.x1,se.y1),new l.P(se.x2,se.y1),new l.P(se.x2,se.y2),new l.P(se.x1,se.y2)];l.am(d,ye)&&(Z[ue.bucketInstanceId][ue.featureIndex]=!0,Q[ue.bucketInstanceId]===void 0&&(Q[ue.bucketInstanceId]=[]),Q[ue.bucketInstanceId].push(ue.featureIndex))}return Q}insertCollisionBox(a,d,v,w,C,B){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:C,collisionGroupID:B,overlapMode:d},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,d,v,w,C,B){const j=v?this.ignoredGrid:this.grid,Z={bucketInstanceId:w,featureIndex:C,collisionGroupID:B,overlapMode:d};for(let Q=0;Q<a.length;Q+=4)j.insertCircle(Z,a[Q],a[Q+1],a[Q+2])}projectAndGetPerspectiveRatio(a,d,v,w){let C;return w?(C=[d,v,w(d,v),1],l.af(C,C,a)):(C=[d,v,0,1],ht(C,C,a)),{point:new l.P((C[0]/C[3]+1)/2*this.transform.width+Zt,(-C[1]/C[3]+1)/2*this.transform.height+Zt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}}isOffscreen(a,d,v,w){return v<Zt||a>=this.screenRightBoundary||w<Zt||d>this.screenBottomBoundary}isInsideGrid(a,d,v,w){return v>=0&&a<this.gridRightBoundary&&w>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const a=l.an([]);return l.H(a,a,[-100,-100,0]),a}}function sn(S,a,d){return a*(l.W/(S.tileSize*Math.pow(2,d-S.tileID.overscaledZ)))}class Rn{constructor(a,d,v,w){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?d:-d))):w&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class or{constructor(a,d,v,w,C){this.text=new Rn(a?a.text:null,d,v,C),this.icon=new Rn(a?a.icon:null,d,w,C)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class fr{constructor(a,d,v){this.text=a,this.icon=d,this.skipFade=v}}class ur{constructor(){this.invProjMatrix=l.F(),this.viewportMatrix=l.F(),this.circles=[]}}class vn{constructor(a,d,v,w,C){this.bucketInstanceId=a,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=w,this.tileID=C}}class Nr{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const d=++this.maxGroupID;this.collisionGroups[a]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[a]}}function Gr(S,a,d,v,w){const{horizontalAlign:C,verticalAlign:B}=l.at(S);return new l.P(-(C-.5)*a+v[0]*w,-(B-.5)*d+v[1]*w)}function ji(S,a,d,v,w,C){const{x1:B,x2:j,y1:Z,y2:Q,anchorPointX:se,anchorPointY:ue}=S,ye=new l.P(a,d);return v&&ye._rotate(w?C:-C),{x1:B+ye.x,y1:Z+ye.y,x2:j+ye.x,y2:Q+ye.y,anchorPointX:se,anchorPointY:ue}}class bi{constructor(a,d,v,w,C){this.transform=a.clone(),this.terrain=d,this.collisionIndex=new an(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new Nr(w),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,d,v,w){const C=v.getBucket(d),B=v.latestFeatureIndex;if(!C||!B||d.id!==C.layerIds[0])return;const j=v.collisionBoxArray,Z=C.layers[0].layout,Q=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),se=v.tileSize/l.W,ue=this.transform.calculatePosMatrix(v.tileID.toUnwrapped()),ye=Z.get("text-pitch-alignment")==="map",Le=Z.get("text-rotation-alignment")==="map",Pe=sn(v,1,this.transform.zoom),Me=Tn(ue,ye,Le,this.transform,Pe);let Se=null;if(ye){const at=Hs(ue,ye,Le,this.transform,Pe);Se=l.K([],this.transform.labelPlaneMatrix,at)}this.retainedQueryData[C.bucketInstanceId]=new vn(C.bucketInstanceId,B,C.sourceLayerIndex,C.index,v.tileID);const Ke={bucket:C,layout:Z,posMatrix:ue,textLabelPlaneMatrix:Me,labelToScreenMatrix:Se,scale:Q,textPixelRatio:se,holdingForFade:v.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:l.ag(C.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(w)for(const at of C.sortKeyRanges){const{sortKey:Fe,symbolInstanceStart:Je,symbolInstanceEnd:ut}=at;a.push({sortKey:Fe,symbolInstanceStart:Je,symbolInstanceEnd:ut,parameters:Ke})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Ke})}attemptAnchorPlacement(a,d,v,w,C,B,j,Z,Q,se,ue,ye,Le,Pe,Me,Se){const Ke=l.ap[a.textAnchor],at=[a.textOffset0,a.textOffset1],Fe=Gr(Ke,v,w,at,C),Je=this.collisionIndex.placeCollisionBox(ji(d,Fe.x,Fe.y,B,j,this.transform.angle),ue,Z,Q,se.predicate,Se);if((!Me||this.collisionIndex.placeCollisionBox(ji(Me,Fe.x,Fe.y,B,j,this.transform.angle),ue,Z,Q,se.predicate,Se).box.length!==0)&&Je.box.length>0){let ut;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID].text&&(ut=this.prevPlacement.variableOffsets[ye.crossTileID].anchor),ye.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ye.crossTileID]={textOffset:at,width:v,height:w,anchor:Ke,textBoxScale:C,prevAnchor:ut},this.markUsedJustification(Le,Ke,ye,Pe),Le.allowVerticalPlacement&&(this.markUsedOrientation(Le,Pe,ye),this.placedOrientations[ye.crossTileID]=Pe),{shift:Fe,placedGlyphBoxes:Je}}}placeLayerBucketPart(a,d,v){const{bucket:w,layout:C,posMatrix:B,textLabelPlaneMatrix:j,labelToScreenMatrix:Z,textPixelRatio:Q,holdingForFade:se,collisionBoxArray:ue,partiallyEvaluatedTextSize:ye,collisionGroup:Le}=a.parameters,Pe=C.get("text-optional"),Me=C.get("icon-optional"),Se=l.aq(C,"text-overlap","text-allow-overlap"),Ke=Se==="always",at=l.aq(C,"icon-overlap","icon-allow-overlap"),Fe=at==="always",Je=C.get("text-rotation-alignment")==="map",ut=C.get("text-pitch-alignment")==="map",ft=C.get("icon-text-fit")!=="none",mt=C.get("symbol-z-order")==="viewport-y",Tt=Ke&&(Fe||!w.hasIconData()||Me),Et=Fe&&(Ke||!w.hasTextData()||Pe);!w.collisionArrays&&ue&&w.deserializeCollisionBoxes(ue);const Mt=this.retainedQueryData[w.bucketInstanceId].tileID,zt=this.terrain?($t,yn)=>this.terrain.getElevation(Mt,$t,yn):null,Nn=($t,yn)=>{var Dn,rr;if(d[$t.crossTileID])return;if(se)return void(this.placements[$t.crossTileID]=new fr(!1,!1,!1));let Ln=!1,Fn=!1,Gn=!0,wi=null,Rr={box:null,offscreen:null},ga={box:null,offscreen:null},co=null,fi=null,ho=null,ya=0,mu=0,Eh=0;yn.textFeatureIndex?ya=yn.textFeatureIndex:$t.useRuntimeCollisionCircles&&(ya=$t.featureIndex),yn.verticalTextFeatureIndex&&(mu=yn.verticalTextFeatureIndex);const Rm=yn.textBox;if(Rm){const Qi=eo=>{let pi=l.ah.horizontal;if(w.allowVerticalPlacement&&!eo&&this.prevPlacement){const Ka=this.prevPlacement.placedOrientations[$t.crossTileID];Ka&&(this.placedOrientations[$t.crossTileID]=Ka,pi=Ka,this.markUsedOrientation(w,pi,$t))}return pi},di=(eo,pi)=>{if(w.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&yn.verticalTextBox){for(const Ka of w.writingModes)if(Ka===l.ah.vertical?(Rr=pi(),ga=Rr):Rr=eo(),Rr&&Rr.box&&Rr.box.length)break}else Rr=eo()},ai=$t.textAnchorOffsetStartIndex,Wa=$t.textAnchorOffsetEndIndex;if(Wa===ai){const eo=(pi,Ka)=>{const to=this.collisionIndex.placeCollisionBox(pi,Se,Q,B,Le.predicate,zt);return to&&to.box&&to.box.length&&(this.markUsedOrientation(w,Ka,$t),this.placedOrientations[$t.crossTileID]=Ka),to};di(()=>eo(Rm,l.ah.horizontal),()=>{const pi=yn.verticalTextBox;return w.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&pi?eo(pi,l.ah.vertical):{box:null,offscreen:null}}),Qi(Rr&&Rr.box&&Rr.box.length)}else{let eo=l.ap[(rr=(Dn=this.prevPlacement)===null||Dn===void 0?void 0:Dn.variableOffsets[$t.crossTileID])===null||rr===void 0?void 0:rr.anchor];const pi=(to,Mi,Pv)=>{const kx=to.x2-to.x1,Df=to.y2-to.y1,zf=$t.textBoxScale,uy=ft&&at==="never"?Mi:null;let Th={box:[],offscreen:!1},Lv=Se==="never"?1:2,Rx="never";eo&&Lv++;for(let Av=0;Av<Lv;Av++){for(let Ov=ai;Ov<Wa;Ov++){const cy=w.textAnchorOffsets.get(Ov);if(eo&&cy.textAnchor!==eo)continue;const kv=this.attemptAnchorPlacement(cy,to,kx,Df,zf,Je,ut,Q,B,Le,Rx,$t,w,Pv,uy,zt);if(kv&&(Th=kv.placedGlyphBoxes,Th&&Th.box&&Th.box.length))return Ln=!0,wi=kv.shift,Th}eo?eo=null:Rx=Se}return Th};di(()=>pi(Rm,yn.iconBox,l.ah.horizontal),()=>{const to=yn.verticalTextBox;return w.allowVerticalPlacement&&!(Rr&&Rr.box&&Rr.box.length)&&$t.numVerticalGlyphVertices>0&&to?pi(to,yn.verticalIconBox,l.ah.vertical):{box:null,offscreen:null}}),Rr&&(Ln=Rr.box,Gn=Rr.offscreen);const Ka=Qi(Rr&&Rr.box);if(!Ln&&this.prevPlacement){const to=this.prevPlacement.variableOffsets[$t.crossTileID];to&&(this.variableOffsets[$t.crossTileID]=to,this.markUsedJustification(w,to.anchor,$t,Ka))}}}if(co=Rr,Ln=co&&co.box&&co.box.length>0,Gn=co&&co.offscreen,$t.useRuntimeCollisionCircles){const Qi=w.text.placedSymbolArray.get($t.centerJustifiedTextSymbolIndex),di=l.ai(w.textSizeData,ye,Qi),ai=C.get("text-padding");fi=this.collisionIndex.placeCollisionCircles(Se,Qi,w.lineVertexArray,w.glyphOffsetArray,di,B,j,Z,v,ut,Le.predicate,$t.collisionCircleDiameter,ai,zt),fi.circles.length&&fi.collisionDetected&&!v&&l.w("Collisions detected, but collision boxes are not shown"),Ln=Ke||fi.circles.length>0&&!fi.collisionDetected,Gn=Gn&&fi.offscreen}if(yn.iconFeatureIndex&&(Eh=yn.iconFeatureIndex),yn.iconBox){const Qi=di=>{const ai=ft&&wi?ji(di,wi.x,wi.y,Je,ut,this.transform.angle):di;return this.collisionIndex.placeCollisionBox(ai,at,Q,B,Le.predicate,zt)};ga&&ga.box&&ga.box.length&&yn.verticalIconBox?(ho=Qi(yn.verticalIconBox),Fn=ho.box.length>0):(ho=Qi(yn.iconBox),Fn=ho.box.length>0),Gn=Gn&&ho.offscreen}const Sh=Pe||$t.numHorizontalGlyphVertices===0&&$t.numVerticalGlyphVertices===0,gu=Me||$t.numIconVertices===0;if(Sh||gu?gu?Sh||(Fn=Fn&&Ln):Ln=Fn&&Ln:Fn=Ln=Fn&&Ln,Ln&&co&&co.box&&this.collisionIndex.insertCollisionBox(co.box,Se,C.get("text-ignore-placement"),w.bucketInstanceId,ga&&ga.box&&mu?mu:ya,Le.ID),Fn&&ho&&this.collisionIndex.insertCollisionBox(ho.box,at,C.get("icon-ignore-placement"),w.bucketInstanceId,Eh,Le.ID),fi&&(Ln&&this.collisionIndex.insertCollisionCircles(fi.circles,Se,C.get("text-ignore-placement"),w.bucketInstanceId,ya,Le.ID),v)){const Qi=w.bucketInstanceId;let di=this.collisionCircleArrays[Qi];di===void 0&&(di=this.collisionCircleArrays[Qi]=new ur);for(let ai=0;ai<fi.circles.length;ai+=4)di.circles.push(fi.circles[ai+0]),di.circles.push(fi.circles[ai+1]),di.circles.push(fi.circles[ai+2]),di.circles.push(fi.collisionDetected?1:0)}if($t.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$t.crossTileID]=new fr(Ln||Tt,Fn||Et,Gn||w.justReloaded),d[$t.crossTileID]=!0};if(mt){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const $t=w.getSortedSymbolIndexes(this.transform.angle);for(let yn=$t.length-1;yn>=0;--yn){const Dn=$t[yn];Nn(w.symbolInstances.get(Dn),w.collisionArrays[Dn])}}else for(let $t=a.symbolInstanceStart;$t<a.symbolInstanceEnd;$t++)Nn(w.symbolInstances.get($t),w.collisionArrays[$t]);if(v&&w.bucketInstanceId in this.collisionCircleArrays){const $t=this.collisionCircleArrays[w.bucketInstanceId];l.ar($t.invProjMatrix,B),$t.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(a,d,v,w){let C;C=w===l.ah.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[l.as(d)];const B=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const j of B)j>=0&&(a.text.placedSymbolArray.get(j).crossTileID=C>=0&&j!==C?0:v.crossTileID)}markUsedOrientation(a,d,v){const w=d===l.ah.horizontal||d===l.ah.horizontalOnly?d:0,C=d===l.ah.vertical?d:0,B=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const j of B)a.text.placedSymbolArray.get(j).placedOrientation=w;v.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=C)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const w=d?d.symbolFadeChange(a):1,C=d?d.opacities:{},B=d?d.variableOffsets:{},j=d?d.placedOrientations:{};for(const Z in this.placements){const Q=this.placements[Z],se=C[Z];se?(this.opacities[Z]=new or(se,w,Q.text,Q.icon),v=v||Q.text!==se.text.placed||Q.icon!==se.icon.placed):(this.opacities[Z]=new or(null,w,Q.text,Q.icon,Q.skipFade),v=v||Q.text||Q.icon)}for(const Z in C){const Q=C[Z];if(!this.opacities[Z]){const se=new or(Q,w,!1,!1);se.isHidden()||(this.opacities[Z]=se,v=v||Q.text.placed||Q.icon.placed)}}for(const Z in B)this.variableOffsets[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.variableOffsets[Z]=B[Z]);for(const Z in j)this.placedOrientations[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.placedOrientations[Z]=j[Z]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:a)}updateLayerOpacities(a,d){const v={};for(const w of d){const C=w.getBucket(a);C&&w.latestFeatureIndex&&a.id===C.layerIds[0]&&this.updateBucketOpacities(C,v,w.collisionBoxArray)}}updateBucketOpacities(a,d,v){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const w=a.layers[0],C=w.layout,B=new or(null,0,!1,!1,!0),j=C.get("text-allow-overlap"),Z=C.get("icon-allow-overlap"),Q=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),se=C.get("text-rotation-alignment")==="map",ue=C.get("text-pitch-alignment")==="map",ye=C.get("icon-text-fit")!=="none",Le=new or(null,0,j&&(Z||!a.hasIconData()||C.get("icon-optional")),Z&&(j||!a.hasTextData()||C.get("text-optional")),!0);!a.collisionArrays&&v&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(v);const Pe=(Me,Se,Ke)=>{for(let at=0;at<Se/4;at++)Me.opacityVertexArray.emplaceBack(Ke);Me.hasVisibleVertices=Me.hasVisibleVertices||Ke!==yl};for(let Me=0;Me<a.symbolInstances.length;Me++){const Se=a.symbolInstances.get(Me),{numHorizontalGlyphVertices:Ke,numVerticalGlyphVertices:at,crossTileID:Fe}=Se;let Je=this.opacities[Fe];d[Fe]?Je=B:Je||(Je=Le,this.opacities[Fe]=Je),d[Fe]=!0;const ut=Se.numIconVertices>0,ft=this.placedOrientations[Se.crossTileID],mt=ft===l.ah.vertical,Tt=ft===l.ah.horizontal||ft===l.ah.horizontalOnly;if(Ke>0||at>0){const Et=Co(Je.text);Pe(a.text,Ke,mt?yl:Et),Pe(a.text,at,Tt?yl:Et);const Mt=Je.text.isHidden();[Se.rightJustifiedTextSymbolIndex,Se.centerJustifiedTextSymbolIndex,Se.leftJustifiedTextSymbolIndex].forEach($t=>{$t>=0&&(a.text.placedSymbolArray.get($t).hidden=Mt||mt?1:0)}),Se.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(Se.verticalPlacedTextSymbolIndex).hidden=Mt||Tt?1:0);const zt=this.variableOffsets[Se.crossTileID];zt&&this.markUsedJustification(a,zt.anchor,Se,ft);const Nn=this.placedOrientations[Se.crossTileID];Nn&&(this.markUsedJustification(a,"left",Se,Nn),this.markUsedOrientation(a,Nn,Se))}if(ut){const Et=Co(Je.icon),Mt=!(ye&&Se.verticalPlacedIconSymbolIndex&&mt);Se.placedIconSymbolIndex>=0&&(Pe(a.icon,Se.numIconVertices,Mt?Et:yl),a.icon.placedSymbolArray.get(Se.placedIconSymbolIndex).hidden=Je.icon.isHidden()),Se.verticalPlacedIconSymbolIndex>=0&&(Pe(a.icon,Se.numVerticalIconVertices,Mt?yl:Et),a.icon.placedSymbolArray.get(Se.verticalPlacedIconSymbolIndex).hidden=Je.icon.isHidden())}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Et=a.collisionArrays[Me];if(Et){let Mt=new l.P(0,0);if(Et.textBox||Et.verticalTextBox){let Nn=!0;if(Q){const $t=this.variableOffsets[Fe];$t?(Mt=Gr($t.anchor,$t.width,$t.height,$t.textOffset,$t.textBoxScale),se&&Mt._rotate(ue?this.transform.angle:-this.transform.angle)):Nn=!1}Et.textBox&&Yr(a.textCollisionBox.collisionVertexArray,Je.text.placed,!Nn||mt,Mt.x,Mt.y),Et.verticalTextBox&&Yr(a.textCollisionBox.collisionVertexArray,Je.text.placed,!Nn||Tt,Mt.x,Mt.y)}const zt=!!(!Tt&&Et.verticalIconBox);Et.iconBox&&Yr(a.iconCollisionBox.collisionVertexArray,Je.icon.placed,zt,ye?Mt.x:0,ye?Mt.y:0),Et.verticalIconBox&&Yr(a.iconCollisionBox.collisionVertexArray,Je.icon.placed,!zt,ye?Mt.x:0,ye?Mt.y:0)}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){const Me=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=Me.invProjMatrix,a.placementViewportMatrix=Me.viewportMatrix,a.collisionCircleArray=Me.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,d){const v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>a}setStale(){this.stale=!0}}function Yr(S,a,d,v,w){S.emplaceBack(a?1:0,d?1:0,v||0,w||0),S.emplaceBack(a?1:0,d?1:0,v||0,w||0),S.emplaceBack(a?1:0,d?1:0,v||0,w||0),S.emplaceBack(a?1:0,d?1:0,v||0,w||0)}const Bn=Math.pow(2,25),cr=Math.pow(2,24),To=Math.pow(2,17),sr=Math.pow(2,16),hf=Math.pow(2,9),fm=Math.pow(2,8),ms=Math.pow(2,1);function Co(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;const a=S.placed?1:0,d=Math.floor(127*S.opacity);return d*Bn+a*cr+d*To+a*sr+d*hf+a*fm+d*ms+a}const yl=0;class gs{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,d,v,w,C){const B=this._bucketParts;for(;this._currentTileIndex<a.length;)if(d.getBucketParts(B,w,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort((j,Z)=>j.sortKey-Z.sortKey));this._currentPartIndex<B.length;)if(d.placeLayerBucketPart(B[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,C())return!0;return!1}}class ys{constructor(a,d,v,w,C,B,j,Z){this.placement=new bi(a,d,B,j,Z),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(a,d,v){const w=y.now(),C=()=>!this._forceFullPlacement&&y.now()-w>2;for(;this._currentPlacementIndex>=0;){const B=d[a[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=j)&&(!B.maxzoom||B.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new gs(B)),this._inProgressLayer.continuePlacement(v[B.source],this.placement,this._showCollisionBoxes,B,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const $a=512/l.W/2;class ar{constructor(a,d,v){this.tileID=a,this.bucketInstanceId=v,this._symbolsByKey={};const w=new Map;for(let C=0;C<d.length;C++){const B=d.get(C),j=B.key,Z=w.get(j);Z?Z.push(B):w.set(j,[B])}for(const[C,B]of w){const j={positions:B.map(Z=>({x:Math.floor(Z.anchorX*$a),y:Math.floor(Z.anchorY*$a)})),crossTileIDs:B.map(Z=>Z.crossTileID)};if(j.positions.length>128){const Z=new l.au(j.positions.length,16,Uint16Array);for(const{x:Q,y:se}of j.positions)Z.add(Q,se);Z.finish(),delete j.positions,j.index=Z}this._symbolsByKey[C]=j}}getScaledCoordinates(a,d){const{x:v,y:w,z:C}=this.tileID.canonical,{x:B,y:j,z:Z}=d.canonical,Q=$a/Math.pow(2,Z-C),se=(j*l.W+a.anchorY)*Q,ue=w*l.W*$a;return{x:Math.floor((B*l.W+a.anchorX)*Q-v*l.W*$a),y:Math.floor(se-ue)}}findMatches(a,d,v){const w=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let C=0;C<a.length;C++){const B=a.get(C);if(B.crossTileID)continue;const j=this._symbolsByKey[B.key];if(!j)continue;const Z=this.getScaledCoordinates(B,d);if(j.index){const Q=j.index.range(Z.x-w,Z.y-w,Z.x+w,Z.y+w).sort();for(const se of Q){const ue=j.crossTileIDs[se];if(!v[ue]){v[ue]=!0,B.crossTileID=ue;break}}}else if(j.positions)for(let Q=0;Q<j.positions.length;Q++){const se=j.positions[Q],ue=j.crossTileIDs[Q];if(Math.abs(se.x-Z.x)<=w&&Math.abs(se.y-Z.y)<=w&&!v[ue]){v[ue]=!0,B.crossTileID=ue;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class jn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class su{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const d=Math.round((a-this.lng)/360);if(d!==0)for(const v in this.indexes){const w=this.indexes[v],C={};for(const B in w){const j=w[B];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+d),C[j.tileID.key]=j}this.indexes[v]=C}this.lng=a}addBucket(a,d,v){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let C=0;C<d.symbolInstances.length;C++)d.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const w=this.usedCrossTileIDs[a.overscaledZ];for(const C in this.indexes){const B=this.indexes[C];if(Number(C)>a.overscaledZ)for(const j in B){const Z=B[j];Z.tileID.isChildOf(a)&&Z.findMatches(d.symbolInstances,a,w)}else{const j=B[a.scaledTo(Number(C)).key];j&&j.findMatches(d.symbolInstances,a,w)}}for(let C=0;C<d.symbolInstances.length;C++){const B=d.symbolInstances.get(C);B.crossTileID||(B.crossTileID=v.generate(),w[B.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new ar(a,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(a,d){for(const v of d.getCrossTileIDsLists())for(const w of v)delete this.usedCrossTileIDs[a][w]}removeStaleBuckets(a){let d=!1;for(const v in this.indexes){const w=this.indexes[v];for(const C in w)a[w[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,w[C]),delete w[C],d=!0)}return d}}class _s{constructor(){this.layerIndexes={},this.crossTileIDs=new jn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,d,v){let w=this.layerIndexes[a.id];w===void 0&&(w=this.layerIndexes[a.id]=new su);let C=!1;const B={};w.handleWrapJump(v);for(const j of d){const Z=j.getBucket(a);Z&&a.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(j.tileID,Z,this.crossTileIDs)&&(C=!0),B[Z.bucketInstanceId]=!0)}return w.removeStaleBuckets(B)&&(C=!0),C}pruneUnusedLayers(a){const d={};a.forEach(v=>{d[v]=!0});for(const v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}const Lr=(S,a)=>l.t(S,a&&a.filter(d=>d.identifier!=="source.canvas")),th=l.av();class Cn extends l.E{constructor(a,d={}){super(),this._rtlPluginLoaded=()=>{for(const v in this.sourceCaches){const w=this.sourceCaches[v].getSource().type;w!=="vector"&&w!=="geojson"||this.sourceCaches[v].reload()}},this.map=a,this.dispatcher=new it(He(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(v,w)=>this.getGlyphs(v,w)),this.dispatcher.registerMessageHandler("GI",(v,w)=>this.getImages(v,w)),this.imageManager=new ce,this.imageManager.setEventedParent(this),this.glyphManager=new Be(a._requestManager,d.localIdeographFontFamily),this.lineAtlas=new he(256,512),this.crossTileSymbolIndex=new _s,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.ax()),bt().on(en,this._rtlPluginLoaded),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const w=this.sourceCaches[v.sourceId];if(!w)return;const C=w.getSource();if(C&&C.vectorLayerIds)for(const B in this._layers){const j=this._layers[B];j.source===C.id&&this._validateLayer(j)}})}loadURL(a,d={},v){this.fire(new l.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const w=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController,l.h(w,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,d,v)}).catch(C=>{this._loadStyleRequest=null,C&&this.fire(new l.j(C))})}loadJSON(a,d={},v){this.fire(new l.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,y.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(a,d,v)}).catch(()=>{})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(th,{validate:!1})}_load(a,d,v){var w;const C=d.transformStyle?d.transformStyle(v,a):a;if(!d.validate||!Lr(this,l.x(C))){this._loaded=!0,this.stylesheet=C;for(const B in C.sources)this.addSource(B,C.sources[B],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs),this._createLayers(),this.light=new ve(this.stylesheet.light),this.map.setTerrain((w=this.stylesheet.terrain)!==null&&w!==void 0?w:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const a=l.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of a){const v=l.az(d);v.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=v}}_loadSprite(a,d=!1,v=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(C,B,j,Z){return l._(this,void 0,void 0,function*(){const Q=Y(C),se=j>1?"@2x":"",ue={},ye={};for(const{id:Le,url:Pe}of Q){const Me=B.transformRequest(B.normalizeSpriteURL(Pe,se,".json"),"SpriteJSON");ue[Le]=l.h(Me,Z);const Se=B.transformRequest(B.normalizeSpriteURL(Pe,se,".png"),"SpriteImage");ye[Le]=z.getImage(Se,Z)}return yield Promise.all([...Object.values(ue),...Object.values(ye)]),function(Le,Pe){return l._(this,void 0,void 0,function*(){const Me={};for(const Se in Le){Me[Se]={};const Ke=y.getImageCanvasContext((yield Pe[Se]).data),at=(yield Le[Se]).data;for(const Fe in at){const{width:Je,height:ut,x:ft,y:mt,sdf:Tt,pixelRatio:Et,stretchX:Mt,stretchY:zt,content:Nn}=at[Fe];Me[Se][Fe]={data:null,pixelRatio:Et,sdf:Tt,stretchX:Mt,stretchY:zt,content:Nn,spriteData:{width:Je,height:ut,x:ft,y:mt,context:Ke}}}}return Me})}(ue,ye)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(C=>{if(this._spriteRequest=null,C)for(const B in C){this._spritesImagesIds[B]=[];const j=this._spritesImagesIds[B]?this._spritesImagesIds[B].filter(Z=>!(Z in C)):[];for(const Z of j)this.imageManager.removeImage(Z),this._changedImages[Z]=!0;for(const Z in C[B]){const Q=B==="default"?Z:`${B}:${Z}`;this._spritesImagesIds[B].push(Q),Q in this.imageManager.images?this.imageManager.updateImage(Q,C[B][Z],!1):this.imageManager.addImage(Q,C[B][Z]),d&&(this._changedImages[Q]=!0)}}}).catch(C=>{this._spriteRequest=null,w=C,this.fire(new l.j(w))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),v&&v(w)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(a){const d=this.sourceCaches[a.source];if(!d)return;const v=a.sourceLayer;if(!v)return;const w=d.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(v)===-1)&&this.fire(new l.j(new Error(`Source layer "${v}" does not exist on source "${w.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a){const d=this._serializedAllLayers();if(!a||a.length===0)return Object.values(d);const v=[];for(const w of a)d[w]&&v.push(d[w]);return v}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const d=Object.keys(this._layers);for(const v of d){const w=this._layers[v];w.type!=="custom"&&(a[v]=w.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const d=this._changed;if(d){const w=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(w.length||C.length)&&this._updateWorkerLayers(w,C);for(const B in this._updatedSources){const j=this._updatedSources[B];if(j==="reload")this._reloadSource(B);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(B)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const B in this._updatedPaintProps)this._layers[B].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}const v={};for(const w in this.sourceCaches){const C=this.sourceCaches[w];v[w]=C.used,C.used=!1}for(const w of this._order){const C=this._layers[w];C.recalculate(a,this._availableImages),!C.isHidden(a.zoom)&&C.source&&(this.sourceCaches[C.source].used=!0)}for(const w in v){const C=this.sourceCaches[w];!!v[w]!=!!C.used&&C.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(a),this.z=a.zoom,d&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,d={}){var v;this._checkLoaded();const w=this.serialize();if(a=d.transformStyle?d.transformStyle(w,a):a,((v=d.validate)===null||v===void 0||v)&&Lr(this,l.x(a)))return!1;(a=l.aA(a)).layers=l.ay(a.layers);const C=l.aB(w,a),B=this._getOperationsToPerform(C);if(B.unimplemented.length>0)throw new Error(`Unimplemented: ${B.unimplemented.join(", ")}.`);if(B.operations.length===0)return!1;for(const j of B.operations)j();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){const d=[],v=[];for(const w of a)switch(w.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,w.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,w.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,w.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,w.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,w.args));break;case"addSource":d.push(()=>this.addSource.apply(this,w.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,w.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,w.args));break;case"setLight":d.push(()=>this.setLight.apply(this,w.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,w.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,w.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,w.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,w.args));break;case"setTransition":d.push(()=>{});break;default:v.push(w.command)}return{operations:d,unimplemented:v}}addImage(a,d){if(this.getImage(a))return this.fire(new l.j(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,d),this._afterImageUpdated(a)}updateImage(a,d){this.imageManager.updateImage(a,d)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new l.j(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,d,v={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(l.x.source,`sources.${a}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const w=this.sourceCaches[a]=new Xr(a,d,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:a})),w.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===a)return this.fire(new l.j(new Error(`Source "${a}" cannot be removed while layer "${v}" is using it.`)));const d=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],d.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,d){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const v=this.sourceCaches[a].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(d),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,d,v={}){this._checkLoaded();const w=a.id;if(this.getLayer(w))return void this.fire(new l.j(new Error(`Layer "${w}" already exists on this map.`)));let C;if(a.type==="custom"){if(Lr(this,l.aC(a)))return;C=l.az(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(w,a.source),a=l.aA(a),a=l.e(a,{source:w})),this._validate(l.x.layer,`layers.${w}`,a,{arrayIndex:-1},v))return;C=l.az(a),this._validateLayer(C),C.setEventedParent(this,{layer:{id:w}})}const B=d?this._order.indexOf(d):this._order.length;if(d&&B===-1)this.fire(new l.j(new Error(`Cannot add layer "${w}" before non-existing layer "${d}".`)));else{if(this._order.splice(B,0,w),this._layerOrderChanged=!0,this._layers[w]=C,this._removedLayers[w]&&C.source&&C.type!=="custom"){const j=this._removedLayers[w];delete this._removedLayers[w],j.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map)}}moveLayer(a,d){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new l.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===d)return;const v=this._order.indexOf(a);this._order.splice(v,1);const w=d?this._order.indexOf(d):this._order.length;d&&w===-1?this.fire(new l.j(new Error(`Cannot move layer "${a}" before non-existing layer "${d}".`))):(this._order.splice(w,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const d=this._layers[a];if(!d)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${a}".`)));d.setEventedParent(null);const v=this._order.indexOf(a);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=d,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],d.onRemove&&d.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,d,v){this._checkLoaded();const w=this.getLayer(a);w?w.minzoom===d&&w.maxzoom===v||(d!=null&&(w.minzoom=d),v!=null&&(w.maxzoom=v),this._updateLayer(w)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,d,v={}){this._checkLoaded();const w=this.getLayer(a);if(w){if(!l.aD(w.filter,d))return d==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(l.x.filter,`layers.${w.id}.filter`,d,null,v)||(w.filter=l.aA(d),this._updateLayer(w)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return l.aA(this.getLayer(a).filter)}setLayoutProperty(a,d,v,w={}){this._checkLoaded();const C=this.getLayer(a);C?l.aD(C.getLayoutProperty(d),v)||(C.setLayoutProperty(d,v,w),this._updateLayer(C)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,d){const v=this.getLayer(a);if(v)return v.getLayoutProperty(d);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,d,v,w={}){this._checkLoaded();const C=this.getLayer(a);C?l.aD(C.getPaintProperty(d),v)||(C.setPaintProperty(d,v,w)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new l.j(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,d){return this.getLayer(a).getPaintProperty(d)}setFeatureState(a,d){this._checkLoaded();const v=a.source,w=a.sourceLayer,C=this.sourceCaches[v];if(C===void 0)return void this.fire(new l.j(new Error(`The source '${v}' does not exist in the map's style.`)));const B=C.getSource().type;B==="geojson"&&w?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):B!=="vector"||w?(a.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),C.setFeatureState(w,a.id,d)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,d){this._checkLoaded();const v=a.source,w=this.sourceCaches[v];if(w===void 0)return void this.fire(new l.j(new Error(`The source '${v}' does not exist in the map's style.`)));const C=w.getSource().type,B=C==="vector"?a.sourceLayer:void 0;C!=="vector"||B?d&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(B,a.id,d):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const d=a.source,v=a.sourceLayer,w=this.sourceCaches[d];if(w!==void 0)return w.getSource().type!=="vector"||v?(a.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),w.getFeatureState(v,a.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=l.aE(this.sourceCaches,C=>C.serialize()),d=this._serializeByIds(this._order),v=this.map.getTerrain()||void 0,w=this.stylesheet;return l.aF({version:w.version,name:w.name,metadata:w.metadata,light:w.light,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,sources:a,layers:d,terrain:v},C=>C!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const d=B=>this._layers[B].type==="fill-extrusion",v={},w=[];for(let B=this._order.length-1;B>=0;B--){const j=this._order[B];if(d(j)){v[j]=B;for(const Z of a){const Q=Z[j];if(Q)for(const se of Q)w.push(se)}}}w.sort((B,j)=>j.intersectionZ-B.intersectionZ);const C=[];for(let B=this._order.length-1;B>=0;B--){const j=this._order[B];if(d(j))for(let Z=w.length-1;Z>=0;Z--){const Q=w[Z].feature;if(v[Q.layer.id]<B)break;C.push(Q),w.pop()}else for(const Z of a){const Q=Z[j];if(Q)for(const se of Q)C.push(se.feature)}}return C}queryRenderedFeatures(a,d,v){d&&d.filter&&this._validate(l.x.filter,"queryRenderedFeatures.filter",d.filter,null,d);const w={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const j of d.layers){const Z=this._layers[j];if(!Z)return this.fire(new l.j(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];w[Z.source]=!0}}const C=[];d.availableImages=this._availableImages;const B=this._serializedAllLayers();for(const j in this.sourceCaches)d.layers&&!w[j]||C.push(Dt(this.sourceCaches[j],this._layers,B,a,d,v));return this.placement&&C.push(function(j,Z,Q,se,ue,ye,Le){const Pe={},Me=ye.queryRenderedSymbols(se),Se=[];for(const Ke of Object.keys(Me).map(Number))Se.push(Le[Ke]);Se.sort(Qt);for(const Ke of Se){const at=Ke.featureIndex.lookupSymbolFeatures(Me[Ke.bucketInstanceId],Z,Ke.bucketIndex,Ke.sourceLayerIndex,ue.filter,ue.layers,ue.availableImages,j);for(const Fe in at){const Je=Pe[Fe]=Pe[Fe]||[],ut=at[Fe];ut.sort((ft,mt)=>{const Tt=Ke.featureSortOrder;if(Tt){const Et=Tt.indexOf(ft.featureIndex);return Tt.indexOf(mt.featureIndex)-Et}return mt.featureIndex-ft.featureIndex});for(const ft of ut)Je.push(ft)}}for(const Ke in Pe)Pe[Ke].forEach(at=>{const Fe=at.feature,Je=Q[j[Ke].source].getFeatureState(Fe.layer["source-layer"],Fe.id);Fe.source=Fe.layer.source,Fe.layer["source-layer"]&&(Fe.sourceLayer=Fe.layer["source-layer"]),Fe.state=Je});return Pe}(this._layers,B,this.sourceCaches,a,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(a,d){d&&d.filter&&this._validate(l.x.filter,"querySourceFeatures.filter",d.filter,null,d);const v=this.sourceCaches[a];return v?function(w,C){const B=w.getRenderableIds().map(Q=>w.getTileByID(Q)),j=[],Z={};for(let Q=0;Q<B.length;Q++){const se=B[Q],ue=se.tileID.canonical.key;Z[ue]||(Z[ue]=!0,se.querySourceFeatures(j,C))}return j}(v,d):[]}getLight(){return this.light.getLight()}setLight(a,d={}){this._checkLoaded();const v=this.light.getLight();let w=!1;for(const B in a)if(!l.aD(a[B],v[B])){w=!0;break}if(!w)return;const C={now:y.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,d),this.light.updateTransitions(C)}_validate(a,d,v,w,C={}){return(!C||C.validate!==!1)&&Lr(this,a.call(l.x,l.e({key:d,style:this.serialize(),value:v,styleSpec:l.v},w)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),bt().off(en,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const v=this.sourceCaches[d];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const d in this.sourceCaches)this.sourceCaches[d].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,d,v,w,C=!1){let B=!1,j=!1;const Z={};for(const Q of this._order){const se=this._layers[Q];if(se.type!=="symbol")continue;if(!Z[se.source]){const ye=this.sourceCaches[se.source];Z[se.source]=ye.getRenderableIds(!0).map(Le=>ye.getTileByID(Le)).sort((Le,Pe)=>Pe.tileID.overscaledZ-Le.tileID.overscaledZ||(Le.tileID.isLessThan(Pe.tileID)?-1:1))}const ue=this.crossTileSymbolIndex.addLayer(se,Z[se.source],a.center.lng);B=B||ue}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((C=C||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(y.now(),a.zoom))&&(this.pauseablePlacement=new ys(a,this.map.terrain,this._order,C,d,v,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(y.now()),j=!0),B&&this.pauseablePlacement.placement.setStale()),j||B)for(const Q of this._order){const se=this._layers[Q];se.type==="symbol"&&this.placement.updateLayerOpacities(se,Z[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(y.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,d){return l._(this,void 0,void 0,function*(){const v=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const w=this.sourceCaches[d.source];return w&&w.setDependencies(d.tileID.key,d.type,d.icons),v})}getGlyphs(a,d){return l._(this,void 0,void 0,function*(){const v=yield this.glyphManager.getGlyphs(d.stacks),w=this.sourceCaches[d.source];return w&&w.setDependencies(d.tileID.key,d.type,[""]),v})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,d={}){this._checkLoaded(),a&&this._validate(l.x.glyphs,"glyphs",a,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,d,v={},w){this._checkLoaded();const C=[{id:a,url:d}],B=[...Y(this.stylesheet.sprite),...C];this._validate(l.x.sprite,"sprite",B,null,v)||(this.stylesheet.sprite=B,this._loadSprite(C,!0,w))}removeSprite(a){this._checkLoaded();const d=Y(this.stylesheet.sprite);if(d.find(v=>v.id===a)){if(this._spritesImagesIds[a])for(const v of this._spritesImagesIds[a])this.imageManager.removeImage(v),this._changedImages[v]=!0;d.splice(d.findIndex(v=>v.id===a),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return Y(this.stylesheet.sprite)}setSprite(a,d={},v){this._checkLoaded(),a&&this._validate(l.x.sprite,"sprite",a,null,d)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,v):(this._unloadSprite(),v&&v(null)))}}var Jr=l.X([{name:"a_pos",type:"Int16",components:2}]),Zs="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const au={prelude:qn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:qn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:qn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:qn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:qn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:qn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:qn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:qn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:qn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:qn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:qn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:qn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:qn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:qn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:qn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:qn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:qn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:qn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:qn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:qn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:qn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:qn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Zs),terrainDepth:qn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Zs),terrainCoords:qn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Zs)};function qn(S,a){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=a.match(/attribute ([\w]+) ([\w]+)/g),w=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=C?C.concat(w):w,j={};return{fragmentSource:S=S.replace(d,(Z,Q,se,ue,ye)=>(j[ye]=!0,Q==="define"?`
#ifndef HAS_UNIFORM_u_${ye}
varying ${se} ${ue} ${ye};
#else
uniform ${se} ${ue} u_${ye};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ye}
    ${se} ${ue} ${ye} = u_${ye};
#endif
`)),vertexSource:a=a.replace(d,(Z,Q,se,ue,ye)=>{const Le=ue==="float"?"vec2":"vec4",Pe=ye.match(/color/)?"color":Le;return j[ye]?Q==="define"?`
#ifndef HAS_UNIFORM_u_${ye}
uniform lowp float u_${ye}_t;
attribute ${se} ${Le} a_${ye};
varying ${se} ${ue} ${ye};
#else
uniform ${se} ${ue} u_${ye};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ye}
    ${ye} = a_${ye};
#else
    ${se} ${ue} ${ye} = u_${ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ye}
    ${ye} = unpack_mix_${Pe}(a_${ye}, u_${ye}_t);
#else
    ${se} ${ue} ${ye} = u_${ye};
#endif
`:Q==="define"?`
#ifndef HAS_UNIFORM_u_${ye}
uniform lowp float u_${ye}_t;
attribute ${se} ${Le} a_${ye};
#else
uniform ${se} ${ue} u_${ye};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ye}
    ${se} ${ue} ${ye} = a_${ye};
#else
    ${se} ${ue} ${ye} = u_${ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ye}
    ${se} ${ue} ${ye} = unpack_mix_${Pe}(a_${ye}, u_${ye}_t);
#else
    ${se} ${ue} ${ye} = u_${ye};
#endif
`}),staticAttributes:v,staticUniforms:B}}class Id{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,d,v,w,C,B,j,Z,Q){this.context=a;let se=this.boundPaintVertexBuffers.length!==w.length;for(let ue=0;!se&&ue<w.length;ue++)this.boundPaintVertexBuffers[ue]!==w[ue]&&(se=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||se||this.boundIndexBuffer!==C||this.boundVertexOffset!==B||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==Z||this.boundDynamicVertexBuffer3!==Q?this.freshBind(d,v,w,C,B,j,Z,Q):(a.bindVertexArray.set(this.vao),j&&j.bind(),C&&C.dynamicDraw&&C.bind(),Z&&Z.bind(),Q&&Q.bind())}freshBind(a,d,v,w,C,B,j,Z){const Q=a.numAttributes,se=this.context,ue=se.gl;this.vao&&this.destroy(),this.vao=se.createVertexArray(),se.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=w,this.boundVertexOffset=C,this.boundDynamicVertexBuffer=B,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=Z,d.enableAttributes(ue,a);for(const ye of v)ye.enableAttributes(ue,a);B&&B.enableAttributes(ue,a),j&&j.enableAttributes(ue,a),Z&&Z.enableAttributes(ue,a),d.bind(),d.setVertexAttribPointers(ue,a,C);for(const ye of v)ye.bind(),ye.setVertexAttribPointers(ue,a,C);B&&(B.bind(),B.setVertexAttribPointers(ue,a,C)),w&&w.bind(),j&&(j.bind(),j.setVertexAttribPointers(ue,a,C)),Z&&(Z.bind(),Z.setVertexAttribPointers(ue,a,C)),se.currentNumAttributes=Q}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function _l(S){const a=[];for(let d=0;d<S.length;d++){if(S[d]===null)continue;const v=S[d].split(" ");a.push(v.pop())}return a}class Wo{constructor(a,d,v,w,C,B){const j=a.gl;this.program=j.createProgram();const Z=_l(d.staticAttributes),Q=v?v.getBinderAttributes():[],se=Z.concat(Q),ue=au.prelude.staticUniforms?_l(au.prelude.staticUniforms):[],ye=d.staticUniforms?_l(d.staticUniforms):[],Le=v?v.getBinderUniforms():[],Pe=ue.concat(ye).concat(Le),Me=[];for(const ft of Pe)Me.indexOf(ft)<0&&Me.push(ft);const Se=v?v.defines():[];C&&Se.push("#define OVERDRAW_INSPECTOR;"),B&&Se.push("#define TERRAIN3D;");const Ke=Se.concat(au.prelude.fragmentSource,d.fragmentSource).join(`
`),at=Se.concat(au.prelude.vertexSource,d.vertexSource).join(`
`),Fe=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Fe,Ke),j.compileShader(Fe),!j.getShaderParameter(Fe,j.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${j.getShaderInfoLog(Fe)}`);j.attachShader(this.program,Fe);const Je=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Je,at),j.compileShader(Je),!j.getShaderParameter(Je,j.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${j.getShaderInfoLog(Je)}`);j.attachShader(this.program,Je),this.attributes={};const ut={};this.numAttributes=se.length;for(let ft=0;ft<this.numAttributes;ft++)se[ft]&&(j.bindAttribLocation(this.program,ft,se[ft]),this.attributes[se[ft]]=ft);if(j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw new Error(`Program failed to link: ${j.getProgramInfoLog(this.program)}`);j.deleteShader(Je),j.deleteShader(Fe);for(let ft=0;ft<Me.length;ft++){const mt=Me[ft];if(mt&&!ut[mt]){const Tt=j.getUniformLocation(this.program,mt);Tt&&(ut[mt]=Tt)}}this.fixedUniforms=w(a,ut),this.terrainUniforms=((ft,mt)=>({u_depth:new l.aG(ft,mt.u_depth),u_terrain:new l.aG(ft,mt.u_terrain),u_terrain_dim:new l.aH(ft,mt.u_terrain_dim),u_terrain_matrix:new l.aI(ft,mt.u_terrain_matrix),u_terrain_unpack:new l.aJ(ft,mt.u_terrain_unpack),u_terrain_exaggeration:new l.aH(ft,mt.u_terrain_exaggeration)}))(a,ut),this.binderUniforms=v?v.getUniforms(a,ut):[]}draw(a,d,v,w,C,B,j,Z,Q,se,ue,ye,Le,Pe,Me,Se,Ke,at){const Fe=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(v),a.setStencilMode(w),a.setColorMode(C),a.setCullFace(B),Z){a.activeTexture.set(Fe.TEXTURE2),Fe.bindTexture(Fe.TEXTURE_2D,Z.depthTexture),a.activeTexture.set(Fe.TEXTURE3),Fe.bindTexture(Fe.TEXTURE_2D,Z.texture);for(const ut in this.terrainUniforms)this.terrainUniforms[ut].set(Z[ut])}for(const ut in this.fixedUniforms)this.fixedUniforms[ut].set(j[ut]);Me&&Me.setUniforms(a,this.binderUniforms,Le,{zoom:Pe});let Je=0;switch(d){case Fe.LINES:Je=2;break;case Fe.TRIANGLES:Je=3;break;case Fe.LINE_STRIP:Je=1}for(const ut of ye.get()){const ft=ut.vaos||(ut.vaos={});(ft[Q]||(ft[Q]=new Id)).bind(a,this,se,Me?Me.getPaintVertexBuffers():[],ue,ut.vertexOffset,Se,Ke,at),Fe.drawElements(d,ut.primitiveLength*Je,Fe.UNSIGNED_SHORT,ut.primitiveOffset*Je*2)}}}function ii(S,a,d){const v=1/sn(d,1,a.transform.tileZoom),w=Math.pow(2,d.tileID.overscaledZ),C=d.tileSize*Math.pow(2,a.transform.tileZoom)/w,B=C*(d.tileID.canonical.x+d.tileID.wrap*w),j=C*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[v,S.fromScale,S.toScale],u_fade:S.t,u_pixel_coord_upper:[B>>16,j>>16],u_pixel_coord_lower:[65535&B,65535&j]}}const ca=(S,a,d,v)=>{const w=a.style.light,C=w.properties.get("position"),B=[C.x,C.y,C.z],j=function(){var Q=new l.A(9);return l.A!=Float32Array&&(Q[1]=0,Q[2]=0,Q[3]=0,Q[5]=0,Q[6]=0,Q[7]=0),Q[0]=1,Q[4]=1,Q[8]=1,Q}();w.properties.get("anchor")==="viewport"&&function(Q,se){var ue=Math.sin(se),ye=Math.cos(se);Q[0]=ye,Q[1]=ue,Q[2]=0,Q[3]=-ue,Q[4]=ye,Q[5]=0,Q[6]=0,Q[7]=0,Q[8]=1}(j,-a.transform.angle),function(Q,se,ue){var ye=se[0],Le=se[1],Pe=se[2];Q[0]=ye*ue[0]+Le*ue[3]+Pe*ue[6],Q[1]=ye*ue[1]+Le*ue[4]+Pe*ue[7],Q[2]=ye*ue[2]+Le*ue[5]+Pe*ue[8]}(B,B,j);const Z=w.properties.get("color");return{u_matrix:S,u_lightpos:B,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[Z.r,Z.g,Z.b],u_vertical_gradient:+d,u_opacity:v}},ff=(S,a,d,v,w,C,B)=>l.e(ca(S,a,d,v),ii(C,a,B),{u_height_factor:-Math.pow(2,w.overscaledZ)/B.tileSize/8}),nh=S=>({u_matrix:S}),rh=(S,a,d,v)=>l.e(nh(S),ii(d,a,v)),df=(S,a)=>({u_matrix:S,u_world:a}),Pd=(S,a,d,v,w)=>l.e(rh(S,a,d,v),{u_world:w}),dm=(S,a,d,v)=>{const w=S.transform;let C,B;if(v.paint.get("circle-pitch-alignment")==="map"){const j=sn(d,1,w.zoom);C=!0,B=[j,j]}else C=!1,B=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:S.translatePosMatrix(a.posMatrix,d,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:S.pixelRatio,u_extrude_scale:B}},pf=(S,a,d)=>{const v=sn(d,1,a.zoom),w=Math.pow(2,a.zoom-d.tileID.overscaledZ),C=d.tileID.overscaleFactor();return{u_matrix:S,u_camera_to_center_distance:a.cameraToCenterDistance,u_pixels_to_tile_units:v,u_extrude_scale:[a.pixelsToGLUnits[0]/(v*w),a.pixelsToGLUnits[1]/(v*w)],u_overscale_factor:C}},Ld=(S,a,d=1)=>({u_matrix:S,u_color:a,u_overlay:0,u_overlay_scale:d}),ih=S=>({u_matrix:S}),mf=(S,a,d,v)=>({u_matrix:S,u_extrude_scale:sn(a,1,d),u_intensity:v});function pm(S,a){const d=Math.pow(2,a.canonical.z),v=a.canonical.y;return[new l.Y(0,v/d).toLngLat().lat,new l.Y(0,(v+1)/d).toLngLat().lat]}const oh=(S,a,d,v)=>{const w=S.transform;return{u_matrix:sh(S,a,d,v),u_ratio:1/sn(a,1,w.zoom),u_device_pixel_ratio:S.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Kg=(S,a,d,v,w)=>l.e(oh(S,a,d,w),{u_image:0,u_image_height:v}),On=(S,a,d,v,w)=>{const C=S.transform,B=Yn(a,C);return{u_matrix:sh(S,a,d,w),u_texsize:a.imageAtlasTexture.size,u_ratio:1/sn(a,1,C.zoom),u_device_pixel_ratio:S.pixelRatio,u_image:0,u_scale:[B,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},vs=(S,a,d,v,w,C)=>{const B=S.lineAtlas,j=Yn(a,S.transform),Z=d.layout.get("line-cap")==="round",Q=B.getDash(v.from,Z),se=B.getDash(v.to,Z),ue=Q.width*w.fromScale,ye=se.width*w.toScale;return l.e(oh(S,a,d,C),{u_patternscale_a:[j/ue,-Q.height/2],u_patternscale_b:[j/ye,-se.height/2],u_sdfgamma:B.width/(256*Math.min(ue,ye)*S.pixelRatio)/2,u_image:0,u_tex_y_a:Q.y,u_tex_y_b:se.y,u_mix:w.t})};function Yn(S,a){return 1/sn(S,1,a.tileZoom)}function sh(S,a,d,v){return S.translatePosMatrix(v?v.posMatrix:a.tileID.posMatrix,a,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const ah=(S,a,d,v,w)=>{return{u_matrix:S,u_tl_parent:a,u_scale_parent:d,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(B=w.paint.get("raster-saturation"),B>0?1-1/(1.001-B):-B),u_contrast_factor:(C=w.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:rc(w.paint.get("raster-hue-rotate"))};var C,B};function rc(S){S*=Math.PI/180;const a=Math.sin(S),d=Math.cos(S);return[(2*d+1)/3,(-Math.sqrt(3)*a-d+1)/3,(Math.sqrt(3)*a-d+1)/3]}const ic=(S,a,d,v,w,C,B,j,Z,Q)=>{const se=w.transform;return{u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:se.width/se.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:B,u_coord_matrix:j,u_is_text:+Z,u_pitch_with_map:+v,u_texsize:Q,u_texture:0}},ha=(S,a,d,v,w,C,B,j,Z,Q,se)=>{const ue=w.transform;return l.e(ic(S,a,d,v,w,C,B,j,Z,Q),{u_gamma_scale:v?Math.cos(ue._pitch)*ue.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+se})},oc=(S,a,d,v,w,C,B,j,Z,Q)=>l.e(ha(S,a,d,v,w,C,B,j,!0,Z,!0),{u_texsize_icon:Q,u_texture_icon:1}),gf=(S,a,d)=>({u_matrix:S,u_opacity:a,u_color:d}),uo=(S,a,d,v,w,C)=>l.e(function(B,j,Z,Q){const se=Z.imageManager.getPattern(B.from.toString()),ue=Z.imageManager.getPattern(B.to.toString()),{width:ye,height:Le}=Z.imageManager.getPixelSize(),Pe=Math.pow(2,Q.tileID.overscaledZ),Me=Q.tileSize*Math.pow(2,Z.transform.tileZoom)/Pe,Se=Me*(Q.tileID.canonical.x+Q.tileID.wrap*Pe),Ke=Me*Q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:ue.tl,u_pattern_br_b:ue.br,u_texsize:[ye,Le],u_mix:j.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:ue.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/sn(Q,1,Z.transform.tileZoom),u_pixel_coord_upper:[Se>>16,Ke>>16],u_pixel_coord_lower:[65535&Se,65535&Ke]}}(v,C,d,w),{u_matrix:S,u_opacity:a}),lu={fillExtrusion:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_lightpos:new l.aK(S,a.u_lightpos),u_lightintensity:new l.aH(S,a.u_lightintensity),u_lightcolor:new l.aK(S,a.u_lightcolor),u_vertical_gradient:new l.aH(S,a.u_vertical_gradient),u_opacity:new l.aH(S,a.u_opacity)}),fillExtrusionPattern:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_lightpos:new l.aK(S,a.u_lightpos),u_lightintensity:new l.aH(S,a.u_lightintensity),u_lightcolor:new l.aK(S,a.u_lightcolor),u_vertical_gradient:new l.aH(S,a.u_vertical_gradient),u_height_factor:new l.aH(S,a.u_height_factor),u_image:new l.aG(S,a.u_image),u_texsize:new l.aL(S,a.u_texsize),u_pixel_coord_upper:new l.aL(S,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aL(S,a.u_pixel_coord_lower),u_scale:new l.aK(S,a.u_scale),u_fade:new l.aH(S,a.u_fade),u_opacity:new l.aH(S,a.u_opacity)}),fill:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix)}),fillPattern:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_image:new l.aG(S,a.u_image),u_texsize:new l.aL(S,a.u_texsize),u_pixel_coord_upper:new l.aL(S,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aL(S,a.u_pixel_coord_lower),u_scale:new l.aK(S,a.u_scale),u_fade:new l.aH(S,a.u_fade)}),fillOutline:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_world:new l.aL(S,a.u_world)}),fillOutlinePattern:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_world:new l.aL(S,a.u_world),u_image:new l.aG(S,a.u_image),u_texsize:new l.aL(S,a.u_texsize),u_pixel_coord_upper:new l.aL(S,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aL(S,a.u_pixel_coord_lower),u_scale:new l.aK(S,a.u_scale),u_fade:new l.aH(S,a.u_fade)}),circle:(S,a)=>({u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_scale_with_map:new l.aG(S,a.u_scale_with_map),u_pitch_with_map:new l.aG(S,a.u_pitch_with_map),u_extrude_scale:new l.aL(S,a.u_extrude_scale),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_matrix:new l.aI(S,a.u_matrix)}),collisionBox:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aH(S,a.u_pixels_to_tile_units),u_extrude_scale:new l.aL(S,a.u_extrude_scale),u_overscale_factor:new l.aH(S,a.u_overscale_factor)}),collisionCircle:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_inv_matrix:new l.aI(S,a.u_inv_matrix),u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_viewport_size:new l.aL(S,a.u_viewport_size)}),debug:(S,a)=>({u_color:new l.aM(S,a.u_color),u_matrix:new l.aI(S,a.u_matrix),u_overlay:new l.aG(S,a.u_overlay),u_overlay_scale:new l.aH(S,a.u_overlay_scale)}),clippingMask:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix)}),heatmap:(S,a)=>({u_extrude_scale:new l.aH(S,a.u_extrude_scale),u_intensity:new l.aH(S,a.u_intensity),u_matrix:new l.aI(S,a.u_matrix)}),heatmapTexture:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_world:new l.aL(S,a.u_world),u_image:new l.aG(S,a.u_image),u_color_ramp:new l.aG(S,a.u_color_ramp),u_opacity:new l.aH(S,a.u_opacity)}),hillshade:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_image:new l.aG(S,a.u_image),u_latrange:new l.aL(S,a.u_latrange),u_light:new l.aL(S,a.u_light),u_shadow:new l.aM(S,a.u_shadow),u_highlight:new l.aM(S,a.u_highlight),u_accent:new l.aM(S,a.u_accent)}),hillshadePrepare:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_image:new l.aG(S,a.u_image),u_dimension:new l.aL(S,a.u_dimension),u_zoom:new l.aH(S,a.u_zoom),u_unpack:new l.aJ(S,a.u_unpack)}),line:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_ratio:new l.aH(S,a.u_ratio),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_units_to_pixels:new l.aL(S,a.u_units_to_pixels)}),lineGradient:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_ratio:new l.aH(S,a.u_ratio),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_units_to_pixels:new l.aL(S,a.u_units_to_pixels),u_image:new l.aG(S,a.u_image),u_image_height:new l.aH(S,a.u_image_height)}),linePattern:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_texsize:new l.aL(S,a.u_texsize),u_ratio:new l.aH(S,a.u_ratio),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_image:new l.aG(S,a.u_image),u_units_to_pixels:new l.aL(S,a.u_units_to_pixels),u_scale:new l.aK(S,a.u_scale),u_fade:new l.aH(S,a.u_fade)}),lineSDF:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_ratio:new l.aH(S,a.u_ratio),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_units_to_pixels:new l.aL(S,a.u_units_to_pixels),u_patternscale_a:new l.aL(S,a.u_patternscale_a),u_patternscale_b:new l.aL(S,a.u_patternscale_b),u_sdfgamma:new l.aH(S,a.u_sdfgamma),u_image:new l.aG(S,a.u_image),u_tex_y_a:new l.aH(S,a.u_tex_y_a),u_tex_y_b:new l.aH(S,a.u_tex_y_b),u_mix:new l.aH(S,a.u_mix)}),raster:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_tl_parent:new l.aL(S,a.u_tl_parent),u_scale_parent:new l.aH(S,a.u_scale_parent),u_buffer_scale:new l.aH(S,a.u_buffer_scale),u_fade_t:new l.aH(S,a.u_fade_t),u_opacity:new l.aH(S,a.u_opacity),u_image0:new l.aG(S,a.u_image0),u_image1:new l.aG(S,a.u_image1),u_brightness_low:new l.aH(S,a.u_brightness_low),u_brightness_high:new l.aH(S,a.u_brightness_high),u_saturation_factor:new l.aH(S,a.u_saturation_factor),u_contrast_factor:new l.aH(S,a.u_contrast_factor),u_spin_weights:new l.aK(S,a.u_spin_weights)}),symbolIcon:(S,a)=>({u_is_size_zoom_constant:new l.aG(S,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aG(S,a.u_is_size_feature_constant),u_size_t:new l.aH(S,a.u_size_t),u_size:new l.aH(S,a.u_size),u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_pitch:new l.aH(S,a.u_pitch),u_rotate_symbol:new l.aG(S,a.u_rotate_symbol),u_aspect_ratio:new l.aH(S,a.u_aspect_ratio),u_fade_change:new l.aH(S,a.u_fade_change),u_matrix:new l.aI(S,a.u_matrix),u_label_plane_matrix:new l.aI(S,a.u_label_plane_matrix),u_coord_matrix:new l.aI(S,a.u_coord_matrix),u_is_text:new l.aG(S,a.u_is_text),u_pitch_with_map:new l.aG(S,a.u_pitch_with_map),u_texsize:new l.aL(S,a.u_texsize),u_texture:new l.aG(S,a.u_texture)}),symbolSDF:(S,a)=>({u_is_size_zoom_constant:new l.aG(S,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aG(S,a.u_is_size_feature_constant),u_size_t:new l.aH(S,a.u_size_t),u_size:new l.aH(S,a.u_size),u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_pitch:new l.aH(S,a.u_pitch),u_rotate_symbol:new l.aG(S,a.u_rotate_symbol),u_aspect_ratio:new l.aH(S,a.u_aspect_ratio),u_fade_change:new l.aH(S,a.u_fade_change),u_matrix:new l.aI(S,a.u_matrix),u_label_plane_matrix:new l.aI(S,a.u_label_plane_matrix),u_coord_matrix:new l.aI(S,a.u_coord_matrix),u_is_text:new l.aG(S,a.u_is_text),u_pitch_with_map:new l.aG(S,a.u_pitch_with_map),u_texsize:new l.aL(S,a.u_texsize),u_texture:new l.aG(S,a.u_texture),u_gamma_scale:new l.aH(S,a.u_gamma_scale),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_is_halo:new l.aG(S,a.u_is_halo)}),symbolTextAndIcon:(S,a)=>({u_is_size_zoom_constant:new l.aG(S,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aG(S,a.u_is_size_feature_constant),u_size_t:new l.aH(S,a.u_size_t),u_size:new l.aH(S,a.u_size),u_camera_to_center_distance:new l.aH(S,a.u_camera_to_center_distance),u_pitch:new l.aH(S,a.u_pitch),u_rotate_symbol:new l.aG(S,a.u_rotate_symbol),u_aspect_ratio:new l.aH(S,a.u_aspect_ratio),u_fade_change:new l.aH(S,a.u_fade_change),u_matrix:new l.aI(S,a.u_matrix),u_label_plane_matrix:new l.aI(S,a.u_label_plane_matrix),u_coord_matrix:new l.aI(S,a.u_coord_matrix),u_is_text:new l.aG(S,a.u_is_text),u_pitch_with_map:new l.aG(S,a.u_pitch_with_map),u_texsize:new l.aL(S,a.u_texsize),u_texsize_icon:new l.aL(S,a.u_texsize_icon),u_texture:new l.aG(S,a.u_texture),u_texture_icon:new l.aG(S,a.u_texture_icon),u_gamma_scale:new l.aH(S,a.u_gamma_scale),u_device_pixel_ratio:new l.aH(S,a.u_device_pixel_ratio),u_is_halo:new l.aG(S,a.u_is_halo)}),background:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_opacity:new l.aH(S,a.u_opacity),u_color:new l.aM(S,a.u_color)}),backgroundPattern:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_opacity:new l.aH(S,a.u_opacity),u_image:new l.aG(S,a.u_image),u_pattern_tl_a:new l.aL(S,a.u_pattern_tl_a),u_pattern_br_a:new l.aL(S,a.u_pattern_br_a),u_pattern_tl_b:new l.aL(S,a.u_pattern_tl_b),u_pattern_br_b:new l.aL(S,a.u_pattern_br_b),u_texsize:new l.aL(S,a.u_texsize),u_mix:new l.aH(S,a.u_mix),u_pattern_size_a:new l.aL(S,a.u_pattern_size_a),u_pattern_size_b:new l.aL(S,a.u_pattern_size_b),u_scale_a:new l.aH(S,a.u_scale_a),u_scale_b:new l.aH(S,a.u_scale_b),u_pixel_coord_upper:new l.aL(S,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aL(S,a.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aH(S,a.u_tile_units_to_pixels)}),terrain:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_texture:new l.aG(S,a.u_texture),u_ele_delta:new l.aH(S,a.u_ele_delta)}),terrainDepth:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_ele_delta:new l.aH(S,a.u_ele_delta)}),terrainCoords:(S,a)=>({u_matrix:new l.aI(S,a.u_matrix),u_texture:new l.aG(S,a.u_texture),u_terrain_coords_id:new l.aH(S,a.u_terrain_coords_id),u_ele_delta:new l.aH(S,a.u_ele_delta)})};class Xg{constructor(a,d,v){this.context=a;const w=a.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const uu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ad{constructor(a,d,v,w){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=w,this.context=a;const C=a.gl;this.buffer=C.createBuffer(),a.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,d){for(let v=0;v<this.attributes.length;v++){const w=d.attributes[this.attributes[v].name];w!==void 0&&a.enableVertexAttribArray(w)}}setVertexAttribPointers(a,d,v){for(let w=0;w<this.attributes.length;w++){const C=this.attributes[w],B=d.attributes[C.name];B!==void 0&&a.vertexAttribPointer(B,C.components,a[uu[C.type]],!1,this.itemSize,C.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Io=new WeakMap;function Yi(S){var a;if(Io.has(S))return Io.get(S);{const d=(a=S.getParameter(S.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return Io.set(S,d),d}}class hr{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class yf extends hr{getDefault(){return l.aO.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Jn extends hr{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class mm extends hr{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class xs extends hr{getDefault(){return[!0,!0,!0,!0]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class cu extends hr{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Od extends hr{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class gm extends hr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const d=this.current;(a.func!==d.func||a.ref!==d.ref||a.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class lh extends hr{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Yg extends hr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=a,this.dirty=!1}}class ym extends hr{getDefault(){return[0,1]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class uh extends hr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=a,this.dirty=!1}}class xv extends hr{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class _m extends hr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.BLEND):d.disable(d.BLEND),this.current=a,this.dirty=!1}}class bv extends hr{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Ua extends hr{getDefault(){return l.aO.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class wv extends hr{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Jg extends hr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=a,this.dirty=!1}}class Va extends hr{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class _f extends hr{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class kd extends hr{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class vf extends hr{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class ch extends hr{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class vm extends hr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class xm extends hr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class bm extends hr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class sc extends hr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Rd extends hr{getDefault(){return null}set(a){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class hh extends hr{getDefault(){return null}set(a){var d;if(a===this.current&&!this.dirty)return;const v=this.gl;Yi(v)?v.bindVertexArray(a):(d=v.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class ac extends hr{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class wm extends hr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class fh extends hr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class $n extends hr{constructor(a,d){super(a),this.context=a,this.parent=d}getDefault(){return null}}class Md extends $n{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class xf extends $n{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class bs extends $n{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class dh{constructor(a,d,v,w,C){this.context=a,this.width=d,this.height=v;const B=a.gl,j=this.framebuffer=B.createFramebuffer();if(this.colorAttachment=new Md(a,j),w)this.depthAttachment=C?new bs(a,j):new xf(a,j);else if(C)throw new Error("Stencil cannot be set without depth");if(B.checkFramebufferStatus(B.FRAMEBUFFER)!==B.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const a=this.context.gl,d=this.colorAttachment.get();if(d&&a.deleteTexture(d),this.depthAttachment){const v=this.depthAttachment.get();v&&a.deleteRenderbuffer(v)}a.deleteFramebuffer(this.framebuffer)}}class hi{constructor(a,d,v){this.blendFunction=a,this.blendColor=d,this.mask=v}}hi.Replace=[1,0],hi.disabled=new hi(hi.Replace,l.aO.transparent,[!1,!1,!1,!1]),hi.unblended=new hi(hi.Replace,l.aO.transparent,[!0,!0,!0,!0]),hi.alphaBlended=new hi([1,771],l.aO.transparent,[!0,!0,!0,!0]);class Ev{constructor(a){var d,v;if(this.gl=a,this.clearColor=new yf(this),this.clearDepth=new Jn(this),this.clearStencil=new mm(this),this.colorMask=new xs(this),this.depthMask=new cu(this),this.stencilMask=new Od(this),this.stencilFunc=new gm(this),this.stencilOp=new lh(this),this.stencilTest=new Yg(this),this.depthRange=new ym(this),this.depthTest=new uh(this),this.depthFunc=new xv(this),this.blend=new _m(this),this.blendFunc=new bv(this),this.blendColor=new Ua(this),this.blendEquation=new wv(this),this.cullFace=new Jg(this),this.cullFaceSide=new Va(this),this.frontFace=new _f(this),this.program=new kd(this),this.activeTexture=new vf(this),this.viewport=new ch(this),this.bindFramebuffer=new vm(this),this.bindRenderbuffer=new xm(this),this.bindTexture=new bm(this),this.bindVertexBuffer=new sc(this),this.bindElementBuffer=new Rd(this),this.bindVertexArray=new hh(this),this.pixelStoreUnpack=new ac(this),this.pixelStoreUnpackPremultiplyAlpha=new wm(this),this.pixelStoreUnpackFlipY=new fh(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),Yi(a)){this.HALF_FLOAT=a.HALF_FLOAT;const w=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=a.RGBA16F)!==null&&d!==void 0?d:w==null?void 0:w.RGBA16F_EXT,this.RGB16F=(v=a.RGB16F)!==null&&v!==void 0?v:w==null?void 0:w.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const w=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=w==null?void 0:w.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,d){return new Xg(this,a,d)}createVertexBuffer(a,d,v){return new Ad(this,a,d,v)}createRenderbuffer(a,d,v){const w=this.gl,C=w.createRenderbuffer();return this.bindRenderbuffer.set(C),w.renderbufferStorage(w.RENDERBUFFER,a,d,v),this.bindRenderbuffer.set(null),C}createFramebuffer(a,d,v,w){return new dh(this,a,d,v,w)}clear({color:a,depth:d,stencil:v}){const w=this.gl;let C=0;a&&(C|=w.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(C|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(C|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),w.clear(C)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){l.aD(a.blendFunction,hi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return Yi(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var d;return Yi(this.gl)?this.gl.deleteVertexArray(a):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}class Hn{constructor(a,d,v){this.func=a,this.mask=d,this.range=v}}Hn.ReadOnly=!1,Hn.ReadWrite=!0,Hn.disabled=new Hn(519,Hn.ReadOnly,[0,1]);const bf=7680;class Br{constructor(a,d,v,w,C,B){this.test=a,this.ref=d,this.mask=v,this.fail=w,this.depthFail=C,this.pass=B}}Br.disabled=new Br({func:519,mask:0},0,0,bf,bf,bf);class kr{constructor(a,d,v){this.enable=a,this.mode=d,this.frontFace=v}}let hu;function Nd(S,a,d,v,w,C,B){const j=S.context,Z=j.gl,Q=S.useProgram("collisionBox"),se=[];let ue=0,ye=0;for(let Fe=0;Fe<v.length;Fe++){const Je=v[Fe],ut=a.getTile(Je),ft=ut.getBucket(d);if(!ft)continue;let mt=Je.posMatrix;w[0]===0&&w[1]===0||(mt=S.translatePosMatrix(Je.posMatrix,ut,w,C));const Tt=B?ft.textCollisionBox:ft.iconCollisionBox,Et=ft.collisionCircleArray;if(Et.length>0){const Mt=l.F(),zt=mt;l.aP(Mt,ft.placementInvProjMatrix,S.transform.glCoordMatrix),l.aP(Mt,Mt,ft.placementViewportMatrix),se.push({circleArray:Et,circleOffset:ye,transform:zt,invTransform:Mt,coord:Je}),ue+=Et.length/4,ye=ue}Tt&&Q.draw(j,Z.LINES,Hn.disabled,Br.disabled,S.colorModeForRenderPass(),kr.disabled,pf(mt,S.transform,ut),S.style.map.terrain&&S.style.map.terrain.getTerrainData(Je),d.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,null,S.transform.zoom,null,null,Tt.collisionVertexBuffer)}if(!B||!se.length)return;const Le=S.useProgram("collisionCircle"),Pe=new l.aQ;Pe.resize(4*ue),Pe._trim();let Me=0;for(const Fe of se)for(let Je=0;Je<Fe.circleArray.length/4;Je++){const ut=4*Je,ft=Fe.circleArray[ut+0],mt=Fe.circleArray[ut+1],Tt=Fe.circleArray[ut+2],Et=Fe.circleArray[ut+3];Pe.emplace(Me++,ft,mt,Tt,Et,0),Pe.emplace(Me++,ft,mt,Tt,Et,1),Pe.emplace(Me++,ft,mt,Tt,Et,2),Pe.emplace(Me++,ft,mt,Tt,Et,3)}(!hu||hu.length<2*ue)&&(hu=function(Fe){const Je=2*Fe,ut=new l.aS;ut.resize(Je),ut._trim();for(let ft=0;ft<Je;ft++){const mt=6*ft;ut.uint16[mt+0]=4*ft+0,ut.uint16[mt+1]=4*ft+1,ut.uint16[mt+2]=4*ft+2,ut.uint16[mt+3]=4*ft+2,ut.uint16[mt+4]=4*ft+3,ut.uint16[mt+5]=4*ft+0}return ut}(ue));const Se=j.createIndexBuffer(hu,!0),Ke=j.createVertexBuffer(Pe,l.aR.members,!0);for(const Fe of se){const Je={u_matrix:Fe.transform,u_inv_matrix:Fe.invTransform,u_camera_to_center_distance:(at=S.transform).cameraToCenterDistance,u_viewport_size:[at.width,at.height]};Le.draw(j,Z.TRIANGLES,Hn.disabled,Br.disabled,S.colorModeForRenderPass(),kr.disabled,Je,S.style.map.terrain&&S.style.map.terrain.getTerrainData(Fe.coord),d.id,Ke,Se,l.$.simpleSegment(0,2*Fe.circleOffset,Fe.circleArray.length,Fe.circleArray.length/2),null,S.transform.zoom,null,null,null)}var at;Ke.destroy(),Se.destroy()}kr.disabled=new kr(!1,1029,2305),kr.backCCW=new kr(!0,1029,2305);const ws=l.an(new Float32Array(16));function lc(S,a,d,v,w,C){const{horizontalAlign:B,verticalAlign:j}=l.at(S);return new l.P((-(B-.5)*a/w+v[0])*C,(-(j-.5)*d/w+v[1])*C)}function Dd(S,a,d,v,w,C,B,j,Z,Q,se){const ue=S.text.placedSymbolArray,ye=S.text.dynamicLayoutVertexArray,Le=S.icon.dynamicLayoutVertexArray,Pe={};ye.clear();for(let Me=0;Me<ue.length;Me++){const Se=ue.get(Me),Ke=Se.hidden||!Se.crossTileID||S.allowVerticalPlacement&&!Se.placedOrientation?null:v[Se.crossTileID];if(Ke){const at=new l.P(Se.anchorX,Se.anchorY),Fe=qr(at,d?B:C,se),Je=Oe(w.cameraToCenterDistance,Fe.signedDistanceFromCamera);let ut=l.ai(S.textSizeData,Z,Se)*Je/l.ao;d&&(ut*=S.tilePixelRatio/j);const{width:ft,height:mt,anchor:Tt,textOffset:Et,textBoxScale:Mt}=Ke,zt=lc(Tt,ft,mt,Et,Mt,ut),Nn=d?qr(at.add(zt),C,se).point:Fe.point.add(a?zt.rotate(-w.angle):zt),$t=S.allowVerticalPlacement&&Se.placedOrientation===l.ah.vertical?Math.PI/2:0;for(let yn=0;yn<Se.numGlyphs;yn++)l.aj(ye,Nn,$t);Q&&Se.associatedIconIndex>=0&&(Pe[Se.associatedIconIndex]={shiftedAnchor:Nn,angle:$t})}else et(Se.numGlyphs,ye)}if(Q){Le.clear();const Me=S.icon.placedSymbolArray;for(let Se=0;Se<Me.length;Se++){const Ke=Me.get(Se);if(Ke.hidden)et(Ke.numGlyphs,Le);else{const at=Pe[Se];if(at)for(let Fe=0;Fe<Ke.numGlyphs;Fe++)l.aj(Le,at.shiftedAnchor,at.angle);else et(Ke.numGlyphs,Le)}}S.icon.dynamicLayoutVertexBuffer.updateData(Le)}S.text.dynamicLayoutVertexBuffer.updateData(ye)}function Ws(S,a,d){return d.iconsInText&&a?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function zd(S,a,d,v,w,C,B,j,Z,Q,se,ue){const ye=S.context,Le=ye.gl,Pe=S.transform,Me=j==="map",Se=Z==="map",Ke=j!=="viewport"&&d.layout.get("symbol-placement")!=="point",at=Me&&!Se&&!Ke,Fe=!d.layout.get("symbol-sort-key").isConstant();let Je=!1;const ut=S.depthModeForSublayer(0,Hn.ReadOnly),ft=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),mt=[];for(const Tt of v){const Et=a.getTile(Tt),Mt=Et.getBucket(d);if(!Mt)continue;const zt=w?Mt.text:Mt.icon;if(!zt||!zt.segments.get().length||!zt.hasVisibleVertices)continue;const Nn=zt.programConfigurations.get(d.id),$t=w||Mt.sdfIcons,yn=w?Mt.textSizeData:Mt.iconSizeData,Dn=Se||Pe.pitch!==0,rr=S.useProgram(Ws($t,w,Mt),Nn),Ln=l.ag(yn,Pe.zoom),Fn=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Tt);let Gn,wi,Rr,ga,co=[0,0],fi=null;if(w)wi=Et.glyphAtlasTexture,Rr=Le.LINEAR,Gn=Et.glyphAtlasTexture.size,Mt.iconsInText&&(co=Et.imageAtlasTexture.size,fi=Et.imageAtlasTexture,ga=Dn||S.options.rotating||S.options.zooming||yn.kind==="composite"||yn.kind==="camera"?Le.LINEAR:Le.NEAREST);else{const eo=d.layout.get("icon-size").constantOr(0)!==1||Mt.iconsNeedLinear;wi=Et.imageAtlasTexture,Rr=$t||S.options.rotating||S.options.zooming||eo||Dn?Le.LINEAR:Le.NEAREST,Gn=Et.imageAtlasTexture.size}const ho=sn(Et,1,S.transform.zoom),ya=Tn(Tt.posMatrix,Se,Me,S.transform,ho),mu=Hs(Tt.posMatrix,Se,Me,S.transform,ho),Eh=ft&&Mt.hasTextData(),Rm=d.layout.get("icon-text-fit")!=="none"&&Eh&&Mt.hasIconData();if(Ke){const eo=S.style.map.terrain?(Ka,to)=>S.style.map.terrain.getElevation(Tt,Ka,to):null,pi=d.layout.get("text-rotation-alignment")==="map";te(Mt,Tt.posMatrix,S,w,ya,mu,Se,Q,pi,eo)}const Sh=S.translatePosMatrix(Tt.posMatrix,Et,C,B),gu=Ke||w&&ft||Rm?ws:ya,Qi=S.translatePosMatrix(mu,Et,C,B,!0),di=$t&&d.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ai;ai=$t?Mt.iconsInText?oc(yn.kind,Ln,at,Se,S,Sh,gu,Qi,Gn,co):ha(yn.kind,Ln,at,Se,S,Sh,gu,Qi,w,Gn,!0):ic(yn.kind,Ln,at,Se,S,Sh,gu,Qi,w,Gn);const Wa={program:rr,buffers:zt,uniformValues:ai,atlasTexture:wi,atlasTextureIcon:fi,atlasInterpolation:Rr,atlasInterpolationIcon:ga,isSDF:$t,hasHalo:di};if(Fe&&Mt.canOverlap){Je=!0;const eo=zt.segments.get();for(const pi of eo)mt.push({segments:new l.$([pi]),sortKey:pi.sortKey,state:Wa,terrainData:Fn})}else mt.push({segments:zt.segments,sortKey:0,state:Wa,terrainData:Fn})}Je&&mt.sort((Tt,Et)=>Tt.sortKey-Et.sortKey);for(const Tt of mt){const Et=Tt.state;if(ye.activeTexture.set(Le.TEXTURE0),Et.atlasTexture.bind(Et.atlasInterpolation,Le.CLAMP_TO_EDGE),Et.atlasTextureIcon&&(ye.activeTexture.set(Le.TEXTURE1),Et.atlasTextureIcon&&Et.atlasTextureIcon.bind(Et.atlasInterpolationIcon,Le.CLAMP_TO_EDGE)),Et.isSDF){const Mt=Et.uniformValues;Et.hasHalo&&(Mt.u_is_halo=1,uc(Et.buffers,Tt.segments,d,S,Et.program,ut,se,ue,Mt,Tt.terrainData)),Mt.u_is_halo=0}uc(Et.buffers,Tt.segments,d,S,Et.program,ut,se,ue,Et.uniformValues,Tt.terrainData)}}function uc(S,a,d,v,w,C,B,j,Z,Q){const se=v.context;w.draw(se,se.gl.TRIANGLES,C,B,j,kr.disabled,Z,Q,d.id,S.layoutVertexBuffer,S.indexBuffer,a,d.paint,v.transform.zoom,S.programConfigurations.get(d.id),S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer)}function Fd(S,a,d,v,w){if(!d||!v||!v.imageAtlas)return;const C=v.imageAtlas.patternPositions;let B=C[d.to.toString()],j=C[d.from.toString()];if(!B&&j&&(B=j),!j&&B&&(j=B),!B||!j){const Z=w.getPaintProperty(a);B=C[Z],j=C[Z]}B&&j&&S.setConstantPatternPositions(B,j)}function ph(S,a,d,v,w,C,B){const j=S.context.gl,Z="fill-pattern",Q=d.paint.get(Z),se=Q&&Q.constantOr(1),ue=d.getCrossfadeParameters();let ye,Le,Pe,Me,Se;B?(Le=se&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ye=j.LINES):(Le=se?"fillPattern":"fill",ye=j.TRIANGLES);const Ke=Q.constantOr(null);for(const at of v){const Fe=a.getTile(at);if(se&&!Fe.patternsLoaded())continue;const Je=Fe.getBucket(d);if(!Je)continue;const ut=Je.programConfigurations.get(d.id),ft=S.useProgram(Le,ut),mt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(at);se&&(S.context.activeTexture.set(j.TEXTURE0),Fe.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),ut.updatePaintBuffers(ue)),Fd(ut,Z,Ke,Fe,d);const Tt=mt?at:null,Et=S.translatePosMatrix(Tt?Tt.posMatrix:at.posMatrix,Fe,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(B){Me=Je.indexBuffer2,Se=Je.segments2;const Mt=[j.drawingBufferWidth,j.drawingBufferHeight];Pe=Le==="fillOutlinePattern"&&se?Pd(Et,S,ue,Fe,Mt):df(Et,Mt)}else Me=Je.indexBuffer,Se=Je.segments,Pe=se?rh(Et,S,ue,Fe):nh(Et);ft.draw(S.context,ye,w,S.stencilModeForClipping(at),C,kr.disabled,Pe,mt,d.id,Je.layoutVertexBuffer,Me,Se,d.paint,S.transform.zoom,ut)}}function wf(S,a,d,v,w,C,B){const j=S.context,Z=j.gl,Q="fill-extrusion-pattern",se=d.paint.get(Q),ue=se.constantOr(1),ye=d.getCrossfadeParameters(),Le=d.paint.get("fill-extrusion-opacity"),Pe=se.constantOr(null);for(const Me of v){const Se=a.getTile(Me),Ke=Se.getBucket(d);if(!Ke)continue;const at=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Me),Fe=Ke.programConfigurations.get(d.id),Je=S.useProgram(ue?"fillExtrusionPattern":"fillExtrusion",Fe);ue&&(S.context.activeTexture.set(Z.TEXTURE0),Se.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Fe.updatePaintBuffers(ye)),Fd(Fe,Q,Pe,Se,d);const ut=S.translatePosMatrix(Me.posMatrix,Se,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ft=d.paint.get("fill-extrusion-vertical-gradient"),mt=ue?ff(ut,S,ft,Le,Me,ye,Se):ca(ut,S,ft,Le);Je.draw(j,j.gl.TRIANGLES,w,C,B,kr.backCCW,mt,at,d.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,d.paint,S.transform.zoom,Fe,S.style.map.terrain&&Ke.centroidVertexBuffer)}}function cc(S,a,d,v,w,C,B){const j=S.context,Z=j.gl,Q=d.fbo;if(!Q)return;const se=S.useProgram("hillshade"),ue=S.style.map.terrain&&S.style.map.terrain.getTerrainData(a);j.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,Q.colorAttachment.get()),se.draw(j,Z.TRIANGLES,w,C,B,kr.disabled,((ye,Le,Pe,Me)=>{const Se=Pe.paint.get("hillshade-shadow-color"),Ke=Pe.paint.get("hillshade-highlight-color"),at=Pe.paint.get("hillshade-accent-color");let Fe=Pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Pe.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=ye.transform.angle);const Je=!ye.options.moving;return{u_matrix:Me?Me.posMatrix:ye.transform.calculatePosMatrix(Le.tileID.toUnwrapped(),Je),u_image:0,u_latrange:pm(0,Le.tileID),u_light:[Pe.paint.get("hillshade-exaggeration"),Fe],u_shadow:Se,u_highlight:Ke,u_accent:at}})(S,d,v,ue?a:null),ue,v.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments)}function Em(S,a,d,v,w,C){const B=S.context,j=B.gl,Z=a.dem;if(Z&&Z.data){const Q=Z.dim,se=Z.stride,ue=Z.getPixels();if(B.activeTexture.set(j.TEXTURE1),B.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||S.getTileTexture(se),a.demTexture){const Le=a.demTexture;Le.update(ue,{premultiply:!1}),Le.bind(j.NEAREST,j.CLAMP_TO_EDGE)}else a.demTexture=new X(B,ue,j.RGBA,{premultiply:!1}),a.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);B.activeTexture.set(j.TEXTURE0);let ye=a.fbo;if(!ye){const Le=new X(B,{width:Q,height:Q,data:null},j.RGBA);Le.bind(j.LINEAR,j.CLAMP_TO_EDGE),ye=a.fbo=B.createFramebuffer(Q,Q,!0,!1),ye.colorAttachment.set(Le.texture)}B.bindFramebuffer.set(ye.framebuffer),B.viewport.set([0,0,Q,Q]),S.useProgram("hillshadePrepare").draw(B,j.TRIANGLES,v,w,C,kr.disabled,((Le,Pe)=>{const Me=Pe.stride,Se=l.F();return l.aN(Se,0,l.W,-l.W,0,0,1),l.H(Se,Se,[0,-l.W,0]),{u_matrix:Se,u_image:1,u_dimension:[Me,Me],u_zoom:Le.overscaledZ,u_unpack:Pe.getUnpackVector()}})(a.tileID,Z),null,d.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function vl(S,a,d,v,w,C){const B=v.paint.get("raster-fade-duration");if(!C&&B>0){const j=y.now(),Z=(j-S.timeAdded)/B,Q=a?(j-a.timeAdded)/B:-1,se=d.getSource(),ue=w.coveringZoomLevel({tileSize:se.tileSize,roundZoom:se.roundZoom}),ye=!a||Math.abs(a.tileID.overscaledZ-ue)>Math.abs(S.tileID.overscaledZ-ue),Le=ye&&S.refreshedUponExpiration?1:l.ac(ye?Z:1-Q,0,1);return S.refreshedUponExpiration&&Z>=1&&(S.refreshedUponExpiration=!1),a?{opacity:1,mix:1-Le}:{opacity:Le,mix:0}}return{opacity:1,mix:0}}const Ef=new l.aO(1,0,0,1),Bd=new l.aO(0,1,0,1),Sf=new l.aO(0,0,1,1),Sv=new l.aO(1,0,1,1),qa=new l.aO(0,1,1,1);function oi(S,a,d,v){Fo(S,0,a+d/2,S.transform.width,d,v)}function Es(S,a,d,v){Fo(S,a-d/2,0,d,S.transform.height,v)}function Fo(S,a,d,v,w,C){const B=S.context,j=B.gl;j.enable(j.SCISSOR_TEST),j.scissor(a*S.pixelRatio,d*S.pixelRatio,v*S.pixelRatio,w*S.pixelRatio),B.clear({color:C}),j.disable(j.SCISSOR_TEST)}function fa(S,a,d){const v=S.context,w=v.gl,C=d.posMatrix,B=S.useProgram("debug"),j=Hn.disabled,Z=Br.disabled,Q=S.colorModeForRenderPass(),se="$debug",ue=S.style.map.terrain&&S.style.map.terrain.getTerrainData(d);v.activeTexture.set(w.TEXTURE0);const ye=a.getTileByID(d.key).latestRawTileData,Le=Math.floor((ye&&ye.byteLength||0)/1024),Pe=a.getTile(d).tileSize,Me=512/Math.min(Pe,512)*(d.overscaledZ/S.transform.zoom)*.5;let Se=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(Se+=` => ${d.overscaledZ}`),function(Ke,at){Ke.initDebugOverlayCanvas();const Fe=Ke.debugOverlayCanvas,Je=Ke.context.gl,ut=Ke.debugOverlayCanvas.getContext("2d");ut.clearRect(0,0,Fe.width,Fe.height),ut.shadowColor="white",ut.shadowBlur=2,ut.lineWidth=1.5,ut.strokeStyle="white",ut.textBaseline="top",ut.font="bold 36px Open Sans, sans-serif",ut.fillText(at,5,5),ut.strokeText(at,5,5),Ke.debugOverlayTexture.update(Fe),Ke.debugOverlayTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE)}(S,`${Se} ${Le}kB`),B.draw(v,w.TRIANGLES,j,Z,hi.alphaBlended,kr.disabled,Ld(C,l.aO.transparent,Me),null,se,S.debugBuffer,S.quadTriangleIndexBuffer,S.debugSegments),B.draw(v,w.LINE_STRIP,j,Z,Q,kr.disabled,Ld(C,l.aO.red),ue,se,S.debugBuffer,S.tileBorderIndexBuffer,S.debugSegments)}function hc(S,a,d){const v=S.context,w=v.gl,C=S.colorModeForRenderPass(),B=new Hn(w.LEQUAL,Hn.ReadWrite,S.depthRangeFor3D),j=S.useProgram("terrain"),Z=a.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,S.width,S.height]);for(const Q of d){const se=S.renderToTexture.getTexture(Q),ue=a.getTerrainData(Q.tileID);v.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,se.texture);const ye={u_matrix:S.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),u_texture:0,u_ele_delta:a.getMeshFrameDelta(S.transform.zoom)};j.draw(v,w.TRIANGLES,B,Br.disabled,C,kr.backCCW,ye,ue,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}class Sm{constructor(a,d){this.context=new Ev(a),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Xr.maxUnderzooming+Xr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _s}resize(a,d,v){if(this.width=Math.floor(a*v),this.height=Math.floor(d*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const a=this.context,d=new l.aV;d.emplaceBack(0,0),d.emplaceBack(l.W,0),d.emplaceBack(0,l.W),d.emplaceBack(l.W,l.W),this.tileExtentBuffer=a.createVertexBuffer(d,Jr.members),this.tileExtentSegments=l.$.simpleSegment(0,0,4,2);const v=new l.aV;v.emplaceBack(0,0),v.emplaceBack(l.W,0),v.emplaceBack(0,l.W),v.emplaceBack(l.W,l.W),this.debugBuffer=a.createVertexBuffer(v,Jr.members),this.debugSegments=l.$.simpleSegment(0,0,4,5);const w=new l.Z;w.emplaceBack(0,0,0,0),w.emplaceBack(l.W,0,l.W,0),w.emplaceBack(0,l.W,0,l.W),w.emplaceBack(l.W,l.W,l.W,l.W),this.rasterBoundsBuffer=a.createVertexBuffer(w,_t.members),this.rasterBoundsSegments=l.$.simpleSegment(0,0,4,2);const C=new l.aV;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(C,Jr.members),this.viewportSegments=l.$.simpleSegment(0,0,4,2);const B=new l.aW;B.emplaceBack(0),B.emplaceBack(1),B.emplaceBack(3),B.emplaceBack(2),B.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(B);const j=new l.aX;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(j);const Z=this.context.gl;this.stencilClearMode=new Br({func:Z.ALWAYS,mask:0},0,255,Z.ZERO,Z.ZERO,Z.ZERO)}clearStencil(){const a=this.context,d=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=l.F();l.aN(v,0,this.width,this.height,0,0,1),l.J(v,v,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,d.TRIANGLES,Hn.disabled,this.stencilClearMode,hi.disabled,kr.disabled,ih(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,d){if(this.currentStencilSource===a.source||!a.isTileClipped()||!d||!d.length)return;this.currentStencilSource=a.source;const v=this.context,w=v.gl;this.nextStencilID+d.length>256&&this.clearStencil(),v.setColorMode(hi.disabled),v.setDepthMode(Hn.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const B of d){const j=this._tileClippingMaskIDs[B.key]=this.nextStencilID++,Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B);C.draw(v,w.TRIANGLES,Hn.disabled,new Br({func:w.ALWAYS,mask:0},j,255,w.KEEP,w.KEEP,w.REPLACE),hi.disabled,kr.disabled,ih(B.posMatrix),Z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,d=this.context.gl;return new Br({func:d.NOTEQUAL,mask:255},a,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(a){const d=this.context.gl;return new Br({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(a){const d=this.context.gl,v=a.sort((B,j)=>j.overscaledZ-B.overscaledZ),w=v[v.length-1].overscaledZ,C=v[0].overscaledZ-w+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const B={};for(let j=0;j<C;j++)B[j+w]=new Br({func:d.GEQUAL,mask:255},j+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=C,[B,v]}return[{[w]:Br.disabled},v]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new hi([a.CONSTANT_COLOR,a.ONE],new l.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?hi.unblended:hi.alphaBlended}depthModeForSublayer(a,d,v){if(!this.opaquePassEnabledForLayer())return Hn.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Hn(v||this.context.gl.LEQUAL,d,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,d){this.style=a,this.options=d,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(y.now()),this.imageManager.beginFrame();const v=this.style._order,w=this.style.sourceCaches,C={},B={},j={};for(const Z in w){const Q=w[Z];Q.used&&Q.prepare(this.context),C[Z]=Q.getVisibleCoordinates(),B[Z]=C[Z].slice().reverse(),j[Z]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Z=0;Z<v.length;Z++)if(this.style._layers[v[Z]].is3D()){this.opaquePassCutoff=Z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Z of v){const Q=this.style._layers[Z];if(!Q.hasOffscreenPass()||Q.isHidden(this.transform.zoom))continue;const se=B[Q.source];(Q.type==="custom"||se.length)&&this.renderLayer(this,w[Q.source],Q,se)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?l.aO.black:l.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const Z=this.style._layers[v[this.currentLayer]],Q=w[Z.source],se=C[Z.source];this._renderTileClippingMasks(Z,se),this.renderLayer(this,Q,Z,se)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const Z=this.style._layers[v[this.currentLayer]],Q=w[Z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Z))continue;const se=(Z.type==="symbol"?j:B)[Z.source];this._renderTileClippingMasks(Z,C[Z.source]),this.renderLayer(this,Q,Z,se)}if(this.options.showTileBoundaries){const Z=function(Q,se){let ue=null;const ye=Object.values(Q._layers).flatMap(Se=>Se.source&&!Se.isHidden(se)?[Q.sourceCaches[Se.source]]:[]),Le=ye.filter(Se=>Se.getSource().type==="vector"),Pe=ye.filter(Se=>Se.getSource().type!=="vector"),Me=Se=>{(!ue||ue.getSource().maxzoom<Se.getSource().maxzoom)&&(ue=Se)};return Le.forEach(Se=>Me(Se)),ue||Pe.forEach(Se=>Me(Se)),ue}(this.style,this.transform.zoom);Z&&function(Q,se,ue){for(let ye=0;ye<ue.length;ye++)fa(Q,se,ue[ye])}(this,Z,Z.getVisibleCoordinates())}this.options.showPadding&&function(Z){const Q=Z.transform.padding;oi(Z,Z.transform.height-(Q.top||0),3,Ef),oi(Z,Q.bottom||0,3,Bd),Es(Z,Q.left||0,3,Sf),Es(Z,Z.transform.width-(Q.right||0),3,Sv);const se=Z.transform.centerPoint;(function(ue,ye,Le,Pe){Fo(ue,ye-1,Le-10,2,20,Pe),Fo(ue,ye-10,Le-1,20,2,Pe)})(Z,se.x,Z.transform.height-se.y,qa)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,v=this.transform.projMatrix;let w=this.terrainFacilitator.dirty;w||(w=a?!l.aY(d,v):!l.aZ(d,v)),w||(w=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),w&&(l.a_(d,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(C,B){const j=C.context,Z=j.gl,Q=hi.unblended,se=new Hn(Z.LEQUAL,Hn.ReadWrite,[0,1]),ue=B.getTerrainMesh(),ye=B.sourceCache.getRenderableTiles(),Le=C.useProgram("terrainDepth");j.bindFramebuffer.set(B.getFramebuffer("depth").framebuffer),j.viewport.set([0,0,C.width/devicePixelRatio,C.height/devicePixelRatio]),j.clear({color:l.aO.transparent,depth:1});for(const Pe of ye){const Me=B.getTerrainData(Pe.tileID),Se={u_matrix:C.transform.calculatePosMatrix(Pe.tileID.toUnwrapped()),u_ele_delta:B.getMeshFrameDelta(C.transform.zoom)};Le.draw(j,Z.TRIANGLES,se,Br.disabled,Q,kr.backCCW,Se,Me,"terrain",ue.vertexBuffer,ue.indexBuffer,ue.segments)}j.bindFramebuffer.set(null),j.viewport.set([0,0,C.width,C.height])}(this,this.style.map.terrain),function(C,B){const j=C.context,Z=j.gl,Q=hi.unblended,se=new Hn(Z.LEQUAL,Hn.ReadWrite,[0,1]),ue=B.getTerrainMesh(),ye=B.getCoordsTexture(),Le=B.sourceCache.getRenderableTiles(),Pe=C.useProgram("terrainCoords");j.bindFramebuffer.set(B.getFramebuffer("coords").framebuffer),j.viewport.set([0,0,C.width/devicePixelRatio,C.height/devicePixelRatio]),j.clear({color:l.aO.transparent,depth:1}),B.coordsIndex=[];for(const Me of Le){const Se=B.getTerrainData(Me.tileID);j.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,ye.texture);const Ke={u_matrix:C.transform.calculatePosMatrix(Me.tileID.toUnwrapped()),u_terrain_coords_id:(255-B.coordsIndex.length)/255,u_texture:0,u_ele_delta:B.getMeshFrameDelta(C.transform.zoom)};Pe.draw(j,Z.TRIANGLES,se,Br.disabled,Q,kr.backCCW,Ke,Se,"terrain",ue.vertexBuffer,ue.indexBuffer,ue.segments),B.coordsIndex.push(Me.tileID.key)}j.bindFramebuffer.set(null),j.viewport.set([0,0,C.width,C.height])}(this,this.style.map.terrain))}renderLayer(a,d,v,w){if(!v.isHidden(this.transform.zoom)&&(v.type==="background"||v.type==="custom"||(w||[]).length))switch(this.id=v.id,v.type){case"symbol":(function(C,B,j,Z,Q){if(C.renderPass!=="translucent")return;const se=Br.disabled,ue=C.colorModeForRenderPass();(j._unevaluatedLayout.hasValue("text-variable-anchor")||j._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ye,Le,Pe,Me,Se,Ke,at){const Fe=Le.transform,Je=Se==="map",ut=Ke==="map";for(const ft of ye){const mt=Me.getTile(ft),Tt=mt.getBucket(Pe);if(!Tt||!Tt.text||!Tt.text.segments.get().length)continue;const Et=l.ag(Tt.textSizeData,Fe.zoom),Mt=sn(mt,1,Le.transform.zoom),zt=Tn(ft.posMatrix,ut,Je,Le.transform,Mt),Nn=Pe.layout.get("icon-text-fit")!=="none"&&Tt.hasIconData();if(Et){const $t=Math.pow(2,Fe.zoom-mt.tileID.overscaledZ);Dd(Tt,Je,ut,at,Fe,zt,ft.posMatrix,$t,Et,Nn,Le.style.map.terrain?(yn,Dn)=>Le.style.map.terrain.getElevation(ft,yn,Dn):null)}}}(Z,C,j,B,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),Q),j.paint.get("icon-opacity").constantOr(1)!==0&&zd(C,B,j,Z,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),se,ue),j.paint.get("text-opacity").constantOr(1)!==0&&zd(C,B,j,Z,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),se,ue),B.map.showCollisionBoxes&&(Nd(C,B,j,Z,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),Nd(C,B,j,Z,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))})(a,d,v,w,this.style.placement.variableOffsets);break;case"circle":(function(C,B,j,Z){if(C.renderPass!=="translucent")return;const Q=j.paint.get("circle-opacity"),se=j.paint.get("circle-stroke-width"),ue=j.paint.get("circle-stroke-opacity"),ye=!j.layout.get("circle-sort-key").isConstant();if(Q.constantOr(1)===0&&(se.constantOr(1)===0||ue.constantOr(1)===0))return;const Le=C.context,Pe=Le.gl,Me=C.depthModeForSublayer(0,Hn.ReadOnly),Se=Br.disabled,Ke=C.colorModeForRenderPass(),at=[];for(let Fe=0;Fe<Z.length;Fe++){const Je=Z[Fe],ut=B.getTile(Je),ft=ut.getBucket(j);if(!ft)continue;const mt=ft.programConfigurations.get(j.id),Tt=C.useProgram("circle",mt),Et=ft.layoutVertexBuffer,Mt=ft.indexBuffer,zt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Je),Nn={programConfiguration:mt,program:Tt,layoutVertexBuffer:Et,indexBuffer:Mt,uniformValues:dm(C,Je,ut,j),terrainData:zt};if(ye){const $t=ft.segments.get();for(const yn of $t)at.push({segments:new l.$([yn]),sortKey:yn.sortKey,state:Nn})}else at.push({segments:ft.segments,sortKey:0,state:Nn})}ye&&at.sort((Fe,Je)=>Fe.sortKey-Je.sortKey);for(const Fe of at){const{programConfiguration:Je,program:ut,layoutVertexBuffer:ft,indexBuffer:mt,uniformValues:Tt,terrainData:Et}=Fe.state;ut.draw(Le,Pe.TRIANGLES,Me,Se,Ke,kr.disabled,Tt,Et,j.id,ft,mt,Fe.segments,j.paint,C.transform.zoom,Je)}})(a,d,v,w);break;case"heatmap":(function(C,B,j,Z){if(j.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){const Q=C.context,se=Q.gl,ue=Br.disabled,ye=new hi([se.ONE,se.ONE],l.aO.transparent,[!0,!0,!0,!0]);(function(Le,Pe,Me){const Se=Le.gl;Le.activeTexture.set(Se.TEXTURE1),Le.viewport.set([0,0,Pe.width/4,Pe.height/4]);let Ke=Me.heatmapFbo;if(Ke)Se.bindTexture(Se.TEXTURE_2D,Ke.colorAttachment.get()),Le.bindFramebuffer.set(Ke.framebuffer);else{const at=Se.createTexture();Se.bindTexture(Se.TEXTURE_2D,at),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_S,Se.CLAMP_TO_EDGE),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_T,Se.CLAMP_TO_EDGE),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MIN_FILTER,Se.LINEAR),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MAG_FILTER,Se.LINEAR),Ke=Me.heatmapFbo=Le.createFramebuffer(Pe.width/4,Pe.height/4,!1,!1),function(Fe,Je,ut,ft){var mt,Tt;const Et=Fe.gl,Mt=(mt=Fe.HALF_FLOAT)!==null&&mt!==void 0?mt:Et.UNSIGNED_BYTE,zt=(Tt=Fe.RGBA16F)!==null&&Tt!==void 0?Tt:Et.RGBA;Et.texImage2D(Et.TEXTURE_2D,0,zt,Je.width/4,Je.height/4,0,Et.RGBA,Mt,null),ft.colorAttachment.set(ut)}(Le,Pe,at,Ke)}})(Q,C,j),Q.clear({color:l.aO.transparent});for(let Le=0;Le<Z.length;Le++){const Pe=Z[Le];if(B.hasRenderableParent(Pe))continue;const Me=B.getTile(Pe),Se=Me.getBucket(j);if(!Se)continue;const Ke=Se.programConfigurations.get(j.id),at=C.useProgram("heatmap",Ke),{zoom:Fe}=C.transform;at.draw(Q,se.TRIANGLES,Hn.disabled,ue,ye,kr.disabled,mf(Pe.posMatrix,Me,Fe,j.paint.get("heatmap-intensity")),null,j.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,j.paint,C.transform.zoom,Ke)}Q.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),function(Q,se){const ue=Q.context,ye=ue.gl,Le=se.heatmapFbo;if(!Le)return;ue.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,Le.colorAttachment.get()),ue.activeTexture.set(ye.TEXTURE1);let Pe=se.colorRampTexture;Pe||(Pe=se.colorRampTexture=new X(ue,se.colorRamp,ye.RGBA)),Pe.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Q.useProgram("heatmapTexture").draw(ue,ye.TRIANGLES,Hn.disabled,Br.disabled,Q.colorModeForRenderPass(),kr.disabled,((Me,Se,Ke,at)=>{const Fe=l.F();l.aN(Fe,0,Me.width,Me.height,0,0,1);const Je=Me.context.gl;return{u_matrix:Fe,u_world:[Je.drawingBufferWidth,Je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Se.paint.get("heatmap-opacity")}})(Q,se),null,se.id,Q.viewportBuffer,Q.quadTriangleIndexBuffer,Q.viewportSegments,se.paint,Q.transform.zoom)}(C,j))})(a,d,v,w);break;case"line":(function(C,B,j,Z){if(C.renderPass!=="translucent")return;const Q=j.paint.get("line-opacity"),se=j.paint.get("line-width");if(Q.constantOr(1)===0||se.constantOr(1)===0)return;const ue=C.depthModeForSublayer(0,Hn.ReadOnly),ye=C.colorModeForRenderPass(),Le=j.paint.get("line-dasharray"),Pe=j.paint.get("line-pattern"),Me=Pe.constantOr(1),Se=j.paint.get("line-gradient"),Ke=j.getCrossfadeParameters(),at=Me?"linePattern":Le?"lineSDF":Se?"lineGradient":"line",Fe=C.context,Je=Fe.gl;let ut=!0;for(const ft of Z){const mt=B.getTile(ft);if(Me&&!mt.patternsLoaded())continue;const Tt=mt.getBucket(j);if(!Tt)continue;const Et=Tt.programConfigurations.get(j.id),Mt=C.context.program.get(),zt=C.useProgram(at,Et),Nn=ut||zt.program!==Mt,$t=C.style.map.terrain&&C.style.map.terrain.getTerrainData(ft),yn=Pe.constantOr(null);if(yn&&mt.imageAtlas){const Ln=mt.imageAtlas,Fn=Ln.patternPositions[yn.to.toString()],Gn=Ln.patternPositions[yn.from.toString()];Fn&&Gn&&Et.setConstantPatternPositions(Fn,Gn)}const Dn=$t?ft:null,rr=Me?On(C,mt,j,Ke,Dn):Le?vs(C,mt,j,Le,Ke,Dn):Se?Kg(C,mt,j,Tt.lineClipsArray.length,Dn):oh(C,mt,j,Dn);if(Me)Fe.activeTexture.set(Je.TEXTURE0),mt.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),Et.updatePaintBuffers(Ke);else if(Le&&(Nn||C.lineAtlas.dirty))Fe.activeTexture.set(Je.TEXTURE0),C.lineAtlas.bind(Fe);else if(Se){const Ln=Tt.gradients[j.id];let Fn=Ln.texture;if(j.gradientVersion!==Ln.version){let Gn=256;if(j.stepInterpolant){const wi=B.getSource().maxzoom,Rr=ft.canonical.z===wi?Math.ceil(1<<C.transform.maxZoom-ft.canonical.z):1;Gn=l.ac(l.aT(Tt.maxLineLength/l.W*1024*Rr),256,Fe.maxTextureSize)}Ln.gradient=l.aU({expression:j.gradientExpression(),evaluationKey:"lineProgress",resolution:Gn,image:Ln.gradient||void 0,clips:Tt.lineClipsArray}),Ln.texture?Ln.texture.update(Ln.gradient):Ln.texture=new X(Fe,Ln.gradient,Je.RGBA),Ln.version=j.gradientVersion,Fn=Ln.texture}Fe.activeTexture.set(Je.TEXTURE0),Fn.bind(j.stepInterpolant?Je.NEAREST:Je.LINEAR,Je.CLAMP_TO_EDGE)}zt.draw(Fe,Je.TRIANGLES,ue,C.stencilModeForClipping(ft),ye,kr.disabled,rr,$t,j.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,j.paint,C.transform.zoom,Et,Tt.layoutVertexBuffer2),ut=!1}})(a,d,v,w);break;case"fill":(function(C,B,j,Z){const Q=j.paint.get("fill-color"),se=j.paint.get("fill-opacity");if(se.constantOr(1)===0)return;const ue=C.colorModeForRenderPass(),ye=j.paint.get("fill-pattern"),Le=C.opaquePassEnabledForLayer()&&!ye.constantOr(1)&&Q.constantOr(l.aO.transparent).a===1&&se.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===Le){const Pe=C.depthModeForSublayer(1,C.renderPass==="opaque"?Hn.ReadWrite:Hn.ReadOnly);ph(C,B,j,Z,Pe,ue,!1)}if(C.renderPass==="translucent"&&j.paint.get("fill-antialias")){const Pe=C.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,Hn.ReadOnly);ph(C,B,j,Z,Pe,ue,!0)}})(a,d,v,w);break;case"fill-extrusion":(function(C,B,j,Z){const Q=j.paint.get("fill-extrusion-opacity");if(Q!==0&&C.renderPass==="translucent"){const se=new Hn(C.context.gl.LEQUAL,Hn.ReadWrite,C.depthRangeFor3D);if(Q!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))wf(C,B,j,Z,se,Br.disabled,hi.disabled),wf(C,B,j,Z,se,C.stencilModeFor3D(),C.colorModeForRenderPass());else{const ue=C.colorModeForRenderPass();wf(C,B,j,Z,se,Br.disabled,ue)}}})(a,d,v,w);break;case"hillshade":(function(C,B,j,Z){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const Q=C.context,se=C.depthModeForSublayer(0,Hn.ReadOnly),ue=C.colorModeForRenderPass(),[ye,Le]=C.renderPass==="translucent"?C.stencilConfigForOverlap(Z):[{},Z];for(const Pe of Le){const Me=B.getTile(Pe);Me.needsHillshadePrepare!==void 0&&Me.needsHillshadePrepare&&C.renderPass==="offscreen"?Em(C,Me,j,se,Br.disabled,ue):C.renderPass==="translucent"&&cc(C,Pe,Me,j,se,ye[Pe.overscaledZ],ue)}Q.viewport.set([0,0,C.width,C.height])})(a,d,v,w);break;case"raster":(function(C,B,j,Z){if(C.renderPass!=="translucent"||j.paint.get("raster-opacity")===0||!Z.length)return;const Q=C.context,se=Q.gl,ue=B.getSource(),ye=C.useProgram("raster"),Le=C.colorModeForRenderPass(),[Pe,Me]=ue instanceof Pt?[{},Z]:C.stencilConfigForOverlap(Z),Se=Me[Me.length-1].overscaledZ,Ke=!C.options.moving;for(const at of Me){const Fe=C.depthModeForSublayer(at.overscaledZ-Se,j.paint.get("raster-opacity")===1?Hn.ReadWrite:Hn.ReadOnly,se.LESS),Je=B.getTile(at);Je.registerFadeDuration(j.paint.get("raster-fade-duration"));const ut=B.findLoadedParent(at,0),ft=vl(Je,ut,B,j,C.transform,C.style.map.terrain);let mt,Tt;const Et=j.paint.get("raster-resampling")==="nearest"?se.NEAREST:se.LINEAR;Q.activeTexture.set(se.TEXTURE0),Je.texture.bind(Et,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),Q.activeTexture.set(se.TEXTURE1),ut?(ut.texture.bind(Et,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),mt=Math.pow(2,ut.tileID.overscaledZ-Je.tileID.overscaledZ),Tt=[Je.tileID.canonical.x*mt%1,Je.tileID.canonical.y*mt%1]):Je.texture.bind(Et,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST);const Mt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(at),zt=Mt?at:null,Nn=zt?zt.posMatrix:C.transform.calculatePosMatrix(at.toUnwrapped(),Ke),$t=ah(Nn,Tt||[0,0],mt||1,ft,j);ue instanceof Pt?ye.draw(Q,se.TRIANGLES,Fe,Br.disabled,Le,kr.disabled,$t,Mt,j.id,ue.boundsBuffer,C.quadTriangleIndexBuffer,ue.boundsSegments):ye.draw(Q,se.TRIANGLES,Fe,Pe[at.overscaledZ],Le,kr.disabled,$t,Mt,j.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}})(a,d,v,w);break;case"background":(function(C,B,j,Z){const Q=j.paint.get("background-color"),se=j.paint.get("background-opacity");if(se===0)return;const ue=C.context,ye=ue.gl,Le=C.transform,Pe=Le.tileSize,Me=j.paint.get("background-pattern");if(C.isPatternMissing(Me))return;const Se=!Me&&Q.a===1&&se===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==Se)return;const Ke=Br.disabled,at=C.depthModeForSublayer(0,Se==="opaque"?Hn.ReadWrite:Hn.ReadOnly),Fe=C.colorModeForRenderPass(),Je=C.useProgram(Me?"backgroundPattern":"background"),ut=Z||Le.coveringTiles({tileSize:Pe,terrain:C.style.map.terrain});Me&&(ue.activeTexture.set(ye.TEXTURE0),C.imageManager.bind(C.context));const ft=j.getCrossfadeParameters();for(const mt of ut){const Tt=Z?mt.posMatrix:C.transform.calculatePosMatrix(mt.toUnwrapped()),Et=Me?uo(Tt,se,C,Me,{tileID:mt,tileSize:Pe},ft):gf(Tt,se,Q),Mt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(mt);Je.draw(ue,ye.TRIANGLES,at,Ke,Fe,kr.disabled,Et,Mt,j.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}})(a,0,v,w);break;case"custom":(function(C,B,j){const Z=C.context,Q=j.implementation;if(C.renderPass==="offscreen"){const se=Q.prerender;se&&(C.setCustomLayerDefaults(),Z.setColorMode(C.colorModeForRenderPass()),se.call(Q,Z.gl,C.transform.customLayerMatrix()),Z.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),Z.setColorMode(C.colorModeForRenderPass()),Z.setStencilMode(Br.disabled);const se=Q.renderingMode==="3d"?new Hn(C.context.gl.LEQUAL,Hn.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,Hn.ReadOnly);Z.setDepthMode(se),Q.render(Z.gl,C.transform.customLayerMatrix()),Z.setDirty(),C.setBaseState(),Z.bindFramebuffer.set(null)}})(a,0,v)}}translatePosMatrix(a,d,v,w,C){if(!v[0]&&!v[1])return a;const B=C?w==="map"?this.transform.angle:0:w==="viewport"?-this.transform.angle:0;if(B){const Q=Math.sin(B),se=Math.cos(B);v=[v[0]*se-v[1]*Q,v[0]*Q+v[1]*se]}const j=[C?v[0]:sn(d,v[0],this.transform.zoom),C?v[1]:sn(d,v[1],this.transform.zoom),0],Z=new Float32Array(16);return l.H(Z,a,j),Z}saveTileTexture(a){const d=this._tileTextures[a.size[0]];d?d.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const d=this._tileTextures[a];return d&&d.length>0?d.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const d=this.imageManager.getPattern(a.from.toString()),v=this.imageManager.getPattern(a.to.toString());return!d||!v}useProgram(a,d){this.cache=this.cache||{};const v=a+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new Wo(this.context,au[a],d,lu[a],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new X(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:d}=this.context.gl;return this.width!==a||this.height!==d}}class Ga{constructor(a,d){this.points=a,this.planes=d}static fromInvProjectionMatrix(a,d,v){const w=Math.pow(2,v),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>{const Z=1/(j=l.af([],j,a))[3]/d*w;return l.a$(j,j,[Z,Z,1/j[3],Z])}),B=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{const Z=function(ye,Le){var Pe=Le[0],Me=Le[1],Se=Le[2],Ke=Pe*Pe+Me*Me+Se*Se;return Ke>0&&(Ke=1/Math.sqrt(Ke)),ye[0]=Le[0]*Ke,ye[1]=Le[1]*Ke,ye[2]=Le[2]*Ke,ye}([],function(ye,Le,Pe){var Me=Le[0],Se=Le[1],Ke=Le[2],at=Pe[0],Fe=Pe[1],Je=Pe[2];return ye[0]=Se*Je-Ke*Fe,ye[1]=Ke*at-Me*Je,ye[2]=Me*Fe-Se*at,ye}([],H([],C[j[0]],C[j[1]]),H([],C[j[2]],C[j[1]]))),Q=-((se=Z)[0]*(ue=C[j[1]])[0]+se[1]*ue[1]+se[2]*ue[2]);var se,ue;return Z.concat(Q)});return new Ga(C,B)}}class da{constructor(a,d){this.min=a,this.max=d,this.center=function(v,w,C){return v[0]=.5*w[0],v[1]=.5*w[1],v[2]=.5*w[2],v}([],function(v,w,C){return v[0]=w[0]+C[0],v[1]=w[1]+C[1],v[2]=w[2]+C[2],v}([],this.min,this.max))}quadrant(a){const d=[a%2==0,a<2],v=V(this.min),w=V(this.max);for(let C=0;C<d.length;C++)v[C]=d[C]?this.min[C]:this.center[C],w[C]=d[C]?this.center[C]:this.max[C];return w[2]=this.max[2],new da(v,w)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let v=!0;for(let w=0;w<a.planes.length;w++){const C=a.planes[w];let B=0;for(let j=0;j<d.length;j++)l.b0(C,d[j])>=0&&B++;if(B===0)return 0;B!==d.length&&(v=!1)}if(v)return 2;for(let w=0;w<3;w++){let C=Number.MAX_VALUE,B=-Number.MAX_VALUE;for(let j=0;j<a.points.length;j++){const Z=a.points[j][w]-this.min[w];C=Math.min(C,Z),B=Math.max(B,Z)}if(B<0||C>this.max[w]-this.min[w])return 0}return 1}}class fu{constructor(a=0,d=0,v=0,w=0){if(isNaN(a)||a<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=d,this.left=v,this.right=w}interpolate(a,d,v){return d.top!=null&&a.top!=null&&(this.top=l.z.number(a.top,d.top,v)),d.bottom!=null&&a.bottom!=null&&(this.bottom=l.z.number(a.bottom,d.bottom,v)),d.left!=null&&a.left!=null&&(this.left=l.z.number(a.left,d.left,v)),d.right!=null&&a.right!=null&&(this.right=l.z.number(a.right,d.right,v)),this}getCenter(a,d){const v=l.ac((this.left+a-this.right)/2,0,a),w=l.ac((this.top+d-this.bottom)/2,0,d);return new l.P(v,w)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new fu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const mh=85.051129;class xl{constructor(a,d,v,w,C){this.tileSize=512,this._renderWorldCopies=C===void 0||!!C,this._minZoom=a||0,this._maxZoom=d||22,this._minPitch=v??0,this._maxPitch=w??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fu,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const a=new xl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.apply(this),a}apply(a){this.tileSize=a.tileSize,this.latRange=a.latRange,this.width=a.width,this.height=a.height,this._center=a._center,this._elevation=a._elevation,this.minElevationForCurrentTile=a.minElevationForCurrentTile,this.zoom=a.zoom,this.angle=a.angle,this._fov=a._fov,this._pitch=a._pitch,this._unmodified=a._unmodified,this._edgeInsets=a._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){const d=-l.b1(a,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var v=new l.A(4);return l.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}(),function(v,w,C){var B=w[0],j=w[1],Z=w[2],Q=w[3],se=Math.sin(C),ue=Math.cos(C);v[0]=B*ue+Z*se,v[1]=j*ue+Q*se,v[2]=B*-se+Z*ue,v[3]=j*-se+Q*ue}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const d=l.ac(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){const d=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,d,v){this._unmodified=!1,this._edgeInsets.interpolate(a,d,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const d=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(a){const d=[new l.b2(0,a)];if(this._renderWorldCopies){const v=this.pointCoordinate(new l.P(0,0)),w=this.pointCoordinate(new l.P(this.width,0)),C=this.pointCoordinate(new l.P(this.width,this.height)),B=this.pointCoordinate(new l.P(0,this.height)),j=Math.floor(Math.min(v.x,w.x,C.x,B.x)),Z=Math.floor(Math.max(v.x,w.x,C.x,B.x)),Q=1;for(let se=j-Q;se<=Z+Q;se++)se!==0&&d.push(new l.b2(se,a))}return d}coveringTiles(a){var d,v;let w=this.coveringZoomLevel(a);const C=w;if(a.minzoom!==void 0&&w<a.minzoom)return[];a.maxzoom!==void 0&&w>a.maxzoom&&(w=a.maxzoom);const B=this.pointCoordinate(this.getCameraPoint()),j=l.Y.fromLngLat(this.center),Z=Math.pow(2,w),Q=[Z*B.x,Z*B.y,0],se=[Z*j.x,Z*j.y,0],ue=Ga.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,w);let ye=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ye=w);const Le=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,Pe=Fe=>({aabb:new da([Fe*Z,0,0],[(Fe+1)*Z,Z,0]),zoom:0,x:0,y:0,wrap:Fe,fullyVisible:!1}),Me=[],Se=[],Ke=w,at=a.reparseOverscaled?C:w;if(this._renderWorldCopies)for(let Fe=1;Fe<=3;Fe++)Me.push(Pe(-Fe)),Me.push(Pe(Fe));for(Me.push(Pe(0));Me.length>0;){const Fe=Me.pop(),Je=Fe.x,ut=Fe.y;let ft=Fe.fullyVisible;if(!ft){const zt=Fe.aabb.intersects(ue);if(zt===0)continue;ft=zt===2}const mt=a.terrain?Q:se,Tt=Fe.aabb.distanceX(mt),Et=Fe.aabb.distanceY(mt),Mt=Math.max(Math.abs(Tt),Math.abs(Et));if(Fe.zoom===Ke||Mt>Le+(1<<Ke-Fe.zoom)-2&&Fe.zoom>=ye){const zt=Ke-Fe.zoom,Nn=Q[0]-.5-(Je<<zt),$t=Q[1]-.5-(ut<<zt);Se.push({tileID:new l.Q(Fe.zoom===Ke?at:Fe.zoom,Fe.wrap,Fe.zoom,Je,ut),distanceSq:J([se[0]-.5-Je,se[1]-.5-ut]),tileDistanceToCamera:Math.sqrt(Nn*Nn+$t*$t)})}else for(let zt=0;zt<4;zt++){const Nn=(Je<<1)+zt%2,$t=(ut<<1)+(zt>>1),yn=Fe.zoom+1;let Dn=Fe.aabb.quadrant(zt);if(a.terrain){const rr=new l.Q(yn,Fe.wrap,yn,Nn,$t),Ln=a.terrain.getMinMaxElevation(rr),Fn=(d=Ln.minElevation)!==null&&d!==void 0?d:this.elevation,Gn=(v=Ln.maxElevation)!==null&&v!==void 0?v:this.elevation;Dn=new da([Dn.min[0],Dn.min[1],Fn],[Dn.max[0],Dn.max[1],Gn])}Me.push({aabb:Dn,zoom:yn,x:Nn,y:$t,wrap:Fe.wrap,fullyVisible:ft})}}return Se.sort((Fe,Je)=>Fe.distanceSq-Je.distanceSq).map(Fe=>Fe.tileID)}resize(a,d){this.width=a,this.height=d,this.pixelsToGLUnits=[2/a,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const d=l.ac(a.lat,-85.051129,mh);return new l.P(l.N(a.lng)*this.worldSize,l.O(d)*this.worldSize)}unproject(a){return new l.Y(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){const d=this.elevation,v=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,w=this.pointLocation(this.centerPoint,a),C=a.getElevationForLngLatZoom(w,this.tileZoom);if(!(this.elevation-C))return;const B=v+d-C,j=Math.cos(this._pitch)*this.cameraToCenterDistance/B/l.b3(1,w.lat),Z=this.scaleZoom(j/this.tileSize);this._elevation=C,this._center=w,this.zoom=Z}setLocationAtPoint(a,d){const v=this.pointCoordinate(d),w=this.pointCoordinate(this.centerPoint),C=this.locationCoordinate(a),B=new l.Y(C.x-(v.x-w.x),C.y-(v.y-w.y));this.center=this.coordinateLocation(B),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,d){return d?this.coordinatePoint(this.locationCoordinate(a),d.getElevationForLngLatZoom(a,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,d){return this.coordinateLocation(this.pointCoordinate(a,d))}locationCoordinate(a){return l.Y.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,d){if(d){const ye=d.pointCoordinate(a);if(ye!=null)return ye}const v=[a.x,a.y,0,1],w=[a.x,a.y,1,1];l.af(v,v,this.pixelMatrixInverse),l.af(w,w,this.pixelMatrixInverse);const C=v[3],B=w[3],j=v[1]/C,Z=w[1]/B,Q=v[2]/C,se=w[2]/B,ue=Q===se?0:(0-Q)/(se-Q);return new l.Y(l.z.number(v[0]/C,w[0]/B,ue)/this.worldSize,l.z.number(j,Z,ue)/this.worldSize)}coordinatePoint(a,d=0,v=this.pixelMatrix){const w=[a.x*this.worldSize,a.y*this.worldSize,d,1];return l.af(w,w,v),new l.P(w[0]/w[3],w[1]/w[3])}getBounds(){const a=Math.max(0,this.height/2-this.getHorizon());return new Kt().extend(this.pointLocation(new l.P(0,a))).extend(this.pointLocation(new l.P(this.width,a))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Kt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,mh])}calculatePosMatrix(a,d=!1){const v=a.key,w=d?this._alignedPosMatrixCache:this._posMatrixCache;if(w[v])return w[v];const C=a.canonical,B=this.worldSize/this.zoomScale(C.z),j=C.x+Math.pow(2,C.z)*a.wrap,Z=l.an(new Float64Array(16));return l.H(Z,Z,[j*B,C.y*B,0]),l.J(Z,Z,[B/l.W,B/l.W,1]),l.K(Z,d?this.alignedProjMatrix:this.projMatrix,Z),w[v]=new Float32Array(Z),w[v]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(a,d){d=l.ac(+d,this.minZoom,this.maxZoom);const v={center:new l.M(a.lng,a.lat),zoom:d};let w=this.lngRange;if(!this._renderWorldCopies&&w===null){const Fe=179.9999999999;w=[-Fe,Fe]}const C=this.tileSize*this.zoomScale(v.zoom);let B=0,j=C,Z=0,Q=C,se=0,ue=0;const{x:ye,y:Le}=this.size;if(this.latRange){const Fe=this.latRange;B=l.O(Fe[1])*C,j=l.O(Fe[0])*C,j-B<Le&&(se=Le/(j-B))}w&&(Z=l.b1(l.N(w[0])*C,0,C),Q=l.b1(l.N(w[1])*C,0,C),Q<Z&&(Q+=C),Q-Z<ye&&(ue=ye/(Q-Z)));const{x:Pe,y:Me}=this.project.call({worldSize:C},a);let Se,Ke;const at=Math.max(ue||0,se||0);if(at){const Fe=new l.P(ue?(Q+Z)/2:Pe,se?(j+B)/2:Me);return v.center=this.unproject.call({worldSize:C},Fe).wrap(),v.zoom+=this.scaleZoom(at),v}if(this.latRange){const Fe=Le/2;Me-Fe<B&&(Ke=B+Fe),Me+Fe>j&&(Ke=j-Fe)}if(w){const Fe=(Z+Q)/2;let Je=Pe;this._renderWorldCopies&&(Je=l.b1(Pe,Fe-C/2,Fe+C/2));const ut=ye/2;Je-ut<Z&&(Se=Z+ut),Je+ut>Q&&(Se=Q-ut)}if(Se!==void 0||Ke!==void 0){const Fe=new l.P(Se??Pe,Ke??Me);v.center=this.unproject.call({worldSize:C},Fe).wrap()}return v}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:d,zoom:v}=this.getConstrained(this.center,this.zoom);this.center=d,this.zoom=v,this._unmodified=a,this._constraining=!1}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,d=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b3(1,this.center.lat)*this.worldSize;let w=l.an(new Float64Array(16));l.J(w,w,[this.width/2,-this.height/2,1]),l.H(w,w,[1,-1,0]),this.labelPlaneMatrix=w,w=l.an(new Float64Array(16)),l.J(w,w,[1,-1,1]),l.H(w,w,[-1,-1,0]),l.J(w,w,[2/this.width,2/this.height,1]),this.glCoordMatrix=w;const C=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),B=Math.min(this.elevation,this.minElevationForCurrentTile),j=C-B*this._pixelPerMeter/Math.cos(this._pitch),Z=B<0?j:C,Q=Math.PI/2+this._pitch,se=this._fov*(.5+a.y/this.height),ue=Math.sin(se)*Z/Math.sin(l.ac(Math.PI-Q-se,.01,Math.PI-.01)),ye=this.getHorizon(),Le=2*Math.atan(ye/this.cameraToCenterDistance)*(.5+a.y/(2*ye)),Pe=Math.sin(Le)*Z/Math.sin(l.ac(Math.PI-Q-Le,.01,Math.PI-.01)),Me=Math.min(ue,Pe),Se=1.01*(Math.cos(Math.PI/2-this._pitch)*Me+Z),Ke=this.height/50;w=new Float64Array(16),l.b4(w,this._fov,this.width/this.height,Ke,Se),w[8]=2*-a.x/this.width,w[9]=2*a.y/this.height,l.J(w,w,[1,-1,1]),l.H(w,w,[0,0,-this.cameraToCenterDistance]),l.b5(w,w,this._pitch),l.ad(w,w,this.angle),l.H(w,w,[-d,-v,0]),this.mercatorMatrix=l.J([],w,[this.worldSize,this.worldSize,this.worldSize]),l.J(w,w,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.K(new Float64Array(16),this.labelPlaneMatrix,w),l.H(w,w,[0,0,-this.elevation]),this.projMatrix=w,this.invProjMatrix=l.ar([],w),this.pixelMatrix3D=l.K(new Float64Array(16),this.labelPlaneMatrix,w);const at=this.width%2/2,Fe=this.height%2/2,Je=Math.cos(this.angle),ut=Math.sin(this.angle),ft=d-Math.round(d)+Je*at+ut*Fe,mt=v-Math.round(v)+Je*Fe+ut*at,Tt=new Float64Array(w);if(l.H(Tt,Tt,[ft>.5?ft-1:ft,mt>.5?mt-1:mt,0]),this.alignedProjMatrix=Tt,w=l.ar(new Float64Array(16),this.pixelMatrix),!w)throw new Error("failed to invert matrix");this.pixelMatrixInverse=w,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const a=this.pointCoordinate(new l.P(0,0)),d=[a.x*this.worldSize,a.y*this.worldSize,0,1];return l.af(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,a))}getCameraQueryGeometry(a){const d=this.getCameraPoint();if(a.length===1)return[a[0],d];{let v=d.x,w=d.y,C=d.x,B=d.y;for(const j of a)v=Math.min(v,j.x),w=Math.min(w,j.y),C=Math.max(C,j.x),B=Math.max(B,j.y);return[new l.P(v,w),new l.P(C,w),new l.P(C,B),new l.P(v,B),new l.P(v,w)]}}lngLatToCameraDepth(a,d){const v=this.locationCoordinate(a),w=[v.x*this.worldSize,v.y*this.worldSize,d,1];return l.af(w,w,this.projMatrix),w[2]/w[3]}}function gh(S,a){let d,v=!1,w=null,C=null;const B=()=>{w=null,v&&(S.apply(C,d),w=setTimeout(B,a),v=!1)};return(...j)=>(v=!0,C=this,d=j,w||B(),w)}class Tf{constructor(a){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let v;return d.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(v=w)}),(v&&v[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(v=>isNaN(v))){const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=gh(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(a){const d=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,w=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,w),B=Math.round(d.lng*C)/C,j=Math.round(d.lat*C)/C,Z=this._map.getBearing(),Q=this._map.getPitch();let se="";if(se+=a?`/${B}/${j}/${v}`:`${v}/${j}/${B}`,(Z||Q)&&(se+="/"+Math.round(10*Z)/10),Q&&(se+=`/${Math.round(Q)}`),this._hashName){const ue=this._hashName;let ye=!1;const Le=window.location.hash.slice(1).split("&").map(Pe=>{const Me=Pe.split("=")[0];return Me===ue?(ye=!0,`${Me}=${se}`):Pe}).filter(Pe=>Pe);return ye||Le.push(`${ue}=${se}`),`#${Le.join("&")}`}return`#${se}`}}const yh={linearity:.3,easing:l.b6(0,0,.3,1)},fc=l.e({deceleration:2500,maxSpeed:1400},yh),Cf=l.e({deceleration:20,maxSpeed:1400},yh),Qg=l.e({deceleration:1e3,maxSpeed:360},yh),Tm=l.e({deceleration:1e3,maxSpeed:90},yh);class ey{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:y.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,d=y.now();for(;a.length>0&&d-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)d.zoom+=C.zoomDelta||0,d.bearing+=C.bearingDelta||0,d.pitch+=C.pitchDelta||0,C.panDelta&&d.pan._add(C.panDelta),C.around&&(d.around=C.around),C.pinchAround&&(d.pinchAround=C.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(d.pan.mag()){const C=If(d.pan.mag(),v,l.e({},fc,a||{}));w.offset=d.pan.mult(C.amount/d.pan.mag()),w.center=this._map.transform.center,_h(w,C)}if(d.zoom){const C=If(d.zoom,v,Cf);w.zoom=this._map.transform.zoom+C.amount,_h(w,C)}if(d.bearing){const C=If(d.bearing,v,Qg);w.bearing=this._map.transform.bearing+l.ac(C.amount,-179,179),_h(w,C)}if(d.pitch){const C=If(d.pitch,v,Tm);w.pitch=this._map.transform.pitch+C.amount,_h(w,C)}if(w.zoom||w.bearing){const C=d.pinchAround===void 0?d.around:d.pinchAround;w.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),l.e(w,{noMoveStart:!0})}}function _h(S,a){(!S.duration||S.duration<a.duration)&&(S.duration=a.duration,S.easing=a.easing)}function If(S,a,d){const{maxSpeed:v,linearity:w,deceleration:C}=d,B=l.ac(S*w/(a/1e3),-v,v),j=Math.abs(B)/(C*w);return{easing:d.easing,duration:1e3*j,amount:B*(j/2)}}class si extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v,w={}){const C=_.mousePos(d.getCanvas(),v),B=d.unproject(C);super(a,l.e({point:C,lngLat:B,originalEvent:v},w)),this._defaultPrevented=!1,this.target=d}}class Ss extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v){const w=a==="touchend"?v.changedTouches:v.touches,C=_.touchPos(d.getCanvasContainer(),w),B=C.map(Z=>d.unproject(Z)),j=C.reduce((Z,Q,se,ue)=>Z.add(Q.div(ue.length)),new l.P(0,0));super(a,{points:C,point:j,lngLats:B,lngLat:d.unproject(j),originalEvent:v}),this._defaultPrevented=!1}}class Cm extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v){super(a,{originalEvent:v}),this._defaultPrevented=!1}}class Ko{constructor(a,d){this._map=a,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new Cm(a.type,this._map,a))}mousedown(a,d){return this._mousedownPos=d,this._firePreventable(new si(a.type,this._map,a))}mouseup(a){this._map.fire(new si(a.type,this._map,a))}click(a,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new si(a.type,this._map,a))}dblclick(a){return this._firePreventable(new si(a.type,this._map,a))}mouseover(a){this._map.fire(new si(a.type,this._map,a))}mouseout(a){this._map.fire(new si(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Ss(a.type,this._map,a))}touchmove(a){this._map.fire(new Ss(a.type,this._map,a))}touchend(a){this._map.fire(new Ss(a.type,this._map,a))}touchcancel(a){this._map.fire(new Ss(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ha{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new si(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new si(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dc{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.pointLocation(l.P.convert(a),this._map.terrain)}}class pa{constructor(a,d){this._map=a,this._tr=new dc(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,d){this.isEnabled()&&a.shiftKey&&a.button===0&&(_.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(a,d){if(!this._active)return;const v=d;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=v,this._box||(this._box=_.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const C=Math.min(w.x,v.x),B=Math.max(w.x,v.x),j=Math.min(w.y,v.y),Z=Math.max(w.y,v.y);_.setTransform(this._box,`translate(${C}px,${j}px)`),this._box.style.width=B-C+"px",this._box.style.height=Z-j+"px"}mouseupWindow(a,d){if(!this._active||a.button!==0)return;const v=this._startPos,w=d;if(this.reset(),_.suppressClick(),v.x!==w.x||v.y!==w.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:a})),{cameraAnimation:C=>C.fitScreenCoordinates(v,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,d){return this._map.fire(new l.k(a,{originalEvent:d}))}}function ma(S,a){if(S.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${S.length}, points ${a.length}`);const d={};for(let v=0;v<S.length;v++)d[S[v].identifier]=a[v];return d}class Tv{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),v.length===this.numTouches&&(this.centroid=function(w){const C=new l.P(0,0);for(const B of w)C._add(B);return C.div(w.length)}(d),this.touches=ma(v,d)))}touchmove(a,d,v){if(this.aborted||!this.centroid)return;const w=ma(v,d);for(const C in this.touches){const B=w[C];(!B||B.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(a,d,v){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class du{constructor(a){this.singleTap=new Tv(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,d,v){this.singleTap.touchstart(a,d,v)}touchmove(a,d,v){this.singleTap.touchmove(a,d,v)}touchend(a,d,v){const w=this.singleTap.touchend(a,d,v);if(w){const C=a.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(w)<30;if(C&&B||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class ty{constructor(a){this._tr=new dc(a),this._zoomIn=new du({numTouches:1,numTaps:2}),this._zoomOut=new du({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,d,v){this._zoomIn.touchstart(a,d,v),this._zoomOut.touchstart(a,d,v)}touchmove(a,d,v){this._zoomIn.touchmove(a,d,v),this._zoomOut.touchmove(a,d,v)}touchend(a,d,v){const w=this._zoomIn.touchend(a,d,v),C=this._zoomOut.touchend(a,d,v),B=this._tr;return w?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:B.zoom+1,around:B.unproject(w)},{originalEvent:a})}):C?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:B.zoom-1,around:B.unproject(C)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pc{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const d=this._moveFunction(...a);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(a,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,d){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const w=d.length?d[0]:d;return!this._moved&&w.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(v,w))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&_.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Pf={0:1,2:2};class Ji{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const d=_.mouseButton(a);this._eventButton=d}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(d,v){const w=Pf[v];return d.buttons===void 0||(d.buttons&w)!==w}(a,this._eventButton)}isValidEndEvent(a){return _.mouseButton(a)===this._eventButton}}class Jt{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}const Lf=S=>{S.mousedown=S.dragStart,S.mousemoveWindow=S.dragMove,S.mouseup=S.dragEnd,S.contextmenu=function(a){a.preventDefault()}},Za=({enable:S,clickTolerance:a,bearingDegreesPerPixelMoved:d=.8})=>{const v=new Ji({checkCorrectEvent:w=>_.mouseButton(w)===0&&w.ctrlKey||_.mouseButton(w)===2});return new pc({clickTolerance:a,move:(w,C)=>({bearingDelta:(C.x-w.x)*d}),moveStateManager:v,enable:S,assignEvents:Lf})},vh=({enable:S,clickTolerance:a,pitchDegreesPerPixelMoved:d=-.5})=>{const v=new Ji({checkCorrectEvent:w=>_.mouseButton(w)===0&&w.ctrlKey||_.mouseButton(w)===2});return new pc({clickTolerance:a,move:(w,C)=>({pitchDelta:(C.y-w.y)*d}),moveStateManager:v,enable:S,assignEvents:Lf})};class Af{constructor(a,d){this._clickTolerance=a.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(a,d,v){return this._calculateTransform(a,d,v)}touchmove(a,d,v){if(this._active&&!(v.length<this.minTouchs()))return a.preventDefault(),this._calculateTransform(a,d,v)}touchend(a,d,v){this._calculateTransform(a,d,v),this._active&&v.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,d,v){v.length>0&&(this._active=!0);const w=ma(v,d),C=new l.P(0,0),B=new l.P(0,0);let j=0;for(const Q in w){const se=w[Q],ue=this._touches[Q];ue&&(C._add(se),B._add(se.sub(ue)),j++,w[Q]=se)}if(this._touches=w,j<this.minTouchs()||!B.mag())return;const Z=B.div(j);return this._sum._add(Z),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(j),panDelta:Z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(a,d,v){if(!this._firstTwoTouches)return;a.preventDefault();const[w,C]=this._firstTwoTouches,B=mc(v,d,w),j=mc(v,d,C);if(!B||!j)return;const Z=this._aroundCenter?null:B.add(j).div(2);return this._move([B,j],Z,a)}touchend(a,d,v){if(!this._firstTwoTouches)return;const[w,C]=this._firstTwoTouches,B=mc(v,d,w),j=mc(v,d,C);B&&j||(this._active&&_.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function mc(S,a,d){for(let v=0;v<S.length;v++)if(S[v].identifier===d)return a[v]}function Im(S,a){return Math.log(S/a)/Math.LN2}class ny extends qt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,d){const v=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Im(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Im(this._distance,v),pinchAround:d}}}function Of(S,a){return 180*S.angleWith(a)/Math.PI}class jd extends qt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,d,v){const w=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Of(this._vector,w),pinchAround:d}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const d=25/(Math.PI*this._minDiameter)*360,v=Of(a,this._startVector);return Math.abs(v)<d}}function kf(S){return Math.abs(S.y)>Math.abs(S.x)}class Pm extends qt{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,d,v){super.touchstart(a,d,v),this._currentTouchCount=v.length}_start(a){this._lastPoints=a,kf(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,d,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const w=a[0].sub(this._lastPoints[0]),C=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,C,v.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(w.y+C.y)/2*-.5}):void 0}gestureBeginsVertically(a,d,v){if(this._valid!==void 0)return this._valid;const w=a.mag()>=2,C=d.mag()>=2;if(!w&&!C)return;if(!w||!C)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const B=a.y>0==d.y>0;return kf(a)&&kf(d)&&B}}const ry={panStep:100,bearingStep:15,pitchStep:10};class pu{constructor(a){this._tr=new dc(a);const d=ry;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let d=0,v=0,w=0,C=0,B=0;switch(a.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:a.shiftKey?v=-1:(a.preventDefault(),C=-1);break;case 39:a.shiftKey?v=1:(a.preventDefault(),C=1);break;case 38:a.shiftKey?w=1:(a.preventDefault(),B=-1);break;case 40:a.shiftKey?w=-1:(a.preventDefault(),B=1);break;default:return}return this._rotationDisabled&&(v=0,w=0),{cameraAnimation:j=>{const Z=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:jr,zoom:d?Math.round(Z.zoom)+d*(a.shiftKey?2:1):Z.zoom,bearing:Z.bearing+v*this._bearingStep,pitch:Z.pitch+w*this._pitchStep,offset:[-C*this._panStep,-B*this._panStep],center:Z.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function jr(S){return S*(2-S)}const xh=4.000244140625;class $d{constructor(a,d){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=a,this._tr=new dc(a),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(a){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!a[this._map.cooperativeGestures._bypassKey])return;let d=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const v=y.now(),w=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%xh==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(w*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),a.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=a,this._delta-=d,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=_.mousePos(this._map.getCanvas(),a),v=this._tr;this._around=d.y>v.transform.height/2-v.transform.getHorizon()?l.M.convert(this._aroundCenter?v.center:v.unproject(d)):l.M.convert(v.center),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>xh?this._wheelZoomRate:this._defaultZoomRate;let Z=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&Z!==0&&(Z=1/Z);const Q=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(Q*Z))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:a.zoom,v=this._startZoom,w=this._easing;let C,B=!1;if(this._type==="wheel"&&v&&w){const j=Math.min((y.now()-this._lastWheelEventTime)/200,1),Z=w(j);C=l.z.number(v,d,Z),j<1?this._frameId||(this._frameId=!0):B=!0}else C=d,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!B,zoomDelta:C-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let d=l.b7;if(this._prevEase){const v=this._prevEase,w=(y.now()-v.start)/v.duration,C=v.easing(w+.01)-v.easing(w),B=.27/Math.sqrt(C*C+1e-4)*.01,j=Math.sqrt(.0729-B*B);d=l.b6(B,j,.25,1)}return this._prevEase={start:y.now(),duration:a,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class f{constructor(a,d){this._clickZoom=a,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class b{constructor(a){this._tr=new dc(a),this.reset()}reset(){this._active=!1}dblclick(a,d){return a.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class N{constructor(){this._tap=new du({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,d,v){if(!this._swipePoint)if(this._tapTime){const w=d[0],C=a.timeStamp-this._tapTime<500,B=this._tapPoint.dist(w)<30;C&&B?v.length>0&&(this._swipePoint=w,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(a,d,v)}touchmove(a,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const w=d[0],C=w.y-this._swipePoint.y;return this._swipePoint=w,a.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(a,d,v)}touchend(a,d,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{const w=this._tap.touchend(a,d,v);w&&(this._tapTime=a.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class q{constructor(a,d,v){this._el=a,this._mousePan=d,this._touchPan=v}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class re{constructor(a,d,v){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=d,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class me{constructor(a,d,v,w){this._el=a,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ce{constructor(a,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=_.create("div","maplibregl-cooperative-gesture-screen",a);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),w=document.createElement("div");w.className="maplibregl-desktop-message",w.textContent=d,this._container.appendChild(w);const C=document.createElement("div");C.className="maplibregl-mobile-message",C.textContent=v,this._container.appendChild(C),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(_.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(a){this._onCooperativeGesture(a.touches.length===1)}wheel(a){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!a[this._bypassKey])}_onCooperativeGesture(a){this._enabled&&a&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const We=S=>S.zoom||S.drag||S.pitch||S.rotate;class dt extends l.k{}function It(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta}class tn{constructor(a,d){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,C)=>{if(w.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const B=w.type==="renderFrame"?void 0:w,j={needsRenderFrame:!1},Z={},Q={},se=w.touches,ue=se?this._getMapTouches(se):void 0,ye=ue?_.touchPos(this._map.getCanvas(),ue):_.mousePos(this._map.getCanvas(),w);for(const{handlerName:Me,handler:Se,allowed:Ke}of this._handlers){if(!Se.isEnabled())continue;let at;this._blockedByActive(Q,Ke,Me)?Se.reset():Se[C||w.type]&&(at=Se[C||w.type](w,ye,ue),this.mergeHandlerResult(j,Z,at,Me,B),at&&at.needsRenderFrame&&this._triggerRenderFrame()),(at||Se.isActive())&&(Q[Me]=Se)}const Le={};for(const Me in this._previousActiveHandlers)Q[Me]||(Le[Me]=B);this._previousActiveHandlers=Q,(Object.keys(Le).length||It(j))&&(this._changes.push([j,Z,Le]),this._triggerRenderFrame()),(Object.keys(Q).length||It(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Pe}=j;Pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pe(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ey(a),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,C,B]of this._listeners)_.addEventListener(w,C,w===document?this.handleWindowEvent:this.handleEvent,B)}destroy(){for(const[a,d,v]of this._listeners)_.removeEventListener(a,d,a===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(a){const d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new Ko(d,a));const w=d.boxZoom=new pa(d,a);this._add("boxZoom",w),a.interactive&&a.boxZoom&&w.enable();const C=d.cooperativeGestures=new Ce(d,a.cooperativeGestures);this._add("cooperativeGestures",C),a.cooperativeGestures&&C.enable();const B=new ty(d),j=new b(d);d.doubleClickZoom=new f(j,B),this._add("tapZoom",B),this._add("clickZoom",j),a.interactive&&a.doubleClickZoom&&d.doubleClickZoom.enable();const Z=new N;this._add("tapDragZoom",Z);const Q=d.touchPitch=new Pm(d);this._add("touchPitch",Q),a.interactive&&a.touchPitch&&d.touchPitch.enable(a.touchPitch);const se=Za(a),ue=vh(a);d.dragRotate=new re(a,se,ue),this._add("mouseRotate",se,["mousePitch"]),this._add("mousePitch",ue,["mouseRotate"]),a.interactive&&a.dragRotate&&d.dragRotate.enable();const ye=(({enable:at,clickTolerance:Fe})=>{const Je=new Ji({checkCorrectEvent:ut=>_.mouseButton(ut)===0&&!ut.ctrlKey});return new pc({clickTolerance:Fe,move:(ut,ft)=>({around:ft,panDelta:ft.sub(ut)}),activateOnStart:!0,moveStateManager:Je,enable:at,assignEvents:Lf})})(a),Le=new Af(a,d);d.dragPan=new q(v,ye,Le),this._add("mousePan",ye),this._add("touchPan",Le,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&d.dragPan.enable(a.dragPan);const Pe=new jd,Me=new ny;d.touchZoomRotate=new me(v,Me,Pe,Z),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",Me,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&d.touchZoomRotate.enable(a.touchZoomRotate);const Se=d.scrollZoom=new $d(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Se,["mousePan"]),a.interactive&&a.scrollZoom&&d.scrollZoom.enable(a.scrollZoom);const Ke=d.keyboard=new pu(d);this._add("keyboard",Ke),a.interactive&&a.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new Ha(d))}_add(a,d,v){this._handlers.push({handlerName:a,handler:d,allowed:v}),this._handlersById[a]=d}stop(a){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!We(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,d,v){for(const w in a)if(w!==v&&(!d||d.indexOf(w)<0))return!0;return!1}_getMapTouches(a){const d=[];for(const v of a)this._el.contains(v.target)&&d.push(v);return d}mergeHandlerResult(a,d,v,w,C){if(!v)return;l.e(a,v);const B={handlerName:w,originalEvent:v.originalEvent||C};v.zoomDelta!==void 0&&(d.zoom=B),v.panDelta!==void 0&&(d.drag=B),v.pitchDelta!==void 0&&(d.pitch=B),v.bearingDelta!==void 0&&(d.rotate=B)}_applyChanges(){const a={},d={},v={};for(const[w,C,B]of this._changes)w.panDelta&&(a.panDelta=(a.panDelta||new l.P(0,0))._add(w.panDelta)),w.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+w.pitchDelta),w.around!==void 0&&(a.around=w.around),w.pinchAround!==void 0&&(a.pinchAround=w.pinchAround),w.noInertia&&(a.noInertia=w.noInertia),l.e(d,C),l.e(v,B);this._updateMapTransform(a,d,v),this._changes=[]}_updateMapTransform(a,d,v){const w=this._map,C=w._getTransformForUpdate(),B=w.terrain;if(!(It(a)||B&&this._terrainMovement))return this._fireEvents(d,v,!0);let{panDelta:j,zoomDelta:Z,bearingDelta:Q,pitchDelta:se,around:ue,pinchAround:ye}=a;ye!==void 0&&(ue=ye),w._stop(!0),ue=ue||w.transform.centerPoint;const Le=C.pointLocation(j?ue.sub(j):ue);Q&&(C.bearing+=Q),se&&(C.pitch+=se),Z&&(C.zoom+=Z),B?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?C.center=C.pointLocation(C.centerPoint.sub(j)):C.setLocationAtPoint(Le,ue):(this._terrainMovement=!0,this._map._elevationFreeze=!0,C.setLocationAtPoint(Le,ue),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,C.recalculateZoom(w.terrain)})):C.setLocationAtPoint(Le,ue),w._applyUpdatedTransform(C),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(d,v,!0)}_fireEvents(a,d,v){const w=We(this._eventsInProgress),C=We(a),B={};for(const se in a){const{originalEvent:ue}=a[se];this._eventsInProgress[se]||(B[`${se}start`]=ue),this._eventsInProgress[se]=a[se]}!w&&C&&this._fireEvent("movestart",C.originalEvent);for(const se in B)this._fireEvent(se,B[se]);C&&this._fireEvent("move",C.originalEvent);for(const se in a){const{originalEvent:ue}=a[se];this._fireEvent(se,ue)}const j={};let Z;for(const se in this._eventsInProgress){const{handlerName:ue,originalEvent:ye}=this._eventsInProgress[se];this._handlersById[ue].isActive()||(delete this._eventsInProgress[se],Z=d[ue]||ye,j[`${se}end`]=Z)}for(const se in j)this._fireEvent(se,j[se]);const Q=We(this._eventsInProgress);if(v&&(w||C)&&!Q){this._updatingCamera=!0;const se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ue=ye=>ye!==0&&-this._bearingSnap<ye&&ye<this._bearingSnap;!se||!se.essential&&y.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:Z})),ue(this._map.getBearing())&&this._map.resetNorth()):(ue(se.bearing||this._map.getBearing())&&(se.bearing=0),se.freezeElevation=!0,this._map.easeTo(se,{originalEvent:Z})),this._updatingCamera=!1}}_fireEvent(a,d){this._map.fire(new l.k(a,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new dt("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class hn extends l.E{constructor(a,d){super(),this._renderFrameCallback=()=>{const v=Math.min((y.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.M(this.transform.center.lng,this.transform.center.lat)}setCenter(a,d){return this.jumpTo({center:a},d)}panBy(a,d,v){return a=l.P.convert(a).mult(-1),this.panTo(this.transform.center,l.e({offset:a},d),v)}panTo(a,d,v){return this.easeTo(l.e({center:a},d),v)}getZoom(){return this.transform.zoom}setZoom(a,d){return this.jumpTo({zoom:a},d),this}zoomTo(a,d,v){return this.easeTo(l.e({zoom:a},d),v)}zoomIn(a,d){return this.zoomTo(this.getZoom()+1,a,d),this}zoomOut(a,d){return this.zoomTo(this.getZoom()-1,a,d),this}getBearing(){return this.transform.bearing}setBearing(a,d){return this.jumpTo({bearing:a},d),this}getPadding(){return this.transform.padding}setPadding(a,d){return this.jumpTo({padding:a},d),this}rotateTo(a,d,v){return this.easeTo(l.e({bearing:a},d),v)}resetNorth(a,d){return this.rotateTo(0,l.e({duration:1e3},a),d),this}resetNorthPitch(a,d){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},a),d),this}snapToNorth(a,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,d):this}getPitch(){return this.transform.pitch}setPitch(a,d){return this.jumpTo({pitch:a},d),this}cameraForBounds(a,d){a=Kt.convert(a);const v=d&&d.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),v,d)}_cameraForBoxAndBearing(a,d,v,w){const C={top:0,bottom:0,right:0,left:0};if(typeof(w=l.e({padding:C,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const zt=w.padding;w.padding={top:zt,bottom:zt,right:zt,left:zt}}w.padding=l.e(C,w.padding);const B=this.transform,j=B.padding,Z=new Kt(a,d),Q=B.project(Z.getNorthWest()),se=B.project(Z.getNorthEast()),ue=B.project(Z.getSouthEast()),ye=B.project(Z.getSouthWest()),Le=l.b8(-v),Pe=Q.rotate(Le),Me=se.rotate(Le),Se=ue.rotate(Le),Ke=ye.rotate(Le),at=new l.P(Math.max(Pe.x,Me.x,Ke.x,Se.x),Math.max(Pe.y,Me.y,Ke.y,Se.y)),Fe=new l.P(Math.min(Pe.x,Me.x,Ke.x,Se.x),Math.min(Pe.y,Me.y,Ke.y,Se.y)),Je=at.sub(Fe),ut=(B.width-(j.left+j.right+w.padding.left+w.padding.right))/Je.x,ft=(B.height-(j.top+j.bottom+w.padding.top+w.padding.bottom))/Je.y;if(ft<0||ut<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const mt=Math.min(B.scaleZoom(B.scale*Math.min(ut,ft)),w.maxZoom),Tt=l.P.convert(w.offset),Et=new l.P((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(l.b8(v)),Mt=Tt.add(Et).mult(B.scale/B.zoomScale(mt));return{center:B.unproject(Q.add(ue).div(2).sub(Mt)),zoom:mt,bearing:v}}fitBounds(a,d,v){return this._fitInternal(this.cameraForBounds(a,d),d,v)}fitScreenCoordinates(a,d,v,w,C){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(a)),this.transform.pointLocation(l.P.convert(d)),v,w),w,C)}_fitInternal(a,d,v){return a?(delete(d=l.e(a,d)).padding,d.linear?this.easeTo(d,v):this.flyTo(d,v)):this}jumpTo(a,d){this.stop();const v=this._getTransformForUpdate();let w=!1,C=!1,B=!1;return"zoom"in a&&v.zoom!==+a.zoom&&(w=!0,v.zoom=+a.zoom),a.center!==void 0&&(v.center=l.M.convert(a.center)),"bearing"in a&&v.bearing!==+a.bearing&&(C=!0,v.bearing=+a.bearing),"pitch"in a&&v.pitch!==+a.pitch&&(B=!0,v.pitch=+a.pitch),a.padding==null||v.isPaddingEqual(a.padding)||(v.padding=a.padding),this._applyUpdatedTransform(v),this.fire(new l.k("movestart",d)).fire(new l.k("move",d)),w&&this.fire(new l.k("zoomstart",d)).fire(new l.k("zoom",d)).fire(new l.k("zoomend",d)),C&&this.fire(new l.k("rotatestart",d)).fire(new l.k("rotate",d)).fire(new l.k("rotateend",d)),B&&this.fire(new l.k("pitchstart",d)).fire(new l.k("pitch",d)).fire(new l.k("pitchend",d)),this.fire(new l.k("moveend",d))}calculateCameraOptionsFromTo(a,d,v,w=0){const C=l.Y.fromLngLat(a,d),B=l.Y.fromLngLat(v,w),j=B.x-C.x,Z=B.y-C.y,Q=B.z-C.z,se=Math.hypot(j,Z,Q);if(se===0)throw new Error("Can't calculate camera options with same From and To");const ue=Math.hypot(j,Z),ye=this.transform.scaleZoom(this.transform.cameraToCenterDistance/se/this.transform.tileSize),Le=180*Math.atan2(j,-Z)/Math.PI;let Pe=180*Math.acos(ue/se)/Math.PI;return Pe=Q<0?90-Pe:90+Pe,{center:B.toLngLat(),zoom:ye,pitch:Pe,bearing:Le}}easeTo(a,d){var v;this._stop(!1,a.easeId),((a=l.e({offset:[0,0],duration:500,easing:l.b7},a)).animate===!1||!a.essential&&y.prefersReducedMotion)&&(a.duration=0);const w=this._getTransformForUpdate(),C=this.getZoom(),B=this.getBearing(),j=this.getPitch(),Z=this.getPadding(),Q="bearing"in a?this._normalizeBearing(a.bearing,B):B,se="pitch"in a?+a.pitch:j,ue="padding"in a?a.padding:w.padding,ye=l.P.convert(a.offset);let Le=w.centerPoint.add(ye);const Pe=w.pointLocation(Le),{center:Me,zoom:Se}=w.getConstrained(l.M.convert(a.center||Pe),(v=a.zoom)!==null&&v!==void 0?v:C);this._normalizeCenter(Me);const Ke=w.project(Pe),at=w.project(Me).sub(Ke),Fe=w.zoomScale(Se-C);let Je,ut;a.around&&(Je=l.M.convert(a.around),ut=w.locationPoint(Je));const ft={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Se!==C,this._rotating=this._rotating||B!==Q,this._pitching=this._pitching||se!==j,this._padding=!w.isPaddingEqual(ue),this._easeId=a.easeId,this._prepareEase(d,a.noMoveStart,ft),this.terrain&&this._prepareElevation(Me),this._ease(mt=>{if(this._zooming&&(w.zoom=l.z.number(C,Se,mt)),this._rotating&&(w.bearing=l.z.number(B,Q,mt)),this._pitching&&(w.pitch=l.z.number(j,se,mt)),this._padding&&(w.interpolatePadding(Z,ue,mt),Le=w.centerPoint.add(ye)),this.terrain&&!a.freezeElevation&&this._updateElevation(mt),Je)w.setLocationAtPoint(Je,ut);else{const Tt=w.zoomScale(w.zoom-C),Et=Se>C?Math.min(2,Fe):Math.max(.5,Fe),Mt=Math.pow(Et,1-mt),zt=w.unproject(Ke.add(at.mult(mt*Mt)).mult(Tt));w.setLocationAtPoint(w.renderWorldCopies?zt.wrap():zt,Le)}this._applyUpdatedTransform(w),this._fireMoveEvents(d)},mt=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,mt)},a),this}_prepareEase(a,d,v={}){this._moving=!0,d||v.moving||this.fire(new l.k("movestart",a)),this._zooming&&!v.zooming&&this.fire(new l.k("zoomstart",a)),this._rotating&&!v.rotating&&this.fire(new l.k("rotatestart",a)),this._pitching&&!v.pitching&&this.fire(new l.k("pitchstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&d!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(v-(d-(v*a+this._elevationStart))/(1-a)),this._elevationTarget=d}this.transform.elevation=l.z.number(this._elevationStart,this._elevationTarget,a)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(a){if(!this.transformCameraUpdate)return;const d=a.clone(),{center:v,zoom:w,pitch:C,bearing:B,elevation:j}=this.transformCameraUpdate(d);v&&(d.center=v),w!==void 0&&(d.zoom=w),C!==void 0&&(d.pitch=C),B!==void 0&&(d.bearing=B),j!==void 0&&(d.elevation=j),this.transform.apply(d)}_fireMoveEvents(a){this.fire(new l.k("move",a)),this._zooming&&this.fire(new l.k("zoom",a)),this._rotating&&this.fire(new l.k("rotate",a)),this._pitching&&this.fire(new l.k("pitch",a))}_afterEase(a,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const v=this._zooming,w=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new l.k("zoomend",a)),w&&this.fire(new l.k("rotateend",a)),C&&this.fire(new l.k("pitchend",a)),this.fire(new l.k("moveend",a))}flyTo(a,d){var v;if(!a.essential&&y.prefersReducedMotion){const rr=l.L(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(rr,d)}this.stop(),a=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.b7},a);const w=this._getTransformForUpdate(),C=this.getZoom(),B=this.getBearing(),j=this.getPitch(),Z=this.getPadding(),Q="bearing"in a?this._normalizeBearing(a.bearing,B):B,se="pitch"in a?+a.pitch:j,ue="padding"in a?a.padding:w.padding,ye=l.P.convert(a.offset);let Le=w.centerPoint.add(ye);const Pe=w.pointLocation(Le),{center:Me,zoom:Se}=w.getConstrained(l.M.convert(a.center||Pe),(v=a.zoom)!==null&&v!==void 0?v:C);this._normalizeCenter(Me);const Ke=w.zoomScale(Se-C),at=w.project(Pe),Fe=w.project(Me).sub(at);let Je=a.curve;const ut=Math.max(w.width,w.height),ft=ut/Ke,mt=Fe.mag();if("minZoom"in a){const rr=l.ac(Math.min(a.minZoom,C,Se),w.minZoom,w.maxZoom),Ln=ut/w.zoomScale(rr-C);Je=Math.sqrt(Ln/mt*2)}const Tt=Je*Je;function Et(rr){const Ln=(ft*ft-ut*ut+(rr?-1:1)*Tt*Tt*mt*mt)/(2*(rr?ft:ut)*Tt*mt);return Math.log(Math.sqrt(Ln*Ln+1)-Ln)}function Mt(rr){return(Math.exp(rr)-Math.exp(-rr))/2}function zt(rr){return(Math.exp(rr)+Math.exp(-rr))/2}const Nn=Et(!1);let $t=function(rr){return zt(Nn)/zt(Nn+Je*rr)},yn=function(rr){return ut*((zt(Nn)*(Mt(Ln=Nn+Je*rr)/zt(Ln))-Mt(Nn))/Tt)/mt;var Ln},Dn=(Et(!0)-Nn)/Je;if(Math.abs(mt)<1e-6||!isFinite(Dn)){if(Math.abs(ut-ft)<1e-6)return this.easeTo(a,d);const rr=ft<ut?-1:1;Dn=Math.abs(Math.log(ft/ut))/Je,yn=function(){return 0},$t=function(Ln){return Math.exp(rr*Je*Ln)}}return a.duration="duration"in a?+a.duration:1e3*Dn/("screenSpeed"in a?+a.screenSpeed/Je:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=B!==Q,this._pitching=se!==j,this._padding=!w.isPaddingEqual(ue),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(Me),this._ease(rr=>{const Ln=rr*Dn,Fn=1/$t(Ln);w.zoom=rr===1?Se:C+w.scaleZoom(Fn),this._rotating&&(w.bearing=l.z.number(B,Q,rr)),this._pitching&&(w.pitch=l.z.number(j,se,rr)),this._padding&&(w.interpolatePadding(Z,ue,rr),Le=w.centerPoint.add(ye)),this.terrain&&!a.freezeElevation&&this._updateElevation(rr);const Gn=rr===1?Me:w.unproject(at.add(Fe.mult(yn(Ln))).mult(Fn));w.setLocationAtPoint(w.renderWorldCopies?Gn.wrap():Gn,Le),this._applyUpdatedTransform(w),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,d)}if(!a){const v=this.handlers;v&&v.stop(!1)}return this}_ease(a,d,v){v.animate===!1||v.duration===0?(a(1),d()):(this._easeStart=y.now(),this._easeOptions=v,this._onEaseFrame=a,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,d){a=l.b1(a,-180,180);const v=Math.abs(a-d);return Math.abs(a-360-d)<v&&(a-=360),Math.abs(a+360-d)<v&&(a+=360),a}_normalizeCenter(a){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const v=a.lng-d.center.lng;a.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(l.M.convert(a),this.transform.tileZoom)-this.transform.elevation:null}}const Zn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Hr{constructor(a=Zn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=_.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=_.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,d){const v=this._map._getUIString(`AttributionControl.${d}`);a.title=v,a.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const d=this._map.style.sourceCaches;for(const w in d){const C=d[w];if(C.used||C.usedForTerrain){const B=C.getSource();B.attribution&&a.indexOf(B.attribution)<0&&a.push(B.attribution)}}a=a.filter(w=>String(w).trim()),a.sort((w,C)=>w.length-C.length),a=a.filter((w,C)=>{for(let B=C+1;B<a.length;B++)if(a[B].indexOf(w)>=0)return!1;return!0});const v=a.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,a.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class $i{constructor(a={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const v=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=_.create("div","maplibregl-ctrl");const d=_.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){_.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Po{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const d=++this._id;return this._queue.push({callback:a,id:d,cancelled:!1}),d}remove(a){const d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(const w of v)if(w.id===a)return void(w.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const v of d)if(!v.cancelled&&(v.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var nr=l.X([{name:"a_pos3d",type:"Int16",components:3}]);class $r extends l.E{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,d){this.sourceCache.update(a,d),this._renderableTilesKeys=[];const v={};for(const w of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))v[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.posMatrix=new Float64Array(16),l.aN(w.posMatrix,0,l.W,0,l.W,0,1),this._tiles[w.key]=new Vn(w,this.tileSize));for(const w in this._tiles)v[w]||delete this._tiles[w]}freeRtt(a){for(const d in this._tiles){const v=this._tiles[d];(!a||v.tileID.equals(a)||v.tileID.isChildOf(a)||a.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const d={};for(const v of this._renderableTilesKeys){const w=this._tiles[v].tileID;if(w.canonical.equals(a.canonical)){const C=a.clone();C.posMatrix=new Float64Array(16),l.aN(C.posMatrix,0,l.W,0,l.W,0,1),d[v]=C}else if(w.canonical.isChildOf(a.canonical)){const C=a.clone();C.posMatrix=new Float64Array(16);const B=w.canonical.z-a.canonical.z,j=w.canonical.x-(w.canonical.x>>B<<B),Z=w.canonical.y-(w.canonical.y>>B<<B),Q=l.W>>B;l.aN(C.posMatrix,0,Q,0,Q,0,1),l.H(C.posMatrix,C.posMatrix,[-j*Q,-Z*Q,0]),d[v]=C}else if(a.canonical.isChildOf(w.canonical)){const C=a.clone();C.posMatrix=new Float64Array(16);const B=a.canonical.z-w.canonical.z,j=a.canonical.x-(a.canonical.x>>B<<B),Z=a.canonical.y-(a.canonical.y>>B<<B),Q=l.W>>B;l.aN(C.posMatrix,0,l.W,0,l.W,0,1),l.H(C.posMatrix,C.posMatrix,[j*Q,Z*Q,0]),l.J(C.posMatrix,C.posMatrix,[1/2**B,1/2**B,0]),d[v]=C}}return d}getSourceTile(a,d){const v=this.sourceCache._source;let w=a.overscaledZ-this.deltaZoom;if(w>v.maxzoom&&(w=v.maxzoom),w<v.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(w).key);let C=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!C||!C.dem)&&d)for(;w>=v.minzoom&&(!C||!C.dem);)C=this.sourceCache.getTileByID(a.scaledTo(w--).key);return C}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=a)}}class iy{constructor(a,d,v){this.painter=a,this.sourceCache=new $r(d),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,d,v,w=l.W){var C;if(!(d>=0&&d<w&&v>=0&&v<w))return 0;const B=this.getTerrainData(a),j=(C=B.tile)===null||C===void 0?void 0:C.dem;if(!j)return 0;const Z=function(Pe,Me,Se){var Ke=Me[0],at=Me[1];return Pe[0]=Se[0]*Ke+Se[4]*at+Se[12],Pe[1]=Se[1]*Ke+Se[5]*at+Se[13],Pe}([],[d/w*l.W,v/w*l.W],B.u_terrain_matrix),Q=[Z[0]*j.dim,Z[1]*j.dim],se=Math.floor(Q[0]),ue=Math.floor(Q[1]),ye=Q[0]-se,Le=Q[1]-ue;return j.get(se,ue)*(1-ye)*(1-Le)+j.get(se+1,ue)*ye*(1-Le)+j.get(se,ue+1)*(1-ye)*Le+j.get(se+1,ue+1)*ye*Le}getElevationForLngLatZoom(a,d){const{tileID:v,mercatorX:w,mercatorY:C}=this._getOverscaledTileIDFromLngLatZoom(a,d);return this.getElevation(v,w%l.W,C%l.W,l.W)}getElevation(a,d,v,w=l.W){return this.getDEMElevation(a,d,v,w)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const w=this.painter.context,C=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new X(w,C,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new X(w,new l.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.an([])}const d=this.sourceCache.getSourceTile(a,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const w=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new X(w,d.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),d.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const v=d&&d+d.tileID.key+a.key;if(v&&!this._demMatrixCache[v]){const w=this.sourceCache.sourceCache._source.maxzoom;let C=a.canonical.z-d.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=w?C=a.canonical.z-w:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const B=a.canonical.x-(a.canonical.x>>C<<C),j=a.canonical.y-(a.canonical.y>>C<<C),Z=l.b9(new Float64Array(16),[1/(l.W<<C),1/(l.W<<C),0]);l.H(Z,Z,[B*l.W,j*l.W,0]),this._demMatrixCache[a.key]={matrix:Z,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(a){const d=this.painter,v=d.width/devicePixelRatio,w=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new X(d.context,{width:v,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new X(d.context,{width:v,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(v,w,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,v,w))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let C=0,B=0;C<this._coordsTextureSize;C++)for(let j=0;j<this._coordsTextureSize;j++,B+=4)d[B+0]=255&j,d[B+1]=255&C,d[B+2]=j>>8<<4|C>>8,d[B+3]=0;const v=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),w=new X(a,v,a.gl.RGBA,{premultiply:!1});return w.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),v=this.painter.context,w=v.gl,C=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),B=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),j=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(C,j-B-1,1,1,w.RGBA,w.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null);const Z=d[0]+(d[2]>>4<<8),Q=d[1]+((15&d[2])<<8),se=this.coordsIndex[255-d[3]],ue=se&&this.sourceCache.getTileByID(se);if(!ue)return null;const ye=this._coordsTextureSize,Le=(1<<ue.tileID.canonical.z)*ye;return new l.Y((ue.tileID.canonical.x*ye+Z)/Le+ue.tileID.wrap,(ue.tileID.canonical.y*ye+Q)/Le,this.getElevation(ue.tileID,Z,Q,ye))}depthAtPoint(a){const d=new Uint8Array(4),v=this.painter.context,w=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),w.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const a=this.painter.context,d=new l.ba,v=new l.aX,w=this.meshSize,C=l.W/w,B=w*w;for(let ue=0;ue<=w;ue++)for(let ye=0;ye<=w;ye++)d.emplaceBack(ye*C,ue*C,0);for(let ue=0;ue<B;ue+=w+1)for(let ye=0;ye<w;ye++)v.emplaceBack(ye+ue,w+ye+ue+1,w+ye+ue+2),v.emplaceBack(ye+ue,w+ye+ue+2,ye+ue+1);const j=d.length,Z=j+2*(w+1);for(const ue of[0,1])for(let ye=0;ye<=w;ye++)for(const Le of[0,1])d.emplaceBack(ye*C,ue*l.W,Le);for(let ue=0;ue<2*w;ue+=2)v.emplaceBack(Z+ue,Z+ue+1,Z+ue+3),v.emplaceBack(Z+ue,Z+ue+3,Z+ue+2),v.emplaceBack(j+ue,j+ue+3,j+ue+1),v.emplaceBack(j+ue,j+ue+2,j+ue+3);const Q=d.length,se=Q+2*(w+1);for(const ue of[0,1])for(let ye=0;ye<=w;ye++)for(const Le of[0,1])d.emplaceBack(ue*l.W,ye*C,Le);for(let ue=0;ue<2*w;ue+=2)v.emplaceBack(Q+ue,Q+ue+1,Q+ue+3),v.emplaceBack(Q+ue,Q+ue+3,Q+ue+2),v.emplaceBack(se+ue,se+ue+3,se+ue+1),v.emplaceBack(se+ue,se+ue+2,se+ue+3);return this._mesh={indexBuffer:a.createIndexBuffer(v),vertexBuffer:a.createVertexBuffer(d,nr.members),segments:l.$.simpleSegment(0,0,d.length,v.length)},this._mesh}getMeshFrameDelta(a){return 2*Math.PI*l.bb/Math.pow(2,a)/5}getMinTileElevationForLngLatZoom(a,d){var v;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(a,d);return(v=this.getMinMaxElevation(w).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(a){const d=this.getTerrainData(a).tile,v={minElevation:null,maxElevation:null};return d&&d.dem&&(v.minElevation=d.dem.min*this.exaggeration,v.maxElevation=d.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(a,d){const v=l.Y.fromLngLat(a.wrap()),w=(1<<d)*l.W,C=v.x*w,B=v.y*w,j=Math.floor(C/l.W),Z=Math.floor(B/l.W);return{tileID:new l.Q(d,0,d,j,Z),mercatorX:C,mercatorY:B}}}class Rf{constructor(a,d,v){this._context=a,this._size=d,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new X(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(v.texture),{id:a,fbo:d,texture:v,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>a.id!==d),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const bl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ud{constructor(a,d){this.painter=a,this.terrain=d,this.pool=new Rf(a.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(v=>!a._layers[v].isHidden(d)),this._coordsDescendingInv={};for(const v in a.sourceCaches){this._coordsDescendingInv[v]={};const w=a.sourceCaches[v].getVisibleCoordinates();for(const C of w){const B=this.terrain.sourceCache.getTerrainCoords(C);for(const j in B)this._coordsDescendingInv[v][j]||(this._coordsDescendingInv[v][j]=[]),this._coordsDescendingInv[v][j].push(B[j])}}this._coordsDescendingInvStr={};for(const v of a._order){const w=a._layers[v],C=w.source;if(bl[w.type]&&!this._coordsDescendingInvStr[C]){this._coordsDescendingInvStr[C]={};for(const B in this._coordsDescendingInv[C])this._coordsDescendingInvStr[C][B]=this._coordsDescendingInv[C][B].map(j=>j.key).sort().join()}}for(const v of this._renderableTiles)for(const w in this._coordsDescendingInvStr){const C=this._coordsDescendingInvStr[w][v.tileID.key];C&&C!==v.rttCoords[w]&&(v.rtt=[])}}renderLayer(a){if(a.isHidden(this.painter.transform.zoom))return!1;const d=a.type,v=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(bl[d]&&(this._prevType&&bl[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(a.id),!w))return!0;if(bl[this._prevType]||bl[d]&&w){this._prevType=d;const C=this._stacks.length-1,B=this._stacks[C]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(hc(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[C]){const Q=this.pool.getObjectForId(j.rtt[C].id);if(Q.stamp===j.rtt[C].stamp){this.pool.useObject(Q);continue}}const Z=this.pool.getOrCreateFreeObject();this.pool.useObject(Z),this.pool.stampObject(Z),j.rtt[C]={id:Z.id,stamp:Z.stamp},v.context.bindFramebuffer.set(Z.fbo.framebuffer),v.context.clear({color:l.aO.transparent,stencil:0}),v.currentStencilSource=void 0;for(let Q=0;Q<B.length;Q++){const se=v.style._layers[B[Q]],ue=se.source?this._coordsDescendingInv[se.source][j.tileID.key]:[j.tileID];v.context.viewport.set([0,0,Z.fbo.width,Z.fbo.height]),v._renderTileClippingMasks(se,ue),v.renderLayer(v,v.style.sourceCaches[se.source],se,ue),se.source&&(j.rttCoords[se.source]=this._coordsDescendingInvStr[se.source][j.tileID.key])}}return hc(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),bl[d]}return!1}}const Lm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Vd=p,Qr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:Zn,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},gc=S=>{S.touchstart=S.dragStart,S.touchmoveWindow=S.dragMove,S.touchend=S.dragEnd},Am={showCompass:!0,showZoom:!0,visualizePitch:!1};class Om{constructor(a,d,v=!1){this.mousedown=B=>{this.startMouse(l.e({},B,{ctrlKey:!0,preventDefault:()=>B.preventDefault()}),_.mousePos(this.element,B)),_.addEventListener(window,"mousemove",this.mousemove),_.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=B=>{this.moveMouse(B,_.mousePos(this.element,B))},this.mouseup=B=>{this.mouseRotate.dragEnd(B),this.mousePitch&&this.mousePitch.dragEnd(B),this.offTemp()},this.touchstart=B=>{B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,B.targetTouches)[0],this.startTouch(B,this._startPos),_.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.addEventListener(window,"touchend",this.touchend))},this.touchmove=B=>{B.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,B.targetTouches)[0],this.moveTouch(B,this._lastPos))},this.touchend=B=>{B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const w=a.dragRotate._mouseRotate.getClickTolerance(),C=a.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=Za({clickTolerance:w,enable:!0}),this.touchRotate=(({enable:B,clickTolerance:j,bearingDegreesPerPixelMoved:Z=.8})=>{const Q=new Jt;return new pc({clickTolerance:j,move:(se,ue)=>({bearingDelta:(ue.x-se.x)*Z}),moveStateManager:Q,enable:B,assignEvents:gc})})({clickTolerance:w,enable:!0}),this.map=a,v&&(this.mousePitch=vh({clickTolerance:C,enable:!0}),this.touchPitch=(({enable:B,clickTolerance:j,pitchDegreesPerPixelMoved:Z=-.5})=>{const Q=new Jt;return new pc({clickTolerance:j,move:(se,ue)=>({pitchDelta:(ue.y-se.y)*Z}),moveStateManager:Q,enable:B,assignEvents:gc})})({clickTolerance:C,enable:!0})),_.addEventListener(d,"mousedown",this.mousedown),_.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(d,"touchcancel",this.reset)}startMouse(a,d){this.mouseRotate.dragStart(a,d),this.mousePitch&&this.mousePitch.dragStart(a,d),_.disableDrag()}startTouch(a,d){this.touchRotate.dragStart(a,d),this.touchPitch&&this.touchPitch.dragStart(a,d),_.disableDrag()}moveMouse(a,d){const v=this.map,{bearingDelta:w}=this.mouseRotate.dragMove(a,d)||{};if(w&&v.setBearing(v.getBearing()+w),this.mousePitch){const{pitchDelta:C}=this.mousePitch.dragMove(a,d)||{};C&&v.setPitch(v.getPitch()+C)}}moveTouch(a,d){const v=this.map,{bearingDelta:w}=this.touchRotate.dragMove(a,d)||{};if(w&&v.setBearing(v.getBearing()+w),this.touchPitch){const{pitchDelta:C}=this.touchPitch.dragMove(a,d)||{};C&&v.setPitch(v.getPitch()+C)}}off(){const a=this.element;_.removeEventListener(a,"mousedown",this.mousedown),_.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend),_.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){_.enableDrag(),_.removeEventListener(window,"mousemove",this.mousemove),_.removeEventListener(window,"mouseup",this.mouseup),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend)}}let wl;function bh(S,a,d){const v=new l.M(S.lng,S.lat);if(S=new l.M(S.lng,S.lat),a){const w=new l.M(S.lng-360,S.lat),C=new l.M(S.lng+360,S.lat),B=d.locationPoint(S).distSqr(a);d.locationPoint(w).distSqr(a)<B?S=w:d.locationPoint(C).distSqr(a)<B&&(S=C)}for(;Math.abs(S.lng-d.center.lng)>180;){const w=d.locationPoint(S);if(w.x>=0&&w.y>=0&&w.x<=d.width&&w.y<=d.height)break;S.lng>d.center.lng?S.lng-=360:S.lng+=360}return S.lng!==v.lng&&d.locationPoint(S).y>d.height/2-d.getHorizon()?S:v}const wh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qd(S,a,d){const v=S.classList;for(const w in wh)v.remove(`maplibregl-${d}-anchor-${w}`);v.add(`maplibregl-${d}-anchor-${a}`)}class km extends l.E{constructor(a){if(super(),this._onKeyPress=d=>{const v=d.code,w=d.charCode||d.keyCode;v!=="Space"&&v!=="Enter"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=d=>{const v=d.originalEvent.target,w=this._element;this._popup&&(v===w||w.contains(v))&&this.togglePopup()},this._update=d=>{var v;if(!this._map)return;const w=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!w)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?bh(this._lngLat,this._flatPos,this._map.transform):(v=this._lngLat)===null||v===void 0?void 0:v.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(C=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let B="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?B="rotateX(0deg)":this._pitchAlignment==="map"&&(B=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,`${wh[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${B} ${C}`),y.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(a==null?void 0:a.opacity,a==null?void 0:a.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=l.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");const d=_.createNS("http://www.w3.org/2000/svg","svg"),v=41,w=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${v}px`),d.setAttributeNS(null,"width",`${w}px`),d.setAttributeNS(null,"viewBox",`0 0 ${w} ${v}`);const C=_.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"stroke","none"),C.setAttributeNS(null,"stroke-width","1"),C.setAttributeNS(null,"fill","none"),C.setAttributeNS(null,"fill-rule","evenodd");const B=_.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const j=_.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const Z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ke of Z){const at=_.createNS("http://www.w3.org/2000/svg","ellipse");at.setAttributeNS(null,"opacity","0.04"),at.setAttributeNS(null,"cx","10.5"),at.setAttributeNS(null,"cy","5.80029008"),at.setAttributeNS(null,"rx",Ke.rx),at.setAttributeNS(null,"ry",Ke.ry),j.appendChild(at)}const Q=_.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill",this._color);const se=_.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Q.appendChild(se);const ue=_.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"opacity","0.25"),ue.setAttributeNS(null,"fill","#000000");const ye=_.createNS("http://www.w3.org/2000/svg","path");ye.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ue.appendChild(ye);const Le=_.createNS("http://www.w3.org/2000/svg","g");Le.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Le.setAttributeNS(null,"fill","#FFFFFF");const Pe=_.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Me=_.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#000000"),Me.setAttributeNS(null,"opacity","0.25"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962");const Se=_.createNS("http://www.w3.org/2000/svg","circle");Se.setAttributeNS(null,"fill","#FFFFFF"),Se.setAttributeNS(null,"cx","5.5"),Se.setAttributeNS(null,"cy","5.5"),Se.setAttributeNS(null,"r","5.4999962"),Pe.appendChild(Me),Pe.appendChild(Se),B.appendChild(j),B.appendChild(Q),B.appendChild(ue),B.appendChild(Le),B.appendChild(Pe),d.appendChild(B),d.setAttributeNS(null,"height",v*this._scale+"px"),d.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(d),this._offset=l.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),qd(this._element,this._anchor,"marker"),a&&a.className)for(const d of a.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=l.M.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const w=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var d,v;if(!(!((d=this._map)===null||d===void 0)&&d.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const w=this._map,C=w.terrain.depthAtPoint(this._pos),B=w.terrain.getElevationForLngLatZoom(this._lngLat,w.transform.tileZoom);if(w.transform.lngLatToCameraDepth(this._lngLat,B)-C<.006)return void(this._element.style.opacity=this._opacity);const j=-this._offset.y/w.transform._pixelPerMeter,Z=Math.sin(w.getPitch()*Math.PI/180)*j,Q=w.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),se=w.transform.lngLatToCameraDepth(this._lngLat,B+Z)-Q>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&se&&this._popup.remove(),this._element.style.opacity=se?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=l.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,d){return a===void 0&&d===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const oy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Gd=0,Mf=!1;const sy={maxWidth:100,unit:"metric"};function ay(S,a,d){const v=d&&d.maxWidth||100,w=S._container.clientHeight/2,C=S.unproject([0,w]),B=S.unproject([v,w]),j=C.distanceTo(B);if(d&&d.unit==="imperial"){const Z=3.2808*j;Z>5280?Nf(a,v,Z/5280,S._getUIString("ScaleControl.Miles")):Nf(a,v,Z,S._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?Nf(a,v,j/1852,S._getUIString("ScaleControl.NauticalMiles")):j>=1e3?Nf(a,v,j/1e3,S._getUIString("ScaleControl.Kilometers")):Nf(a,v,j,S._getUIString("ScaleControl.Meters"))}function Nf(S,a,d,v){const w=function(C){const B=Math.pow(10,`${Math.floor(C)}`.length-1);let j=C/B;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:function(Z){const Q=Math.pow(10,Math.ceil(-Math.log(Z)/Math.LN10));return Math.round(Z*Q)/Q}(j),B*j}(d);S.style.width=a*(w/d)+"px",S.innerHTML=`${w}&nbsp;${v}`}const Cv={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Iv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ly(S){if(S){if(typeof S=="number"){const a=Math.round(Math.abs(S)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,S),"top-left":new l.P(a,a),"top-right":new l.P(-a,a),bottom:new l.P(0,-S),"bottom-left":new l.P(a,-a),"bottom-right":new l.P(-a,-a),left:new l.P(S,0),right:new l.P(-S,0)}}if(S instanceof l.P||Array.isArray(S)){const a=l.P.convert(S);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:l.P.convert(S.center||[0,0]),top:l.P.convert(S.top||[0,0]),"top-left":l.P.convert(S["top-left"]||[0,0]),"top-right":l.P.convert(S["top-right"]||[0,0]),bottom:l.P.convert(S.bottom||[0,0]),"bottom-left":l.P.convert(S["bottom-left"]||[0,0]),"bottom-right":l.P.convert(S["bottom-right"]||[0,0]),left:l.P.convert(S.left||[0,0]),right:l.P.convert(S.right||[0,0])}}return ly(new l.P(0,0))}const Ox=p;u.AJAXError=l.be,u.Evented=l.E,u.LngLat=l.M,u.MercatorCoordinate=l.Y,u.Point=l.P,u.addProtocol=l.bf,u.config=l.a,u.removeProtocol=l.bg,u.AttributionControl=Hr,u.BoxZoomHandler=pa,u.CanvasSource=vt,u.CooperativeGesturesHandler=Ce,u.DoubleClickZoomHandler=f,u.DragPanHandler=q,u.DragRotateHandler=re,u.EdgeInsets=fu,u.FullscreenControl=class extends l.E{constructor(S={}){super(),this._onFullscreenChange=()=>{var a;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=d==null?void 0:d.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,S&&S.container&&(S.container instanceof HTMLElement?this._container=S.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){_.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const S=this._fullscreenButton=_.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);_.create("span","maplibregl-ctrl-icon",S).setAttribute("aria-hidden","true"),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.title=S}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=gt,u.GeolocateControl=class extends l.E{constructor(S){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",a)),this._finish()}},this._updateCamera=a=>{const d=new l.M(a.coords.longitude,a.coords.latitude),v=a.coords.accuracy,w=this._map.getBearing(),C=l.e({bearing:w},this.options.fitBoundsOptions),B=Kt.fromLngLat(d,v);this._map.fitBounds(B,C,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const d=new l.M(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Mf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=a=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=_.create("button","maplibregl-ctrl-geolocate",this._container),_.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",a===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new km({element:this._dotElement}),this._circleElement=_.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new km({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},oy,S)}onAdd(S){return this._map=S,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return l._(this,arguments,void 0,function*(a=!1){if(wl!==void 0&&!a)return wl;if(window.navigator.permissions===void 0)return wl=!!window.navigator.geolocation,wl;try{wl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{wl=!!window.navigator.geolocation}return wl})}().then(a=>this._setupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Gd=0,Mf=!1}_isOutOfMapMaxBounds(S){const a=this._map.getMaxBounds(),d=S.coords;return a&&(d.longitude<a.getWest()||d.longitude>a.getEast()||d.latitude<a.getSouth()||d.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const S=this._map.getBounds(),a=S.getSouthEast(),d=S.getNorthEast(),v=a.distanceTo(d),w=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${w}px`,this._circleElement.style.height=`${w}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Gd--,Mf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let S;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Gd++,Gd>1?(S={maximumAge:6e5,timeout:0},Mf=!0):(S=this.options.positionOptions,Mf=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,S)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.Hash=Tf,u.ImageSource=Pt,u.KeyboardHandler=pu,u.LngLatBounds=Kt,u.LogoControl=$i,u.Map=class extends hn{constructor(S){if(l.bc.mark(l.bd.create),(S=l.e({},Qr,S)).minZoom!=null&&S.maxZoom!=null&&S.minZoom>S.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(S.minPitch!=null&&S.maxPitch!=null&&S.minPitch>S.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(S.minPitch!=null&&S.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(S.maxPitch!=null&&S.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new xl(S.minZoom,S.maxZoom,S.minPitch,S.maxPitch,S.renderWorldCopies),{bearingSnap:S.bearingSnap}),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=S.interactive,this._maxTileCacheSize=S.maxTileCacheSize,this._maxTileCacheZoomLevels=S.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=S.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=S.preserveDrawingBuffer,this._antialias=S.antialias,this._trackResize=S.trackResize,this._bearingSnap=S.bearingSnap,this._refreshExpiredTiles=S.refreshExpiredTiles,this._fadeDuration=S.fadeDuration,this._crossSourceCollisions=S.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=S.collectResourceTiming,this._renderTaskQueue=new Po,this._controls=[],this._mapId=l.a3(),this._locale=l.e({},Lm,S.locale),this._clickTolerance=S.clickTolerance,this._overridePixelRatio=S.pixelRatio,this._maxCanvasSize=S.maxCanvasSize,this.transformCameraUpdate=S.transformCameraUpdate,this._imageQueueHandle=z.addThrottleControl(()=>this.isMoving()),this._requestManager=new D(S.transformRequest),typeof S.container=="string"){if(this._container=document.getElementById(S.container),!this._container)throw new Error(`Container '${S.container}' not found.`)}else{if(!(S.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=S.container}if(S.maxBounds&&this.setMaxBounds(S.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const d=gh(v=>{this._trackResize&&!this._removed&&this.resize(v)._update()},50);this._resizeObserver=new ResizeObserver(v=>{a?d(v):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new tn(this,S),this._hash=S.hash&&new Tf(typeof S.hash=="string"&&S.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch}),S.bounds&&(this.resize(),this.fitBounds(S.bounds,l.e({},S.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=S.localIdeographFontFamily,this._validateStyle=S.validateStyle,S.style&&this.setStyle(S.style,{localIdeographFontFamily:S.localIdeographFontFamily}),S.attributionControl&&this.addControl(new Hr(typeof S.attributionControl=="boolean"?void 0:S.attributionControl)),S.maplibreLogo&&this.addControl(new $i,S.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new l.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new l.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new l.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(S,a){if(a===void 0&&(a=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=S.onAdd(this);this._controls.push(S);const v=this._controlPositions[a];return a.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(S){if(!S||!S.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(S);return a>-1&&this._controls.splice(a,1),S.onRemove(this),this}hasControl(S){return this._controls.indexOf(S)>-1}calculateCameraOptionsFromTo(S,a,d,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(S,a,d,v)}resize(S){var a;const d=this._containerDimensions(),v=d[0],w=d[1],C=this._getClampedPixelRatio(v,w);if(this._resizeCanvas(v,w,C),this.painter.resize(v,w,C),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const Z=this._getClampedPixelRatio(v,w);this._resizeCanvas(v,w,Z),this.painter.resize(v,w,Z)}this.transform.resize(v,w),(a=this._requestedCameraState)===null||a===void 0||a.resize(v,w);const B=!this._moving;return B&&(this.stop(),this.fire(new l.k("movestart",S)).fire(new l.k("move",S))),this.fire(new l.k("resize",S)),B&&this.fire(new l.k("moveend",S)),this}_getClampedPixelRatio(S,a){const{0:d,1:v}=this._maxCanvasSize,w=this.getPixelRatio(),C=S*w,B=a*w;return Math.min(C>d?d/C:1,B>v?v/B:1)*w}getPixelRatio(){var S;return(S=this._overridePixelRatio)!==null&&S!==void 0?S:devicePixelRatio}setPixelRatio(S){this._overridePixelRatio=S,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(S){return this.transform.setMaxBounds(Kt.convert(S)),this._update()}setMinZoom(S){if((S=S??-2)>=-2&&S<=this.transform.maxZoom)return this.transform.minZoom=S,this._update(),this.getZoom()<S&&this.setZoom(S),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(S){if((S=S??22)>=this.transform.minZoom)return this.transform.maxZoom=S,this._update(),this.getZoom()>S&&this.setZoom(S),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(S){if((S=S??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.minPitch=S,this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(S){if((S=S??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(S>=this.transform.minPitch)return this.transform.maxPitch=S,this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(S){return this.transform.renderWorldCopies=S,this._update()}project(S){return this.transform.locationPoint(l.M.convert(S),this.style&&this.terrain)}unproject(S){return this.transform.pointLocation(l.P.convert(S),this.terrain)}isMoving(){var S;return this._moving||((S=this.handlers)===null||S===void 0?void 0:S.isMoving())}isZooming(){var S;return this._zooming||((S=this.handlers)===null||S===void 0?void 0:S.isZooming())}isRotating(){var S;return this._rotating||((S=this.handlers)===null||S===void 0?void 0:S.isRotating())}_createDelegatedListener(S,a,d){if(S==="mouseenter"||S==="mouseover"){let v=!1;return{layer:a,listener:d,delegates:{mousemove:C=>{const B=this.getLayer(a)?this.queryRenderedFeatures(C.point,{layers:[a]}):[];B.length?v||(v=!0,d.call(this,new si(S,this,C.originalEvent,{features:B}))):v=!1},mouseout:()=>{v=!1}}}}if(S==="mouseleave"||S==="mouseout"){let v=!1;return{layer:a,listener:d,delegates:{mousemove:B=>{(this.getLayer(a)?this.queryRenderedFeatures(B.point,{layers:[a]}):[]).length?v=!0:v&&(v=!1,d.call(this,new si(S,this,B.originalEvent)))},mouseout:B=>{v&&(v=!1,d.call(this,new si(S,this,B.originalEvent)))}}}}{const v=w=>{const C=this.getLayer(a)?this.queryRenderedFeatures(w.point,{layers:[a]}):[];C.length&&(w.features=C,d.call(this,w),delete w.features)};return{layer:a,listener:d,delegates:{[S]:v}}}}on(S,a,d){if(d===void 0)return super.on(S,a);const v=this._createDelegatedListener(S,a,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(v);for(const w in v.delegates)this.on(w,v.delegates[w]);return this}once(S,a,d){if(d===void 0)return super.once(S,a);const v=this._createDelegatedListener(S,a,d);for(const w in v.delegates)this.once(w,v.delegates[w]);return this}off(S,a,d){return d===void 0?super.off(S,a):(this._delegatedListeners&&this._delegatedListeners[S]&&(v=>{const w=this._delegatedListeners[S];for(let C=0;C<w.length;C++){const B=w[C];if(B.layer===a&&B.listener===d){for(const j in B.delegates)this.off(j,B.delegates[j]);return w.splice(C,1),this}}})(),this)}queryRenderedFeatures(S,a){if(!this.style)return[];let d;const v=S instanceof l.P||Array.isArray(S),w=v?S:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(v?{}:S)||{},w instanceof l.P||typeof w[0]=="number")d=[l.P.convert(w)];else{const C=l.P.convert(w[0]),B=l.P.convert(w[1]);d=[C,new l.P(B.x,C.y),B,new l.P(C.x,B.y),C]}return this.style.queryRenderedFeatures(d,a,this.transform)}querySourceFeatures(S,a){return this.style.querySourceFeatures(S,a)}setStyle(S,a){return(a=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(S,a))}setTransformRequest(S){return this._requestManager.setTransformRequest(S),this}_getUIString(S){const a=this._locale[S];if(a==null)throw new Error(`Missing UI string '${S}'`);return a}_updateStyle(S,a){if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(S,a));const d=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!S)),S?(this.style=new Cn(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S,a,d):this.style.loadJSON(S,a,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Cn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(S,a){if(typeof S=="string"){const d=this._requestManager.transformRequest(S,"Style");l.h(d,new AbortController).then(v=>{this._updateDiff(v.data,a)}).catch(v=>{v&&this.fire(new l.j(v))})}else typeof S=="object"&&this._updateDiff(S,a)}_updateDiff(S,a){try{this.style.setState(S,a)&&this._update(!0)}catch(d){l.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(S,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(S,a){return this._lazyInitEmptyStyle(),this.style.addSource(S,a),this._update(!0)}isSourceLoaded(S){const a=this.style&&this.style.sourceCaches[S];if(a!==void 0)return a.loaded();this.fire(new l.j(new Error(`There is no source with ID '${S}'`)))}setTerrain(S){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),S){const a=this.style.sourceCaches[S.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${S.source}`);this.terrain===null&&a.reload();for(const d in this.style._layers){const v=this.style._layers[d];v.type==="hillshade"&&v.source===S.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new iy(this.painter,a,S),this.painter.renderToTexture=new Ud(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==S.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:S})),this}getTerrain(){var S,a;return(a=(S=this.terrain)===null||S===void 0?void 0:S.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const S=this.style&&this.style.sourceCaches;for(const a in S){const d=S[a]._tiles;for(const v in d){const w=d[v];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}removeSource(S){return this.style.removeSource(S),this._update(!0)}getSource(S){return this.style.getSource(S)}addImage(S,a,d={}){const{pixelRatio:v=1,sdf:w=!1,stretchX:C,stretchY:B,content:j}=d;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||l.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Z,height:Q,data:se}=a,ue=a;return this.style.addImage(S,{data:new l.R({width:Z,height:Q},new Uint8Array(se)),pixelRatio:v,stretchX:C,stretchY:B,content:j,sdf:w,version:0,userImage:ue}),ue.onAdd&&ue.onAdd(this,S),this}}{const{width:Z,height:Q,data:se}=y.getImageData(a);this.style.addImage(S,{data:new l.R({width:Z,height:Q},se),pixelRatio:v,stretchX:C,stretchY:B,content:j,sdf:w,version:0})}}updateImage(S,a){const d=this.style.getImage(S);if(!d)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=a instanceof HTMLImageElement||l.b(a)?y.getImageData(a):a,{width:w,height:C,data:B}=v;if(w===void 0||C===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==d.data.width||C!==d.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(a instanceof HTMLImageElement||l.b(a));return d.data.replace(B,j),this.style.updateImage(S,d),this}getImage(S){return this.style.getImage(S)}hasImage(S){return S?!!this.style.getImage(S):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(S){this.style.removeImage(S)}loadImage(S){return z.getImage(this._requestManager.transformRequest(S,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(S,a){return this._lazyInitEmptyStyle(),this.style.addLayer(S,a),this._update(!0)}moveLayer(S,a){return this.style.moveLayer(S,a),this._update(!0)}removeLayer(S){return this.style.removeLayer(S),this._update(!0)}getLayer(S){return this.style.getLayer(S)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(S,a,d){return this.style.setLayerZoomRange(S,a,d),this._update(!0)}setFilter(S,a,d={}){return this.style.setFilter(S,a,d),this._update(!0)}getFilter(S){return this.style.getFilter(S)}setPaintProperty(S,a,d,v={}){return this.style.setPaintProperty(S,a,d,v),this._update(!0)}getPaintProperty(S,a){return this.style.getPaintProperty(S,a)}setLayoutProperty(S,a,d,v={}){return this.style.setLayoutProperty(S,a,d,v),this._update(!0)}getLayoutProperty(S,a){return this.style.getLayoutProperty(S,a)}setGlyphs(S,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(S,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(S,a,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(S,a,d,v=>{v||this._update(!0)}),this}removeSprite(S){return this._lazyInitEmptyStyle(),this.style.removeSprite(S),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(S,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(S,a,d=>{d||this._update(!0)}),this}setLight(S,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(S,a),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(S,a){return this.style.setFeatureState(S,a),this._update()}removeFeatureState(S,a){return this.style.removeFeatureState(S,a),this._update()}getFeatureState(S){return this.style.getFeatureState(S)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let S=0,a=0;return this._container&&(S=this._container.clientWidth||400,a=this._container.clientHeight||300),[S,a]}_setupContainer(){const S=this._container;S.classList.add("maplibregl-map");const a=this._canvasContainer=_.create("div","maplibregl-canvas-container",S);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=_.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),v=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],v);const w=this._controlContainer=_.create("div","maplibregl-control-container",S),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(B=>{C[B]=_.create("div",`maplibregl-ctrl-${B} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(S,a,d){this._canvas.width=Math.floor(d*S),this._canvas.height=Math.floor(d*a),this._canvas.style.width=`${S}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const S={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let a=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{a={requestedAttributes:S},v&&(a.statusMessage=v.statusMessage,a.type=v.type)},{once:!0});const d=this._canvas.getContext("webgl2",S)||this._canvas.getContext("webgl",S);if(!d){const v="Failed to initialize WebGL";throw a?(a.message=v,new Error(JSON.stringify(a))):new Error(v)}this.painter=new Sm(d,this.transform),T.testSupport(d)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(S){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(S){return this._update(),this._renderTaskQueue.add(S)}_cancelRenderFrame(S){this._renderTaskQueue.remove(S)}_render(S){const a=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const w=this.transform.zoom,C=y.now();this.style.zoomHistory.update(w,C);const B=new l.a8(w,{now:C,fadeDuration:a,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),j=B.crossFadingFactor();j===1&&j===this._crossFadingFactor||(d=!0,this._crossFadingFactor=j),this.style.update(B)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bc.mark(l.bd.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,l.bc.mark(l.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var S;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),z.removeThrottleControl(this._imageQueueHandle),(S=this._resizeObserver)===null||S===void 0||S.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),_.remove(this._canvasContainer),_.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),l.bc.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,y.frameAsync(this._frameRequest).then(S=>{l.bc.frame(S),this._frameRequest=null,this._render(S)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())}get showPadding(){return!!this._showPadding}set showPadding(S){this._showPadding!==S&&(this._showPadding=S,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())}get repaint(){return!!this._repaint}set repaint(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(S){this._vertices=S,this._update()}get version(){return Vd}getCameraTargetElevation(){return this.transform.elevation}},u.MapMouseEvent=si,u.MapTouchEvent=Ss,u.MapWheelEvent=Cm,u.Marker=km,u.NavigationControl=class{constructor(S){this._updateZoomButtons=()=>{const a=this._map.getZoom(),d=a===this._map.getMaxZoom(),v=a===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=a},this._setButtonTitle=(a,d)=>{const v=this._map._getUIString(`NavigationControl.${d}`);a.title=v,a.setAttribute("aria-label",v)},this.options=l.e({},Am,S),this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),_.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),_.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=_.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Om(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(S,a){const d=_.create("button",S,this._container);return d.type="button",d.addEventListener("click",a),d}},u.Popup=class extends l.E{constructor(S){super(),this.remove=()=>(this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.k("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{var d;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=_.create("div","maplibregl-popup",this._map.getContainer()),this._tip=_.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const j of this.options.className.split(" "))this._container.classList.add(j);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?bh(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._trackPointer&&!a)return;const v=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationPoint(this._lngLat));let w=this.options.anchor;const C=ly(this.options.offset);if(!w){const j=this._container.offsetWidth,Z=this._container.offsetHeight;let Q;Q=v.y+C.bottom.y<Z?["top"]:v.y>this._map.transform.height-Z?["bottom"]:[],v.x<j/2?Q.push("left"):v.x>this._map.transform.width-j/2&&Q.push("right"),w=Q.length===0?"bottom":Q.join("-")}let B=v.add(C[w]);this.options.subpixelPositioning||(B=B.round()),_.setTransform(this._container,`${wh[w]} translate(${B.x}px,${B.y}px)`),qd(this._container,w,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Cv),S)}addTo(S){return this._map&&this.remove(),this._map=S,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(S){return this._lngLat=l.M.convert(S),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(S){return this.setDOMContent(document.createTextNode(S))}setHTML(S){const a=document.createDocumentFragment(),d=document.createElement("body");let v;for(d.innerHTML=S;v=d.firstChild,v;)a.appendChild(v);return this.setDOMContent(a)}getMaxWidth(){var S;return(S=this._container)===null||S===void 0?void 0:S.style.maxWidth}setMaxWidth(S){return this.options.maxWidth=S,this._update(),this}setDOMContent(S){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(S),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(S){this._container&&this._container.classList.add(S)}removeClassName(S){this._container&&this._container.classList.remove(S)}setOffset(S){return this.options.offset=S,this._update(),this}toggleClassName(S){if(this._container)return this._container.classList.toggle(S)}setSubpixelPositioning(S){this.options.subpixelPositioning=S}_createCloseButton(){this.options.closeButton&&(this._closeButton=_.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const S=this._container.querySelector(Iv);S&&S.focus()}},u.RasterDEMTileSource=lt,u.RasterTileSource=rt,u.ScaleControl=class{constructor(S){this._onMove=()=>{ay(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,ay(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},sy),S)}getDefaultPosition(){return"bottom-left"}onAdd(S){return this._map=S,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-scale",S.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=$d,u.Style=Cn,u.TerrainControl=class{constructor(S){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=S}onAdd(S){return this._map=S,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=_.create("button","maplibregl-ctrl-terrain",this._container),_.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){_.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=Pm,u.TwoFingersTouchRotateHandler=jd,u.TwoFingersTouchZoomHandler=ny,u.TwoFingersTouchZoomRotateHandler=me,u.VectorTileSource=Tr,u.VideoSource=je,u.addSourceType=(S,a)=>l._(void 0,void 0,void 0,function*(){if(Lt(S))throw new Error(`A source type called "${S}" already exists.`);((d,v)=>{St[d]=v})(S,a)}),u.clearPrewarmedResources=function(){const S=$e;S&&(S.isPreloaded()&&S.numActive()===1?(S.release(xe),$e=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},u.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return bt().getRTLTextPluginStatus()},u.getVersion=function(){return Ox},u.getWorkerCount=function(){return Ee.workerCount},u.getWorkerUrl=function(){return l.a.WORKER_URL},u.importScriptInWorkers=function(S){return ct().broadcast("IS",S)},u.prewarm=function(){He().acquire(xe)},u.setMaxParallelImageRequests=function(S){l.a.MAX_PARALLEL_IMAGE_REQUESTS=S},u.setRTLTextPlugin=function(S,a){return bt().setRTLTextPlugin(S,a)},u.setWorkerCount=function(S){Ee.workerCount=S},u.setWorkerUrl=function(S){l.a.WORKER_URL=S}});var o=n;return o})})(j6);var _ne=j6.exports;const xn=bd(_ne),U6="3.7.7",vne=U6,lv=typeof Buffer=="function",pD=typeof TextDecoder=="function"?new TextDecoder:void 0,mD=typeof TextEncoder=="function"?new TextEncoder:void 0,xne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",I0=Array.prototype.slice.call(xne),Ob=(e=>{let t={};return e.forEach((n,r)=>t[n]=r),t})(I0),bne=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Ms=String.fromCharCode.bind(String),gD=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),V6=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),q6=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),G6=e=>{let t,n,r,i,o="";const u=e.length%3;for(let l=0;l<e.length;){if((n=e.charCodeAt(l++))>255||(r=e.charCodeAt(l++))>255||(i=e.charCodeAt(l++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|i,o+=I0[t>>18&63]+I0[t>>12&63]+I0[t>>6&63]+I0[t&63]}return u?o.slice(0,u-3)+"===".substring(u):o},NA=typeof btoa=="function"?e=>btoa(e):lv?e=>Buffer.from(e,"binary").toString("base64"):G6,QI=lv?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let r=0,i=e.length;r<i;r+=4096)n.push(Ms.apply(null,e.subarray(r,r+4096)));return NA(n.join(""))},mw=(e,t=!1)=>t?V6(QI(e)):QI(e),wne=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?Ms(192|t>>>6)+Ms(128|t&63):Ms(224|t>>>12&15)+Ms(128|t>>>6&63)+Ms(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return Ms(240|t>>>18&7)+Ms(128|t>>>12&63)+Ms(128|t>>>6&63)+Ms(128|t&63)}},Ene=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,H6=e=>e.replace(Ene,wne),yD=lv?e=>Buffer.from(e,"utf8").toString("base64"):mD?e=>QI(mD.encode(e)):e=>NA(H6(e)),e_=(e,t=!1)=>t?V6(yD(e)):yD(e),_D=e=>e_(e,!0),Sne=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Tne=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return Ms((n>>>10)+55296)+Ms((n&1023)+56320);case 3:return Ms((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Ms((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Z6=e=>e.replace(Sne,Tne),W6=e=>{if(e=e.replace(/\s+/g,""),!bne.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",r,i;for(let o=0;o<e.length;)t=Ob[e.charAt(o++)]<<18|Ob[e.charAt(o++)]<<12|(r=Ob[e.charAt(o++)])<<6|(i=Ob[e.charAt(o++)]),n+=r===64?Ms(t>>16&255):i===64?Ms(t>>16&255,t>>8&255):Ms(t>>16&255,t>>8&255,t&255);return n},DA=typeof atob=="function"?e=>atob(q6(e)):lv?e=>Buffer.from(e,"base64").toString("binary"):W6,K6=lv?e=>gD(Buffer.from(e,"base64")):e=>gD(DA(e).split("").map(t=>t.charCodeAt(0))),X6=e=>K6(Y6(e)),Cne=lv?e=>Buffer.from(e,"base64").toString("utf8"):pD?e=>pD.decode(K6(e)):e=>Z6(DA(e)),Y6=e=>q6(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),eP=e=>Cne(Y6(e)),Ine=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},J6=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),Q6=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,J6(n));e("fromBase64",function(){return eP(this)}),e("toBase64",function(t){return e_(this,t)}),e("toBase64URI",function(){return e_(this,!0)}),e("toBase64URL",function(){return e_(this,!0)}),e("toUint8Array",function(){return X6(this)})},ej=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,J6(n));e("toBase64",function(t){return mw(this,t)}),e("toBase64URI",function(){return mw(this,!0)}),e("toBase64URL",function(){return mw(this,!0)})},Pne=()=>{Q6(),ej()},Lne={version:U6,VERSION:vne,atob:DA,atobPolyfill:W6,btoa:NA,btoaPolyfill:G6,fromBase64:eP,toBase64:e_,encode:e_,encodeURI:_D,encodeURL:_D,utob:H6,btou:Z6,decode:eP,isValid:Ine,fromUint8Array:mw,toUint8Array:X6,extendString:Q6,extendUint8Array:ej,extendBuiltins:Pne};var zA={exports:{}},t_=typeof Reflect=="object"?Reflect:null,vD=t_&&typeof t_.apply=="function"?t_.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},gw;t_&&typeof t_.ownKeys=="function"?gw=t_.ownKeys:Object.getOwnPropertySymbols?gw=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:gw=function(t){return Object.getOwnPropertyNames(t)};function Ane(e){console&&console.warn&&console.warn(e)}var tj=Number.isNaN||function(t){return t!==t};function ni(){ni.init.call(this)}zA.exports=ni;zA.exports.once=Mne;ni.EventEmitter=ni;ni.prototype._events=void 0;ni.prototype._eventsCount=0;ni.prototype._maxListeners=void 0;var xD=10;function PS(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(ni,"defaultMaxListeners",{enumerable:!0,get:function(){return xD},set:function(e){if(typeof e!="number"||e<0||tj(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");xD=e}});ni.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ni.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||tj(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function nj(e){return e._maxListeners===void 0?ni.defaultMaxListeners:e._maxListeners}ni.prototype.getMaxListeners=function(){return nj(this)};ni.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var u;if(n.length>0&&(u=n[0]),u instanceof Error)throw u;var l=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw l.context=u,l}var p=o[t];if(p===void 0)return!1;if(typeof p=="function")vD(p,this,n);else for(var g=p.length,x=aj(p,g),r=0;r<g;++r)vD(x[r],this,n);return!0};function rj(e,t,n,r){var i,o,u;if(PS(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),u=o[t]),u===void 0)u=o[t]=n,++e._eventsCount;else if(typeof u=="function"?u=o[t]=r?[n,u]:[u,n]:r?u.unshift(n):u.push(n),i=nj(e),i>0&&u.length>i&&!u.warned){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=u.length,Ane(l)}return e}ni.prototype.addListener=function(t,n){return rj(this,t,n,!1)};ni.prototype.on=ni.prototype.addListener;ni.prototype.prependListener=function(t,n){return rj(this,t,n,!0)};function One(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ij(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=One.bind(r);return i.listener=n,r.wrapFn=i,i}ni.prototype.once=function(t,n){return PS(n),this.on(t,ij(this,t,n)),this};ni.prototype.prependOnceListener=function(t,n){return PS(n),this.prependListener(t,ij(this,t,n)),this};ni.prototype.removeListener=function(t,n){var r,i,o,u,l;if(PS(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(o=-1,u=r.length-1;u>=0;u--)if(r[u]===n||r[u].listener===n){l=r[u].listener,o=u;break}if(o<0)return this;o===0?r.shift():kne(r,o),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};ni.prototype.off=ni.prototype.removeListener;ni.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),u;for(i=0;i<o.length;++i)u=o[i],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function oj(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Rne(i):aj(i,i.length)}ni.prototype.listeners=function(t){return oj(this,t,!0)};ni.prototype.rawListeners=function(t){return oj(this,t,!1)};ni.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):sj.call(e,t)};ni.prototype.listenerCount=sj;function sj(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ni.prototype.eventNames=function(){return this._eventsCount>0?gw(this._events):[]};function aj(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function kne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Rne(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Mne(e,t){return new Promise(function(n,r){function i(u){e.removeListener(t,o),r(u)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}lj(e,t,o,{once:!0}),t!=="error"&&Nne(e,i,{once:!0})})}function Nne(e,t,n){typeof e.on=="function"&&lj(e,"error",t,n)}function lj(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Dne=zA.exports;const zne=bd(Dne);var Cu,Si,io,yp,nx,_p,rx,tP,kl,Sc,IE,uj,ix,nP,ox,rP,sx,iP,PE,cj,ax,oP;class Fne extends Map{constructor(n={}){super();cn(this,rx);cn(this,kl);cn(this,IE);cn(this,ix);cn(this,ox);cn(this,sx);cn(this,PE);cn(this,ax);cn(this,Cu,0);cn(this,Si,new Map);cn(this,io,new Map);cn(this,yp,void 0);cn(this,nx,void 0);cn(this,_p,void 0);if(!(n.maxSize&&n.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof n.maxAge=="number"&&n.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");rn(this,yp,n.maxSize),rn(this,nx,n.maxAge||Number.POSITIVE_INFINITY),rn(this,_p,n.onEviction)}get __oldCache(){return Xe(this,io)}get(n){if(Xe(this,Si).has(n)){const r=Xe(this,Si).get(n);return En(this,ix,nP).call(this,n,r)}if(Xe(this,io).has(n)){const r=Xe(this,io).get(n);if(En(this,kl,Sc).call(this,n,r)===!1)return En(this,PE,cj).call(this,n,r),r.value}}set(n,r,{maxAge:i=Xe(this,nx)}={}){const o=typeof i=="number"&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0;return Xe(this,Si).has(n)?Xe(this,Si).set(n,{value:r,expiry:o}):En(this,sx,iP).call(this,n,{value:r,expiry:o}),this}has(n){return Xe(this,Si).has(n)?!En(this,kl,Sc).call(this,n,Xe(this,Si).get(n)):Xe(this,io).has(n)?!En(this,kl,Sc).call(this,n,Xe(this,io).get(n)):!1}peek(n){if(Xe(this,Si).has(n))return En(this,ox,rP).call(this,n,Xe(this,Si));if(Xe(this,io).has(n))return En(this,ox,rP).call(this,n,Xe(this,io))}delete(n){const r=Xe(this,Si).delete(n);return r&&by(this,Cu)._--,Xe(this,io).delete(n)||r}clear(){Xe(this,Si).clear(),Xe(this,io).clear(),rn(this,Cu,0)}resize(n){if(!(n&&n>0))throw new TypeError("`maxSize` must be a number greater than 0");const r=[...En(this,ax,oP).call(this)],i=r.length-n;i<0?(rn(this,Si,new Map(r)),rn(this,io,new Map),rn(this,Cu,r.length)):(i>0&&En(this,rx,tP).call(this,r.slice(0,i)),rn(this,io,new Map(r.slice(i))),rn(this,Si,new Map),rn(this,Cu,0)),rn(this,yp,n)}*keys(){for(const[n]of this)yield n}*values(){for(const[,n]of this)yield n}*[Symbol.iterator](){for(const n of Xe(this,Si)){const[r,i]=n;En(this,kl,Sc).call(this,r,i)===!1&&(yield[r,i.value])}for(const n of Xe(this,io)){const[r,i]=n;Xe(this,Si).has(r)||En(this,kl,Sc).call(this,r,i)===!1&&(yield[r,i.value])}}*entriesDescending(){let n=[...Xe(this,Si)];for(let r=n.length-1;r>=0;--r){const i=n[r],[o,u]=i;En(this,kl,Sc).call(this,o,u)===!1&&(yield[o,u.value])}n=[...Xe(this,io)];for(let r=n.length-1;r>=0;--r){const i=n[r],[o,u]=i;Xe(this,Si).has(o)||En(this,kl,Sc).call(this,o,u)===!1&&(yield[o,u.value])}}*entriesAscending(){for(const[n,r]of En(this,ax,oP).call(this))yield[n,r.value]}get size(){if(!Xe(this,Cu))return Xe(this,io).size;let n=0;for(const r of Xe(this,io).keys())Xe(this,Si).has(r)||n++;return Math.min(Xe(this,Cu)+n,Xe(this,yp))}get maxSize(){return Xe(this,yp)}entries(){return this.entriesAscending()}forEach(n,r=this){for(const[i,o]of this.entriesAscending())n.call(r,o,i,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}Cu=new WeakMap,Si=new WeakMap,io=new WeakMap,yp=new WeakMap,nx=new WeakMap,_p=new WeakMap,rx=new WeakSet,tP=function(n){if(typeof Xe(this,_p)=="function")for(const[r,i]of n)Xe(this,_p).call(this,r,i.value)},kl=new WeakSet,Sc=function(n,r){return typeof r.expiry=="number"&&r.expiry<=Date.now()?(typeof Xe(this,_p)=="function"&&Xe(this,_p).call(this,n,r.value),this.delete(n)):!1},IE=new WeakSet,uj=function(n,r){if(En(this,kl,Sc).call(this,n,r)===!1)return r.value},ix=new WeakSet,nP=function(n,r){return r.expiry?En(this,IE,uj).call(this,n,r):r.value},ox=new WeakSet,rP=function(n,r){const i=r.get(n);return En(this,ix,nP).call(this,n,i)},sx=new WeakSet,iP=function(n,r){Xe(this,Si).set(n,r),by(this,Cu)._++,Xe(this,Cu)>=Xe(this,yp)&&(rn(this,Cu,0),En(this,rx,tP).call(this,Xe(this,io)),rn(this,io,Xe(this,Si)),rn(this,Si,new Map))},PE=new WeakSet,cj=function(n,r){Xe(this,io).delete(n),En(this,sx,iP).call(this,n,r)},ax=new WeakSet,oP=function*(){for(const n of Xe(this,io)){const[r,i]=n;Xe(this,Si).has(r)||En(this,kl,Sc).call(this,r,i)===!1&&(yield n)}for(const n of Xe(this,Si)){const[r,i]=n;En(this,kl,Sc).call(this,r,i)===!1&&(yield n)}};function Bne(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class jne{constructor(){this._apiKey="",this._fetch=Bne(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const Vo=new jne,Ex={AUTO:"auto",ALBANIAN:"sq",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HUNGARIAN:"hu",ICELANDIC:"is",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALTESE:"mt",NORWEGIAN:"no",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"},$ne=new Set(Object.values(Ex));function hj(){if(typeof navigator>"u")return Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];const e=Array.from(new Set(navigator.languages.map(t=>t.split("-")[0]))).filter(t=>$ne.has(t));return e.length?e[0]:Ex.ENGLISH}async function Jc(e,t={}){if(Vo.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return Vo.fetch(e,t)}const ru={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(ru);class Qu extends Error{constructor(t,n=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${n}`),this.res=t}}const LS={400:"Query too long / Invalid parameters",403:"Key is missing, invalid or restricted"};function fj(e,t){const{language:n}=t;if(n==null)return;const r=Array.from(new Set((Array.isArray(n)?n:[n]).map(i=>i===Ex.AUTO?hj():i))).join(",");e.set("language",r)}function dj(e,t){const{apiKey:n,limit:r,types:i,excludeTypes:o}=t;e.set("key",n??Vo.apiKey),r!=null&&e.set("limit",String(r)),i!=null&&e.set("types",i.join(",")),o!=null&&e.set("excludeTypes",String(o)),fj(e,t)}function pj(e,t){dj(e,t);const{bbox:n,proximity:r,country:i,fuzzyMatch:o,autocomplete:u}=t;n!=null&&e.set("bbox",n.join(",")),r!=null&&e.set("proximity",r==="ip"?r:r.join(",")),i!=null&&e.set("country",i.join(",")),o!=null&&e.set("fuzzyMatch",o?"true":"false"),u!=null&&e.set("autocomplete",u?"true":"false")}async function Une(e,t={}){if(typeof e!="string"||e.trim().length===0)throw new Error("The query must be a non-empty string");const n=new URL(`geocoding/${encodeURIComponent(e)}.json`,ru.maptilerApiURL),{searchParams:r}=n;pj(r,t);const i=n.toString(),o=await Jc(i);if(!o.ok)throw new Qu(o,LS[o.status]??"");return await o.json()}async function Vne(e,t={}){if(!Array.isArray(e)||e.length<2)throw new Error("The position must be an array of form [lng, lat].");const n=new URL(`geocoding/${e[0]},${e[1]}.json`,ru.maptilerApiURL);dj(n.searchParams,t);const r=n.toString(),i=await Jc(r);if(!i.ok)throw new Qu(i,LS[i.status]??"");return await i.json()}async function qne(e,t={}){const n=new URL(`geocoding/${e}.json`,ru.maptilerApiURL);n.searchParams.set("key",t.apiKey??Vo.apiKey),fj(n.searchParams,t);const r=n.toString(),i=await Jc(r);if(!i.ok)throw new Qu(i,LS[i.status]??"");return await i.json()}async function Gne(e,t={}){if(!e.length)return[];const n=e.map(p=>encodeURIComponent(p)).join(";"),r=new URL(`geocoding/${n}.json`,ru.maptilerApiURL),{searchParams:i}=r;pj(i,t);const o=r.toString(),u=await Jc(o);if(!u.ok)throw new Qu(u,LS[u.status]??"");const l=await u.json();return e.length===1?[l]:l}const Hne={forward:Une,reverse:Vne,byId:qne,batch:Gne,language:Ex},bD={403:"Key is missing, invalid or restricted"};async function Zne(e={}){const t=new URL("geolocation/ip.json",ru.maptilerApiURL);t.searchParams.set("key",e.apiKey??Vo.apiKey);const n=t.toString(),r=await Jc(n);if(!r.ok)throw new Qu(r,r.status in bD?bD[r.status]:"");return await r.json()}const sP={info:Zne},aE={403:"Key is missing, invalid or restricted"};async function Wne(e,t={}){if(typeof e!="string"||e.trim().length===0)throw new Error("The query must be a non-empty string");const n=new URL(`coordinates/search/${e}.json`,ru.maptilerApiURL);n.searchParams.set("key",t.apiKey??Vo.apiKey),"limit"in t&&n.searchParams.set("limit",t.limit.toString()),"transformations"in t&&n.searchParams.set("transformations",t.transformations.toString()),"exports"in t&&n.searchParams.set("exports",t.exports.toString());const r=n.toString(),i=await Jc(r);if(!i.ok)throw new Qu(i,i.status in aE?aE[i.status]:"");return await i.json()}async function Kne(e,t={}){const n=(Array.isArray(e[0])?e:[e]).map(l=>`${l[0]},${l[1]}`).join(";"),r=new URL(`coordinates/transform/${n}.json`,ru.maptilerApiURL);r.searchParams.set("key",t.apiKey??Vo.apiKey),"sourceCrs"in t&&r.searchParams.set("s_srs",t.sourceCrs.toString()),"targetCrs"in t&&r.searchParams.set("t_srs",t.targetCrs.toString()),"operations"in t&&r.searchParams.set("ops",(Array.isArray(t.operations)?t.operations:[t.operations]).join("|"));const i=r.toString(),o=await Jc(i);if(!o.ok)throw new Qu(o,o.status in aE?aE[o.status]:"");return await o.json()}const Xne={search:Wne,transform:Kne},wD={403:"Key is missing, invalid or restricted"};async function Yne(e,t={}){if(typeof e!="string"||e.trim().length===0)throw new Error("The data ID must be a non-empty string");const n=new URL(`data/${encodeURIComponent(e)}/features.json`,ru.maptilerApiURL);n.searchParams.set("key",t.apiKey??Vo.apiKey);const r=n.toString(),i=await Jc(r);if(!i.ok)throw new Qu(i,i.status in wD?wD[i.status]:"");return await i.json()}const Jne={get:Yne};function FA(e){const t=/^maptiler:\/\/(.*)/;let n;const r=e.trim();let i;return r.startsWith("http://")||r.startsWith("https://")?i=r:(n=t.exec(r))!==null?i=`https://api.maptiler.com/maps/${n[1]}/style.json`:i=`https://api.maptiler.com/maps/${r}/style.json`,i}class AS{constructor(t,n,r,i,o,u){this.name=t,this.variantType=n,this.id=r,this.referenceStyle=i,this.description=o,this.imageURL=u}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return FA(this.getId())}}class OS{constructor(t,n){this.name=t,this.id=n,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const I1=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function Qne(e){return new Proxy(e,{get(t,n,r){return t.hasVariant(n)?t.getVariant(n):n.toString().toUpperCase()===n?e.getDefaultVariant():Reflect.get(t,n,r)}})}function ere(){const e={};for(let t=0;t<I1.length;t+=1){const n=I1[t],r=Qne(new OS(n.name,n.referenceStyleID));for(let i=0;i<n.variants.length;i+=1){const o=n.variants[i],u=new AS(o.name,o.variantType,o.id,r,o.description,o.imageURL);r.addVariant(u)}e[n.referenceStyleID]=r}return e}function kS(e){if(!e)return RS[I1[0].referenceStyleID].getDefaultVariant().getId();if(typeof e=="string"||e instanceof String)return e.trim().toLowerCase();if(e instanceof AS)return e.getId();if(e instanceof OS)return e.getDefaultVariant().getId()}const RS=ere();function tre(e){const t=[];function n(o){(o.type==="LineString"||o.type==="MultiLineString")&&t.push(o)}function r(o){o.geometry&&n(o.geometry)}function i(o){for(const u of o.features)u.type==="Feature"?r(u):u.type==="FeatureCollection"&&i(u)}return e.type==="Feature"?r(e):e.type==="FeatureCollection"?i(e):n(e),t}function nre(e,t,n){let r=t[0],i=t[1],o=n[0]-r,u=n[1]-i;if(o!==0||u!==0){const l=((e[0]-r)*o+(e[1]-i)*u)/(o*o+u*u);l>1?(r=n[0],i=n[1]):l>0&&(r+=o*l,i+=u*l)}return o=e[0]-r,u=e[1]-i,o*o+u*u}function aP(e,t,n,r,i){let o=r,u;for(let l=t+1;l<n;l++){const p=nre(e[l],e[t],e[n]);p>o&&(u=l,o=p)}o>r&&(u-t>1&&aP(e,t,u,r,i),i.push(e[u]),n-u>1&&aP(e,u,n,r,i))}function rre(e,t){const n=e.length-1,r=[e[0]];return aP(e,0,n,t,r),r.push(e[n]),r}function ire(e,t){if(e.length<=2)return e;const n=t!==void 0?t*t:1;return rre(e,n)}const mj={extractLineStrings:tre,simplify:ire};function BA(e,t=!0){let n=`${e[0]},${e[1]}`;return e.length===3&&t&&(n+=`,${e[2]}`),n}function jA(e,t=3e3){let n=e.map(o=>o.join(",")).join("|"),r=5e-6;const i=1e-5;for(;n.length>t;)n=mj.simplify(e,r).map(u=>`${u[0]},${u[1]}`).join("|"),r+=i;return n}function ore(e,t,n={}){const r=kS(n.style),i=n.hiDPI?"@2x":"",o=n.format??"png";let u=~~(n.width??1024),l=~~(n.height??1024);n.hiDPI&&(u=~~(u/2),l=~~(l/2));const p=new URL(`maps/${encodeURIComponent(r)}/static/${e[0]},${e[1]},${t}/${u}x${l}${i}.${o}`,ru.maptilerApiURL);if("attribution"in n&&p.searchParams.set("attribution",n.attribution.toString()),"markers"in n){let g="";const x="markerIcon"in n;x&&(g+=`icon:${n.markerIcon}|`),x&&"markerAnchor"in n&&(g+=`anchor:${n.markerAnchor}|`),x&&n.hiDPI&&(g+="scale:2|");const y=Array.isArray(n.markers[0])?n.markers:[n.markers];g+=y.map(_=>BA(_,!x)).join("|"),p.searchParams.set("markers",g)}if("path"in n){let g="";if(g+=`fill:${n.pathFillColor??"none"}|`,"pathStrokeColor"in n&&(g+=`stroke:${n.pathStrokeColor}|`),"pathWidth"in n){const x=n.pathWidth/(n.hiDPI?2:1);g+=`width:${x.toString()}|`}g+=jA(n.path),p.searchParams.set("path",g)}return p.searchParams.set("key",n.apiKey??Vo.apiKey),p.toString()}function sre(e,t={}){const n=kS(t.style),r=t.hiDPI?"@2x":"",i=t.format??"png";let o=~~(t.width??1024),u=~~(t.height??1024);t.hiDPI&&(o=~~(o/2),u=~~(u/2));const l=new URL(`maps/${encodeURIComponent(n)}/static/${e[0]},${e[1]},${e[2]},${e[3]}/${o}x${u}${r}.${i}`,ru.maptilerApiURL);if("attribution"in t&&l.searchParams.set("attribution",t.attribution.toString()),"padding"in t&&l.searchParams.set("padding",t.padding.toString()),"markers"in t){let p="";const g="markerIcon"in t;g&&(p+=`icon:${t.markerIcon}|`),g&&"markerAnchor"in t&&(p+=`anchor:${t.markerAnchor}|`),g&&t.hiDPI&&(p+="scale:2|");const x=Array.isArray(t.markers[0])?t.markers:[t.markers];p+=x.map(y=>BA(y,!g)).join("|"),l.searchParams.set("markers",p)}if("path"in t){let p="";if(p+=`fill:${t.pathFillColor??"none"}|`,"pathStrokeColor"in t&&(p+=`stroke:${t.pathStrokeColor}|`),"pathWidth"in t){const g=t.pathWidth/(t.hiDPI?2:1);p+=`width:${g.toString()}|`}p+=jA(t.path),l.searchParams.set("path",p)}return l.searchParams.set("key",t.apiKey??Vo.apiKey),l.toString()}function are(e={}){if(!("markers"in e)&&!("path"in e))throw new Error("Automatic static maps require markers and/or path to be created.");const t=kS(e.style),n=e.hiDPI?"@2x":"",r=e.format??"png";let i=~~(e.width??1024),o=~~(e.height??1024);e.hiDPI&&(i=~~(i/2),o=~~(o/2));const u=new URL(`maps/${encodeURIComponent(t)}/static/auto/${i}x${o}${n}.${r}`,ru.maptilerApiURL);if("attribution"in e&&u.searchParams.set("attribution",e.attribution.toString()),"padding"in e&&u.searchParams.set("padding",e.padding.toString()),"markers"in e){let l="";const p="markerIcon"in e;p&&(l+=`icon:${e.markerIcon}|`),p&&"markerAnchor"in e&&(l+=`anchor:${e.markerAnchor}|`),p&&e.hiDPI&&(l+="scale:2|");const g=Array.isArray(e.markers[0])?e.markers:[e.markers];l+=g.map(x=>BA(x,!p)).join("|"),u.searchParams.set("markers",l)}if("path"in e){let l="";if(l+=`fill:${e.pathFillColor??"none"}|`,"pathStrokeColor"in e&&(l+=`stroke:${e.pathStrokeColor}|`),"pathWidth"in e){const p=e.pathWidth/(e.hiDPI?2:1);l+=`width:${p.toString()}|`}l+=jA(e.path),u.searchParams.set("path",l)}return u.searchParams.set("key",e.apiKey??Vo.apiKey),u.toString()}const lre={centered:ore,bounded:sre,automatic:are},MS=63710088e-1,gj=2*Math.PI*MS;function yj(e){return(180+e)/360}function _j(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function vj(e){const t=wj(e);return[yj(t[0]),_j(t[1])]}function xj(e){return e*360-180}function bj(e){const t=180-e*360;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}function ure(e){return[xj(e[0]),bj(e[1])]}function $A(e,t){const n=Math.PI/180,r=e[1]*n,i=t[1]*n,o=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((t[0]-e[0])*n);return MS*Math.acos(Math.min(o,1))}function cre(e){const t=Array(e.length);t[0]=0;const n=t.length;for(let r=1;r<n;r++)t[r]=$A(e[r-1],e[r])+t[r-1];return t}function wj(e){const t=e[0],n=e[1],r=360,i=((t+180)%r+r)%r-180;return[i===-180?180:i,n]}function Ej(e){return gj*Math.cos(e*Math.PI/180)}function Sj(e,t,n=!0){const r=2**t,i=[e[0]*r,e[1]*r];return n?[~~i[0],~~i[1]]:i}function hre(e,t,n=!0){const r=vj(e);return Sj(r,t,n)}function P0(e){return e*Math.PI/180}function lP(e){return e*180/Math.PI}function fre(e,t,n){const r=$A(e,t),i=P0(e[0]),o=P0(e[1]),u=P0(t[0]),l=P0(t[1]),p=r/MS,g=Math.sin((1-n)*p)/Math.sin(p),x=Math.sin(n*p)/Math.sin(p),y=g*Math.cos(o)*Math.cos(i)+x*Math.cos(l)*Math.cos(u),_=g*Math.cos(o)*Math.sin(i)+x*Math.cos(l)*Math.sin(u),T=g*Math.sin(o)+x*Math.sin(l),P=Math.atan2(T,Math.sqrt(y*y+_*_)),A=Math.atan2(_,y);return[lP(A),lP(P)]}const UA={EARTH_RADIUS:MS,EARTH_CIRCUMFERENCE:gj,longitudeToMercatorX:yj,latitudeToMercatorY:_j,wgs84ToMercator:vj,mercatorXToLongitude:xj,mercatorYToLatitude:bj,mercatorToWgs84:ure,haversineDistanceWgs84:$A,wrapWgs84:wj,circumferenceAtLatitude:Ej,mercatorToTileIndex:Sj,wgs84ToTileIndex:hre,toRadians:P0,toDegrees:lP,haversineIntermediateWgs84:fre,haversineCumulatedDistanceWgs84:cre};let H2=null;function VA(){return H2||(H2=new Fne({maxSize:Vo.tileCacheSize})),H2}async function Tj(e){const t=new Blob([e]),n=await createImageBitmap(t),r=document.createElement("canvas"),i=r.getContext("2d");r.width=n.width,r.height=n.height,i.drawImage(n,0,0);const o=i.getImageData(0,0,r.width,r.height);return{pixels:o.data,width:r.width,height:r.height,components:o.data.length/(r.width*r.height)}}function qA(){if(Vo.bufferToPixelData)return Vo.bufferToPixelData;if(typeof window<"u")return Tj;throw new Error("An image file buffer to pixel data parser is necessary. Specify it in `config.bufferToPixelData`")}const dre="tiles/terrain-rgb-v2/tiles.json";let Jf=null;const GA={403:"Key is missing, invalid or restricted"};async function Cj(e){const t=new URL(dre,ru.maptilerApiURL);t.searchParams.set("key",e);const n=t.toString(),r=await Jc(n);if(r.ok)return Jf=await r.json(),Jf;if(!r.ok)throw new Qu(r,GA[r.status]??"")}async function pre(e,t={}){const n=t.apiKey??Vo.apiKey;Jf||await Cj(n);const r=Jf.maxzoom;let i=~~(t.zoom??r);(i>r||i<0)&&(i=r);const o=UA.wgs84ToTileIndex(e,i,!1),u=~~o[0],l=~~o[1];if(!Jf.tiles.length)throw new Error("Terrain tileJSON tile list is empty.");const p=`terrain_${i.toString()}_${u.toString()}_${l.toString()}`;let g;const x=VA();if(x.has(p))g=x.get(p);else{const R=Jf.tiles[0].replace("{x}",u.toString()).replace("{y}",l.toString()).replace("{z}",i.toString()),z=await Jc(R);if(!z.ok)throw new Qu(z,GA[z.status]??"");const D=await z.arrayBuffer();g=await qA()(D),x.set(p,g)}const y=~~(g.width*(o[0]%1)),T=(~~(g.height*(o[1]%1))*g.width+y)*g.components,P=g.pixels[T],A=g.pixels[T+1],M=g.pixels[T+2],k=-1e4+(P*256*256+A*256+M)*.1;return[e[0],e[1],k]}async function HA(e,t={}){const n=t.apiKey??Vo.apiKey;Jf||await Cj(n);const r=qA(),i=Jf.tiles[0],o=VA(),u=Jf.maxzoom;let l=~~(t.zoom??u);(l>u||l<0)&&(l=u);const p=e.map(D=>UA.wgs84ToTileIndex(D,l,!1)),x=p.map(D=>[~~D[0],~~D[1]]).map(D=>`terrain_${l.toString()}_${D[0].toString()}_${D[1].toString()}`),y=Array.from(new Set(x.filter(D=>!o.has(D)))).map(D=>D.split("_").slice(1)),T=y.map(D=>i.replace("{x}",D[1].toString()).replace("{y}",D[2].toString()).replace("{z}",D[0].toString())).map(D=>Jc(D)),A=(await Promise.allSettled(T)).map(D=>D.status==="fulfilled"?D.value:null).filter(D=>D),M=A.filter(D=>!D.ok);if(A.length!==T.length)throw new Error("Some tiles could not be fetched.");if(M.length)throw new Qu(M[0],GA[M[0].status]??"");const k=await Promise.all(A.map(D=>D.arrayBuffer()));if(!k.every(D=>D.byteLength>0))throw new Error("Some tiles are not available.");(await Promise.all(k.map(D=>r(D)))).forEach((D,U)=>{const V=y[U],G=`terrain_${V[0].toString()}_${V[1].toString()}_${V[2].toString()}`;o.set(G,D)});const z=e.map((D,U)=>{const V=x[U],G=p[U],H=o.get(V),J=Math.min(Math.round(H.width*(G[0]%1)),H.width-1),X=(Math.min(Math.round(H.height*(G[1]%1)),H.height-1)*H.width+J)*H.components,ee=H.pixels[X],ce=H.pixels[X+1],oe=H.pixels[X+2],we=-1e4+(ee*256*256+ce*256+oe)*.1;return[D[0],D[1],~~(we*1e3)/1e3]});if(t.smoothingKernelSize){const D=~~(t.smoothingKernelSize/2)*2+1,U=z.map(G=>G[2]),V=~~(D/2);for(let G=V;G<U.length-V-1;G+=1){let H=0;for(let J=0;J<D;J+=1){const Y=U[G-V+J];H+=Y}H/=D,z[G][2]=H}}return z}async function mre(e,t={}){if(e.type!=="LineString")throw new Error("The provided object is not a GeoJSON LineString");const n=structuredClone(e),r=await HA(n.coordinates,t);return n.coordinates=r,n}async function gre(e,t={}){if(e.type!=="MultiLineString")throw new Error("The provided object is not a GeoJSON MultiLineString");const n=structuredClone(e),r=n.coordinates.map(p=>p.length),i=n.coordinates.flat(),o=await HA(i,t),u=[];let l=0;for(const p of r)u.push(o.slice(l,l+p)),l+=p;return n.coordinates=u,n}const yre={at:pre,batch:HA,fromLineString:mre,fromMultiLineString:gre};let kb;const _re=new Uint8Array(16);function vre(){if(!kb&&(kb=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!kb))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kb(_re)}const Ls=[];for(let e=0;e<256;++e)Ls.push((e+256).toString(16).slice(1));function xre(e,t=0){return Ls[e[t+0]]+Ls[e[t+1]]+Ls[e[t+2]]+Ls[e[t+3]]+"-"+Ls[e[t+4]]+Ls[e[t+5]]+"-"+Ls[e[t+6]]+Ls[e[t+7]]+"-"+Ls[e[t+8]]+Ls[e[t+9]]+"-"+Ls[e[t+10]]+Ls[e[t+11]]+Ls[e[t+12]]+Ls[e[t+13]]+Ls[e[t+14]]+Ls[e[t+15]]}const bre=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ED={randomUUID:bre};function wre(e,t,n){if(ED.randomUUID&&!t&&!e)return ED.randomUUID();e=e||{};const r=e.random||(e.rng||vre)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return xre(r)}var Ere="@maptiler/sdk",Sre="2.0.3",Tre="The Javascript & TypeScript map SDK tailored for MapTiler Cloud",Cre="dist/maptiler-sdk.mjs",Ire="dist/maptiler-sdk.d.ts",Pre="dist/maptiler-sdk.css",Lre="module",Are={".":{import:"./dist/maptiler-sdk.mjs",types:"./dist/maptiler-sdk.d.ts"},"./dist/maptiler-sdk.css":{import:"./dist/maptiler-sdk.css"},"./style.css":{import:"./dist/maptiler-sdk.css"}},Ore=["maptiler","map","sdk","webmap","cloud","webGL","maplibre"],kre="https://docs.maptiler.com/sdk-js/",Rre="BSD-3-Clause",Mre={type:"git",url:"https://github.com/maptiler/maptiler-sdk-js.git"},Nre={build:"rm -rf dist/* && NODE_ENV=production rollup -c",dev:"rm -rf dist/* && NODE_ENV=development rollup -c -w","format:fix":'prettier --write "src/**/*.{js,ts,tsx}"',format:'prettier -c "src/**/*.{js,ts,tsx}"',"lint:fix":'eslint --fix "src/**/*.{js,ts}"',lint:'eslint "src/**/*.{js,ts}"',doc:"rm -rf docs/* && typedoc --out docs && cp -r images docs/",prepare:"npm run format:fix && npm run lint:fix && npm run build && npm run test","test:dev":"vitest dev",test:"vitest run"},Dre="MapTiler",zre={"@rollup/plugin-commonjs":"^24.1.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@types/uuid":"^9.0.2","@types/xmldom":"^0.1.31","@typescript-eslint/eslint-plugin":"^6.9.0","@typescript-eslint/parser":"^6.9.0",eslint:"^8.52.0","eslint-config-prettier":"^9.0.0","eslint-plugin-prettier":"^5.0.1",prettier:"^3.0.3",rollup:"^3.20.6","rollup-plugin-copy-merge":"^1.0.0","rollup-plugin-dts":"^5.3.0","rollup-plugin-esbuild":"^5.0.0","rollup-plugin-node-globals":"^1.4.0","rollup-plugin-shell":"^1.0.9","rollup-plugin-string":"^3.0.0","rollup-plugin-swc":"^0.2.1",serve:"^14.2.0",terser:"^5.17.1",typedoc:"^0.24.8",typescript:"^5.1.6",vitest:"^0.34.2",xmldom:"^0.6.0"},Fre={"@maptiler/client":"^1.8.1",events:"^3.3.0","js-base64":"^3.7.4","maplibre-gl":"^4.1.3",uuid:"^9.0.0"},Bre={name:Ere,version:Sre,description:Tre,module:Cre,types:Ire,style:Pre,type:Lre,exports:Are,keywords:Ore,homepage:kre,license:Rre,repository:Mre,scripts:Nre,author:Dre,devDependencies:zre,dependencies:Fre};const Ir={VISITOR:"visitor",VISITOR_ENGLISH:"visitor_en",STYLE:"style",AUTO:"auto",STYLE_LOCK:"style_lock",LATIN:"name:latin",NON_LATIN:"name:nonlatin",LOCAL:"name",INTERNATIONAL:"name_int",ALBANIAN:"name:sq",AMHARIC:"name:am",ARABIC:"name:ar",ARMENIAN:"name:hy",AZERBAIJANI:"name:az",BASQUE:"name:eu",BELORUSSIAN:"name:be",BENGALI:"name:bn",BOSNIAN:"name:bs",BRETON:"name:br",BULGARIAN:"name:bg",CATALAN:"name:ca",CHINESE:"name:zh",TRADITIONAL_CHINESE:"name:zh-Hant",SIMPLIFIED_CHINESE:"name:zh-Hans",CORSICAN:"name:co",CROATIAN:"name:hr",CZECH:"name:cs",DANISH:"name:da",DUTCH:"name:nl",ENGLISH:"name:en",ESPERANTO:"name:eo",ESTONIAN:"name:et",FINNISH:"name:fi",FRENCH:"name:fr",FRISIAN:"name:fy",GEORGIAN:"name:ka",GERMAN:"name:de",GREEK:"name:el",HEBREW:"name:he",HINDI:"name:hi",HUNGARIAN:"name:hu",ICELANDIC:"name:is",INDONESIAN:"name:id",IRISH:"name:ga",ITALIAN:"name:it",JAPANESE:"name:ja",JAPANESE_HIRAGANA:"name:ja-Hira",JAPANESE_KANA:"name:ja_kana",JAPANESE_LATIN:"name:ja_rm",JAPANESE_2018:"name:ja-Latn",KANNADA:"name:kn",KAZAKH:"name:kk",KOREAN:"name:ko",KOREAN_LATIN:"name:ko-Latn",KURDISH:"name:ku",ROMAN_LATIN:"name:la",LATVIAN:"name:lv",LITHUANIAN:"name:lt",LUXEMBOURGISH:"name:lb",MACEDONIAN:"name:mk",MALAYALAM:"name:ml",MALTESE:"name:mt",NORWEGIAN:"name:no",OCCITAN:"name:oc",PERSIAN:"name:fa",POLISH:"name:pl",PORTUGUESE:"name:pt",PUNJABI:"name:pa",WESTERN_PUNJABI:"name:pnb",ROMANIAN:"name:ro",ROMANSH:"name:rm",RUSSIAN:"name:ru",SCOTTISH_GAELIC:"name:gd",SERBIAN_CYRILLIC:"name:sr",SERBIAN_LATIN:"name:sr-Latn",SLOVAK:"name:sk",SLOVENE:"name:sl",SPANISH:"name:es",SWEDISH:"name:sv",TAMIL:"name:ta",TELUGU:"name:te",THAI:"name:th",TURKISH:"name:tr",UKRAINIAN:"name:uk",URDU:"name:ur",VIETNAMIAN_LATIN:"name:vi",WELSH:"name:cy"},jre=new Set(Object.values(Ir));function uP(e){return jre.has(e)}const $re=new Set(Object.values(Ir));function cP(){if(typeof navigator>"u")return`name:${Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0]}`;const e=Array.from(new Set(navigator.languages.map(t=>`name:${t.split("-")[0]}`))).filter(t=>$re.has(t));return e.length?e[0]:Ir.LOCAL}const el={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:Ir.STYLE,secondaryLanguage:Ir.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(el);var Ure=Object.defineProperty,Vre=(e,t,n)=>t in e?Ure(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sy=(e,t,n)=>(Vre(e,typeof t!="symbol"?t+"":t,n),n);const Ij=wre();class Pj extends zne{constructor(){super(),Sy(this,"primaryLanguage",el.primaryLanguage),Sy(this,"secondaryLanguage"),Sy(this,"session",!0),Sy(this,"caching",!0),Sy(this,"_unit","metric"),Sy(this,"_apiKey","")}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,Vo.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){Vo.fetch=t}get fetch(){return Vo.fetch}}const ns=new Pj;class Lj extends xn.LogoControl{onAdd(t){return super.onAdd(t)}}var qre=Object.defineProperty,Gre=(e,t,n)=>t in e?qre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SD=(e,t,n)=>(Gre(e,typeof t!="symbol"?t+"":t,n),n);class hP extends Lj{constructor(t={}){var n,r;super(t),SD(this,"logoURL",""),SD(this,"linkURL",""),this.logoURL=(n=t.logoURL)!=null?n:el.maptilerLogoURL,this.linkURL=(r=t.linkURL)!=null?r:el.maptilerURL}onAdd(t){var n;this._map=t,this._compact=(n=this.options.compact)!=null?n:!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const r=window.document.createElement("a");return r.style.backgroundRepeat="no-repeat",r.style.cursor="pointer",r.style.display="block",r.style.height="23px",r.style.margin="0 0 -4px -4px",r.style.overflow="hidden",r.style.width="88px",r.style.backgroundImage=`url(${this.logoURL})`,r.style.backgroundSize="100px 30px",r.style.width="100px",r.style.height="30px",r.target="_blank",r.rel="noopener",r.href=this.linkURL,r.setAttribute("aria-label","MapTiler logo"),r.setAttribute("rel","noopener"),this._container.appendChild(r),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}var H0=(e,t,n)=>new Promise((r,i)=>{var o=p=>{try{l(n.next(p))}catch(g){i(g)}},u=p=>{try{l(n.throw(p))}catch(g){i(g)}},l=p=>p.done?r(p.value):Promise.resolve(p.value).then(o,u);l((n=n.apply(e,t)).next())});const fP="localcache_source",dP="localcache",Hre="maptiler_sdk",Zre=1e3,Wre=100;function Kre(e,t){if(ns.caching&&ns.session&&e.host===el.maptilerApiHost){if(t=="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${fP}://`);if(t=="Tile"||t=="Glyphs")return e.href.replace("https://",`${dP}://`)}return e.href}let Z2;function Aj(){return H0(this,null,function*(){return Z2||(Z2=yield caches.open(Hre)),Z2})}let TD=0;function Xre(){return H0(this,null,function*(){const e=yield Aj(),t=yield e.keys(),n=t.slice(0,Math.max(t.length-Zre,0));for(const r of n)e.delete(r)})}function Yre(){bP(fP,(e,t)=>H0(this,null,function*(){if(!e.url)throw new Error("");e.url=e.url.replace(`${fP}://`,"https://");const n=e;n.signal=t.signal;const r=yield fetch(e.url,n),i=yield r.json();return i.tiles&&i.tiles.length>0&&(i.tiles[0]+="&last-modified="+r.headers.get("Last-Modified")),{data:i,cacheControl:r.headers.get("Cache-Control"),expires:r.headers.get("Expires")}})),bP(dP,(e,t)=>H0(this,null,function*(){if(!e.url)throw new Error("");e.url=e.url.replace(`${dP}://`,"https://");const n=new URL(e.url),r=new URL(n);r.searchParams.delete("mtsid"),r.searchParams.delete("key");const i=r.toString(),o=new URL(n);o.searchParams.delete("last-modified");const u=o.toString(),l=x=>H0(this,null,function*(){return{data:yield x.arrayBuffer(),cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}}),p=yield Aj(),g=yield p.match(i);if(g)return l(g);{const x=e;x.signal=t.signal;const y=yield fetch(u,x);return y.status>=200&&y.status<300&&(p.put(i,y.clone()).catch(()=>{}),++TD>Wre&&(Xre(),TD=0)),l(y)}}))}var Jre=Object.defineProperty,CD=Object.getOwnPropertySymbols,Qre=Object.prototype.hasOwnProperty,eie=Object.prototype.propertyIsEnumerable,ID=(e,t,n)=>t in e?Jre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,PD=(e,t)=>{for(var n in t||(t={}))Qre.call(t,n)&&ID(e,n,t[n]);if(CD)for(var n of CD(t))eie.call(t,n)&&ID(e,n,t[n]);return e};function tie(){xn.getRTLTextPluginStatus()==="unavailable"&&xn.setRTLTextPlugin(el.rtlPluginURL,e=>{e&&console.error(e)},!0)}function nie(e,t){e.forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}function wp(e,t,n){const r=window.document.createElement(e);return t!==void 0&&(r.className=t),n&&n.appendChild(r),r}function Oj(e){e.parentNode&&e.parentNode.removeChild(e)}function LD(e,t){let n=null;try{n=new URL(e)}catch{return{url:e}}return n.host===el.maptilerApiHost&&(n.searchParams.has("key")||n.searchParams.append("key",ns.apiKey),ns.session&&n.searchParams.append("mtsid",Ij)),{url:Kre(n,t)}}function AD(e){return function(t,n){var r;if(e!==void 0){const i=e(t,n),o=LD((r=i==null?void 0:i.url)!=null?r:"",n);return PD(PD({},i),o)}else return LD(t,n)}}function kj(){return Math.random().toString(36).substring(2)}function NS(e){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e)}function rie(e){try{return JSON.parse(e)}catch{}return null}function OD(e){return e?typeof e=="string"||e instanceof String?!e.startsWith("http")&&e.toLowerCase().includes(".json")?e:FA(e):e instanceof AS?e.getExpandedStyleURL():e instanceof OS?e.getDefaultVariant().getExpandedStyleURL():e:RS[I1[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL()}var iie=Object.defineProperty,oie=(e,t,n)=>t in e?iie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W2=(e,t,n)=>(oie(e,typeof t!="symbol"?t+"":t,n),n);class Rj{constructor(){W2(this,"_map"),W2(this,"_container"),W2(this,"_terrainButton"),nie(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=wp("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=wp("button","maplibregl-ctrl-terrain",this._container),wp("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Oj(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class Mj extends xn.NavigationControl{onAdd(t){return super.onAdd(t)}}var sie=Object.defineProperty,aie=(e,t,n)=>t in e?sie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lie=(e,t,n)=>(aie(e,typeof t!="symbol"?t+"":t,n),n);class Nj extends Mj{constructor(){super({showCompass:!0,showZoom:!0,visualizePitch:!0}),lie(this,"_rotateCompassArrow",()=>{const t=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5))}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}),this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",t=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})}_createButton(t,n){const r=super._createButton(t,n);return r.clickFunction=n,r}}class Dj extends xn.GeolocateControl{onAdd(t){return super.onAdd(t)}}var uie=Object.defineProperty,cie=Object.defineProperties,hie=Object.getOwnPropertyDescriptors,kD=Object.getOwnPropertySymbols,fie=Object.prototype.hasOwnProperty,die=Object.prototype.propertyIsEnumerable,pP=(e,t,n)=>t in e?uie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pie=(e,t)=>{for(var n in t||(t={}))fie.call(t,n)&&pP(e,n,t[n]);if(kD)for(var n of kD(t))die.call(t,n)&&pP(e,n,t[n]);return e},mie=(e,t)=>cie(e,hie(t)),Rb=(e,t,n)=>(pP(e,typeof t!="symbol"?t+"":t,n),n);const RD=xn.Marker,MD=xn.LngLat,gie=xn.LngLatBounds;class zj extends Dj{constructor(){super(...arguments),Rb(this,"lastUpdatedCenter",new MD(0,0)),Rb(this,"_updateCamera",t=>{var n,r,i;const o=new MD(t.coords.longitude,t.coords.latitude),u=t.coords.accuracy,l=this._map.getBearing(),p=mie(pie({bearing:l},this.options.fitBoundsOptions),{linear:!0}),g=this._map.getZoom();g>((i=(r=(n=this.options)==null?void 0:n.fitBoundsOptions)==null?void 0:r.maxZoom)!=null?i:30)&&(p.zoom=g),this._map.fitBounds(gie.fromLngLat(o,u),p,{geolocateSource:!0});let x=!1;const y=()=>{x=!0};this._map.once("click",y),this._map.once("dblclick",y),this._map.once("dragstart",y),this._map.once("mousedown",y),this._map.once("touchstart",y),this._map.once("wheel",y),this._map.once("moveend",()=>{this._map.off("click",y),this._map.off("dblclick",y),this._map.off("dragstart",y),this._map.off("mousedown",y),this._map.off("touchstart",y),this._map.off("wheel",y),!x&&(this.lastUpdatedCenter=this._map.getCenter())})}),Rb(this,"_setupUI",t=>{if(this.lastUpdatedCenter=this._map.getCenter(),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=wp("button","maplibregl-ctrl-geolocate",this._container),wp("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",t===!1){const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=wp("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new RD({element:this._dotElement}),this._circleElement=wp("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new RD({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",n=>{const r=n.originalEvent&&n.originalEvent.type==="resize",i=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!n.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!r&&i>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}),Rb(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],n=this._map.project(t),r=this._map.unproject([n.x,n.y]),i=this._map.unproject([n.x+20,n.y]),o=r.distanceTo(i)/20,u=Math.ceil(2*this._accuracy/o);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}}class Fj extends xn.ScaleControl{onAdd(t){return super.onAdd(t)}}class Bj extends xn.FullscreenControl{onAdd(t){return super.onAdd(t)}}var yie=Object.defineProperty,_ie=Object.defineProperties,vie=Object.getOwnPropertyDescriptors,ND=Object.getOwnPropertySymbols,xie=Object.prototype.hasOwnProperty,bie=Object.prototype.propertyIsEnumerable,mP=(e,t,n)=>t in e?yie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n_=(e,t)=>{for(var n in t||(t={}))xie.call(t,n)&&mP(e,n,t[n]);if(ND)for(var n of ND(t))bie.call(t,n)&&mP(e,n,t[n]);return e},DD=(e,t)=>_ie(e,vie(t)),wie=(e,t,n)=>(mP(e,typeof t!="symbol"?t+"":t,n),n),ZA=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},xr=(e,t,n)=>(ZA(e,t,"read from private field"),n?n.call(e):t.get(e)),Lh=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Iy=(e,t,n,r)=>(ZA(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Pl=(e,t,n)=>(ZA(e,t,"access private method"),n),Ll,Gh,Vm,jj,hg,xu,yw,gP,$j,Al,Eu,yP,Uj;class K2{constructor(t,n){Lh(this,gP),Lh(this,Al),Lh(this,yP),Lh(this,Ll,void 0),wie(this,"map"),Lh(this,Gh,void 0),Lh(this,Vm,void 0),Lh(this,jj,void 0),Lh(this,hg,void 0),Lh(this,xu,!1),Lh(this,yw,void 0);var r;t.style!==void 0&&Iy(this,xu,!0),Iy(this,Ll,DD(n_(DD(n_({zoomAdjust:-4,position:"top-right"},n),{forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1}),t),{containerStyle:n_({border:"1px solid #000",width:"400px",height:"300px"},(r=t.containerStyle)!=null?r:{})})),t.lockZoom!==void 0&&(xr(this,Ll).minZoom=t.lockZoom,xr(this,Ll).maxZoom=t.lockZoom)}setStyle(t,n){xr(this,xu)||this.map.setStyle(t,n),Pl(this,Al,Eu).call(this)}addLayer(t,n){return xr(this,xu)||this.map.addLayer(t,n),Pl(this,Al,Eu).call(this),this.map}moveLayer(t,n){return xr(this,xu)||this.map.moveLayer(t,n),Pl(this,Al,Eu).call(this),this.map}removeLayer(t){return xr(this,xu)||this.map.removeLayer(t),Pl(this,Al,Eu).call(this),this}setLayerZoomRange(t,n,r){return xr(this,xu)||this.map.setLayerZoomRange(t,n,r),Pl(this,Al,Eu).call(this),this}setFilter(t,n,r){return xr(this,xu)||this.map.setFilter(t,n,r),Pl(this,Al,Eu).call(this),this}setPaintProperty(t,n,r,i){return xr(this,xu)||this.map.setPaintProperty(t,n,r,i),Pl(this,Al,Eu).call(this),this}setLayoutProperty(t,n,r,i){return xr(this,xu)||this.map.setLayoutProperty(t,n,r,i),Pl(this,Al,Eu).call(this),this}setGlyphs(t,n){return xr(this,xu)||this.map.setGlyphs(t,n),Pl(this,Al,Eu).call(this),this}onAdd(t){Iy(this,Gh,t),Iy(this,Vm,wp("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[n,r]of Object.entries(xr(this,Ll).containerStyle))xr(this,Vm).style.setProperty(n,r);return xr(this,Ll).container=xr(this,Vm),xr(this,Ll).zoom=t.getZoom()+xr(this,Ll).zoomAdjust,this.map=new WA(xr(this,Ll)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{Pl(this,gP,$j).call(this,xr(this,Ll).parentRect),Iy(this,yw,Pl(this,yP,Uj).call(this))}),xr(this,Vm)}onRemove(){var t;(t=xr(this,yw))==null||t.call(this),Oj(xr(this,Vm))}}Ll=new WeakMap;Gh=new WeakMap;Vm=new WeakMap;jj=new WeakMap;hg=new WeakMap;xu=new WeakMap;yw=new WeakMap;gP=new WeakSet;$j=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(Iy(this,hg,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:xr(this,hg)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:n_({},e.lineLayout),paint:n_({"line-color":"#FFF","line-width":1,"line-opacity":.85},e.linePaint)}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:n_({"fill-color":"#08F","fill-opacity":.135},e.fillPaint)}),Pl(this,Al,Eu).call(this))};Al=new WeakSet;Eu=function(){if(xr(this,hg)===void 0)return;const{devicePixelRatio:e}=window,t=xr(this,Gh).getCanvas(),n=t.width/e,r=t.height/e,i=xr(this,Gh).unproject.bind(xr(this,Gh)),o=i([0,0]),u=i([n,0]),l=i([0,r]),p=i([n,r]);xr(this,hg).geometry.coordinates=[[l.toArray(),p.toArray(),u.toArray(),o.toArray(),l.toArray()]],this.map.getSource("parentRect").setData(xr(this,hg))};yP=new WeakSet;Uj=function(){const{pitchAdjust:e}=xr(this,Ll),t=()=>{o("parent")},n=()=>{o("minimap")},r=()=>{xr(this,Gh).on("move",t),this.map.on("move",n)},i=()=>{xr(this,Gh).off("move",t),this.map.off("move",n)},o=u=>{var l;i();const p=u==="parent"?xr(this,Gh):this.map,g=u==="parent"?this.map:xr(this,Gh),x=p.getCenter(),y=p.getZoom()+((l=xr(this,Ll).zoomAdjust)!=null?l:-4)*(u==="parent"?1:-1),_=p.getBearing(),T=p.getPitch();g.jumpTo({center:x,zoom:y,bearing:_,pitch:e?T:0}),Pl(this,Al,Eu).call(this),r()};return r(),()=>{i()}};var Eie=Object.defineProperty,Sie=Object.defineProperties,Tie=Object.getOwnPropertyDescriptors,zD=Object.getOwnPropertySymbols,Cie=Object.prototype.hasOwnProperty,Iie=Object.prototype.propertyIsEnumerable,_P=(e,t,n)=>t in e?Eie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X2=(e,t)=>{for(var n in t||(t={}))Cie.call(t,n)&&_P(e,n,t[n]);if(zD)for(var n of zD(t))Iie.call(t,n)&&_P(e,n,t[n]);return e},Pie=(e,t)=>Sie(e,Tie(t)),Vf=(e,t,n)=>(_P(e,typeof t!="symbol"?t+"":t,n),n),qf=(e,t,n)=>new Promise((r,i)=>{var o=p=>{try{l(n.next(p))}catch(g){i(g)}},u=p=>{try{l(n.throw(p))}catch(g){i(g)}},l=p=>p.done?r(p.value):Promise.resolve(p.value).then(o,u);l((n=n.apply(e,t)).next())});const Vj={POINT:"POINT",COUNTRY:"COUNTRY"};let WA=class extends xn.Map{constructor(t){var n,r,i;t.apiKey&&(ns.apiKey=t.apiKey);const o=OD(t.style),u=location.hash;ns.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");let l={compact:!1};t.customAttribution?l.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(l=X2(X2({},l),t.attributionControl)),super(Pie(X2({},t),{style:o,maplibreLogo:!1,transformRequest:AD(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:l})),Vf(this,"isTerrainEnabled",!1),Vf(this,"terrainExaggeration",1),Vf(this,"primaryLanguage"),Vf(this,"terrainGrowing",!1),Vf(this,"terrainFlattening",!1),Vf(this,"minimap"),Vf(this,"forceLanguageUpdate"),Vf(this,"languageAlwaysBeenStyle"),Vf(this,"isReady",!1),ns.caching&&Yre(),this.primaryLanguage=(n=t.language)!=null?n:ns.primaryLanguage,this.forceLanguageUpdate=!(this.primaryLanguage===Ir.STYLE||this.primaryLanguage===Ir.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===Ir.STYLE,this.terrainExaggeration=(r=t.terrainExaggeration)!=null?r:this.terrainExaggeration,this.once("styledata",()=>qf(this,null,function*(){if(!t.geolocate||t.center||t.hash&&u)return;try{if(t.geolocate===Vj.COUNTRY){yield this.fitToIpBounds();return}}catch(P){console.warn(P.message)}let _;try{yield this.centerOnIpPoint(t.zoom),_=this.getCameraHash()}catch(P){console.warn(P.message)}(yield navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(P=>{_===this.getCameraHash()&&(this.terrain?this.easeTo({center:[P.coords.longitude,P.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[P.coords.longitude,P.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})})),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",()=>qf(this,null,function*(){tie()})),this.once("load",()=>qf(this,null,function*(){let _={logo:null};try{const T=Object.keys(this.style.sourceCaches).map(M=>this.getSource(M)).filter(M=>M&&"url"in M&&typeof M.url=="string"&&(M==null?void 0:M.url.includes("tiles.json"))),P=new URL(T[0].url);P.searchParams.has("key")||P.searchParams.append("key",ns.apiKey),_=yield(yield fetch(P.href)).json()}catch{}if(t.forceNoAttributionControl!==!0)if("logo"in _&&_.logo){const T=_.logo;this.addControl(new hP({logoURL:T}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new hP,t.logoPosition);if(t.scaleControl){const T=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,P=new Fj({unit:ns.unit});this.addControl(P,T),ns.on("unit",A=>{P.setUnit(A)})}if(t.navigationControl!==!1){const T=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new Nj,T)}if(t.geolocateControl!==!1){const T=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new zj({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),T)}if(t.terrainControl){const T=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new Rj,T)}if(t.fullscreenControl){const T=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new Bj({}),T)}this.isReady=!0,this.fire("ready",{target:this})}));let p=!1,g=!1,x;this.once("ready",()=>{p=!0,g&&this.fire("loadWithTerrain",x)}),this.once("style.load",()=>{var _;const{minimap:T}=t;if(typeof T=="object"){const{zoom:P,center:A,style:M,language:k,apiKey:R,maptilerLogo:z,antialias:D,refreshExpiredTiles:U,maxBounds:V,scrollZoom:G,minZoom:H,maxZoom:J,boxZoom:Y,locale:X,fadeDuration:ee,crossSourceCollisions:ce,clickTolerance:oe,bounds:we,fitBoundsOptions:Ne,pixelRatio:Be,validateStyle:De}=t;this.minimap=new K2(T,{zoom:P,center:A,style:M,language:k,apiKey:R,container:"null",maptilerLogo:z,antialias:D,refreshExpiredTiles:U,maxBounds:V,scrollZoom:G,minZoom:H,maxZoom:J,boxZoom:Y,locale:X,fadeDuration:ee,crossSourceCollisions:ce,clickTolerance:oe,bounds:we,fitBoundsOptions:Ne,pixelRatio:Be,validateStyle:De}),this.addControl(this.minimap,(_=T.position)!=null?_:"bottom-left")}else T===!0?(this.minimap=new K2({},t),this.addControl(this.minimap,"bottom-left")):T!==void 0&&T!==!1&&(this.minimap=new K2({},t),this.addControl(this.minimap,T))});const y=_=>{_.terrain&&(g=!0,x={type:"loadWithTerrain",target:this,terrain:_.terrain},this.off("terrain",y),p&&this.fire("loadWithTerrain",x))};this.on("terrain",y),t.terrain&&this.enableTerrain((i=t.terrainExaggeration)!=null?i:this.terrainExaggeration)}onLoadAsync(){return qf(this,null,function*(){return new Promise(t=>{if(this.loaded())return t(this);this.once("load",()=>{t(this)})})})}onReadyAsync(){return qf(this,null,function*(){return new Promise(t=>{if(this.isReady)return t(this);this.once("ready",()=>{t(this)})})})}onLoadWithTerrainAsync(){return qf(this,null,function*(){return new Promise(t=>{if(this.isReady&&this.terrain)return t(this);this.once("loadWithTerrain",()=>{t(this)})})})}setStyle(t,n){var r;return(r=this.minimap)==null||r.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1}),super.setStyle(OD(t),n)}addLayer(t,n){var r;return(r=this.minimap)==null||r.addLayer(t,n),super.addLayer(t,n)}moveLayer(t,n){var r;return(r=this.minimap)==null||r.moveLayer(t,n),super.moveLayer(t,n)}removeLayer(t){var n;return(n=this.minimap)==null||n.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,n,r){var i;return(i=this.minimap)==null||i.setLayerZoomRange(t,n,r),super.setLayerZoomRange(t,n,r)}setFilter(t,n,r){var i;return(i=this.minimap)==null||i.setFilter(t,n,r),super.setFilter(t,n,r)}setPaintProperty(t,n,r,i){var o;return(o=this.minimap)==null||o.setPaintProperty(t,n,r,i),super.setPaintProperty(t,n,r,i)}setLayoutProperty(t,n,r,i){var o;return(o=this.minimap)==null||o.setLayoutProperty(t,n,r,i),super.setLayoutProperty(t,n,r,i)}setGlyphs(t,n){var r;return(r=this.minimap)==null||r.setGlyphs(t,n),super.setGlyphs(t,n)}getStyleLanguage(){return!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?this.style.stylesheet.metadata["maptiler:language"]:null}setLanguage(t){var n,r;(r=(n=this.minimap)==null?void 0:n.map)==null||r.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const n=this.getStyleLanguage();if(!(t===Ir.STYLE&&(n===Ir.AUTO||n===Ir.VISITOR))&&(t!==Ir.STYLE&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===t&&!this.forceLanguageUpdate))return;if(!uP(t)){console.warn(`The language "${t}" is not supported.`);return}if(this.primaryLanguage===Ir.STYLE_LOCK){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=t;let r=t;if(t===Ir.STYLE){if(!n){console.warn("The style has no default languages.");return}if(!uP(n)){console.warn("The language defined in the style is not valid.");return}r=n}let i=Ir.LOCAL,o=`{${i}}`;r==Ir.VISITOR?(i=cP(),o=["case",["all",["has",i],["has",Ir.LOCAL]],["case",["==",["get",i],["get",Ir.LOCAL]],["get",Ir.LOCAL],["format",["get",i],{"font-scale":.8},`
`,["get",Ir.LOCAL],{"font-scale":1.1}]],["get",Ir.LOCAL]]):r==Ir.VISITOR_ENGLISH?(i=Ir.ENGLISH,o=["case",["all",["has",i],["has",Ir.LOCAL]],["case",["==",["get",i],["get",Ir.LOCAL]],["get",Ir.LOCAL],["format",["get",i],{"font-scale":.8},`
`,["get",Ir.LOCAL],{"font-scale":1.1}]],["get",Ir.LOCAL]]):r===Ir.AUTO?(i=cP(),o=["case",["has",i],["get",i],["get",Ir.LOCAL]]):r===Ir.LOCAL?(i=Ir.LOCAL,o=`{${i}}`):(i=r,o=["case",["has",i],["get",i],["get",Ir.LOCAL]]);const{layers:u}=this.getStyle();for(const l of u){if(l.type!=="symbol")continue;const p=l,g=this.getSource(p.source);if(!g||!("url"in g&&typeof g.url=="string")||new URL(g.url).host!==el.maptilerApiHost)continue;const{id:y,layout:_}=p;if(!_||!("text-field"in _))continue;const T=this.getLayoutProperty(y,"text-field");typeof T=="string"&&(T.toLowerCase().includes("ref")||T.toLowerCase().includes("housenumber"))||this.setLayoutProperty(y,"text-field",o)}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t,n=1e3){if(!this.terrain)return;const r=performance.now(),i=this.terrain.exaggeration,o=t-i,u=()=>{if(!this.terrain||this.terrainFlattening)return;const l=(performance.now()-r)/n;if(l<.99){const p=1-Math.pow(1-l,4),g=i+p*o;this.terrain.exaggeration=g,requestAnimationFrame(u)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t;this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(u)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const n=i=>qf(this,null,function*(){!this.terrain||i.type!=="data"||i.dataType!=="source"||!("source"in i)||i.sourceId!=="maptiler-terrain"||i.source.type!=="raster-dem"||i.isSourceLoaded&&(this.off("data",n),this.growTerrain(t))}),r=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",n),this.addSource(el.terrainSourceId,{type:"raster-dem",url:el.terrainSourceURL}),this.setTerrain({source:el.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?r():this.once("load",()=>{this.getTerrain()&&this.getSource(el.terrainSourceId)||r()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=1*1e3,n=performance.now(),r=this.terrain.exaggeration,i=()=>{if(!this.terrain||this.terrainGrowing)return;const o=(performance.now()-n)/t;if(o<.99){const u=Math.pow(1-o,4),l=r*u;this.terrain.exaggeration=l,requestAnimationFrame(i)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(el.terrainSourceId)&&this.removeSource(el.terrainSourceId);this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(i)}setTerrainExaggeration(t,n=!0){!n&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}fitToIpBounds(){return qf(this,null,function*(){const t=yield sP.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})})}centerOnIpPoint(t){return qf(this,null,function*(){var n,r;const i=yield sP.info();this.jumpTo({center:[(n=i==null?void 0:i.longitude)!=null?n:0,(r=i==null?void 0:i.latitude)!=null?r:0],zoom:t||11})})}getCameraHash(){const t=new Float32Array(5),n=this.getCenter();return t[0]=n.lng,t[1]=n.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),Lne.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return ns}getMaptilerSessionId(){return Ij}setTransformRequest(t){return super.setTransformRequest(AD(t)),this}};class qj extends xn.Marker{addTo(t){return super.addTo(t)}}class Lie extends xn.Popup{addTo(t){return super.addTo(t)}}class Aie extends xn.Style{constructor(t,n={}){super(t,n)}}class Oie extends xn.CanvasSource{onAdd(t){super.onAdd(t)}}class kie extends xn.GeoJSONSource{onAdd(t){super.onAdd(t)}}class Rie extends xn.ImageSource{onAdd(t){super.onAdd(t)}}class Mie extends xn.RasterTileSource{onAdd(t){super.onAdd(t)}}class Nie extends xn.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class Die extends xn.VectorTileSource{onAdd(t){super.onAdd(t)}}class zie extends xn.VideoSource{onAdd(t){super.onAdd(t)}}class Fie extends xn.AttributionControl{onAdd(t){return super.onAdd(t)}}class Bie extends xn.TerrainControl{onAdd(t){return super.onAdd(t)}}class jie extends xn.BoxZoomHandler{constructor(t,n){super(t,n)}}class $ie extends xn.ScrollZoomHandler{constructor(t,n){super(t,n)}}class Uie extends xn.CooperativeGesturesHandler{constructor(t,n){super(t,n)}}class Vie extends xn.KeyboardHandler{constructor(t){super(t)}}class qie extends xn.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class Gie extends xn.MapWheelEvent{constructor(t,n,r){super(t,n,r)}}class Hie extends xn.MapTouchEvent{constructor(t,n,r){super(t,n,r)}}class Zie extends xn.MapMouseEvent{constructor(t,n,r,i={}){super(t,n,r,i)}}var Wie=Object.defineProperty,FD=Object.getOwnPropertySymbols,Kie=Object.prototype.hasOwnProperty,Xie=Object.prototype.propertyIsEnumerable,BD=(e,t,n)=>t in e?Wie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Eg=(e,t)=>{for(var n in t||(t={}))Kie.call(t,n)&&BD(e,n,t[n]);if(FD)for(var n of FD(t))Xie.call(t,n)&&BD(e,n,t[n]);return e};function DS(e){if(typeof DOMParser<"u"){const t=new DOMParser().parseFromString(e,"application/xml");if(t.querySelector("parsererror"))throw new Error("The provided string is not valid XML");return t}else throw new Error("No XML parser found")}function KA(e,t){if(!e.hasChildNodes())return!1;for(const n of Array.from(e.childNodes)){const r=n.nodeName;if(typeof r=="string"&&r.trim().toLowerCase()===t.toLowerCase())return!0}return!1}function vP(e){if(typeof XMLSerializer<"u")return new XMLSerializer().serializeToString(e);throw new Error("No XML serializer found")}function XA(e){if(typeof e=="string"&&(e=DS(e)),!KA(e,"gpx"))throw new Error("The XML document is not valid GPX");const t=is(e,"trk"),n=is(e,"rte"),r=is(e,"wpt"),i={type:"FeatureCollection",features:[]};for(const o of Array.from(t)){const u=eoe(o);u&&i.features.push(u)}for(const o of Array.from(n)){const u=toe(o);u&&i.features.push(u)}for(const o of Array.from(r))i.features.push(noe(o));return i}function YA(e,t){var n;if(typeof e=="string"&&(e=DS(e)),!KA(e,"kml"))throw new Error("The XML document is not valid KML");const r={type:"FeatureCollection",features:[]},i={},o={},u={},l=is(e,"Placemark"),p=is(e,"Style"),g=is(e,"StyleMap");for(const x of Array.from(p)){const y=$D(t!==void 0?t(x):vP(x)).toString(16);i["#"+fg(x,"id")]=y,o[y]=x}for(const x of Array.from(g)){i["#"+fg(x,"id")]=$D(t!==void 0?t(x):vP(x)).toString(16);const y=is(x,"Pair"),_={};for(const T of Array.from(y))_[(n=Ur(Un(T,"key")))!=null?n:""]=Ur(Un(T,"styleUrl"));u["#"+fg(x,"id")]=_}for(const x of Array.from(l))r.features=r.features.concat(Qie(x,i,o,u));return r}function jD(e){if(e===null)return["#000000",1];let t="",n=1;return e.substring(0,1)==="#"&&(e=e.substring(1)),(e.length===6||e.length===3)&&(t=e),e.length===8&&(n=parseInt(e.substring(0,2),16)/255,t="#"+e.substring(6,8)+e.substring(4,6)+e.substring(2,4)),[t??"#000000",n??1]}function Yie(e){return Zj(e.split(" "))}function Jie(e){var t;let n=is(e,"coord");const r=[],i=[];n.length===0&&(n=is(e,"gx:coord"));for(const u of Array.from(n))r.push(Yie((t=Ur(u))!=null?t:""));const o=is(e,"when");for(const u of Array.from(o))i.push(Ur(u));return{coords:r,times:i}}function _w(e){var t,n,r;const i=["Polygon","LineString","Point","Track","gx:Track"];let o,u,l,p,g;const x=[],y=[];if(Un(e,"MultiGeometry")!==null)return _w(Un(e,"MultiGeometry"));if(Un(e,"MultiTrack")!==null)return _w(Un(e,"MultiTrack"));if(Un(e,"gx:MultiTrack")!==null)return _w(Un(e,"gx:MultiTrack"));for(l=0;l<i.length;l++)if(u=is(e,i[l]),u){for(p=0;p<u.length;p++)if(o=u[p],i[l]==="Point")x.push({type:"Point",coordinates:Wj((t=Ur(Un(o,"coordinates")))!=null?t:"")});else if(i[l]==="LineString")x.push({type:"LineString",coordinates:VD((n=Ur(Un(o,"coordinates")))!=null?n:"")});else if(i[l]==="Polygon"){const _=is(o,"LinearRing"),T=[];for(g=0;g<_.length;g++)T.push(VD((r=Ur(Un(_[g],"coordinates")))!=null?r:""));x.push({type:"Polygon",coordinates:T})}else if(i[l]==="Track"||i[l]==="gx:Track"){const _=Jie(o);x.push({type:"LineString",coordinates:_.coords}),_.times.length&&y.push(_.times)}}return{geoms:x,coordTimes:y}}function Qie(e,t,n,r){var i,o,u,l,p,g,x,y,_,T;const P=_w(e),A={},M=Ur(Un(e,"name")),k=Ur(Un(e,"address")),R=Ur(Un(e,"description")),z=Un(e,"TimeSpan"),D=Un(e,"TimeStamp"),U=Un(e,"ExtendedData"),V=Un(e,"visibility");let G,H=Ur(Un(e,"styleUrl")),J=Un(e,"LineStyle"),Y=Un(e,"PolyStyle");if(!P.geoms.length)return[];if(M&&(A.name=M),k&&(A.address=k),H){H[0]!=="#"&&(H="#"+H),A.styleUrl=H,t[H]&&(A.styleHash=t[H]),r[H]&&(A.styleMapHash=r[H],A.styleHash=t[(i=r[H].normal)!=null?i:""]);const ee=n[(o=A.styleHash)!=null?o:""];if(ee){J||(J=Un(ee,"LineStyle")),Y||(Y=Un(ee,"PolyStyle"));const ce=Un(ee,"IconStyle");if(ce){const oe=Un(ce,"Icon");if(oe){const we=Ur(Un(oe,"href"));we&&(A.icon=we)}}}}if(R&&(A.description=R),z){const ee=Ur(Un(z,"begin")),ce=Ur(Un(z,"end"));ee&&ce&&(A.timespan={begin:ee,end:ce})}if(D!==null&&(A.timestamp=(u=Ur(Un(D,"when")))!=null?u:new Date().toISOString()),J!==null){const ee=jD(Ur(Un(J,"color"))),ce=ee[0],oe=ee[1],we=parseFloat((l=Ur(Un(J,"width")))!=null?l:"");ce&&(A.stroke=ce),isNaN(oe)||(A["stroke-opacity"]=oe),isNaN(we)||(A["stroke-width"]=we)}if(Y){const ee=jD(Ur(Un(Y,"color"))),ce=ee[0],oe=ee[1],we=Ur(Un(Y,"fill")),Ne=Ur(Un(Y,"outline"));ce&&(A.fill=ce),isNaN(oe)||(A["fill-opacity"]=oe),we&&(A["fill-opacity"]=we==="1"?A["fill-opacity"]||1:0),Ne&&(A["stroke-opacity"]=Ne==="1"?A["stroke-opacity"]||1:0)}if(U){const ee=is(U,"Data"),ce=is(U,"SimpleData");for(G=0;G<ee.length;G++)A[(p=ee[G].getAttribute("name"))!=null?p:""]=(g=Ur(Un(ee[G],"value")))!=null?g:"";for(G=0;G<ce.length;G++)A[(x=ce[G].getAttribute("name"))!=null?x:""]=(y=Ur(ce[G]))!=null?y:""}V!==null&&(A.visibility=(_=Ur(V))!=null?_:""),P.coordTimes.length!==0&&(A.coordTimes=P.coordTimes.length===1?P.coordTimes[0]:P.coordTimes);const X={type:"Feature",geometry:P.geoms.length===1?P.geoms[0]:{type:"GeometryCollection",geometries:P.geoms},properties:A};return fg(e,"id")&&(X.id=(T=fg(e,"id"))!=null?T:void 0),[X]}function Gj(e,t){const n=is(e,t),r=[],i=[];let o=[];const u=n.length;if(!(u<2)){for(let l=0;l<u;l++){const p=Kj(n[l]);r.push(p.coordinates),p.time&&i.push(p.time),(p.heartRate||o.length)&&(o.length===0&&(o=new Array(l).fill(null)),o.push(p.heartRate))}return{line:r,times:i,heartRates:o}}}function eoe(e){const t=is(e,"trkseg"),n=[],r=[],i=[];let o;for(let l=0;l<t.length;l++)if(o=Gj(t[l],"trkpt"),o!==void 0&&(o.line&&n.push(o.line),o.times&&o.times.length&&r.push(o.times),i.length||o.heartRates&&o.heartRates.length)){if(!i.length)for(let p=0;p<l;p++)i.push(new Array(n[p].length).fill(null));o.heartRates&&o.heartRates.length?i.push(o.heartRates):i.push(new Array(o.line.length).fill(null))}if(n.length===0)return;const u=Eg(Eg({},JA(e)),Hj(Un(e,"extensions")));return r.length!==0&&(u.coordTimes=n.length===1?r[0]:r),i.length!==0&&(u.heartRates=n.length===1?i[0]:i),n.length===1?{type:"Feature",properties:u,geometry:{type:"LineString",coordinates:n[0]}}:{type:"Feature",properties:u,geometry:{type:"MultiLineString",coordinates:n}}}function toe(e){const t=Gj(e,"rtept");return t===void 0?void 0:{type:"Feature",properties:Eg(Eg({},JA(e)),Hj(Un(e,"extensions"))),geometry:{type:"LineString",coordinates:t.line}}}function noe(e){return{type:"Feature",properties:Eg(Eg({},JA(e)),xP(e,["sym"])),geometry:{type:"Point",coordinates:Kj(e).coordinates}}}function Hj(e){var t,n;const r={};if(e){const i=Un(e,"line");if(i){const o=Ur(Un(i,"color")),u=parseFloat((t=Ur(Un(i,"opacity")))!=null?t:"0"),l=parseFloat((n=Ur(Un(i,"width")))!=null?n:"0");o&&(r.stroke=o),isNaN(u)||(r["stroke-opacity"]=u),isNaN(l)||(r["stroke-width"]=l*96/25.4)}}return r}function JA(e){const t=xP(e,["name","cmt","desc","type","time","keywords"]),n=is(e,"link");if(n.length!==0){t.links=[];for(const r of Array.from(n)){const i=Eg({href:fg(r,"href")},xP(r,["text","type"]));t.links.push(i)}}return t}function $D(e){let t=0;if(!e||!e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}function is(e,t){return e.getElementsByTagName(t)}function fg(e,t){return e.getAttribute(t)}function UD(e,t){var n;return parseFloat((n=fg(e,t))!=null?n:"0")}function Un(e,t){const n=is(e,t);return n.length?n[0]:null}function roe(e){return e.normalize&&e.normalize(),e}function Zj(e){return e.map(parseFloat).map(t=>isNaN(t)?null:t)}function Ur(e){return e&&roe(e),e&&e.textContent}function xP(e,t){var n;const r={};let i,o;for(o=0;o<t.length;o++)i=Un(e,t[o]),i&&(r[t[o]]=(n=Ur(i))!=null?n:"");return r}function Wj(e){return Zj(e.replace(/\s*/g,"").split(","))}function VD(e){const t=e.replace(/^\s*|\s*$/g,"").split(/\s+/),n=[];for(const r of t)n.push(Wj(r));return n}function Kj(e){var t,n;const r=[UD(e,"lon"),UD(e,"lat")],i=Un(e,"ele"),o=Un(e,"gpxtpx:hr")||Un(e,"hr"),u=Un(e,"time");let l;return i&&(l=parseFloat((t=Ur(i))!=null?t:"0"),isNaN(l)||r.push(l)),{coordinates:r,time:u?Ur(u):null,heartRate:o!==null?parseFloat((n=Ur(o))!=null?n:"0"):null}}function Xj(e){try{typeof e=="string"&&(e=DS(e))}catch{return null}try{return XA(e)}catch{}try{return YA(e)}catch{}return null}var ioe=Object.defineProperty,ooe=(e,t,n)=>t in e?ioe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qD=(e,t,n)=>(ooe(e,typeof t!="symbol"?t+"":t,n),n);function Mb(e){const t=e.toString(16);return t.length==1?"0"+t:t}function soe(e){return"#"+Mb(e[0])+Mb(e[1])+Mb(e[2])+(e.length===4?Mb(e[3]):"")}class In extends Array{constructor(t={}){super(),qD(this,"min",0),qD(this,"max",1),"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new In({stops:t.map(n=>({value:n[0],color:n[1]}))})}setStops(t,n={clone:!0}){const r=n.clone?this.clone():this;r.length=0;let i=1/0,o=-1/0;for(let u=0;u<t.length;u+=1)i=Math.min(i,t[u].value),o=Math.max(o,t[u].value),r.push({value:t[u].value,color:t[u].color.slice()});return r.sort((u,l)=>u.value<l.value?-1:1),this.min=i,this.max=o,r}scale(t,n,r={clone:!0}){const i=r.clone,o=this[0].value,l=this.at(-1).value-o,p=n-t,g=[];for(let x=0;x<this.length;x+=1){const T=(this[x].value-o)/l*p+t;i?g.push({value:T,color:this[x].color.slice()}):this[x].value=T}return i?new In({stops:g}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new In({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let n=0;n<this.length;n+=1)t.push({value:this[n].value,color:this[n].color});return t}reverse(t={clone:!0}){const n=t.clone?this.clone():this;for(let r=0;r<~~(n.length/2);r+=1){const i=n[r].color;n[r].color=n.at(-(r+1)).color,n.at(-(r+1)).color=i}return n}getBounds(){return{min:this.min,max:this.max}}getColor(t,n={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let r=0;r<this.length-1;r+=1){if(t>this[r+1].value)continue;const i=this[r].color;if(!n.smooth)return i.slice();const o=this[r].value,u=this[r+1].value,l=this[r+1].color,p=(u-t)/(u-o);return i.map((g,x)=>Math.round(g*p+l[x]*(1-p)))}return[0,0,0]}getColorHex(t,n={smooth:!0,withAlpha:!1}){return soe(this.getColor(t,n))}getColorRelative(t,n={smooth:!0}){const r=this.getBounds();return this.getColor(r.min+t*(r.max-r.min),n)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const n=document.createElement("canvas");n.width=t.horizontal?t.size:1,n.height=t.horizontal?1:t.size;const r=n.getContext("2d");if(!r)throw new Error("Canvs context is missing");const i=r.getImageData(0,0,n.width,n.height),o=i.data,u=t.size,l=this[0].value,x=(this.at(-1).value-l)/u;for(let y=0;y<u;y+=1){const _=this.getColor(l+y*x,{smooth:t.smooth});o[y*4]=_[0],o[y*4+1]=_[1],o[y*4+2]=_[2],o[y*4+3]=_.length>3?_[3]:255}return r.putImageData(i,0,0),n}resample(t,n=15){const r=this.getBounds(),i=this.scale(0,1),o=1/(n-1);let u;if(t==="ease-in-square")u=Array.from({length:n},(g,x)=>{const y=x*o,_=Math.pow(y,2),T=i.getColor(_);return{value:y,color:T}});else if(t==="ease-out-square")u=Array.from({length:n},(g,x)=>{const y=x*o,_=1-Math.pow(1-y,2),T=i.getColor(_);return{value:y,color:T}});else if(t==="ease-out-sqrt")u=Array.from({length:n},(g,x)=>{const y=x*o,_=Math.pow(y,.5),T=i.getColor(_);return{value:y,color:T}});else if(t==="ease-in-sqrt")u=Array.from({length:n},(g,x)=>{const y=x*o,_=1-Math.pow(1-y,.5),T=i.getColor(_);return{value:y,color:T}});else if(t==="ease-out-exp")u=Array.from({length:n},(g,x)=>{const y=x*o,_=1-Math.pow(2,-10*y),T=i.getColor(_);return{value:y,color:T}});else if(t==="ease-in-exp")u=Array.from({length:n},(g,x)=>{const y=x*o,_=Math.pow(2,10*y-10),T=i.getColor(_);return{value:y,color:T}});else throw new Error("Invalid ressampling method.");return new In({stops:u}).scale(r.min,r.max)}transparentStart(){const t=this.getRawColorStops();return t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001,t.forEach(n=>{n.color.length===3&&n.color.push(255)}),t[0].color[3]=0,new In({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}const QA={NULL:new In({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),GRAY:new In({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),JET:new In({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),HSV:new In({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),HOT:new In({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),SPRING:new In({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),SUMMER:new In({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),AUTOMN:new In({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),WINTER:new In({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),BONE:new In({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),COPPER:new In({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),GREYS:new In({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),YIGNBU:new In({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),GREENS:new In({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),YIORRD:new In({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),BLUERED:new In({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),RDBU:new In({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),PICNIC:new In({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),RAINBOW:new In({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),PORTLAND:new In({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),BLACKBODY:new In({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),EARTH:new In({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),ELECTRIC:new In({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),VIRIDIS:new In({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),INFERNO:new In({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),MAGMA:new In({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),PLASMA:new In({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),WARM:new In({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),COOL:new In({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),RAINBOW_SOFT:new In({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),BATHYMETRY:new In({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),CDOM:new In({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),CHLOROPHYLL:new In({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),DENSITY:new In({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),FREESURFACE_BLUE:new In({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),FREESURFACE_RED:new In({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),OXYGEN:new In({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),PAR:new In({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),PHASE:new In({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),SALINITY:new In({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),TEMPERATURE:new In({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),TURBIDITY:new In({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),VELOCITY_BLUE:new In({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),VELOCITY_GREEN:new In({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),CUBEHELIX:new In({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),CIVIDIS:new In({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),TURBO:new In({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),ROCKET:new In({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),MAKO:new In({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]})},GD=[["#1D5B79","#468B97","#EF6262","#F3AA60"],["#614BC3","#33BBC5","#85E6C5","#C8FFE0"],["#461959","#7A316F","#CD6688","#AED8CC"],["#0079FF","#00DFA2","#F6FA70","#FF0060"],["#39B5E0","#A31ACB","#FF78F0","#F5EA5A"],["#37E2D5","#590696","#C70A80","#FBCB0A"],["#FFD36E","#FFF56D","#99FFCD","#9FB4FF"],["#00EAD3","#FFF5B7","#FF449F","#005F99"],["#10A19D","#540375","#FF7000","#FFBF00"]];function eO(){return GD[~~(Math.random()*GD.length)][~~(Math.random()*4)]}function zS(){return`maptiler_source_${kj()}`}function FS(){return`maptiler_layer_${kj()}`}function HD(e,t){if(t<=e[0].zoom)return e[0].value;if(t>=e[e.length-1].zoom)return e[e.length-1].value;for(let n=0;n<e.length-1;n+=1)if(t>=e[n].zoom&&t<e[n+1].zoom){const r=e[n+1].zoom-e[n].zoom,i=(t-e[n].zoom)/r;return i*e[n+1].value+(1-i)*e[n].value}return 0}function dg(e){return["interpolate",["linear"],["zoom"],...e.map(t=>[t.zoom,t.value]).flat()]}function Vr(e){return["interpolate",["linear"],["zoom"],...e.map(t=>[t.zoom,t.value]).flat()]}function aoe(e,t){if(typeof t=="number"&&typeof e=="number")return 2*t+e;if(typeof t=="number"&&Array.isArray(e))return["interpolate",["linear"],["zoom"],...e.map(n=>[n.zoom,2*t+n.value]).flat()];if(typeof e=="number"&&Array.isArray(t))return["interpolate",["linear"],["zoom"],...t.map(n=>[n.zoom,2*n.value+e]).flat()];if(Array.isArray(e)&&Array.isArray(t)){const n=Array.from(new Set([...e.map(r=>r.zoom),...t.map(r=>r.zoom)])).sort((r,i)=>r<i?-1:1);return["interpolate",["linear"],["zoom"],...n.map(r=>[r,2*HD(t,r)+HD(e,r)]).flat()]}return 0}function loe(e,t){return["interpolate",["linear"],["get",t],...e.map(n=>[n.propertyValue,n.value]).flat()]}function Yj(e){const t=e.trimStart(),n=`${t}${" ".repeat(e.length-t.length)}`,r=Array.from(n);if(!r.every(l=>l===" "||l==="_"))throw new Error("A dash pattern must be composed only of whitespace and underscore characters.");if(!(r.some(l=>l==="_")&&r.some(l=>l===" ")))throw new Error("A dash pattern must contain at least one underscore and one whitespace character");const u=[1];for(let l=1;l<r.length;l+=1){const p=r[l-1],g=r[l];p===g?u[u.length-1]+=1:u.push(1)}return u}function ZD(e,t){return["interpolate",["linear"],["get",t],...e.map(n=>[n.value,n.color]).flat()]}function WD(e,t,n=!0){return n?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius*.025]).flat()],2,["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius*.05]).flat()],4,["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius*.1]).flat()],8,["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius*.25]).flat()],16,["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius]).flat()]]:["interpolate",["linear"],["get",t],...e.map(r=>[r.value,r.pointRadius]).flat()]}function uoe(e,t,n=!0){return n?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value*.025]).flat()],2,["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value*.05]).flat()],4,["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value*.1]).flat()],8,["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value*.25]).flat()],16,["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value]).flat()]]:["interpolate",["linear"],["get",t],...e.map(r=>[r.propertyValue,r.value]).flat()]}function KD(e,t){return e.every(n=>n.color[3]===e[0].color[3])?e[0].color[3]?e[0].color[3]/255:1:["interpolate",["linear"],["get",t],...e.getRawColorStops().map(n=>{const r=n.value,i=n.color;return[r,i.length===4?i[3]/255:1]}).flat()]}function coe(e,t=10){return["interpolate",["linear"],["heatmap-density"],...Array.from({length:t+1},(n,r)=>{const i=r/t;return[i,e.getColorHex(i)]}).flat()]}var hoe=Object.defineProperty,foe=Object.defineProperties,doe=Object.getOwnPropertyDescriptors,XD=Object.getOwnPropertySymbols,poe=Object.prototype.hasOwnProperty,moe=Object.prototype.propertyIsEnumerable,YD=(e,t,n)=>t in e?hoe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pg=(e,t)=>{for(var n in t||(t={}))poe.call(t,n)&&YD(e,n,t[n]);if(XD)for(var n of XD(t))moe.call(t,n)&&YD(e,n,t[n]);return e},goe=(e,t)=>foe(e,doe(t)),yoe=(e,t,n)=>new Promise((r,i)=>{var o=p=>{try{l(n.next(p))}catch(g){i(g)}},u=p=>{try{l(n.throw(p))}catch(g){i(g)}},l=p=>p.done?r(p.value):Promise.resolve(p.value).then(o,u);l((n=n.apply(e,t)).next())});function _oe(e,t){return yoe(this,arguments,function*(n,r,i={}){var o,u,l;if(!r.sourceId&&!r.data)throw new Error("Creating a polyline layer requires an existing .sourceId or a valid .data property");let p=r.data;if(typeof p=="string"){if(NS(p))p=`https://api.maptiler.com/data/${r.data}/features.json?key=${ns.apiKey}`;else if(((o=p.split(".").pop())==null?void 0:o.toLowerCase().trim())==="gpx"){const x=yield(yield fetch(p,i)).text();p=XA(x)}else if(((u=p.split(".").pop())==null?void 0:u.toLowerCase().trim())==="kml"){const x=yield(yield fetch(p,i)).text();p=YA(x)}else{const g=(l=rie(p))!=null?l:Xj(p);g&&(p=g)}if(!p)throw new Error("Polyline data was provided as string but is incompatible with valid formats.")}return voe(n,goe(pg({},r),{data:p}))})}function voe(e,t){var n,r,i,o,u,l,p,g,x,y,_,T,P,A,M,k,R,z,D,U;if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const V=(n=t.sourceId)!=null?n:zS(),G=(r=t.layerId)!=null?r:FS(),H={polylineLayerId:G,polylineOutlineLayerId:"",polylineSourceId:V};t.data&&!e.getSource(V)&&e.addSource(V,{type:"geojson",data:t.data});const J=(i=t.lineWidth)!=null?i:3,Y=(o=t.lineColor)!=null?o:eO(),X=(u=t.lineOpacity)!=null?u:1,ee=(l=t.lineBlur)!=null?l:0,ce=(p=t.lineGapWidth)!=null?p:0;let oe=(g=t.lineDashArray)!=null?g:null;const we=(x=t.outlineWidth)!=null?x:1,Ne=(y=t.outlineColor)!=null?y:"#FFFFFF",Be=(_=t.outlineOpacity)!=null?_:1,De=(T=t.outlineBlur)!=null?T:0;if(typeof oe=="string"&&(oe=Yj(oe)),t.outline===!0){const Ae=`${G}_outline`;H.polylineOutlineLayerId=Ae,e.addLayer({id:Ae,type:"line",source:V,layout:{"line-join":(P=t.lineJoin)!=null?P:"round","line-cap":(A=t.lineCap)!=null?A:"round"},minzoom:(M=t.minzoom)!=null?M:0,maxzoom:(k=t.maxzoom)!=null?k:23,paint:{"line-opacity":typeof Be=="number"?Be:Vr(Be),"line-color":typeof Ne=="string"?Ne:dg(Ne),"line-width":aoe(J,we),"line-blur":typeof De=="number"?De:Vr(De)}},t.beforeId)}return e.addLayer({id:G,type:"line",source:V,layout:{"line-join":(R=t.lineJoin)!=null?R:"round","line-cap":(z=t.lineCap)!=null?z:"round"},minzoom:(D=t.minzoom)!=null?D:0,maxzoom:(U=t.maxzoom)!=null?U:23,paint:pg({"line-opacity":typeof X=="number"?X:Vr(X),"line-color":typeof Y=="string"?Y:dg(Y),"line-width":typeof J=="number"?J:Vr(J),"line-blur":typeof ee=="number"?ee:Vr(ee),"line-gap-width":typeof ce=="number"?ce:Vr(ce)},oe&&{"line-dasharray":oe})},t.beforeId),H}function xoe(e,t){var n,r,i,o,u,l,p,g,x,y,_;if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const T=(n=t.sourceId)!=null?n:zS(),P=(r=t.layerId)!=null?r:FS(),A={polygonLayerId:P,polygonOutlineLayerId:t.outline?`${P}_outline`:"",polygonSourceId:T};if(t.data&&!e.getSource(T)){let Y=t.data;typeof Y=="string"&&NS(Y)&&(Y=`https://api.maptiler.com/data/${Y}/features.json?key=${ns.apiKey}`),e.addSource(T,{type:"geojson",data:Y})}let M=(i=t.outlineDashArray)!=null?i:null;const k=(o=t.outlineWidth)!=null?o:1,R=(u=t.outlineColor)!=null?u:"#FFFFFF",z=(l=t.outlineOpacity)!=null?l:1,D=(p=t.outlineBlur)!=null?p:0,U=(g=t.fillColor)!=null?g:eO(),V=(x=t.fillOpacity)!=null?x:1,G=(y=t.outlinePosition)!=null?y:"center",H=(_=t.pattern)!=null?_:null;typeof M=="string"&&(M=Yj(M));const J=(Y=null)=>{var X,ee,ce,oe,we,Ne;if(e.addLayer({id:P,type:"fill",source:T,minzoom:(X=t.minzoom)!=null?X:0,maxzoom:(ee=t.maxzoom)!=null?ee:23,paint:pg({"fill-color":typeof U=="string"?U:dg(U),"fill-opacity":typeof V=="number"?V:Vr(V)},Y&&{"fill-pattern":Y})},t.beforeId),t.outline===!0){let Be;G==="inside"?typeof k=="number"?Be=.5*k:Be=Vr(k.map(({zoom:De,value:Ae})=>({zoom:De,value:.5*Ae}))):G==="outside"?typeof k=="number"?Be=-.5*k:Be=Vr(k.map(De=>({zoom:De.zoom,value:-.5*De.value}))):Be=0,e.addLayer({id:A.polygonOutlineLayerId,type:"line",source:T,layout:{"line-join":(ce=t.outlineJoin)!=null?ce:"round","line-cap":(oe=t.outlineCap)!=null?oe:"butt"},minzoom:(we=t.minzoom)!=null?we:0,maxzoom:(Ne=t.maxzoom)!=null?Ne:23,paint:pg({"line-opacity":typeof z=="number"?z:Vr(z),"line-color":typeof R=="string"?R:dg(R),"line-width":typeof k=="number"?k:Vr(k),"line-blur":typeof D=="number"?D:Vr(D),"line-offset":Be},M&&{"line-dasharray":M})},t.beforeId)}};return H?e.hasImage(H)?J(H):e.loadImage(H).then(Y=>{e.addImage(H,Y.data),J(H)}).catch(Y=>(console.error("Could not load the pattern image.",Y.message),J())):J(),A}function boe(e,t){var n,r,i,o,u,l,p,g,x,y,_,T,P,A,M,k;if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const R=(n=t.minPointRadius)!=null?n:10,z=(r=t.maxPointRadius)!=null?r:50,D=(i=t.cluster)!=null?i:!1,U=20,V=Array.isArray(t.pointColor)?t.pointColor:QA.TURBO.scale(10,t.cluster?1e4:1e3).resample("ease-out-square"),G=V.getBounds(),H=(o=t.sourceId)!=null?o:zS(),J=(u=t.layerId)!=null?u:FS(),Y=(l=t.showLabel)!=null?l:D,X=(p=t.alignOnViewport)!=null?p:!0,ee=(g=t.outline)!=null?g:!1,ce=(x=t.outlineOpacity)!=null?x:1,oe=(y=t.outlineWidth)!=null?y:1,we=(_=t.outlineColor)!=null?_:"#FFFFFF";let Ne;const Be=(T=t.zoomCompensation)!=null?T:!0,De=(P=t.minzoom)!=null?P:0,Ae=(A=t.maxzoom)!=null?A:23;typeof t.pointOpacity=="number"?Ne=t.pointOpacity:Array.isArray(t.pointOpacity)?Ne=Vr(t.pointOpacity):t.cluster?Ne=KD(V,"point_count"):t.property?Ne=KD(V,t.property):Ne=Vr([{zoom:De,value:0},{zoom:De+.25,value:1},{zoom:Ae-.25,value:1},{zoom:Ae,value:0}]);const ve={pointLayerId:J,clusterLayerId:"",labelLayerId:"",pointSourceId:H};if(t.data&&!e.getSource(H)){let he=t.data;typeof he=="string"&&NS(he)&&(he=`https://api.maptiler.com/data/${he}/features.json?key=${ns.apiKey}`),e.addSource(H,{type:"geojson",data:he,cluster:D})}if(D){ve.clusterLayerId=`${J}_cluster`;const he=Array.from({length:U},(xe,Ee)=>{const Ge=G.min+Ee*(G.max-G.min)/(U-1);return{value:Ge,pointRadius:R+(z-R)*Math.pow(Ee/(U-1),.5),color:V.getColorHex(Ge)}});e.addLayer({id:ve.clusterLayerId,type:"circle",source:H,filter:["has","point_count"],paint:pg({"circle-color":typeof t.pointColor=="string"?t.pointColor:ZD(he,"point_count"),"circle-radius":typeof t.pointRadius=="number"?t.pointRadius:Array.isArray(t.pointRadius)?Vr(t.pointRadius):WD(he,"point_count",!1),"circle-pitch-alignment":X?"viewport":"map","circle-pitch-scale":"map","circle-opacity":Ne},ee&&{"circle-stroke-opacity":typeof ce=="number"?ce:Vr(ce),"circle-stroke-width":typeof oe=="number"?oe:Vr(oe),"circle-stroke-color":typeof we=="string"?we:dg(we)}),minzoom:De,maxzoom:Ae},t.beforeId),e.addLayer({id:ve.pointLayerId,type:"circle",source:H,filter:["!",["has","point_count"]],paint:pg({"circle-pitch-alignment":X?"viewport":"map","circle-pitch-scale":"map","circle-color":typeof t.pointColor=="string"?t.pointColor:V.getColorHex(V.getBounds().min),"circle-radius":typeof t.pointRadius=="number"?t.pointRadius:Array.isArray(t.pointRadius)?Vr(t.pointRadius):he[0].pointRadius*.75,"circle-opacity":Ne},ee&&{"circle-stroke-opacity":typeof ce=="number"?ce:Vr(ce),"circle-stroke-width":typeof oe=="number"?oe:Vr(oe),"circle-stroke-color":typeof we=="string"?we:dg(we)}),minzoom:De,maxzoom:Ae},t.beforeId)}else{let he=typeof t.pointColor=="string"?t.pointColor:Array.isArray(t.pointColor)?t.pointColor.getColorHex(t.pointColor.getBounds().min):eO(),xe=typeof t.pointRadius=="number"?Be?Vr([{zoom:0,value:t.pointRadius*.025},{zoom:2,value:t.pointRadius*.05},{zoom:4,value:t.pointRadius*.1},{zoom:8,value:t.pointRadius*.25},{zoom:16,value:t.pointRadius*1}]):t.pointRadius:Array.isArray(t.pointRadius)?Vr(t.pointRadius):Be?Vr([{zoom:0,value:R*.05},{zoom:2,value:R*.1},{zoom:4,value:R*.2},{zoom:8,value:R*.5},{zoom:16,value:R*1}]):R;if(t.property&&Array.isArray(t.pointColor)){const Ee=Array.from({length:U},(Ge,$e)=>{const be=G.min+$e*(G.max-G.min)/(U-1);return{value:be,pointRadius:typeof t.pointRadius=="number"?t.pointRadius:R+(z-R)*Math.pow($e/(U-1),.5),color:typeof t.pointColor=="string"?t.pointColor:V.getColorHex(be)}});he=ZD(Ee,t.property),xe=WD(Ee,t.property,Be)}e.addLayer({id:ve.pointLayerId,type:"circle",source:H,layout:{"circle-sort-key":t.property?["/",1,["get",t.property]]:0},paint:pg({"circle-pitch-alignment":X?"viewport":"map","circle-pitch-scale":"map","circle-color":he,"circle-opacity":Ne,"circle-radius":xe},ee&&{"circle-stroke-opacity":typeof ce=="number"?ce:Vr(ce),"circle-stroke-width":typeof oe=="number"?oe:Vr(oe),"circle-stroke-color":typeof we=="string"?we:dg(we)}),minzoom:De,maxzoom:Ae},t.beforeId)}if(Y!==!1&&(t.cluster||t.property)){ve.labelLayerId=`${J}_label`;const he=(M=t.labelColor)!=null?M:"#fff",xe=(k=t.labelSize)!=null?k:12;e.addLayer({id:ve.labelLayerId,type:"symbol",source:H,filter:["has",t.cluster?"point_count":t.property],layout:{"text-field":t.cluster?"{point_count_abbreviated}":`{${t.property}}`,"text-font":["Noto Sans Regular"],"text-size":xe,"text-pitch-alignment":X?"viewport":"map","symbol-sort-key":["/",1,["get",t.cluster?"point_count":t.property]]},paint:{"text-color":he,"text-opacity":Ne},minzoom:De,maxzoom:Ae},t.beforeId)}return ve}function woe(e,t){var n,r,i,o,u,l,p,g,x,y;if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const _=(n=t.sourceId)!=null?n:zS(),T=(r=t.layerId)!=null?r:FS(),P=(i=t.minzoom)!=null?i:0,A=(o=t.maxzoom)!=null?o:23,M=(u=t.zoomCompensation)!=null?u:!0,k=(l=t.opacity)!=null?l:[{zoom:P,value:0},{zoom:P+.25,value:1},{zoom:A-.25,value:1},{zoom:A,value:0}];let R=Array.isArray(t.colorRamp)?t.colorRamp:QA.TURBO.transparentStart();const z=R.getBounds();(z.min!==0||z.max!==1)&&(R=R.scale(0,1)),R.hasTransparentStart()||(R=R.transparentStart());const D=(p=t.intensity)!=null?p:[{zoom:0,value:.01},{zoom:4,value:.2},{zoom:16,value:1}],U=(g=t.property)!=null?g:null,V=(x=t.weight)!=null?x:1;let G=1;U?typeof V=="number"?(G=V,typeof t.weight=="number"&&console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`")):Array.isArray(V)?G=loe(V,U):console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`"):typeof V=="number"?G=V:Array.isArray(V)&&console.warn("The options `.propertyValueWeights` can only be used when `.property` is provided.");const H=[{zoom:0,value:50*.025},{zoom:2,value:50*.05},{zoom:4,value:50*.1},{zoom:8,value:50*.25},{zoom:16,value:50}],J=(y=t.radius)!=null?y:M?H:10;let Y=1;typeof J=="number"?Y=J:Array.isArray(J)&&"zoom"in J[0]?Y=Vr(J):U&&Array.isArray(J)&&"propertyValue"in J[0]?Y=uoe(J,U,M):!U&&Array.isArray(J)&&"propertyValue"in J[0]?(Y=Vr(H),console.warn("The option `.radius` can only be property-driven if the option `.property` is provided.")):Y=Vr(H);const X={heatmapLayerId:T,heatmapSourceId:_};if(t.data&&!e.getSource(_)){let ee=t.data;typeof ee=="string"&&NS(ee)&&(ee=`https://api.maptiler.com/data/${ee}/features.json?key=${ns.apiKey}`),e.addSource(_,{type:"geojson",data:ee})}return e.addLayer({id:T,type:"heatmap",source:_,minzoom:P,maxzoom:A,paint:{"heatmap-weight":G,"heatmap-intensity":typeof D=="number"?D:Vr(D),"heatmap-color":coe(R),"heatmap-radius":Y,"heatmap-opacity":typeof k=="number"?k:Vr(k)}}),X}const Eoe={addPolyline:_oe,addPolygon:xoe,addPoint:boe,addHeatmap:woe},{setRTLTextPlugin:Soe,getRTLTextPluginStatus:Toe,LngLat:Coe,LngLatBounds:Ioe,MercatorCoordinate:Poe,Evented:Loe,AJAXError:Aoe,prewarm:Ooe,clearPrewarmedResources:koe,addProtocol:bP,removeProtocol:Roe,Hash:Moe,Point:Noe,config:Doe,EdgeInsets:zoe,DragRotateHandler:Foe,DragPanHandler:Boe,TwoFingersTouchZoomRotateHandler:joe,DoubleClickZoomHandler:$oe,TwoFingersTouchZoomHandler:Uoe,TwoFingersTouchRotateHandler:Voe,getWorkerCount:qoe,setWorkerCount:Goe,getMaxParallelImageRequests:Hoe,setMaxParallelImageRequests:Zoe,getWorkerUrl:Woe,setWorkerUrl:Koe,addSourceType:Xoe,importScriptInWorkers:Yoe}=xn;function Joe(){return Bre.version}function Qoe(){return xn.getVersion()}const ese=xn.Map,tse=xn.Marker,nse=xn.Popup,rse=xn.Style,ise=xn.CanvasSource,ose=xn.GeoJSONSource,sse=xn.ImageSource,ase=xn.RasterTileSource,lse=xn.RasterDEMTileSource,use=xn.VectorTileSource,cse=xn.VideoSource;xn.NavigationControl;xn.GeolocateControl;xn.AttributionControl;xn.LogoControl;xn.ScaleControl;xn.FullscreenControl;xn.TerrainControl;const hse=xn.BoxZoomHandler,fse=xn.ScrollZoomHandler,dse=xn.CooperativeGesturesHandler,pse=xn.KeyboardHandler,mse=xn.TwoFingersTouchPitchHandler,gse=xn.MapWheelEvent,yse=xn.MapTouchEvent,_se=xn.MapMouseEvent,vse=Object.freeze(Object.defineProperty({__proto__:null,AJAXError:Aoe,AttributionControl:Fie,BoxZoomHandler:jie,BoxZoomHandlerMLGL:hse,CanvasSource:Oie,CanvasSourceMLGL:ise,ColorRamp:In,ColorRampCollection:QA,CooperativeGesturesHandler:Uie,CooperativeGesturesHandlerMLGL:dse,DoubleClickZoomHandler:$oe,DragPanHandler:Boe,DragRotateHandler:Foe,EdgeInsets:zoe,Evented:Loe,FullscreenControl:Bj,GeoJSONSource:kie,GeoJSONSourceMLGL:ose,GeolocateControl:Dj,GeolocationType:Vj,Hash:Moe,ImageSource:Rie,ImageSourceMLGL:sse,KeyboardHandler:Vie,KeyboardHandlerMLGL:pse,Language:Ir,LanguageGeocoding:Ex,LngLat:Coe,LngLatBounds:Ioe,LogoControl:Lj,Map:WA,MapMLGL:ese,MapMouseEvent:Zie,MapMouseEventMLGL:_se,MapStyle:RS,MapStyleVariant:AS,MapTouchEvent:Hie,MapTouchEventMLGL:yse,MapWheelEvent:Gie,MapWheelEventMLGL:gse,MaptilerGeolocateControl:zj,MaptilerLogoControl:hP,MaptilerNavigationControl:Nj,MaptilerTerrainControl:Rj,Marker:qj,MarkerMLGL:tse,MercatorCoordinate:Poe,NavigationControl:Mj,Point:Noe,Popup:Lie,PopupMLGL:nse,RasterDEMTileSource:Nie,RasterDEMTileSourceMLGL:lse,RasterTileSource:Mie,RasterTileSourceMLGL:ase,ReferenceMapStyle:OS,ScaleControl:Fj,ScrollZoomHandler:$ie,ScrollZoomHandlerMLGL:fse,SdkConfig:Pj,ServiceError:Qu,Style:Aie,StyleMLGL:rse,TerrainControl:Bie,TwoFingersTouchPitchHandler:qie,TwoFingersTouchPitchHandlerMLGL:mse,TwoFingersTouchRotateHandler:Voe,TwoFingersTouchZoomHandler:Uoe,TwoFingersTouchZoomRotateHandler:joe,VectorTileSource:Die,VectorTileSourceMLGL:use,VideoSource:zie,VideoSourceMLGL:cse,addProtocol:bP,addSourceType:Xoe,bufferToPixelDataBrowser:Tj,circumferenceAtLatitude:Ej,clearPrewarmedResources:koe,config:ns,configMLGL:Doe,coordinates:Xne,data:Jne,elevation:yre,expandMapStyle:FA,geocoding:Hne,geolocation:sP,getAutoLanguageGeocoding:hj,getBrowserLanguage:cP,getBufferToPixelDataParser:qA,getMapLibreVersion:Qoe,getMaxParallelImageRequests:Hoe,getRTLTextPluginStatus:Toe,getTileCache:VA,getVersion:Joe,getWorkerCount:qoe,getWorkerUrl:Woe,gpx:XA,gpxOrKml:Xj,hasChildNodeWithName:KA,helpers:Eoe,importScriptInWorkers:Yoe,isLanguageSupported:uP,kml:YA,mapStylePresetList:I1,math:UA,misc:mj,prewarm:Ooe,removeProtocol:Roe,setMaxParallelImageRequests:Zoe,setRTLTextPlugin:Soe,setWorkerCount:Goe,setWorkerUrl:Koe,staticMaps:lre,str2xml:DS,styleToStyle:kS,xml2str:vP},Symbol.toStringTag,{value:"Module"}));var Jj={},xse=Object.defineProperty,bse=(e,t,n)=>t in e?xse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JD=(e,t,n)=>(bse(e,typeof t!="symbol"?t+"":t,n),n),Qj=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},wc=(e,t,n)=>(Qj(e,t,"read from private field"),n?n.call(e):t.get(e)),QD=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Y2=(e,t,n,r)=>(Qj(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);function Ai(){}function wse(e,t){for(const n in t)e[n]=t[n];return e}function e$(e){return e()}function e3(){return Object.create(null)}function Td(e){e.forEach(e$)}function t$(e){return typeof e=="function"}function om(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Nb;function oa(e,t){return e===t?!0:(Nb||(Nb=document.createElement("a")),Nb.href=t,e===Nb.href)}function Ese(e){return Object.keys(e).length===0}function Sse(e,t,n,r){if(e){const i=n$(e,t,n,r);return e[0](i)}}function n$(e,t,n,r){return e[1]&&r?wse(n.ctx.slice(),e[1](r(t))):n.ctx}function Tse(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],u=Math.max(t.dirty.length,i.length);for(let l=0;l<u;l+=1)o[l]=t.dirty[l]|i[l];return o}return t.dirty|i}return t.dirty}function Cse(e,t,n,r,i,o){if(i){const u=n$(t,n,r,o);e.p(u,i)}}function Ise(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function t3(e){return e??""}function wr(e,t){e.appendChild(t)}function Fi(e,t,n){e.insertBefore(t,n||null)}function ki(e){e.parentNode&&e.parentNode.removeChild(e)}function ti(e){return document.createElement(e)}function Dc(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function jp(e){return document.createTextNode(e)}function Ml(){return jp(" ")}function Pse(){return jp("")}function Ia(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Lse(e){return function(t){return t.preventDefault(),e.call(this,t)}}function At(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ase(e){return Array.from(e.childNodes)}function P1(e,t){t=""+t,e.data!==t&&(e.data=t)}function n3(e,t){e.value=t??""}function Db(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Nu(e,t,n){e.classList.toggle(t,!!n)}function Ose(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let L1;function Z0(e){L1=e}function r$(){if(!L1)throw new Error("Function called outside component initialization");return L1}function kse(e){r$().$$.on_destroy.push(e)}function Rse(){const e=r$();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Ose(t,n,{cancelable:r});return i.slice().forEach(u=>{u.call(e,o)}),!o.defaultPrevented}return!0}}function r3(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const Py=[],wP=[];let r_=[];const i3=[],Mse=Promise.resolve();let EP=!1;function Nse(){EP||(EP=!0,Mse.then(i$))}function SP(e){r_.push(e)}const J2=new Set;let Ty=0;function i$(){if(Ty!==0)return;const e=L1;do{try{for(;Ty<Py.length;){const t=Py[Ty];Ty++,Z0(t),Dse(t.$$)}}catch(t){throw Py.length=0,Ty=0,t}for(Z0(null),Py.length=0,Ty=0;wP.length;)wP.pop()();for(let t=0;t<r_.length;t+=1){const n=r_[t];J2.has(n)||(J2.add(n),n())}r_.length=0}while(Py.length);for(;i3.length;)i3.pop()();EP=!1,J2.clear(),Z0(e)}function Dse(e){if(e.fragment!==null){e.update(),Td(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(SP)}}function zse(e){const t=[],n=[];r_.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),r_=t}const vw=new Set;let Ym;function xw(){Ym={r:0,c:[],p:Ym}}function bw(){Ym.r||Td(Ym.c),Ym=Ym.p}function xo(e,t){e&&e.i&&(vw.delete(e),e.i(t))}function es(e,t,n,r){if(e&&e.o){if(vw.has(e))return;vw.add(e),Ym.c.push(()=>{vw.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function o3(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Fse(e,t){es(e,1,1,()=>{t.delete(e.key)})}function Bse(e,t,n,r,i,o,u,l,p,g,x,y){let _=e.length,T=o.length,P=_;const A={};for(;P--;)A[e[P].key]=P;const M=[],k=new Map,R=new Map,z=[];for(P=T;P--;){const G=y(i,o,P),H=n(G);let J=u.get(H);J?r&&z.push(()=>J.p(G,t)):(J=g(H,G),J.c()),k.set(H,M[P]=J),H in A&&R.set(H,Math.abs(P-A[H]))}const D=new Set,U=new Set;function V(G){xo(G,1),G.m(l,x),u.set(G.key,G),x=G.first,T--}for(;_&&T;){const G=M[T-1],H=e[_-1],J=G.key,Y=H.key;G===H?(x=G.first,_--,T--):k.has(Y)?!u.has(J)||D.has(J)?V(G):U.has(Y)?_--:R.get(J)>R.get(Y)?(U.add(J),V(G)):(D.add(Y),_--):(p(H,u),_--)}for(;_--;){const G=e[_];k.has(G.key)||p(G,u)}for(;T;)V(M[T-1]);return Td(z),M}function $p(e){e&&e.c()}function cd(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),SP(()=>{const o=e.$$.on_mount.map(e$).filter(t$);e.$$.on_destroy?e.$$.on_destroy.push(...o):Td(o),e.$$.on_mount=[]}),i.forEach(SP)}function hd(e,t){const n=e.$$;n.fragment!==null&&(zse(n.after_update),Td(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function jse(e,t){e.$$.dirty[0]===-1&&(Py.push(e),Nse(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function sm(e,t,n,r,i,o,u=null,l=[-1]){const p=L1;Z0(e);const g=e.$$={fragment:null,ctx:[],props:o,update:Ai,not_equal:i,bound:e3(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:e3(),dirty:l,skip_bound:!1,root:t.target||p.$$.root};u&&u(g.root);let x=!1;if(g.ctx=n?n(e,t.props||{},(y,_,...T)=>{const P=T.length?T[0]:_;return g.ctx&&i(g.ctx[y],g.ctx[y]=P)&&(!g.skip_bound&&g.bound[y]&&g.bound[y](P),x&&jse(e,y)),_}):[],g.update(),x=!0,Td(g.before_update),g.fragment=r?r(g.ctx):!1,t.target){if(t.hydrate){const y=Ase(t.target);g.fragment&&g.fragment.l(y),y.forEach(ki)}else g.fragment&&g.fragment.c();t.intro&&xo(e.$$.fragment),cd(e,t.target,t.anchor),i$()}Z0(p)}class am{constructor(){JD(this,"$$"),JD(this,"$$set")}$destroy(){hd(this,1),this.$destroy=Ai}$on(t,n){if(!t$(n))return Ai;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Ese(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const $se="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($se);function Use(e){let t,n;return{c(){t=Dc("svg"),n=Dc("path"),At(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),At(t,"viewBox","0 0 14 14"),At(t,"width","13"),At(t,"height","13"),At(t,"class","svelte-en2qvf")},m(r,i){Fi(r,t,i),wr(t,n)},p:Ai,i:Ai,o:Ai,d(r){r&&ki(t)}}}class o$ extends am{constructor(t){super(),sm(this,t,null,Use,om,{})}}function Vse(e){let t,n;return{c(){t=Dc("svg"),n=Dc("path"),At(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),At(t,"viewBox","0 0 30 30"),At(t,"fill","none"),At(t,"xmlns","http://www.w3.org/2000/svg"),At(t,"class","svelte-d2loi5")},m(r,i){Fi(r,t,i),wr(t,n)},p:Ai,i:Ai,o:Ai,d(r){r&&ki(t)}}}class s$ extends am{constructor(t){super(),sm(this,t,null,Vse,om,{})}}function qse(e){let t,n;return{c(){t=ti("img"),oa(t.src,n=e[3]+"area.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!oa(t.src,n=r[3]+"area.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Gse(e){let t,n;return{c(){t=ti("img"),oa(t.src,n=e[3]+"reverse.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!oa(t.src,n=r[3]+"reverse.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Hse(e){let t,n;return{c(){t=ti("img"),oa(t.src,n=e[3]+"poi.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!oa(t.src,n=r[3]+"poi.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Zse(e){let t,n;return{c(){t=ti("img"),oa(t.src,n=e[3]+"postal_code.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!oa(t.src,n=r[3]+"postal_code.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Wse(e){let t,n;return{c(){t=ti("img"),oa(t.src,n=e[3]+"street.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!oa(t.src,n=r[3]+"street.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Kse(e){let t,n;return{c(){t=ti("img"),oa(t.src,n=e[3]+"road.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!oa(t.src,n=r[3]+"road.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Xse(e){let t,n;return{c(){t=ti("img"),oa(t.src,n=e[3]+"housenumber.svg")||At(t,"src",n),At(t,"alt",e[6]),At(t,"class","svelte-ltkwvy")},m(r,i){Fi(r,t,i)},p(r,i){i&8&&!oa(t.src,n=r[3]+"housenumber.svg")&&At(t,"src",n),i&64&&At(t,"alt",r[6])},d(r){r&&ki(t)}}}function Yse(e){let t,n,r,i;return{c(){t=ti("img"),oa(t.src,n=e[5])||At(t,"src",n),At(t,"alt",e[4]),At(t,"class","svelte-ltkwvy")},m(o,u){Fi(o,t,u),r||(i=Ia(t,"error",e[14]),r=!0)},p(o,u){u&32&&!oa(t.src,n=o[5])&&At(t,"src",n),u&16&&At(t,"alt",o[4])},d(o){o&&ki(t),r=!1,i()}}}function s3(e){let t,n;return{c(){t=ti("span"),n=jp(e[6]),At(t,"class","secondary svelte-ltkwvy")},m(r,i){Fi(r,t,i),wr(t,n)},p(r,i){i&64&&P1(n,r[6])},d(r){r&&ki(t)}}}function Jse(e){var t,n;let r,i,o,u,l,p,g,x,y=(e[7]?e[0].place_name:e[0].place_name.replace(/,.*/,""))+"",_,T,P=e[2]==="always"||e[2]&&!e[0].address&&((t=e[0].properties)==null?void 0:t.kind)!=="road"&&((n=e[0].properties)==null?void 0:n.kind)!=="road_relation"&&!e[0].id.startsWith("address.")&&!e[0].id.startsWith("postal_code.")&&(!e[0].id.startsWith("poi.")||!e[5])&&!e[7],A,M,k=(e[7]?"":e[0].place_name.replace(/[^,]*,?\s*/,""))+"",R,z,D;function U(J,Y){var X,ee;return Y&1&&(i=null),Y&1&&(o=null),Y&1&&(u=null),J[5]?Yse:J[0].address?Xse:((X=J[0].properties)==null?void 0:X.kind)==="road"||((ee=J[0].properties)==null?void 0:ee.kind)==="road_relation"?Kse:(i==null&&(i=!!J[0].id.startsWith("address.")),i?Wse:(o==null&&(o=!!J[0].id.startsWith("postal_code.")),o?Zse:(u==null&&(u=!!J[0].id.startsWith("poi.")),u?Hse:J[7]?Gse:qse)))}let V=U(e,-1),G=V(e),H=P&&s3(e);return{c(){r=ti("li"),G.c(),l=Ml(),p=ti("span"),g=ti("span"),x=ti("span"),_=jp(y),T=Ml(),H&&H.c(),A=Ml(),M=ti("span"),R=jp(k),At(x,"class","primary svelte-ltkwvy"),At(g,"class","svelte-ltkwvy"),At(M,"class","line2 svelte-ltkwvy"),At(p,"class","texts svelte-ltkwvy"),At(r,"tabindex","0"),At(r,"data-selected",e[1]),At(r,"class","svelte-ltkwvy"),Nu(r,"selected",e[1])},m(J,Y){Fi(J,r,Y),G.m(r,null),wr(r,l),wr(r,p),wr(p,g),wr(g,x),wr(x,_),wr(g,T),H&&H.m(g,null),wr(p,A),wr(p,M),wr(M,R),z||(D=[Ia(r,"mouseenter",e[12]),Ia(r,"focus",e[13])],z=!0)},p(J,[Y]){var X,ee;V===(V=U(J,Y))&&G?G.p(J,Y):(G.d(1),G=V(J),G&&(G.c(),G.m(r,l))),Y&1&&y!==(y=(J[7]?J[0].place_name:J[0].place_name.replace(/,.*/,""))+"")&&P1(_,y),Y&37&&(P=J[2]==="always"||J[2]&&!J[0].address&&((X=J[0].properties)==null?void 0:X.kind)!=="road"&&((ee=J[0].properties)==null?void 0:ee.kind)!=="road_relation"&&!J[0].id.startsWith("address.")&&!J[0].id.startsWith("postal_code.")&&(!J[0].id.startsWith("poi.")||!J[5])&&!J[7]),P?H?H.p(J,Y):(H=s3(J),H.c(),H.m(g,null)):H&&(H.d(1),H=null),Y&1&&k!==(k=(J[7]?"":J[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&P1(R,k),Y&2&&At(r,"data-selected",J[1]),Y&2&&Nu(r,"selected",J[1])},i:Ai,o:Ai,d(J){J&&ki(r),G.d(),H&&H.d(),z=!1,Td(D)}}}function Qse(e,t,n){var r;let i,o,{feature:u}=t,{selected:l=!1}=t,{showPlaceType:p}=t,{missingIconsCache:g}=t,{iconsBaseUrl:x}=t;const y=(r=u.properties)==null?void 0:r.categories;let _,T,P=0,A=u.place_type[0]==="reverse";function M(D){T&&g.add(T),n(10,P++,P)}function k(D){r3.call(this,e,D)}function R(D){r3.call(this,e,D)}const z=D=>M(D.currentTarget);return e.$$set=D=>{"feature"in D&&n(0,u=D.feature),"selected"in D&&n(1,l=D.selected),"showPlaceType"in D&&n(2,p=D.showPlaceType),"missingIconsCache"in D&&n(9,g=D.missingIconsCache),"iconsBaseUrl"in D&&n(3,x=D.iconsBaseUrl)},e.$$.update=()=>{var D,U,V,G;if(e.$$.dirty&3640)do n(11,i--,i),n(4,_=y==null?void 0:y[i]),n(5,T=_?x+_.replace(/ /g,"_")+".svg":void 0);while(i>-1&&(!T||g.has(T)));e.$$.dirty&1&&n(6,o=u.id.startsWith("poi.")?(U=(D=u.properties)==null?void 0:D.categories)==null?void 0:U.join(", "):((G=(V=u.properties)==null?void 0:V.place_type_name)==null?void 0:G[0])??u.place_type[0])},n(11,i=(y==null?void 0:y.length)??0),[u,l,p,x,_,T,o,A,M,g,P,i,k,R,z]}class eae extends am{constructor(t){super(),sm(this,t,Qse,Jse,om,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function tae(e){let t;return{c(){t=ti("div"),t.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',At(t,"class","svelte-7cmwmc")},m(n,r){Fi(n,t,r)},p:Ai,i:Ai,o:Ai,d(n){n&&ki(t)}}}class nae extends am{constructor(t){super(),sm(this,t,null,tae,om,{})}}function rae(e){let t,n,r;return{c(){t=Dc("svg"),n=Dc("path"),At(n,"stroke-width","4"),At(n,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),At(n,"class","svelte-gzo3ar"),At(t,"width",r=e[0]==="list"?20:void 0),At(t,"viewBox","0 0 70 85"),At(t,"fill","none"),At(t,"class","svelte-gzo3ar"),Nu(t,"in-map",e[0]!=="list"),Nu(t,"list-icon",e[0]==="list")},m(i,o){Fi(i,t,o),wr(t,n)},p(i,[o]){o&1&&r!==(r=i[0]==="list"?20:void 0)&&At(t,"width",r),o&1&&Nu(t,"in-map",i[0]!=="list"),o&1&&Nu(t,"list-icon",i[0]==="list")},i:Ai,o:Ai,d(i){i&&ki(t)}}}function iae(e,t,n){let{displayIn:r}=t;return e.$$set=i=>{"displayIn"in i&&n(0,r=i.displayIn)},[r]}class oae extends am{constructor(t){super(),sm(this,t,iae,rae,om,{displayIn:0})}}function sae(e){let t,n;return{c(){t=Dc("svg"),n=Dc("path"),At(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),At(t,"viewBox","0 0 60.006 21.412"),At(t,"width","14"),At(t,"height","20"),At(t,"class","svelte-en2qvf")},m(r,i){Fi(r,t,i),wr(t,n)},p:Ai,i:Ai,o:Ai,d(r){r&&ki(t)}}}class aae extends am{constructor(t){super(),sm(this,t,null,sae,om,{})}}function lae(e){let t,n,r;return{c(){t=Dc("svg"),n=Dc("circle"),r=Dc("path"),At(n,"cx","4.789"),At(n,"cy","4.787"),At(n,"r","3.85"),Db(n,"stroke-width","1.875"),Db(n,"fill","none"),At(r,"d","M12.063 12.063 7.635 7.635"),Db(r,"stroke-width","1.875"),Db(r,"stroke-linecap","round"),At(t,"xmlns","http://www.w3.org/2000/svg"),At(t,"width","13"),At(t,"height","13"),At(t,"viewBox","0 0 13 13"),At(t,"class","svelte-1bpbt60")},m(i,o){Fi(i,t,o),wr(t,n),wr(t,r)},p:Ai,i:Ai,o:Ai,d(i){i&&ki(t)}}}class uae extends am{constructor(t){super(),sm(this,t,null,lae,om,{})}}function cae(e,t,n){const r=t[1],i=t[0],o=r-i;return e===r&&n?e:((e-i)%o+o)%o+i}function a3(e){const t=[...e];return t[2]<t[0]&&(t[2]+=360),t}let f0;async function hae(e,t,n){const r=e==null?void 0:e.getCenterAndZoom();for(const i of t??[])if(!(r&&(i.minZoom!=null&&i.minZoom>r[0]||i.maxZoom!=null&&i.maxZoom<r[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(f0&&i.cachedLocationExpiry&&f0.time+i.cachedLocationExpiry>Date.now()){if(!f0.coords)break e;return f0.coords}let o;try{return o=await new Promise((u,l)=>{n.signal.addEventListener("abort",()=>{l(Error("aborted"))}),navigator.geolocation.getCurrentPosition(p=>{u([p.coords.longitude,p.coords.latitude].map(g=>g.toFixed(6)).join(","))},p=>{l(p)},i)}),o}catch{}finally{i.cachedLocationExpiry&&(f0={time:Date.now(),coords:o})}if(n.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(r&&i.type==="map-center")return r[1].toFixed(6)+","+r[2].toFixed(6)}}const l3=/(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(EAST|WEST|[EW])?/i,u3=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?/i,c3=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?/i,h3=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(EAST|WEST|[EW])?/i;function fae(e){if(!["DMS","DM","DD"].includes(e))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){if(e=="DD")return this.decimalCoordinates;const t=this.decimalCoordinates.split(",").map(u=>Number(u.trim()));let n=f3(t[0],e),r=f3(t[1],e);n.endsWith('.0"')&&r.endsWith('.0"')&&(n=n.replace(/\.0"$/,'"'),r=r.replace(/\.0"$/,'"'));const i=t[0]>=0?" N":" S",o=t[1]>=0?" E":" W";return`${n+i}, ${r+o}`}else throw new Error("no decimal coordinates to convert")}function f3(e,t){const n=Math.abs(e),r=Math.floor(n),i=(n-r)*60;if(t=="DM"){let l=dae(i,3).toFixed(3).padStart(6,"0");return`${r} ${l}'`}let o=Math.floor(i),u=((i-o)*60).toFixed(1).padStart(4,"0");return o=o.toString().padStart(2,"0"),`${r} ${o}' ${u}"`}function dae(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}function tO(e,t){t||(t=5),e=e.replace(/\s+/g," ").trim();let n=null,r=null,i="",o="",u=[],l=!1;if(l3.test(e))if(u=l3.exec(e),l=zb(u),l){if(n=u[2],r=u[6],n.includes(",")&&(n=n.replace(",",".")),r.includes(",")&&(r=r.replace(",",".")),Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(r))==Number(r))throw new Error("integer only coordinate provided");u[1]?(i=u[1],o=u[5]):u[4]&&(i=u[4],o=u[8])}else throw new Error("invalid decimal coordinate format");else if(u3.test(e))if(u=u3.exec(e),l=zb(u),l)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4]/60),u[6]&&(n+=u[6].replace(",",".")/3600),parseInt(u[2])<0&&(n=-1*n),r=Math.abs(parseInt(u[9])),u[11]&&(r+=u[11]/60),u[13]&&(r+=u[13].replace(",",".")/3600),parseInt(u[9])<0&&(r=-1*r),u[1]?(i=u[1],o=u[8]):u[7]&&(i=u[7],o=u[14]);else throw new Error("invalid DMS coordinates format");else if(c3.test(e))if(u=c3.exec(e),l=zb(u),l)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4]/60),u[6]&&(n+=u[6]/3600),parseInt(u[2])<0&&(n=-1*n),r=Math.abs(parseInt(u[10])),u[12]&&(r+=u[12]/60),u[14]&&(r+=u[14]/3600),parseInt(u[10])<0&&(r=-1*r),u[1]?(i=u[1],o=u[9]):u[8]&&(i=u[8],o=u[16]);else throw new Error("invalid DMS coordinates format");else if(h3.test(e))if(u=h3.exec(e),l=zb(u),l)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4]/60),u[6]&&(n+=u[6]/3600),parseInt(u[2])<0&&(n=-1*n),r=Math.abs(parseInt(u[10])),u[12]&&(r+=u[12]/60),u[14]&&(r+=u[14]/3600),parseInt(u[10])<0&&(r=-1*r),u[1]?(i=u[1],o=u[9]):u[8]&&(i=u[8],o=u[16]);else throw new Error("invalid coordinates format");if(l){if(Math.abs(r)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if((i||o)&&(!i||!o))throw new Error("invalid coordinates format");if(i&&i==o)throw new Error("invalid coordinates format");let p=/S|SOUTH/i;p.test(i)&&n>0&&(n=-1*n),p=/W|WEST/i,p.test(o)&&r>0&&(r=-1*r);const g=u[0].trim();let x,y;const _=/[,/;\u0020]/g,T=g.match(_);if(T==null){const M=Math.floor(e.length/2);x=g.substring(0,M).trim(),y=g.substring(M).trim()}else{let M;T.length%2==1?M=Math.floor(T.length/2):M=T.length/2-1;let k=0;if(M==0)k=g.indexOf(T[0]),x=g.substring(0,k).trim(),y=g.substring(k+1).trim();else{let R=0,z=0;for(;R<=M;)k=g.indexOf(T[R],z),z=k+1,R++;x=g.substring(0,k).trim(),y=g.substring(k+1).trim()}}const P=x.split(".");if(P.length==2&&P[1]==0&&P[1].length!=2)throw new Error("invalid coordinates format");const A=y.split(".");if(A.length==2&&A[1]==0&&A[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(x)||/^\d+$/.test(y))throw new Error("degree only coordinate/s provided");return isNaN(n)&&n.includes(",")&&(n=n.replace(",",".")),n=Number(Number(n).toFixed(t)),isNaN(r)&&r.includes(",")&&(r=r.replace(",",".")),r=Number(Number(r).toFixed(t)),Object.freeze({verbatimCoordinates:g,verbatimLatitude:x,verbatimLongitude:y,decimalLatitude:n,decimalLongitude:r,decimalCoordinates:`${n},${r}`,closeEnough:pae,toCoordinateFormat:fae})}else throw new Error("coordinates pattern match failed")}function zb(e){if(!isNaN(e[0]))return!1;const t=[...e];if(t.shift(),t.length%2>0)return!1;const n=/^[-+]?\d+([\.,]\d+)?$/,r=/[eastsouthnorthwest]+/i,i=t.length/2;for(let o=0;o<i;o++){const u=t[o],l=t[o+i],p=n.test(u)&&n.test(l),g=r.test(u)&&r.test(l),x=u==l;if(!(u==null&&l==null)){if(u==null||l==null)return!1;if(p||g||x)continue;return!1}}return!0}function d3(e,t){const n=Math.abs(e-t);return Number(n.toFixed(6))<=1e-5}function pae(e){if(e.includes(",")){const t=e.split(",");if(Number(t[0])==NaN||Number(t[1])==NaN)throw new Error("coords are not valid decimals");return d3(this.decimalLatitude,Number(t[0]))&&d3(this.decimalLongitude,t[1])}else throw new Error("coords being tested must be separated by a comma")}const mae=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});tO.to=mae;const gae=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:'40 7 22.8" N 74 7 22.8" W',verbatimLatitude:'40 7 22.8" N',verbatimLongitude:'74 7 22.8" W'},{verbatimCoordinates:"40 7.38 , -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"N40722.8, W74722.8",verbatimLatitude:"N40722.8",verbatimLongitude:"W74722.8"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:`407'22.8"N, 747'22.8"W`,verbatimLatitude:`407'22.8"N`,verbatimLongitude:`747'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123,-74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40723"N 74723"W',verbatimLatitude:'40723"N',verbatimLongitude:'74723"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40723"S 74723"E',verbatimLatitude:'40723"S',verbatimLongitude:'74723"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40723" -74723"',verbatimLatitude:'40723"',verbatimLongitude:'-74723"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7 23" N 74d 7 23" W',verbatimLatitude:'40d 7 23" N',verbatimLongitude:'74d 7 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],yae={decimalLatitude:40.123,decimalLongitude:-74.123},_ae=[{verbatimCoordinates:`504'17.698"south, 1424'2.826"east`,verbatimLatitude:`504'17.698"south`,verbatimLongitude:`1424'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"402647N 795836W",verbatimLatitude:"402647N",verbatimLongitude:"795836W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26 47 N 79d 58 36 W",verbatimLatitude:"40d 26 47 N",verbatimLongitude:"79d 58 36 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195 79,948862",verbatimLatitude:"40,446195",verbatimLongitude:"79,948862",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40 26.7717, -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"1824S 2245E",verbatimLatitude:"1824S",verbatimLongitude:"2245E",decimalLatitude:-18.4,decimalLongitude:22.75}],vae=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245 S / 28.2344 E",verbatimLatitude:"-23.3245 S",verbatimLongitude:"28.2344 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40 26.7717 -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563   E22.45634 ",verbatimLatitude:"S23.43563 ",verbatimLongitude:"E22.45634 ",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372 S 23,07771 E",verbatimLatitude:"27,71372 S",verbatimLongitude:"23,07771 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222}];function xae(){const e=[];return gae.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...yae})}),[...e,..._ae,...vae]}const bae=xae();tO.formats=bae.map(e=>e.verbatimCoordinates);const wae=tO;function p3(e,t,n){const r=e.slice();return r[81]=t[n],r[83]=n,r}function m3(e){let t,n;return t=new nae({}),{c(){$p(t.$$.fragment)},m(r,i){cd(t,r,i),n=!0},i(r){n||(xo(t.$$.fragment,r),n=!0)},o(r){es(t.$$.fragment,r),n=!1},d(r){hd(t,r)}}}function g3(e){let t,n,r,i,o;return n=new aae({}),{c(){t=ti("button"),$p(n.$$.fragment),At(t,"type","button"),At(t,"title",e[9]),At(t,"class","svelte-zh3kmv"),Nu(t,"active",e[0])},m(u,l){Fi(u,t,l),cd(n,t,null),r=!0,i||(o=Ia(t,"click",e[67]),i=!0)},p(u,l){(!r||l[0]&512)&&At(t,"title",u[9]),(!r||l[0]&1)&&Nu(t,"active",u[0])},i(u){r||(xo(n.$$.fragment,u),r=!0)},o(u){es(n.$$.fragment,u),r=!1},d(u){u&&ki(t),hd(n),i=!1,o()}}}function Eae(e){let t,n=[],r=new Map,i,o,u,l=o3(e[14]);const p=g=>g[81].id+(g[81].address?","+g[81].address:"");for(let g=0;g<l.length;g+=1){let x=p3(e,l,g),y=p(x);r.set(y,n[g]=y3(y,x))}return{c(){t=ti("ul");for(let g=0;g<n.length;g+=1)n[g].c();At(t,"class","svelte-zh3kmv")},m(g,x){Fi(g,t,x);for(let y=0;y<n.length;y+=1)n[y]&&n[y].m(t,null);i=!0,o||(u=[Ia(t,"mouseleave",e[71]),Ia(t,"blur",e[72])],o=!0)},p(g,x){x[0]&17880064&&(l=o3(g[14]),xw(),n=Bse(n,x,p,1,g,l,r,t,Fse,y3,null,p3),bw())},i(g){if(!i){for(let x=0;x<l.length;x+=1)xo(n[x]);i=!0}},o(g){for(let x=0;x<n.length;x+=1)es(n[x]);i=!1},d(g){g&&ki(t);for(let x=0;x<n.length;x+=1)n[x].d();o=!1,Td(u)}}}function Sae(e){let t,n,r,i,o,u;return n=new s$({}),{c(){t=ti("div"),$p(n.$$.fragment),r=Ml(),i=ti("div"),o=jp(e[7]),At(i,"class","svelte-zh3kmv"),At(t,"class","no-results svelte-zh3kmv")},m(l,p){Fi(l,t,p),cd(n,t,null),wr(t,r),wr(t,i),wr(i,o),u=!0},p(l,p){(!u||p[0]&128)&&P1(o,l[7])},i(l){u||(xo(n.$$.fragment,l),u=!0)},o(l){es(n.$$.fragment,l),u=!1},d(l){l&&ki(t),hd(n)}}}function Tae(e){let t="",n;return{c(){n=jp(t)},m(r,i){Fi(r,n,i)},p:Ai,i:Ai,o:Ai,d(r){r&&ki(n)}}}function Cae(e){let t,n,r,i,o,u,l,p,g,x,y;return n=new s$({}),p=new o$({}),{c(){t=ti("div"),$p(n.$$.fragment),r=Ml(),i=ti("div"),o=jp(e[6]),u=Ml(),l=ti("button"),$p(p.$$.fragment),At(i,"class","svelte-zh3kmv"),At(l,"class","svelte-zh3kmv"),At(t,"class","error svelte-zh3kmv")},m(_,T){Fi(_,t,T),cd(n,t,null),wr(t,r),wr(t,i),wr(i,o),wr(t,u),wr(t,l),cd(p,l,null),g=!0,x||(y=Ia(l,"click",e[68]),x=!0)},p(_,T){(!g||T[0]&64)&&P1(o,_[6])},i(_){g||(xo(n.$$.fragment,_),xo(p.$$.fragment,_),g=!0)},o(_){es(n.$$.fragment,_),es(p.$$.fragment,_),g=!1},d(_){_&&ki(t),hd(n),hd(p),x=!1,y()}}}function y3(e,t){let n,r,i;function o(){return t[69](t[83])}function u(){return t[70](t[81])}return r=new eae({props:{feature:t[81],showPlaceType:t[10],selected:t[15]===t[83],missingIconsCache:t[20],iconsBaseUrl:t[12]}}),r.$on("mouseenter",o),r.$on("focus",u),{key:e,first:null,c(){n=Pse(),$p(r.$$.fragment),this.first=n},m(l,p){Fi(l,n,p),cd(r,l,p),i=!0},p(l,p){t=l;const g={};p[0]&16384&&(g.feature=t[81]),p[0]&1024&&(g.showPlaceType=t[10]),p[0]&49152&&(g.selected=t[15]===t[83]),p[0]&4096&&(g.iconsBaseUrl=t[12]),r.$set(g)},i(l){i||(xo(r.$$.fragment,l),i=!0)},o(l){es(r.$$.fragment,l),i=!1},d(l){l&&ki(n),hd(r,l)}}}function Iae(e){let t,n,r,i,o,u,l,p,g,x,y,_,T,P,A,M,k,R,z,D,U,V=!1;o=new uae({}),y=new o$({});let G=e[19]&&m3(),H=e[5]===!0&&g3(e);const J=e[59].default,Y=Sse(J,e,e[58],null),X=[Cae,Tae,Sae,Eae],ee=[];function ce(oe,we){var Ne,Be;return oe[18]?0:oe[16]?((Ne=oe[14])==null?void 0:Ne.length)===0?2:oe[16]&&(Be=oe[14])!=null&&Be.length?3:-1:1}return~(M=ce(e))&&(k=ee[M]=X[M](e)),{c(){t=Ml(),n=ti("form"),r=ti("div"),i=ti("button"),$p(o.$$.fragment),u=Ml(),l=ti("input"),p=Ml(),g=ti("div"),x=ti("button"),$p(y.$$.fragment),_=Ml(),G&&G.c(),T=Ml(),H&&H.c(),P=Ml(),Y&&Y.c(),A=Ml(),k&&k.c(),At(i,"class","search-button svelte-zh3kmv"),At(i,"type","button"),At(l,"placeholder",e[8]),At(l,"aria-label",e[8]),At(l,"class","svelte-zh3kmv"),At(x,"type","button"),At(x,"title",e[3]),At(x,"class","svelte-zh3kmv"),At(g,"class","clear-button-container svelte-zh3kmv"),Nu(g,"displayable",e[1]!==""),At(r,"class","input-group svelte-zh3kmv"),At(n,"tabindex","0"),At(n,"class",R=t3(e[2])+" svelte-zh3kmv"),Nu(n,"can-collapse",e[4]&&e[1]==="")},m(oe,we){Fi(oe,t,we),Fi(oe,n,we),wr(n,r),wr(r,i),cd(o,i,null),wr(r,u),wr(r,l),e[61](l),n3(l,e[1]),wr(r,p),wr(r,g),wr(g,x),cd(y,x,null),wr(g,_),G&&G.m(g,null),wr(r,T),H&&H.m(r,null),wr(r,P),Y&&Y.m(r,null),wr(n,A),~M&&ee[M].m(n,null),z=!0,D||(U=[Ia(i,"click",e[60]),Ia(l,"input",e[62]),Ia(l,"focus",e[63]),Ia(l,"blur",e[64]),Ia(l,"keydown",e[22]),Ia(l,"input",e[65]),Ia(x,"click",e[66]),Ia(n,"submit",Lse(e[21]))],D=!0)},p(oe,we){(!z||we[0]&256)&&At(l,"placeholder",oe[8]),(!z||we[0]&256)&&At(l,"aria-label",oe[8]),we[0]&2&&l.value!==oe[1]&&n3(l,oe[1]),(!z||we[0]&8)&&At(x,"title",oe[3]),oe[19]?G?we[0]&524288&&xo(G,1):(G=m3(),G.c(),xo(G,1),G.m(g,null)):G&&(xw(),es(G,1,1,()=>{G=null}),bw()),(!z||we[0]&2)&&Nu(g,"displayable",oe[1]!==""),oe[5]===!0?H?(H.p(oe,we),we[0]&32&&xo(H,1)):(H=g3(oe),H.c(),xo(H,1),H.m(r,P)):H&&(xw(),es(H,1,1,()=>{H=null}),bw()),Y&&Y.p&&(!z||we[1]&134217728)&&Cse(Y,J,oe,oe[58],z?Tse(J,oe[58],we,null):Ise(oe[58]),null);let Ne=M;M=ce(oe),M===Ne?~M&&ee[M].p(oe,we):(k&&(xw(),es(ee[Ne],1,1,()=>{ee[Ne]=null}),bw()),~M?(k=ee[M],k?k.p(oe,we):(k=ee[M]=X[M](oe),k.c()),xo(k,1),k.m(n,null)):k=null),(!z||we[0]&4&&R!==(R=t3(oe[2])+" svelte-zh3kmv"))&&At(n,"class",R),(!z||we[0]&22)&&Nu(n,"can-collapse",oe[4]&&oe[1]==="")},i(oe){z||(xo(V),xo(o.$$.fragment,oe),xo(y.$$.fragment,oe),xo(G),xo(H),xo(Y,oe),xo(k),z=!0)},o(oe){es(V),es(o.$$.fragment,oe),es(y.$$.fragment,oe),es(G),es(H),es(Y,oe),es(k),z=!1},d(oe){oe&&(ki(t),ki(n)),hd(o),e[61](null),hd(y),G&&G.d(),H&&H.d(),Y&&Y.d(oe),~M&&ee[M].d(),D=!1,Td(U)}}}function Pae(e,t,n){let r,{$$slots:i={},$$scope:o}=t,{class:u=void 0}=t,{apiKey:l}=t,{bbox:p=void 0}=t,{clearButtonTitle:g="clear"}=t,{clearOnBlur:x=!1}=t,{collapsed:y=!1}=t,{country:_=void 0}=t,{debounceSearch:T=200}=t,{enableReverse:P=!1}=t,{errorMessage:A="Something went wrong"}=t,{filter:M=()=>!0}=t,{flyTo:k=!0}=t,{fuzzyMatch:R=!0}=t,{language:z=void 0}=t,{limit:D=void 0}=t,{mapController:U=void 0}=t,{minLength:V=2}=t,{noResultsMessage:G="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=t,{placeholder:H="Search"}=t,{proximity:J=[{type:"server-geolocation"}]}=t,{reverseActive:Y=P==="always"}=t,{reverseButtonTitle:X="toggle reverse geocoding"}=t,{searchValue:ee=""}=t,{showFullGeometry:ce=!0}=t,{showPlaceType:oe="ifNeeded"}=t,{showResultsWhileTyping:we=!0}=t,{selectFirst:Ne=!0}=t,{flyToSelected:Be=!1}=t,{markerOnSelected:De=!0}=t,{types:Ae=void 0}=t,{excludeTypes:ve=!1}=t,{zoom:he=16}=t,{maxZoom:xe=18}=t,{apiUrl:Ee="https://api.maptiler.com/geocoding"}=t,{fetchParameters:Ge={}}=t,{iconsBaseUrl:$e="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.2/icons/"}=t,{adjustUrlQuery:be=ge=>{}}=t;function He(){rt.focus()}function it(){rt.blur()}function ct(ge,ze=!0){n(1,ee=ge),ze?(n(15,lt=-1),wn()):(Xr(),setTimeout(()=>{rt.focus(),rt.select()}))}function xt(){n(14,Ft=void 0),n(55,Gt=void 0),n(15,lt=-1)}function Dt(){n(54,Kt=[]),n(55,Gt=void 0)}let Qt=!1,Ft,Kt,Gt,Tr="",rt,lt=-1,gt,_t=[],Pt,je,vt,St;const Lt=new Set,en=Rse();kse(()=>{U&&(U.setEventHandler(void 0),U.indicateReverse(!1),U.setSelectedMarker(-1),U.setMarkers(void 0,void 0))});function wn(ge){if(je&&(clearTimeout(je),je=void 0),lt>-1&&Ft)n(55,Gt=Ft[lt]),n(1,ee=Gt.place_type[0]==="reverse"?Gt.place_name:Gt.place_name.replace(/,.*/,"")),n(18,gt=void 0),n(54,Kt=void 0),n(15,lt=-1);else if(ee){const ze=ge||!gn(ee);bt(ee,{exact:!0}).then(()=>{n(54,Kt=Ft),n(55,Gt=void 0),ze&&Vn()}).catch(Ie=>n(18,gt=Ie))}}function gn(ge){try{return wae(ge,6)}catch{return!1}}async function bt(ge,{byId:ze=!1,exact:Ie=!1}={}){n(18,gt=void 0),Pt==null||Pt.abort();const qe=new AbortController;n(19,Pt=qe);try{const Qe=gn(ge),ot=new URLSearchParams;if(z!==void 0&&ot.set("language",Array.isArray(z)?z.join(","):z??""),Ae&&ot.set("types",Ae.join(",")),ve&&ot.set("excludeTypes",String(ve)),p&&ot.set("bbox",p.map(an=>an.toFixed(6)).join(",")),_&&ot.set("country",Array.isArray(_)?_.join(","):_),!ze&&!Qe){const an=await hae(U,J,qe);an&&ot.set("proximity",an),(Ie||!we)&&ot.set("autocomplete","false"),ot.set("fuzzyMatch",String(R))}D!==void 0&&(!Qe||(Ae==null?void 0:Ae.length)===1)&&ot.set("limit",String(D)),ot.set("key",l),be(ot);const et=Ee+"/"+encodeURIComponent(Qe?Qe.decimalLongitude+","+Qe.decimalLatitude:ge)+".json?"+ot.toString();if(et===Tr){ze?(n(14,Ft=void 0),n(55,Gt=_t[0])):n(14,Ft=_t);return}Tr=et;const ht=await fetch(et,{signal:qe.signal,...Ge});if(!ht.ok)throw new Error(await ht.text());const Zt=await ht.json();en("response",{url:et,featureCollection:Zt}),ze?(n(14,Ft=void 0),n(55,Gt=Zt.features[0]),_t=[Gt]):(n(14,Ft=Zt.features.filter(M)),Qe&&Ft.unshift({type:"Feature",properties:{},id:"reverse_"+Qe.decimalLongitude+"_"+Qe.decimalLatitude,text:Qe.decimalLatitude+", "+Qe.decimalLongitude,place_name:Qe.decimalLatitude+", "+Qe.decimalLongitude,place_type:["reverse"],center:[Qe.decimalLongitude,Qe.decimalLatitude],bbox:[Qe.decimalLongitude,Qe.decimalLatitude,Qe.decimalLongitude,Qe.decimalLatitude],geometry:{type:"Point",coordinates:[Qe.decimalLongitude,Qe.decimalLatitude]}}),_t=Ft,Qe&&rt.focus())}catch(Qe){if(Qe&&typeof Qe=="object"&&"name"in Qe&&Qe.name==="AbortError")return;throw Qe}finally{qe===Pt&&n(19,Pt=void 0)}}function Vn(){var ge;if(!(Kt!=null&&Kt.length)||!k)return;const ze=[180,90,-180,-90],Ie=!Kt.some(qe=>!qe.matching_text);for(const qe of Kt)if(Ie||!qe.matching_text)for(const Qe of[0,1,2,3])ze[Qe]=Math[Qe<2?"min":"max"](ze[Qe],((ge=qe.bbox)==null?void 0:ge[Qe])??qe.center[Qe%2]);U&&Kt.length>0&&(Gt&&ze[0]===ze[2]&&ze[1]===ze[3]?U.flyTo(Gt.center,he):U.fitBounds(a3(ze),50,xe))}function _r(ge){n(0,Y=P==="always"),n(14,Ft=void 0),n(55,Gt=void 0),n(15,lt=-1),ct(ge[1].toFixed(6)+", "+cae(ge[0],[-180,180],!0).toFixed(6),!1)}function Gs(ge){if(!Ft)return;let ze=ge.key==="ArrowDown"?1:ge.key==="ArrowUp"?-1:0;ze&&(lt===(Ne?0:-1)&&ze===-1&&n(15,lt=Ft.length),n(15,lt+=ze),lt>=Ft.length&&n(15,lt=-1),lt<0&&Ne&&n(15,lt=0),ge.preventDefault())}function Xr(ge=!0){if(n(18,gt=void 0),we){if(je&&clearTimeout(je),ee.length<V)return;const ze=ee;je=window.setTimeout(()=>{bt(ze).catch(Ie=>n(18,gt=Ie))},ge?T:0)}else n(14,Ft=void 0),n(18,gt=void 0)}function kt(ge){n(55,Gt=ge),n(1,ee=ge.place_name),n(15,lt=-1)}const _n=()=>rt.focus();function Pn(ge){wP[ge?"unshift":"push"](()=>{rt=ge,n(17,rt)})}function Cr(){ee=this.value,n(1,ee),n(13,Qt),n(27,x)}const Zo=()=>n(13,Qt=!0),Tn=()=>n(13,Qt=!1),Hs=()=>Xr(),qr=()=>{n(1,ee=""),rt.focus()},Oe=()=>n(0,Y=!Y),K=()=>n(18,gt=void 0),te=ge=>n(15,lt=ge),le=ge=>kt(ge),pe=()=>{Ne||n(15,lt=-1)},ke=()=>{};return e.$$set=ge=>{"class"in ge&&n(2,u=ge.class),"apiKey"in ge&&n(25,l=ge.apiKey),"bbox"in ge&&n(26,p=ge.bbox),"clearButtonTitle"in ge&&n(3,g=ge.clearButtonTitle),"clearOnBlur"in ge&&n(27,x=ge.clearOnBlur),"collapsed"in ge&&n(4,y=ge.collapsed),"country"in ge&&n(28,_=ge.country),"debounceSearch"in ge&&n(29,T=ge.debounceSearch),"enableReverse"in ge&&n(5,P=ge.enableReverse),"errorMessage"in ge&&n(6,A=ge.errorMessage),"filter"in ge&&n(30,M=ge.filter),"flyTo"in ge&&n(31,k=ge.flyTo),"fuzzyMatch"in ge&&n(32,R=ge.fuzzyMatch),"language"in ge&&n(33,z=ge.language),"limit"in ge&&n(34,D=ge.limit),"mapController"in ge&&n(35,U=ge.mapController),"minLength"in ge&&n(36,V=ge.minLength),"noResultsMessage"in ge&&n(7,G=ge.noResultsMessage),"placeholder"in ge&&n(8,H=ge.placeholder),"proximity"in ge&&n(37,J=ge.proximity),"reverseActive"in ge&&n(0,Y=ge.reverseActive),"reverseButtonTitle"in ge&&n(9,X=ge.reverseButtonTitle),"searchValue"in ge&&n(1,ee=ge.searchValue),"showFullGeometry"in ge&&n(38,ce=ge.showFullGeometry),"showPlaceType"in ge&&n(10,oe=ge.showPlaceType),"showResultsWhileTyping"in ge&&n(39,we=ge.showResultsWhileTyping),"selectFirst"in ge&&n(11,Ne=ge.selectFirst),"flyToSelected"in ge&&n(40,Be=ge.flyToSelected),"markerOnSelected"in ge&&n(41,De=ge.markerOnSelected),"types"in ge&&n(42,Ae=ge.types),"excludeTypes"in ge&&n(43,ve=ge.excludeTypes),"zoom"in ge&&n(44,he=ge.zoom),"maxZoom"in ge&&n(45,xe=ge.maxZoom),"apiUrl"in ge&&n(46,Ee=ge.apiUrl),"fetchParameters"in ge&&n(47,Ge=ge.fetchParameters),"iconsBaseUrl"in ge&&n(12,$e=ge.iconsBaseUrl),"adjustUrlQuery"in ge&&n(48,be=ge.adjustUrlQuery),"$$scope"in ge&&n(58,o=ge.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&134225920&&setTimeout(()=>{n(16,vt=Qt),x&&!Qt&&n(1,ee="")}),e.$$.dirty[0]&16386|e.$$.dirty[1]&32&&ee.length<V&&(n(55,Gt=void 0),n(14,Ft=void 0),n(18,gt=void 0),n(54,Kt=Ft)),e.$$.dirty[1]&16777344&&ce&&Gt&&!Gt.address&&Gt.geometry.type==="Point"&&Gt.place_type[0]!=="reverse"&&bt(Gt.id,{byId:!0}).catch(ge=>n(18,gt=ge)),e.$$.dirty[1]&50356241&&(U&&Gt&&Gt.id!==St&&k&&(!Gt.bbox||Gt.bbox[0]===Gt.bbox[2]&&Gt.bbox[1]===Gt.bbox[3]?U.flyTo(Gt.center,Gt.id.startsWith("poi.")||Gt.id.startsWith("address.")?xe:he):U.fitBounds(a3(Gt.bbox),50,xe),n(14,Ft=void 0),n(54,Kt=void 0),n(15,lt=-1)),n(56,St=Gt==null?void 0:Gt.id)),e.$$.dirty[0]&18432&&Ne&&Ft!=null&&Ft.length&&n(15,lt=0),e.$$.dirty[0]&2050&&(Ne||n(15,lt=-1)),e.$$.dirty[0]&16384|e.$$.dirty[1]&8388608&&Kt!==Ft&&n(54,Kt=void 0),e.$$.dirty[0]&81921|e.$$.dirty[1]&8388624&&U&&U.setEventHandler(ge=>{switch(ge.type){case"mapClick":Y&&_r(ge.coordinates);break;case"markerClick":{const ze=Ft==null?void 0:Ft.find(Ie=>Ie.id===ge.id);ze&&kt(ze)}break;case"markerMouseEnter":Kt&&n(15,lt=vt?(Ft==null?void 0:Ft.findIndex(ze=>ze.id===ge.id))??-1:-1);break;case"markerMouseLeave":Kt&&n(15,lt=-1);break}}),e.$$.dirty[0]&49152&&n(57,r=Ft==null?void 0:Ft[lt]),e.$$.dirty[1]&67133969&&U&&r&&k&&Be&&U.flyTo(r.center,r.id.startsWith("poi.")||r.id.startsWith("address.")?xe:he),e.$$.dirty[1]&1040&&(De||U==null||U.setMarkers(void 0,void 0)),e.$$.dirty[1]&75498512&&U&&De&&!Kt&&(U.setMarkers(r?[r]:void 0,void 0),U.setSelectedMarker(r?0:-1)),e.$$.dirty[1]&25165840&&U&&U.setMarkers(Kt,Gt),e.$$.dirty[0]&32768|e.$$.dirty[1]&8388624&&Kt&&U&&U.setSelectedMarker(lt),e.$$.dirty[0]&2|e.$$.dirty[1]&16&&U){const ge=gn(ee);U.setReverseMarker(ge?[ge.decimalLongitude,ge.decimalLatitude]:void 0)}e.$$.dirty[1]&67108864&&en("select",r),e.$$.dirty[1]&16777216&&en("pick",Gt),e.$$.dirty[0]&81920&&en("optionsVisibilityChange",vt&&!!Ft),e.$$.dirty[0]&16384&&en("featuresListed",Ft),e.$$.dirty[1]&8388608&&en("featuresMarked",Kt),e.$$.dirty[0]&1&&en("reverseToggle",Y),e.$$.dirty[0]&2&&en("queryChange",ee),e.$$.dirty[0]&1|e.$$.dirty[1]&16&&U&&U.indicateReverse(Y)},[Y,ee,u,g,y,P,A,G,H,X,oe,Ne,$e,Qt,Ft,lt,vt,rt,gt,Pt,Lt,wn,Gs,Xr,kt,l,p,x,_,T,M,k,R,z,D,U,V,J,ce,we,Be,De,Ae,ve,he,xe,Ee,Ge,be,He,it,ct,xt,Dt,Kt,Gt,St,r,o,i,_n,Pn,Cr,Zo,Tn,Hs,qr,Oe,K,te,le,pe,ke]}let Lae=class extends am{constructor(e){super(),sm(this,e,Pae,Iae,om,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}};/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Aae(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(g){return function(x){return p([g,x])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(x){g=[6,x],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var Up=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function Oae(e,t){return e>t?1:e<t?-1:0}function cp(e,t,n){for(var r=new Up(null,null),i=r,o=r;;){var u=n(e,t.key);if(u<0){if(t.left===null)break;if(n(e,t.left.key)<0){var l=t.left;if(t.left=l.right,l.right=t,t=l,t.left===null)break}o.left=t,o=t,t=t.left}else if(u>0){if(t.right===null)break;if(n(e,t.right.key)>0){var l=t.right;if(t.right=l.left,l.left=t,t=l,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=r.right,t.right=r.left,t}function Q2(e,t,n,r){var i=new Up(e,t);if(n===null)return i.left=i.right=null,i;n=cp(e,n,r);var o=r(e,n.key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function _3(e,t,n){var r=null,i=null;if(t){t=cp(e,t,n);var o=n(t.key,e);o===0?(r=t.left,i=t.right):o<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function kae(e,t,n){return t===null?e:(e===null||(t=cp(e.key,t,n),t.left=e),t)}function TP(e,t,n,r,i){if(e){r(""+t+(n?" ":" ")+i(e)+`
`);var o=t+(n?"    ":"   ");e.left&&TP(e.left,o,!1,r,i),e.right&&TP(e.right,o,!0,r,i)}}var nO=function(){function e(t){t===void 0&&(t=Oae),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=Q2(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new Up(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,o=cp(t,this._root,i),u=i(t,o.key);return u===0?this._root=o:(u<0?(r.left=o.left,r.right=o,o.left=null):u>0&&(r.right=o.right,r.left=o,o.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var i;if(n===null)return null;n=cp(t,n,r);var o=r(t,n.key);return o===0?(n.left===null?i=n.right:(i=cp(t,n.left,r),i.right=n.right),this._size--,i):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=cp(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=cp(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,i=[],o=!1;!o;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),t.call(n,r),r=r.right):o=!0;return this},e.prototype.range=function(t,n,r,i){for(var o=[],u=this._comparator,l=this._root,p;o.length!==0||l;)if(l)o.push(l),l=l.left;else{if(l=o.pop(),p=u(l.key,n),p>0)break;if(u(l.key,t)>=0&&r.call(i,l))return this;l=l.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,i=0,o=[];!r;)if(n)o.push(n),n=n.left;else if(o.length>0){if(n=o.pop(),i===t)return n;i++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return Mae(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=t.length,o=this._comparator;if(r&&PP(t,n,0,i-1,o),this._root===null)this._root=CP(t,n,0,i),this._size=i;else{var u=Nae(this.toList(),Rae(t,n),o);i=this._size+i,this._root=IP({head:u},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return TP(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var i=this._comparator,o=_3(t,this._root,i),u=o.left,l=o.right;i(t,n)<0?l=Q2(n,r,l,i):u=Q2(n,r,u,i),this._root=kae(u,l,i)},e.prototype.split=function(t){return _3(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,r;return Aae(this,function(i){switch(i.label){case 0:t=this._root,n=[],r=!1,i.label=1;case 1:return r?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:r=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function CP(e,t,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),u=e[o],l=t[o],p=new Up(u,l);return p.left=CP(e,t,n,o),p.right=CP(e,t,o+1,r),p}return null}function Rae(e,t){for(var n=new Up(null,null),r=n,i=0;i<e.length;i++)r=r.next=new Up(e[i],t[i]);return r.next=null,n.next}function Mae(e){for(var t=e,n=[],r=!1,i=new Up(null,null),o=i;!r;)t?(n.push(t),t=t.left):n.length>0?(t=o=o.next=n.pop(),t=t.right):r=!0;return o.next=null,i.next}function IP(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),o=IP(e,t,i),u=e.head;return u.left=o,e.head=e.head.next,u.right=IP(e,i+1,n),u}return null}function Nae(e,t,n){for(var r=new Up(null,null),i=r,o=e,u=t;o!==null&&u!==null;)n(o.key,u.key)<0?(i.next=o,o=o.next):(i.next=u,u=u.next),i=i.next;return o!==null?i.next=o:u!==null&&(i.next=u),r.next}function PP(e,t,n,r,i){if(!(n>=r)){for(var o=e[n+r>>1],u=n-1,l=r+1;;){do u++;while(i(e[u],o)<0);do l--;while(i(e[l],o)>0);if(u>=l)break;var p=e[u];e[u]=e[l],e[l]=p,p=t[u],t[u]=t[l],t[l]=p}PP(e,t,n,l,i),PP(e,t,l+1,r,i)}}function ec(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ka(e,t,n){return t&&v3(e.prototype,t),n&&v3(e,n),e}var d0=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},LP=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,i=e.ll.y<t.ll.y?t.ll.y:e.ll.y,o=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}},Ep=Number.EPSILON;Ep===void 0&&(Ep=Math.pow(2,-52));var Dae=Ep*Ep,AP=function(e,t){if(-Ep<e&&e<Ep&&-Ep<t&&t<Ep)return 0;var n=e-t;return n*n<Dae*e*t?0:e<t?-1:1},zae=function(){function e(){ec(this,e),this.reset()}return ka(e,[{key:"reset",value:function(){this.xRounder=new x3,this.yRounder=new x3}},{key:"round",value:function(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}]),e}(),x3=function(){function e(){ec(this,e),this.tree=new nO,this.round(0)}return ka(e,[{key:"round",value:function(t){var n=this.tree.add(t),r=this.tree.prev(n);if(r!==null&&AP(n.key,r.key)===0)return this.tree.remove(t),r.key;var i=this.tree.next(n);return i!==null&&AP(n.key,i.key)===0?(this.tree.remove(t),i.key):t}}]),e}(),A1=new zae,W0=function(e,t){return e.x*t.y-e.y*t.x},a$=function(e,t){return e.x*t.x+e.y*t.y},b3=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},o=W0(r,i);return AP(o,0)},lE=function(e){return Math.sqrt(a$(e,e))},Fae=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return W0(i,r)/lE(i)/lE(r)},Bae=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return a$(i,r)/lE(i)/lE(r)},w3=function(e,t,n){return t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},E3=function(e,t,n){return t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},jae=function(e,t,n,r){if(t.x===0)return E3(n,r,e.x);if(r.x===0)return E3(e,t,n.x);if(t.y===0)return w3(n,r,e.y);if(r.y===0)return w3(e,t,n.y);var i=W0(t,r);if(i==0)return null;var o={x:n.x-e.x,y:n.y-e.y},u=W0(o,t)/i,l=W0(o,r)/i,p=e.x+l*t.x,g=n.x+u*r.x,x=e.y+l*t.y,y=n.y+u*r.y,_=(p+g)/2,T=(x+y)/2;return{x:_,y:T}},zh=function(){ka(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:uE.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}}]);function e(t,n){ec(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}return ka(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var n=t.point.events,r=0,i=n.length;r<i;r++){var o=n[r];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,n=0;n<t;n++){var r=this.point.events[n];if(r.segment.consumedBy===void 0)for(var i=n+1;i<t;i++){var o=this.point.events[i];o.consumedBy===void 0&&r.otherSE.point.events===o.otherSE.point.events&&r.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],n=0,r=this.point.events.length;n<r;n++){var i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var n=this,r=new Map,i=function(o){var u=o.otherSE;r.set(o,{sine:Fae(n.point,t.point,u.point),cosine:Bae(n.point,t.point,u.point)})};return function(o,u){r.has(o)||i(o),r.has(u)||i(u);var l=r.get(o),p=l.sine,g=l.cosine,x=r.get(u),y=x.sine,_=x.cosine;return p>=0&&y>=0?g<_?1:g>_?-1:0:p<0&&y<0?g<_?-1:g>_?1:0:y<p?-1:y>p?1:0}}}]),e}(),$ae=0,uE=function(){ka(e,null,[{key:"compare",value:function(t,n){var r=t.leftSE.point.x,i=n.leftSE.point.x,o=t.rightSE.point.x,u=n.rightSE.point.x;if(u<r)return 1;if(o<i)return-1;var l=t.leftSE.point.y,p=n.leftSE.point.y,g=t.rightSE.point.y,x=n.rightSE.point.y;if(r<i){if(p<l&&p<g)return 1;if(p>l&&p>g)return-1;var y=t.comparePoint(n.leftSE.point);if(y<0)return 1;if(y>0)return-1;var _=n.comparePoint(t.rightSE.point);return _!==0?_:-1}if(r>i){if(l<p&&l<x)return-1;if(l>p&&l>x)return 1;var T=n.comparePoint(t.leftSE.point);if(T!==0)return T;var P=t.comparePoint(n.rightSE.point);return P<0?1:P>0?-1:1}if(l<p)return-1;if(l>p)return 1;if(o<u){var A=n.comparePoint(t.rightSE.point);if(A!==0)return A}if(o>u){var M=t.comparePoint(n.rightSE.point);if(M<0)return 1;if(M>0)return-1}if(o!==u){var k=g-l,R=o-r,z=x-p,D=u-i;if(k>R&&z<D)return 1;if(k<R&&z>D)return-1}return o>u?1:o<u||g<x?-1:g>x?1:t.id<n.id?-1:t.id>n.id?1:0}}]);function e(t,n,r,i){ec(this,e),this.id=++$ae,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=i}return ka(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return t.x===n.x?0:t.x<n.x?1:-1;var o=(t.y-n.y)/i.y,u=n.x+o*i.x;if(t.x===u)return 0;var l=(t.x-n.x)/i.x,p=n.y+l*i.y;return t.y===p?0:t.y<p?-1:1}},{key:"getIntersection",value:function(t){var n=this.bbox(),r=t.bbox(),i=LP(n,r);if(i===null)return null;var o=this.leftSE.point,u=this.rightSE.point,l=t.leftSE.point,p=t.rightSE.point,g=d0(n,l)&&this.comparePoint(l)===0,x=d0(r,o)&&t.comparePoint(o)===0,y=d0(n,p)&&this.comparePoint(p)===0,_=d0(r,u)&&t.comparePoint(u)===0;if(x&&g)return _&&!y?u:!_&&y?p:null;if(x)return y&&o.x===p.x&&o.y===p.y?null:o;if(g)return _&&u.x===l.x&&u.y===l.y?null:l;if(_&&y)return null;if(_)return u;if(y)return p;var T=jae(o,this.vector(),l,t.vector());return T===null||!d0(i,T)?null:A1.round(T.x,T.y)}},{key:"split",value:function(t){var n=[],r=t.events!==void 0,i=new zh(t,!0),o=new zh(t,!1),u=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var l=new e(i,u,this.rings.slice(),this.windings.slice());return zh.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),zh.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(i!==0){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var u=n;n=r,r=u}for(var l=0,p=r.rings.length;l<p;l++){var g=r.rings[l],x=r.windings[l],y=n.rings.indexOf(g);y===-1?(n.rings.push(g),n.windings.push(x)):n.windings[y]+=x}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys,o=0,u=this.rings.length;o<u;o++){var l=this.rings[o],p=this.windings[o],g=n.indexOf(l);g===-1?(n.push(l),r.push(p)):r[g]+=p}for(var x=[],y=[],_=0,T=n.length;_<T;_++)if(r[_]!==0){var P=n[_],A=P.poly;if(y.indexOf(A)===-1)if(P.isExterior)x.push(A);else{y.indexOf(A)===-1&&y.push(A);var M=x.indexOf(P.poly);M!==-1&&x.splice(M,1)}}for(var k=0,R=x.length;k<R;k++){var z=x[k].multiPoly;i.indexOf(z)===-1&&i.push(z)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Rc.type){case"union":{var r=t.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{var o,u;t.length<n.length?(o=t.length,u=n.length):(o=n.length,u=t.length),this._isInResult=u===Rc.numMultiPolys&&o<u;break}case"xor":{var l=Math.abs(t.length-n.length);this._isInResult=l%2===1;break}case"difference":{var p=function(g){return g.length===1&&g[0].isSubject};this._isInResult=p(t)!==p(n);break}default:throw new Error("Unrecognized operation type found ".concat(Rc.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,u,l=zh.comparePoints(t,n);if(l<0)i=t,o=n,u=1;else if(l>0)i=n,o=t,u=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var p=new zh(i,!0),g=new zh(o,!1);return new e(p,g,[r],[u])}}]),e}(),S3=function(){function e(t,n,r){if(ec(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=A1.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,u=1,l=t.length;u<l;u++){if(typeof t[u][0]!="number"||typeof t[u][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var p=A1.round(t[u][0],t[u][1]);p.x===o.x&&p.y===o.y||(this.segments.push(uE.fromRing(o,p,this)),p.x<this.bbox.ll.x&&(this.bbox.ll.x=p.x),p.y<this.bbox.ll.y&&(this.bbox.ll.y=p.y),p.x>this.bbox.ur.x&&(this.bbox.ur.x=p.x),p.y>this.bbox.ur.y&&(this.bbox.ur.y=p.y),o=p)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(uE.fromRing(o,i,this))}return ka(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.segments.length;n<r;n++){var i=this.segments[n];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),e}(),Uae=function(){function e(t,n){if(ec(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new S3(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=t.length;r<i;r++){var o=new S3(t[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return ka(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),n=0,r=this.interiorRings.length;n<r;n++)for(var i=this.interiorRings[n].getSweepEvents(),o=0,u=i.length;o<u;o++)t.push(i[o]);return t}}]),e}(),T3=function(){function e(t,n){if(ec(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=t.length;r<i;r++){var o=new Uae(t[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return ka(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++)for(var i=this.polys[n].getSweepEvents(),o=0,u=i.length;o<u;o++)t.push(i[o]);return t}}]),e}(),Vae=function(){ka(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!(!o.isInResult()||o.ringOut)){for(var u=null,l=o.leftSE,p=o.rightSE,g=[l],x=l.point,y=[];u=l,l=p,g.push(l),l.point!==x;)for(;;){var _=l.getAvailableLinkedEvents();if(_.length===0){var T=g[0].point,P=g[g.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(T.x,",")+" ".concat(T.y,"]. Last matching segment found ends at")+" [".concat(P.x,", ").concat(P.y,"]."))}if(_.length===1){p=_[0].otherSE;break}for(var A=null,M=0,k=y.length;M<k;M++)if(y[M].point===l.point){A=M;break}if(A!==null){var R=y.splice(A)[0],z=g.splice(R.index);z.unshift(z[0].otherSE),n.push(new e(z.reverse()));continue}y.push({index:g.length,point:l.point});var D=l.getLeftmostComparator(u);p=_.sort(D)[0].otherSE;break}n.push(new e(g))}}return n}}]);function e(t){ec(this,e),this.events=t;for(var n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}return ka(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,n=[t],r=1,i=this.events.length-1;r<i;r++){var o=this.events[r].point,u=this.events[r+1].point;b3(o,t,u)!==0&&(n.push(o),t=o)}if(n.length===1)return null;var l=n[0],p=n[1];b3(l,t,p)===0&&n.shift(),n.push(n[0]);for(var g=this.isExteriorRing()?1:-1,x=this.isExteriorRing()?0:n.length-1,y=this.isExteriorRing()?n.length:-1,_=[],T=x;T!=y;T+=g)_.push([n[T].x,n[T].y]);return _}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],n=1,r=this.events.length;n<r;n++){var i=this.events[n];zh.compare(t,i)>0&&(t=i)}for(var o=t.segment.prevInResult(),u=o?o.prevInResult():null;;){if(!o)return null;if(!u)return o.ringOut;if(u.ringOut!==o.ringOut)return u.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=u.prevInResult(),u=o?o.prevInResult():null}}}]),e}(),C3=function(){function e(t){ec(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return ka(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();i!==null&&t.push(i)}return t}}]),e}(),qae=function(){function e(t){ec(this,e),this.rings=t,this.polys=this._composePolys(t)}return ka(e,[{key:"getGeom",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++){var i=this.polys[n].getGeom();i!==null&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!o.poly)if(o.isExteriorRing())n.push(new C3(o));else{var u=o.enclosingRing();u.poly||n.push(new C3(u)),u.poly.addInterior(o)}}return n}}]),e}(),Gae=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uE.compare;ec(this,e),this.queue=t,this.tree=new nO(n),this.segments=[]}return ka(e,[{key:"process",value:function(t){var n=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),r;var i=t.isLeft?this.tree.insert(n):this.tree.find(n);if(!i)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=i,u=i,l=void 0,p=void 0;l===void 0;)o=this.tree.prev(o),o===null?l=null:o.key.consumedBy===void 0&&(l=o.key);for(;p===void 0;)u=this.tree.next(u),u===null?p=null:u.key.consumedBy===void 0&&(p=u.key);if(t.isLeft){var g=null;if(l){var x=l.getIntersection(n);if(x!==null&&(n.isAnEndpoint(x)||(g=x),!l.isAnEndpoint(x)))for(var y=this._splitSafely(l,x),_=0,T=y.length;_<T;_++)r.push(y[_])}var P=null;if(p){var A=p.getIntersection(n);if(A!==null&&(n.isAnEndpoint(A)||(P=A),!p.isAnEndpoint(A)))for(var M=this._splitSafely(p,A),k=0,R=M.length;k<R;k++)r.push(M[k])}if(g!==null||P!==null){var z=null;if(g===null)z=P;else if(P===null)z=g;else{var D=zh.comparePoints(g,P);z=D<=0?g:P}this.queue.remove(n.rightSE),r.push(n.rightSE);for(var U=n.split(z),V=0,G=U.length;V<G;V++)r.push(U[V])}r.length>0?(this.tree.remove(n),r.push(t)):(this.segments.push(n),n.prev=l)}else{if(l&&p){var H=l.getIntersection(p);if(H!==null){if(!l.isAnEndpoint(H))for(var J=this._splitSafely(l,H),Y=0,X=J.length;Y<X;Y++)r.push(J[Y]);if(!p.isAnEndpoint(H))for(var ee=this._splitSafely(p,H),ce=0,oe=ee.length;ce<oe;ce++)r.push(ee[ce])}}this.tree.remove(n)}return r}},{key:"_splitSafely",value:function(t,n){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var i=t.split(n);return i.push(r),t.consumedBy===void 0&&this.tree.insert(t),i}}]),e}(),I3=typeof process<"u"&&Jj.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Hae=typeof process<"u"&&Jj.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Zae=function(){function e(){ec(this,e)}return ka(e,[{key:"run",value:function(t,n,r){Rc.type=t,A1.reset();for(var i=[new T3(n,!0)],o=0,u=r.length;o<u;o++)i.push(new T3(r[o],!1));if(Rc.numMultiPolys=i.length,Rc.type==="difference")for(var l=i[0],p=1;p<i.length;)LP(i[p].bbox,l.bbox)!==null?p++:i.splice(p,1);if(Rc.type==="intersection"){for(var g=0,x=i.length;g<x;g++)for(var y=i[g],_=g+1,T=i.length;_<T;_++)if(LP(y.bbox,i[_].bbox)===null)return[]}for(var P=new nO(zh.compare),A=0,M=i.length;A<M;A++)for(var k=i[A].getSweepEvents(),R=0,z=k.length;R<z;R++)if(P.insert(k[R]),P.size>I3)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var D=new Gae(P),U=P.size,V=P.pop();V;){var G=V.key;if(P.size===U){var H=G.segment;throw new Error("Unable to pop() ".concat(G.isLeft?"left":"right"," SweepEvent ")+"[".concat(G.point.x,", ").concat(G.point.y,"] from segment #").concat(H.id," ")+"[".concat(H.leftSE.point.x,", ").concat(H.leftSE.point.y,"] -> ")+"[".concat(H.rightSE.point.x,", ").concat(H.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(P.size>I3)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(D.segments.length>Hae)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var J=D.process(G),Y=0,X=J.length;Y<X;Y++){var ee=J[Y];ee.consumedBy===void 0&&P.insert(ee)}U=P.size,V=P.pop()}A1.reset();var ce=Vae.factory(D.segments),oe=new qae(ce);return oe.getGeom()}}]),e}(),Rc=new Zae,Wae=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rc.run("union",e,n)},Kae=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rc.run("intersection",e,n)},Xae=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rc.run("xor",e,n)},Yae=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rc.run("difference",e,n)},l$={union:Wae,intersection:Kae,xor:Xae,difference:Yae},wa=63710088e-1,u$={centimeters:wa*100,centimetres:wa*100,degrees:wa/111325,feet:wa*3.28084,inches:wa*39.37,kilometers:wa/1e3,kilometres:wa/1e3,meters:wa,metres:wa,miles:wa/1609.344,millimeters:wa*1e3,millimetres:wa*1e3,nauticalmiles:wa/1852,radians:1,yards:wa*1.0936};function BS(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function Jae(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!P3(e[0])||!P3(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return BS(r,t,n)}function c$(e,t,n){n===void 0&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<o[o.length-1].length;u++)if(o[o.length-1][u]!==o[0][u])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return BS(l,t,n)}function OP(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function h$(e,t,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:e};return BS(r,t,n)}function Qae(e,t){t===void 0&&(t="kilometers");var n=u$[t];if(!n)throw new Error(t+" units is invalid");return e*n}function ele(e,t){t===void 0&&(t="kilometers");var n=u$[t];if(!n)throw new Error(t+" units is invalid");return e/n}function P3(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function cE(e){return e.type==="Feature"?e.geometry:e}function tle(e,t,n){n===void 0&&(n={});var r=cE(e),i=cE(t),o=l$.union(r.coordinates,i.coordinates);return o.length===0?null:o.length===1?c$(o[0],n.properties):h$(o,n.properties)}function f$(e,t,n){if(e!==null)for(var r,i,o,u,l,p,g,x=0,y=0,_,T=e.type,P=T==="FeatureCollection",A=T==="Feature",M=P?e.features.length:1,k=0;k<M;k++){g=P?e.features[k].geometry:A?e.geometry:e,_=g?g.type==="GeometryCollection":!1,l=_?g.geometries.length:1;for(var R=0;R<l;R++){var z=0,D=0;if(u=_?g.geometries[R]:g,u!==null){p=u.coordinates;var U=u.type;switch(x=n&&(U==="Polygon"||U==="MultiPolygon")?1:0,U){case null:break;case"Point":if(t(p,y,k,z,D)===!1)return!1;y++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<p.length;r++){if(t(p[r],y,k,z,D)===!1)return!1;y++,U==="MultiPoint"&&z++}U==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<p.length;r++){for(i=0;i<p[r].length-x;i++){if(t(p[r][i],y,k,z,D)===!1)return!1;y++}U==="MultiLineString"&&z++,U==="Polygon"&&D++}U==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<p.length;r++){for(D=0,i=0;i<p[r].length;i++){for(o=0;o<p[r][i].length-x;o++){if(t(p[r][i][o],y,k,z,D)===!1)return!1;y++}D++}z++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(f$(u.geometries[r],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function L3(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function d$(e,t){var n,r,i,o,u,l,p,g,x,y,_=0,T=e.type==="FeatureCollection",P=e.type==="Feature",A=T?e.features.length:1;for(n=0;n<A;n++){for(l=T?e.features[n].geometry:P?e.geometry:e,g=T?e.features[n].properties:P?e.properties:{},x=T?e.features[n].bbox:P?e.bbox:void 0,y=T?e.features[n].id:P?e.id:void 0,p=l?l.type==="GeometryCollection":!1,u=p?l.geometries.length:1,i=0;i<u;i++){if(o=p?l.geometries[i]:l,o===null){if(t(null,_,g,x,y)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,_,g,x,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],_,g,x,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}_++}}function kP(e){var t=[1/0,1/0,-1/0,-1/0];return f$(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}kP.default=kP;function nle(e,t){t===void 0&&(t={});var n=kP(e),r=(n[0]+n[2])/2,i=(n[1]+n[3])/2;return Jae([r,i],t.properties,t)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)t[r]=e,++r;return t},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var Sg=function(){};Sg.prototype.interfaces_=function(){return[]};Sg.prototype.getClass=function(){return Sg};Sg.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var ri=function(e){function t(n){e.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),kn=function(){},p$={MAX_VALUE:{configurable:!0}};kn.isNaN=function(e){return Number.isNaN(e)};kn.doubleToLongBits=function(e){return e};kn.longBitsToDouble=function(e){return e};kn.isInfinite=function(e){return!Number.isFinite(e)};p$.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(kn,p$);var ml=function(){},jS=function(){},O_=function(){};function gl(){}var nt=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},qg={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};nt.prototype.setOrdinate=function(e,t){switch(e){case nt.X:this.x=t;break;case nt.Y:this.y=t;break;case nt.Z:this.z=t;break;default:throw new ri("Invalid ordinate index: "+e)}};nt.prototype.equals2D=function(){if(arguments.length===1){var e=arguments[0];return!(this.x!==e.x||this.y!==e.y)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return!(!Sg.equalsWithTolerance(this.x,t.x,n)||!Sg.equalsWithTolerance(this.y,t.y,n))}};nt.prototype.getOrdinate=function(e){switch(e){case nt.X:return this.x;case nt.Y:return this.y;case nt.Z:return this.z}throw new ri("Invalid ordinate index: "+e)};nt.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||kn.isNaN(this.z))&&kn.isNaN(e.z)};nt.prototype.equals=function(e){return e instanceof nt?this.equals2D(e):!1};nt.prototype.equalInZ=function(e,t){return Sg.equalsWithTolerance(this.z,e.z,t)};nt.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};nt.prototype.clone=function(){};nt.prototype.copy=function(){return new nt(this)};nt.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};nt.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)};nt.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)};nt.prototype.hashCode=function(){var e=17;return e=37*e+nt.hashCode(this.x),e=37*e+nt.hashCode(this.y),e};nt.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z};nt.prototype.interfaces_=function(){return[ml,jS,gl]};nt.prototype.getClass=function(){return nt};nt.hashCode=function(){if(arguments.length===1){var e=arguments[0],t=kn.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}};qg.DimensionalComparator.get=function(){return Qf};qg.serialVersionUID.get=function(){return 6683108902428367e3};qg.NULL_ORDINATE.get=function(){return kn.NaN};qg.X.get=function(){return 0};qg.Y.get=function(){return 1};qg.Z.get=function(){return 2};Object.defineProperties(nt,qg);var Qf=function(e){if(this._dimensionsToTest=2,arguments.length!==0&&arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new ri("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};Qf.prototype.compare=function(e,t){var n=e,r=t,i=Qf.compare(n.x,r.x);if(i!==0)return i;var o=Qf.compare(n.y,r.y);if(o!==0)return o;if(this._dimensionsToTest<=2)return 0;var u=Qf.compare(n.z,r.z);return u};Qf.prototype.interfaces_=function(){return[O_]};Qf.prototype.getClass=function(){return Qf};Qf.compare=function(e,t){return e<t?-1:e>t?1:kn.isNaN(e)?kn.isNaN(t)?0:-1:kn.isNaN(t)?1:0};var k_=function(){};k_.prototype.create=function(){};k_.prototype.interfaces_=function(){return[]};k_.prototype.getClass=function(){return k_};var st=function(){},Sx={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};st.prototype.interfaces_=function(){return[]};st.prototype.getClass=function(){return st};st.toLocationSymbol=function(e){switch(e){case st.EXTERIOR:return"e";case st.BOUNDARY:return"b";case st.INTERIOR:return"i";case st.NONE:return"-"}throw new ri("Unknown location value: "+e)};Sx.INTERIOR.get=function(){return 0};Sx.BOUNDARY.get=function(){return 1};Sx.EXTERIOR.get=function(){return 2};Sx.NONE.get=function(){return-1};Object.defineProperties(st,Sx);var Sn=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},Ra=function(){},m$={LOG_10:{configurable:!0}};Ra.prototype.interfaces_=function(){return[]};Ra.prototype.getClass=function(){return Ra};Ra.log10=function(e){var t=Math.log(e);return kn.isInfinite(t)||kn.isNaN(t)?t:t/Ra.LOG_10};Ra.min=function(e,t,n,r){var i=e;return t<i&&(i=t),n<i&&(i=n),r<i&&(i=r),i};Ra.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}};Ra.wrap=function(e,t){return e<0?t- -e%t:e%t};Ra.max=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2],r=e;return t>r&&(r=t),n>r&&(r=n),r}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3],p=i;return o>p&&(p=o),u>p&&(p=u),l>p&&(p=l),p}};Ra.average=function(e,t){return(e+t)/2};m$.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(Ra,m$);var tc=function(e){this.str=e};tc.prototype.append=function(e){this.str+=e};tc.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};tc.prototype.toString=function(e){return this.str};var Vu=function(e){this.value=e};Vu.prototype.intValue=function(){return this.value};Vu.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0};Vu.isNaN=function(e){return Number.isNaN(e)};var O1=function(){};O1.isWhitespace=function(e){return e<=32&&e>=0||e===127};O1.toUpperCase=function(e){return e.toUpperCase()};var pt=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if(typeof arguments[0]=="string"){var r=arguments[0];e.call(this,e.parse(r))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},iu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};pt.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo};pt.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),r=pt.magnitude(n._hi),i=pt.TEN.pow(r);n=n.divide(i),n.gt(pt.TEN)?(n=n.divide(pt.TEN),r+=1):n.lt(pt.ONE)&&(n=n.multiply(pt.TEN),r-=1);for(var o=r+1,u=new tc,l=pt.MAX_PRINT_DIGITS-1,p=0;p<=l;p++){e&&p===o&&u.append(".");var g=Math.trunc(n._hi);if(g<0)break;var x=!1,y=0;g>9?(x=!0,y="9"):y="0"+g,u.append(y),n=n.subtract(pt.valueOf(g)).multiply(pt.TEN),x&&n.selfAdd(pt.TEN);var _=!0,T=pt.magnitude(n._hi);if(T<0&&Math.abs(T)>=l-p&&(_=!1),!_)break}return t[0]=r,u.toString()};pt.prototype.sqr=function(){return this.multiply(this)};pt.prototype.doubleValue=function(){return this._hi+this._lo};pt.prototype.subtract=function(){if(arguments[0]instanceof pt){var e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}};pt.prototype.equals=function(){if(arguments.length===1){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}};pt.prototype.isZero=function(){return this._hi===0&&this._lo===0};pt.prototype.selfSubtract=function(){if(arguments[0]instanceof pt){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}};pt.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};pt.prototype.min=function(e){return this.le(e)?this:e};pt.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof pt){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,u=null,l=null,p=null,g=null,x=null,y=null;return p=this._hi/n,g=pt.SPLIT*p,i=g-p,y=pt.SPLIT*n,i=g-i,o=p-i,u=y-n,x=p*n,u=y-u,l=n-u,y=i*u-x+i*l+o*u+o*l,g=(this._hi-x-y+this._lo-p*r)/n,y=p+g,this._hi=y,this._lo=p-y+g,this}};pt.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};pt.prototype.divide=function(){if(arguments[0]instanceof pt){var e=arguments[0],t=null,n=null,r=null,i=null,o=null,u=null,l=null,p=null;o=this._hi/e._hi,u=pt.SPLIT*o,t=u-o,p=pt.SPLIT*e._hi,t=u-t,n=o-t,r=p-e._hi,l=o*e._hi,r=p-r,i=e._hi-r,p=t*r-l+t*i+n*r+n*i,u=(this._hi-l-p+this._lo-o*e._lo)/e._hi,p=o+u;var g=p,x=o-p+u;return new pt(g,x)}else if(typeof arguments[0]=="number"){var y=arguments[0];return kn.isNaN(y)?pt.createNaN():pt.copy(this).selfDivide(y,0)}};pt.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo};pt.prototype.pow=function(e){if(e===0)return pt.valueOf(1);var t=new pt(this),n=pt.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(t),r/=2,r>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n};pt.prototype.ceil=function(){if(this.isNaN())return pt.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new pt(e,t)};pt.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};pt.prototype.rint=function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()};pt.prototype.setValue=function(){if(arguments[0]instanceof pt){var e=arguments[0];return this.init(e),this}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}};pt.prototype.max=function(e){return this.ge(e)?this:e};pt.prototype.sqrt=function(){if(this.isZero())return pt.valueOf(0);if(this.isNegative())return pt.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=pt.valueOf(t),r=this.subtract(n.sqr()),i=r._hi*(e*.5);return n.add(i)};pt.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof pt){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0],n=null,r=null,i=null,o=null,u=null,l=null;return i=this._hi+t,u=i-this._hi,o=i-u,o=t-u+(this._hi-o),l=o+this._lo,n=i+l,r=l+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(arguments.length===2){var p=arguments[0],g=arguments[1],x=null,y=null,_=null,T=null,P=null,A=null,M=null,k=null;P=this._hi+p,_=this._lo+g,M=P-this._hi,k=_-this._lo,A=P-M,T=_-k,A=p-M+(this._hi-A),T=g-k+(this._lo-T),M=A+_,x=P+M,y=M+(P-x),M=T+y;var R=x+M,z=M+(x-R);return this._hi=R,this._lo=z,this}};pt.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof pt){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,u=null,l=null,p=null,g=null;p=pt.SPLIT*this._hi,i=p-this._hi,g=pt.SPLIT*n,i=p-i,o=this._hi-i,u=g-n,p=this._hi*n,u=g-u,l=n-u,g=i*u-p+i*l+o*u+o*l+(this._hi*r+this._lo*n);var x=p+g;i=p-x;var y=g+i;return this._hi=x,this._lo=y,this}};pt.prototype.selfSqr=function(){return this.selfMultiply(this)};pt.prototype.floor=function(){if(this.isNaN())return pt.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new pt(e,t)};pt.prototype.negate=function(){return this.isNaN()?this:new pt(-this._hi,-this._lo)};pt.prototype.clone=function(){};pt.prototype.multiply=function(){if(arguments[0]instanceof pt){var e=arguments[0];return e.isNaN()?pt.createNaN():pt.copy(this).selfMultiply(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return kn.isNaN(t)?pt.createNaN():pt.copy(this).selfMultiply(t,0)}};pt.prototype.isNaN=function(){return kn.isNaN(this._hi)};pt.prototype.intValue=function(){return Math.trunc(this._hi)};pt.prototype.toString=function(){var e=pt.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()};pt.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),r=t[0]+1,i=n;if(n.charAt(0)===".")i="0"+n;else if(r<0)i="0."+pt.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var o=r-n.length,u=pt.stringOfChar("0",o);i=n+u+".0"}return this.isNegative()?"-"+i:i};pt.prototype.reciprocal=function(){var e=null,t=null,n=null,r=null,i=null,o=null,u=null,l=null;i=1/this._hi,o=pt.SPLIT*i,e=o-i,l=pt.SPLIT*this._hi,e=o-e,t=i-e,n=l-this._hi,u=i*this._hi,n=l-n,r=this._hi-n,l=e*n-u+e*r+t*n+t*r,o=(1-u-l-i*this._lo)/this._hi;var p=i+o,g=i-p+o;return new pt(p,g)};pt.prototype.toSciNotation=function(){if(this.isZero())return pt.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=pt.SCI_NOT_EXPONENT_CHAR+t[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r};pt.prototype.abs=function(){return this.isNaN()?pt.NaN:this.isNegative()?this.negate():new pt(this)};pt.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};pt.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo};pt.prototype.add=function(){if(arguments[0]instanceof pt){var e=arguments[0];return pt.copy(this).selfAdd(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return pt.copy(this).selfAdd(t)}};pt.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof pt){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}};pt.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo};pt.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};pt.prototype.trunc=function(){return this.isNaN()?pt.NaN:this.isPositive()?this.floor():this.ceil()};pt.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};pt.prototype.interfaces_=function(){return[gl,ml,jS]};pt.prototype.getClass=function(){return pt};pt.sqr=function(e){return pt.valueOf(e).selfMultiply(e)};pt.valueOf=function(){if(typeof arguments[0]=="string"){var e=arguments[0];return pt.parse(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return new pt(t)}};pt.sqrt=function(e){return pt.valueOf(e).sqrt()};pt.parse=function(e){for(var t=0,n=e.length;O1.isWhitespace(e.charAt(t));)t++;var r=!1;if(t<n){var i=e.charAt(t);(i==="-"||i==="+")&&(t++,i==="-"&&(r=!0))}for(var o=new pt,u=0,l=0,p=0;!(t>=n);){var g=e.charAt(t);if(t++,O1.isDigit(g)){var x=g-"0";o.selfMultiply(pt.TEN),o.selfAdd(x),u++;continue}if(g==="."){l=u;continue}if(g==="e"||g==="E"){var y=e.substring(t);try{p=Vu.parseInt(y)}catch(M){throw M instanceof Error?new Error("Invalid exponent "+y+" in string "+e):M}finally{}break}throw new Error("Unexpected character '"+g+"' at position "+t+" in string "+e)}var _=o,T=u-l-p;if(T===0)_=o;else if(T>0){var P=pt.TEN.pow(T);_=o.divide(P)}else if(T<0){var A=pt.TEN.pow(-T);_=o.multiply(A)}return r?_.negate():_};pt.createNaN=function(){return new pt(kn.NaN,kn.NaN)};pt.copy=function(e){return new pt(e)};pt.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return i*10<=t&&(r+=1),r};pt.stringOfChar=function(e,t){for(var n=new tc,r=0;r<t;r++)n.append(e);return n.toString()};iu.PI.get=function(){return new pt(3.141592653589793,12246467991473532e-32)};iu.TWO_PI.get=function(){return new pt(6.283185307179586,24492935982947064e-32)};iu.PI_2.get=function(){return new pt(1.5707963267948966,6123233995736766e-32)};iu.E.get=function(){return new pt(2.718281828459045,14456468917292502e-32)};iu.NaN.get=function(){return new pt(kn.NaN,kn.NaN)};iu.EPS.get=function(){return 123259516440783e-46};iu.SPLIT.get=function(){return 134217729};iu.MAX_PRINT_DIGITS.get=function(){return 32};iu.TEN.get=function(){return pt.valueOf(10)};iu.ONE.get=function(){return pt.valueOf(1)};iu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};iu.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(pt,iu);var Fs=function(){},g$={DP_SAFE_EPSILON:{configurable:!0}};Fs.prototype.interfaces_=function(){return[]};Fs.prototype.getClass=function(){return Fs};Fs.orientationIndex=function(e,t,n){var r=Fs.orientationIndexFilter(e,t,n);if(r<=1)return r;var i=pt.valueOf(t.x).selfAdd(-e.x),o=pt.valueOf(t.y).selfAdd(-e.y),u=pt.valueOf(n.x).selfAdd(-t.x),l=pt.valueOf(n.y).selfAdd(-t.y);return i.selfMultiply(l).selfSubtract(o.selfMultiply(u)).signum()};Fs.signOfDet2x2=function(e,t,n,r){var i=e.multiply(r).selfSubtract(t.multiply(n));return i.signum()};Fs.intersection=function(e,t,n,r){var i=pt.valueOf(r.y).selfSubtract(n.y).selfMultiply(pt.valueOf(t.x).selfSubtract(e.x)),o=pt.valueOf(r.x).selfSubtract(n.x).selfMultiply(pt.valueOf(t.y).selfSubtract(e.y)),u=i.subtract(o),l=pt.valueOf(r.x).selfSubtract(n.x).selfMultiply(pt.valueOf(e.y).selfSubtract(n.y)),p=pt.valueOf(r.y).selfSubtract(n.y).selfMultiply(pt.valueOf(e.x).selfSubtract(n.x)),g=l.subtract(p),x=g.selfDivide(u).doubleValue(),y=pt.valueOf(e.x).selfAdd(pt.valueOf(t.x).selfSubtract(e.x).selfMultiply(x)).doubleValue(),_=pt.valueOf(t.x).selfSubtract(e.x).selfMultiply(pt.valueOf(e.y).selfSubtract(n.y)),T=pt.valueOf(t.y).selfSubtract(e.y).selfMultiply(pt.valueOf(e.x).selfSubtract(n.x)),P=_.subtract(T),A=P.selfDivide(u).doubleValue(),M=pt.valueOf(n.y).selfAdd(pt.valueOf(r.y).selfSubtract(n.y).selfMultiply(A)).doubleValue();return new nt(y,M)};Fs.orientationIndexFilter=function(e,t,n){var r=null,i=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),u=i-o;if(i>0){if(o<=0)return Fs.signum(u);r=i+o}else if(i<0){if(o>=0)return Fs.signum(u);r=-i-o}else return Fs.signum(u);var l=Fs.DP_SAFE_EPSILON*r;return u>=l||-u>=l?Fs.signum(u):2};Fs.signum=function(e){return e>0?1:e<0?-1:0};g$.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(Fs,g$);var ir=function(){},Tx={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Tx.X.get=function(){return 0};Tx.Y.get=function(){return 1};Tx.Z.get=function(){return 2};Tx.M.get=function(){return 3};ir.prototype.setOrdinate=function(e,t,n){};ir.prototype.size=function(){};ir.prototype.getOrdinate=function(e,t){};ir.prototype.getCoordinate=function(){};ir.prototype.getCoordinateCopy=function(e){};ir.prototype.getDimension=function(){};ir.prototype.getX=function(e){};ir.prototype.clone=function(){};ir.prototype.expandEnvelope=function(e){};ir.prototype.copy=function(){};ir.prototype.getY=function(e){};ir.prototype.toCoordinateArray=function(){};ir.prototype.interfaces_=function(){return[jS]};ir.prototype.getClass=function(){return ir};Object.defineProperties(ir,Tx);var y$=function(){},uv=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(y$),Mo=function(){};Mo.arraycopy=function(e,t,n,r,i){for(var o=0,u=t;u<t+i;u++)n[r+o]=e[u],o++};Mo.getProperty=function(e){return{"line.separator":`
`}[e]};var $l=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof nt&&arguments[1]instanceof nt){var u=arguments[0],l=arguments[1];this.x=u.y-l.y,this.y=l.x-u.x,this.w=u.x*l.y-l.x*u.y}}else if(arguments.length===3){var p=arguments[0],g=arguments[1],x=arguments[2];this.x=p,this.y=g,this.w=x}else if(arguments.length===4){var y=arguments[0],_=arguments[1],T=arguments[2],P=arguments[3],A=y.y-_.y,M=_.x-y.x,k=y.x*_.y-_.x*y.y,R=T.y-P.y,z=P.x-T.x,D=T.x*P.y-P.x*T.y;this.x=M*D-z*k,this.y=R*k-A*D,this.w=A*z-R*M}};$l.prototype.getY=function(){var e=this.y/this.w;if(kn.isNaN(e)||kn.isInfinite(e))throw new uv;return e};$l.prototype.getX=function(){var e=this.x/this.w;if(kn.isNaN(e)||kn.isInfinite(e))throw new uv;return e};$l.prototype.getCoordinate=function(){var e=new nt;return e.x=this.getX(),e.y=this.getY(),e};$l.prototype.interfaces_=function(){return[]};$l.prototype.getClass=function(){return $l};$l.intersection=function(e,t,n,r){var i=e.y-t.y,o=t.x-e.x,u=e.x*t.y-t.x*e.y,l=n.y-r.y,p=r.x-n.x,g=n.x*r.y-r.x*n.y,x=o*g-p*u,y=l*u-i*g,_=i*p-l*o,T=x/_,P=y/_;if(kn.isNaN(T)||kn.isInfinite(T)||kn.isNaN(P)||kn.isInfinite(P))throw new uv;return new nt(T,P)};var dn=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof nt){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],u=arguments[1],l=arguments[2],p=arguments[3];this.init(o,u,l,p)}},_$={serialVersionUID:{configurable:!0}};dn.prototype.getArea=function(){return this.getWidth()*this.getHeight()};dn.prototype.equals=function(e){if(!(e instanceof dn))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};dn.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new dn;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,r=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new dn(t,r,n,i)};dn.prototype.isNull=function(){return this._maxx<this._minx};dn.prototype.getMaxX=function(){return this._maxx};dn.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof nt){var e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof dn){var t=arguments[0];return this.isNull()||t.isNull()?!1:t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}};dn.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof dn){var e=arguments[0];return this.isNull()||e.isNull()?!1:!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof nt){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}};dn.prototype.getMinY=function(){return this._miny};dn.prototype.getMinX=function(){return this._minx};dn.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof nt){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof dn){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}};dn.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t};dn.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};dn.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};dn.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)};dn.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};dn.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};dn.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};dn.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t};dn.prototype.expandBy=function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};dn.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof dn){var e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof nt){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}};dn.prototype.centre=function(){return this.isNull()?null:new nt((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};dn.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof nt){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof dn){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),u<l?(this._miny=u,this._maxy=l):(this._miny=l,this._maxy=u)}};dn.prototype.getMaxY=function(){return this._maxy};dn.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)};dn.prototype.hashCode=function(){var e=17;return e=37*e+nt.hashCode(this._minx),e=37*e+nt.hashCode(this._maxx),e=37*e+nt.hashCode(this._miny),e=37*e+nt.hashCode(this._maxy),e};dn.prototype.interfaces_=function(){return[ml,gl]};dn.prototype.getClass=function(){return dn};dn.intersects=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],u=arguments[3],l=Math.min(o.x,u.x),p=Math.max(o.x,u.x),g=Math.min(r.x,i.x),x=Math.max(r.x,i.x);return!(g>p||x<l||(l=Math.min(o.y,u.y),p=Math.max(o.y,u.y),g=Math.min(r.y,i.y),x=Math.max(r.y,i.y),g>p)||x<l)}};_$.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(dn,_$);var wu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},$S=function(e){this.geometryFactory=e||new Kn};$S.prototype.read=function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=wu.typeStr.exec(e);if(e.search("EMPTY")!==-1&&(i=wu.emptyTypeStr.exec(e),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Gy[n]&&(t=Gy[n].apply(this,[r]))),t===void 0)throw new Error("Could not parse WKT "+e);return t};$S.prototype.write=function(e){return this.extractGeometry(e)};$S.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!Mh[t])return null;var n=t.toUpperCase(),r;return e.isEmpty()?r=n+" EMPTY":r=n+"("+Mh[t].apply(this,[e])+")",r};var Mh={coordinate:function(e){return e.x+" "+e.y},point:function(e){return Mh.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Mh.point.apply(t,[e._geometries[r]])+")");return n.join(",")},linestring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(Mh.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},linearring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(Mh.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},multilinestring:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Mh.linestring.apply(t,[e._geometries[r]])+")");return n.join(",")},polygon:function(e){var t=this,n=[];n.push("("+Mh.linestring.apply(this,[e._shell])+")");for(var r=0,i=e._holes.length;r<i;++r)n.push("("+Mh.linestring.apply(t,[e._holes[r]])+")");return n.join(",")},multipolygon:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Mh.polygon.apply(t,[e._geometries[r]])+")");return n.join(",")},geometrycollection:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push(t.extractGeometry(e._geometries[r]));return n.join(",")}},Gy={point:function(e){if(e===void 0)return this.geometryFactory.createPoint();var t=e.trim().split(wu.spaces);return this.geometryFactory.createPoint(new nt(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPoint();for(var n,r=e.trim().split(","),i=[],o=0,u=r.length;o<u;++o)n=r[o].replace(wu.trimParens,"$1"),i.push(Gy.point.apply(t,[n]));return this.geometryFactory.createMultiPoint(i)},linestring:function(e){if(e===void 0)return this.geometryFactory.createLineString();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(wu.spaces),n.push(new nt(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLineString(n)},linearring:function(e){if(e===void 0)return this.geometryFactory.createLinearRing();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(wu.spaces),n.push(new nt(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiLineString();for(var n,r=e.trim().split(wu.parenComma),i=[],o=0,u=r.length;o<u;++o)n=r[o].replace(wu.trimParens,"$1"),i.push(Gy.linestring.apply(t,[n]));return this.geometryFactory.createMultiLineString(i)},polygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createPolygon();for(var n,r,i,o=e.trim().split(wu.parenComma),u,l=[],p=0,g=o.length;p<g;++p)n=o[p].replace(wu.trimParens,"$1"),r=Gy.linestring.apply(t,[n]),i=t.geometryFactory.createLinearRing(r._points),p===0?u=i:l.push(i);return this.geometryFactory.createPolygon(u,l)},multipolygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPolygon();for(var n,r=e.trim().split(wu.doubleParenComma),i=[],o=0,u=r.length;o<u;++o)n=r[o].replace(wu.trimParens,"$1"),i.push(Gy.polygon.apply(t,[n]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(e){var t=this;if(e===void 0)return this.geometryFactory.createGeometryCollection();e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=e.trim().split("|"),r=[],i=0,o=n.length;i<o;++i)r.push(t.read(n[i]));return this.geometryFactory.createGeometryCollection(r)}},Hl=function(e){this.parser=new $S(e)};Hl.prototype.write=function(e){return this.parser.write(e)};Hl.toLineString=function(e,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var Yh=function(e){function t(n){e.call(this,n),this.name="RuntimeException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),hE=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var n=arguments[0];e.call(this,n)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Yh),zn=function(){};zn.prototype.interfaces_=function(){return[]};zn.prototype.getClass=function(){return zn};zn.shouldNeverReachHere=function(){if(arguments.length===0)zn.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new hE("Should never reach here"+(e!==null?": "+e:""))}};zn.isTrue=function(){var e,t;if(arguments.length===1)e=arguments[0],zn.isTrue(e,null);else if(arguments.length===2&&(e=arguments[0],t=arguments[1],!e))throw t===null?new hE:new hE(t)};zn.equals=function(){var e,t,n;if(arguments.length===2)e=arguments[0],t=arguments[1],zn.equals(e,t,null);else if(arguments.length===3&&(e=arguments[0],t=arguments[1],n=arguments[2],!t.equals(e)))throw new hE("Expected "+e+" but encountered "+t+(n!==null?": "+n:""))};var ui=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new nt,this._intPt[1]=new nt,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Gg={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ui.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]};ui.prototype.getTopologySummary=function(){var e=new tc;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()};ui.prototype.computeIntersection=function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)};ui.prototype.getIntersectionNum=function(){return this._result};ui.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0],t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}};ui.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};ui.prototype.setPrecisionModel=function(e){this._precisionModel=e};ui.prototype.isInteriorIntersection=function(){var e=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var t=arguments[0],n=0;n<this._result;n++)if(!(e._intPt[n].equals2D(e._inputLines[t][0])||e._intPt[n].equals2D(e._inputLines[t][1])))return!0;return!1}};ui.prototype.getIntersection=function(e){return this._intPt[e]};ui.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};ui.prototype.hasIntersection=function(){return this._result!==ui.NO_INTERSECTION};ui.prototype.getEdgeDistance=function(e,t){var n=ui.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1]);return n};ui.prototype.isCollinear=function(){return this._result===ui.COLLINEAR_INTERSECTION};ui.prototype.toString=function(){return Hl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Hl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};ui.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]};ui.prototype.isIntersection=function(e){for(var t=this,n=0;n<this._result;n++)if(t._intPt[n].equals2D(e))return!0;return!1};ui.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]};ui.prototype.interfaces_=function(){return[]};ui.prototype.getClass=function(){return ui};ui.computeEdgeDistance=function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))r>i?o=r:o=i;else{var u=Math.abs(e.x-t.x),l=Math.abs(e.y-t.y);r>i?o=u:o=l,o===0&&!e.equals(t)&&(o=Math.max(u,l))}return zn.isTrue(!(o===0&&!e.equals(t)),"Bad distance calculation"),o};ui.nonRobustComputeEdgeDistance=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i);return zn.isTrue(!(o===0&&!e.equals(t)),"Invalid distance calculation"),o};Gg.DONT_INTERSECT.get=function(){return 0};Gg.DO_INTERSECT.get=function(){return 1};Gg.COLLINEAR.get=function(){return 2};Gg.NO_INTERSECTION.get=function(){return 0};Gg.POINT_INTERSECTION.get=function(){return 1};Gg.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(ui,Gg);var lm=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(n){var r=new dn(this._inputLines[0][0],this._inputLines[0][1]),i=new dn(this._inputLines[1][0],this._inputLines[1][1]);return r.contains(n)&&i.contains(n)},t.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];if(this._isProper=!1,dn.intersects(r,i,n)&&Yt.orientationIndex(r,i,n)===0&&Yt.orientationIndex(i,r,n)===0)return this._isProper=!0,(n.equals(r)||n.equals(i))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(n,r,i,o,u){u.x=this.smallestInAbsValue(n.x,r.x,i.x,o.x),u.y=this.smallestInAbsValue(n.y,r.y,i.y,o.y),n.x-=u.x,n.y-=u.y,r.x-=u.x,r.y-=u.y,i.x-=u.x,i.y-=u.y,o.x-=u.x,o.y-=u.y},t.prototype.safeHCoordinateIntersection=function(n,r,i,o){var u=null;try{u=$l.intersection(n,r,i,o)}catch(l){if(l instanceof uv)u=t.nearestEndpoint(n,r,i,o);else throw l}finally{}return u},t.prototype.intersection=function(n,r,i,o){var u=this.intersectionWithNormalization(n,r,i,o);return this.isInSegmentEnvelopes(u)||(u=new nt(t.nearestEndpoint(n,r,i,o))),this._precisionModel!==null&&this._precisionModel.makePrecise(u),u},t.prototype.smallestInAbsValue=function(n,r,i,o){var u=n,l=Math.abs(u);return Math.abs(r)<l&&(u=r,l=Math.abs(r)),Math.abs(i)<l&&(u=i,l=Math.abs(i)),Math.abs(o)<l&&(u=o),u},t.prototype.checkDD=function(n,r,i,o,u){var l=Fs.intersection(n,r,i,o),p=this.isInSegmentEnvelopes(l);Mo.out.println("DD in env = "+p+"  --------------------- "+l),u.distance(l)>1e-4&&Mo.out.println("Distance = "+u.distance(l))},t.prototype.intersectionWithNormalization=function(n,r,i,o){var u=new nt(n),l=new nt(r),p=new nt(i),g=new nt(o),x=new nt;this.normalizeToEnvCentre(u,l,p,g,x);var y=this.safeHCoordinateIntersection(u,l,p,g);return y.x+=x.x,y.y+=x.y,y},t.prototype.computeCollinearIntersection=function(n,r,i,o){var u=dn.intersects(n,r,i),l=dn.intersects(n,r,o),p=dn.intersects(i,o,n),g=dn.intersects(i,o,r);return u&&l?(this._intPt[0]=i,this._intPt[1]=o,e.COLLINEAR_INTERSECTION):p&&g?(this._intPt[0]=n,this._intPt[1]=r,e.COLLINEAR_INTERSECTION):u&&p?(this._intPt[0]=i,this._intPt[1]=n,i.equals(n)&&!l&&!g?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):u&&g?(this._intPt[0]=i,this._intPt[1]=r,i.equals(r)&&!l&&!p?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):l&&p?(this._intPt[0]=o,this._intPt[1]=n,o.equals(n)&&!u&&!g?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):l&&g?(this._intPt[0]=o,this._intPt[1]=r,o.equals(r)&&!u&&!p?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(n,r,i,o,u){var l=n.x<r.x?n.x:r.x,p=n.y<r.y?n.y:r.y,g=n.x>r.x?n.x:r.x,x=n.y>r.y?n.y:r.y,y=i.x<o.x?i.x:o.x,_=i.y<o.y?i.y:o.y,T=i.x>o.x?i.x:o.x,P=i.y>o.y?i.y:o.y,A=l>y?l:y,M=g<T?g:T,k=p>_?p:_,R=x<P?x:P,z=(A+M)/2,D=(k+R)/2;u.x=z,u.y=D,n.x-=u.x,n.y-=u.y,r.x-=u.x,r.y-=u.y,i.x-=u.x,i.y-=u.y,o.x-=u.x,o.y-=u.y},t.prototype.computeIntersect=function(n,r,i,o){if(this._isProper=!1,!dn.intersects(n,r,i,o))return e.NO_INTERSECTION;var u=Yt.orientationIndex(n,r,i),l=Yt.orientationIndex(n,r,o);if(u>0&&l>0||u<0&&l<0)return e.NO_INTERSECTION;var p=Yt.orientationIndex(i,o,n),g=Yt.orientationIndex(i,o,r);if(p>0&&g>0||p<0&&g<0)return e.NO_INTERSECTION;var x=u===0&&l===0&&p===0&&g===0;return x?this.computeCollinearIntersection(n,r,i,o):(u===0||l===0||p===0||g===0?(this._isProper=!1,n.equals2D(i)||n.equals2D(o)?this._intPt[0]=n:r.equals2D(i)||r.equals2D(o)?this._intPt[0]=r:u===0?this._intPt[0]=new nt(i):l===0?this._intPt[0]=new nt(o):p===0?this._intPt[0]=new nt(n):g===0&&(this._intPt[0]=new nt(r))):(this._isProper=!0,this._intPt[0]=this.intersection(n,r,i,o)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(n,r,i,o){var u=n,l=Yt.distancePointLine(n,i,o),p=Yt.distancePointLine(r,i,o);return p<l&&(l=p,u=r),p=Yt.distancePointLine(i,n,r),p<l&&(l=p,u=i),p=Yt.distancePointLine(o,n,r),p<l&&(l=p,u=o),u},t}(ui),Tg=function(){};Tg.prototype.interfaces_=function(){return[]};Tg.prototype.getClass=function(){return Tg};Tg.orientationIndex=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,u=n.y-t.y;return Tg.signOfDet2x2(r,i,o,u)};Tg.signOfDet2x2=function(e,t,n,r){var i=null,o=null,u=null;if(i=1,e===0||r===0)return t===0||n===0?0:t>0?n>0?-i:i:n>0?i:-i;if(t===0||n===0)return r>0?e>0?i:-i:e>0?-i:i;if(t>0?r>0?t<=r||(i=-i,o=e,e=n,n=o,o=t,t=r,r=o):t<=-r?(i=-i,n=-n,r=-r):(o=e,e=-n,n=o,o=t,t=-r,r=o):r>0?-t<=r?(i=-i,e=-e,t=-t):(o=-e,e=n,n=o,o=-t,t=r,r=o):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,o=-e,e=-n,n=o,o=-t,t=-r,r=o),e>0)if(n>0){if(!(e<=n))return i}else return i;else{if(n>0)return-i;if(e>=n)i=-i,e=-e,n=-n;else return-i}for(;;){if(u=Math.floor(n/e),n=n-u*e,r=r-u*t,r<0)return-i;if(r>t)return i;if(e>n+n){if(t<r+r)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(r===0)return n===0?0:-i;if(n===0||(u=Math.floor(e/n),e=e-u*n,t=t-u*r,t<0))return i;if(t>r)return-i;if(n>e+e){if(r<t+t)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(t===0)return e===0?0:i;if(e===0)return-i}};var Bu=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};Bu.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=e.x-this._p.x,o=e.y-this._p.y,u=t.x-this._p.x,l=t.y-this._p.y,p=Tg.signOfDet2x2(i,o,u,l);if(p===0)return this._isPointOnSegment=!0,null;l<o&&(p=-p),p>0&&this._crossingCount++}};Bu.prototype.isPointInPolygon=function(){return this.getLocation()!==st.EXTERIOR};Bu.prototype.getLocation=function(){return this._isPointOnSegment?st.BOUNDARY:this._crossingCount%2===1?st.INTERIOR:st.EXTERIOR};Bu.prototype.isOnSegment=function(){return this._isPointOnSegment};Bu.prototype.interfaces_=function(){return[]};Bu.prototype.getClass=function(){return Bu};Bu.locatePointInRing=function(){if(arguments[0]instanceof nt&&Sn(arguments[1],ir)){for(var e=arguments[0],t=arguments[1],n=new Bu(e),r=new nt,i=new nt,o=1;o<t.size();o++)if(t.getCoordinate(o,r),t.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof nt&&arguments[1]instanceof Array){for(var u=arguments[0],l=arguments[1],p=new Bu(u),g=1;g<l.length;g++){var x=l[g],y=l[g-1];if(p.countSegment(x,y),p.isOnSegment())return p.getLocation()}return p.getLocation()}};var Yt=function(){},Hg={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Yt.prototype.interfaces_=function(){return[]};Yt.prototype.getClass=function(){return Yt};Yt.orientationIndex=function(e,t,n){return Fs.orientationIndex(e,t,n)};Yt.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,r=1;r<e.length-1;r++){var i=e[r].x-n,o=e[r+1].y,u=e[r-1].y;t+=i*(u-o)}return t/2}else if(Sn(arguments[0],ir)){var l=arguments[0],p=l.size();if(p<3)return 0;var g=new nt,x=new nt,y=new nt;l.getCoordinate(0,x),l.getCoordinate(1,y);var _=x.x;y.x-=_;for(var T=0,P=1;P<p-1;P++)g.y=x.y,x.x=y.x,x.y=y.y,l.getCoordinate(P+1,y),y.x-=_,T+=x.x*(g.y-y.y);return T/2}};Yt.distanceLineLine=function(e,t,n,r){if(e.equals(t))return Yt.distancePointLine(e,n,r);if(n.equals(r))return Yt.distancePointLine(r,e,t);var i=!1;if(!dn.intersects(e,t,n,r))i=!0;else{var o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(o===0)i=!0;else{var u=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),l=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),p=l/o,g=u/o;(g<0||g>1||p<0||p>1)&&(i=!0)}}return i?Ra.min(Yt.distancePointLine(e,n,r),Yt.distancePointLine(t,n,r),Yt.distancePointLine(n,e,t),Yt.distancePointLine(r,e,t)):0};Yt.isPointInRing=function(e,t){return Yt.locatePointInRing(e,t)!==st.EXTERIOR};Yt.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,r=new nt;e.getCoordinate(0,r);for(var i=r.x,o=r.y,u=1;u<t;u++){e.getCoordinate(u,r);var l=r.x,p=r.y,g=l-i,x=p-o;n+=Math.sqrt(g*g+x*x),i=l,o=p}return n};Yt.isCCW=function(e){var t=e.length-1;if(t<3)throw new ri("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,i=1;i<=t;i++){var o=e[i];o.y>n.y&&(n=o,r=i)}var u=r;do u=u-1,u<0&&(u=t);while(e[u].equals2D(n)&&u!==r);var l=r;do l=(l+1)%t;while(e[l].equals2D(n)&&l!==r);var p=e[u],g=e[l];if(p.equals2D(n)||g.equals2D(n)||p.equals2D(g))return!1;var x=Yt.computeOrientation(p,n,g),y=!1;return x===0?y=p.x>g.x:y=x>0,y};Yt.locatePointInRing=function(e,t){return Bu.locatePointInRing(e,t)};Yt.distancePointLinePerpendicular=function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)};Yt.computeOrientation=function(e,t,n){return Yt.orientationIndex(e,t,n)};Yt.distancePointLine=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(t.length===0)throw new ri("Line array must contain at least one vertex");for(var n=e.distance(t[0]),r=0;r<t.length-1;r++){var i=Yt.distancePointLine(e,t[r],t[r+1]);i<n&&(n=i)}return n}else if(arguments.length===3){var o=arguments[0],u=arguments[1],l=arguments[2];if(u.x===l.x&&u.y===l.y)return o.distance(u);var p=(l.x-u.x)*(l.x-u.x)+(l.y-u.y)*(l.y-u.y),g=((o.x-u.x)*(l.x-u.x)+(o.y-u.y)*(l.y-u.y))/p;if(g<=0)return o.distance(u);if(g>=1)return o.distance(l);var x=((u.y-o.y)*(l.x-u.x)-(u.x-o.x)*(l.y-u.y))/p;return Math.abs(x)*Math.sqrt(p)}};Yt.isOnLine=function(e,t){for(var n=new lm,r=1;r<t.length;r++){var i=t[r-1],o=t[r];if(n.computeIntersection(e,i,o),n.hasIntersection())return!0}return!1};Hg.CLOCKWISE.get=function(){return-1};Hg.RIGHT.get=function(){return Yt.CLOCKWISE};Hg.COUNTERCLOCKWISE.get=function(){return 1};Hg.LEFT.get=function(){return Yt.COUNTERCLOCKWISE};Hg.COLLINEAR.get=function(){return 0};Hg.STRAIGHT.get=function(){return Yt.COLLINEAR};Object.defineProperties(Yt,Hg);var Jh=function(){};Jh.prototype.filter=function(e){};Jh.prototype.interfaces_=function(){return[]};Jh.prototype.getClass=function(){return Jh};var bn=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},Qc={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};bn.prototype.isGeometryCollection=function(){return this.getSortIndex()===bn.SORTINDEX_GEOMETRYCOLLECTION};bn.prototype.getFactory=function(){return this._factory};bn.prototype.getGeometryN=function(e){return this};bn.prototype.getArea=function(){return 0};bn.prototype.isRectangle=function(){return!1};bn.prototype.equals=function(){if(arguments[0]instanceof bn){var e=arguments[0];return e===null?!1:this.equalsTopo(e)}else if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof bn))return!1;var n=t;return this.equalsExact(n)}};bn.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)};bn.prototype.geometryChanged=function(){this.apply(bn.geometryChangedFilter)};bn.prototype.geometryChangedAction=function(){this._envelope=null};bn.prototype.equalsNorm=function(e){return e===null?!1:this.norm().equalsExact(e.norm())};bn.prototype.getLength=function(){return 0};bn.prototype.getNumGeometries=function(){return 1};bn.prototype.compareTo=function(){if(arguments.length===1){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}};bn.prototype.getUserData=function(){return this._userData};bn.prototype.getSRID=function(){return this._SRID};bn.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};bn.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===bn.SORTINDEX_GEOMETRYCOLLECTION)throw new ri("This method does not support GeometryCollection arguments")};bn.prototype.equal=function(e,t,n){return n===0?e.equals(t):e.distance(t)<=n};bn.prototype.norm=function(){var e=this.copy();return e.normalize(),e};bn.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};bn.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new dn(this._envelope)};bn.prototype.setSRID=function(e){this._SRID=e};bn.prototype.setUserData=function(e){this._userData=e};bn.prototype.compare=function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),u=i.compareTo(o);if(u!==0)return u}return n.hasNext()?1:r.hasNext()?-1:0};bn.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};bn.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===bn.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===bn.SORTINDEX_MULTIPOINT||this.getSortIndex()===bn.SORTINDEX_MULTILINESTRING||this.getSortIndex()===bn.SORTINDEX_MULTIPOLYGON};bn.prototype.interfaces_=function(){return[jS,ml,gl]};bn.prototype.getClass=function(){return bn};bn.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1};bn.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1};Qc.serialVersionUID.get=function(){return 8763622679187377e3};Qc.SORTINDEX_POINT.get=function(){return 0};Qc.SORTINDEX_MULTIPOINT.get=function(){return 1};Qc.SORTINDEX_LINESTRING.get=function(){return 2};Qc.SORTINDEX_LINEARRING.get=function(){return 3};Qc.SORTINDEX_MULTILINESTRING.get=function(){return 4};Qc.SORTINDEX_POLYGON.get=function(){return 5};Qc.SORTINDEX_MULTIPOLYGON.get=function(){return 6};Qc.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};Qc.geometryChangedFilter.get=function(){return rO};Object.defineProperties(bn,Qc);var rO=function(){};rO.interfaces_=function(){return[Jh]};rO.filter=function(e){e.geometryChangedAction()};var Uc=function(){};Uc.prototype.filter=function(e){};Uc.prototype.interfaces_=function(){return[]};Uc.prototype.getClass=function(){return Uc};var fl=function(){},uf={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};fl.prototype.isInBoundary=function(e){};fl.prototype.interfaces_=function(){return[]};fl.prototype.getClass=function(){return fl};uf.Mod2BoundaryNodeRule.get=function(){return R_};uf.EndPointBoundaryNodeRule.get=function(){return M_};uf.MultiValentEndPointBoundaryNodeRule.get=function(){return N_};uf.MonoValentEndPointBoundaryNodeRule.get=function(){return D_};uf.MOD2_BOUNDARY_RULE.get=function(){return new R_};uf.ENDPOINT_BOUNDARY_RULE.get=function(){return new M_};uf.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new N_};uf.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new D_};uf.OGC_SFS_BOUNDARY_RULE.get=function(){return fl.MOD2_BOUNDARY_RULE};Object.defineProperties(fl,uf);var R_=function(){};R_.prototype.isInBoundary=function(e){return e%2===1};R_.prototype.interfaces_=function(){return[fl]};R_.prototype.getClass=function(){return R_};var M_=function(){};M_.prototype.isInBoundary=function(e){return e>0};M_.prototype.interfaces_=function(){return[fl]};M_.prototype.getClass=function(){return M_};var N_=function(){};N_.prototype.isInBoundary=function(e){return e>1};N_.prototype.interfaces_=function(){return[fl]};N_.prototype.getClass=function(){return N_};var D_=function(){};D_.prototype.isInBoundary=function(e){return e===1};D_.prototype.interfaces_=function(){return[fl]};D_.prototype.getClass=function(){return D_};var qi=function(){};qi.prototype.add=function(){};qi.prototype.addAll=function(){};qi.prototype.isEmpty=function(){};qi.prototype.iterator=function(){};qi.prototype.size=function(){};qi.prototype.toArray=function(){};qi.prototype.remove=function(){};function iO(e){this.message=e||""}iO.prototype=new Error;iO.prototype.name="IndexOutOfBoundsException";var cv=function(){};cv.prototype.hasNext=function(){};cv.prototype.next=function(){};cv.prototype.remove=function(){};var Ul=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(qi);function hv(e){this.message=e||""}hv.prototype=new Error;hv.prototype.name="NoSuchElementException";var Vt=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof qi&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,qi]},t.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.set=function(n,r){var i=this.array_[n];return this.array_[n]=r,i},t.prototype.iterator=function(){return new rle(this)},t.prototype.get=function(n){if(n<0||n>=this.size())throw new iO;return this.array_[n]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.remove=function(n){for(var r=this,i=!1,o=0,u=this.array_.length;o<u;o++)if(r.array_[o]===n){r.array_.splice(o,1),i=!0;break}return i},t}(Ul),rle=function(e){function t(n){e.call(this),this.arrayList_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new hv;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(cv),Cx=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(r){return this.get(r)},t.prototype.addAll=function(){var r=this;if(arguments.length===2){for(var i=arguments[0],o=arguments[1],u=!1,l=i.iterator();l.hasNext();)r.add(l.next(),o),u=!0;return u}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var r=this,i=e.prototype.clone.call(this),o=0;o<this.size();o++)i.add(o,r.get(o).copy());return i},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var r=this;if(arguments.length===1){var i=arguments[0];e.prototype.add.call(this,i)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var o=arguments[0],u=arguments[1];return this.add(o,u,!0),!0}else if(arguments[0]instanceof nt&&typeof arguments[1]=="boolean"){var l=arguments[0],p=arguments[1];if(!p&&this.size()>=1){var g=this.get(this.size()-1);if(g.equals2D(l))return null}e.prototype.add.call(this,l)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var x=arguments[0],y=arguments[1];return this.add(x,y),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var _=arguments[0],T=arguments[1],P=arguments[2];if(P)for(var A=0;A<_.length;A++)r.add(_[A],T);else for(var M=_.length-1;M>=0;M--)r.add(_[M],T);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof nt){var k=arguments[0],R=arguments[1],z=arguments[2];if(!z){var D=this.size();if(D>0){if(k>0){var U=this.get(k-1);if(U.equals2D(R))return null}if(k<D){var V=this.get(k);if(V.equals2D(R))return null}}}e.prototype.add.call(this,k,R)}}else if(arguments.length===4){var G=arguments[0],H=arguments[1],J=arguments[2],Y=arguments[3],X=1;J>Y&&(X=-1);for(var ee=J;ee!==Y;ee+=X)r.add(G[ee],H);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new nt(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}(Vt),Xn=function(){},US={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};US.ForwardComparator.get=function(){return k1};US.BidirectionalComparator.get=function(){return z_};US.coordArrayType.get=function(){return new Array(0).fill(null)};Xn.prototype.interfaces_=function(){return[]};Xn.prototype.getClass=function(){return Xn};Xn.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))};Xn.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(Xn.indexOf(r,t)<0)return r}return null};Xn.scroll=function(e,t){var n=Xn.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);Mo.arraycopy(e,n,r,0,e.length-n),Mo.arraycopy(e,0,r,e.length-n,n),Mo.arraycopy(r,0,e,0,e.length)};Xn.equals=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(r===null||i===null||r.length!==i.length)return!1;for(var u=0;u<r.length;u++)if(o.compare(r[u],i[u])!==0)return!1;return!0}};Xn.intersection=function(e,t){for(var n=new Cx,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()};Xn.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1};Xn.removeRepeatedPoints=function(e){if(!Xn.hasRepeatedPoints(e))return e;var t=new Cx(e,!1);return t.toCoordinateArray()};Xn.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}};Xn.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)e[n]!==null&&t++;var r=new Array(t).fill(null);if(t===0)return r;for(var i=0,o=0;o<e.length;o++)e[o]!==null&&(r[i++]=e[o]);return r};Xn.copyDeep=function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new nt(e[n]);return t}else if(arguments.length===5)for(var r=arguments[0],i=arguments[1],o=arguments[2],u=arguments[3],l=arguments[4],p=0;p<l;p++)o[u+p]=new nt(r[i+p])};Xn.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(r.compareTo(i)!==0)return!1}return!0};Xn.envelope=function(e){for(var t=new dn,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t};Xn.toCoordinateArray=function(e){return e.toArray(Xn.coordArrayType)};Xn.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]};Xn.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1};Xn.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(r!==0)return r}return 1};Xn.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(r!==0)return r;n++}return n<t.length?-1:n<e.length?1:0};Xn.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(t===null||t.compareTo(e[n])>0)&&(t=e[n]);return t};Xn.extract=function(e,t,n){t=Ra.clamp(t,0,e.length),n=Ra.clamp(n,-1,e.length);var r=n-t+1;n<0&&(r=0),t>=e.length&&(r=0),n<t&&(r=0);var i=new Array(r).fill(null);if(r===0)return i;for(var o=0,u=t;u<=n;u++)i[o++]=e[u];return i};Object.defineProperties(Xn,US);var k1=function(){};k1.prototype.compare=function(e,t){var n=e,r=t;return Xn.compare(n,r)};k1.prototype.interfaces_=function(){return[O_]};k1.prototype.getClass=function(){return k1};var z_=function(){};z_.prototype.compare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var i=Xn.compare(n,r),o=Xn.isEqualReversed(n,r);return o?0:i};z_.prototype.OLDcompare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var i=Xn.increasingDirection(n),o=Xn.increasingDirection(r),u=i>0?0:n.length-1,l=o>0?0:n.length-1,p=0;p<n.length;p++){var g=n[u].compareTo(r[l]);if(g!==0)return g;u+=i,l+=o}return 0};z_.prototype.interfaces_=function(){return[O_]};z_.prototype.getClass=function(){return z_};var Zg=function(){};Zg.prototype.get=function(){};Zg.prototype.put=function(){};Zg.prototype.size=function(){};Zg.prototype.values=function(){};Zg.prototype.entrySet=function(){};var ile=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Zg);function Ix(e){this.message=e||""}Ix.prototype=new Error;Ix.prototype.name="OperationNotSupported";function VS(){}VS.prototype=new qi;VS.prototype.contains=function(){};var oO=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof qi&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(n){for(var r=this,i=0,o=this.array_.length;i<o;i++){var u=r.array_[i];if(u===n)return!0}return!1},t.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.remove=function(n){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.iterator=function(){return new ole(this)},t}(VS),ole=function(e){function t(n){e.call(this),this.hashSet_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new hv;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new Ix},t}(cv),Fh=0,ep=1;function A3(e){return e===null?Fh:e.color}function zr(e){return e===null?null:e.parent}function Ah(e,t){e!==null&&(e.color=t)}function eC(e){return e===null?null:e.left}function O3(e){return e===null?null:e.right}function qo(){this.root_=null,this.size_=0}qo.prototype=new ile;qo.prototype.get=function(e){for(var t=this.root_;t!==null;){var n=e.compareTo(t.key);if(n<0)t=t.left;else if(n>0)t=t.right;else return t.value}return null};qo.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Fh,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n=this.root_,r,i;do if(r=n,i=e.compareTo(n.key),i<0)n=n.left;else if(i>0)n=n.right;else{var o=n.value;return n.value=t,o}while(n!==null);var u={key:e,left:null,right:null,value:t,parent:r,color:Fh,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=u:r.right=u,this.fixAfterInsertion(u),this.size_++,null};qo.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=ep;e!=null&&e!==this.root_&&e.parent.color===ep;)if(zr(e)===eC(zr(zr(e)))){var n=O3(zr(zr(e)));A3(n)===ep?(Ah(zr(e),Fh),Ah(n,Fh),Ah(zr(zr(e)),ep),e=zr(zr(e))):(e===O3(zr(e))&&(e=zr(e),t.rotateLeft(e)),Ah(zr(e),Fh),Ah(zr(zr(e)),ep),t.rotateRight(zr(zr(e))))}else{var r=eC(zr(zr(e)));A3(r)===ep?(Ah(zr(e),Fh),Ah(r,Fh),Ah(zr(zr(e)),ep),e=zr(zr(e))):(e===eC(zr(e))&&(e=zr(e),t.rotateRight(e)),Ah(zr(e),Fh),Ah(zr(zr(e)),ep),t.rotateLeft(zr(zr(e))))}this.root_.color=Fh};qo.prototype.values=function(){var e=new Vt,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=qo.successor(t))!==null;)e.add(t.value);return e};qo.prototype.entrySet=function(){var e=new oO,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=qo.successor(t))!==null;)e.add(t);return e};qo.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};qo.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};qo.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};qo.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var n=e.parent,r=e;n!==null&&r===n.right;)r=n,n=n.parent;return n}};qo.prototype.size=function(){return this.size_};var R1=function(){};R1.prototype.interfaces_=function(){return[]};R1.prototype.getClass=function(){return R1};function v$(){}v$.prototype=new VS;function qu(){this.array_=[],arguments[0]instanceof qi&&this.addAll(arguments[0])}qu.prototype=new v$;qu.prototype.contains=function(e){for(var t=this,n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===0)return!0}return!1};qu.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===1)return t.array_.splice(n,0,e),!0}return this.array_.push(e),!0};qu.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next());return!0};qu.prototype.remove=function(e){throw new Ix};qu.prototype.size=function(){return this.array_.length};qu.prototype.isEmpty=function(){return this.array_.length===0};qu.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};qu.prototype.iterator=function(){return new qS(this)};var qS=function(e){this.treeSet_=e,this.position_=0};qS.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new hv;return this.treeSet_.array_[this.position_++]};qS.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};qS.prototype.remove=function(){throw new Ix};var Rp=function(){};Rp.sort=function(){var e=arguments[0],t,n,r,i;if(arguments.length===1)i=function(u,l){return u.compareTo(l)},e.sort(i);else if(arguments.length===2)r=arguments[1],i=function(u,l){return r.compare(u,l)},e.sort(i);else if(arguments.length===3){n=e.slice(arguments[1],arguments[2]),n.sort();var o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));for(e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])}else if(arguments.length===4)for(n=e.slice(arguments[1],arguments[2]),r=arguments[3],i=function(u,l){return r.compare(u,l)},n.sort(i),o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length)),e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])};Rp.asList=function(e){for(var t=new Vt,n=0,r=e.length;n<r;n++)t.add(e[n]);return t};var pr=function(){},ou={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};ou.P.get=function(){return 0};ou.L.get=function(){return 1};ou.A.get=function(){return 2};ou.FALSE.get=function(){return-1};ou.TRUE.get=function(){return-2};ou.DONTCARE.get=function(){return-3};ou.SYM_FALSE.get=function(){return"F"};ou.SYM_TRUE.get=function(){return"T"};ou.SYM_DONTCARE.get=function(){return"*"};ou.SYM_P.get=function(){return"0"};ou.SYM_L.get=function(){return"1"};ou.SYM_A.get=function(){return"2"};pr.prototype.interfaces_=function(){return[]};pr.prototype.getClass=function(){return pr};pr.toDimensionSymbol=function(e){switch(e){case pr.FALSE:return pr.SYM_FALSE;case pr.TRUE:return pr.SYM_TRUE;case pr.DONTCARE:return pr.SYM_DONTCARE;case pr.P:return pr.SYM_P;case pr.L:return pr.SYM_L;case pr.A:return pr.SYM_A}throw new ri("Unknown dimension value: "+e)};pr.toDimensionValue=function(e){switch(O1.toUpperCase(e)){case pr.SYM_FALSE:return pr.FALSE;case pr.SYM_TRUE:return pr.TRUE;case pr.SYM_DONTCARE:return pr.DONTCARE;case pr.SYM_P:return pr.P;case pr.SYM_L:return pr.L;case pr.SYM_A:return pr.A}throw new ri("Unknown dimension symbol: "+e)};Object.defineProperties(pr,ou);var Gu=function(){};Gu.prototype.filter=function(e){};Gu.prototype.interfaces_=function(){return[]};Gu.prototype.getClass=function(){return Gu};var Zl=function(){};Zl.prototype.filter=function(e,t){};Zl.prototype.isDone=function(){};Zl.prototype.isGeometryChanged=function(){};Zl.prototype.interfaces_=function(){return[]};Zl.prototype.getClass=function(){return Zl};var cs=function(e){function t(r,i){if(e.call(this,i),this._geometries=r||[],e.hasNullElements(this._geometries))throw new ri("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var r=this,i=new dn,o=0;o<this._geometries.length;o++)i.expandToInclude(r._geometries[o].getEnvelopeInternal());return i},t.prototype.getGeometryN=function(r){return this._geometries[r]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var r=this,i=new Array(this.getNumPoints()).fill(null),o=-1,u=0;u<this._geometries.length;u++)for(var l=r._geometries[u].getCoordinates(),p=0;p<l.length;p++)o++,i[o]=l[p];return i},t.prototype.getArea=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getArea();return i},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var u=i;if(this._geometries.length!==u._geometries.length)return!1;for(var l=0;l<this._geometries.length;l++)if(!r._geometries[l].equalsExact(u._geometries[l],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<this._geometries.length;i++)r._geometries[i].normalize();Rp.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var r=this,i=pr.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getBoundaryDimension());return i},t.prototype.getDimension=function(){for(var r=this,i=pr.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getDimension());return i},t.prototype.getLength=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getNumPoints();return i},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),u=0;u<this._geometries.length;u++)o[u]=r._geometries[u].reverse();return this.getFactory().createGeometryCollection(o)},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=new qu(Rp.asList(this._geometries)),u=new qu(Rp.asList(i._geometries));return this.compare(o,u)}else if(arguments.length===2){for(var l=arguments[0],p=arguments[1],g=l,x=this.getNumGeometries(),y=g.getNumGeometries(),_=0;_<x&&_<y;){var T=r.getGeometryN(_),P=g.getGeometryN(_),A=T.compareToSameClass(P,p);if(A!==0)return A;_++}return _<x?1:_<y?-1:0}},t.prototype.apply=function(){var r=this;if(Sn(arguments[0],Uc))for(var i=arguments[0],o=0;o<this._geometries.length;o++)r._geometries[o].apply(i);else if(Sn(arguments[0],Zl)){var u=arguments[0];if(this._geometries.length===0)return null;for(var l=0;l<this._geometries.length&&(r._geometries[l].apply(u),!u.isDone());l++);u.isGeometryChanged()&&this.geometryChanged()}else if(Sn(arguments[0],Gu)){var p=arguments[0];p.filter(this);for(var g=0;g<this._geometries.length;g++)r._geometries[g].apply(p)}else if(Sn(arguments[0],Jh)){var x=arguments[0];x.filter(this);for(var y=0;y<this._geometries.length;y++)r._geometries[y].apply(x)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),zn.shouldNeverReachHere(),null},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._geometries=new Array(this._geometries.length).fill(null);for(var o=0;o<this._geometries.length;o++)i._geometries[o]=r._geometries[o].clone();return i},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.isEmpty=function(){for(var r=this,i=0;i<this._geometries.length;i++)if(!r._geometries[i].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,n),t}(bn),Vp=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return bn.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?pr.FALSE:0},t.prototype.isClosed=function(){var r=this;if(this.isEmpty())return!1;for(var i=0;i<this._geometries.length;i++)if(!r._geometries[i].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),u=0;u<this._geometries.length;u++)o[i-1-u]=r._geometries[u].reverse();return this.getFactory().createMultiLineString(o)},t.prototype.getBoundary=function(){return new ll(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[R1]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,n),t}(cs),ll=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var e=arguments[0],t=fl.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};ll.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return t.length===1?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};ll.prototype.getBoundary=function(){return this._geom instanceof vi?this.boundaryLineString(this._geom):this._geom instanceof Vp?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};ll.prototype.boundaryLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this._bnRule.isInBoundary(2);return t?e.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])};ll.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};ll.prototype.computeBoundaryCoordinates=function(e){var t=this,n=new Vt;this._endpointMap=new qo;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);i.getNumPoints()!==0&&(t.addEndpoint(i.getCoordinateN(0)),t.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var u=o.next(),l=u.getValue(),p=l.count;t._bnRule.isInBoundary(p)&&n.add(u.getKey())}return Xn.toCoordinateArray(n)};ll.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);t===null&&(t=new fE,this._endpointMap.put(e,t)),t.count++};ll.prototype.interfaces_=function(){return[]};ll.prototype.getClass=function(){return ll};ll.getBoundary=function(){if(arguments.length===1){var e=arguments[0],t=new ll(e);return t.getBoundary()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new ll(n,r);return i.getBoundary()}};var fE=function(){this.count=null};fE.prototype.interfaces_=function(){return[]};fE.prototype.getClass=function(){return fE};function sle(){}function ale(){}var lle=function(){};function ule(){}function cle(){}function hle(){}var ul=function(){},sO={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};ul.prototype.interfaces_=function(){return[]};ul.prototype.getClass=function(){return ul};ul.chars=function(e,t){for(var n=new Array(t).fill(null),r=0;r<t;r++)n[r]=e;return String(n)};ul.getStackTrace=function(){if(arguments.length===1){var e=arguments[0],t=new ule,n=new sle;return e.printStackTrace(n),t.toString()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o="";new ale(ul.getStackTrace(r));for(var u=new hle,l=0;l<i;l++)try{o+=u.readLine()+ul.NEWLINE}catch(p){if(p instanceof cle)zn.shouldNeverReachHere();else throw p}finally{}return o}};ul.split=function(e,t){for(var n=t.length,r=new Vt,i=""+e,o=i.indexOf(t);o>=0;){var u=i.substring(0,o);r.add(u),i=i.substring(o+n),o=i.indexOf(t)}i.length>0&&r.add(i);for(var l=new Array(r.size()).fill(null),p=0;p<l.length;p++)l[p]=r.get(p);return l};ul.toString=function(){if(arguments.length===1){var e=arguments[0];return ul.SIMPLE_ORDINATE_FORMAT.format(e)}};ul.spaces=function(e){return ul.chars(" ",e)};sO.NEWLINE.get=function(){return Mo.getProperty("line.separator")};sO.SIMPLE_ORDINATE_FORMAT.get=function(){return new lle};Object.defineProperties(ul,sO);var Oi=function(){};Oi.prototype.interfaces_=function(){return[]};Oi.prototype.getClass=function(){return Oi};Oi.copyCoord=function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,e.getOrdinate(t,o))};Oi.isRing=function(e){var t=e.size();return t===0?!0:t<=3?!1:e.getOrdinate(0,ir.X)===e.getOrdinate(t-1,ir.X)&&e.getOrdinate(0,ir.Y)===e.getOrdinate(t-1,ir.Y)};Oi.isEqual=function(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),o=0;o<n;o++)for(var u=0;u<i;u++){var l=e.getOrdinate(o,u),p=t.getOrdinate(o,u);if(e.getOrdinate(o,u)!==t.getOrdinate(o,u)&&!(kn.isNaN(l)&&kn.isNaN(p)))return!1}return!0};Oi.extend=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();if(Oi.copy(t,0,r,0,i),i>0)for(var o=i;o<n;o++)Oi.copy(t,i-1,r,o,1);return r};Oi.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)Oi.swap(e,r,t-r)};Oi.swap=function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}};Oi.copy=function(e,t,n,r,i){for(var o=0;o<i;o++)Oi.copyCoord(e,t+o,n,r+o)};Oi.toString=function(){if(arguments.length===1){var e=arguments[0],t=e.size();if(t===0)return"()";var n=e.getDimension(),r=new tc;r.append("(");for(var i=0;i<t;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(ul.toString(e.getOrdinate(i,o)))}return r.append(")"),r.toString()}};Oi.ensureValidRing=function(e,t){var n=t.size();if(n===0)return t;if(n<=3)return Oi.createClosedRing(e,t,4);var r=t.getOrdinate(0,ir.X)===t.getOrdinate(n-1,ir.X)&&t.getOrdinate(0,ir.Y)===t.getOrdinate(n-1,ir.Y);return r?t:Oi.createClosedRing(e,t,n+1)};Oi.createClosedRing=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();Oi.copy(t,0,r,0,i);for(var o=i;o<n;o++)Oi.copy(t,0,r,o,1);return r};var vi=function(e){function t(r,i){e.call(this,i),this._points=null,this.init(r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new dn:this._points.expandEnvelope(new dn)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var u=i;if(this._points.size()!==u._points.size())return!1;for(var l=0;l<this._points.size();l++)if(!r.equal(r._points.getCoordinate(l),u._points.getCoordinate(l),o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<Math.trunc(this._points.size()/2);i++){var o=r._points.size()-1-i;if(!r._points.getCoordinate(i).equals(r._points.getCoordinate(o)))return r._points.getCoordinate(i).compareTo(r._points.getCoordinate(o))>0&&Oi.reverse(r._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?pr.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return Yt.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var r=this._points.copy();Oi.reverse(r);var i=this.getFactory().createLineString(r);return i},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){for(var i=arguments[0],o=i,u=0,l=0;u<this._points.size()&&l<o._points.size();){var p=r._points.getCoordinate(u).compareTo(o._points.getCoordinate(l));if(p!==0)return p;u++,l++}return u<this._points.size()?1:l<o._points.size()?-1:0}else if(arguments.length===2){var g=arguments[0],x=arguments[1],y=g;return x.compare(this._points,y._points)}},t.prototype.apply=function(){var r=this;if(Sn(arguments[0],Uc))for(var i=arguments[0],o=0;o<this._points.size();o++)i.filter(r._points.getCoordinate(o));else if(Sn(arguments[0],Zl)){var u=arguments[0];if(this._points.size()===0)return null;for(var l=0;l<this._points.size()&&(u.filter(r._points,l),!u.isDone());l++);u.isGeometryChanged()&&this.geometryChanged()}else if(Sn(arguments[0],Gu)){var p=arguments[0];p.filter(this)}else if(Sn(arguments[0],Jh)){var g=arguments[0];g.filter(this)}},t.prototype.getBoundary=function(){return new ll(this).getBoundary()},t.prototype.isEquivalentClass=function(r){return r instanceof t},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._points=this._points.clone(),r},t.prototype.getCoordinateN=function(r){return this._points.getCoordinate(r)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(r){if(r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),r.size()===1)throw new ri("Invalid number of points in LineString (found "+r.size()+" - must be 0 or >= 2)");this._points=r},t.prototype.isCoordinate=function(r){for(var i=this,o=0;o<this._points.size();o++)if(i._points.getCoordinate(o).equals(r))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(r){return this.getFactory().createPoint(this._points.getCoordinate(r))},t.prototype.interfaces_=function(){return[R1]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(bn),M1=function(){};M1.prototype.interfaces_=function(){return[]};M1.prototype.getClass=function(){return M1};var sa=function(e){function t(r,i){e.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new dn;var r=new dn;return r.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),r},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?this.isEmpty()&&r.isEmpty()?!0:this.isEmpty()!==r.isEmpty()?!1:this.equal(r.getCoordinate(),this.getCoordinate(),i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return pr.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var r=arguments[0],i=r;return this.getCoordinate().compareTo(i.getCoordinate())}else if(arguments.length===2){var o=arguments[0],u=arguments[1],l=o;return u.compare(this._coordinates,l._coordinates)}},t.prototype.apply=function(){if(Sn(arguments[0],Uc)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(Sn(arguments[0],Zl)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this._coordinates,0),i.isGeometryChanged()&&this.geometryChanged()}else if(Sn(arguments[0],Gu)){var o=arguments[0];o.filter(this)}else if(Sn(arguments[0],Jh)){var u=arguments[0];u.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._coordinates=this._coordinates.clone(),r},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(r){r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),zn.isTrue(r.size()<=1),this._coordinates=r},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[M1]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,n),t}(bn),fd=function(){};fd.prototype.interfaces_=function(){return[]};fd.prototype.getClass=function(){return fd};var Xi=function(e){function t(r,i,o){if(e.call(this,o),this._shell=null,this._holes=null,r===null&&(r=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new ri("holes must not contain null elements");if(r.isEmpty()&&e.hasNonEmptyElements(i))throw new ri("shell is empty but holes are not");this._shell=r,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var r=this;if(this.isEmpty())return[];for(var i=new Array(this.getNumPoints()).fill(null),o=-1,u=this._shell.getCoordinates(),l=0;l<u.length;l++)o++,i[o]=u[l];for(var p=0;p<this._holes.length;p++)for(var g=r._holes[p].getCoordinates(),x=0;x<g.length;x++)o++,i[o]=g[x];return i},t.prototype.getArea=function(){var r=this,i=0;i+=Math.abs(Yt.signedArea(this._shell.getCoordinateSequence()));for(var o=0;o<this._holes.length;o++)i-=Math.abs(Yt.signedArea(r._holes[o].getCoordinateSequence()));return i},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var r=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),o=0;o<5;o++){var u=r.getX(o);if(!(u===i.getMinX()||u===i.getMaxX()))return!1;var l=r.getY(o);if(!(l===i.getMinY()||l===i.getMaxY()))return!1}for(var p=r.getX(0),g=r.getY(0),x=1;x<=4;x++){var y=r.getX(x),_=r.getY(x),T=y!==p,P=_!==g;if(T===P)return!1;p=y,g=_}return!0},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var u=i,l=this._shell,p=u._shell;if(!l.equalsExact(p,o)||this._holes.length!==u._holes.length)return!1;for(var g=0;g<this._holes.length;g++)if(!r._holes[g].equalsExact(u._holes[g],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var r=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var i=0;i<this._holes.length;i++)r.normalize(r._holes[i],!1);Rp.sort(this._holes)}else if(arguments.length===2){var o=arguments[0],u=arguments[1];if(o.isEmpty())return null;var l=new Array(o.getCoordinates().length-1).fill(null);Mo.arraycopy(o.getCoordinates(),0,l,0,l.length);var p=Xn.minCoordinate(o.getCoordinates());Xn.scroll(l,p),Mo.arraycopy(l,0,o.getCoordinates(),0,l.length),o.getCoordinates()[l.length]=l[0],Yt.isCCW(o.getCoordinates())===u&&Xn.reverse(o.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var r=this,i=0;i+=this._shell.getLength();for(var o=0;o<this._holes.length;o++)i+=r._holes[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=this._shell.getNumPoints(),o=0;o<this._holes.length;o++)i+=r._holes[o].getNumPoints();return i},t.prototype.reverse=function(){var r=this,i=this.copy();i._shell=this._shell.copy().reverse(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].copy().reverse();return i},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=this._shell,u=i._shell;return o.compareToSameClass(u)}else if(arguments.length===2){var l=arguments[0],p=arguments[1],g=l,x=this._shell,y=g._shell,_=x.compareToSameClass(y,p);if(_!==0)return _;for(var T=this.getNumInteriorRing(),P=g.getNumInteriorRing(),A=0;A<T&&A<P;){var M=r.getInteriorRingN(A),k=g.getInteriorRingN(A),R=M.compareToSameClass(k,p);if(R!==0)return R;A++}return A<T?1:A<P?-1:0}},t.prototype.apply=function(r){var i=this;if(Sn(r,Uc)){this._shell.apply(r);for(var o=0;o<this._holes.length;o++)i._holes[o].apply(r)}else if(Sn(r,Zl)){if(this._shell.apply(r),!r.isDone())for(var u=0;u<this._holes.length&&(i._holes[u].apply(r),!r.isDone());u++);r.isGeometryChanged()&&this.geometryChanged()}else if(Sn(r,Gu))r.filter(this);else if(Sn(r,Jh)){r.filter(this),this._shell.apply(r);for(var l=0;l<this._holes.length;l++)i._holes[l].apply(r)}},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var i=new Array(this._holes.length+1).fill(null);i[0]=this._shell;for(var o=0;o<this._holes.length;o++)i[o+1]=r._holes[o];return i.length<=1?this.getFactory().createLinearRing(i[0].getCoordinateSequence()):this.getFactory().createMultiLineString(i)},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._shell=this._shell.clone(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].clone();return i},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var r=this,i=this._shell.copy(),o=new Array(this._holes.length).fill(null),u=0;u<o.length;u++)o[u]=r._holes[u].copy();return new t(i,o,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(r){return this._holes[r]},t.prototype.interfaces_=function(){return[fd]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(bn),F_=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return bn.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var r=arguments[0];return this._geometries[r].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return pr.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[M1]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,n),t}(cs),Vc=function(e){function t(r,i){r instanceof nt&&i instanceof Kn&&(r=i.getCoordinateSequenceFactory().create(r)),e.call(this,r,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return bn.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return pr.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var r=this._points.copy();Oi.reverse(r);var i=this.getFactory().createLinearRing(r);return i},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new ri("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new ri("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(vi),zc=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return bn.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),u=0;u<this._geometries.length;u++)o[u]=r._geometries[u].reverse();return this.getFactory().createMultiPolygon(o)},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var i=new Vt,o=0;o<this._geometries.length;o++)for(var u=r._geometries[o],l=u.getBoundary(),p=0;p<l.getNumGeometries();p++)i.add(l.getGeometryN(p));var g=new Array(i.size()).fill(null);return this.getFactory().createMultiLineString(i.toArray(g))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[fd]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(cs),dl=function(e){this._factory=e||null,this._isUserDataCopied=!1},GS={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};dl.prototype.setCopyUserData=function(e){this._isUserDataCopied=e};dl.prototype.edit=function(e,t){if(e===null)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n};dl.prototype.editInternal=function(e,t){return this._factory===null&&(this._factory=e.getFactory()),e instanceof cs?this.editGeometryCollection(e,t):e instanceof Xi?this.editPolygon(e,t):e instanceof sa?t.edit(e,this._factory):e instanceof vi?t.edit(e,this._factory):(zn.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)};dl.prototype.editGeometryCollection=function(e,t){for(var n=this,r=t.edit(e,this._factory),i=new Vt,o=0;o<r.getNumGeometries();o++){var u=n.edit(r.getGeometryN(o),t);u===null||u.isEmpty()||i.add(u)}return r.getClass()===F_?this._factory.createMultiPoint(i.toArray([])):r.getClass()===Vp?this._factory.createMultiLineString(i.toArray([])):r.getClass()===zc?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))};dl.prototype.editPolygon=function(e,t){var n=this,r=t.edit(e,this._factory);if(r===null&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var i=this.edit(r.getExteriorRing(),t);if(i===null||i.isEmpty())return this._factory.createPolygon();for(var o=new Vt,u=0;u<r.getNumInteriorRing();u++){var l=n.edit(r.getInteriorRingN(u),t);l===null||l.isEmpty()||o.add(l)}return this._factory.createPolygon(i,o.toArray([]))};dl.prototype.interfaces_=function(){return[]};dl.prototype.getClass=function(){return dl};dl.GeometryEditorOperation=function(){};GS.NoOpGeometryOperation.get=function(){return N1};GS.CoordinateOperation.get=function(){return D1};GS.CoordinateSequenceOperation.get=function(){return z1};Object.defineProperties(dl,GS);var N1=function(){};N1.prototype.edit=function(e,t){return e};N1.prototype.interfaces_=function(){return[dl.GeometryEditorOperation]};N1.prototype.getClass=function(){return N1};var D1=function(){};D1.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return n===null?e:e instanceof Vc?t.createLinearRing(n):e instanceof vi?t.createLineString(n):e instanceof sa?n.length>0?t.createPoint(n[0]):t.createPoint():e};D1.prototype.interfaces_=function(){return[dl.GeometryEditorOperation]};D1.prototype.getClass=function(){return D1};var z1=function(){};z1.prototype.edit=function(e,t){return e instanceof Vc?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof vi?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof sa?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e};z1.prototype.interfaces_=function(){return[dl.GeometryEditorOperation]};z1.prototype.getClass=function(){return z1};var Pi=function(){var e=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)e._coordinates[n]=new nt}else if(Sn(arguments[0],ir)){var r=arguments[0];if(r===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)e._coordinates[i]=r.getCoordinateCopy(i)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],u=arguments[1];this._coordinates=o,this._dimension=u,o===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var l=arguments[0],p=arguments[1];this._coordinates=new Array(l).fill(null),this._dimension=p;for(var g=0;g<l;g++)e._coordinates[g]=new nt}}},x$={serialVersionUID:{configurable:!0}};Pi.prototype.setOrdinate=function(e,t,n){switch(t){case ir.X:this._coordinates[e].x=n;break;case ir.Y:this._coordinates[e].y=n;break;case ir.Z:this._coordinates[e].z=n;break;default:throw new ri("invalid ordinateIndex")}};Pi.prototype.size=function(){return this._coordinates.length};Pi.prototype.getOrdinate=function(e,t){switch(t){case ir.X:return this._coordinates[e].x;case ir.Y:return this._coordinates[e].y;case ir.Z:return this._coordinates[e].z}return kn.NaN};Pi.prototype.getCoordinate=function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}};Pi.prototype.getCoordinateCopy=function(e){return new nt(this._coordinates[e])};Pi.prototype.getDimension=function(){return this._dimension};Pi.prototype.getX=function(e){return this._coordinates[e].x};Pi.prototype.clone=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].clone();return new Pi(t,this._dimension)};Pi.prototype.expandEnvelope=function(e){for(var t=this,n=0;n<this._coordinates.length;n++)e.expandToInclude(t._coordinates[n]);return e};Pi.prototype.copy=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].copy();return new Pi(t,this._dimension)};Pi.prototype.toString=function(){var e=this;if(this._coordinates.length>0){var t=new tc(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)t.append(", "),t.append(e._coordinates[n]);return t.append(")"),t.toString()}else return"()"};Pi.prototype.getY=function(e){return this._coordinates[e].y};Pi.prototype.toCoordinateArray=function(){return this._coordinates};Pi.prototype.interfaces_=function(){return[ir,gl]};Pi.prototype.getClass=function(){return Pi};x$.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(Pi,x$);var qc=function(){},aO={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};qc.prototype.readResolve=function(){return qc.instance()};qc.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new Pi(e)}else if(Sn(arguments[0],ir)){var t=arguments[0];return new Pi(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new Pi(n):new Pi(n,r)}};qc.prototype.interfaces_=function(){return[k_,gl]};qc.prototype.getClass=function(){return qc};qc.instance=function(){return qc.instanceObject};aO.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};aO.instanceObject.get=function(){return new qc};Object.defineProperties(qc,aO);var b$=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(n){return this.map_.get(n)||null},t.prototype.put=function(n,r){return this.map_.set(n,r),r},t.prototype.values=function(){for(var n=new Vt,r=this.map_.values(),i=r.next();!i.done;)n.add(i.value),i=r.next();return n},t.prototype.entrySet=function(){var n=new oO;return this.map_.entries().forEach(function(r){return n.add(r)}),n},t.prototype.size=function(){return this.map_.size()},t}(Zg),gr=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Hu){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},lO={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};gr.prototype.equals=function(e){if(!(e instanceof gr))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale};gr.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new Vu(n).compareTo(new Vu(r))};gr.prototype.getScale=function(){return this._scale};gr.prototype.isFloating=function(){return this._modelType===gr.FLOATING||this._modelType===gr.FLOATING_SINGLE};gr.prototype.getType=function(){return this._modelType};gr.prototype.toString=function(){var e="UNKNOWN";return this._modelType===gr.FLOATING?e="Floating":this._modelType===gr.FLOATING_SINGLE?e="Floating-Single":this._modelType===gr.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e};gr.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var e=arguments[0];if(kn.isNaN(e))return e;if(this._modelType===gr.FLOATING_SINGLE){var t=e;return t}return this._modelType===gr.FIXED?Math.round(e*this._scale)/this._scale:e}else if(arguments[0]instanceof nt){var n=arguments[0];if(this._modelType===gr.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};gr.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===gr.FLOATING?e=16:this._modelType===gr.FLOATING_SINGLE?e=6:this._modelType===gr.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e};gr.prototype.setScale=function(e){this._scale=Math.abs(e)};gr.prototype.interfaces_=function(){return[gl,ml]};gr.prototype.getClass=function(){return gr};gr.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t};lO.serialVersionUID.get=function(){return 7777263578777804e3};lO.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(gr,lO);var Hu=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},uO={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Hu.prototype.readResolve=function(){return Hu.nameToTypeMap.get(this._name)};Hu.prototype.toString=function(){return this._name};Hu.prototype.interfaces_=function(){return[gl]};Hu.prototype.getClass=function(){return Hu};uO.serialVersionUID.get=function(){return-552860263173159e4};uO.nameToTypeMap.get=function(){return new b$};Object.defineProperties(Hu,uO);gr.Type=Hu;gr.FIXED=new Hu("FIXED");gr.FLOATING=new Hu("FLOATING");gr.FLOATING_SINGLE=new Hu("FLOATING SINGLE");var Kn=function e(){this._precisionModel=new gr,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?Sn(arguments[0],k_)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof gr&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},w$={serialVersionUID:{configurable:!0}};Kn.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new nt(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new nt(e.getMinX(),e.getMinY()),new nt(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new nt(e.getMinX(),e.getMinY()),new nt(e.getMinX(),e.getMaxY()),new nt(e.getMaxX(),e.getMaxY()),new nt(e.getMaxX(),e.getMinY()),new nt(e.getMinX(),e.getMinY())]),null)};Kn.prototype.createLineString=function(e){if(e){if(e instanceof Array)return new vi(this.getCoordinateSequenceFactory().create(e),this);if(Sn(e,ir))return new vi(e,this)}else return new vi(this.getCoordinateSequenceFactory().create([]),this)};Kn.prototype.createMultiLineString=function(){if(arguments.length===0)return new Vp(null,this);if(arguments.length===1){var e=arguments[0];return new Vp(e,this)}};Kn.prototype.buildGeometry=function(e){for(var t=null,n=!1,r=!1,i=e.iterator();i.hasNext();){var o=i.next(),u=o.getClass();t===null&&(t=u),u!==t&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(t===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Kn.toGeometryArray(e));var l=e.iterator().next(),p=e.size()>1;if(p){if(l instanceof Xi)return this.createMultiPolygon(Kn.toPolygonArray(e));if(l instanceof vi)return this.createMultiLineString(Kn.toLineStringArray(e));if(l instanceof sa)return this.createMultiPoint(Kn.toPointArray(e));zn.shouldNeverReachHere("Unhandled class: "+l.getClass().getName())}return l};Kn.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)};Kn.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof nt){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if(Sn(arguments[0],ir)){var t=arguments[0];return new sa(t,this)}}};Kn.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};Kn.prototype.createPolygon=function(){if(arguments.length===0)return new Xi(null,null,this);if(arguments.length===1){if(Sn(arguments[0],ir)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof Vc){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return new Xi(r,i,this)}};Kn.prototype.getSRID=function(){return this._SRID};Kn.prototype.createGeometryCollection=function(){if(arguments.length===0)return new cs(null,this);if(arguments.length===1){var e=arguments[0];return new cs(e,this)}};Kn.prototype.createGeometry=function(e){var t=new dl(this);return t.edit(e,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};Kn.prototype.getPrecisionModel=function(){return this._precisionModel};Kn.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(Sn(arguments[0],ir)){var t=arguments[0];return new Vc(t,this)}}};Kn.prototype.createMultiPolygon=function(){if(arguments.length===0)return new zc(null,this);if(arguments.length===1){var e=arguments[0];return new zc(e,this)}};Kn.prototype.createMultiPoint=function(){var e=this;if(arguments.length===0)return new F_(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new F_(t,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(Sn(arguments[0],ir)){var r=arguments[0];if(r===null)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var u=e.getCoordinateSequenceFactory().create(1,r.getDimension());Oi.copy(r,o,u,0,1),i[o]=e.createPoint(u)}return this.createMultiPoint(i)}}};Kn.prototype.interfaces_=function(){return[gl]};Kn.prototype.getClass=function(){return Kn};Kn.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kn.toGeometryArray=function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)};Kn.getDefaultCoordinateSequenceFactory=function(){return qc.instance()};Kn.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kn.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kn.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kn.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kn.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kn.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Kn.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)};w$.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(Kn,w$);var fle=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],HS=function(e){this.geometryFactory=e||new Kn};HS.prototype.read=function(e){var t;typeof e=="string"?t=JSON.parse(e):t=e;var n=t.type;if(!Lu[n])throw new Error("Unknown GeoJSON type: "+t.type);return fle.indexOf(n)!==-1?Lu[n].apply(this,[t.coordinates]):n==="GeometryCollection"?Lu[n].apply(this,[t.geometries]):Lu[n].apply(this,[t])};HS.prototype.write=function(e){var t=e.getGeometryType();if(!Nh[t])throw new Error("Geometry is not supported");return Nh[t].apply(this,[e])};var Lu={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!Lu[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=Lu.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t=this,n={};if(e.features){n.features=[];for(var r=0;r<e.features.length;++r)n.features.push(t.read(e.features[r]))}return e.bbox&&(n.bbox=this.parse.bbox.apply(this,[e.bbox])),n},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(new nt(r[0],r[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new nt(e[0],e[1]),new nt(e[2],e[1]),new nt(e[2],e[3]),new nt(e[0],e[3]),new nt(e[0],e[1])])},Point:function(e){var t=new nt(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(Lu.Point.apply(t,[e[r]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(e){var t=Lu.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(Lu.LineString.apply(t,[e[r]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(e){for(var t=this,n=Lu.coordinates.apply(this,[e[0]]),r=this.geometryFactory.createLinearRing(n),i=[],o=1;o<e.length;++o){var u=e[o],l=Lu.coordinates.apply(t,[u]),p=t.geometryFactory.createLinearRing(l);i.push(p)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(Lu.Polygon.apply(t,[i]))}return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(t.read(i))}return this.geometryFactory.createGeometryCollection(n)}},Nh={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=Nh.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Nh.Point.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(e){for(var t=this,n=[],r=e.getCoordinates(),i=0;i<r.length;++i){var o=r[i];n.push(Nh.coordinate.apply(t,[o]))}return{type:"LineString",coordinates:n}},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Nh.LineString.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(e){var t=this,n=[],r=Nh.LineString.apply(this,[e._shell]);n.push(r.coordinates);for(var i=0;i<e._holes.length;++i){var o=e._holes[i],u=Nh.LineString.apply(t,[o]);n.push(u.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Nh.Polygon.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=i.getGeometryType();n.push(Nh[o].apply(t,[i]))}return{type:"GeometryCollection",geometries:n}}},cO=function(e){this.geometryFactory=e||new Kn,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new HS(this.geometryFactory)};cO.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===gr.FIXED&&this.reducePrecision(t),t};cO.prototype.reducePrecision=function(e){var t=this,n,r;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(n=0,r=e.points.length;n<r;n++)t.precisionModel.makePrecise(e.points[n]);else if(e.geometries)for(n=0,r=e.geometries.length;n<r;n++)t.reducePrecision(e.geometries[n])};var E$=function(){this.parser=new HS(this.geometryFactory)};E$.prototype.write=function(e){return this.parser.write(e)};var Rt=function(){},ZS={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Rt.prototype.interfaces_=function(){return[]};Rt.prototype.getClass=function(){return Rt};Rt.opposite=function(e){return e===Rt.LEFT?Rt.RIGHT:e===Rt.RIGHT?Rt.LEFT:e};ZS.ON.get=function(){return 0};ZS.LEFT.get=function(){return 1};ZS.RIGHT.get=function(){return 2};Object.defineProperties(Rt,ZS);function WS(e){this.message=e||""}WS.prototype=new Error;WS.prototype.name="EmptyStackException";function nc(){this.array_=[]}nc.prototype=new Ul;nc.prototype.add=function(e){return this.array_.push(e),!0};nc.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};nc.prototype.push=function(e){return this.array_.push(e),e};nc.prototype.pop=function(e){if(this.array_.length===0)throw new WS;return this.array_.pop()};nc.prototype.peek=function(){if(this.array_.length===0)throw new WS;return this.array_[this.array_.length-1]};nc.prototype.empty=function(){return this.array_.length===0};nc.prototype.isEmpty=function(){return this.empty()};nc.prototype.search=function(e){return this.array_.indexOf(e)};nc.prototype.size=function(){return this.array_.length};nc.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};var Zu=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Zu.prototype.getCoordinate=function(){return this._minCoord};Zu.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n};Zu.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();zn.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],r=Yt.computeOrientation(this._minCoord,n,t),i=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Yt.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Yt.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)};Zu.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(t<0||t+1>=r.length||r[t].y===r[t+1].y)return-1;var i=Rt.LEFT;return r[t].y<r[t+1].y&&(i=Rt.RIGHT),i};Zu.prototype.getEdge=function(){return this._orientedDe};Zu.prototype.checkForRightmostCoordinate=function(e){for(var t=this,n=e.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(t._minCoord===null||n[r].x>t._minCoord.x)&&(t._minDe=e,t._minIndex=r,t._minCoord=n[r])};Zu.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode(),t=e.getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};Zu.prototype.findEdge=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();r.isForward()&&t.checkForRightmostCoordinate(r)}zn.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var i=this.getRightmostSide(this._minDe,this._minIndex);i===Rt.LEFT&&(this._orientedDe=this._minDe.getSym())};Zu.prototype.interfaces_=function(){return[]};Zu.prototype.getClass=function(){return Zu};var Qh=function(e){function t(n,r){e.call(this,t.msgWithCoord(n,r)),this.pt=r?new nt(r):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(n,r){return r?n:n+" [ "+r+" ]"},t}(Yh),KS=function(){this.array_=[]};KS.prototype.addLast=function(e){this.array_.push(e)};KS.prototype.removeFirst=function(){return this.array_.shift()};KS.prototype.isEmpty=function(){return this.array_.length===0};var hs=function(){this._finder=null,this._dirEdgeList=new Vt,this._nodes=new Vt,this._rightMostCoord=null,this._env=null,this._finder=new Zu};hs.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}};hs.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};hs.prototype.computeNodeDepth=function(e){for(var t=this,n=null,r=e.getEdges().iterator();r.hasNext();){var i=r.next();if(i.isVisited()||i.getSym().isVisited()){n=i;break}}if(n===null)throw new Qh("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(n);for(var o=e.getEdges().iterator();o.hasNext();){var u=o.next();u.setVisited(!0),t.copySymDepths(u)}};hs.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(Rt.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)};hs.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};hs.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(Rt.RIGHT)>=1&&t.getDepth(Rt.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}};hs.prototype.computeDepths=function(e){var t=this,n=new oO,r=new KS,i=e.getNode();for(r.addLast(i),n.add(i),e.setVisited(!0);!r.isEmpty();){var o=r.removeFirst();n.add(o),t.computeNodeDepth(o);for(var u=o.getEdges().iterator();u.hasNext();){var l=u.next(),p=l.getSym();if(!p.isVisited()){var g=p.getNode();n.contains(g)||(r.addLast(g),n.add(g))}}}};hs.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};hs.prototype.getEnvelope=function(){if(this._env===null){for(var e=new dn,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)e.expandToInclude(r[i]);this._env=e}return this._env};hs.prototype.addReachable=function(e){var t=this,n=new nc;for(n.add(e);!n.empty();){var r=n.pop();t.add(r,n)}};hs.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(Rt.LEFT,e.getDepth(Rt.RIGHT)),t.setDepth(Rt.RIGHT,e.getDepth(Rt.LEFT))};hs.prototype.add=function(e,t){var n=this;e.setVisited(!0),this._nodes.add(e);for(var r=e.getEdges().iterator();r.hasNext();){var i=r.next();n._dirEdgeList.add(i);var o=i.getSym(),u=o.getNode();u.isVisited()||t.push(u)}};hs.prototype.getNodes=function(){return this._nodes};hs.prototype.getDirectedEdges=function(){return this._dirEdgeList};hs.prototype.interfaces_=function(){return[ml]};hs.prototype.getClass=function(){return hs};var Fr=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[Rt.ON]=r}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(arguments.length===3){var u=arguments[0],l=arguments[1],p=arguments[2];this.init(3),this.location[Rt.ON]=u,this.location[Rt.LEFT]=l,this.location[Rt.RIGHT]=p}};Fr.prototype.setAllLocations=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]=e};Fr.prototype.isNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]!==st.NONE)return!1;return!0};Fr.prototype.setAllLocationsIfNull=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]===st.NONE&&(t.location[n]=e)};Fr.prototype.isLine=function(){return this.location.length===1};Fr.prototype.merge=function(e){var t=this;if(e.location.length>this.location.length){var n=new Array(3).fill(null);n[Rt.ON]=this.location[Rt.ON],n[Rt.LEFT]=st.NONE,n[Rt.RIGHT]=st.NONE,this.location=n}for(var r=0;r<this.location.length;r++)t.location[r]===st.NONE&&r<e.location.length&&(t.location[r]=e.location[r])};Fr.prototype.getLocations=function(){return this.location};Fr.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[Rt.LEFT];this.location[Rt.LEFT]=this.location[Rt.RIGHT],this.location[Rt.RIGHT]=e};Fr.prototype.toString=function(){var e=new tc;return this.location.length>1&&e.append(st.toLocationSymbol(this.location[Rt.LEFT])),e.append(st.toLocationSymbol(this.location[Rt.ON])),this.location.length>1&&e.append(st.toLocationSymbol(this.location[Rt.RIGHT])),e.toString()};Fr.prototype.setLocations=function(e,t,n){this.location[Rt.ON]=e,this.location[Rt.LEFT]=t,this.location[Rt.RIGHT]=n};Fr.prototype.get=function(e){return e<this.location.length?this.location[e]:st.NONE};Fr.prototype.isArea=function(){return this.location.length>1};Fr.prototype.isAnyNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]===st.NONE)return!0;return!1};Fr.prototype.setLocation=function(){if(arguments.length===1){var e=arguments[0];this.setLocation(Rt.ON,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.location[t]=n}};Fr.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(st.NONE)};Fr.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]};Fr.prototype.allPositionsEqual=function(e){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==e)return!1;return!0};Fr.prototype.interfaces_=function(){return[]};Fr.prototype.getClass=function(){return Fr};var Sr=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Fr(t),this.elt[1]=new Fr(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new Fr(n.elt[0]),this.elt[1]=new Fr(n.elt[1])}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.elt[0]=new Fr(st.NONE),this.elt[1]=new Fr(st.NONE),this.elt[r].setLocation(i)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],l=arguments[2];this.elt[0]=new Fr(o,u,l),this.elt[1]=new Fr(o,u,l)}else if(arguments.length===4){var p=arguments[0],g=arguments[1],x=arguments[2],y=arguments[3];this.elt[0]=new Fr(st.NONE,st.NONE,st.NONE),this.elt[1]=new Fr(st.NONE,st.NONE,st.NONE),this.elt[p].setLocations(g,x,y)}};Sr.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e};Sr.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)};Sr.prototype.isNull=function(e){return this.elt[e].isNull()};Sr.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}};Sr.prototype.isLine=function(e){return this.elt[e].isLine()};Sr.prototype.merge=function(e){for(var t=this,n=0;n<2;n++)t.elt[n]===null&&e.elt[n]!==null?t.elt[n]=new Fr(e.elt[n]):t.elt[n].merge(e.elt[n])};Sr.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};Sr.prototype.getLocation=function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(Rt.ON)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}};Sr.prototype.toString=function(){var e=new tc;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()};Sr.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}};Sr.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()};Sr.prototype.setLocation=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(Rt.ON,t)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}};Sr.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)};Sr.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)};Sr.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new Fr(this.elt[e].location[0]))};Sr.prototype.interfaces_=function(){return[]};Sr.prototype.getClass=function(){return Sr};Sr.toLineLabel=function(e){for(var t=new Sr(st.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var Bi=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Vt,this._pts=new Vt,this._label=new Sr(st.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Vt,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};Bi.prototype.computeRing=function(){var e=this;if(this._ring!==null)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=e._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Yt.isCCW(this._ring.getCoordinates())};Bi.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};Bi.prototype.computePoints=function(e){var t=this;this._startDe=e;var n=e,r=!0;do{if(n===null)throw new Qh("Found null DirectedEdge");if(n.getEdgeRing()===t)throw new Qh("Directed Edge visited twice during ring-building at "+n.getCoordinate());t._edges.add(n);var i=n.getLabel();zn.isTrue(i.isArea()),t.mergeLabel(i),t.addPoints(n.getEdge(),n.isForward(),r),r=!1,t.setEdgeRing(n,t),n=t.getNext(n)}while(n!==this._startDe)};Bi.prototype.getLinearRing=function(){return this._ring};Bi.prototype.getCoordinate=function(e){return this._pts.get(e)};Bi.prototype.computeMaxNodeDegree=function(){var e=this;this._maxNodeDegree=0;var t=this._startDe;do{var n=t.getNode(),r=n.getEdges().getOutgoingDegree(e);r>e._maxNodeDegree&&(e._maxNodeDegree=r),t=e.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2};Bi.prototype.addPoints=function(e,t,n){var r=this,i=e.getCoordinates();if(t){var o=1;n&&(o=0);for(var u=o;u<i.length;u++)r._pts.add(i[u])}else{var l=i.length-2;n&&(l=i.length-1);for(var p=l;p>=0;p--)r._pts.add(i[p])}};Bi.prototype.isHole=function(){return this._isHole};Bi.prototype.setInResult=function(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)};Bi.prototype.containsPoint=function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e)||!Yt.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(e))return!1}return!0};Bi.prototype.addHole=function(e){this._holes.add(e)};Bi.prototype.isShell=function(){return this._shell===null};Bi.prototype.getLabel=function(){return this._label};Bi.prototype.getEdges=function(){return this._edges};Bi.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};Bi.prototype.getShell=function(){return this._shell};Bi.prototype.mergeLabel=function(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=t.getLocation(n,Rt.RIGHT);if(r===st.NONE)return null;if(this._label.getLocation(n)===st.NONE)return this._label.setLocation(n,r),null}};Bi.prototype.setShell=function(e){this._shell=e,e!==null&&e.addHole(this)};Bi.prototype.toPolygon=function(e){for(var t=this,n=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)n[r]=t._holes.get(r).getLinearRing();var i=e.createPolygon(this.getLinearRing(),n);return i};Bi.prototype.interfaces_=function(){return[]};Bi.prototype.getClass=function(){return Bi};var dle=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(n,r){n.setMinEdgeRing(r)},t.prototype.getNext=function(n){return n.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Bi),ple=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var n=this,r=new Vt,i=this._startDe;do{if(i.getMinEdgeRing()===null){var o=new dle(i,n._geometryFactory);r.add(o)}i=i.getNext()}while(i!==this._startDe);return r},t.prototype.setEdgeRing=function(n,r){n.setEdgeRing(r)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,r=this._startDe;do{var i=r.getNode();i.getEdges().linkMinimalDirectedEdges(n),r=r.getNext()}while(r!==this._startDe)},t.prototype.getNext=function(n){return n.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Bi),Ma=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._label=e}};Ma.prototype.setVisited=function(e){this._isVisited=e};Ma.prototype.setInResult=function(e){this._isInResult=e};Ma.prototype.isCovered=function(){return this._isCovered};Ma.prototype.isCoveredSet=function(){return this._isCoveredSet};Ma.prototype.setLabel=function(e){this._label=e};Ma.prototype.getLabel=function(){return this._label};Ma.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0};Ma.prototype.updateIM=function(e){zn.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)};Ma.prototype.isInResult=function(){return this._isInResult};Ma.prototype.isVisited=function(){return this._isVisited};Ma.prototype.interfaces_=function(){return[]};Ma.prototype.getClass=function(){return Ma};var XS=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var n=arguments[0],r=arguments[1];this._coord=n,this._edges=r,this._label=new Sr(0,st.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(n){},t.prototype.computeMergedLocation=function(n,r){var i=st.NONE;if(i=this._label.getLocation(r),!n.isNull(r)){var o=n.getLocation(r);i!==st.BOUNDARY&&(i=o)}return i},t.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];this._label===null?this._label=new Sr(n,r):this._label.setLocation(n,r)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof t){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof Sr)for(var i=arguments[0],o=0;o<2;o++){var u=n.computeMergedLocation(i,o),l=n._label.getLocation(o);l===st.NONE&&n._label.setLocation(o,u)}},t.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},t.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var r=st.NONE;this._label!==null&&(r=this._label.getLocation(n));var i=null;switch(r){case st.BOUNDARY:i=st.INTERIOR;break;case st.INTERIOR:i=st.BOUNDARY;break;default:i=st.BOUNDARY;break}this._label.setLocation(n,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ma),Wu=function(){this.nodeMap=new qo,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};Wu.prototype.find=function(e){return this.nodeMap.get(e)};Wu.prototype.addNode=function(){if(arguments[0]instanceof nt){var e=arguments[0],t=this.nodeMap.get(e);return t===null&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}else if(arguments[0]instanceof XS){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return r===null?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}};Wu.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Wu.prototype.iterator=function(){return this.nodeMap.values().iterator()};Wu.prototype.values=function(){return this.nodeMap.values()};Wu.prototype.getBoundaryNodes=function(e){for(var t=new Vt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===st.BOUNDARY&&t.add(r)}return t};Wu.prototype.add=function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)};Wu.prototype.interfaces_=function(){return[]};Wu.prototype.getClass=function(){return Wu};var Ar=function(){},Px={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ar.prototype.interfaces_=function(){return[]};Ar.prototype.getClass=function(){return Ar};Ar.isNorthern=function(e){return e===Ar.NE||e===Ar.NW};Ar.isOpposite=function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return n===2};Ar.commonHalfPlane=function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(n===2)return-1;var r=e<t?e:t,i=e>t?e:t;return r===0&&i===3?3:r};Ar.isInHalfPlane=function(e,t){return t===Ar.SE?e===Ar.SE||e===Ar.SW:e===t||e===t+1};Ar.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new ri("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?Ar.NE:Ar.SE:t>=0?Ar.NW:Ar.SW}else if(arguments[0]instanceof nt&&arguments[1]instanceof nt){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new ri("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Ar.NE:Ar.SE:r.y>=n.y?Ar.NW:Ar.SW}};Px.NE.get=function(){return 0};Px.NW.get=function(){return 1};Px.SW.get=function(){return 2};Px.SE.get=function(){return 3};Object.defineProperties(Ar,Px);var Go=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=t,this.init(n,r),this._label=i}else if(arguments.length===4){var o=arguments[0],u=arguments[1],l=arguments[2],p=arguments[3];this._edge=o,this.init(u,l),this._label=p}};Go.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:Yt.computeOrientation(e._p0,e._p1,this._p1)};Go.prototype.getDy=function(){return this._dy};Go.prototype.getCoordinate=function(){return this._p0};Go.prototype.setNode=function(e){this._node=e};Go.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)};Go.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)};Go.prototype.getDirectedCoordinate=function(){return this._p1};Go.prototype.getDx=function(){return this._dx};Go.prototype.getLabel=function(){return this._label};Go.prototype.getEdge=function(){return this._edge};Go.prototype.getQuadrant=function(){return this._quadrant};Go.prototype.getNode=function(){return this._node};Go.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);return"  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label};Go.prototype.computeLabel=function(e){};Go.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=Ar.quadrant(this._dx,this._dy),zn.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};Go.prototype.interfaces_=function(){return[ml]};Go.prototype.getClass=function(){return Go};var RP=function(e){function t(){var n=arguments[0],r=arguments[1];if(e.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(n){return this._depth[n]},t.prototype.setVisited=function(n){this._isVisited=n},t.prototype.computeDirectedLabel=function(){this._label=new Sr(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(n,r){if(this._depth[n]!==-999&&this._depth[n]!==r)throw new Qh("assigned depths do not match",this.getCoordinate());this._depth[n]=r},t.prototype.isInteriorAreaEdge=function(){for(var n=this,r=!0,i=0;i<2;i++)n._label.isArea(i)&&n._label.getLocation(i,Rt.LEFT)===st.INTERIOR&&n._label.getLocation(i,Rt.RIGHT)===st.INTERIOR||(r=!1);return r},t.prototype.setNextMin=function(n){this._nextMin=n},t.prototype.print=function(n){e.prototype.print.call(this,n),n.print(" "+this._depth[Rt.LEFT]+"/"+this._depth[Rt.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},t.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},t.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),r=!this._label.isArea(0)||this._label.allPositionsEqual(0,st.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,st.EXTERIOR);return n&&r&&i},t.prototype.setEdgeRing=function(n){this._edgeRing=n},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},t.prototype.setInResult=function(n){this._isInResult=n},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},t.prototype.setSym=function(n){this._sym=n},t.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},t.prototype.setEdgeDepths=function(n,r){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var o=1;n===Rt.LEFT&&(o=-1);var u=Rt.opposite(n),l=i*o,p=r+l;this.setDepth(n,r),this.setDepth(u,p)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(n){this._next=n},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(n,r){return n===st.EXTERIOR&&r===st.INTERIOR?1:n===st.INTERIOR&&r===st.EXTERIOR?-1:0},t}(Go),B_=function(){};B_.prototype.createNode=function(e){return new XS(e,null)};B_.prototype.interfaces_=function(){return[]};B_.prototype.getClass=function(){return B_};var ci=function(){if(this._edges=new Vt,this._nodes=null,this._edgeEndList=new Vt,arguments.length===0)this._nodes=new Wu(new B_);else if(arguments.length===1){var e=arguments[0];this._nodes=new Wu(e)}};ci.prototype.printEdges=function(e){var t=this;e.println("Edges:");for(var n=0;n<this._edges.size();n++){e.println("edge "+n+":");var r=t._edges.get(n);r.print(e),r.eiList.print(e)}};ci.prototype.find=function(e){return this._nodes.find(e)};ci.prototype.addNode=function(){if(arguments[0]instanceof XS){var e=arguments[0];return this._nodes.addNode(e)}else if(arguments[0]instanceof nt){var t=arguments[0];return this._nodes.addNode(t)}};ci.prototype.getNodeIterator=function(){return this._nodes.iterator()};ci.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}};ci.prototype.debugPrintln=function(e){Mo.out.println(e)};ci.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(e)===st.BOUNDARY};ci.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}};ci.prototype.matchInSameDirection=function(e,t,n,r){return e.equals(n)?Yt.computeOrientation(e,t,r)===Yt.COLLINEAR&&Ar.quadrant(e,t)===Ar.quadrant(n,r):!1};ci.prototype.getEdgeEnds=function(){return this._edgeEndList};ci.prototype.debugPrint=function(e){Mo.out.print(e)};ci.prototype.getEdgeIterator=function(){return this._edges.iterator()};ci.prototype.findEdgeInSameDirection=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(e,t,o[0],o[1])||n.matchInSameDirection(e,t,o[o.length-1],o[o.length-2]))return i}return null};ci.prototype.insertEdge=function(e){this._edges.add(e)};ci.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null};ci.prototype.addEdges=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();t._edges.add(r);var i=new RP(r,!0),o=new RP(r,!1);i.setSym(o),o.setSym(i),t.add(i),t.add(o)}};ci.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)};ci.prototype.getNodes=function(){return this._nodes.values()};ci.prototype.findEdge=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(e.equals(o[0])&&t.equals(o[1]))return i}return null};ci.prototype.interfaces_=function(){return[]};ci.prototype.getClass=function(){return ci};ci.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};var aa=function(){this._geometryFactory=null,this._shellList=new Vt;var e=arguments[0];this._geometryFactory=e};aa.prototype.sortShellsAndHoles=function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}};aa.prototype.computePolygons=function(e){for(var t=this,n=new Vt,r=e.iterator();r.hasNext();){var i=r.next(),o=i.toPolygon(t._geometryFactory);n.add(o)}return n};aa.prototype.placeFreeHoles=function(e,t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();if(i.getShell()===null){var o=n.findEdgeRingContaining(i,e);if(o===null)throw new Qh("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(o)}}};aa.prototype.buildMinimalEdgeRings=function(e,t,n){for(var r=this,i=new Vt,o=e.iterator();o.hasNext();){var u=o.next();if(u.getMaxNodeDegree()>2){u.linkDirectedEdgesForMinimalEdgeRings();var l=u.buildMinimalRings(),p=r.findShell(l);p!==null?(r.placePolygonHoles(p,l),t.add(p)):n.addAll(l)}else i.add(u)}return i};aa.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1};aa.prototype.buildMaximalEdgeRings=function(e){for(var t=this,n=new Vt,r=e.iterator();r.hasNext();){var i=r.next();if(i.isInResult()&&i.getLabel().isArea()&&i.getEdgeRing()===null){var o=new ple(i,t._geometryFactory);n.add(o),o.setInResult()}}return n};aa.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}};aa.prototype.getPolygons=function(){var e=this.computePolygons(this._shellList);return e};aa.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,u=null,l=t.iterator();l.hasNext();){var p=l.next(),g=p.getLinearRing(),x=g.getEnvelopeInternal();o!==null&&(u=o.getLinearRing().getEnvelopeInternal());var y=!1;x.contains(r)&&Yt.isPointInRing(i,g.getCoordinates())&&(y=!0),y&&(o===null||u.contains(x))&&(o=p)}return o};aa.prototype.findShell=function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return zn.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n};aa.prototype.add=function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];ci.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(t),i=new Vt,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}};aa.prototype.interfaces_=function(){return[]};aa.prototype.getClass=function(){return aa};var j_=function(){};j_.prototype.getBounds=function(){};j_.prototype.interfaces_=function(){return[]};j_.prototype.getClass=function(){return j_};var Wl=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};Wl.prototype.getItem=function(){return this._item};Wl.prototype.getBounds=function(){return this._bounds};Wl.prototype.interfaces_=function(){return[j_,gl]};Wl.prototype.getClass=function(){return Wl};var ef=function(){this._size=null,this._items=null,this._size=0,this._items=new Vt,this._items.add(null)};ef.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e};ef.prototype.size=function(){return this._size};ef.prototype.reorder=function(e){for(var t=this,n=null,r=this._items.get(e);e*2<=this._size&&(n=e*2,n!==t._size&&t._items.get(n+1).compareTo(t._items.get(n))<0&&n++,t._items.get(n).compareTo(r)<0);e=n)t._items.set(e,t._items.get(n));this._items.set(e,r)};ef.prototype.clear=function(){this._size=0,this._items.clear()};ef.prototype.isEmpty=function(){return this._size===0};ef.prototype.add=function(e){var t=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)t._items.set(n,t._items.get(Math.trunc(n/2)));this._items.set(n,e)};ef.prototype.interfaces_=function(){return[]};ef.prototype.getClass=function(){return ef};var dd=function(){};dd.prototype.visitItem=function(e){};dd.prototype.interfaces_=function(){return[]};dd.prototype.getClass=function(){return dd};var Cg=function(){};Cg.prototype.insert=function(e,t){};Cg.prototype.remove=function(e,t){};Cg.prototype.query=function(){};Cg.prototype.interfaces_=function(){return[]};Cg.prototype.getClass=function(){return Cg};var Zi=function(){if(this._childBoundables=new Vt,this._bounds=null,this._level=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._level=e}},S$={serialVersionUID:{configurable:!0}};Zi.prototype.getLevel=function(){return this._level};Zi.prototype.size=function(){return this._childBoundables.size()};Zi.prototype.getChildBoundables=function(){return this._childBoundables};Zi.prototype.addChildBoundable=function(e){zn.isTrue(this._bounds===null),this._childBoundables.add(e)};Zi.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Zi.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Zi.prototype.interfaces_=function(){return[j_,gl]};Zi.prototype.getClass=function(){return Zi};S$.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Zi,S$);var Kl=function(){};Kl.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}};Kl.min=function(e){return Kl.sort(e),e.get(0)};Kl.sort=function(e,t){var n=e.toArray();t?Rp.sort(n,t):Rp.sort(n);for(var r=e.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])};Kl.singletonList=function(e){var t=new Vt;return t.add(e),t};var Di=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};Di.prototype.expandToQueue=function(e,t){var n=Di.isComposite(this._boundable1),r=Di.isComposite(this._boundable2);if(n&&r)return Di.area(this._boundable1)>Di.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new ri("neither boundable is composite")};Di.prototype.isLeaves=function(){return!(Di.isComposite(this._boundable1)||Di.isComposite(this._boundable2))};Di.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0};Di.prototype.expand=function(e,t,n,r){for(var i=this,o=e.getChildBoundables(),u=o.iterator();u.hasNext();){var l=u.next(),p=new Di(l,t,i._itemDistance);p.getDistance()<r&&n.add(p)}};Di.prototype.getBoundable=function(e){return e===0?this._boundable1:this._boundable2};Di.prototype.getDistance=function(){return this._distance};Di.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};Di.prototype.interfaces_=function(){return[ml]};Di.prototype.getClass=function(){return Di};Di.area=function(e){return e.getBounds().getArea()};Di.isComposite=function(e){return e instanceof Zi};var wo=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new Vt,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var n=arguments[0];zn.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},YS={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};wo.prototype.getNodeCapacity=function(){return this._nodeCapacity};wo.prototype.lastNode=function(e){return e.get(e.size()-1)};wo.prototype.size=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Zi?n+=e.size(i):i instanceof Wl&&(n+=1)}return n}};wo.prototype.removeItem=function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Wl&&i.getItem()===t&&(n=i)}return n!==null?(e.getChildBoundables().remove(n),!0):!1};wo.prototype.itemsTree=function(){var e=this;if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new Vt:t}else if(arguments.length===1){for(var n=arguments[0],r=new Vt,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Zi){var u=e.itemsTree(o);u!==null&&r.add(u)}else o instanceof Wl?r.add(o.getItem()):zn.shouldNeverReachHere()}return r.size()<=0?null:r}};wo.prototype.insert=function(e,t){zn.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Wl(e,t))};wo.prototype.boundablesAtLevel=function(){var e=this;if(arguments.length===1){var t=arguments[0],n=new Vt;return this.boundablesAtLevel(t,this._root,n),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(zn.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();l instanceof Zi?e.boundablesAtLevel(r,l,o):(zn.isTrue(l instanceof Wl),r===-1&&o.add(l))}return null}};wo.prototype.query=function(){var e=this;if(arguments.length===1){var t=arguments[0];this.build();var n=new Vt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,n),n}else if(arguments.length===2){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(arguments.length===3){if(Sn(arguments[2],dd)&&arguments[0]instanceof Object&&arguments[1]instanceof Zi)for(var o=arguments[0],u=arguments[1],l=arguments[2],p=u.getChildBoundables(),g=0;g<p.size();g++){var x=p.get(g);e.getIntersectsOp().intersects(x.getBounds(),o)&&(x instanceof Zi?e.query(o,x,l):x instanceof Wl?l.visitItem(x.getItem()):zn.shouldNeverReachHere())}else if(Sn(arguments[2],Ul)&&arguments[0]instanceof Object&&arguments[1]instanceof Zi)for(var y=arguments[0],_=arguments[1],T=arguments[2],P=_.getChildBoundables(),A=0;A<P.size();A++){var M=P.get(A);e.getIntersectsOp().intersects(M.getBounds(),y)&&(M instanceof Zi?e.query(y,M,T):M instanceof Wl?T.add(M.getItem()):zn.shouldNeverReachHere())}}};wo.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};wo.prototype.getRoot=function(){return this.build(),this._root};wo.prototype.remove=function(){var e=this;if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),t)?this.remove(t,this._root,n):!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],u=this.removeItem(i,o);if(u)return!0;for(var l=null,p=i.getChildBoundables().iterator();p.hasNext();){var g=p.next();if(e.getIntersectsOp().intersects(g.getBounds(),r)&&g instanceof Zi&&(u=e.remove(r,g,o),u)){l=g;break}}return l!==null&&l.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(l),u}};wo.prototype.createHigherLevels=function(e,t){zn.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return n.size()===1?n.get(0):this.createHigherLevels(n,t+1)};wo.prototype.depth=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Zi){var o=e.depth(i);o>n&&(n=o)}}return n+1}};wo.prototype.createParentBoundables=function(e,t){var n=this;zn.isTrue(!e.isEmpty());var r=new Vt;r.add(this.createNode(t));var i=new Vt(e);Kl.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var u=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(t)),n.lastNode(r).addChildBoundable(u)}return r};wo.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};wo.prototype.interfaces_=function(){return[gl]};wo.prototype.getClass=function(){return wo};wo.compareDoubles=function(e,t){return e>t?1:e<t?-1:0};YS.IntersectsOp.get=function(){return mle};YS.serialVersionUID.get=function(){return-3886435814360241e3};YS.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(wo,YS);var mle=function(){},$_=function(){};$_.prototype.distance=function(e,t){};$_.prototype.interfaces_=function(){return[]};$_.prototype.getClass=function(){return $_};var T$=function(e){function t(r){r=r||t.DEFAULT_NODE_CAPACITY,e.call(this,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(r,i){var o=this;zn.isTrue(r.length>0);for(var u=new Vt,l=0;l<r.length;l++)u.addAll(o.createParentBoundablesFromVerticalSlice(r[l],i));return u},t.prototype.createNode=function(r){return new k3(r)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];if(r.isNull())return null;e.prototype.insert.call(this,r,i)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(r,i){for(var o=Math.trunc(Math.ceil(r.size()/i)),u=new Array(i).fill(null),l=r.iterator(),p=0;p<i;p++){u[p]=new Vt;for(var g=0;l.hasNext()&&g<o;){var x=l.next();u[p].add(x),g++}}return u},t.prototype.query=function(){if(arguments.length===1){var r=arguments[0];return e.prototype.query.call(this,r)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];e.prototype.query.call(this,i,o)}else if(arguments.length===3){if(Sn(arguments[2],dd)&&arguments[0]instanceof Object&&arguments[1]instanceof Zi){var u=arguments[0],l=arguments[1],p=arguments[2];e.prototype.query.call(this,u,l,p)}else if(Sn(arguments[2],Ul)&&arguments[0]instanceof Object&&arguments[1]instanceof Zi){var g=arguments[0],x=arguments[1],y=arguments[2];e.prototype.query.call(this,g,x,y)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(r,i){return e.prototype.createParentBoundables.call(this,r,i)},t.prototype.remove=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return e.prototype.remove.call(this,r,i)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(r,i){zn.isTrue(!r.isEmpty());var o=Math.trunc(Math.ceil(r.size()/this.getNodeCapacity())),u=new Vt(r);Kl.sort(u,t.xComparator);var l=this.verticalSlices(u,Math.trunc(Math.ceil(Math.sqrt(o))));return this.createParentBoundablesFromVerticalSlices(l,i)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(Sn(arguments[0],$_)){var r=arguments[0],i=new Di(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(i)}else if(arguments[0]instanceof Di){var o=arguments[0];return this.nearestNeighbour(o,kn.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&Sn(arguments[1],$_)){var u=arguments[0],l=arguments[1],p=new Di(this.getRoot(),u.getRoot(),l);return this.nearestNeighbour(p)}else if(arguments[0]instanceof Di&&typeof arguments[1]=="number"){var g=arguments[0],x=arguments[1],y=x,_=null,T=new ef;for(T.add(g);!T.isEmpty()&&y>0;){var P=T.poll(),A=P.getDistance();if(A>=y)break;P.isLeaves()?(y=A,_=P):P.expandToQueue(T,y)}return[_.getBoundable(0).getItem(),_.getBoundable(1).getItem()]}}else if(arguments.length===3){var M=arguments[0],k=arguments[1],R=arguments[2],z=new Wl(M,k),D=new Di(this.getRoot(),z,R);return this.nearestNeighbour(D)[0]}},t.prototype.interfaces_=function(){return[Cg,gl]},t.prototype.getClass=function(){return t},t.centreX=function(r){return t.avg(r.getMinX(),r.getMaxX())},t.avg=function(r,i){return(r+i)/2},t.centreY=function(r){return t.avg(r.getMinY(),r.getMaxY())},n.STRtreeNode.get=function(){return k3},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[O_]},compare:function(r,i){return e.compareDoubles(t.centreX(r.getBounds()),t.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[O_]},compare:function(r,i){return e.compareDoubles(t.centreY(r.getBounds()),t.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,n),t}(wo),k3=function(e){function t(){var n=arguments[0];e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var n=null,r=this.getChildBoundables().iterator();r.hasNext();){var i=r.next();n===null?n=new dn(i.getBounds()):n.expandToInclude(i.getBounds())}return n},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Zi),Rs=function(){};Rs.prototype.interfaces_=function(){return[]};Rs.prototype.getClass=function(){return Rs};Rs.relativeSign=function(e,t){return e<t?-1:e>t?1:0};Rs.compare=function(e,t,n){if(t.equals2D(n))return 0;var r=Rs.relativeSign(t.x,n.x),i=Rs.relativeSign(t.y,n.y);switch(e){case 0:return Rs.compareValue(r,i);case 1:return Rs.compareValue(i,r);case 2:return Rs.compareValue(i,-r);case 3:return Rs.compareValue(-r,i);case 4:return Rs.compareValue(-r,-i);case 5:return Rs.compareValue(-i,-r);case 6:return Rs.compareValue(-i,r);case 7:return Rs.compareValue(r,-i)}return zn.shouldNeverReachHere("invalid octant value"),0};Rs.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var pd=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._segString=e,this.coord=new nt(t),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!t.equals2D(e.getCoordinate(n))};pd.prototype.getCoordinate=function(){return this.coord};pd.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)};pd.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:Rs.compare(this._segmentOctant,this.coord,t.coord)};pd.prototype.isEndPoint=function(e){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===e};pd.prototype.isInterior=function(){return this._isInterior};pd.prototype.interfaces_=function(){return[ml]};pd.prototype.getClass=function(){return pd};var fs=function(){this._nodeMap=new qo,this._edge=null;var e=arguments[0];this._edge=e};fs.prototype.getSplitCoordinates=function(){var e=this,t=new Cx;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();e.addEdgeCoordinates(r,i,t),r=i}return t.toCoordinateArray()};fs.prototype.addCollapsedNodes=function(){var e=this,t=new Vt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var n=t.iterator();n.hasNext();){var r=n.next().intValue();e.add(e._edge.getCoordinate(r),r)}};fs.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};fs.prototype.findCollapsesFromExistingVertices=function(e){for(var t=this,n=0;n<this._edge.size()-2;n++){var r=t._edge.getCoordinate(n),i=t._edge.getCoordinate(n+2);r.equals2D(i)&&e.add(new Vu(n+1))}};fs.prototype.addEdgeCoordinates=function(e,t,n){var r=this,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);n.add(new nt(e.coord),!1);for(var u=e.segmentIndex+1;u<=t.segmentIndex;u++)n.add(r._edge.getCoordinate(u));o&&n.add(new nt(t.coord))};fs.prototype.iterator=function(){return this._nodeMap.values().iterator()};fs.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};fs.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,r===1?(n[0]=e.segmentIndex+1,!0):!1};fs.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=this,n=new Array(1).fill(null),r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),u=t.findCollapseIndex(i,o,n);u&&e.add(new Vu(n[0])),i=o}};fs.prototype.getEdge=function(){return this._edge};fs.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)};fs.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);o||r--;var u=new Array(r).fill(null),l=0;u[l++]=new nt(e.coord);for(var p=e.segmentIndex+1;p<=t.segmentIndex;p++)u[l++]=n._edge.getCoordinate(p);return o&&(u[l]=new nt(t.coord)),new Ri(u,this._edge.getData())};fs.prototype.add=function(e,t){var n=new pd(this._edge,e,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(n);return r!==null?(zn.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)};fs.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0),r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new Yh("bad split edge start point at "+r);var i=e.get(e.size()-1),o=i.getCoordinates(),u=o[o.length-1];if(!u.equals2D(t[t.length-1]))throw new Yh("bad split edge end point at "+u)};fs.prototype.interfaces_=function(){return[]};fs.prototype.getClass=function(){return fs};var Ig=function(){};Ig.prototype.interfaces_=function(){return[]};Ig.prototype.getClass=function(){return Ig};Ig.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new ri("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return e>=0?t>=0?n>=r?0:1:n>=r?7:6:t>=0?n>=r?3:2:n>=r?4:5}else if(arguments[0]instanceof nt&&arguments[1]instanceof nt){var i=arguments[0],o=arguments[1],u=o.x-i.x,l=o.y-i.y;if(u===0&&l===0)throw new ri("Cannot compute the octant for two identical points "+i);return Ig.octant(u,l)}};var Gc=function(){};Gc.prototype.getCoordinates=function(){};Gc.prototype.size=function(){};Gc.prototype.getCoordinate=function(e){};Gc.prototype.isClosed=function(){};Gc.prototype.setData=function(e){};Gc.prototype.getData=function(){};Gc.prototype.interfaces_=function(){return[]};Gc.prototype.getClass=function(){return Gc};var F1=function(){};F1.prototype.addIntersection=function(e,t){};F1.prototype.interfaces_=function(){return[Gc]};F1.prototype.getClass=function(){return F1};var Ri=function(){this._nodeList=new fs(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Ri.prototype.getCoordinates=function(){return this._pts};Ri.prototype.size=function(){return this._pts.length};Ri.prototype.getCoordinate=function(e){return this._pts[e]};Ri.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Ri.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))};Ri.prototype.setData=function(e){this._data=e};Ri.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:Ig.octant(e,t)};Ri.prototype.getData=function(){return this._data};Ri.prototype.addIntersection=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[3],o=new nt(n.getIntersection(i));this.addIntersection(o,r)}};Ri.prototype.toString=function(){return Hl.toLineString(new Pi(this._pts))};Ri.prototype.getNodeList=function(){return this._nodeList};Ri.prototype.addIntersectionNode=function(e,t){var n=t,r=n+1;if(r<this._pts.length){var i=this._pts[r];e.equals2D(i)&&(n=r)}var o=this._nodeList.add(e,n);return o};Ri.prototype.addIntersections=function(e,t,n){for(var r=this,i=0;i<e.getIntersectionNum();i++)r.addIntersection(e,t,n,i)};Ri.prototype.interfaces_=function(){return[F1]};Ri.prototype.getClass=function(){return Ri};Ri.getNodedSubstrings=function(){if(arguments.length===1){var e=arguments[0],t=new Vt;return Ri.getNodedSubstrings(e,t),t}else if(arguments.length===2)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var pn=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new nt,this.p1=new nt;else if(arguments.length===1){var e=arguments[0];this.p0=new nt(e.p0),this.p1=new nt(e.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new nt(t,n),this.p1=new nt(r,i)}},C$={serialVersionUID:{configurable:!0}};pn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};pn.prototype.orientationIndex=function(){if(arguments[0]instanceof pn){var e=arguments[0],t=Yt.orientationIndex(this.p0,this.p1,e.p0),n=Yt.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}else if(arguments[0]instanceof nt){var r=arguments[0];return Yt.orientationIndex(this.p0,this.p1,r)}};pn.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])};pn.prototype.isVertical=function(){return this.p0.x===this.p1.x};pn.prototype.equals=function(e){if(!(e instanceof pn))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};pn.prototype.intersection=function(e){var t=new lm;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null};pn.prototype.project=function(){if(arguments[0]instanceof nt){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new nt(e);var t=this.projectionFactor(e),n=new nt;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof pn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1||i<=0&&o<=0)return null;var u=this.project(r.p0);i<0&&(u=this.p0),i>1&&(u=this.p1);var l=this.project(r.p1);return o<0&&(l=this.p0),o>1&&(l=this.p1),new pn(u,l)}};pn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};pn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};pn.prototype.getCoordinate=function(e){return e===0?this.p0:this.p1};pn.prototype.distancePerpendicular=function(e){return Yt.distancePointLinePerpendicular(e,this.p0,this.p1)};pn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};pn.prototype.midPoint=function(){return pn.midPoint(this.p0,this.p1)};pn.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;if(r<=0)return kn.NaN;var i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return i};pn.prototype.closestPoints=function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=new Array(2).fill(null),r=kn.MAX_VALUE,i=null,o=this.closestPoint(e.p0);r=o.distance(e.p0),n[0]=o,n[1]=e.p0;var u=this.closestPoint(e.p1);i=u.distance(e.p1),i<r&&(r=i,n[0]=u,n[1]=e.p1);var l=e.closestPoint(this.p0);i=l.distance(this.p0),i<r&&(r=i,n[0]=this.p0,n[1]=l);var p=e.closestPoint(this.p1);return i=p.distance(this.p1),i<r&&(r=i,n[0]=this.p1,n[1]=p),n};pn.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return n<r?this.p0:this.p1};pn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};pn.prototype.getLength=function(){return this.p0.distance(this.p1)};pn.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return n!==0?n:this.p1.compareTo(t.p1)};pn.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e};pn.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)};pn.prototype.lineIntersection=function(e){try{var t=$l.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof uv))throw n}finally{}return null};pn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};pn.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,u=Math.sqrt(i*i+o*o),l=0,p=0;if(t!==0){if(u<=0)throw new Error("Cannot compute offset from zero-length line segment");l=t*i/u,p=t*o/u}var g=n-p,x=r+l,y=new nt(g,x);return y};pn.prototype.setCoordinates=function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}};pn.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||kn.isNaN(t))&&(t=1),t};pn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};pn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};pn.prototype.distance=function(){if(arguments[0]instanceof pn){var e=arguments[0];return Yt.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}else if(arguments[0]instanceof nt){var t=arguments[0];return Yt.distancePointLine(t,this.p0,this.p1)}};pn.prototype.pointAlong=function(e){var t=new nt;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t};pn.prototype.hashCode=function(){var e=kn.doubleToLongBits(this.p0.x);e^=kn.doubleToLongBits(this.p0.y)*31;var t=Math.trunc(e)^Math.trunc(e>>32),n=kn.doubleToLongBits(this.p1.x);n^=kn.doubleToLongBits(this.p1.y)*31;var r=Math.trunc(n)^Math.trunc(n>>32);return t^r};pn.prototype.interfaces_=function(){return[ml,gl]};pn.prototype.getClass=function(){return pn};pn.midPoint=function(e,t){return new nt((e.x+t.x)/2,(e.y+t.y)/2)};C$.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(pn,C$);var B1=function(){this.tempEnv1=new dn,this.tempEnv2=new dn,this._overlapSeg1=new pn,this._overlapSeg2=new pn};B1.prototype.overlap=function(){if(arguments.length!==2&&arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}};B1.prototype.interfaces_=function(){return[]};B1.prototype.getClass=function(){return B1};var la=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=r};la.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]};la.prototype.computeSelect=function(e,t,n,r){var i=this._pts[t],o=this._pts[n];if(r.tempEnv1.init(i,o),n-t===1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var u=Math.trunc((t+n)/2);t<u&&this.computeSelect(e,t,u,r),u<n&&this.computeSelect(e,u,n,r)};la.prototype.getCoordinates=function(){for(var e=this,t=new Array(this._end-this._start+1).fill(null),n=0,r=this._start;r<=this._end;r++)t[n++]=e._pts[r];return t};la.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)};la.prototype.setId=function(e){this._id=e};la.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)};la.prototype.getEnvelope=function(){if(this._env===null){var e=this._pts[this._start],t=this._pts[this._end];this._env=new dn(e,t)}return this._env};la.prototype.getEndIndex=function(){return this._end};la.prototype.getStartIndex=function(){return this._start};la.prototype.getContext=function(){return this._context};la.prototype.getId=function(){return this._id};la.prototype.computeOverlapsInternal=function(e,t,n,r,i,o){var u=this._pts[e],l=this._pts[t],p=n._pts[r],g=n._pts[i];if(t-e===1&&i-r===1)return o.overlap(this,e,n,r),null;if(o.tempEnv1.init(u,l),o.tempEnv2.init(p,g),!o.tempEnv1.intersects(o.tempEnv2))return null;var x=Math.trunc((e+t)/2),y=Math.trunc((r+i)/2);e<x&&(r<y&&this.computeOverlapsInternal(e,x,n,r,y,o),y<i&&this.computeOverlapsInternal(e,x,n,y,i,o)),x<t&&(r<y&&this.computeOverlapsInternal(x,t,n,r,y,o),y<i&&this.computeOverlapsInternal(x,t,n,y,i,o))};la.prototype.interfaces_=function(){return[]};la.prototype.getClass=function(){return la};var ju=function(){};ju.prototype.interfaces_=function(){return[]};ju.prototype.getClass=function(){return ju};ju.getChainStartIndices=function(e){var t=0,n=new Vt;n.add(new Vu(t));do{var r=ju.findChainEnd(e,t);n.add(new Vu(r)),t=r}while(t<e.length-1);var i=ju.toIntArray(n);return i};ju.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=Ar.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i])){var o=Ar.quadrant(e[i-1],e[i]);if(o!==r)break}i++}return i-1};ju.getChains=function(){if(arguments.length===1){var e=arguments[0];return ju.getChains(e,null)}else if(arguments.length===2){for(var t=arguments[0],n=arguments[1],r=new Vt,i=ju.getChainStartIndices(t),o=0;o<i.length-1;o++){var u=new la(t,i[o],i[o+1],n);r.add(u)}return r}};ju.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var qp=function(){};qp.prototype.computeNodes=function(e){};qp.prototype.getNodedSubstrings=function(){};qp.prototype.interfaces_=function(){return[]};qp.prototype.getClass=function(){return qp};var j1=function(){if(this._segInt=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this.setSegmentIntersector(e)}};j1.prototype.setSegmentIntersector=function(e){this._segInt=e};j1.prototype.interfaces_=function(){return[qp]};j1.prototype.getClass=function(){return j1};var hO=function(e){function t(r){r?e.call(this,r):e.call(this),this._monoChains=new Vt,this._index=new T$,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return Ri.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(r){for(var i=this,o=ju.getChains(r.getCoordinates(),r),u=o.iterator();u.hasNext();){var l=u.next();l.setId(i._idCounter++),i._index.insert(l.getEnvelope(),l),i._monoChains.add(l)}},t.prototype.computeNodes=function(r){var i=this;this._nodedSegStrings=r;for(var o=r.iterator();o.hasNext();)i.add(o.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var r=this,i=new R3(this._segInt),o=this._monoChains.iterator();o.hasNext();)for(var u=o.next(),l=r._index.query(u.getEnvelope()),p=l.iterator();p.hasNext();){var g=p.next();if(g.getId()>u.getId()&&(u.computeOverlaps(g,i),r._nOverlaps++),r._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return R3},Object.defineProperties(t,n),t}(j1),R3=function(e){function t(){e.call(this),this._si=null;var n=arguments[0];this._si=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],u=n.getContext(),l=i.getContext();this._si.processIntersections(u,r,l,o)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(B1),mr=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(u),this.setMitreLimit(l)}}},cf={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};mr.prototype.getEndCapStyle=function(){return this._endCapStyle};mr.prototype.isSingleSided=function(){return this._isSingleSided};mr.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=mr.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=mr.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==mr.JOIN_ROUND&&(this._quadrantSegments=mr.DEFAULT_QUADRANT_SEGMENTS)};mr.prototype.getJoinStyle=function(){return this._joinStyle};mr.prototype.setJoinStyle=function(e){this._joinStyle=e};mr.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e};mr.prototype.getSimplifyFactor=function(){return this._simplifyFactor};mr.prototype.getQuadrantSegments=function(){return this._quadrantSegments};mr.prototype.setEndCapStyle=function(e){this._endCapStyle=e};mr.prototype.getMitreLimit=function(){return this._mitreLimit};mr.prototype.setMitreLimit=function(e){this._mitreLimit=e};mr.prototype.setSingleSided=function(e){this._isSingleSided=e};mr.prototype.interfaces_=function(){return[]};mr.prototype.getClass=function(){return mr};mr.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)};cf.CAP_ROUND.get=function(){return 1};cf.CAP_FLAT.get=function(){return 2};cf.CAP_SQUARE.get=function(){return 3};cf.JOIN_ROUND.get=function(){return 1};cf.JOIN_MITRE.get=function(){return 2};cf.JOIN_BEVEL.get=function(){return 3};cf.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};cf.DEFAULT_MITRE_LIMIT.get=function(){return 5};cf.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(mr,cf);var xi=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Yt.COUNTERCLOCKWISE,this._inputLine=e||null},Lx={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};xi.prototype.isDeletable=function(e,t,n,r){var i=this._inputLine[e],o=this._inputLine[t],u=this._inputLine[n];return!this.isConcave(i,o,u)||!this.isShallow(i,o,u,r)?!1:this.isShallowSampled(i,o,e,n,r)};xi.prototype.deleteShallowConcavities=function(){for(var e=this,t=1,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;e.isDeletable(t,n,r,e._distanceTol)&&(e._isDeleted[n]=xi.DELETE,o=!0,i=!0),o?t=r:t=n,n=e.findNextNonDeletedIndex(t),r=e.findNextNonDeletedIndex(n)}return i};xi.prototype.isShallowConcavity=function(e,t,n,r){var i=Yt.computeOrientation(e,t,n),o=i===this._angleOrientation;if(!o)return!1;var u=Yt.distancePointLine(t,e,n);return u<r};xi.prototype.isShallowSampled=function(e,t,n,r,i){var o=this,u=Math.trunc((r-n)/xi.NUM_PTS_TO_CHECK);u<=0&&(u=1);for(var l=n;l<r;l+=u)if(!o.isShallow(e,t,o._inputLine[l],i))return!1;return!0};xi.prototype.isConcave=function(e,t,n){var r=Yt.computeOrientation(e,t,n),i=r===this._angleOrientation;return i};xi.prototype.simplify=function(e){var t=this;this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=Yt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=t.deleteShallowConcavities();while(n);return this.collapseLine()};xi.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===xi.DELETE;)t++;return t};xi.prototype.isShallow=function(e,t,n,r){var i=Yt.distancePointLine(t,e,n);return i<r};xi.prototype.collapseLine=function(){for(var e=this,t=new Cx,n=0;n<this._inputLine.length;n++)e._isDeleted[n]!==xi.DELETE&&t.add(e._inputLine[n]);return t.toCoordinateArray()};xi.prototype.interfaces_=function(){return[]};xi.prototype.getClass=function(){return xi};xi.simplify=function(e,t){var n=new xi(e);return n.simplify(t)};Lx.INIT.get=function(){return 0};Lx.DELETE.get=function(){return 1};Lx.KEEP.get=function(){return 1};Lx.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(xi,Lx);var Na=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Vt},I$={COORDINATE_ARRAY_TYPE:{configurable:!0}};Na.prototype.getCoordinates=function(){var e=this._ptList.toArray(Na.COORDINATE_ARRAY_TYPE);return e};Na.prototype.setPrecisionModel=function(e){this._precisionModel=e};Na.prototype.addPt=function(e){var t=new nt(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};Na.prototype.revere=function(){};Na.prototype.addPts=function(e,t){var n=this;if(t)for(var r=0;r<e.length;r++)n.addPt(e[r]);else for(var i=e.length-1;i>=0;i--)n.addPt(e[i])};Na.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1),n=e.distance(t);return n<this._minimimVertexDistance};Na.prototype.toString=function(){var e=new Kn,t=e.createLineString(this.getCoordinates());return t.toString()};Na.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new nt(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)};Na.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e};Na.prototype.interfaces_=function(){return[]};Na.prototype.getClass=function(){return Na};I$.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(Na,I$);var tr=function(){},Wg={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};tr.prototype.interfaces_=function(){return[]};tr.prototype.getClass=function(){return tr};tr.toDegrees=function(e){return e*180/Math.PI};tr.normalize=function(e){for(;e>Math.PI;)e-=tr.PI_TIMES_2;for(;e<=-Math.PI;)e+=tr.PI_TIMES_2;return e};tr.angle=function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=n.x-t.x,i=n.y-t.y;return Math.atan2(i,r)}};tr.isAcute=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,u=n.y-t.y,l=r*o+i*u;return l>0};tr.isObtuse=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,u=n.y-t.y,l=r*o+i*u;return l<0};tr.interiorAngle=function(e,t,n){var r=tr.angle(t,e),i=tr.angle(t,n);return Math.abs(i-r)};tr.normalizePositive=function(e){if(e<0){for(;e<0;)e+=tr.PI_TIMES_2;e>=tr.PI_TIMES_2&&(e=0)}else{for(;e>=tr.PI_TIMES_2;)e-=tr.PI_TIMES_2;e<0&&(e=0)}return e};tr.angleBetween=function(e,t,n){var r=tr.angle(t,e),i=tr.angle(t,n);return tr.diff(r,i)};tr.diff=function(e,t){var n=null;return e<t?n=t-e:n=e-t,n>Math.PI&&(n=2*Math.PI-n),n};tr.toRadians=function(e){return e*Math.PI/180};tr.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?tr.COUNTERCLOCKWISE:n<0?tr.CLOCKWISE:tr.NONE};tr.angleBetweenOriented=function(e,t,n){var r=tr.angle(t,e),i=tr.angle(t,n),o=i-r;return o<=-Math.PI?o+tr.PI_TIMES_2:o>Math.PI?o-tr.PI_TIMES_2:o};Wg.PI_TIMES_2.get=function(){return 2*Math.PI};Wg.PI_OVER_2.get=function(){return Math.PI/2};Wg.PI_OVER_4.get=function(){return Math.PI/4};Wg.COUNTERCLOCKWISE.get=function(){return Yt.COUNTERCLOCKWISE};Wg.CLOCKWISE.get=function(){return Yt.CLOCKWISE};Wg.NONE.get=function(){return Yt.COLLINEAR};Object.defineProperties(tr,Wg);var Wr=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new pn,this._seg1=new pn,this._offset0=new pn,this._offset1=new pn,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new lm,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===mr.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Ax={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Wr.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Yt.computeOrientation(this._s0,this._s1,this._s2),r=n===Yt.CLOCKWISE&&this._side===Rt.LEFT||n===Yt.COUNTERCLOCKWISE&&this._side===Rt.RIGHT;n===0?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)};Wr.prototype.addLineEndCap=function(e,t){var n=new pn(e,t),r=new pn;this.computeOffsetSegment(n,Rt.LEFT,this._distance,r);var i=new pn;this.computeOffsetSegment(n,Rt.RIGHT,this._distance,i);var o=t.x-e.x,u=t.y-e.y,l=Math.atan2(u,o);switch(this._bufParams.getEndCapStyle()){case mr.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(t,l+Math.PI/2,l-Math.PI/2,Yt.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case mr.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case mr.CAP_SQUARE:var p=new nt;p.x=Math.abs(this._distance)*Math.cos(l),p.y=Math.abs(this._distance)*Math.sin(l);var g=new nt(r.p1.x+p.x,r.p1.y+p.y),x=new nt(i.p1.x+p.x,i.p1.y+p.y);this._segList.addPt(g),this._segList.addPt(x);break}};Wr.prototype.getCoordinates=function(){var e=this._segList.getCoordinates();return e};Wr.prototype.addMitreJoin=function(e,t,n,r){var i=!0,o=null;try{o=$l.intersection(t.p0,t.p1,n.p0,n.p1);var u=r<=0?1:o.distance(e)/Math.abs(r);u>this._bufParams.getMitreLimit()&&(i=!1)}catch(l){if(l instanceof uv)o=new nt(0,0),i=!1;else throw l}finally{}i?this._segList.addPt(o):this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())};Wr.prototype.addFilletCorner=function(e,t,n,r,i){var o=t.x-e.x,u=t.y-e.y,l=Math.atan2(u,o),p=n.x-e.x,g=n.y-e.y,x=Math.atan2(g,p);r===Yt.CLOCKWISE?l<=x&&(l+=2*Math.PI):l>=x&&(l-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,l,x,r,i),this._segList.addPt(n)};Wr.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Wr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===mr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===mr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))};Wr.prototype.createSquare=function(e){this._segList.addPt(new nt(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new nt(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new nt(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new nt(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()};Wr.prototype.addSegments=function(e,t){this._segList.addPts(e,t)};Wr.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};Wr.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};Wr.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};Wr.prototype.addLimitedMitreJoin=function(e,t,n,r){var i=this._seg0.p1,o=tr.angle(i,this._seg0.p0),u=tr.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1),l=u/2,p=tr.normalize(o+l),g=tr.normalize(p+Math.PI),x=r*n,y=x*Math.abs(Math.sin(l)),_=n-y,T=i.x+x*Math.cos(g),P=i.y+x*Math.sin(g),A=new nt(T,P),M=new pn(i,A),k=M.pointAlongOffset(1,_),R=M.pointAlongOffset(1,-_);this._side===Rt.LEFT?(this._segList.addPt(k),this._segList.addPt(R)):(this._segList.addPt(R),this._segList.addPt(k))};Wr.prototype.computeOffsetSegment=function(e,t,n,r){var i=t===Rt.LEFT?1:-1,o=e.p1.x-e.p0.x,u=e.p1.y-e.p0.y,l=Math.sqrt(o*o+u*u),p=i*n*o/l,g=i*n*u/l;r.p0.x=e.p0.x-g,r.p0.y=e.p0.y+p,r.p1.x=e.p1.x-g,r.p1.y=e.p1.y+p};Wr.prototype.addFilletArc=function(e,t,n,r,i){var o=this,u=r===Yt.CLOCKWISE?-1:1,l=Math.abs(t-n),p=Math.trunc(l/this._filletAngleQuantum+.5);if(p<1)return null;for(var g=0,x=l/p,y=g,_=new nt;y<l;){var T=t+u*y;_.x=e.x+i*Math.cos(T),_.y=e.y+i*Math.sin(T),o._segList.addPt(_),y+=x}};Wr.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Wr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new nt((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new nt((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};Wr.prototype.createCircle=function(e){var t=new nt(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};Wr.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)};Wr.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Na,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*Wr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};Wr.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();t>=2&&(this._bufParams.getJoinStyle()===mr.JOIN_BEVEL||this._bufParams.getJoinStyle()===mr.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Yt.CLOCKWISE,this._distance))};Wr.prototype.closeRing=function(){this._segList.closeRing()};Wr.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};Wr.prototype.interfaces_=function(){return[]};Wr.prototype.getClass=function(){return Wr};Ax.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};Ax.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};Ax.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};Ax.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(Wr,Ax);var $s=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};$s.prototype.getOffsetCurve=function(e,t){if(this._distance=t,t===0)return null;var n=t<0,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var o=i.getCoordinates();return n&&Xn.reverse(o),o};$s.prototype.computeSingleSidedBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var i=xi.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Rt.LEFT),n.addFirstSegment();for(var u=o-2;u>=0;u--)n.addNextSegment(i[u],!0)}else{n.addSegments(e,!1);var l=xi.simplify(e,r),p=l.length-1;n.initSideSegments(l[0],l[1],Rt.LEFT),n.addFirstSegment();for(var g=2;g<=p;g++)n.addNextSegment(l[g],!0)}n.addLastSegment(),n.closeRing()};$s.prototype.computeRingBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);t===Rt.RIGHT&&(r=-r);var i=xi.simplify(e,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],t);for(var u=1;u<=o;u++){var l=u!==1;n.addNextSegment(i[u],l)}n.closeRing()};$s.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),r=xi.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],Rt.LEFT);for(var o=2;o<=i;o++)t.addNextSegment(r[o],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var u=xi.simplify(e,-n),l=u.length-1;t.initSideSegments(u[l],u[l-1],Rt.LEFT);for(var p=l-2;p>=0;p--)t.addNextSegment(u[p],!0);t.addLastSegment(),t.addLineEndCap(u[1],u[0]),t.closeRing()};$s.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case mr.CAP_ROUND:t.createCircle(e);break;case mr.CAP_SQUARE:t.createSquare(e);break}};$s.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided()||t===0)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this._bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);var o=r.getCoordinates();return o};$s.prototype.getBufferParameters=function(){return this._bufParams};$s.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()};$s.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(n===0)return $s.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()};$s.prototype.computeOffsetCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var i=xi.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Rt.LEFT),n.addFirstSegment();for(var u=o-2;u>=0;u--)n.addNextSegment(i[u],!0)}else{var l=xi.simplify(e,r),p=l.length-1;n.initSideSegments(l[0],l[1],Rt.LEFT),n.addFirstSegment();for(var g=2;g<=p;g++)n.addNextSegment(l[g],!0)}n.addLastSegment()};$s.prototype.getSegGen=function(e){return new Wr(this._precisionModel,this._bufParams,e)};$s.prototype.interfaces_=function(){return[]};$s.prototype.getClass=function(){return $s};$s.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new nt(e[n]);return t};var Pg=function(){this._subgraphs=null,this._seg=new pn,this._cga=new Yt;var e=arguments[0];this._subgraphs=e},P$={DepthSegment:{configurable:!0}};Pg.prototype.findStabbedSegments=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=new Vt,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();t.y<o.getMinY()||t.y>o.getMaxY()||e.findStabbedSegments(t,i.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(Sn(arguments[2],Ul)&&arguments[0]instanceof nt&&arguments[1]instanceof RP)for(var u=arguments[0],l=arguments[1],p=arguments[2],g=l.getEdge().getCoordinates(),x=0;x<g.length-1;x++){e._seg.p0=g[x],e._seg.p1=g[x+1],e._seg.p0.y>e._seg.p1.y&&e._seg.reverse();var y=Math.max(e._seg.p0.x,e._seg.p1.x);if(!(y<u.x)&&!e._seg.isHorizontal()&&!(u.y<e._seg.p0.y||u.y>e._seg.p1.y)&&Yt.computeOrientation(e._seg.p0,e._seg.p1,u)!==Yt.RIGHT){var _=l.getDepth(Rt.LEFT);e._seg.p0.equals(g[x])||(_=l.getDepth(Rt.RIGHT));var T=new Gp(e._seg,_);p.add(T)}}else if(Sn(arguments[2],Ul)&&arguments[0]instanceof nt&&Sn(arguments[1],Ul))for(var P=arguments[0],A=arguments[1],M=arguments[2],k=A.iterator();k.hasNext();){var R=k.next();R.isForward()&&e.findStabbedSegments(P,R,M)}}};Pg.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(t.size()===0)return 0;var n=Kl.min(t);return n._leftDepth};Pg.prototype.interfaces_=function(){return[]};Pg.prototype.getClass=function(){return Pg};P$.DepthSegment.get=function(){return Gp};Object.defineProperties(Pg,P$);var Gp=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new pn(e),this._leftDepth=t};Gp.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return n!==0||(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(t._upwardSeg)};Gp.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return n!==0?n:e.p1.compareTo(t.p1)};Gp.prototype.toString=function(){return this._upwardSeg.toString()};Gp.prototype.interfaces_=function(){return[ml]};Gp.prototype.getClass=function(){return Gp};var yr=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};yr.prototype.area=function(){return yr.area(this.p0,this.p1,this.p2)};yr.prototype.signedArea=function(){return yr.signedArea(this.p0,this.p1,this.p2)};yr.prototype.interpolateZ=function(e){if(e===null)throw new ri("Supplied point is null.");return yr.interpolateZ(e,this.p0,this.p1,this.p2)};yr.prototype.longestSideLength=function(){return yr.longestSideLength(this.p0,this.p1,this.p2)};yr.prototype.isAcute=function(){return yr.isAcute(this.p0,this.p1,this.p2)};yr.prototype.circumcentre=function(){return yr.circumcentre(this.p0,this.p1,this.p2)};yr.prototype.area3D=function(){return yr.area3D(this.p0,this.p1,this.p2)};yr.prototype.centroid=function(){return yr.centroid(this.p0,this.p1,this.p2)};yr.prototype.inCentre=function(){return yr.inCentre(this.p0,this.p1,this.p2)};yr.prototype.interfaces_=function(){return[]};yr.prototype.getClass=function(){return yr};yr.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)};yr.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2};yr.det=function(e,t,n,r){return e*r-t*n};yr.interpolateZ=function(e,t,n,r){var i=t.x,o=t.y,u=n.x-i,l=r.x-i,p=n.y-o,g=r.y-o,x=u*g-l*p,y=e.x-i,_=e.y-o,T=(g*y-l*_)/x,P=(-p*y+u*_)/x,A=t.z+T*(n.z-t.z)+P*(r.z-t.z);return A};yr.longestSideLength=function(e,t,n){var r=e.distance(t),i=t.distance(n),o=n.distance(e),u=r;return i>u&&(u=i),o>u&&(u=o),u};yr.isAcute=function(e,t,n){return!(!tr.isAcute(e,t,n)||!tr.isAcute(t,n,e)||!tr.isAcute(n,e,t))};yr.circumcentre=function(e,t,n){var r=n.x,i=n.y,o=e.x-r,u=e.y-i,l=t.x-r,p=t.y-i,g=2*yr.det(o,u,l,p),x=yr.det(u,o*o+u*u,p,l*l+p*p),y=yr.det(o,o*o+u*u,l,l*l+p*p),_=r-x/g,T=i+y/g;return new nt(_,T)};yr.perpendicularBisector=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new $l(e.x+n/2,e.y+r/2,1),o=new $l(e.x-r+n/2,e.y+n+r/2,1);return new $l(i,o)};yr.angleBisector=function(e,t,n){var r=t.distance(e),i=t.distance(n),o=r/(r+i),u=n.x-e.x,l=n.y-e.y,p=new nt(e.x+o*u,e.y+o*l);return p};yr.area3D=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=t.z-e.z,u=n.x-e.x,l=n.y-e.y,p=n.z-e.z,g=i*p-o*l,x=o*u-r*p,y=r*l-i*u,_=g*g+x*x+y*y,T=Math.sqrt(_)/2;return T};yr.centroid=function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new nt(r,i)};yr.inCentre=function(e,t,n){var r=t.distance(n),i=e.distance(n),o=e.distance(t),u=r+i+o,l=(r*e.x+i*t.x+o*n.x)/u,p=(r*e.y+i*t.y+o*n.y)/u;return new nt(l,p)};var pl=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Vt;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};pl.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,st.EXTERIOR,st.INTERIOR)};pl.prototype.addPolygon=function(e){var t=this,n=this._distance,r=Rt.LEFT;this._distance<0&&(n=-this._distance,r=Rt.RIGHT);var i=e.getExteriorRing(),o=Xn.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,st.EXTERIOR,st.INTERIOR);for(var u=0;u<e.getNumInteriorRing();u++){var l=e.getInteriorRingN(u),p=Xn.removeRepeatedPoints(l.getCoordinates());t._distance>0&&t.isErodedCompletely(l,-t._distance)||t.addPolygonRing(p,n,Rt.opposite(r),st.INTERIOR,st.EXTERIOR)}};pl.prototype.isTriangleErodedCompletely=function(e,t){var n=new yr(e[0],e[1],e[2]),r=n.inCentre(),i=Yt.distancePointLine(r,n.p0,n.p1);return i<Math.abs(t)};pl.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=Xn.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,st.EXTERIOR,st.INTERIOR)};pl.prototype.addCurve=function(e,t,n){if(e===null||e.length<2)return null;var r=new Ri(e,new Sr(0,st.BOUNDARY,t,n));this._curveList.add(r)};pl.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};pl.prototype.addPolygonRing=function(e,t,n,r,i){if(t===0&&e.length<Vc.MINIMUM_VALID_SIZE)return null;var o=r,u=i;e.length>=Vc.MINIMUM_VALID_SIZE&&Yt.isCCW(e)&&(o=i,u=r,n=Rt.opposite(n));var l=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(l,o,u)};pl.prototype.add=function(e){if(e.isEmpty())return null;e instanceof Xi?this.addPolygon(e):e instanceof vi?this.addLineString(e):e instanceof sa?this.addPoint(e):e instanceof F_?this.addCollection(e):e instanceof Vp?this.addCollection(e):e instanceof zc?this.addCollection(e):e instanceof cs&&this.addCollection(e)};pl.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(n.length===4)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>i};pl.prototype.addCollection=function(e){for(var t=this,n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);t.add(r)}};pl.prototype.interfaces_=function(){return[]};pl.prototype.getClass=function(){return pl};var U_=function(){};U_.prototype.locate=function(e){};U_.prototype.interfaces_=function(){return[]};U_.prototype.getClass=function(){return U_};var Fc=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};Fc.prototype.next=function(){if(this._atStart)return this._atStart=!1,Fc.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new hv;var e=this._parent.getGeometryN(this._index++);return e instanceof cs?(this._subcollectionIterator=new Fc(e),this._subcollectionIterator.next()):e};Fc.prototype.remove=function(){throw new Error(this.getClass().getName())};Fc.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};Fc.prototype.interfaces_=function(){return[cv]};Fc.prototype.getClass=function(){return Fc};Fc.isAtomic=function(e){return!(e instanceof cs)};var Oa=function(){this._geom=null;var e=arguments[0];this._geom=e};Oa.prototype.locate=function(e){return Oa.locate(e,this._geom)};Oa.prototype.interfaces_=function(){return[U_]};Oa.prototype.getClass=function(){return Oa};Oa.isPointInRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?Yt.isPointInRing(e,t.getCoordinates()):!1};Oa.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!Oa.isPointInRing(e,n))return!1;for(var r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);if(Oa.isPointInRing(e,i))return!1}return!0};Oa.containsPoint=function(e,t){if(t instanceof Xi)return Oa.containsPointInPolygon(e,t);if(t instanceof cs)for(var n=new Fc(t);n.hasNext();){var r=n.next();if(r!==t&&Oa.containsPoint(e,r))return!0}return!1};Oa.locate=function(e,t){return t.isEmpty()?st.EXTERIOR:Oa.containsPoint(e,t)?st.INTERIOR:st.EXTERIOR};var Ho=function(){this._edgeMap=new qo,this._edgeList=null,this._ptInAreaLocation=[st.NONE,st.NONE]};Ho.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return t===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};Ho.prototype.propagateSideLabels=function(e){for(var t=st.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(e)&&i.getLocation(e,Rt.LEFT)!==st.NONE&&(t=i.getLocation(e,Rt.LEFT))}if(t===st.NONE)return null;for(var o=t,u=this.iterator();u.hasNext();){var l=u.next(),p=l.getLabel();if(p.getLocation(e,Rt.ON)===st.NONE&&p.setLocation(e,Rt.ON,o),p.isArea(e)){var g=p.getLocation(e,Rt.LEFT),x=p.getLocation(e,Rt.RIGHT);if(x!==st.NONE){if(x!==o)throw new Qh("side location conflict",l.getCoordinate());g===st.NONE&&zn.shouldNeverReachHere("found single null side (at "+l.getCoordinate()+")"),o=g}else zn.isTrue(p.getLocation(e,Rt.LEFT)===st.NONE,"found single null side"),p.setLocation(e,Rt.RIGHT,o),p.setLocation(e,Rt.LEFT,o)}}};Ho.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()};Ho.prototype.print=function(e){Mo.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Ho.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};Ho.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),i=r.getLocation(e,Rt.LEFT);zn.isTrue(i!==st.NONE,"Found unlabelled area edge");for(var o=i,u=this.iterator();u.hasNext();){var l=u.next(),p=l.getLabel();zn.isTrue(p.isArea(e),"Found non-area edge");var g=p.getLocation(e,Rt.LEFT),x=p.getLocation(e,Rt.RIGHT);if(g===x||x!==o)return!1;o=g}return!0};Ho.prototype.findIndex=function(e){var t=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var r=t._edgeList.get(n);if(r===e)return n}return-1};Ho.prototype.iterator=function(){return this.getEdges().iterator()};Ho.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new Vt(this._edgeMap.values())),this._edgeList};Ho.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===st.NONE&&(this._ptInAreaLocation[e]=Oa.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]};Ho.prototype.toString=function(){var e=new tc;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append(`
`);for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append(`
`)}return e.toString()};Ho.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}};Ho.prototype.computeLabelling=function(e){var t=this;this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],r=this.iterator();r.hasNext();)for(var i=r.next(),o=i.getLabel(),u=0;u<2;u++)o.isLine(u)&&o.getLocation(u)===st.BOUNDARY&&(n[u]=!0);for(var l=this.iterator();l.hasNext();)for(var p=l.next(),g=p.getLabel(),x=0;x<2;x++)if(g.isAnyNull(x)){var y=st.NONE;if(n[x])y=st.EXTERIOR;else{var _=p.getCoordinate();y=t.getLocation(x,_,e)}g.setAllLocationsIfNull(x,y)}};Ho.prototype.getDegree=function(){return this._edgeMap.size()};Ho.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null};Ho.prototype.interfaces_=function(){return[]};Ho.prototype.getClass=function(){return Ho};var gle=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var r=null,i=null,o=this._SCANNING_FOR_INCOMING,u=0;u<this._resultAreaEdgeList.size();u++){var l=n._resultAreaEdgeList.get(u),p=l.getSym();if(l.getLabel().isArea())switch(r===null&&l.isInResult()&&(r=l),o){case n._SCANNING_FOR_INCOMING:if(!p.isInResult())continue;i=p,o=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!l.isInResult())continue;i.setNext(l),o=n._SCANNING_FOR_INCOMING;break}}if(o===this._LINKING_TO_OUTGOING){if(r===null)throw new Qh("no outgoing dirEdge found",this.getCoordinate());zn.isTrue(r.isInResult(),"unable to link last incoming dirEdge"),i.setNext(r)}},t.prototype.insert=function(n){var r=n;this.insertEdgeEnd(r,r)},t.prototype.getRightmostEdge=function(){var n=this.getEdges(),r=n.size();if(r<1)return null;var i=n.get(0);if(r===1)return i;var o=n.get(r-1),u=i.getQuadrant(),l=o.getQuadrant();return Ar.isNorthern(u)&&Ar.isNorthern(l)?i:!Ar.isNorthern(u)&&!Ar.isNorthern(l)?o:i.getDy()!==0?i:o.getDy()!==0?o:(zn.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(n){Mo.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var i=r.next();n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()}},t.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Vt;for(var r=this.iterator();r.hasNext();){var i=r.next();(i.isInResult()||i.getSym().isInResult())&&n._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(n){for(var r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.setAllLocationsIfNull(0,n.getLocation(0)),o.setAllLocationsIfNull(1,n.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var r=null,i=null,o=this._edgeList.size()-1;o>=0;o--){var u=n._edgeList.get(o),l=u.getSym();i===null&&(i=l),r!==null&&l.setNext(r),r=u}i.setNext(r)},t.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var r=arguments[0],i=this.findIndex(r),o=r.getDepth(Rt.LEFT),u=r.getDepth(Rt.RIGHT),l=this.computeDepths(i+1,this._edgeList.size(),o),p=this.computeDepths(0,i,l);if(p!==u)throw new Qh("depth mismatch at "+r.getCoordinate())}else if(arguments.length===3){for(var g=arguments[0],x=arguments[1],y=arguments[2],_=y,T=g;T<x;T++){var P=n._edgeList.get(T);P.setEdgeDepths(Rt.RIGHT,_),_=P.getDepth(Rt.LEFT)}return _}},t.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.merge(r.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(n){for(var r=this,i=null,o=null,u=this._SCANNING_FOR_INCOMING,l=this._resultAreaEdgeList.size()-1;l>=0;l--){var p=r._resultAreaEdgeList.get(l),g=p.getSym();switch(i===null&&p.getEdgeRing()===n&&(i=p),u){case r._SCANNING_FOR_INCOMING:if(g.getEdgeRing()!==n)continue;o=g,u=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(p.getEdgeRing()!==n)continue;o.setNextMin(p),u=r._SCANNING_FOR_INCOMING;break}}u===this._LINKING_TO_OUTGOING&&(zn.isTrue(i!==null,"found null for first outgoing dirEdge"),zn.isTrue(i.getEdgeRing()===n,"unable to link last incoming dirEdge"),o.setNextMin(i))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,r=this.iterator();r.hasNext();){var i=r.next();i.isInResult()&&n++}return n}else if(arguments.length===1){for(var o=arguments[0],u=0,l=this.iterator();l.hasNext();){var p=l.next();p.getEdgeRing()===o&&u++}return u}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var n=st.NONE,r=this.iterator();r.hasNext();){var i=r.next(),o=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){n=st.INTERIOR;break}if(o.isInResult()){n=st.EXTERIOR;break}}}if(n===st.NONE)return null;for(var u=n,l=this.iterator();l.hasNext();){var p=l.next(),g=p.getSym();p.isLineEdge()?p.getEdge().setCovered(u===st.INTERIOR):(p.isInResult()&&(u=st.EXTERIOR),g.isInResult()&&(u=st.INTERIOR))}},t.prototype.computeLabelling=function(n){var r=this;e.prototype.computeLabelling.call(this,n),this._label=new Sr(st.NONE);for(var i=this.iterator();i.hasNext();)for(var o=i.next(),u=o.getEdge(),l=u.getLabel(),p=0;p<2;p++){var g=l.getLocation(p);(g===st.INTERIOR||g===st.BOUNDARY)&&r._label.setLocation(p,st.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ho),L$=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(n){return new XS(n,new gle)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(B_),md=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};md.prototype.compareTo=function(e){var t=e,n=md.compareOriented(this._pts,this._orientation,t._pts,t._orientation);return n};md.prototype.interfaces_=function(){return[ml]};md.prototype.getClass=function(){return md};md.orientation=function(e){return Xn.increasingDirection(e)===1};md.compareOriented=function(e,t,n,r){for(var i=t?1:-1,o=r?1:-1,u=t?e.length:-1,l=r?n.length:-1,p=t?0:e.length-1,g=r?0:n.length-1;;){var x=e[p].compareTo(n[g]);if(x!==0)return x;p+=i,g+=o;var y=p===u,_=g===l;if(y&&!_)return-1;if(!y&&_)return 1;if(y&&_)return 0}};var Xl=function(){this._edges=new Vt,this._ocaMap=new qo};Xl.prototype.print=function(e){var t=this;e.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var r=t._edges.get(n);n>0&&e.print(","),e.print("(");for(var i=r.getCoordinates(),o=0;o<i.length;o++)o>0&&e.print(","),e.print(i[o].x+" "+i[o].y);e.println(")")}e.print(")  ")};Xl.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next())};Xl.prototype.findEdgeIndex=function(e){for(var t=this,n=0;n<this._edges.size();n++)if(t._edges.get(n).equals(e))return n;return-1};Xl.prototype.iterator=function(){return this._edges.iterator()};Xl.prototype.getEdges=function(){return this._edges};Xl.prototype.get=function(e){return this._edges.get(e)};Xl.prototype.findEqualEdge=function(e){var t=new md(e.getCoordinates()),n=this._ocaMap.get(t);return n};Xl.prototype.add=function(e){this._edges.add(e);var t=new md(e.getCoordinates());this._ocaMap.put(t,e)};Xl.prototype.interfaces_=function(){return[]};Xl.prototype.getClass=function(){return Xl};var Hp=function(){};Hp.prototype.processIntersections=function(e,t,n,r){};Hp.prototype.isDone=function(){};Hp.prototype.interfaces_=function(){return[]};Hp.prototype.getClass=function(){return Hp};var Da=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};Da.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(Da.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};Da.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Da.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Da.prototype.getLineIntersector=function(){return this._li};Da.prototype.hasProperIntersection=function(){return this._hasProper};Da.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],u=n.getCoordinates()[r],l=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,u,l),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};Da.prototype.hasIntersection=function(){return this._hasIntersection};Da.prototype.isDone=function(){return!1};Da.prototype.hasInteriorIntersection=function(){return this._hasInterior};Da.prototype.interfaces_=function(){return[Hp]};Da.prototype.getClass=function(){return Da};Da.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var Ku=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new nt(e),this.segmentIndex=t,this.dist=n};Ku.prototype.getSegmentIndex=function(){return this.segmentIndex};Ku.prototype.getCoordinate=function(){return this.coord};Ku.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)};Ku.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)};Ku.prototype.isEndPoint=function(e){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===e};Ku.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};Ku.prototype.getDistance=function(){return this.dist};Ku.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0};Ku.prototype.interfaces_=function(){return[ml]};Ku.prototype.getClass=function(){return Ku};var Hc=function(){this._nodeMap=new qo,this.edge=null;var e=arguments[0];this.edge=e};Hc.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Hc.prototype.iterator=function(){return this._nodeMap.values().iterator()};Hc.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};Hc.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)};Hc.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this.edge.pts[t.segmentIndex],o=t.dist>0||!t.coord.equals2D(i);o||r--;var u=new Array(r).fill(null),l=0;u[l++]=new nt(e.coord);for(var p=e.segmentIndex+1;p<=t.segmentIndex;p++)u[l++]=n.edge.pts[p];return o&&(u[l]=t.coord),new dE(u,new Sr(this.edge._label))};Hc.prototype.add=function(e,t,n){var r=new Ku(e,t,n),i=this._nodeMap.get(r);return i!==null?i:(this._nodeMap.put(r,r),r)};Hc.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1};Hc.prototype.interfaces_=function(){return[]};Hc.prototype.getClass=function(){return Hc};var Zp=function(){};Zp.prototype.getChainStartIndices=function(e){var t=this,n=0,r=new Vt;r.add(new Vu(n));do{var i=t.findChainEnd(e,n);r.add(new Vu(i)),n=i}while(n<e.length-1);var o=Zp.toIntArray(r);return o};Zp.prototype.findChainEnd=function(e,t){for(var n=Ar.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){var i=Ar.quadrant(e[r-1],e[r]);if(i!==n)break;r++}return r-1};Zp.prototype.interfaces_=function(){return[]};Zp.prototype.getClass=function(){return Zp};Zp.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var tf=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new dn,this.env2=new dn;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new Zp;this.startIndex=t.getChainStartIndices(this.pts)};tf.prototype.getCoordinates=function(){return this.pts};tf.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n};tf.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n};tf.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],r)}else if(arguments.length===6){var i=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3],p=arguments[4],g=arguments[5],x=this.pts[i],y=this.pts[o],_=u.pts[l],T=u.pts[p];if(o-i===1&&p-l===1)return g.addIntersections(this.e,i,u.e,l),null;if(this.env1.init(x,y),this.env2.init(_,T),!this.env1.intersects(this.env2))return null;var P=Math.trunc((i+o)/2),A=Math.trunc((l+p)/2);i<P&&(l<A&&this.computeIntersectsForChain(i,P,u,l,A,g),A<p&&this.computeIntersectsForChain(i,P,u,A,p,g)),P<o&&(l<A&&this.computeIntersectsForChain(P,o,u,l,A,g),A<p&&this.computeIntersectsForChain(P,o,u,A,p,g))}};tf.prototype.getStartIndexes=function(){return this.startIndex};tf.prototype.computeIntersects=function(e,t){for(var n=this,r=0;r<this.startIndex.length-1;r++)for(var i=0;i<e.startIndex.length-1;i++)n.computeIntersectsForChain(r,e,i,t)};tf.prototype.interfaces_=function(){return[]};tf.prototype.getClass=function(){return tf};var Ro=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var r=0;r<3;r++)t._depth[n][r]=e.NULL_VALUE},A$={NULL_VALUE:{configurable:!0}};Ro.prototype.getDepth=function(e,t){return this._depth[e][t]};Ro.prototype.setDepth=function(e,t,n){this._depth[e][t]=n};Ro.prototype.isNull=function(){var e=this;if(arguments.length===0){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(e._depth[t][n]!==Ro.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var r=arguments[0];return this._depth[r][1]===Ro.NULL_VALUE}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._depth[i][o]===Ro.NULL_VALUE}};Ro.prototype.normalize=function(){for(var e=this,t=0;t<2;t++)if(!e.isNull(t)){var n=e._depth[t][1];e._depth[t][2]<n&&(n=e._depth[t][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;e._depth[t][r]>n&&(i=1),e._depth[t][r]=i}}};Ro.prototype.getDelta=function(e){return this._depth[e][Rt.RIGHT]-this._depth[e][Rt.LEFT]};Ro.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?st.EXTERIOR:st.INTERIOR};Ro.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Ro.prototype.add=function(){var e=this;if(arguments.length===1)for(var t=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=t.getLocation(n,r);(i===st.EXTERIOR||i===st.INTERIOR)&&(e.isNull(n,r)?e._depth[n][r]=Ro.depthAtLocation(i):e._depth[n][r]+=Ro.depthAtLocation(i))}else if(arguments.length===3){var o=arguments[0],u=arguments[1],l=arguments[2];l===st.INTERIOR&&this._depth[o][u]++}};Ro.prototype.interfaces_=function(){return[]};Ro.prototype.getClass=function(){return Ro};Ro.depthAtLocation=function(e){return e===st.EXTERIOR?0:e===st.INTERIOR?1:Ro.NULL_VALUE};A$.NULL_VALUE.get=function(){return-1};Object.defineProperties(Ro,A$);var dE=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new Hc(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Ro,this._depthDelta=0,arguments.length===1){var n=arguments[0];t.call(this,n,null)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var r=new t(n,Sr.toLineLabel(this._label));return r},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(n){this._isIsolated=n},t.prototype.setName=function(n){this._name=n},t.prototype.equals=function(n){var r=this;if(!(n instanceof t))return!1;var i=n;if(this.pts.length!==i.pts.length)return!1;for(var o=!0,u=!0,l=this.pts.length,p=0;p<this.pts.length;p++)if(r.pts[p].equals2D(i.pts[p])||(o=!1),r.pts[p].equals2D(i.pts[--l])||(u=!1),!o&&!u)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},t.prototype.print=function(n){var r=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.print(","),n.print(r.pts[i].x+" "+r.pts[i].y);n.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(n){t.updateIM(this._label,n)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(n){var r=this;n.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)n.print(r.pts[i]+" ");n.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new tf(this)),this._mce},t.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new dn;for(var r=0;r<this.pts.length;r++)n._env.expandToInclude(n.pts[r])}return this._env},t.prototype.addIntersection=function(n,r,i,o){var u=new nt(n.getIntersection(o)),l=r,p=n.getEdgeDistance(i,o),g=l+1;if(g<this.pts.length){var x=this.pts[g];u.equals2D(x)&&(l=g,p=0)}this.eiList.add(u,l,p)},t.prototype.toString=function(){var n=this,r=new tc;r.append("edge "+this._name+": "),r.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&r.append(","),r.append(n.pts[i].x+" "+n.pts[i].y);return r.append(")  "+this._label+" "+this._depthDelta),r.toString()},t.prototype.isPointwiseEqual=function(n){var r=this;if(this.pts.length!==n.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!r.pts[i].equals2D(n.pts[i]))return!1;return!0},t.prototype.setDepthDelta=function(n){this._depthDelta=n},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(n,r,i){for(var o=this,u=0;u<n.getIntersectionNum();u++)o.addIntersection(n,r,i,u)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];r.setAtLeastIfValid(n.getLocation(0,Rt.ON),n.getLocation(1,Rt.ON),1),n.isArea()&&(r.setAtLeastIfValid(n.getLocation(0,Rt.LEFT),n.getLocation(1,Rt.LEFT),2),r.setAtLeastIfValid(n.getLocation(0,Rt.RIGHT),n.getLocation(1,Rt.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(Ma),us=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xl,this._bufParams=e||null};us.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e};us.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new Sr(e.getLabel()),r.flip()),n.merge(r);var i=us.depthDelta(r),o=t.getDepthDelta(),u=o+i;t.setDepthDelta(u)}else this._edgeList.add(e),e.setDepthDelta(us.depthDelta(e.getLabel()))};us.prototype.buildSubgraphs=function(e,t){for(var n=new Vt,r=e.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),u=new Pg(n),l=u.getDepth(o);i.computeDepth(l),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}};us.prototype.createSubgraphs=function(e){for(var t=new Vt,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new hs;i.create(r),t.add(i)}}return Kl.sort(t,Kl.reverseOrder()),t};us.prototype.createEmptyResultGeometry=function(){var e=this._geomFact.createPolygon();return e};us.prototype.getNoder=function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new hO,n=new lm;return n.setPrecisionModel(e),t.setSegmentIntersector(new Da(n)),t};us.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new $s(n,this._bufParams),i=new pl(e,t,r),o=i.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this._graph=new ci(new L$),this._graph.addEdges(this._edgeList.getEdges());var u=this.createSubgraphs(this._graph),l=new aa(this._geomFact);this.buildSubgraphs(u,l);var p=l.getPolygons();if(p.size()<=0)return this.createEmptyResultGeometry();var g=this._geomFact.buildGeometry(p);return g};us.prototype.computeNodedEdges=function(e,t){var n=this,r=this.getNoder(t);r.computeNodes(e);for(var i=r.getNodedSubstrings(),o=i.iterator();o.hasNext();){var u=o.next(),l=u.getCoordinates();if(!(l.length===2&&l[0].equals2D(l[1]))){var p=u.getData(),g=new dE(u.getCoordinates(),new Sr(p));n.insertUniqueEdge(g)}}};us.prototype.setNoder=function(e){this._workingNoder=e};us.prototype.interfaces_=function(){return[]};us.prototype.getClass=function(){return us};us.depthDelta=function(e){var t=e.getLocation(0,Rt.LEFT),n=e.getLocation(0,Rt.RIGHT);return t===st.INTERIOR&&n===st.EXTERIOR?1:t===st.EXTERIOR&&n===st.INTERIOR?-1:0};us.convertSegStrings=function(e){for(var t=new Kn,n=new Vt;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)};var gd=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};gd.prototype.rescale=function(){var e=this;if(Sn(arguments[0],qi))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/e._scaleFactor+e._offsetX,i[o].y=i[o].y/e._scaleFactor+e._offsetY;i.length===2&&i[0].equals2D(i[1])&&Mo.out.println(i)}};gd.prototype.scale=function(){var e=this;if(Sn(arguments[0],qi)){for(var t=arguments[0],n=new Vt,r=t.iterator();r.hasNext();){var i=r.next();n.add(new Ri(e.scale(i.getCoordinates()),i.getData()))}return n}else if(arguments[0]instanceof Array){for(var o=arguments[0],u=new Array(o.length).fill(null),l=0;l<o.length;l++)u[l]=new nt(Math.round((o[l].x-e._offsetX)*e._scaleFactor),Math.round((o[l].y-e._offsetY)*e._scaleFactor),o[l].z);var p=Xn.removeRepeatedPoints(u);return p}};gd.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};gd.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e};gd.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)};gd.prototype.interfaces_=function(){return[qp]};gd.prototype.getClass=function(){return gd};var Xu=function(){this._li=new lm,this._segStrings=null;var e=arguments[0];this._segStrings=e},O$={fact:{configurable:!0}};Xu.prototype.checkEndPtVertexIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next(),r=n.getCoordinates();e.checkEndPtVertexIntersections(r[0],e._segStrings),e.checkEndPtVertexIntersections(r[r.length-1],e._segStrings)}else if(arguments.length===2){for(var i=arguments[0],o=arguments[1],u=o.iterator();u.hasNext();)for(var l=u.next(),p=l.getCoordinates(),g=1;g<p.length-1;g++)if(p[g].equals(i))throw new Yh("found endpt/interior pt intersection at index "+g+" :pt "+i)}};Xu.prototype.checkInteriorIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var n=t.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();e.checkInteriorIntersections(n,i)}else if(arguments.length===2)for(var o=arguments[0],u=arguments[1],l=o.getCoordinates(),p=u.getCoordinates(),g=0;g<l.length-1;g++)for(var x=0;x<p.length-1;x++)e.checkInteriorIntersections(o,g,u,x);else if(arguments.length===4){var y=arguments[0],_=arguments[1],T=arguments[2],P=arguments[3];if(y===T&&_===P)return null;var A=y.getCoordinates()[_],M=y.getCoordinates()[_+1],k=T.getCoordinates()[P],R=T.getCoordinates()[P+1];if(this._li.computeIntersection(A,M,k,R),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,A,M)||this.hasInteriorIntersection(this._li,k,R)))throw new Yh("found non-noded intersection at "+A+"-"+M+" and "+k+"-"+R)}};Xu.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};Xu.prototype.checkCollapses=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next();e.checkCollapses(n)}else if(arguments.length===1)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)e.checkCollapse(i[o],i[o+1],i[o+2])};Xu.prototype.hasInteriorIntersection=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!(i.equals(t)||i.equals(n)))return!0}return!1};Xu.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new Yh("found non-noded collapse at "+Xu.fact.createLineString([e,t,n]))};Xu.prototype.interfaces_=function(){return[]};Xu.prototype.getClass=function(){return Xu};O$.fact.get=function(){return new Kn};Object.defineProperties(Xu,O$);var Us=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new ri("Scale factor must be non-zero");t!==1&&(this._pt=new nt(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new nt,this._p1Scaled=new nt),this.initCorners(this._pt)},k$={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Us.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),u=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(u)return!1;var l=this.intersectsToleranceSquare(e,t);return zn.isTrue(!(u&&l),"Found bad envelope test"),l};Us.prototype.initCorners=function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new nt(this._maxx,this._maxy),this._corner[1]=new nt(this._minx,this._maxy),this._corner[2]=new nt(this._minx,this._miny),this._corner[3]=new nt(this._maxx,this._miny)};Us.prototype.intersects=function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};Us.prototype.scale=function(e){return Math.round(e*this._scaleFactor)};Us.prototype.getCoordinate=function(){return this._originalPt};Us.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)};Us.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var e=Us.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new dn(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv};Us.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))};Us.prototype.intersectsToleranceSquare=function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper())||n&&r||e.equals(this._pt)||t.equals(this._pt))};Us.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1};Us.prototype.interfaces_=function(){return[]};Us.prototype.getClass=function(){return Us};k$.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(Us,k$);var $1=function(){this.tempEnv1=new dn,this.selectedSegment=new pn};$1.prototype.select=function(){if(arguments.length!==1&&arguments.length===2){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}};$1.prototype.interfaces_=function(){return[]};$1.prototype.getClass=function(){return $1};var V_=function(){this._index=null;var e=arguments[0];this._index=e},R$={HotPixelSnapAction:{configurable:!0}};V_.prototype.snap=function(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getSafeEnvelope(),o=new M$(t,n,r);return this._index.query(i,{interfaces_:function(){return[dd]},visitItem:function(u){var l=u;l.select(i,o)}}),o.isNodeAdded()}};V_.prototype.interfaces_=function(){return[]};V_.prototype.getClass=function(){return V_};R$.HotPixelSnapAction.get=function(){return M$};Object.defineProperties(V_,R$);var M$=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=n,this._parentEdge=r,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1],i=n.getContext();if(this._parentEdge!==null&&i===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,r)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}($1),Lg=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new Vt};Lg.prototype.processIntersections=function(e,t,n,r){var i=this;if(e===n&&t===r)return null;var o=e.getCoordinates()[t],u=e.getCoordinates()[t+1],l=n.getCoordinates()[r],p=n.getCoordinates()[r+1];if(this._li.computeIntersection(o,u,l,p),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var g=0;g<this._li.getIntersectionNum();g++)i._interiorIntersections.add(i._li.getIntersection(g));e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)}};Lg.prototype.isDone=function(){return!1};Lg.prototype.getInteriorIntersections=function(){return this._interiorIntersections};Lg.prototype.interfaces_=function(){return[Hp]};Lg.prototype.getClass=function(){return Lg};var Zc=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new lm,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};Zc.prototype.checkCorrectness=function(e){var t=Ri.getNodedSubstrings(e),n=new Xu(t);try{n.checkValid()}catch(r){if(r instanceof y$)r.printStackTrace();else throw r}finally{}};Zc.prototype.getNodedSubstrings=function(){return Ri.getNodedSubstrings(this._nodedSegStrings)};Zc.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)};Zc.prototype.findInteriorIntersections=function(e,t){var n=new Lg(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()};Zc.prototype.computeVertexSnaps=function(){var e=this;if(Sn(arguments[0],qi))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.computeVertexSnaps(r)}else if(arguments[0]instanceof Ri)for(var i=arguments[0],o=i.getCoordinates(),u=0;u<o.length;u++){var l=new Us(o[u],e._scaleFactor,e._li),p=e._pointSnapper.snap(l,i,u);p&&i.addIntersection(o[u],u)}};Zc.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new hO,this._pointSnapper=new V_(this._noder.getIndex()),this.snapRound(e,this._li)};Zc.prototype.computeIntersectionSnaps=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=new Us(r,t._scaleFactor,t._li);t._pointSnapper.snap(i)}};Zc.prototype.interfaces_=function(){return[qp]};Zc.prototype.getClass=function(){return Zc};var Oo=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new mr,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},fv={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Oo.prototype.bufferFixedPrecision=function(e){var t=new gd(new Zc(new gr(1)),e.getScale()),n=new us(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)};Oo.prototype.bufferReducedPrecision=function(){var e=this;if(arguments.length===0){for(var t=Oo.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(o){if(o instanceof Qh)e._saveException=o;else throw o}finally{}if(e._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],r=Oo.precisionScaleFactor(this._argGeom,this._distance,n),i=new gr(r);this.bufferFixedPrecision(i)}};Oo.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===gr.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()};Oo.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)};Oo.prototype.bufferOriginalPrecision=function(){try{var e=new us(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(t instanceof Yh)this._saveException=t;else throw t}finally{}};Oo.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry};Oo.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)};Oo.prototype.interfaces_=function(){return[]};Oo.prototype.getClass=function(){return Oo};Oo.bufferOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Oo(e),r=n.getResultGeometry(t);return r}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof bn&&typeof arguments[1]=="number"){var i=arguments[0],o=arguments[1],u=arguments[2],l=new Oo(i);l.setQuadrantSegments(u);var p=l.getResultGeometry(o);return p}else if(arguments[2]instanceof mr&&arguments[0]instanceof bn&&typeof arguments[1]=="number"){var g=arguments[0],x=arguments[1],y=arguments[2],_=new Oo(g,y),T=_.getResultGeometry(x);return T}}else if(arguments.length===4){var P=arguments[0],A=arguments[1],M=arguments[2],k=arguments[3],R=new Oo(P);R.setQuadrantSegments(M),R.setEndCapStyle(k);var z=R.getResultGeometry(A);return z}};Oo.precisionScaleFactor=function(e,t,n){var r=e.getEnvelopeInternal(),i=Ra.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),o=t>0?t:0,u=i+2*o,l=Math.trunc(Math.log(u)/Math.log(10)+1),p=n-l,g=Math.pow(10,p);return g};fv.CAP_ROUND.get=function(){return mr.CAP_ROUND};fv.CAP_BUTT.get=function(){return mr.CAP_FLAT};fv.CAP_FLAT.get=function(){return mr.CAP_FLAT};fv.CAP_SQUARE.get=function(){return mr.CAP_SQUARE};fv.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Oo,fv);var os=function(){this._pt=[new nt,new nt],this._distance=kn.NaN,this._isNull=!0};os.prototype.getCoordinates=function(){return this._pt};os.prototype.getCoordinate=function(e){return this._pt[e]};os.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};os.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};os.prototype.getDistance=function(){return this._distance};os.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};os.prototype.interfaces_=function(){return[]};os.prototype.getClass=function(){return os};var Oc=function(){};Oc.prototype.interfaces_=function(){return[]};Oc.prototype.getClass=function(){return Oc};Oc.computeDistance=function(){if(arguments[2]instanceof os&&arguments[0]instanceof vi&&arguments[1]instanceof nt)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=e.getCoordinates(),i=new pn,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var u=i.closestPoint(t);n.setMinimum(u,t)}else if(arguments[2]instanceof os&&arguments[0]instanceof Xi&&arguments[1]instanceof nt){var l=arguments[0],p=arguments[1],g=arguments[2];Oc.computeDistance(l.getExteriorRing(),p,g);for(var x=0;x<l.getNumInteriorRing();x++)Oc.computeDistance(l.getInteriorRingN(x),p,g)}else if(arguments[2]instanceof os&&arguments[0]instanceof bn&&arguments[1]instanceof nt){var y=arguments[0],_=arguments[1],T=arguments[2];if(y instanceof vi)Oc.computeDistance(y,_,T);else if(y instanceof Xi)Oc.computeDistance(y,_,T);else if(y instanceof cs)for(var P=y,A=0;A<P.getNumGeometries();A++){var M=P.getGeometryN(A);Oc.computeDistance(M,_,T)}else T.setMinimum(y.getCoordinate(),_)}else if(arguments[2]instanceof os&&arguments[0]instanceof pn&&arguments[1]instanceof nt){var k=arguments[0],R=arguments[1],z=arguments[2],D=k.closestPoint(R);z.setMinimum(D,R)}};var Wp=function(e){this._maxPtDist=new os,this._inputGeom=e||null},fO={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Wp.prototype.computeMaxMidpointDistance=function(e){var t=new yd(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Wp.prototype.computeMaxVertexDistance=function(e){var t=new Ag(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Wp.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()};Wp.prototype.getDistancePoints=function(){return this._maxPtDist};Wp.prototype.interfaces_=function(){return[]};Wp.prototype.getClass=function(){return Wp};fO.MaxPointDistanceFilter.get=function(){return Ag};fO.MaxMidpointDistanceFilter.get=function(){return yd};Object.defineProperties(Wp,fO);var Ag=function(e){this._maxPtDist=new os,this._minPtDist=new os,this._geom=e||null};Ag.prototype.filter=function(e){this._minPtDist.initialize(),Oc.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Ag.prototype.getMaxPointDistance=function(){return this._maxPtDist};Ag.prototype.interfaces_=function(){return[Uc]};Ag.prototype.getClass=function(){return Ag};var yd=function(e){this._maxPtDist=new os,this._minPtDist=new os,this._geom=e||null};yd.prototype.filter=function(e,t){if(t===0)return null;var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=new nt((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),Oc.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};yd.prototype.isDone=function(){return!1};yd.prototype.isGeometryChanged=function(){return!1};yd.prototype.getMaxPointDistance=function(){return this._maxPtDist};yd.prototype.interfaces_=function(){return[Zl]};yd.prototype.getClass=function(){return yd};var Kh=function(e){this._comps=e||null};Kh.prototype.filter=function(e){e instanceof Xi&&this._comps.add(e)};Kh.prototype.interfaces_=function(){return[Gu]};Kh.prototype.getClass=function(){return Kh};Kh.getPolygons=function(){if(arguments.length===1){var e=arguments[0];return Kh.getPolygons(e,new Vt)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof Xi?n.add(t):t instanceof cs&&t.apply(new Kh(n)),n}};var Lo=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var e=arguments[0];this._lines=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};Lo.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof Vc){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof vi&&this._lines.add(e)};Lo.prototype.setForceToLineString=function(e){this._isForcedToLineString=e};Lo.prototype.interfaces_=function(){return[Jh]};Lo.prototype.getClass=function(){return Lo};Lo.getGeometry=function(){if(arguments.length===1){var e=arguments[0];return e.getFactory().buildGeometry(Lo.getLines(e))}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(Lo.getLines(t,n))}};Lo.getLines=function(){if(arguments.length===1){var e=arguments[0];return Lo.getLines(e,!1)}else if(arguments.length===2){if(Sn(arguments[0],qi)&&Sn(arguments[1],qi)){for(var t=arguments[0],n=arguments[1],r=t.iterator();r.hasNext();){var i=r.next();Lo.getLines(i,n)}return n}else if(arguments[0]instanceof bn&&typeof arguments[1]=="boolean"){var o=arguments[0],u=arguments[1],l=new Vt;return o.apply(new Lo(l,u)),l}else if(arguments[0]instanceof bn&&Sn(arguments[1],qi)){var p=arguments[0],g=arguments[1];return p instanceof vi?g.add(p):p.apply(new Lo(g)),g}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&Sn(arguments[0],qi)&&Sn(arguments[1],qi)){for(var x=arguments[0],y=arguments[1],_=arguments[2],T=x.iterator();T.hasNext();){var P=T.next();Lo.getLines(P,y,_)}return y}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof bn&&Sn(arguments[1],qi)){var A=arguments[0],M=arguments[1],k=arguments[2];return A.apply(new Lo(M,k)),M}}};var Yl=function(){if(this._boundaryRule=fl.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];if(e===null)throw new ri("Rule must be non-null");this._boundaryRule=e}};Yl.prototype.locateInternal=function(){var e=this;if(arguments[0]instanceof nt&&arguments[1]instanceof Xi){var t=arguments[0],n=arguments[1];if(n.isEmpty())return st.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(t,r);if(i===st.EXTERIOR)return st.EXTERIOR;if(i===st.BOUNDARY)return st.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var u=n.getInteriorRingN(o),l=e.locateInPolygonRing(t,u);if(l===st.INTERIOR)return st.EXTERIOR;if(l===st.BOUNDARY)return st.BOUNDARY}return st.INTERIOR}else if(arguments[0]instanceof nt&&arguments[1]instanceof vi){var p=arguments[0],g=arguments[1];if(!g.getEnvelopeInternal().intersects(p))return st.EXTERIOR;var x=g.getCoordinates();return!g.isClosed()&&(p.equals(x[0])||p.equals(x[x.length-1]))?st.BOUNDARY:Yt.isOnLine(p,x)?st.INTERIOR:st.EXTERIOR}else if(arguments[0]instanceof nt&&arguments[1]instanceof sa){var y=arguments[0],_=arguments[1],T=_.getCoordinate();return T.equals2D(y)?st.INTERIOR:st.EXTERIOR}};Yl.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?Yt.locatePointInRing(e,t.getCoordinates()):st.EXTERIOR};Yl.prototype.intersects=function(e,t){return this.locate(e,t)!==st.EXTERIOR};Yl.prototype.updateLocationInfo=function(e){e===st.INTERIOR&&(this._isIn=!0),e===st.BOUNDARY&&this._numBoundaries++};Yl.prototype.computeLocation=function(e,t){var n=this;if(t instanceof sa&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof vi)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Xi)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Vp)for(var r=t,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(e,o))}else if(t instanceof zc)for(var u=t,l=0;l<u.getNumGeometries();l++){var p=u.getGeometryN(l);n.updateLocationInfo(n.locateInternal(e,p))}else if(t instanceof cs)for(var g=new Fc(t);g.hasNext();){var x=g.next();x!==t&&n.computeLocation(e,x)}};Yl.prototype.locate=function(e,t){return t.isEmpty()?st.EXTERIOR:t instanceof vi?this.locateInternal(e,t):t instanceof Xi?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?st.BOUNDARY:this._numBoundaries>0||this._isIn?st.INTERIOR:st.EXTERIOR)};Yl.prototype.interfaces_=function(){return[]};Yl.prototype.getClass=function(){return Yl};var ss=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],n=arguments[1];e.call(this,t,e.INSIDE_AREA,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},N$={INSIDE_AREA:{configurable:!0}};ss.prototype.isInsideArea=function(){return this._segIndex===ss.INSIDE_AREA};ss.prototype.getCoordinate=function(){return this._pt};ss.prototype.getGeometryComponent=function(){return this._component};ss.prototype.getSegmentIndex=function(){return this._segIndex};ss.prototype.interfaces_=function(){return[]};ss.prototype.getClass=function(){return ss};N$.INSIDE_AREA.get=function(){return-1};Object.defineProperties(ss,N$);var rd=function(e){this._pts=e||null};rd.prototype.filter=function(e){e instanceof sa&&this._pts.add(e)};rd.prototype.interfaces_=function(){return[Gu]};rd.prototype.getClass=function(){return rd};rd.getPoints=function(){if(arguments.length===1){var e=arguments[0];return e instanceof sa?Kl.singletonList(e):rd.getPoints(e,new Vt)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof sa?n.add(t):t instanceof cs&&t.apply(new rd(n)),n}};var Og=function(){this._locations=null;var e=arguments[0];this._locations=e};Og.prototype.filter=function(e){(e instanceof sa||e instanceof vi||e instanceof Xi)&&this._locations.add(new ss(e,0,e.getCoordinate()))};Og.prototype.interfaces_=function(){return[Gu]};Og.prototype.getClass=function(){return Og};Og.getLocations=function(e){var t=new Vt;return e.apply(new Og(t)),t};var No=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Yl,this._minDistanceLocation=null,this._minDistance=kn.MAX_VALUE,arguments.length===2){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};No.prototype.computeContainmentDistance=function(){var e=this;if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=1-n,o=Kh.getPolygons(this._geom[n]);if(o.size()>0){var u=Og.getLocations(this._geom[i]);if(this.computeContainmentDistance(u,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&Sn(arguments[0],Ul)&&Sn(arguments[1],Ul)){for(var l=arguments[0],p=arguments[1],g=arguments[2],x=0;x<l.size();x++)for(var y=l.get(x),_=0;_<p.size();_++)if(e.computeContainmentDistance(y,p.get(_),g),e._minDistance<=e._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof ss&&arguments[1]instanceof Xi){var T=arguments[0],P=arguments[1],A=arguments[2],M=T.getCoordinate();if(st.EXTERIOR!==this._ptLocator.locate(M,P))return this._minDistance=0,A[0]=T,A[1]=new ss(P,M),null}}};No.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),u=0;u<t.size();u++){var l=t.get(u);if(r.computeMinDistance(o,l,n),r._minDistance<=r._terminateDistance)return null}};No.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=Lo.getLines(this._geom[0]),n=Lo.getLines(this._geom[1]),r=rd.getPoints(this._geom[0]),i=rd.getPoints(this._geom[1]);if(this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance))return null;e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),this.updateMinDistance(e,!1)};No.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};No.prototype.updateMinDistance=function(e,t){if(e[0]===null)return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])};No.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e};No.prototype.computeMinDistance=function(){var e=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof vi&&arguments[1]instanceof sa){var t=arguments[0],n=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),o=n.getCoordinate(),u=0;u<i.length-1;u++){var l=Yt.distancePointLine(o,i[u],i[u+1]);if(l<e._minDistance){e._minDistance=l;var p=new pn(i[u],i[u+1]),g=p.closestPoint(o);r[0]=new ss(t,u,g),r[1]=new ss(n,0,o)}if(e._minDistance<=e._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof vi&&arguments[1]instanceof vi){var x=arguments[0],y=arguments[1],_=arguments[2];if(x.getEnvelopeInternal().distance(y.getEnvelopeInternal())>this._minDistance)return null;for(var T=x.getCoordinates(),P=y.getCoordinates(),A=0;A<T.length-1;A++)for(var M=0;M<P.length-1;M++){var k=Yt.distanceLineLine(T[A],T[A+1],P[M],P[M+1]);if(k<e._minDistance){e._minDistance=k;var R=new pn(T[A],T[A+1]),z=new pn(P[M],P[M+1]),D=R.closestPoints(z);_[0]=new ss(x,A,D[0]),_[1]=new ss(y,M,D[1])}if(e._minDistance<=e._terminateDistance)return null}}}};No.prototype.computeMinDistancePoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),u=0;u<t.size();u++){var l=t.get(u),p=o.getCoordinate().distance(l.getCoordinate());if(p<r._minDistance&&(r._minDistance=p,n[0]=new ss(o,0,o.getCoordinate()),n[1]=new ss(l,0,l.getCoordinate())),r._minDistance<=r._terminateDistance)return null}};No.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new ri("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};No.prototype.computeMinDistanceLines=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),u=0;u<t.size();u++){var l=t.get(u);if(r.computeMinDistance(o,l,n),r._minDistance<=r._terminateDistance)return null}};No.prototype.interfaces_=function(){return[]};No.prototype.getClass=function(){return No};No.distance=function(e,t){var n=new No(e,t);return n.distance()};No.isWithinDistance=function(e,t,n){var r=new No(e,t,n);return r.distance()<=n};No.nearestPoints=function(e,t){var n=new No(e,t);return n.nearestPoints()};var Uo=function(){this._pt=[new nt,new nt],this._distance=kn.NaN,this._isNull=!0};Uo.prototype.getCoordinates=function(){return this._pt};Uo.prototype.getCoordinate=function(e){return this._pt[e]};Uo.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};Uo.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};Uo.prototype.toString=function(){return Hl.toLineString(this._pt[0],this._pt[1])};Uo.prototype.getDistance=function(){return this._distance};Uo.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};Uo.prototype.interfaces_=function(){return[]};Uo.prototype.getClass=function(){return Uo};var Ru=function(){};Ru.prototype.interfaces_=function(){return[]};Ru.prototype.getClass=function(){return Ru};Ru.computeDistance=function(){if(arguments[2]instanceof Uo&&arguments[0]instanceof vi&&arguments[1]instanceof nt)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=new pn,i=e.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var u=r.closestPoint(t);n.setMinimum(u,t)}else if(arguments[2]instanceof Uo&&arguments[0]instanceof Xi&&arguments[1]instanceof nt){var l=arguments[0],p=arguments[1],g=arguments[2];Ru.computeDistance(l.getExteriorRing(),p,g);for(var x=0;x<l.getNumInteriorRing();x++)Ru.computeDistance(l.getInteriorRingN(x),p,g)}else if(arguments[2]instanceof Uo&&arguments[0]instanceof bn&&arguments[1]instanceof nt){var y=arguments[0],_=arguments[1],T=arguments[2];if(y instanceof vi)Ru.computeDistance(y,_,T);else if(y instanceof Xi)Ru.computeDistance(y,_,T);else if(y instanceof cs)for(var P=y,A=0;A<P.getNumGeometries();A++){var M=P.getGeometryN(A);Ru.computeDistance(M,_,T)}else T.setMinimum(y.getCoordinate(),_)}else if(arguments[2]instanceof Uo&&arguments[0]instanceof pn&&arguments[1]instanceof nt){var k=arguments[0],R=arguments[1],z=arguments[2],D=k.closestPoint(R);z.setMinimum(D,R)}};var cl=function(){this._g0=null,this._g1=null,this._ptDist=new Uo,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},dO={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};cl.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};cl.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new ri("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e};cl.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)};cl.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};cl.prototype.computeOrientedDistance=function(e,t,n){var r=new kg(t);if(e.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new _d(t,this._densifyFrac);e.apply(i),n.setMaximum(i.getMaxPointDistance())}};cl.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};cl.prototype.interfaces_=function(){return[]};cl.prototype.getClass=function(){return cl};cl.distance=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new cl(e,t);return n.distance()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],u=new cl(r,i);return u.setDensifyFraction(o),u.distance()}};dO.MaxPointDistanceFilter.get=function(){return kg};dO.MaxDensifiedByFractionDistanceFilter.get=function(){return _d};Object.defineProperties(cl,dO);var kg=function(){this._maxPtDist=new Uo,this._minPtDist=new Uo,this._euclideanDist=new Ru,this._geom=null;var e=arguments[0];this._geom=e};kg.prototype.filter=function(e){this._minPtDist.initialize(),Ru.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};kg.prototype.getMaxPointDistance=function(){return this._maxPtDist};kg.prototype.interfaces_=function(){return[Uc]};kg.prototype.getClass=function(){return kg};var _d=function(){this._maxPtDist=new Uo,this._minPtDist=new Uo,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};_d.prototype.filter=function(e,t){var n=this;if(t===0)return null;for(var r=e.getCoordinate(t-1),i=e.getCoordinate(t),o=(i.x-r.x)/this._numSubSegs,u=(i.y-r.y)/this._numSubSegs,l=0;l<this._numSubSegs;l++){var p=r.x+l*o,g=r.y+l*u,x=new nt(p,g);n._minPtDist.initialize(),Ru.computeDistance(n._geom,x,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};_d.prototype.isDone=function(){return!1};_d.prototype.isGeometryChanged=function(){return!1};_d.prototype.getMaxPointDistance=function(){return this._maxPtDist};_d.prototype.interfaces_=function(){return[Zl]};_d.prototype.getClass=function(){return _d};var ra=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},pO={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};ra.prototype.checkMaximumDistance=function(e,t,n){var r=new cl(t,e);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Hl.toLineString(i[0],i[1])+")"}};ra.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=ra.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),ra.VERBOSE&&Mo.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};ra.prototype.checkNegativeValid=function(){if(!(this._input instanceof Xi||this._input instanceof zc||this._input instanceof cs))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)};ra.prototype.getErrorIndicator=function(){return this._errorIndicator};ra.prototype.checkMinimumDistance=function(e,t,n){var r=new No(e,t,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Hl.toLineString(i[0],i[1])+" )"}};ra.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)};ra.prototype.getErrorLocation=function(){return this._errorLocation};ra.prototype.getPolygonLines=function(e){for(var t=new Vt,n=new Lo(t),r=Kh.getPolygons(e),i=r.iterator();i.hasNext();){var o=i.next();o.apply(n)}return e.getFactory().buildGeometry(t)};ra.prototype.getErrorMessage=function(){return this._errMsg};ra.prototype.interfaces_=function(){return[]};ra.prototype.getClass=function(){return ra};pO.VERBOSE.get=function(){return!1};pO.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(ra,pO);var Do=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},mO={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Do.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};Do.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*Do.MAX_ENV_DIFF_FRAC;e===0&&(e=.001);var t=new dn(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new dn(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};Do.prototype.checkDistance=function(){var e=new ra(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")};Do.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};Do.prototype.checkPolygonal=function(){this._result instanceof Xi||this._result instanceof zc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};Do.prototype.getErrorIndicator=function(){return this._errorIndicator};Do.prototype.getErrorLocation=function(){return this._errorLocation};Do.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};Do.prototype.report=function(e){if(!Do.VERBOSE)return null;Mo.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))};Do.prototype.getErrorMessage=function(){return this._errorMsg};Do.prototype.interfaces_=function(){return[]};Do.prototype.getClass=function(){return Do};Do.isValidMsg=function(e,t,n){var r=new Do(e,t,n);return r.isValid()?null:r.getErrorMessage()};Do.isValid=function(e,t,n){var r=new Do(e,t,n);return!!r.isValid()};mO.VERBOSE.get=function(){return!1};mO.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Do,mO);var Yu=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Yu.prototype.getCoordinates=function(){return this._pts};Yu.prototype.size=function(){return this._pts.length};Yu.prototype.getCoordinate=function(e){return this._pts[e]};Yu.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Yu.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:Ig.octant(this.getCoordinate(e),this.getCoordinate(e+1))};Yu.prototype.setData=function(e){this._data=e};Yu.prototype.getData=function(){return this._data};Yu.prototype.toString=function(){return Hl.toLineString(new Pi(this._pts))};Yu.prototype.interfaces_=function(){return[Gc]};Yu.prototype.getClass=function(){return Yu};var Eo=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Vt,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};Eo.prototype.getInteriorIntersection=function(){return this._interiorIntersection};Eo.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e};Eo.prototype.getIntersectionSegments=function(){return this._intSegments};Eo.prototype.count=function(){return this._intersectionCount};Eo.prototype.getIntersections=function(){return this._intersections};Eo.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};Eo.prototype.setKeepIntersections=function(e){this._keepIntersections=e};Eo.prototype.processIntersections=function(e,t,n,r){if(!this._findAllIntersections&&this.hasIntersection()||e===n&&t===r)return null;if(this._isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||this.isEndSegment(n,r);if(!i)return null}var o=e.getCoordinates()[t],u=e.getCoordinates()[t+1],l=n.getCoordinates()[r],p=n.getCoordinates()[r+1];this._li.computeIntersection(o,u,l,p),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=o,this._intSegments[1]=u,this._intSegments[2]=l,this._intSegments[3]=p,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};Eo.prototype.isEndSegment=function(e,t){return t===0||t>=e.size()-2};Eo.prototype.hasIntersection=function(){return this._interiorIntersection!==null};Eo.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};Eo.prototype.interfaces_=function(){return[Hp]};Eo.prototype.getClass=function(){return Eo};Eo.createAllIntersectionsFinder=function(e){var t=new Eo(e);return t.setFindAllIntersections(!0),t};Eo.createAnyIntersectionFinder=function(e){return new Eo(e)};Eo.createIntersectionCounter=function(e){var t=new Eo(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var Jl=function(){this._li=new lm,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};Jl.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};Jl.prototype.getIntersections=function(){return this._segInt.getIntersections()};Jl.prototype.isValid=function(){return this.execute(),this._isValid};Jl.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};Jl.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Eo(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new hO;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};Jl.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Qh(this.getErrorMessage(),this._segInt.getInteriorIntersection())};Jl.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Hl.toLineString(e[0],e[1])+" and "+Hl.toLineString(e[2],e[3])};Jl.prototype.interfaces_=function(){return[]};Jl.prototype.getClass=function(){return Jl};Jl.computeIntersections=function(e){var t=new Jl(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var Kp=function e(){this._nv=null;var t=arguments[0];this._nv=new Jl(e.toSegmentStrings(t))};Kp.prototype.checkValid=function(){this._nv.checkValid()};Kp.prototype.interfaces_=function(){return[]};Kp.prototype.getClass=function(){return Kp};Kp.toSegmentStrings=function(e){for(var t=new Vt,n=e.iterator();n.hasNext();){var r=n.next();t.add(new Yu(r.getCoordinates(),r))}return t};Kp.checkValid=function(e){var t=new Kp(e);t.checkValid()};var Rg=function(e){this._mapOp=e};Rg.prototype.map=function(e){for(var t=this,n=new Vt,r=0;r<e.getNumGeometries();r++){var i=t._mapOp.map(e.getGeometryN(r));i.isEmpty()||n.add(i)}return e.getFactory().createGeometryCollection(Kn.toGeometryArray(n))};Rg.prototype.interfaces_=function(){return[]};Rg.prototype.getClass=function(){return Rg};Rg.map=function(e,t){var n=new Rg(t);return n.map(e)};var Ju=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Vt,this._resultLineList=new Vt;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};Ju.prototype.collectLines=function(e){for(var t=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();t.collectLineEdge(r,e,t._lineEdgesList),t.collectBoundaryTouchEdge(r,e,t._lineEdgesList)}};Ju.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)};Ju.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList};Ju.prototype.collectLineEdge=function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&!e.isVisited()&&Mn.isResultOfOp(r,t)&&!i.isCovered()&&(n.add(i),e.setVisitedEdge(!0))};Ju.prototype.findCoveredLineEdges=function(){for(var e=this,t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();n.getEdges().findCoveredLineEdges()}for(var r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getEdge();if(i.isLineEdge()&&!o.isCoveredSet()){var u=e._op.isCoveredByA(i.getCoordinate());o.setCovered(u)}}};Ju.prototype.labelIsolatedLines=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();r.isIsolated()&&(i.isNull(0)?t.labelIsolatedLine(r,0):t.labelIsolatedLine(r,1))}};Ju.prototype.buildLines=function(e){for(var t=this,n=this._lineEdgesList.iterator();n.hasNext();){var r=n.next(),i=t._geometryFactory.createLineString(r.getCoordinates());t._resultLineList.add(i),r.setInResult(!0)}};Ju.prototype.collectBoundaryTouchEdge=function(e,t,n){var r=e.getLabel();if(e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult())return null;zn.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),Mn.isResultOfOp(r,t)&&t===Mn.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))};Ju.prototype.interfaces_=function(){return[]};Ju.prototype.getClass=function(){return Ju};var Mg=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Vt;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};Mg.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}};Mg.prototype.extractNonCoveredResultNodes=function(e){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isInResult()&&!r.isIncidentEdgeInResult()&&(r.getEdges().getDegree()===0||e===Mn.INTERSECTION)){var i=r.getLabel();Mn.isResultOfOp(i,e)&&t.filterCoveredNodeToPoint(r)}}};Mg.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList};Mg.prototype.interfaces_=function(){return[]};Mg.prototype.getClass=function(){return Mg};var Vs=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Vs.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))};Vs.prototype.transformPolygon=function(e,t){var n=this,r=!0,i=this.transformLinearRing(e.getExteriorRing(),e);(i===null||!(i instanceof Vc)||i.isEmpty())&&(r=!1);for(var o=new Vt,u=0;u<e.getNumInteriorRing();u++){var l=n.transformLinearRing(e.getInteriorRingN(u),e);l===null||l.isEmpty()||(l instanceof Vc||(r=!1),o.add(l))}if(r)return this._factory.createPolygon(i,o.toArray([]));var p=new Vt;return i!==null&&p.add(i),p.addAll(o),this._factory.buildGeometry(p)};Vs.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)};Vs.prototype.getInputGeometry=function(){return this._inputGeom};Vs.prototype.transformMultiLineString=function(e,t){for(var n=this,r=new Vt,i=0;i<e.getNumGeometries();i++){var o=n.transformLineString(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Vs.prototype.transformCoordinates=function(e,t){return this.copy(e)};Vs.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))};Vs.prototype.transformMultiPoint=function(e,t){for(var n=this,r=new Vt,i=0;i<e.getNumGeometries();i++){var o=n.transformPoint(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Vs.prototype.transformMultiPolygon=function(e,t){for(var n=this,r=new Vt,i=0;i<e.getNumGeometries();i++){var o=n.transformPolygon(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Vs.prototype.copy=function(e){return e.copy()};Vs.prototype.transformGeometryCollection=function(e,t){for(var n=this,r=new Vt,i=0;i<e.getNumGeometries();i++){var o=n.transform(e.getGeometryN(i));o!==null&&(n._pruneEmptyGeometry&&o.isEmpty()||r.add(o))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Kn.toGeometryArray(r)):this._factory.buildGeometry(r)};Vs.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof sa)return this.transformPoint(e,null);if(e instanceof F_)return this.transformMultiPoint(e,null);if(e instanceof Vc)return this.transformLinearRing(e,null);if(e instanceof vi)return this.transformLineString(e,null);if(e instanceof Vp)return this.transformMultiLineString(e,null);if(e instanceof Xi)return this.transformPolygon(e,null);if(e instanceof zc)return this.transformMultiPolygon(e,null);if(e instanceof cs)return this.transformGeometryCollection(e,null);throw new ri("Unknown Geometry subtype: "+e.getClass().getName())};Vs.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(n===null)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};Vs.prototype.interfaces_=function(){return[]};Vs.prototype.getClass=function(){return Vs};var Wc=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new pn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof vi&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];e.call(this,t.getCoordinates(),n)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=e.isClosed(r),this._snapTolerance=i}};Wc.prototype.snapVertices=function(e,t){for(var n=this,r=this._isClosed?e.size()-1:e.size(),i=0;i<r;i++){var o=e.get(i),u=n.findSnapForVertex(o,t);u!==null&&(e.set(i,new nt(u)),i===0&&n._isClosed&&e.set(e.size()-1,new nt(u)))}};Wc.prototype.findSnapForVertex=function(e,t){for(var n=this,r=0;r<t.length;r++){if(e.equals2D(t[r]))return null;if(e.distance(t[r])<n._snapTolerance)return t[r]}return null};Wc.prototype.snapTo=function(e){var t=new Cx(this._srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n};Wc.prototype.snapSegments=function(e,t){var n=this;if(t.length===0)return null;var r=t.length;t[0].equals2D(t[t.length-1])&&(r=t.length-1);for(var i=0;i<r;i++){var o=t[i],u=n.findSegmentIndexToSnap(o,e);u>=0&&e.add(u+1,new nt(o),!1)}};Wc.prototype.findSegmentIndexToSnap=function(e,t){for(var n=this,r=kn.MAX_VALUE,i=-1,o=0;o<t.size()-1;o++){if(n._seg.p0=t.get(o),n._seg.p1=t.get(o+1),n._seg.p0.equals2D(e)||n._seg.p1.equals2D(e)){if(n._allowSnappingToSourceVertices)continue;return-1}var u=n._seg.distance(e);u<n._snapTolerance&&u<r&&(r=u,i=o)}return i};Wc.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e};Wc.prototype.interfaces_=function(){return[]};Wc.prototype.getClass=function(){return Wc};Wc.isClosed=function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])};var Li=function(e){this._srcGeom=e||null},D$={SNAP_PRECISION_FACTOR:{configurable:!0}};Li.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e),r=new z$(t,n);return r.transform(this._srcGeom)};Li.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),r=new z$(e,n,!0),i=r.transform(this._srcGeom),o=i;return t&&Sn(o,fd)&&(o=i.buffer(0)),o};Li.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n};Li.prototype.extractTargetCoordinates=function(e){for(var t=new qu,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0).fill(null))};Li.prototype.computeMinimumSegmentLength=function(e){for(var t=kn.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);r<t&&(t=r)}return t};Li.prototype.interfaces_=function(){return[]};Li.prototype.getClass=function(){return Li};Li.snap=function(e,t,n){var r=new Array(2).fill(null),i=new Li(e);r[0]=i.snapTo(t,n);var o=new Li(t);return r[1]=o.snapTo(r[0],n),r};Li.computeOverlaySnapTolerance=function(){if(arguments.length===1){var e=arguments[0],t=Li.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===gr.FIXED){var r=1/n.getScale()*2/1.415;r>t&&(t=r)}return t}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return Math.min(Li.computeOverlaySnapTolerance(i),Li.computeOverlaySnapTolerance(o))}};Li.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),n=Math.min(t.getHeight(),t.getWidth()),r=n*Li.SNAP_PRECISION_FACTOR;return r};Li.snapToSelf=function(e,t,n){var r=new Li(e);return r.snapToSelf(t,n)};D$.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(Li,D$);var z$=function(e){function t(n,r,i){e.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(n,r){var i=new Wc(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(r)},t.prototype.transformCoordinates=function(n,r){var i=n.toCoordinateArray(),o=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Vs),rs=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};rs.prototype.getCommon=function(){return kn.longBitsToDouble(this._commonBits)};rs.prototype.add=function(e){var t=kn.doubleToLongBits(e);if(this._isFirst)return this._commonBits=t,this._commonSignExp=rs.signExpBits(this._commonBits),this._isFirst=!1,null;var n=rs.signExpBits(t);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=rs.numCommonMostSigMantissaBits(this._commonBits,t),this._commonBits=rs.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};rs.prototype.toString=function(){if(arguments.length===1){var e=arguments[0],t=kn.longBitsToDouble(e),n=kn.toBinaryString(e),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+t+" ]";return o}};rs.prototype.interfaces_=function(){return[]};rs.prototype.getClass=function(){return rs};rs.getBit=function(e,t){var n=1<<t;return e&n?1:0};rs.signExpBits=function(e){return e>>52};rs.zeroLowerBits=function(e,t){var n=(1<<t)-1,r=~n,i=e&r;return i};rs.numCommonMostSigMantissaBits=function(e,t){for(var n=0,r=52;r>=0;r--){if(rs.getBit(e,r)!==rs.getBit(t,r))return n;n++}return 52};var vd=function(){this._commonCoord=null,this._ccFilter=new Ng},gO={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};vd.prototype.addCommonBits=function(e){var t=new xd(this._commonCoord);e.apply(t),e.geometryChanged()};vd.prototype.removeCommonBits=function(e){if(this._commonCoord.x===0&&this._commonCoord.y===0)return e;var t=new nt(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new xd(t);return e.apply(n),e.geometryChanged(),e};vd.prototype.getCommonCoordinate=function(){return this._commonCoord};vd.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};vd.prototype.interfaces_=function(){return[]};vd.prototype.getClass=function(){return vd};gO.CommonCoordinateFilter.get=function(){return Ng};gO.Translater.get=function(){return xd};Object.defineProperties(vd,gO);var Ng=function(){this._commonBitsX=new rs,this._commonBitsY=new rs};Ng.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)};Ng.prototype.getCommonCoordinate=function(){return new nt(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};Ng.prototype.interfaces_=function(){return[Uc]};Ng.prototype.getClass=function(){return Ng};var xd=function(){this.trans=null;var e=arguments[0];this.trans=e};xd.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)};xd.prototype.isDone=function(){return!1};xd.prototype.isGeometryChanged=function(){return!0};xd.prototype.interfaces_=function(){return[Zl]};xd.prototype.getClass=function(){return xd};var So=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};So.prototype.selfSnap=function(e){var t=new Li(e),n=t.snapTo(e,this._snapTolerance);return n};So.prototype.removeCommonBits=function(e){this._cbr=new vd,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t};So.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e};So.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=Mn.overlayOp(t[0],t[1],e);return this.prepareResult(n)};So.prototype.checkValid=function(e){e.isValid()||Mo.out.println("Snapped geometry is invalid")};So.prototype.computeSnapTolerance=function(){this._snapTolerance=Li.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};So.prototype.snap=function(e){var t=this.removeCommonBits(e),n=Li.snap(t[0],t[1],this._snapTolerance);return n};So.prototype.interfaces_=function(){return[]};So.prototype.getClass=function(){return So};So.overlayOp=function(e,t,n){var r=new So(e,t);return r.getResultGeometry(n)};So.union=function(e,t){return So.overlayOp(e,t,Mn.UNION)};So.intersection=function(e,t){return So.overlayOp(e,t,Mn.INTERSECTION)};So.symDifference=function(e,t){return So.overlayOp(e,t,Mn.SYMDIFFERENCE)};So.difference=function(e,t){return So.overlayOp(e,t,Mn.DIFFERENCE)};var ds=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};ds.prototype.getResultGeometry=function(e){var t=null,n=!1,r=null;try{t=Mn.overlayOp(this._geom[0],this._geom[1],e);var i=!0;i&&(n=!0)}catch(o){if(o instanceof Yh)r=o;else throw o}finally{}if(!n)try{t=So.overlayOp(this._geom[0],this._geom[1],e)}catch(o){throw o instanceof Yh?r:o}finally{}return t};ds.prototype.interfaces_=function(){return[]};ds.prototype.getClass=function(){return ds};ds.overlayOp=function(e,t,n){var r=new ds(e,t);return r.getResultGeometry(n)};ds.union=function(e,t){return ds.overlayOp(e,t,Mn.UNION)};ds.intersection=function(e,t){return ds.overlayOp(e,t,Mn.INTERSECTION)};ds.symDifference=function(e,t){return ds.overlayOp(e,t,Mn.SYMDIFFERENCE)};ds.difference=function(e,t){return ds.overlayOp(e,t,Mn.DIFFERENCE)};var U1=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};U1.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)};U1.prototype.interfaces_=function(){return[]};U1.prototype.getClass=function(){return U1};var ua=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o}},yO={INSERT:{configurable:!0},DELETE:{configurable:!0}};ua.prototype.isDelete=function(){return this._eventType===ua.DELETE};ua.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e};ua.prototype.getObject=function(){return this._obj};ua.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};ua.prototype.getInsertEvent=function(){return this._insertEvent};ua.prototype.isInsert=function(){return this._eventType===ua.INSERT};ua.prototype.isSameLabel=function(e){return this._label===null?!1:this._label===e._label};ua.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};ua.prototype.interfaces_=function(){return[ml]};ua.prototype.getClass=function(){return ua};yO.INSERT.get=function(){return 1};yO.DELETE.get=function(){return 2};Object.defineProperties(ua,yO);var pE=function(){};pE.prototype.interfaces_=function(){return[]};pE.prototype.getClass=function(){return pE};var zo=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};zo.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(zo.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};zo.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};zo.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e};zo.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};zo.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(e.isIntersection(i))return!0}return!1};zo.prototype.hasProperIntersection=function(){return this._hasProper};zo.prototype.hasIntersection=function(){return this._hasIntersection};zo.prototype.isDone=function(){return this._isDone};zo.prototype.isBoundaryPoint=function(e,t){return t===null?!1:!!(this.isBoundaryPointInternal(e,t[0])||this.isBoundaryPointInternal(e,t[1]))};zo.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t};zo.prototype.addIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],u=n.getCoordinates()[r],l=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,u,l),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};zo.prototype.interfaces_=function(){return[]};zo.prototype.getClass=function(){return zo};zo.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var yle=function(e){function t(){e.call(this),this.events=new Vt,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var n=this;Kl.sort(this.events);for(var r=0;r<this.events.size();r++){var i=n.events.get(r);i.isDelete()&&i.getInsertEvent().setDeleteEventIndex(r)}},t.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var o=n.events.get(i);if(o.isInsert()&&n.processOverlaps(i,o.getDeleteEventIndex(),o,r),r.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof zo&&Sn(arguments[0],Ul)&&Sn(arguments[1],Ul)){var u=arguments[0],l=arguments[1],p=arguments[2];this.addEdges(u,u),this.addEdges(l,l),this.computeIntersections(p)}else if(typeof arguments[2]=="boolean"&&Sn(arguments[0],Ul)&&arguments[1]instanceof zo){var g=arguments[0],x=arguments[1],y=arguments[2];y?this.addEdges(g,null):this.addEdges(g),this.computeIntersections(x)}}},t.prototype.addEdge=function(n,r){for(var i=this,o=n.getMonotoneChainEdge(),u=o.getStartIndexes(),l=0;l<u.length-1;l++){var p=new U1(o,l),g=new ua(r,o.getMinX(l),p);i.events.add(g),i.events.add(new ua(o.getMaxX(l),g))}},t.prototype.processOverlaps=function(n,r,i,o){for(var u=this,l=i.getObject(),p=n;p<r;p++){var g=u.events.get(p);if(g.isInsert()){var x=g.getObject();i.isSameLabel(g)||(l.computeIntersections(x,o),u.nOverlaps++)}}},t.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var r=arguments[0],i=r.iterator();i.hasNext();){var o=i.next();n.addEdge(o,o)}else if(arguments.length===2)for(var u=arguments[0],l=arguments[1],p=u.iterator();p.hasNext();){var g=p.next();n.addEdge(g,l)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(pE),Kc=function(){this._min=kn.POSITIVE_INFINITY,this._max=kn.NEGATIVE_INFINITY},F$={NodeComparator:{configurable:!0}};Kc.prototype.getMin=function(){return this._min};Kc.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)};Kc.prototype.getMax=function(){return this._max};Kc.prototype.toString=function(){return Hl.toLineString(new nt(this._min,0),new nt(this._max,0))};Kc.prototype.interfaces_=function(){return[]};Kc.prototype.getClass=function(){return Kc};F$.NodeComparator.get=function(){return V1};Object.defineProperties(Kc,F$);var V1=function(){};V1.prototype.compare=function(e,t){var n=e,r=t,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0};V1.prototype.interfaces_=function(){return[O_]};V1.prototype.getClass=function(){return V1};var _le=function(e){function t(){e.call(this),this._item=null;var n=arguments[0],r=arguments[1],i=arguments[2];this._min=n,this._max=r,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;i.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Kc),vle=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var n=arguments[0],r=arguments[1];this._node1=n,this._node2=r,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(n,r){this._min=Math.min(n._min,r._min),this._max=Math.max(n._max,r._max)},t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;this._node1!==null&&this._node1.query(n,r,i),this._node2!==null&&this._node2.query(n,r,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Kc),Xc=function(){this._leaves=new Vt,this._root=null,this._level=0};Xc.prototype.buildTree=function(){var e=this;Kl.sort(this._leaves,new Kc.NodeComparator);for(var t=this._leaves,n=null,r=new Vt;;){if(e.buildLevel(t,r),r.size()===1)return r.get(0);n=t,t=r,r=n}};Xc.prototype.insert=function(e,t,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new _le(e,t,n))};Xc.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)};Xc.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};Xc.prototype.printNode=function(e){Mo.out.println(Hl.toLineString(new nt(e._min,this._level),new nt(e._max,this._level)))};Xc.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};Xc.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n),i=n+1<e.size()?e.get(n):null;if(i===null)t.add(r);else{var o=new vle(e.get(n),e.get(n+1));t.add(o)}}};Xc.prototype.interfaces_=function(){return[]};Xc.prototype.getClass=function(){return Xc};var q_=function(){this._items=new Vt};q_.prototype.visitItem=function(e){this._items.add(e)};q_.prototype.getItems=function(){return this._items};q_.prototype.interfaces_=function(){return[dd]};q_.prototype.getClass=function(){return q_};var G_=function(){this._index=null;var e=arguments[0];if(!Sn(e,fd))throw new ri("Argument must be Polygonal");this._index=new Xp(e)},_O={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};G_.prototype.locate=function(e){var t=new Bu(e),n=new H_(t);return this._index.query(e.y,e.y,n),t.getLocation()};G_.prototype.interfaces_=function(){return[U_]};G_.prototype.getClass=function(){return G_};_O.SegmentVisitor.get=function(){return H_};_O.IntervalIndexedGeometry.get=function(){return Xp};Object.defineProperties(G_,_O);var H_=function(){this._counter=null;var e=arguments[0];this._counter=e};H_.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};H_.prototype.interfaces_=function(){return[dd]};H_.prototype.getClass=function(){return H_};var Xp=function(){this._index=new Xc;var e=arguments[0];this.init(e)};Xp.prototype.init=function(e){for(var t=this,n=Lo.getLines(e),r=n.iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();t.addLine(o)}};Xp.prototype.addLine=function(e){for(var t=this,n=1;n<e.length;n++){var r=new pn(e[n-1],e[n]),i=Math.min(r.p0.y,r.p1.y),o=Math.max(r.p0.y,r.p1.y);t._index.insert(i,o,r)}};Xp.prototype.query=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new q_;return this._index.query(e,t,n),n.getItems()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}};Xp.prototype.interfaces_=function(){return[]};Xp.prototype.getClass=function(){return Xp};var p0=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new b$,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Yl,arguments.length===2){var n=arguments[0],r=arguments[1],i=fl.OGC_SFS_BOUNDARY_RULE;this._argIndex=n,this._parentGeom=r,this._boundaryNodeRule=i,r!==null&&this.add(r)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],l=arguments[2];this._argIndex=o,this._parentGeom=u,this._boundaryNodeRule=l,u!==null&&this.add(u)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(n,r){var i=this._nodes.addNode(r),o=i.getLabel(),u=1,l=st.NONE;l=o.getLocation(n,Rt.ON),l===st.BOUNDARY&&u++;var p=t.determineBoundary(this._boundaryNodeRule,u);o.setLocation(n,p)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.computeSelfNodes(n,r,!1)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2],l=new zo(i,!0,!1);l.setIsDoneIfProperInt(u);var p=this.createEdgeSetIntersector(),g=this._parentGeom instanceof Vc||this._parentGeom instanceof Xi||this._parentGeom instanceof zc,x=o||!g;return p.computeIntersections(this._edges,l,x),this.addSelfIntersectionNodes(this._argIndex),l}},t.prototype.computeSplitEdges=function(n){for(var r=this._edges.iterator();r.hasNext();){var i=r.next();i.eiList.addSplitEdges(n)}},t.prototype.computeEdgeIntersections=function(n,r,i){var o=new zo(r,i,!0);o.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var u=this.createEdgeSetIntersector();return u.computeIntersections(this._edges,n._edges,o),o},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof sa){var n=arguments[0],r=n.getCoordinate();this.insertPoint(this._argIndex,r,st.INTERIOR)}else if(arguments[0]instanceof nt){var i=arguments[0];this.insertPoint(this._argIndex,i,st.INTERIOR)}},t.prototype.addPolygon=function(n){var r=this;this.addPolygonRing(n.getExteriorRing(),st.EXTERIOR,st.INTERIOR);for(var i=0;i<n.getNumInteriorRing();i++){var o=n.getInteriorRingN(i);r.addPolygonRing(o,st.INTERIOR,st.EXTERIOR)}},t.prototype.addEdge=function(n){this.insertEdge(n);var r=n.getCoordinates();this.insertPoint(this._argIndex,r[0],st.BOUNDARY),this.insertPoint(this._argIndex,r[r.length-1],st.BOUNDARY)},t.prototype.addLineString=function(n){var r=Xn.removeRepeatedPoints(n.getCoordinates());if(r.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=new dE(r,new Sr(this._argIndex,st.INTERIOR));this._lineEdgeMap.put(n,i),this.insertEdge(i),zn.isTrue(r.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,r[0]),this.insertBoundaryPoint(this._argIndex,r[r.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),r=new Array(n.size()).fill(null),i=0,o=n.iterator();o.hasNext();){var u=o.next();r[i++]=u.getCoordinate().copy()}return r},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(n,r,i){if(this.isBoundaryNode(n,r))return null;i===st.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,r):this.insertPoint(n,r,i)},t.prototype.addPolygonRing=function(n,r,i){if(n.isEmpty())return null;var o=Xn.removeRepeatedPoints(n.getCoordinates());if(o.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=o[0],null;var u=r,l=i;Yt.isCCW(o)&&(u=i,l=r);var p=new dE(o,new Sr(this._argIndex,st.BOUNDARY,u,l));this._lineEdgeMap.put(n,p),this.insertEdge(p),this.insertPoint(this._argIndex,o[0],st.BOUNDARY)},t.prototype.insertPoint=function(n,r,i){var o=this._nodes.addNode(r),u=o.getLabel();u===null?o._label=new Sr(n,i):u.setLocation(n,i)},t.prototype.createEdgeSetIntersector=function(){return new yle},t.prototype.addSelfIntersectionNodes=function(n){for(var r=this,i=this._edges.iterator();i.hasNext();)for(var o=i.next(),u=o.getLabel().getLocation(n),l=o.eiList.iterator();l.hasNext();){var p=l.next();r.addSelfIntersectionNode(n,p.coord,u)}},t.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof zc&&(this._useBoundaryDeterminationRule=!1),n instanceof Xi)this.addPolygon(n);else if(n instanceof vi)this.addLineString(n);else if(n instanceof sa)this.addPoint(n);else if(n instanceof F_)this.addCollection(n);else if(n instanceof Vp)this.addCollection(n);else if(n instanceof zc)this.addCollection(n);else if(n instanceof cs)this.addCollection(n);else throw new Error(n.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(n){for(var r=this,i=0;i<n.getNumGeometries();i++){var o=n.getGeometryN(i);r.add(o)}},t.prototype.locate=function(n){return Sn(this._parentGeom,fd)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new G_(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(n,r){return n.isInBoundary(r)?st.BOUNDARY:st.INTERIOR},t}(ci),Z_=function(){if(this._li=new lm,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new p0(0,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=fl.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new p0(0,t,r),this._arg[1]=new p0(1,n,r)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new p0(0,i,u),this._arg[1]=new p0(1,o,u)}};Z_.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()};Z_.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)};Z_.prototype.interfaces_=function(){return[]};Z_.prototype.getClass=function(){return Z_};var Mp=function(){};Mp.prototype.interfaces_=function(){return[]};Mp.prototype.getClass=function(){return Mp};Mp.map=function(){if(arguments[0]instanceof bn&&Sn(arguments[1],Mp.MapOp)){for(var e=arguments[0],t=arguments[1],n=new Vt,r=0;r<e.getNumGeometries();r++){var i=t.map(e.getGeometryN(r));i!==null&&n.add(i)}return e.getFactory().buildGeometry(n)}else if(Sn(arguments[0],qi)&&Sn(arguments[1],Mp.MapOp)){for(var o=arguments[0],u=arguments[1],l=new Vt,p=o.iterator();p.hasNext();){var g=p.next(),x=u.map(g);x!==null&&l.add(x)}return l}};Mp.MapOp=function(){};var Mn=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r),this._ptLocator=new Yl,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xl,this._resultPolyList=new Vt,this._resultLineList=new Vt,this._resultPointList=new Vt,this._graph=new ci(new L$),this._geomFact=n.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(n){var r=this._edgeList.findEqualEdge(n);if(r!==null){var i=r.getLabel(),o=n.getLabel();r.isPointwiseEqual(n)||(o=new Sr(n.getLabel()),o.flip());var u=r.getDepth();u.isNull()&&u.add(i),u.add(o),i.merge(o)}else this._edgeList.add(n)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getSym();r.isInResult()&&i.isInResult()&&(r.setInResult(!1),i.setInResult(!1))}},t.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},t.prototype.computeGeometry=function(n,r,i,o){var u=new Vt;return u.addAll(n),u.addAll(r),u.addAll(i),u.isEmpty()?t.createEmptyResult(o,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(u)},t.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next();r.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(n,r){for(var i=this,o=r.iterator();o.hasNext();){var u=o.next(),l=i._ptLocator.locate(n,u);if(l!==st.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var n=new Vt,r=this._edgeList.iterator();r.hasNext();){var i=r.next();i.isCollapsed()&&(r.remove(),n.add(i.getCollapsedEdge()))}this._edgeList.addAll(n)},t.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next(),i=r.getEdges().getLabel();r.getLabel().merge(i)}},t.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},t.prototype.insertUniqueEdges=function(n){for(var r=this,i=n.iterator();i.hasNext();){var o=i.next();r.insertUniqueEdge(o)}},t.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var r=new Vt;this._arg[0].computeSplitEdges(r),this._arg[1].computeSplitEdges(r),this.insertUniqueEdges(r),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Kp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var i=new aa(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var o=new Ju(this,this._geomFact,this._ptLocator);this._resultLineList=o.build(n);var u=new Mg(this,this._geomFact,this._ptLocator);this._resultPointList=u.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},t.prototype.labelIncompleteNode=function(n,r){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[r].getGeometry());n.getLabel().setLocation(r,i)},t.prototype.copyPoints=function(n){for(var r=this,i=this._arg[n].getNodeIterator();i.hasNext();){var o=i.next(),u=r._graph.addNode(o.getCoordinate());u.setLabel(n,o.getLabel().getLocation(n))}},t.prototype.findResultAreaEdges=function(n){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.isArea()&&!i.isInteriorAreaEdge()&&t.isResultOfOp(o.getLocation(0,Rt.RIGHT),o.getLocation(1,Rt.RIGHT),n)&&i.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var r=n.next(),i=r.getLabel(),o=r.getDepth();if(!o.isNull()){o.normalize();for(var u=0;u<2;u++)!i.isNull(u)&&i.isArea()&&!o.isNull(u)&&(o.getDelta(u)===0?i.toLine(u):(zn.isTrue(!o.isNull(u,Rt.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(u,Rt.LEFT,o.getLocation(u,Rt.LEFT)),zn.isTrue(!o.isNull(u,Rt.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(u,Rt.RIGHT,o.getLocation(u,Rt.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next();i.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?n.labelIncompleteNode(i,0):n.labelIncompleteNode(i,1)),i.getEdges().updateLabelling(o)}},t.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Z_);Mn.overlayOp=function(e,t,n){var r=new Mn(e,t),i=r.getResultGeometry(n);return i};Mn.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return Mn.createEmptyResult(Mn.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return Rg.map(e,{interfaces_:function(){return[Mp.MapOp]},map:function(r){return r.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ds.overlayOp(e,t,Mn.INTERSECTION)};Mn.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Mn.createEmptyResult(Mn.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ds.overlayOp(e,t,Mn.SYMDIFFERENCE)};Mn.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case Mn.INTERSECTION:o=Math.min(r,i);break;case Mn.UNION:o=Math.max(r,i);break;case Mn.DIFFERENCE:o=r;break;case Mn.SYMDIFFERENCE:o=Math.max(r,i);break}return o};Mn.createEmptyResult=function(e,t,n,r){var i=null;switch(Mn.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon();break}return i};Mn.difference=function(e,t){return e.isEmpty()?Mn.createEmptyResult(Mn.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ds.overlayOp(e,t,Mn.DIFFERENCE))};Mn.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return Mn.isResultOfOp(n,r,t)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];switch(i===st.BOUNDARY&&(i=st.INTERIOR),o===st.BOUNDARY&&(o=st.INTERIOR),u){case Mn.INTERSECTION:return i===st.INTERIOR&&o===st.INTERIOR;case Mn.UNION:return i===st.INTERIOR||o===st.INTERIOR;case Mn.DIFFERENCE:return i===st.INTERIOR&&o!==st.INTERIOR;case Mn.SYMDIFFERENCE:return i===st.INTERIOR&&o!==st.INTERIOR||i!==st.INTERIOR&&o===st.INTERIOR}return!1}};Mn.INTERSECTION=1;Mn.UNION=2;Mn.DIFFERENCE=3;Mn.SYMDIFFERENCE=4;var id=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Yl,this._seg=new pn;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};id.prototype.isWithinToleranceOfBoundary=function(e){for(var t=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=t._linework.getGeometryN(n),i=r.getCoordinateSequence(),o=0;o<i.size()-1;o++){i.getCoordinate(o,t._seg.p0),i.getCoordinate(o+1,t._seg.p1);var u=t._seg.distance(e);if(u<=t._boundaryDistanceTolerance)return!0}return!1};id.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?st.BOUNDARY:this._ptLocator.locate(e,this._g)};id.prototype.extractLinework=function(e){var t=new W_;e.apply(t);var n=t.getLinework(),r=Kn.toLineStringArray(n);return e.getFactory().createMultiLineString(r)};id.prototype.interfaces_=function(){return[]};id.prototype.getClass=function(){return id};var W_=function(){this._linework=null,this._linework=new Vt};W_.prototype.getLinework=function(){return this._linework};W_.prototype.filter=function(e){var t=this;if(e instanceof Xi){var n=e;this._linework.add(n.getExteriorRing());for(var r=0;r<n.getNumInteriorRing();r++)t._linework.add(n.getInteriorRingN(r))}};W_.prototype.interfaces_=function(){return[Gu]};W_.prototype.getClass=function(){return W_};var Yp=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Yp.prototype.extractPoints=function(e,t,n){for(var r=this,i=e.getCoordinates(),o=0;o<i.length-1;o++)r.computeOffsetPoints(i[o],i[o+1],t,n)};Yp.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t};Yp.prototype.getPoints=function(e){for(var t=this,n=new Vt,r=Lo.getLines(this._g),i=r.iterator();i.hasNext();){var o=i.next();t.extractPoints(o,e,n)}return n};Yp.prototype.computeOffsetPoints=function(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,u=Math.sqrt(i*i+o*o),l=n*i/u,p=n*o/u,g=(t.x+e.x)/2,x=(t.y+e.y)/2;if(this._doLeft){var y=new nt(g-p,x+l);r.add(y)}if(this._doRight){var _=new nt(g+p,x-l);r.add(_)}};Yp.prototype.interfaces_=function(){return[]};Yp.prototype.getClass=function(){return Yp};var za=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new Vt;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new id(this._geom[0],this._boundaryDistanceTolerance),new id(this._geom[1],this._boundaryDistanceTolerance),new id(this._geom[2],this._boundaryDistanceTolerance)]},B$={TOLERANCE:{configurable:!0}};za.prototype.reportResult=function(e,t,n){Mo.out.println("Overlay result invalid - A:"+st.toLocationSymbol(t[0])+" B:"+st.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+st.toLocationSymbol(t[2]))};za.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t};za.prototype.checkValid=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=0;n<this._testCoords.size();n++){var r=e._testCoords.get(n);if(!e.checkValid(t,r))return e._invalidLocation=r,!1}return!0}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),za.hasLocation(this._location,st.BOUNDARY)?!0:this.isValidResult(i,this._location)}};za.prototype.addTestPts=function(e){var t=new Yp(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};za.prototype.isValidResult=function(e,t){var n=Mn.isResultOfOp(t[0],t[1],e),r=t[2]===st.INTERIOR,i=!(n^r);return i||this.reportResult(e,t,n),i};za.prototype.getInvalidLocation=function(){return this._invalidLocation};za.prototype.interfaces_=function(){return[]};za.prototype.getClass=function(){return za};za.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1};za.computeBoundaryDistanceTolerance=function(e,t){return Math.min(Li.computeSizeBasedSnapTolerance(e),Li.computeSizeBasedSnapTolerance(t))};za.isValid=function(e,t,n,r){var i=new za(e,t,r);return i.isValid(n)};B$.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(za,B$);var Pa=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Pa.prototype.extractElements=function(e,t){var n=this;if(e===null)return null;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);n._skipEmpty&&i.isEmpty()||t.add(i)}};Pa.prototype.combine=function(){for(var e=this,t=new Vt,n=this._inputGeoms.iterator();n.hasNext();){var r=n.next();e.extractElements(r,t)}return t.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)};Pa.prototype.interfaces_=function(){return[]};Pa.prototype.getClass=function(){return Pa};Pa.combine=function(){if(arguments.length===1){var e=arguments[0],t=new Pa(e);return t.combine()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new Pa(Pa.createList(n,r));return i.combine()}else if(arguments.length===3){var o=arguments[0],u=arguments[1],l=arguments[2],p=new Pa(Pa.createList(o,u,l));return p.combine()}};Pa.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()};Pa.createList=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Vt;return n.add(e),n.add(t),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],u=new Vt;return u.add(r),u.add(i),u.add(o),u}};var zi=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,this._inputPolys===null&&(this._inputPolys=new Vt)},j$={STRTREE_NODE_CAPACITY:{configurable:!0}};zi.prototype.reduceToGeometries=function(e){for(var t=this,n=new Vt,r=e.iterator();r.hasNext();){var i=r.next(),o=null;Sn(i,Ul)?o=t.unionTree(i):i instanceof bn&&(o=i),n.add(o)}return n};zi.prototype.extractByEnvelope=function(e,t,n){for(var r=new Vt,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getEnvelopeInternal().intersects(e)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)};zi.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var i=Pa.combine(e,t);return i}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var o=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,o)};zi.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new T$(zi.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=e.itemsTree(),i=this.unionTree(r);return i};zi.prototype.binaryUnion=function(){if(arguments.length===1){var e=arguments[0];return this.binaryUnion(e,0,e.size())}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=zi.getGeometry(t,n);return this.unionSafe(i,null)}else{if(r-n===2)return this.unionSafe(zi.getGeometry(t,n),zi.getGeometry(t,n+1));var o=Math.trunc((r+n)/2),u=this.binaryUnion(t,n,o),l=this.binaryUnion(t,o,r);return this.unionSafe(u,l)}}};zi.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t===null?t=r.copy():t=t.union(r)}return t};zi.prototype.unionSafe=function(e,t){return e===null&&t===null?null:e===null?t.copy():t===null?e.copy():this.unionOptimized(e,t)};zi.prototype.unionActual=function(e,t){return zi.restrictToPolygons(e.union(t))};zi.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n};zi.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var r=new Vt,i=this.extractByEnvelope(n,e,r),o=this.extractByEnvelope(n,t,r),u=this.unionActual(i,o);r.add(u);var l=Pa.combine(r);return l};zi.prototype.bufferUnion=function(){if(arguments.length===1){var e=arguments[0],t=e.get(0).getFactory(),n=t.buildGeometry(e),r=n.buffer(0);return r}else if(arguments.length===2){var i=arguments[0],o=arguments[1],u=i.getFactory(),l=u.createGeometryCollection([i,o]),p=l.buffer(0);return p}};zi.prototype.interfaces_=function(){return[]};zi.prototype.getClass=function(){return zi};zi.restrictToPolygons=function(e){if(Sn(e,fd))return e;var t=Kh.getPolygons(e);return t.size()===1?t.get(0):e.getFactory().createMultiPolygon(Kn.toPolygonArray(t))};zi.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)};zi.union=function(e){var t=new zi(e);return t.union()};j$.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(zi,j$);var mE=function(){};mE.prototype.interfaces_=function(){return[]};mE.prototype.getClass=function(){return mE};mE.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Mn.createEmptyResult(Mn.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ds.overlayOp(e,t,Mn.UNION)};function um(){return new gE}function gE(){this.reset()}gE.prototype={constructor:gE,reset:function(){this.s=this.t=0},add:function(e){M3(Fb,e,this.t),M3(this,Fb.s,this.s),this.s?this.t+=Fb.t:this.s=Fb.t},valueOf:function(){return this.s}};var Fb=new gE;function M3(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var yi=1e-6,Mr=Math.PI,Hh=Mr/2,N3=Mr/4,nf=Mr*2,tp=180/Mr,Su=Mr/180,as=Math.abs,xle=Math.atan,K_=Math.atan2,Gi=Math.cos,Hi=Math.sin,dv=Math.sqrt;function $$(e){return e>1?0:e<-1?Mr:Math.acos(e)}function Dg(e){return e>1?Hh:e<-1?-Hh:Math.asin(e)}function L0(){}function yE(e,t){e&&z3.hasOwnProperty(e.type)&&z3[e.type](e,t)}var D3={Feature:function(e,t){yE(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)yE(n[r].geometry,t)}},z3={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){MP(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)MP(n[r],t,0)},Polygon:function(e,t){F3(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)F3(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)yE(n[r],t)}};function MP(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function F3(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)MP(e[n],t,1);t.polygonEnd()}function ble(e,t){e&&D3.hasOwnProperty(e.type)?D3[e.type](e,t):yE(e,t)}um();um();function NP(e){return[K_(e[1],e[0]),Dg(e[2])]}function X_(e){var t=e[0],n=e[1],r=Gi(n);return[r*Gi(t),r*Hi(t),Hi(n)]}function Bb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _E(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function tC(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function jb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function DP(e){var t=dv(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}um();function U$(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function zP(e,t){return[e>Mr?e-nf:e<-Mr?e+nf:e,t]}zP.invert=zP;function wle(e,t,n){return(e%=nf)?t||n?U$(j3(e),$3(t,n)):j3(e):t||n?$3(t,n):zP}function B3(e){return function(t,n){return t+=e,[t>Mr?t-nf:t<-Mr?t+nf:t,n]}}function j3(e){var t=B3(e);return t.invert=B3(-e),t}function $3(e,t){var n=Gi(e),r=Hi(e),i=Gi(t),o=Hi(t);function u(l,p){var g=Gi(p),x=Gi(l)*g,y=Hi(l)*g,_=Hi(p),T=_*n+x*r;return[K_(y*i-T*o,x*n-_*r),Dg(T*i+y*o)]}return u.invert=function(l,p){var g=Gi(p),x=Gi(l)*g,y=Hi(l)*g,_=Hi(p),T=_*i-y*o;return[K_(y*i+_*o,x*n+T*r),Dg(T*n-x*r)]},u}function Ele(e,t,n,r,i,o){if(n){var u=Gi(t),l=Hi(t),p=r*n;i==null?(i=t+r*nf,o=t-p/2):(i=U3(u,i),o=U3(u,o),(r>0?i<o:i>o)&&(i+=r*nf));for(var g,x=i;r>0?x>o:x<o;x-=p)g=NP([u,-l*Gi(x),-l*Hi(x)]),e.point(g[0],g[1])}}function U3(e,t){t=X_(t),t[0]-=e,DP(t);var n=$$(-t[1]);return((-t[2]<0?-n:n)+nf-yi)%nf}function V$(){var e=[],t;return{point:function(n,r){t.push([n,r])},lineStart:function(){e.push(t=[])},lineEnd:L0,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Sle(e,t,n,r,i,o){var u=e[0],l=e[1],p=t[0],g=t[1],x=0,y=1,_=p-u,T=g-l,P;if(P=n-u,!(!_&&P>0)){if(P/=_,_<0){if(P<x)return;P<y&&(y=P)}else if(_>0){if(P>y)return;P>x&&(x=P)}if(P=i-u,!(!_&&P<0)){if(P/=_,_<0){if(P>y)return;P>x&&(x=P)}else if(_>0){if(P<x)return;P<y&&(y=P)}if(P=r-l,!(!T&&P>0)){if(P/=T,T<0){if(P<x)return;P<y&&(y=P)}else if(T>0){if(P>y)return;P>x&&(x=P)}if(P=o-l,!(!T&&P<0)){if(P/=T,T<0){if(P>y)return;P>x&&(x=P)}else if(T>0){if(P<x)return;P<y&&(y=P)}return x>0&&(e[0]=u+x*_,e[1]=l+x*T),y<1&&(t[0]=u+y*_,t[1]=l+y*T),!0}}}}}function ww(e,t){return as(e[0]-t[0])<yi&&as(e[1]-t[1])<yi}function $b(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function q$(e,t,n,r,i){var o=[],u=[],l,p;if(e.forEach(function(P){if(!((A=P.length-1)<=0)){var A,M=P[0],k=P[A],R;if(ww(M,k)){for(i.lineStart(),l=0;l<A;++l)i.point((M=P[l])[0],M[1]);i.lineEnd();return}o.push(R=new $b(M,P,null,!0)),u.push(R.o=new $b(M,null,R,!1)),o.push(R=new $b(k,P,null,!1)),u.push(R.o=new $b(k,null,R,!0))}}),!!o.length){for(u.sort(t),V3(o),V3(u),l=0,p=u.length;l<p;++l)u[l].e=n=!n;for(var g=o[0],x,y;;){for(var _=g,T=!0;_.v;)if((_=_.n)===g)return;x=_.z,i.lineStart();do{if(_.v=_.o.v=!0,_.e){if(T)for(l=0,p=x.length;l<p;++l)i.point((y=x[l])[0],y[1]);else r(_.x,_.n.x,1,i);_=_.n}else{if(T)for(x=_.p.z,l=x.length-1;l>=0;--l)i.point((y=x[l])[0],y[1]);else r(_.x,_.p.x,-1,i);_=_.p}_=_.o,x=_.z,T=!T}while(!_.v);i.lineEnd()}}}function V3(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function G$(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Tle(e){return e.length===1&&(e=Cle(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function Cle(e){return function(t,n){return G$(e(t),n)}}Tle(G$);function H$(e){for(var t=e.length,n,r=-1,i=0,o,u;++r<t;)i+=e[r].length;for(o=new Array(i);--t>=0;)for(u=e[t],n=u.length;--n>=0;)o[--i]=u[n];return o}var A0=1e9,Ub=-A0;function Ile(e,t,n,r){function i(g,x){return e<=g&&g<=n&&t<=x&&x<=r}function o(g,x,y,_){var T=0,P=0;if(g==null||(T=u(g,y))!==(P=u(x,y))||p(g,x)<0^y>0)do _.point(T===0||T===3?e:n,T>1?r:t);while((T=(T+y+4)%4)!==P);else _.point(x[0],x[1])}function u(g,x){return as(g[0]-e)<yi?x>0?0:3:as(g[0]-n)<yi?x>0?2:1:as(g[1]-t)<yi?x>0?1:0:x>0?3:2}function l(g,x){return p(g.x,x.x)}function p(g,x){var y=u(g,1),_=u(x,1);return y!==_?y-_:y===0?x[1]-g[1]:y===1?g[0]-x[0]:y===2?g[1]-x[1]:x[0]-g[0]}return function(g){var x=g,y=V$(),_,T,P,A,M,k,R,z,D,U,V,G={point:H,lineStart:ee,lineEnd:ce,polygonStart:Y,polygonEnd:X};function H(we,Ne){i(we,Ne)&&x.point(we,Ne)}function J(){for(var we=0,Ne=0,Be=T.length;Ne<Be;++Ne)for(var De=T[Ne],Ae=1,ve=De.length,he=De[0],xe,Ee,Ge=he[0],$e=he[1];Ae<ve;++Ae)xe=Ge,Ee=$e,he=De[Ae],Ge=he[0],$e=he[1],Ee<=r?$e>r&&(Ge-xe)*(r-Ee)>($e-Ee)*(e-xe)&&++we:$e<=r&&(Ge-xe)*(r-Ee)<($e-Ee)*(e-xe)&&--we;return we}function Y(){x=y,_=[],T=[],V=!0}function X(){var we=J(),Ne=V&&we,Be=(_=H$(_)).length;(Ne||Be)&&(g.polygonStart(),Ne&&(g.lineStart(),o(null,null,1,g),g.lineEnd()),Be&&q$(_,l,we,o,g),g.polygonEnd()),x=g,_=T=P=null}function ee(){G.point=oe,T&&T.push(P=[]),U=!0,D=!1,R=z=NaN}function ce(){_&&(oe(A,M),k&&D&&y.rejoin(),_.push(y.result())),G.point=H,D&&x.lineEnd()}function oe(we,Ne){var Be=i(we,Ne);if(T&&P.push([we,Ne]),U)A=we,M=Ne,k=Be,U=!1,Be&&(x.lineStart(),x.point(we,Ne));else if(Be&&D)x.point(we,Ne);else{var De=[R=Math.max(Ub,Math.min(A0,R)),z=Math.max(Ub,Math.min(A0,z))],Ae=[we=Math.max(Ub,Math.min(A0,we)),Ne=Math.max(Ub,Math.min(A0,Ne))];Sle(De,Ae,e,t,n,r)?(D||(x.lineStart(),x.point(De[0],De[1])),x.point(Ae[0],Ae[1]),Be||x.lineEnd(),V=!1):Be&&(x.lineStart(),x.point(we,Ne),V=!1)}R=we,z=Ne,D=Be}return G}}var nC=um();function Ple(e,t){var n=t[0],r=t[1],i=[Hi(n),-Gi(n),0],o=0,u=0;nC.reset();for(var l=0,p=e.length;l<p;++l)if(x=(g=e[l]).length)for(var g,x,y=g[x-1],_=y[0],T=y[1]/2+N3,P=Hi(T),A=Gi(T),M=0;M<x;++M,_=R,P=D,A=U,y=k){var k=g[M],R=k[0],z=k[1]/2+N3,D=Hi(z),U=Gi(z),V=R-_,G=V>=0?1:-1,H=G*V,J=H>Mr,Y=P*D;if(nC.add(K_(Y*G*Hi(H),A*U+Y*Gi(H))),o+=J?V+G*nf:V,J^_>=n^R>=n){var X=_E(X_(y),X_(k));DP(X);var ee=_E(i,X);DP(ee);var ce=(J^V>=0?-1:1)*Dg(ee[2]);(r>ce||r===ce&&(X[0]||X[1]))&&(u+=J^V>=0?1:-1)}}return(o<-yi||o<yi&&nC<-yi)^u&1}um();function q3(e){return e}um();um();var Y_=1/0,vE=Y_,q1=-Y_,xE=q1,G3={point:Lle,lineStart:L0,lineEnd:L0,polygonStart:L0,polygonEnd:L0,result:function(){var e=[[Y_,vE],[q1,xE]];return q1=xE=-(vE=Y_=1/0),e}};function Lle(e,t){e<Y_&&(Y_=e),e>q1&&(q1=e),t<vE&&(vE=t),t>xE&&(xE=t)}um();function Z$(e,t,n,r){return function(i,o){var u=t(o),l=i.invert(r[0],r[1]),p=V$(),g=t(p),x=!1,y,_,T,P={point:A,lineStart:k,lineEnd:R,polygonStart:function(){P.point=z,P.lineStart=D,P.lineEnd=U,_=[],y=[]},polygonEnd:function(){P.point=A,P.lineStart=k,P.lineEnd=R,_=H$(_);var V=Ple(y,l);_.length?(x||(o.polygonStart(),x=!0),q$(_,Ole,V,n,o)):V&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),_=y=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function A(V,G){var H=i(V,G);e(V=H[0],G=H[1])&&o.point(V,G)}function M(V,G){var H=i(V,G);u.point(H[0],H[1])}function k(){P.point=M,u.lineStart()}function R(){P.point=A,u.lineEnd()}function z(V,G){T.push([V,G]);var H=i(V,G);g.point(H[0],H[1])}function D(){g.lineStart(),T=[]}function U(){z(T[0][0],T[0][1]),g.lineEnd();var V=g.clean(),G=p.result(),H,J=G.length,Y,X,ee;if(T.pop(),y.push(T),T=null,!!J){if(V&1){if(X=G[0],(Y=X.length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart(),H=0;H<Y;++H)o.point((ee=X[H])[0],ee[1]);o.lineEnd()}return}J>1&&V&2&&G.push(G.pop().concat(G.shift())),_.push(G.filter(Ale))}}return P}}function Ale(e){return e.length>1}function Ole(e,t){return((e=e.x)[0]<0?e[1]-Hh-yi:Hh-e[1])-((t=t.x)[0]<0?t[1]-Hh-yi:Hh-t[1])}const H3=Z$(function(){return!0},kle,Mle,[-Mr,-Hh]);function kle(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,u){var l=o>0?Mr:-Mr,p=as(o-t);as(p-Mr)<yi?(e.point(t,n=(n+u)/2>0?Hh:-Hh),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(o,n),i=0):r!==l&&p>=Mr&&(as(t-r)<yi&&(t-=r*yi),as(o-l)<yi&&(o-=l*yi),n=Rle(t,n,o,u),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),i=0),e.point(t=o,n=u),r=l},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Rle(e,t,n,r){var i,o,u=Hi(e-n);return as(u)>yi?xle((Hi(t)*(o=Gi(r))*Hi(n)-Hi(r)*(i=Gi(t))*Hi(e))/(i*o*u)):(t+r)/2}function Mle(e,t,n,r){var i;if(e==null)i=n*Hh,r.point(-Mr,i),r.point(0,i),r.point(Mr,i),r.point(Mr,0),r.point(Mr,-i),r.point(0,-i),r.point(-Mr,-i),r.point(-Mr,0),r.point(-Mr,i);else if(as(e[0]-t[0])>yi){var o=e[0]<t[0]?Mr:-Mr;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Nle(e,t){var n=Gi(e),r=n>0,i=as(n)>yi;function o(x,y,_,T){Ele(T,e,t,_,x,y)}function u(x,y){return Gi(x)*Gi(y)>n}function l(x){var y,_,T,P,A;return{lineStart:function(){P=T=!1,A=1},point:function(M,k){var R=[M,k],z,D=u(M,k),U=r?D?0:g(M,k):D?g(M+(M<0?Mr:-Mr),k):0;if(!y&&(P=T=D)&&x.lineStart(),D!==T&&(z=p(y,R),(!z||ww(y,z)||ww(R,z))&&(R[0]+=yi,R[1]+=yi,D=u(R[0],R[1]))),D!==T)A=0,D?(x.lineStart(),z=p(R,y),x.point(z[0],z[1])):(z=p(y,R),x.point(z[0],z[1]),x.lineEnd()),y=z;else if(i&&y&&r^D){var V;!(U&_)&&(V=p(R,y,!0))&&(A=0,r?(x.lineStart(),x.point(V[0][0],V[0][1]),x.point(V[1][0],V[1][1]),x.lineEnd()):(x.point(V[1][0],V[1][1]),x.lineEnd(),x.lineStart(),x.point(V[0][0],V[0][1])))}D&&(!y||!ww(y,R))&&x.point(R[0],R[1]),y=R,T=D,_=U},lineEnd:function(){T&&x.lineEnd(),y=null},clean:function(){return A|(P&&T)<<1}}}function p(x,y,_){var T=X_(x),P=X_(y),A=[1,0,0],M=_E(T,P),k=Bb(M,M),R=M[0],z=k-R*R;if(!z)return!_&&x;var D=n*k/z,U=-n*R/z,V=_E(A,M),G=jb(A,D),H=jb(M,U);tC(G,H);var J=V,Y=Bb(G,J),X=Bb(J,J),ee=Y*Y-X*(Bb(G,G)-1);if(!(ee<0)){var ce=dv(ee),oe=jb(J,(-Y-ce)/X);if(tC(oe,G),oe=NP(oe),!_)return oe;var we=x[0],Ne=y[0],Be=x[1],De=y[1],Ae;Ne<we&&(Ae=we,we=Ne,Ne=Ae);var ve=Ne-we,he=as(ve-Mr)<yi,xe=he||ve<yi;if(!he&&De<Be&&(Ae=Be,Be=De,De=Ae),xe?he?Be+De>0^oe[1]<(as(oe[0]-we)<yi?Be:De):Be<=oe[1]&&oe[1]<=De:ve>Mr^(we<=oe[0]&&oe[0]<=Ne)){var Ee=jb(J,(-Y+ce)/X);return tC(Ee,G),[oe,NP(Ee)]}}}function g(x,y){var _=r?e:Mr-e,T=0;return x<-_?T|=1:x>_&&(T|=2),y<-_?T|=4:y>_&&(T|=8),T}return Z$(u,l,o,r?[0,-e]:[-Mr,e-Mr])}function W$(e){return function(t){var n=new FP;for(var r in e)n[r]=e[r];return n.stream=t,n}}function FP(){}FP.prototype={constructor:FP,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function K$(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),ble(n,e.stream(G3));var u=G3.result(),l=Math.min(r/(u[1][0]-u[0][0]),i/(u[1][1]-u[0][1])),p=+t[0][0]+(r-l*(u[1][0]+u[0][0]))/2,g=+t[0][1]+(i-l*(u[1][1]+u[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(l*150).translate([p,g])}function Dle(e,t,n){return K$(e,[[0,0],t],n)}var Z3=16,zle=Gi(30*Su);function W3(e,t){return+t?Ble(e,t):Fle(e)}function Fle(e){return W$({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Ble(e,t){function n(r,i,o,u,l,p,g,x,y,_,T,P,A,M){var k=g-r,R=x-i,z=k*k+R*R;if(z>4*t&&A--){var D=u+_,U=l+T,V=p+P,G=dv(D*D+U*U+V*V),H=Dg(V/=G),J=as(as(V)-1)<yi||as(o-y)<yi?(o+y)/2:K_(U,D),Y=e(J,H),X=Y[0],ee=Y[1],ce=X-r,oe=ee-i,we=R*ce-k*oe;(we*we/z>t||as((k*ce+R*oe)/z-.5)>.3||u*_+l*T+p*P<zle)&&(n(r,i,o,u,l,p,X,ee,J,D/=G,U/=G,V,A,M),M.point(X,ee),n(X,ee,J,D,U,V,g,x,y,_,T,P,A,M))}}return function(r){var i,o,u,l,p,g,x,y,_,T,P,A,M={point:k,lineStart:R,lineEnd:D,polygonStart:function(){r.polygonStart(),M.lineStart=U},polygonEnd:function(){r.polygonEnd(),M.lineStart=R}};function k(H,J){H=e(H,J),r.point(H[0],H[1])}function R(){y=NaN,M.point=z,r.lineStart()}function z(H,J){var Y=X_([H,J]),X=e(H,J);n(y,_,x,T,P,A,y=X[0],_=X[1],x=H,T=Y[0],P=Y[1],A=Y[2],Z3,r),r.point(y,_)}function D(){M.point=k,r.lineEnd()}function U(){R(),M.point=V,M.lineEnd=G}function V(H,J){z(i=H,J),o=y,u=_,l=T,p=P,g=A,M.point=z}function G(){n(y,_,x,T,P,A,o,u,i,l,p,g,Z3,r),M.lineEnd=D,D()}return M}}var jle=W$({point:function(e,t){this.stream.point(e*Su,t*Su)}});function $le(e){return Ule(function(){return e})()}function Ule(e){var t,n=150,r=480,i=250,o,u,l=0,p=0,g=0,x=0,y=0,_,T,P=null,A=H3,M=null,k,R,z,D=q3,U=.5,V=W3(X,U),G,H;function J(oe){return oe=T(oe[0]*Su,oe[1]*Su),[oe[0]*n+o,u-oe[1]*n]}function Y(oe){return oe=T.invert((oe[0]-o)/n,(u-oe[1])/n),oe&&[oe[0]*tp,oe[1]*tp]}function X(oe,we){return oe=t(oe,we),[oe[0]*n+o,u-oe[1]*n]}J.stream=function(oe){return G&&H===oe?G:G=jle(A(_,V(D(H=oe))))},J.clipAngle=function(oe){return arguments.length?(A=+oe?Nle(P=oe*Su,6*Su):(P=null,H3),ce()):P*tp},J.clipExtent=function(oe){return arguments.length?(D=oe==null?(M=k=R=z=null,q3):Ile(M=+oe[0][0],k=+oe[0][1],R=+oe[1][0],z=+oe[1][1]),ce()):M==null?null:[[M,k],[R,z]]},J.scale=function(oe){return arguments.length?(n=+oe,ee()):n},J.translate=function(oe){return arguments.length?(r=+oe[0],i=+oe[1],ee()):[r,i]},J.center=function(oe){return arguments.length?(l=oe[0]%360*Su,p=oe[1]%360*Su,ee()):[l*tp,p*tp]},J.rotate=function(oe){return arguments.length?(g=oe[0]%360*Su,x=oe[1]%360*Su,y=oe.length>2?oe[2]%360*Su:0,ee()):[g*tp,x*tp,y*tp]},J.precision=function(oe){return arguments.length?(V=W3(X,U=oe*oe),ce()):dv(U)},J.fitExtent=function(oe,we){return K$(J,oe,we)},J.fitSize=function(oe,we){return Dle(J,oe,we)};function ee(){T=U$(_=wle(g,x,y),t);var oe=t(l,p);return o=r-oe[0]*n,u=i+oe[1]*n,ce()}function ce(){return G=H=null,J}return function(){return t=e.apply(this,arguments),J.invert=t.invert&&Y,ee()}}function X$(e){return function(t,n){var r=Gi(t),i=Gi(n),o=e(r*i);return[o*i*Hi(t),o*Hi(n)]}}function Y$(e){return function(t,n){var r=dv(t*t+n*n),i=e(r),o=Hi(i),u=Gi(i);return[K_(t*o,r*u),Dg(r&&n*o/r)]}}var Vle=X$(function(e){return dv(2/(1+e))});Vle.invert=Y$(function(e){return 2*Dg(e/2)});var J$=X$(function(e){return(e=$$(e))&&e/Hi(e)});J$.invert=Y$(function(e){return e});function qle(){return $le(J$).scale(79.4188).clipAngle(180-.001)}function K3(e,t){return[e,t]}K3.invert=K3;function Gle(e,t,n){n=n||{};var r=n.units||"kilometers",i=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return d$(e,function(u){var l=Ew(u,t,r,i);l&&o.push(l)}),OP(o);case"FeatureCollection":return L3(e,function(u){var l=Ew(u,t,r,i);l&&L3(l,function(p){p&&o.push(p)})}),OP(o)}return Ew(e,t,r,i)}function Ew(e,t,n,r){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var u=[];return d$(e,function(A){var M=Ew(A,t,n,r);M&&u.push(M)}),OP(u)}var l=Hle(o),p={type:o.type,coordinates:e8(o.coordinates,l)},g=new cO,x=g.read(p),y=Qae(ele(t,n),"meters"),_=Oo.bufferOp(x,y,r),T=new E$;if(_=T.write(_),!Q$(_.coordinates)){var P={type:_.type,coordinates:t8(_.coordinates,l)};return BS(P,i)}}function Q$(e){return Array.isArray(e[0])?Q$(e[0]):isNaN(e[0])}function e8(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return e8(n,t)})}function t8(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return t8(n,t)})}function Hle(e){var t=nle(e).geometry.coordinates,n=[-t[0],-t[1]];return qle().rotate(n).scale(wa)}function Zle(e,t){var n=cE(e),r=cE(t),i=e.properties||{},o=l$.difference(n.coordinates,r.coordinates);return o.length===0?null:o.length===1?c$(o[0],i):h$(o,i)}function X3(e){let t;for(const n of e)t&&n[0]-t[0]>=180?n[0]-=360:t&&n[0]-t[0]<-180&&(n[0]+=360),t=n}function Y3(e,t){const n=Zle({type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]},e);if(!n)return;n.properties={isMask:"y"};const r=Gle(e,0);if(r.geometry.type==="Polygon")for(const i of r.geometry.coordinates)X3(i);else for(const i of r.geometry.coordinates)for(const o of i)X3(o);t({type:"FeatureCollection",features:[r,n]})}let J3={type:"FeatureCollection",features:[]};function Wle(e,t,n=!0,r=!0,i={},o={},u={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}}){let l,p=[],g,x;function y(){(u!=null&&u.fill||u!=null&&u.line)&&e.addSource("full-geom",{type:"geojson",data:J3}),u!=null&&u.fill&&e.addLayer({...u==null?void 0:u.fill,id:"full-geom-fill",type:"fill",source:"full-geom"}),u!=null&&u.line&&e.addLayer({...u==null?void 0:u.line,id:"full-geom-line",type:"line",source:"full-geom"})}e.loaded()?y():e.once("load",()=>{y()});const _=P=>{l==null||l({type:"mapClick",coordinates:[P.lngLat.lng,P.lngLat.lat]})};function T(P=!1){if(!t)throw new Error;const A=document.createElement("div");return P&&A.classList.add("marker-interactive"),new oae({props:{displayIn:"maplibre"},target:A}),new t.Marker({element:A,offset:[1,-13]})}return{setEventHandler(P){P?(l=P,e.on("click",_)):(l=void 0,e.off("click",_))},flyTo(P,A){e.flyTo({center:P,zoom:A,...i})},fitBounds(P,A,M){e.fitBounds([[P[0],P[1]],[P[2],P[3]]],{padding:A,maxZoom:M,...o})},indicateReverse(P){e.getCanvasContainer().style.cursor=P?"crosshair":""},setReverseMarker(P){!t||!n||(x?P?x.setLngLat(P):(x.remove(),x=void 0):P&&(x=(typeof n=="object"?new t.Marker(n):T()).setLngLat(P).addTo(e),x.getElement().classList.add("marker-reverse")))},setMarkers(P,A){if(!n)return;function M(k){var R;(R=e.getSource("full-geom"))==null||R.setData(k)}for(const k of p)k.remove();if(p.length=0,M(J3),!!t){if(A){let k=!1;if(A.geometry.type==="GeometryCollection"){const R=A.geometry.geometries.filter(z=>z.type==="Polygon"||z.type==="MultiPolygon");if(R.length>0){let z=R.pop();for(const D of R)z=tle(z,D);Y3({...A,geometry:z},M),k=!0}else{const z=A.geometry.geometries.filter(D=>D.type==="LineString"||D.type==="MultiLineString");z.length>0&&(M({...A,geometry:{type:"GeometryCollection",geometries:z}}),k=!0)}}if(!k){if(A.geometry.type==="Polygon"||A.geometry.type==="MultiPolygon")Y3(A,M);else if(A.geometry.type==="LineString"||A.geometry.type==="MultiLineString"){M(A);return}}n&&p.push((typeof n=="object"?new t.Marker(n):T()).setLngLat(A.center).addTo(e))}if(r)for(const k of P??[]){if(k===A)continue;const R=(typeof r=="object"?new t.Marker(r):T(!0)).setLngLat(k.center).setPopup(new t.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(k.place_type[0]==="reverse"?k.place_name:k.place_name.replace(/,.*/,""))).addTo(e),z=R.getElement();z.addEventListener("click",D=>{D.stopPropagation(),l==null||l({type:"markerClick",id:k.id})}),z.addEventListener("mouseenter",()=>{l==null||l({type:"markerMouseEnter",id:k.id}),R.togglePopup()}),z.addEventListener("mouseleave",()=>{l==null||l({type:"markerMouseLeave",id:k.id}),R.togglePopup()}),p.push(R)}}},setSelectedMarker(P){g&&g.getElement().classList.toggle("marker-selected",!1),g=P>-1?p[P]:void 0,g==null||g.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const P=e.getCenter();return[e.getZoom(),P.lng,P.lat]}}}var bu,Ly;class Kle extends EventTarget{constructor(t={}){super(),QD(this,bu,void 0),QD(this,Ly,void 0),Y2(this,Ly,t)}onAddInt(t){const n=document.createElement("div");n.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl mapboxgl-ctrl-group";const{marker:r,showResultMarkers:i,flyTo:o,fullGeometryStyle:u,...l}=wc(this,Ly),p=typeof o=="boolean"?{}:o,g=this.getExtraProps(t,n),x={mapController:Wle(t,this.getMapLibreGl(),r,i,p,p,u),flyTo:o===void 0?!0:!!o,apiKey:"",...g,...l};if(!x.apiKey)throw new Error("no apiKey provided");Y2(this,bu,new Lae({target:n,props:x}));for(const y of["select","pick","featuresListed","featuresMarked","response","optionsVisibilityChange","reverseToggle","queryChange"])wc(this,bu).$on(y,_=>this.dispatchEvent(_));return n}setOptions(t){var n;Y2(this,Ly,t);const{marker:r,showResultMarkers:i,flyTo:o,fullGeometryStyle:u,...l}=wc(this,Ly);(n=wc(this,bu))==null||n.$set(l)}setQuery(t,n=!0){var r;(r=wc(this,bu))==null||r.setQuery(t,n)}clearMap(){var t;(t=wc(this,bu))==null||t.clearMap()}clearList(){var t;(t=wc(this,bu))==null||t.clearList()}setReverseMode(t){var n;(n=wc(this,bu))==null||n.$set({reverseActive:t})}focus(){var t;(t=wc(this,bu))==null||t.focus()}blur(){var t;(t=wc(this,bu))==null||t.blur()}onRemove(){var t;(t=wc(this,bu))==null||t.$destroy()}}bu=new WeakMap,Ly=new WeakMap;class Xle extends Kle{getMapLibreGl(){return vse}onAdd(t){return super.onAddInt(t)}getExtraProps(t,n){const r={};if(!("getSdkConfig"in t&&typeof t.getSdkConfig=="function"))throw new Error("MapTiler SDK not detected");const{primaryLanguage:i,apiKey:o}=t.getSdkConfig();r.apiKey=o;const u=/^([a-z]{2})($|_|-)/.exec(i);return u&&(r.language=u[1]),n.className+=" maptiler-ctrl",r}}function Yle(e,t){function n(i){const o=i.coords.longitude,u=i.coords.latitude;e([o,u]),t(!1)}function r(){e(null),An.error("You have denied the location access",{autoClose:2e3}),t(!1)}navigator.geolocation?navigator.geolocation.getCurrentPosition(n,r,{enableHighAccuracy:!0}):(e(null),An.error("Your browser doesn't support current location feature",{autoClose:2e3}),t(!1))}function Jle({handleDone:e,latLng:t}){const[n,r]=Ue.useState(),[i,o]=Ue.useState(null),[u,l]=Ue.useState(!0);return ns.apiKey="6ATpjqubAVOsSMm33WCc",Ue.useEffect(()=>{if(!i&&u)return Yle(o,l);const p=new WA({container:"map",style:RS.STREETS,center:i||[78.9629,20.5937],zoom:4}),g=new qj({draggable:!0}).setLngLat(i||[78.9629,20.5937]).addTo(p),x=new Xle({country:"IN",marker:!1,markerOnSelected:!1});x.addEventListener("pick",({detail:y})=>{g.setLngLat(y.center)}),p.addControl(x,"top-left"),r(g)},[u]),u?ae.jsx("div",{children:"Loading..."}):ae.jsx("div",{id:"map",className:"maptiler-map",children:ae.jsx("button",{className:"maptiler-done-button",onClick:()=>e(n),children:"Done"})})}function Qle({_id:e,users:t,messages:n,setChatId:r,lastMessage:i}){const o=XL(),u=nm(),l=Ue.useContext(lS),p=t[0],g=+n.length;function x(){l.emit("chat-connected",{chatId:e}),r(e),u.setQueryData(["chats"],y=>y.map(_=>(_==null?void 0:_._id)===e?{..._,messages:[]}:_)),o(NW(g))}return ae.jsxs("div",{className:"message-container",onClick:x,children:[ae.jsx("img",{src:p==null?void 0:p.avatar,alt:"avatar-image"}),ae.jsx("span",{children:p==null?void 0:p.username}),ae.jsx("p",{children:i}),g>0&&ae.jsx("span",{className:"notification-count",children:g})]})}function eue(){const[e,t]=CF({minPrice:0,maxPrice:0,address:"",type:"buy"}),n=tu(),r=Object.fromEntries(e.entries());function i(l){t({...r,type:l})}function o(l){t({...r,[l.target.name]:l.target.value})}function u(l){if(l.preventDefault(),r.minPrice>r.maxPrice)return An.error("Min price can't be greater than max price",{autoClose:2e3});n(`/list${OA(r)}`)}return ae.jsxs("div",{className:"form-container",children:[ae.jsx("div",{className:"upper-portion",children:fA.map((l,p)=>ae.jsx("button",{className:`${e.get("type")==l?"activeType":""}`,onClick:()=>i(l),children:l},p))}),ae.jsxs("form",{onSubmit:u,children:[ae.jsx("input",{type:"text",name:"address",placeholder:"Address",onChange:o}),ae.jsx("input",{type:"number",name:"minPrice",min:0,max:1e10,placeholder:"Min price",onChange:o}),ae.jsx("input",{type:"number",name:"maxPrice",min:0,max:1e10,placeholder:"Max price",onChange:o}),ae.jsx("button",{children:ae.jsx("img",{src:"/search.png"})})]})]})}function m0({optionValues:e,selectName:t,selectId:n,labelText:r,defaultOption:i,handleChange:o,handleBlur:u,className:l}){return ae.jsxs("div",{className:"default-styling "+l,children:[ae.jsx("label",{htmlFor:n,children:r}),ae.jsxs("select",{name:t,id:n,onChange:o,onBlur:u,children:[ae.jsx("option",{hidden:!0,children:i}),e.map((p,g)=>ae.jsx("option",{value:p,children:p},g))]})]})}function tue({images:e}){const[t,n]=Ue.useState(0),[r,i]=Ue.useState(!1),u=+e.length>=4?e:new Array(4).fill(0,0,4).map((g,x)=>e[x]||qB);function l(g,x){let y=t+g;y=y<0||y>=+u.length?x:y,n(y)}function p(g,x){i(g),n(x)}return ae.jsxs("div",{className:"slider-container",children:[ae.jsxs("div",{className:`${r?"slider-full":"slider-close"} `,children:[ae.jsx("div",{className:"left-arrow",children:ae.jsx("img",{src:"/arrow.png",alt:"left-arrow",onClick:()=>l(-1,+u.length-1)})}),ae.jsx("div",{className:"image-container",children:u.map((g,x)=>ae.jsx("img",{src:g,alt:"house-image",style:{display:x==t?"block":"none"}},x))}),ae.jsx("div",{className:"right-arrow",children:ae.jsx("img",{src:"/arrow.png",alt:"right-arrow",onClick:()=>l(1,0)})}),ae.jsx("button",{className:"close-button",onClick:()=>p(!1),children:"X"})]}),ae.jsx("div",{className:"slider-left-section",children:ae.jsx("img",{src:u[0],alt:"house-image",onClick:()=>p(!0,0)})}),ae.jsx("div",{className:"slider-right-section",children:u.slice(1).map((g,x)=>ae.jsx("img",{onClick:()=>p(!0,x+1),src:g,alt:"house-image"},x))})]})}function nue(){this.__data__=[],this.size=0}var rue=nue;function iue(e,t){return e===t||e!==e&&t!==t}var n8=iue,oue=n8;function sue(e,t){for(var n=e.length;n--;)if(oue(e[n][0],t))return n;return-1}var JS=sue,aue=JS,lue=Array.prototype,uue=lue.splice;function cue(e){var t=this.__data__,n=aue(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():uue.call(t,n,1),--this.size,!0}var hue=cue,fue=JS;function due(e){var t=this.__data__,n=fue(t,e);return n<0?void 0:t[n][1]}var pue=due,mue=JS;function gue(e){return mue(this.__data__,e)>-1}var yue=gue,_ue=JS;function vue(e,t){var n=this.__data__,r=_ue(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var xue=vue,bue=rue,wue=hue,Eue=pue,Sue=yue,Tue=xue;function pv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pv.prototype.clear=bue;pv.prototype.delete=wue;pv.prototype.get=Eue;pv.prototype.has=Sue;pv.prototype.set=Tue;var QS=pv,Cue=QS;function Iue(){this.__data__=new Cue,this.size=0}var Pue=Iue;function Lue(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Aue=Lue;function Oue(e){return this.__data__.get(e)}var kue=Oue;function Rue(e){return this.__data__.has(e)}var Mue=Rue,Nue=typeof Er=="object"&&Er&&Er.Object===Object&&Er,r8=Nue,Due=r8,zue=typeof self=="object"&&self&&self.Object===Object&&self,Fue=Due||zue||Function("return this")(),Cd=Fue,Bue=Cd,jue=Bue.Symbol,vO=jue,Q3=vO,i8=Object.prototype,$ue=i8.hasOwnProperty,Uue=i8.toString,g0=Q3?Q3.toStringTag:void 0;function Vue(e){var t=$ue.call(e,g0),n=e[g0];try{e[g0]=void 0;var r=!0}catch{}var i=Uue.call(e);return r&&(t?e[g0]=n:delete e[g0]),i}var que=Vue,Gue=Object.prototype,Hue=Gue.toString;function Zue(e){return Hue.call(e)}var Wue=Zue,e5=vO,Kue=que,Xue=Wue,Yue="[object Null]",Jue="[object Undefined]",t5=e5?e5.toStringTag:void 0;function Que(e){return e==null?e===void 0?Jue:Yue:t5&&t5 in Object(e)?Kue(e):Xue(e)}var eT=Que;function ece(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var o8=ece,tce=eT,nce=o8,rce="[object AsyncFunction]",ice="[object Function]",oce="[object GeneratorFunction]",sce="[object Proxy]";function ace(e){if(!nce(e))return!1;var t=tce(e);return t==ice||t==oce||t==rce||t==sce}var s8=ace,lce=Cd,uce=lce["__core-js_shared__"],cce=uce,rC=cce,n5=function(){var e=/[^.]+$/.exec(rC&&rC.keys&&rC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function hce(e){return!!n5&&n5 in e}var fce=hce,dce=Function.prototype,pce=dce.toString;function mce(e){if(e!=null){try{return pce.call(e)}catch{}try{return e+""}catch{}}return""}var a8=mce,gce=s8,yce=fce,_ce=o8,vce=a8,xce=/[\\^$.*+?()[\]{}|]/g,bce=/^\[object .+?Constructor\]$/,wce=Function.prototype,Ece=Object.prototype,Sce=wce.toString,Tce=Ece.hasOwnProperty,Cce=RegExp("^"+Sce.call(Tce).replace(xce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ice(e){if(!_ce(e)||yce(e))return!1;var t=gce(e)?Cce:bce;return t.test(vce(e))}var Pce=Ice;function Lce(e,t){return e==null?void 0:e[t]}var Ace=Lce,Oce=Pce,kce=Ace;function Rce(e,t){var n=kce(e,t);return Oce(n)?n:void 0}var mv=Rce,Mce=mv,Nce=Cd,Dce=Mce(Nce,"Map"),xO=Dce,zce=mv,Fce=zce(Object,"create"),tT=Fce,r5=tT;function Bce(){this.__data__=r5?r5(null):{},this.size=0}var jce=Bce;function $ce(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Uce=$ce,Vce=tT,qce="__lodash_hash_undefined__",Gce=Object.prototype,Hce=Gce.hasOwnProperty;function Zce(e){var t=this.__data__;if(Vce){var n=t[e];return n===qce?void 0:n}return Hce.call(t,e)?t[e]:void 0}var Wce=Zce,Kce=tT,Xce=Object.prototype,Yce=Xce.hasOwnProperty;function Jce(e){var t=this.__data__;return Kce?t[e]!==void 0:Yce.call(t,e)}var Qce=Jce,ehe=tT,the="__lodash_hash_undefined__";function nhe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ehe&&t===void 0?the:t,this}var rhe=nhe,ihe=jce,ohe=Uce,she=Wce,ahe=Qce,lhe=rhe;function gv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}gv.prototype.clear=ihe;gv.prototype.delete=ohe;gv.prototype.get=she;gv.prototype.has=ahe;gv.prototype.set=lhe;var uhe=gv,i5=uhe,che=QS,hhe=xO;function fhe(){this.size=0,this.__data__={hash:new i5,map:new(hhe||che),string:new i5}}var dhe=fhe;function phe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var mhe=phe,ghe=mhe;function yhe(e,t){var n=e.__data__;return ghe(t)?n[typeof t=="string"?"string":"hash"]:n.map}var nT=yhe,_he=nT;function vhe(e){var t=_he(this,e).delete(e);return this.size-=t?1:0,t}var xhe=vhe,bhe=nT;function whe(e){return bhe(this,e).get(e)}var Ehe=whe,She=nT;function The(e){return She(this,e).has(e)}var Che=The,Ihe=nT;function Phe(e,t){var n=Ihe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Lhe=Phe,Ahe=dhe,Ohe=xhe,khe=Ehe,Rhe=Che,Mhe=Lhe;function yv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}yv.prototype.clear=Ahe;yv.prototype.delete=Ohe;yv.prototype.get=khe;yv.prototype.has=Rhe;yv.prototype.set=Mhe;var l8=yv,Nhe=QS,Dhe=xO,zhe=l8,Fhe=200;function Bhe(e,t){var n=this.__data__;if(n instanceof Nhe){var r=n.__data__;if(!Dhe||r.length<Fhe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new zhe(r)}return n.set(e,t),this.size=n.size,this}var jhe=Bhe,$he=QS,Uhe=Pue,Vhe=Aue,qhe=kue,Ghe=Mue,Hhe=jhe;function _v(e){var t=this.__data__=new $he(e);this.size=t.size}_v.prototype.clear=Uhe;_v.prototype.delete=Vhe;_v.prototype.get=qhe;_v.prototype.has=Ghe;_v.prototype.set=Hhe;var Zhe=_v,Whe="__lodash_hash_undefined__";function Khe(e){return this.__data__.set(e,Whe),this}var Xhe=Khe;function Yhe(e){return this.__data__.has(e)}var Jhe=Yhe,Qhe=l8,efe=Xhe,tfe=Jhe;function bE(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Qhe;++t<n;)this.add(e[t])}bE.prototype.add=bE.prototype.push=efe;bE.prototype.has=tfe;var nfe=bE;function rfe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var ife=rfe;function ofe(e,t){return e.has(t)}var sfe=ofe,afe=nfe,lfe=ife,ufe=sfe,cfe=1,hfe=2;function ffe(e,t,n,r,i,o){var u=n&cfe,l=e.length,p=t.length;if(l!=p&&!(u&&p>l))return!1;var g=o.get(e),x=o.get(t);if(g&&x)return g==t&&x==e;var y=-1,_=!0,T=n&hfe?new afe:void 0;for(o.set(e,t),o.set(t,e);++y<l;){var P=e[y],A=t[y];if(r)var M=u?r(A,P,y,t,e,o):r(P,A,y,e,t,o);if(M!==void 0){if(M)continue;_=!1;break}if(T){if(!lfe(t,function(k,R){if(!ufe(T,R)&&(P===k||i(P,k,n,r,o)))return T.push(R)})){_=!1;break}}else if(!(P===A||i(P,A,n,r,o))){_=!1;break}}return o.delete(e),o.delete(t),_}var u8=ffe,dfe=Cd,pfe=dfe.Uint8Array,mfe=pfe;function gfe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var yfe=gfe;function _fe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var vfe=_fe,o5=vO,s5=mfe,xfe=n8,bfe=u8,wfe=yfe,Efe=vfe,Sfe=1,Tfe=2,Cfe="[object Boolean]",Ife="[object Date]",Pfe="[object Error]",Lfe="[object Map]",Afe="[object Number]",Ofe="[object RegExp]",kfe="[object Set]",Rfe="[object String]",Mfe="[object Symbol]",Nfe="[object ArrayBuffer]",Dfe="[object DataView]",a5=o5?o5.prototype:void 0,iC=a5?a5.valueOf:void 0;function zfe(e,t,n,r,i,o,u){switch(n){case Dfe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Nfe:return!(e.byteLength!=t.byteLength||!o(new s5(e),new s5(t)));case Cfe:case Ife:case Afe:return xfe(+e,+t);case Pfe:return e.name==t.name&&e.message==t.message;case Ofe:case Rfe:return e==t+"";case Lfe:var l=wfe;case kfe:var p=r&Sfe;if(l||(l=Efe),e.size!=t.size&&!p)return!1;var g=u.get(e);if(g)return g==t;r|=Tfe,u.set(e,t);var x=bfe(l(e),l(t),r,i,o,u);return u.delete(e),x;case Mfe:if(iC)return iC.call(e)==iC.call(t)}return!1}var Ffe=zfe;function Bfe(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var jfe=Bfe,$fe=Array.isArray,bO=$fe,Ufe=jfe,Vfe=bO;function qfe(e,t,n){var r=t(e);return Vfe(e)?r:Ufe(r,n(e))}var Gfe=qfe;function Hfe(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var u=e[n];t(u,n,e)&&(o[i++]=u)}return o}var Zfe=Hfe;function Wfe(){return[]}var Kfe=Wfe,Xfe=Zfe,Yfe=Kfe,Jfe=Object.prototype,Qfe=Jfe.propertyIsEnumerable,l5=Object.getOwnPropertySymbols,ede=l5?function(e){return e==null?[]:(e=Object(e),Xfe(l5(e),function(t){return Qfe.call(e,t)}))}:Yfe,tde=ede;function nde(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var rde=nde;function ide(e){return e!=null&&typeof e=="object"}var rT=ide,ode=eT,sde=rT,ade="[object Arguments]";function lde(e){return sde(e)&&ode(e)==ade}var ude=lde,u5=ude,cde=rT,c8=Object.prototype,hde=c8.hasOwnProperty,fde=c8.propertyIsEnumerable,dde=u5(function(){return arguments}())?u5:function(e){return cde(e)&&hde.call(e,"callee")&&!fde.call(e,"callee")},pde=dde,wE={exports:{}};function mde(){return!1}var gde=mde;wE.exports;(function(e,t){var n=Cd,r=gde,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,u=o&&o.exports===i,l=u?n.Buffer:void 0,p=l?l.isBuffer:void 0,g=p||r;e.exports=g})(wE,wE.exports);var h8=wE.exports,yde=9007199254740991,_de=/^(?:0|[1-9]\d*)$/;function vde(e,t){var n=typeof e;return t=t??yde,!!t&&(n=="number"||n!="symbol"&&_de.test(e))&&e>-1&&e%1==0&&e<t}var xde=vde,bde=9007199254740991;function wde(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=bde}var f8=wde,Ede=eT,Sde=f8,Tde=rT,Cde="[object Arguments]",Ide="[object Array]",Pde="[object Boolean]",Lde="[object Date]",Ade="[object Error]",Ode="[object Function]",kde="[object Map]",Rde="[object Number]",Mde="[object Object]",Nde="[object RegExp]",Dde="[object Set]",zde="[object String]",Fde="[object WeakMap]",Bde="[object ArrayBuffer]",jde="[object DataView]",$de="[object Float32Array]",Ude="[object Float64Array]",Vde="[object Int8Array]",qde="[object Int16Array]",Gde="[object Int32Array]",Hde="[object Uint8Array]",Zde="[object Uint8ClampedArray]",Wde="[object Uint16Array]",Kde="[object Uint32Array]",Ci={};Ci[$de]=Ci[Ude]=Ci[Vde]=Ci[qde]=Ci[Gde]=Ci[Hde]=Ci[Zde]=Ci[Wde]=Ci[Kde]=!0;Ci[Cde]=Ci[Ide]=Ci[Bde]=Ci[Pde]=Ci[jde]=Ci[Lde]=Ci[Ade]=Ci[Ode]=Ci[kde]=Ci[Rde]=Ci[Mde]=Ci[Nde]=Ci[Dde]=Ci[zde]=Ci[Fde]=!1;function Xde(e){return Tde(e)&&Sde(e.length)&&!!Ci[Ede(e)]}var Yde=Xde;function Jde(e){return function(t){return e(t)}}var Qde=Jde,EE={exports:{}};EE.exports;(function(e,t){var n=r8,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,u=o&&n.process,l=function(){try{var p=i&&i.require&&i.require("util").types;return p||u&&u.binding&&u.binding("util")}catch{}}();e.exports=l})(EE,EE.exports);var epe=EE.exports,tpe=Yde,npe=Qde,c5=epe,h5=c5&&c5.isTypedArray,rpe=h5?npe(h5):tpe,d8=rpe,ipe=rde,ope=pde,spe=bO,ape=h8,lpe=xde,upe=d8,cpe=Object.prototype,hpe=cpe.hasOwnProperty;function fpe(e,t){var n=spe(e),r=!n&&ope(e),i=!n&&!r&&ape(e),o=!n&&!r&&!i&&upe(e),u=n||r||i||o,l=u?ipe(e.length,String):[],p=l.length;for(var g in e)(t||hpe.call(e,g))&&!(u&&(g=="length"||i&&(g=="offset"||g=="parent")||o&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||lpe(g,p)))&&l.push(g);return l}var dpe=fpe,ppe=Object.prototype;function mpe(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ppe;return e===n}var gpe=mpe;function ype(e,t){return function(n){return e(t(n))}}var _pe=ype,vpe=_pe,xpe=vpe(Object.keys,Object),bpe=xpe,wpe=gpe,Epe=bpe,Spe=Object.prototype,Tpe=Spe.hasOwnProperty;function Cpe(e){if(!wpe(e))return Epe(e);var t=[];for(var n in Object(e))Tpe.call(e,n)&&n!="constructor"&&t.push(n);return t}var Ipe=Cpe,Ppe=s8,Lpe=f8;function Ape(e){return e!=null&&Lpe(e.length)&&!Ppe(e)}var Ope=Ape,kpe=dpe,Rpe=Ipe,Mpe=Ope;function Npe(e){return Mpe(e)?kpe(e):Rpe(e)}var Dpe=Npe,zpe=Gfe,Fpe=tde,Bpe=Dpe;function jpe(e){return zpe(e,Bpe,Fpe)}var $pe=jpe,f5=$pe,Upe=1,Vpe=Object.prototype,qpe=Vpe.hasOwnProperty;function Gpe(e,t,n,r,i,o){var u=n&Upe,l=f5(e),p=l.length,g=f5(t),x=g.length;if(p!=x&&!u)return!1;for(var y=p;y--;){var _=l[y];if(!(u?_ in t:qpe.call(t,_)))return!1}var T=o.get(e),P=o.get(t);if(T&&P)return T==t&&P==e;var A=!0;o.set(e,t),o.set(t,e);for(var M=u;++y<p;){_=l[y];var k=e[_],R=t[_];if(r)var z=u?r(R,k,_,t,e,o):r(k,R,_,e,t,o);if(!(z===void 0?k===R||i(k,R,n,r,o):z)){A=!1;break}M||(M=_=="constructor")}if(A&&!M){var D=e.constructor,U=t.constructor;D!=U&&"constructor"in e&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof U=="function"&&U instanceof U)&&(A=!1)}return o.delete(e),o.delete(t),A}var Hpe=Gpe,Zpe=mv,Wpe=Cd,Kpe=Zpe(Wpe,"DataView"),Xpe=Kpe,Ype=mv,Jpe=Cd,Qpe=Ype(Jpe,"Promise"),eme=Qpe,tme=mv,nme=Cd,rme=tme(nme,"Set"),ime=rme,ome=mv,sme=Cd,ame=ome(sme,"WeakMap"),lme=ame,BP=Xpe,jP=xO,$P=eme,UP=ime,VP=lme,p8=eT,vv=a8,d5="[object Map]",ume="[object Object]",p5="[object Promise]",m5="[object Set]",g5="[object WeakMap]",y5="[object DataView]",cme=vv(BP),hme=vv(jP),fme=vv($P),dme=vv(UP),pme=vv(VP),qm=p8;(BP&&qm(new BP(new ArrayBuffer(1)))!=y5||jP&&qm(new jP)!=d5||$P&&qm($P.resolve())!=p5||UP&&qm(new UP)!=m5||VP&&qm(new VP)!=g5)&&(qm=function(e){var t=p8(e),n=t==ume?e.constructor:void 0,r=n?vv(n):"";if(r)switch(r){case cme:return y5;case hme:return d5;case fme:return p5;case dme:return m5;case pme:return g5}return t});var mme=qm,oC=Zhe,gme=u8,yme=Ffe,_me=Hpe,_5=mme,v5=bO,x5=h8,vme=d8,xme=1,b5="[object Arguments]",w5="[object Array]",Vb="[object Object]",bme=Object.prototype,E5=bme.hasOwnProperty;function wme(e,t,n,r,i,o){var u=v5(e),l=v5(t),p=u?w5:_5(e),g=l?w5:_5(t);p=p==b5?Vb:p,g=g==b5?Vb:g;var x=p==Vb,y=g==Vb,_=p==g;if(_&&x5(e)){if(!x5(t))return!1;u=!0,x=!1}if(_&&!x)return o||(o=new oC),u||vme(e)?gme(e,t,n,r,i,o):yme(e,t,p,n,r,i,o);if(!(n&xme)){var T=x&&E5.call(e,"__wrapped__"),P=y&&E5.call(t,"__wrapped__");if(T||P){var A=T?e.value():e,M=P?t.value():t;return o||(o=new oC),i(A,M,n,r,o)}}return _?(o||(o=new oC),_me(e,t,n,r,i,o)):!1}var Eme=wme,Sme=Eme,S5=rT;function m8(e,t,n,r,i){return e===t?!0:e==null||t==null||!S5(e)&&!S5(t)?e!==e&&t!==t:Sme(e,t,n,r,m8,i)}var Tme=m8,Cme=Tme;function Ime(e,t){return Cme(e,t)}var Pme=Ime,g8={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(r,i){e.exports=i()})(typeof self<"u"?self:Er,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var u=r[o]={i:o,l:!1,exports:{}};return n[o].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=n,i.c=r,i.d=function(o,u,l){i.o(o,u)||Object.defineProperty(o,u,{configurable:!1,enumerable:!0,get:l})},i.n=function(o){var u=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(u,"a",u),u},i.o=function(o,u){return Object.prototype.hasOwnProperty.call(o,u)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),u=i(18),l=i(19),p=i(45),g=i(46),x=i(47),y=i(48),_=i(49),T=i(12),P=i(32),A=i(33),M=i(31),k=i(1),R={Scope:k.Scope,create:k.create,find:k.find,query:k.query,register:k.register,Container:o.default,Format:u.default,Leaf:l.default,Embed:y.default,Scroll:p.default,Block:x.default,Inline:g.default,Text:_.default,Attributor:{Attribute:T.default,Class:P.default,Style:A.default,Store:M.default}};r.default=R},function(n,r,i){var o=this&&this.__extends||function(){var M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,R){k.__proto__=R}||function(k,R){for(var z in R)R.hasOwnProperty(z)&&(k[z]=R[z])};return function(k,R){M(k,R);function z(){this.constructor=k}k.prototype=R===null?Object.create(R):(z.prototype=R.prototype,new z)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=function(M){o(k,M);function k(R){var z=this;return R="[Parchment] "+R,z=M.call(this,R)||this,z.message=R,z.name=z.constructor.name,z}return k}(Error);r.ParchmentError=u;var l={},p={},g={},x={};r.DATA_KEY="__blot";var y;(function(M){M[M.TYPE=3]="TYPE",M[M.LEVEL=12]="LEVEL",M[M.ATTRIBUTE=13]="ATTRIBUTE",M[M.BLOT=14]="BLOT",M[M.INLINE=7]="INLINE",M[M.BLOCK=11]="BLOCK",M[M.BLOCK_BLOT=10]="BLOCK_BLOT",M[M.INLINE_BLOT=6]="INLINE_BLOT",M[M.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",M[M.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",M[M.ANY=15]="ANY"})(y=r.Scope||(r.Scope={}));function _(M,k){var R=P(M);if(R==null)throw new u("Unable to create "+M+" blot");var z=R,D=M instanceof Node||M.nodeType===Node.TEXT_NODE?M:z.create(k);return new z(D,k)}r.create=_;function T(M,k){return k===void 0&&(k=!1),M==null?null:M[r.DATA_KEY]!=null?M[r.DATA_KEY].blot:k?T(M.parentNode,k):null}r.find=T;function P(M,k){k===void 0&&(k=y.ANY);var R;if(typeof M=="string")R=x[M]||l[M];else if(M instanceof Text||M.nodeType===Node.TEXT_NODE)R=x.text;else if(typeof M=="number")M&y.LEVEL&y.BLOCK?R=x.block:M&y.LEVEL&y.INLINE&&(R=x.inline);else if(M instanceof HTMLElement){var z=(M.getAttribute("class")||"").split(/\s+/);for(var D in z)if(R=p[z[D]],R)break;R=R||g[M.tagName]}return R==null?null:k&y.LEVEL&R.scope&&k&y.TYPE&R.scope?R:null}r.query=P;function A(){for(var M=[],k=0;k<arguments.length;k++)M[k]=arguments[k];if(M.length>1)return M.map(function(D){return A(D)});var R=M[0];if(typeof R.blotName!="string"&&typeof R.attrName!="string")throw new u("Invalid definition");if(R.blotName==="abstract")throw new u("Cannot register abstract class");if(x[R.blotName||R.attrName]=R,typeof R.keyName=="string")l[R.keyName]=R;else if(R.className!=null&&(p[R.className]=R),R.tagName!=null){Array.isArray(R.tagName)?R.tagName=R.tagName.map(function(D){return D.toUpperCase()}):R.tagName=R.tagName.toUpperCase();var z=Array.isArray(R.tagName)?R.tagName:[R.tagName];z.forEach(function(D){(g[D]==null||R.className==null)&&(g[D]=R)})}return R}r.register=A},function(n,r,i){var o=i(51),u=i(11),l=i(3),p=i(20),g="\0",x=function(y){Array.isArray(y)?this.ops=y:y!=null&&Array.isArray(y.ops)?this.ops=y.ops:this.ops=[]};x.prototype.insert=function(y,_){var T={};return y.length===0?this:(T.insert=y,_!=null&&typeof _=="object"&&Object.keys(_).length>0&&(T.attributes=_),this.push(T))},x.prototype.delete=function(y){return y<=0?this:this.push({delete:y})},x.prototype.retain=function(y,_){if(y<=0)return this;var T={retain:y};return _!=null&&typeof _=="object"&&Object.keys(_).length>0&&(T.attributes=_),this.push(T)},x.prototype.push=function(y){var _=this.ops.length,T=this.ops[_-1];if(y=l(!0,{},y),typeof T=="object"){if(typeof y.delete=="number"&&typeof T.delete=="number")return this.ops[_-1]={delete:T.delete+y.delete},this;if(typeof T.delete=="number"&&y.insert!=null&&(_-=1,T=this.ops[_-1],typeof T!="object"))return this.ops.unshift(y),this;if(u(y.attributes,T.attributes)){if(typeof y.insert=="string"&&typeof T.insert=="string")return this.ops[_-1]={insert:T.insert+y.insert},typeof y.attributes=="object"&&(this.ops[_-1].attributes=y.attributes),this;if(typeof y.retain=="number"&&typeof T.retain=="number")return this.ops[_-1]={retain:T.retain+y.retain},typeof y.attributes=="object"&&(this.ops[_-1].attributes=y.attributes),this}}return _===this.ops.length?this.ops.push(y):this.ops.splice(_,0,y),this},x.prototype.chop=function(){var y=this.ops[this.ops.length-1];return y&&y.retain&&!y.attributes&&this.ops.pop(),this},x.prototype.filter=function(y){return this.ops.filter(y)},x.prototype.forEach=function(y){this.ops.forEach(y)},x.prototype.map=function(y){return this.ops.map(y)},x.prototype.partition=function(y){var _=[],T=[];return this.forEach(function(P){var A=y(P)?_:T;A.push(P)}),[_,T]},x.prototype.reduce=function(y,_){return this.ops.reduce(y,_)},x.prototype.changeLength=function(){return this.reduce(function(y,_){return _.insert?y+p.length(_):_.delete?y-_.delete:y},0)},x.prototype.length=function(){return this.reduce(function(y,_){return y+p.length(_)},0)},x.prototype.slice=function(y,_){y=y||0,typeof _!="number"&&(_=1/0);for(var T=[],P=p.iterator(this.ops),A=0;A<_&&P.hasNext();){var M;A<y?M=P.next(y-A):(M=P.next(_-A),T.push(M)),A+=p.length(M)}return new x(T)},x.prototype.compose=function(y){var _=p.iterator(this.ops),T=p.iterator(y.ops),P=[],A=T.peek();if(A!=null&&typeof A.retain=="number"&&A.attributes==null){for(var M=A.retain;_.peekType()==="insert"&&_.peekLength()<=M;)M-=_.peekLength(),P.push(_.next());A.retain-M>0&&T.next(A.retain-M)}for(var k=new x(P);_.hasNext()||T.hasNext();)if(T.peekType()==="insert")k.push(T.next());else if(_.peekType()==="delete")k.push(_.next());else{var R=Math.min(_.peekLength(),T.peekLength()),z=_.next(R),D=T.next(R);if(typeof D.retain=="number"){var U={};typeof z.retain=="number"?U.retain=R:U.insert=z.insert;var V=p.attributes.compose(z.attributes,D.attributes,typeof z.retain=="number");if(V&&(U.attributes=V),k.push(U),!T.hasNext()&&u(k.ops[k.ops.length-1],U)){var G=new x(_.rest());return k.concat(G).chop()}}else typeof D.delete=="number"&&typeof z.retain=="number"&&k.push(D)}return k.chop()},x.prototype.concat=function(y){var _=new x(this.ops.slice());return y.ops.length>0&&(_.push(y.ops[0]),_.ops=_.ops.concat(y.ops.slice(1))),_},x.prototype.diff=function(y,_){if(this.ops===y.ops)return new x;var T=[this,y].map(function(R){return R.map(function(z){if(z.insert!=null)return typeof z.insert=="string"?z.insert:g;var D=R===y?"on":"with";throw new Error("diff() called "+D+" non-document")}).join("")}),P=new x,A=o(T[0],T[1],_),M=p.iterator(this.ops),k=p.iterator(y.ops);return A.forEach(function(R){for(var z=R[1].length;z>0;){var D=0;switch(R[0]){case o.INSERT:D=Math.min(k.peekLength(),z),P.push(k.next(D));break;case o.DELETE:D=Math.min(z,M.peekLength()),M.next(D),P.delete(D);break;case o.EQUAL:D=Math.min(M.peekLength(),k.peekLength(),z);var U=M.next(D),V=k.next(D);u(U.insert,V.insert)?P.retain(D,p.attributes.diff(U.attributes,V.attributes)):P.push(V).delete(D);break}z-=D}}),P.chop()},x.prototype.eachLine=function(y,_){_=_||`
`;for(var T=p.iterator(this.ops),P=new x,A=0;T.hasNext();){if(T.peekType()!=="insert")return;var M=T.peek(),k=p.length(M)-T.peekLength(),R=typeof M.insert=="string"?M.insert.indexOf(_,k)-k:-1;if(R<0)P.push(T.next());else if(R>0)P.push(T.next(R));else{if(y(P,T.next(1).attributes||{},A)===!1)return;A+=1,P=new x}}P.length()>0&&y(P,{},A)},x.prototype.transform=function(y,_){if(_=!!_,typeof y=="number")return this.transformPosition(y,_);for(var T=p.iterator(this.ops),P=p.iterator(y.ops),A=new x;T.hasNext()||P.hasNext();)if(T.peekType()==="insert"&&(_||P.peekType()!=="insert"))A.retain(p.length(T.next()));else if(P.peekType()==="insert")A.push(P.next());else{var M=Math.min(T.peekLength(),P.peekLength()),k=T.next(M),R=P.next(M);if(k.delete)continue;R.delete?A.push(R):A.retain(M,p.attributes.transform(k.attributes,R.attributes,_))}return A.chop()},x.prototype.transformPosition=function(y,_){_=!!_;for(var T=p.iterator(this.ops),P=0;T.hasNext()&&P<=y;){var A=T.peekLength(),M=T.peekType();if(T.next(),M==="delete"){y-=Math.min(A,y-P);continue}else M==="insert"&&(P<y||!_)&&(y+=A);P+=A}return y},n.exports=x},function(n,r){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,p=function(T){return typeof Array.isArray=="function"?Array.isArray(T):o.call(T)==="[object Array]"},g=function(T){if(!T||o.call(T)!=="[object Object]")return!1;var P=i.call(T,"constructor"),A=T.constructor&&T.constructor.prototype&&i.call(T.constructor.prototype,"isPrototypeOf");if(T.constructor&&!P&&!A)return!1;var M;for(M in T);return typeof M>"u"||i.call(T,M)},x=function(T,P){u&&P.name==="__proto__"?u(T,P.name,{enumerable:!0,configurable:!0,value:P.newValue,writable:!0}):T[P.name]=P.newValue},y=function(T,P){if(P==="__proto__")if(i.call(T,P)){if(l)return l(T,P).value}else return;return T[P]};n.exports=function _(){var T,P,A,M,k,R,z=arguments[0],D=1,U=arguments.length,V=!1;for(typeof z=="boolean"&&(V=z,z=arguments[1]||{},D=2),(z==null||typeof z!="object"&&typeof z!="function")&&(z={});D<U;++D)if(T=arguments[D],T!=null)for(P in T)A=y(z,P),M=y(T,P),z!==M&&(V&&M&&(g(M)||(k=p(M)))?(k?(k=!1,R=A&&p(A)?A:[]):R=A&&g(A)?A:{},x(z,{name:P,newValue:_(V,R,M)})):typeof M<"u"&&x(z,{name:P,newValue:M}));return z}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var o=function(){function X(ee,ce){for(var oe=0;oe<ce.length;oe++){var we=ce[oe];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(ee,we.key,we)}}return function(ee,ce,oe){return ce&&X(ee.prototype,ce),oe&&X(ee,oe),ee}}(),u=function X(ee,ce,oe){ee===null&&(ee=Function.prototype);var we=Object.getOwnPropertyDescriptor(ee,ce);if(we===void 0){var Ne=Object.getPrototypeOf(ee);return Ne===null?void 0:X(Ne,ce,oe)}else{if("value"in we)return we.value;var Be=we.get;return Be===void 0?void 0:Be.call(oe)}},l=i(3),p=z(l),g=i(2),x=z(g),y=i(0),_=z(y),T=i(16),P=z(T),A=i(6),M=z(A),k=i(7),R=z(k);function z(X){return X&&X.__esModule?X:{default:X}}function D(X,ee){if(!(X instanceof ee))throw new TypeError("Cannot call a class as a function")}function U(X,ee){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:X}function V(X,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);X.prototype=Object.create(ee&&ee.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(X,ee):X.__proto__=ee)}var G=1,H=function(X){V(ee,X);function ee(){return D(this,ee),U(this,(ee.__proto__||Object.getPrototypeOf(ee)).apply(this,arguments))}return o(ee,[{key:"attach",value:function(){u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"attach",this).call(this),this.attributes=new _.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new x.default().insert(this.value(),(0,p.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(oe,we){var Ne=_.default.query(oe,_.default.Scope.BLOCK_ATTRIBUTE);Ne!=null&&this.attributes.attribute(Ne,we)}},{key:"formatAt",value:function(oe,we,Ne,Be){this.format(Ne,Be)}},{key:"insertAt",value:function(oe,we,Ne){if(typeof we=="string"&&we.endsWith(`
`)){var Be=_.default.create(J.blotName);this.parent.insertBefore(Be,oe===0?this:this.next),Be.insertAt(0,we.slice(0,-1))}else u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"insertAt",this).call(this,oe,we,Ne)}}]),ee}(_.default.Embed);H.scope=_.default.Scope.BLOCK_BLOT;var J=function(X){V(ee,X);function ee(ce){D(this,ee);var oe=U(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,ce));return oe.cache={},oe}return o(ee,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(_.default.Leaf).reduce(function(oe,we){return we.length()===0?oe:oe.insert(we.value(),Y(we))},new x.default).insert(`
`,Y(this))),this.cache.delta}},{key:"deleteAt",value:function(oe,we){u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"deleteAt",this).call(this,oe,we),this.cache={}}},{key:"formatAt",value:function(oe,we,Ne,Be){we<=0||(_.default.query(Ne,_.default.Scope.BLOCK)?oe+we===this.length()&&this.format(Ne,Be):u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"formatAt",this).call(this,oe,Math.min(we,this.length()-oe-1),Ne,Be),this.cache={})}},{key:"insertAt",value:function(oe,we,Ne){if(Ne!=null)return u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"insertAt",this).call(this,oe,we,Ne);if(we.length!==0){var Be=we.split(`
`),De=Be.shift();De.length>0&&(oe<this.length()-1||this.children.tail==null?u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"insertAt",this).call(this,Math.min(oe,this.length()-1),De):this.children.tail.insertAt(this.children.tail.length(),De),this.cache={});var Ae=this;Be.reduce(function(ve,he){return Ae=Ae.split(ve,!0),Ae.insertAt(0,he),he.length},oe+De.length)}}},{key:"insertBefore",value:function(oe,we){var Ne=this.children.head;u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"insertBefore",this).call(this,oe,we),Ne instanceof P.default&&Ne.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"length",this).call(this)+G),this.cache.length}},{key:"moveChildren",value:function(oe,we){u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"moveChildren",this).call(this,oe,we),this.cache={}}},{key:"optimize",value:function(oe){u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"optimize",this).call(this,oe),this.cache={}}},{key:"path",value:function(oe){return u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"path",this).call(this,oe,!0)}},{key:"removeChild",value:function(oe){u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"removeChild",this).call(this,oe),this.cache={}}},{key:"split",value:function(oe){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(we&&(oe===0||oe>=this.length()-G)){var Ne=this.clone();return oe===0?(this.parent.insertBefore(Ne,this),this):(this.parent.insertBefore(Ne,this.next),Ne)}else{var Be=u(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"split",this).call(this,oe,we);return this.cache={},Be}}}]),ee}(_.default.Block);J.blotName="block",J.tagName="P",J.defaultChild="break",J.allowedChildren=[M.default,_.default.Embed,R.default];function Y(X){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return X==null||(typeof X.formats=="function"&&(ee=(0,p.default)(ee,X.formats())),X.parent==null||X.parent.blotName=="scroll"||X.parent.statics.scope!==X.statics.scope)?ee:Y(X.parent,ee)}r.bubbleFormats=Y,r.BlockEmbed=H,r.default=J},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ae){return typeof Ae}:function(Ae){return Ae&&typeof Symbol=="function"&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae},u=function(){function Ae(ve,he){var xe=[],Ee=!0,Ge=!1,$e=void 0;try{for(var be=ve[Symbol.iterator](),He;!(Ee=(He=be.next()).done)&&(xe.push(He.value),!(he&&xe.length===he));Ee=!0);}catch(it){Ge=!0,$e=it}finally{try{!Ee&&be.return&&be.return()}finally{if(Ge)throw $e}}return xe}return function(ve,he){if(Array.isArray(ve))return ve;if(Symbol.iterator in Object(ve))return Ae(ve,he);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function Ae(ve,he){for(var xe=0;xe<he.length;xe++){var Ee=he[xe];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(ve,Ee.key,Ee)}}return function(ve,he,xe){return he&&Ae(ve.prototype,he),xe&&Ae(ve,xe),ve}}();i(50);var p=i(2),g=Y(p),x=i(14),y=Y(x),_=i(8),T=Y(_),P=i(9),A=Y(P),M=i(0),k=Y(M),R=i(15),z=Y(R),D=i(3),U=Y(D),V=i(10),G=Y(V),H=i(34),J=Y(H);function Y(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}function X(Ae,ve,he){return ve in Ae?Object.defineProperty(Ae,ve,{value:he,enumerable:!0,configurable:!0,writable:!0}):Ae[ve]=he,Ae}function ee(Ae,ve){if(!(Ae instanceof ve))throw new TypeError("Cannot call a class as a function")}var ce=(0,G.default)("quill"),oe=function(){l(Ae,null,[{key:"debug",value:function(he){he===!0&&(he="log"),G.default.level(he)}},{key:"find",value:function(he){return he.__quill||k.default.find(he)}},{key:"import",value:function(he){return this.imports[he]==null&&ce.error("Cannot import "+he+". Are you sure it was registered?"),this.imports[he]}},{key:"register",value:function(he,xe){var Ee=this,Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof he!="string"){var $e=he.attrName||he.blotName;typeof $e=="string"?this.register("formats/"+$e,he,xe):Object.keys(he).forEach(function(be){Ee.register(be,he[be],xe)})}else this.imports[he]!=null&&!Ge&&ce.warn("Overwriting "+he+" with",xe),this.imports[he]=xe,(he.startsWith("blots/")||he.startsWith("formats/"))&&xe.blotName!=="abstract"?k.default.register(xe):he.startsWith("modules")&&typeof xe.register=="function"&&xe.register()}}]);function Ae(ve){var he=this,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ee(this,Ae),this.options=we(ve,xe),this.container=this.options.container,this.container==null)return ce.error("Invalid Quill container",ve);this.options.debug&&Ae.debug(this.options.debug);var Ee=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new T.default,this.scroll=k.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new y.default(this.scroll),this.selection=new z.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(T.default.events.EDITOR_CHANGE,function($e){$e===T.default.events.TEXT_CHANGE&&he.root.classList.toggle("ql-blank",he.editor.isBlank())}),this.emitter.on(T.default.events.SCROLL_UPDATE,function($e,be){var He=he.selection.lastRange,it=He&&He.length===0?He.index:void 0;Ne.call(he,function(){return he.editor.update(null,be,it)},$e)});var Ge=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+Ee+"<p><br></p></div>");this.setContents(Ge),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(Ae,[{key:"addContainer",value:function(he){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof he=="string"){var Ee=he;he=document.createElement("div"),he.classList.add(Ee)}return this.container.insertBefore(he,xe),he}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(he,xe,Ee){var Ge=this,$e=Be(he,xe,Ee),be=u($e,4);return he=be[0],xe=be[1],Ee=be[3],Ne.call(this,function(){return Ge.editor.deleteText(he,xe)},Ee,he,-1*xe)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(he),this.container.classList.toggle("ql-disabled",!he)}},{key:"focus",value:function(){var he=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=he,this.scrollIntoView()}},{key:"format",value:function(he,xe){var Ee=this,Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T.default.sources.API;return Ne.call(this,function(){var $e=Ee.getSelection(!0),be=new g.default;if($e==null)return be;if(k.default.query(he,k.default.Scope.BLOCK))be=Ee.editor.formatLine($e.index,$e.length,X({},he,xe));else{if($e.length===0)return Ee.selection.format(he,xe),be;be=Ee.editor.formatText($e.index,$e.length,X({},he,xe))}return Ee.setSelection($e,T.default.sources.SILENT),be},Ge)}},{key:"formatLine",value:function(he,xe,Ee,Ge,$e){var be=this,He=void 0,it=Be(he,xe,Ee,Ge,$e),ct=u(it,4);return he=ct[0],xe=ct[1],He=ct[2],$e=ct[3],Ne.call(this,function(){return be.editor.formatLine(he,xe,He)},$e,he,0)}},{key:"formatText",value:function(he,xe,Ee,Ge,$e){var be=this,He=void 0,it=Be(he,xe,Ee,Ge,$e),ct=u(it,4);return he=ct[0],xe=ct[1],He=ct[2],$e=ct[3],Ne.call(this,function(){return be.editor.formatText(he,xe,He)},$e,he,0)}},{key:"getBounds",value:function(he){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ee=void 0;typeof he=="number"?Ee=this.selection.getBounds(he,xe):Ee=this.selection.getBounds(he.index,he.length);var Ge=this.container.getBoundingClientRect();return{bottom:Ee.bottom-Ge.top,height:Ee.height,left:Ee.left-Ge.left,right:Ee.right-Ge.left,top:Ee.top-Ge.top,width:Ee.width}}},{key:"getContents",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-he,Ee=Be(he,xe),Ge=u(Ee,2);return he=Ge[0],xe=Ge[1],this.editor.getContents(he,xe)}},{key:"getFormat",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof he=="number"?this.editor.getFormat(he,xe):this.editor.getFormat(he.index,he.length)}},{key:"getIndex",value:function(he){return he.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(he){return this.scroll.leaf(he)}},{key:"getLine",value:function(he){return this.scroll.line(he)}},{key:"getLines",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof he!="number"?this.scroll.lines(he.index,he.length):this.scroll.lines(he,xe)}},{key:"getModule",value:function(he){return this.theme.modules[he]}},{key:"getSelection",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return he&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-he,Ee=Be(he,xe),Ge=u(Ee,2);return he=Ge[0],xe=Ge[1],this.editor.getText(he,xe)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(he,xe,Ee){var Ge=this,$e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ae.sources.API;return Ne.call(this,function(){return Ge.editor.insertEmbed(he,xe,Ee)},$e,he)}},{key:"insertText",value:function(he,xe,Ee,Ge,$e){var be=this,He=void 0,it=Be(he,0,Ee,Ge,$e),ct=u(it,4);return he=ct[0],He=ct[2],$e=ct[3],Ne.call(this,function(){return be.editor.insertText(he,xe,He)},$e,he,xe.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(he,xe,Ee){this.clipboard.dangerouslyPasteHTML(he,xe,Ee)}},{key:"removeFormat",value:function(he,xe,Ee){var Ge=this,$e=Be(he,xe,Ee),be=u($e,4);return he=be[0],xe=be[1],Ee=be[3],Ne.call(this,function(){return Ge.editor.removeFormat(he,xe)},Ee,he)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(he){var xe=this,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T.default.sources.API;return Ne.call(this,function(){he=new g.default(he);var Ge=xe.getLength(),$e=xe.editor.deleteText(0,Ge),be=xe.editor.applyDelta(he),He=be.ops[be.ops.length-1];He!=null&&typeof He.insert=="string"&&He.insert[He.insert.length-1]===`
`&&(xe.editor.deleteText(xe.getLength()-1,1),be.delete(1));var it=$e.compose(be);return it},Ee)}},{key:"setSelection",value:function(he,xe,Ee){if(he==null)this.selection.setRange(null,xe||Ae.sources.API);else{var Ge=Be(he,xe,Ee),$e=u(Ge,4);he=$e[0],xe=$e[1],Ee=$e[3],this.selection.setRange(new R.Range(he,xe),Ee),Ee!==T.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(he){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T.default.sources.API,Ee=new g.default().insert(he);return this.setContents(Ee,xe)}},{key:"update",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T.default.sources.USER,xe=this.scroll.update(he);return this.selection.update(he),xe}},{key:"updateContents",value:function(he){var xe=this,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T.default.sources.API;return Ne.call(this,function(){return he=new g.default(he),xe.editor.applyDelta(he,Ee)},Ee,!0)}}]),Ae}();oe.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},oe.events=T.default.events,oe.sources=T.default.sources,oe.version="1.3.7",oe.imports={delta:g.default,parchment:k.default,"core/module":A.default,"core/theme":J.default};function we(Ae,ve){if(ve=(0,U.default)(!0,{container:Ae,modules:{clipboard:!0,keyboard:!0,history:!0}},ve),!ve.theme||ve.theme===oe.DEFAULTS.theme)ve.theme=J.default;else if(ve.theme=oe.import("themes/"+ve.theme),ve.theme==null)throw new Error("Invalid theme "+ve.theme+". Did you register it?");var he=(0,U.default)(!0,{},ve.theme.DEFAULTS);[he,ve].forEach(function(Ge){Ge.modules=Ge.modules||{},Object.keys(Ge.modules).forEach(function($e){Ge.modules[$e]===!0&&(Ge.modules[$e]={})})});var xe=Object.keys(he.modules).concat(Object.keys(ve.modules)),Ee=xe.reduce(function(Ge,$e){var be=oe.import("modules/"+$e);return be==null?ce.error("Cannot load "+$e+" module. Are you sure you registered it?"):Ge[$e]=be.DEFAULTS||{},Ge},{});return ve.modules!=null&&ve.modules.toolbar&&ve.modules.toolbar.constructor!==Object&&(ve.modules.toolbar={container:ve.modules.toolbar}),ve=(0,U.default)(!0,{},oe.DEFAULTS,{modules:Ee},he,ve),["bounds","container","scrollingContainer"].forEach(function(Ge){typeof ve[Ge]=="string"&&(ve[Ge]=document.querySelector(ve[Ge]))}),ve.modules=Object.keys(ve.modules).reduce(function(Ge,$e){return ve.modules[$e]&&(Ge[$e]=ve.modules[$e]),Ge},{}),ve}function Ne(Ae,ve,he,xe){if(this.options.strict&&!this.isEnabled()&&ve===T.default.sources.USER)return new g.default;var Ee=he==null?null:this.getSelection(),Ge=this.editor.delta,$e=Ae();if(Ee!=null&&(he===!0&&(he=Ee.index),xe==null?Ee=De(Ee,$e,ve):xe!==0&&(Ee=De(Ee,he,xe,ve)),this.setSelection(Ee,T.default.sources.SILENT)),$e.length()>0){var be,He=[T.default.events.TEXT_CHANGE,$e,Ge,ve];if((be=this.emitter).emit.apply(be,[T.default.events.EDITOR_CHANGE].concat(He)),ve!==T.default.sources.SILENT){var it;(it=this.emitter).emit.apply(it,He)}}return $e}function Be(Ae,ve,he,xe,Ee){var Ge={};return typeof Ae.index=="number"&&typeof Ae.length=="number"?typeof ve!="number"?(Ee=xe,xe=he,he=ve,ve=Ae.length,Ae=Ae.index):(ve=Ae.length,Ae=Ae.index):typeof ve!="number"&&(Ee=xe,xe=he,he=ve,ve=0),(typeof he>"u"?"undefined":o(he))==="object"?(Ge=he,Ee=xe):typeof he=="string"&&(xe!=null?Ge[he]=xe:Ee=he),Ee=Ee||T.default.sources.API,[Ae,ve,Ge,Ee]}function De(Ae,ve,he,xe){if(Ae==null)return null;var Ee=void 0,Ge=void 0;if(ve instanceof g.default){var $e=[Ae.index,Ae.index+Ae.length].map(function(ct){return ve.transformPosition(ct,xe!==T.default.sources.USER)}),be=u($e,2);Ee=be[0],Ge=be[1]}else{var He=[Ae.index,Ae.index+Ae.length].map(function(ct){return ct<ve||ct===ve&&xe===T.default.sources.USER?ct:he>=0?ct+he:Math.max(ve,ct+he)}),it=u(He,2);Ee=it[0],Ge=it[1]}return new R.Range(Ee,Ge-Ee)}r.expandConfig=we,r.overload=Be,r.default=oe},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function M(k,R){for(var z=0;z<R.length;z++){var D=R[z];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,R,z){return R&&M(k.prototype,R),z&&M(k,z),k}}(),u=function M(k,R,z){k===null&&(k=Function.prototype);var D=Object.getOwnPropertyDescriptor(k,R);if(D===void 0){var U=Object.getPrototypeOf(k);return U===null?void 0:M(U,R,z)}else{if("value"in D)return D.value;var V=D.get;return V===void 0?void 0:V.call(z)}},l=i(7),p=y(l),g=i(0),x=y(g);function y(M){return M&&M.__esModule?M:{default:M}}function _(M,k){if(!(M instanceof k))throw new TypeError("Cannot call a class as a function")}function T(M,k){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:M}function P(M,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);M.prototype=Object.create(k&&k.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(M,k):M.__proto__=k)}var A=function(M){P(k,M);function k(){return _(this,k),T(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"formatAt",value:function(z,D,U,V){if(k.compare(this.statics.blotName,U)<0&&x.default.query(U,x.default.Scope.BLOT)){var G=this.isolate(z,D);V&&G.wrap(U,V)}else u(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,z,D,U,V)}},{key:"optimize",value:function(z){if(u(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,z),this.parent instanceof k&&k.compare(this.statics.blotName,this.parent.statics.blotName)>0){var D=this.parent.isolate(this.offset(),this.length());this.moveChildren(D),D.wrap(this)}}}],[{key:"compare",value:function(z,D){var U=k.order.indexOf(z),V=k.order.indexOf(D);return U>=0||V>=0?U-V:z===D?0:z<D?-1:1}}]),k}(x.default.Inline);A.allowedChildren=[A,x.default.Embed,p.default],A.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}function p(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function g(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function x(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var y=function(_){x(T,_);function T(){return p(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(u.default.Text);r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function R(z,D){for(var U=0;U<D.length;U++){var V=D[U];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(z,V.key,V)}}return function(z,D,U){return D&&R(z.prototype,D),U&&R(z,U),z}}(),u=function R(z,D,U){z===null&&(z=Function.prototype);var V=Object.getOwnPropertyDescriptor(z,D);if(V===void 0){var G=Object.getPrototypeOf(z);return G===null?void 0:R(G,D,U)}else{if("value"in V)return V.value;var H=V.get;return H===void 0?void 0:H.call(U)}},l=i(54),p=y(l),g=i(10),x=y(g);function y(R){return R&&R.__esModule?R:{default:R}}function _(R,z){if(!(R instanceof z))throw new TypeError("Cannot call a class as a function")}function T(R,z){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:R}function P(R,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);R.prototype=Object.create(z&&z.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(R,z):R.__proto__=z)}var A=(0,x.default)("quill:events"),M=["selectionchange","mousedown","mouseup","click"];M.forEach(function(R){document.addEventListener(R,function(){for(var z=arguments.length,D=Array(z),U=0;U<z;U++)D[U]=arguments[U];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(V){if(V.__quill&&V.__quill.emitter){var G;(G=V.__quill.emitter).handleDOM.apply(G,D)}})})});var k=function(R){P(z,R);function z(){_(this,z);var D=T(this,(z.__proto__||Object.getPrototypeOf(z)).call(this));return D.listeners={},D.on("error",A.error),D}return o(z,[{key:"emit",value:function(){A.log.apply(A,arguments),u(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(U){for(var V=arguments.length,G=Array(V>1?V-1:0),H=1;H<V;H++)G[H-1]=arguments[H];(this.listeners[U.type]||[]).forEach(function(J){var Y=J.node,X=J.handler;(U.target===Y||Y.contains(U.target))&&X.apply(void 0,[U].concat(G))})}},{key:"listenDOM",value:function(U,V,G){this.listeners[U]||(this.listeners[U]=[]),this.listeners[U].push({node:V,handler:G})}}]),z}(p.default);k.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},k.sources={API:"api",SILENT:"silent",USER:"user"},r.default=k},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function o(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")}var u=function l(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,l),this.quill=p,this.options=g};u.DEFAULTS={},r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=["error","warn","log","info"],u="warn";function l(g){if(o.indexOf(g)<=o.indexOf(u)){for(var x,y=arguments.length,_=Array(y>1?y-1:0),T=1;T<y;T++)_[T-1]=arguments[T];(x=console)[g].apply(x,_)}}function p(g){return o.reduce(function(x,y){return x[y]=l.bind(console,y,g),x},{})}l.level=p.level=function(g){u=g},r.default=p},function(n,r,i){var o=Array.prototype.slice,u=i(52),l=i(53),p=n.exports=function(_,T,P){return P||(P={}),_===T?!0:_ instanceof Date&&T instanceof Date?_.getTime()===T.getTime():!_||!T||typeof _!="object"&&typeof T!="object"?P.strict?_===T:_==T:y(_,T,P)};function g(_){return _==null}function x(_){return!(!_||typeof _!="object"||typeof _.length!="number"||typeof _.copy!="function"||typeof _.slice!="function"||_.length>0&&typeof _[0]!="number")}function y(_,T,P){var A,M;if(g(_)||g(T)||_.prototype!==T.prototype)return!1;if(l(_))return l(T)?(_=o.call(_),T=o.call(T),p(_,T,P)):!1;if(x(_)){if(!x(T)||_.length!==T.length)return!1;for(A=0;A<_.length;A++)if(_[A]!==T[A])return!1;return!0}try{var k=u(_),R=u(T)}catch{return!1}if(k.length!=R.length)return!1;for(k.sort(),R.sort(),A=k.length-1;A>=0;A--)if(k[A]!=R[A])return!1;for(A=k.length-1;A>=0;A--)if(M=k[A],!p(_[M],T[M],P))return!1;return typeof _==typeof T}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),u=function(){function l(p,g,x){x===void 0&&(x={}),this.attrName=p,this.keyName=g;var y=o.Scope.TYPE&o.Scope.ATTRIBUTE;x.scope!=null?this.scope=x.scope&o.Scope.LEVEL|y:this.scope=o.Scope.ATTRIBUTE,x.whitelist!=null&&(this.whitelist=x.whitelist)}return l.keys=function(p){return[].map.call(p.attributes,function(g){return g.name})},l.prototype.add=function(p,g){return this.canAdd(p,g)?(p.setAttribute(this.keyName,g),!0):!1},l.prototype.canAdd=function(p,g){var x=o.query(p,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return x==null?!1:this.whitelist==null?!0:typeof g=="string"?this.whitelist.indexOf(g.replace(/["']/g,""))>-1:this.whitelist.indexOf(g)>-1},l.prototype.remove=function(p){p.removeAttribute(this.keyName)},l.prototype.value=function(p){var g=p.getAttribute(this.keyName);return this.canAdd(p,g)&&g?g:""},l}();r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var o=function(){function H(J,Y){var X=[],ee=!0,ce=!1,oe=void 0;try{for(var we=J[Symbol.iterator](),Ne;!(ee=(Ne=we.next()).done)&&(X.push(Ne.value),!(Y&&X.length===Y));ee=!0);}catch(Be){ce=!0,oe=Be}finally{try{!ee&&we.return&&we.return()}finally{if(ce)throw oe}}return X}return function(J,Y){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return H(J,Y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function H(J,Y){for(var X=0;X<Y.length;X++){var ee=Y[X];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}}return function(J,Y,X){return Y&&H(J.prototype,Y),X&&H(J,X),J}}(),l=function H(J,Y,X){J===null&&(J=Function.prototype);var ee=Object.getOwnPropertyDescriptor(J,Y);if(ee===void 0){var ce=Object.getPrototypeOf(J);return ce===null?void 0:H(ce,Y,X)}else{if("value"in ee)return ee.value;var oe=ee.get;return oe===void 0?void 0:oe.call(X)}},p=i(2),g=R(p),x=i(0),y=R(x),_=i(4),T=R(_),P=i(6),A=R(P),M=i(7),k=R(M);function R(H){return H&&H.__esModule?H:{default:H}}function z(H,J){if(!(H instanceof J))throw new TypeError("Cannot call a class as a function")}function D(H,J){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J&&(typeof J=="object"||typeof J=="function")?J:H}function U(H,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);H.prototype=Object.create(J&&J.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(H,J):H.__proto__=J)}var V=function(H){U(J,H);function J(){return z(this,J),D(this,(J.__proto__||Object.getPrototypeOf(J)).apply(this,arguments))}return J}(A.default);V.blotName="code",V.tagName="CODE";var G=function(H){U(J,H);function J(){return z(this,J),D(this,(J.__proto__||Object.getPrototypeOf(J)).apply(this,arguments))}return u(J,[{key:"delta",value:function(){var X=this,ee=this.domNode.textContent;return ee.endsWith(`
`)&&(ee=ee.slice(0,-1)),ee.split(`
`).reduce(function(ce,oe){return ce.insert(oe).insert(`
`,X.formats())},new g.default)}},{key:"format",value:function(X,ee){if(!(X===this.statics.blotName&&ee)){var ce=this.descendant(k.default,this.length()-1),oe=o(ce,1),we=oe[0];we!=null&&we.deleteAt(we.length()-1,1),l(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"format",this).call(this,X,ee)}}},{key:"formatAt",value:function(X,ee,ce,oe){if(ee!==0&&!(y.default.query(ce,y.default.Scope.BLOCK)==null||ce===this.statics.blotName&&oe===this.statics.formats(this.domNode))){var we=this.newlineIndex(X);if(!(we<0||we>=X+ee)){var Ne=this.newlineIndex(X,!0)+1,Be=we-Ne+1,De=this.isolate(Ne,Be),Ae=De.next;De.format(ce,oe),Ae instanceof J&&Ae.formatAt(0,X-Ne+ee-Be,ce,oe)}}}},{key:"insertAt",value:function(X,ee,ce){if(ce==null){var oe=this.descendant(k.default,X),we=o(oe,2),Ne=we[0],Be=we[1];Ne.insertAt(Be,ee)}}},{key:"length",value:function(){var X=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?X:X+1}},{key:"newlineIndex",value:function(X){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(ee)return this.domNode.textContent.slice(0,X).lastIndexOf(`
`);var ce=this.domNode.textContent.slice(X).indexOf(`
`);return ce>-1?X+ce:-1}},{key:"optimize",value:function(X){this.domNode.textContent.endsWith(`
`)||this.appendChild(y.default.create("text",`
`)),l(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"optimize",this).call(this,X);var ee=this.next;ee!=null&&ee.prev===this&&ee.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===ee.statics.formats(ee.domNode)&&(ee.optimize(X),ee.moveChildren(this),ee.remove())}},{key:"replace",value:function(X){l(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"replace",this).call(this,X),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(ee){var ce=y.default.find(ee);ce==null?ee.parentNode.removeChild(ee):ce instanceof y.default.Embed?ce.remove():ce.unwrap()})}}],[{key:"create",value:function(X){var ee=l(J.__proto__||Object.getPrototypeOf(J),"create",this).call(this,X);return ee.setAttribute("spellcheck",!1),ee}},{key:"formats",value:function(){return!0}}]),J}(T.default);G.blotName="code-block",G.tagName="PRE",G.TAB="  ",r.Code=V,r.default=G},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ae){return typeof Ae}:function(Ae){return Ae&&typeof Symbol=="function"&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae},u=function(){function Ae(ve,he){var xe=[],Ee=!0,Ge=!1,$e=void 0;try{for(var be=ve[Symbol.iterator](),He;!(Ee=(He=be.next()).done)&&(xe.push(He.value),!(he&&xe.length===he));Ee=!0);}catch(it){Ge=!0,$e=it}finally{try{!Ee&&be.return&&be.return()}finally{if(Ge)throw $e}}return xe}return function(ve,he){if(Array.isArray(ve))return ve;if(Symbol.iterator in Object(ve))return Ae(ve,he);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function Ae(ve,he){for(var xe=0;xe<he.length;xe++){var Ee=he[xe];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(ve,Ee.key,Ee)}}return function(ve,he,xe){return he&&Ae(ve.prototype,he),xe&&Ae(ve,xe),ve}}(),p=i(2),g=ee(p),x=i(20),y=ee(x),_=i(0),T=ee(_),P=i(13),A=ee(P),M=i(24),k=ee(M),R=i(4),z=ee(R),D=i(16),U=ee(D),V=i(21),G=ee(V),H=i(11),J=ee(H),Y=i(3),X=ee(Y);function ee(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}function ce(Ae,ve,he){return ve in Ae?Object.defineProperty(Ae,ve,{value:he,enumerable:!0,configurable:!0,writable:!0}):Ae[ve]=he,Ae}function oe(Ae,ve){if(!(Ae instanceof ve))throw new TypeError("Cannot call a class as a function")}var we=/^[ -~]*$/,Ne=function(){function Ae(ve){oe(this,Ae),this.scroll=ve,this.delta=this.getDelta()}return l(Ae,[{key:"applyDelta",value:function(he){var xe=this,Ee=!1;this.scroll.update();var Ge=this.scroll.length();return this.scroll.batchStart(),he=De(he),he.reduce(function($e,be){var He=be.retain||be.delete||be.insert.length||1,it=be.attributes||{};if(be.insert!=null){if(typeof be.insert=="string"){var ct=be.insert;ct.endsWith(`
`)&&Ee&&(Ee=!1,ct=ct.slice(0,-1)),$e>=Ge&&!ct.endsWith(`
`)&&(Ee=!0),xe.scroll.insertAt($e,ct);var xt=xe.scroll.line($e),Dt=u(xt,2),Qt=Dt[0],Ft=Dt[1],Kt=(0,X.default)({},(0,R.bubbleFormats)(Qt));if(Qt instanceof z.default){var Gt=Qt.descendant(T.default.Leaf,Ft),Tr=u(Gt,1),rt=Tr[0];Kt=(0,X.default)(Kt,(0,R.bubbleFormats)(rt))}it=y.default.attributes.diff(Kt,it)||{}}else if(o(be.insert)==="object"){var lt=Object.keys(be.insert)[0];if(lt==null)return $e;xe.scroll.insertAt($e,lt,be.insert[lt])}Ge+=He}return Object.keys(it).forEach(function(gt){xe.scroll.formatAt($e,He,gt,it[gt])}),$e+He},0),he.reduce(function($e,be){return typeof be.delete=="number"?(xe.scroll.deleteAt($e,be.delete),$e):$e+(be.retain||be.insert.length||1)},0),this.scroll.batchEnd(),this.update(he)}},{key:"deleteText",value:function(he,xe){return this.scroll.deleteAt(he,xe),this.update(new g.default().retain(he).delete(xe))}},{key:"formatLine",value:function(he,xe){var Ee=this,Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Ge).forEach(function($e){if(!(Ee.scroll.whitelist!=null&&!Ee.scroll.whitelist[$e])){var be=Ee.scroll.lines(he,Math.max(xe,1)),He=xe;be.forEach(function(it){var ct=it.length();if(!(it instanceof A.default))it.format($e,Ge[$e]);else{var xt=he-it.offset(Ee.scroll),Dt=it.newlineIndex(xt+He)-xt+1;it.formatAt(xt,Dt,$e,Ge[$e])}He-=ct})}}),this.scroll.optimize(),this.update(new g.default().retain(he).retain(xe,(0,G.default)(Ge)))}},{key:"formatText",value:function(he,xe){var Ee=this,Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Ge).forEach(function($e){Ee.scroll.formatAt(he,xe,$e,Ge[$e])}),this.update(new g.default().retain(he).retain(xe,(0,G.default)(Ge)))}},{key:"getContents",value:function(he,xe){return this.delta.slice(he,he+xe)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(he,xe){return he.concat(xe.delta())},new g.default)}},{key:"getFormat",value:function(he){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ee=[],Ge=[];xe===0?this.scroll.path(he).forEach(function(be){var He=u(be,1),it=He[0];it instanceof z.default?Ee.push(it):it instanceof T.default.Leaf&&Ge.push(it)}):(Ee=this.scroll.lines(he,xe),Ge=this.scroll.descendants(T.default.Leaf,he,xe));var $e=[Ee,Ge].map(function(be){if(be.length===0)return{};for(var He=(0,R.bubbleFormats)(be.shift());Object.keys(He).length>0;){var it=be.shift();if(it==null)return He;He=Be((0,R.bubbleFormats)(it),He)}return He});return X.default.apply(X.default,$e)}},{key:"getText",value:function(he,xe){return this.getContents(he,xe).filter(function(Ee){return typeof Ee.insert=="string"}).map(function(Ee){return Ee.insert}).join("")}},{key:"insertEmbed",value:function(he,xe,Ee){return this.scroll.insertAt(he,xe,Ee),this.update(new g.default().retain(he).insert(ce({},xe,Ee)))}},{key:"insertText",value:function(he,xe){var Ee=this,Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return xe=xe.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(he,xe),Object.keys(Ge).forEach(function($e){Ee.scroll.formatAt(he,xe.length,$e,Ge[$e])}),this.update(new g.default().retain(he).insert(xe,(0,G.default)(Ge)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var he=this.scroll.children.head;return he.statics.blotName!==z.default.blotName||he.children.length>1?!1:he.children.head instanceof U.default}},{key:"removeFormat",value:function(he,xe){var Ee=this.getText(he,xe),Ge=this.scroll.line(he+xe),$e=u(Ge,2),be=$e[0],He=$e[1],it=0,ct=new g.default;be!=null&&(be instanceof A.default?it=be.newlineIndex(He)-He+1:it=be.length()-He,ct=be.delta().slice(He,He+it-1).insert(`
`));var xt=this.getContents(he,xe+it),Dt=xt.diff(new g.default().insert(Ee).concat(ct)),Qt=new g.default().retain(he).concat(Dt);return this.applyDelta(Qt)}},{key:"update",value:function(he){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Ge=this.delta;if(xe.length===1&&xe[0].type==="characterData"&&xe[0].target.data.match(we)&&T.default.find(xe[0].target)){var $e=T.default.find(xe[0].target),be=(0,R.bubbleFormats)($e),He=$e.offset(this.scroll),it=xe[0].oldValue.replace(k.default.CONTENTS,""),ct=new g.default().insert(it),xt=new g.default().insert($e.value()),Dt=new g.default().retain(He).concat(ct.diff(xt,Ee));he=Dt.reduce(function(Qt,Ft){return Ft.insert?Qt.insert(Ft.insert,be):Qt.push(Ft)},new g.default),this.delta=Ge.compose(he)}else this.delta=this.getDelta(),(!he||!(0,J.default)(Ge.compose(he),this.delta))&&(he=Ge.diff(this.delta,Ee));return he}}]),Ae}();function Be(Ae,ve){return Object.keys(ve).reduce(function(he,xe){return Ae[xe]==null||(ve[xe]===Ae[xe]?he[xe]=ve[xe]:Array.isArray(ve[xe])?ve[xe].indexOf(Ae[xe])<0&&(he[xe]=ve[xe].concat([Ae[xe]])):he[xe]=[ve[xe],Ae[xe]]),he},{})}function De(Ae){return Ae.reduce(function(ve,he){if(he.insert===1){var xe=(0,G.default)(he.attributes);return delete xe.image,ve.insert({image:he.attributes.image},xe)}if(he.attributes!=null&&(he.attributes.list===!0||he.attributes.bullet===!0)&&(he=(0,G.default)(he),he.attributes.list?he.attributes.list="ordered":(he.attributes.list="bullet",delete he.attributes.bullet)),typeof he.insert=="string"){var Ee=he.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return ve.insert(Ee,he.attributes)}return ve.push(he)},new g.default)}r.default=Ne},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var o=function(){function H(J,Y){var X=[],ee=!0,ce=!1,oe=void 0;try{for(var we=J[Symbol.iterator](),Ne;!(ee=(Ne=we.next()).done)&&(X.push(Ne.value),!(Y&&X.length===Y));ee=!0);}catch(Be){ce=!0,oe=Be}finally{try{!ee&&we.return&&we.return()}finally{if(ce)throw oe}}return X}return function(J,Y){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return H(J,Y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function H(J,Y){for(var X=0;X<Y.length;X++){var ee=Y[X];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}}return function(J,Y,X){return Y&&H(J.prototype,Y),X&&H(J,X),J}}(),l=i(0),p=k(l),g=i(21),x=k(g),y=i(11),_=k(y),T=i(8),P=k(T),A=i(10),M=k(A);function k(H){return H&&H.__esModule?H:{default:H}}function R(H){if(Array.isArray(H)){for(var J=0,Y=Array(H.length);J<H.length;J++)Y[J]=H[J];return Y}else return Array.from(H)}function z(H,J){if(!(H instanceof J))throw new TypeError("Cannot call a class as a function")}var D=(0,M.default)("quill:selection"),U=function H(J){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;z(this,H),this.index=J,this.length=Y},V=function(){function H(J,Y){var X=this;z(this,H),this.emitter=Y,this.scroll=J,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=p.default.create("cursor",this),this.lastRange=this.savedRange=new U(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){X.mouseDown||setTimeout(X.update.bind(X,P.default.sources.USER),1)}),this.emitter.on(P.default.events.EDITOR_CHANGE,function(ee,ce){ee===P.default.events.TEXT_CHANGE&&ce.length()>0&&X.update(P.default.sources.SILENT)}),this.emitter.on(P.default.events.SCROLL_BEFORE_UPDATE,function(){if(X.hasFocus()){var ee=X.getNativeRange();ee!=null&&ee.start.node!==X.cursor.textNode&&X.emitter.once(P.default.events.SCROLL_UPDATE,function(){try{X.setNativeRange(ee.start.node,ee.start.offset,ee.end.node,ee.end.offset)}catch{}})}}),this.emitter.on(P.default.events.SCROLL_OPTIMIZE,function(ee,ce){if(ce.range){var oe=ce.range,we=oe.startNode,Ne=oe.startOffset,Be=oe.endNode,De=oe.endOffset;X.setNativeRange(we,Ne,Be,De)}}),this.update(P.default.sources.SILENT)}return u(H,[{key:"handleComposition",value:function(){var Y=this;this.root.addEventListener("compositionstart",function(){Y.composing=!0}),this.root.addEventListener("compositionend",function(){if(Y.composing=!1,Y.cursor.parent){var X=Y.cursor.restore();if(!X)return;setTimeout(function(){Y.setNativeRange(X.startNode,X.startOffset,X.endNode,X.endOffset)},1)}})}},{key:"handleDragging",value:function(){var Y=this;this.emitter.listenDOM("mousedown",document.body,function(){Y.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){Y.mouseDown=!1,Y.update(P.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(Y,X){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[Y])){this.scroll.update();var ee=this.getNativeRange();if(!(ee==null||!ee.native.collapsed||p.default.query(Y,p.default.Scope.BLOCK))){if(ee.start.node!==this.cursor.textNode){var ce=p.default.find(ee.start.node,!1);if(ce==null)return;if(ce instanceof p.default.Leaf){var oe=ce.split(ee.start.offset);ce.parent.insertBefore(this.cursor,oe)}else ce.insertBefore(this.cursor,ee.start.node);this.cursor.attach()}this.cursor.format(Y,X),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(Y){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ee=this.scroll.length();Y=Math.min(Y,ee-1),X=Math.min(Y+X,ee-1)-Y;var ce=void 0,oe=this.scroll.leaf(Y),we=o(oe,2),Ne=we[0],Be=we[1];if(Ne==null)return null;var De=Ne.position(Be,!0),Ae=o(De,2);ce=Ae[0],Be=Ae[1];var ve=document.createRange();if(X>0){ve.setStart(ce,Be);var he=this.scroll.leaf(Y+X),xe=o(he,2);if(Ne=xe[0],Be=xe[1],Ne==null)return null;var Ee=Ne.position(Be,!0),Ge=o(Ee,2);return ce=Ge[0],Be=Ge[1],ve.setEnd(ce,Be),ve.getBoundingClientRect()}else{var $e="left",be=void 0;return ce instanceof Text?(Be<ce.data.length?(ve.setStart(ce,Be),ve.setEnd(ce,Be+1)):(ve.setStart(ce,Be-1),ve.setEnd(ce,Be),$e="right"),be=ve.getBoundingClientRect()):(be=Ne.domNode.getBoundingClientRect(),Be>0&&($e="right")),{bottom:be.top+be.height,height:be.height,left:be[$e],right:be[$e],top:be.top,width:0}}}},{key:"getNativeRange",value:function(){var Y=document.getSelection();if(Y==null||Y.rangeCount<=0)return null;var X=Y.getRangeAt(0);if(X==null)return null;var ee=this.normalizeNative(X);return D.info("getNativeRange",ee),ee}},{key:"getRange",value:function(){var Y=this.getNativeRange();if(Y==null)return[null,null];var X=this.normalizedToRange(Y);return[X,Y]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(Y){var X=this,ee=[[Y.start.node,Y.start.offset]];Y.native.collapsed||ee.push([Y.end.node,Y.end.offset]);var ce=ee.map(function(Ne){var Be=o(Ne,2),De=Be[0],Ae=Be[1],ve=p.default.find(De,!0),he=ve.offset(X.scroll);return Ae===0?he:ve instanceof p.default.Container?he+ve.length():he+ve.index(De,Ae)}),oe=Math.min(Math.max.apply(Math,R(ce)),this.scroll.length()-1),we=Math.min.apply(Math,[oe].concat(R(ce)));return new U(we,oe-we)}},{key:"normalizeNative",value:function(Y){if(!G(this.root,Y.startContainer)||!Y.collapsed&&!G(this.root,Y.endContainer))return null;var X={start:{node:Y.startContainer,offset:Y.startOffset},end:{node:Y.endContainer,offset:Y.endOffset},native:Y};return[X.start,X.end].forEach(function(ee){for(var ce=ee.node,oe=ee.offset;!(ce instanceof Text)&&ce.childNodes.length>0;)if(ce.childNodes.length>oe)ce=ce.childNodes[oe],oe=0;else if(ce.childNodes.length===oe)ce=ce.lastChild,oe=ce instanceof Text?ce.data.length:ce.childNodes.length+1;else break;ee.node=ce,ee.offset=oe}),X}},{key:"rangeToNative",value:function(Y){var X=this,ee=Y.collapsed?[Y.index]:[Y.index,Y.index+Y.length],ce=[],oe=this.scroll.length();return ee.forEach(function(we,Ne){we=Math.min(oe-1,we);var Be=void 0,De=X.scroll.leaf(we),Ae=o(De,2),ve=Ae[0],he=Ae[1],xe=ve.position(he,Ne!==0),Ee=o(xe,2);Be=Ee[0],he=Ee[1],ce.push(Be,he)}),ce.length<2&&(ce=ce.concat(ce)),ce}},{key:"scrollIntoView",value:function(Y){var X=this.lastRange;if(X!=null){var ee=this.getBounds(X.index,X.length);if(ee!=null){var ce=this.scroll.length()-1,oe=this.scroll.line(Math.min(X.index,ce)),we=o(oe,1),Ne=we[0],Be=Ne;if(X.length>0){var De=this.scroll.line(Math.min(X.index+X.length,ce)),Ae=o(De,1);Be=Ae[0]}if(!(Ne==null||Be==null)){var ve=Y.getBoundingClientRect();ee.top<ve.top?Y.scrollTop-=ve.top-ee.top:ee.bottom>ve.bottom&&(Y.scrollTop+=ee.bottom-ve.bottom)}}}}},{key:"setNativeRange",value:function(Y,X){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Y,ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:X,oe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(D.info("setNativeRange",Y,X,ee,ce),!(Y!=null&&(this.root.parentNode==null||Y.parentNode==null||ee.parentNode==null))){var we=document.getSelection();if(we!=null)if(Y!=null){this.hasFocus()||this.root.focus();var Ne=(this.getNativeRange()||{}).native;if(Ne==null||oe||Y!==Ne.startContainer||X!==Ne.startOffset||ee!==Ne.endContainer||ce!==Ne.endOffset){Y.tagName=="BR"&&(X=[].indexOf.call(Y.parentNode.childNodes,Y),Y=Y.parentNode),ee.tagName=="BR"&&(ce=[].indexOf.call(ee.parentNode.childNodes,ee),ee=ee.parentNode);var Be=document.createRange();Be.setStart(Y,X),Be.setEnd(ee,ce),we.removeAllRanges(),we.addRange(Be)}}else we.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(Y){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P.default.sources.API;if(typeof X=="string"&&(ee=X,X=!1),D.info("setRange",Y),Y!=null){var ce=this.rangeToNative(Y);this.setNativeRange.apply(this,R(ce).concat([X]))}else this.setNativeRange(null);this.update(ee)}},{key:"update",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:P.default.sources.USER,X=this.lastRange,ee=this.getRange(),ce=o(ee,2),oe=ce[0],we=ce[1];if(this.lastRange=oe,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,_.default)(X,this.lastRange)){var Ne;!this.composing&&we!=null&&we.native.collapsed&&we.start.node!==this.cursor.textNode&&this.cursor.restore();var Be=[P.default.events.SELECTION_CHANGE,(0,x.default)(this.lastRange),(0,x.default)(X),Y];if((Ne=this.emitter).emit.apply(Ne,[P.default.events.EDITOR_CHANGE].concat(Be)),Y!==P.default.sources.SILENT){var De;(De=this.emitter).emit.apply(De,Be)}}}}]),H}();function G(H,J){try{J.parentNode}catch{return!1}return J instanceof Text&&(J=J.parentNode),H.contains(J)}r.Range=U,r.default=V},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function P(A,M){for(var k=0;k<M.length;k++){var R=M[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,R.key,R)}}return function(A,M,k){return M&&P(A.prototype,M),k&&P(A,k),A}}(),u=function P(A,M,k){A===null&&(A=Function.prototype);var R=Object.getOwnPropertyDescriptor(A,M);if(R===void 0){var z=Object.getPrototypeOf(A);return z===null?void 0:P(z,M,k)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(k)}},l=i(0),p=g(l);function g(P){return P&&P.__esModule?P:{default:P}}function x(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function y(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:P}function _(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}var T=function(P){_(A,P);function A(){return x(this,A),y(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,[{key:"insertInto",value:function(k,R){k.children.length===0?u(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertInto",this).call(this,k,R):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),A}(p.default.Embed);T.blotName="break",T.tagName="BR",r.default=T},function(n,r,i){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,T){_.__proto__=T}||function(_,T){for(var P in T)T.hasOwnProperty(P)&&(_[P]=T[P])};return function(_,T){y(_,T);function P(){this.constructor=_}_.prototype=T===null?Object.create(T):(P.prototype=T.prototype,new P)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(44),l=i(30),p=i(1),g=function(y){o(_,y);function _(T){var P=y.call(this,T)||this;return P.build(),P}return _.prototype.appendChild=function(T){this.insertBefore(T)},_.prototype.attach=function(){y.prototype.attach.call(this),this.children.forEach(function(T){T.attach()})},_.prototype.build=function(){var T=this;this.children=new u.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(P){try{var A=x(P);T.insertBefore(A,T.children.head||void 0)}catch(M){if(M instanceof p.ParchmentError)return;throw M}})},_.prototype.deleteAt=function(T,P){if(T===0&&P===this.length())return this.remove();this.children.forEachAt(T,P,function(A,M,k){A.deleteAt(M,k)})},_.prototype.descendant=function(T,P){var A=this.children.find(P),M=A[0],k=A[1];return T.blotName==null&&T(M)||T.blotName!=null&&M instanceof T?[M,k]:M instanceof _?M.descendant(T,k):[null,-1]},_.prototype.descendants=function(T,P,A){P===void 0&&(P=0),A===void 0&&(A=Number.MAX_VALUE);var M=[],k=A;return this.children.forEachAt(P,A,function(R,z,D){(T.blotName==null&&T(R)||T.blotName!=null&&R instanceof T)&&M.push(R),R instanceof _&&(M=M.concat(R.descendants(T,z,k))),k-=D}),M},_.prototype.detach=function(){this.children.forEach(function(T){T.detach()}),y.prototype.detach.call(this)},_.prototype.formatAt=function(T,P,A,M){this.children.forEachAt(T,P,function(k,R,z){k.formatAt(R,z,A,M)})},_.prototype.insertAt=function(T,P,A){var M=this.children.find(T),k=M[0],R=M[1];if(k)k.insertAt(R,P,A);else{var z=A==null?p.create("text",P):p.create(P,A);this.appendChild(z)}},_.prototype.insertBefore=function(T,P){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(A){return T instanceof A}))throw new p.ParchmentError("Cannot insert "+T.statics.blotName+" into "+this.statics.blotName);T.insertInto(this,P)},_.prototype.length=function(){return this.children.reduce(function(T,P){return T+P.length()},0)},_.prototype.moveChildren=function(T,P){this.children.forEach(function(A){T.insertBefore(A,P)})},_.prototype.optimize=function(T){if(y.prototype.optimize.call(this,T),this.children.length===0)if(this.statics.defaultChild!=null){var P=p.create(this.statics.defaultChild);this.appendChild(P),P.optimize(T)}else this.remove()},_.prototype.path=function(T,P){P===void 0&&(P=!1);var A=this.children.find(T,P),M=A[0],k=A[1],R=[[this,T]];return M instanceof _?R.concat(M.path(k,P)):(M!=null&&R.push([M,k]),R)},_.prototype.removeChild=function(T){this.children.remove(T)},_.prototype.replace=function(T){T instanceof _&&T.moveChildren(this),y.prototype.replace.call(this,T)},_.prototype.split=function(T,P){if(P===void 0&&(P=!1),!P){if(T===0)return this;if(T===this.length())return this.next}var A=this.clone();return this.parent.insertBefore(A,this.next),this.children.forEachAt(T,this.length(),function(M,k,R){M=M.split(k,P),A.appendChild(M)}),A},_.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},_.prototype.update=function(T,P){var A=this,M=[],k=[];T.forEach(function(R){R.target===A.domNode&&R.type==="childList"&&(M.push.apply(M,R.addedNodes),k.push.apply(k,R.removedNodes))}),k.forEach(function(R){if(!(R.parentNode!=null&&R.tagName!=="IFRAME"&&document.body.compareDocumentPosition(R)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var z=p.find(R);z!=null&&(z.domNode.parentNode==null||z.domNode.parentNode===A.domNode)&&z.detach()}}),M.filter(function(R){return R.parentNode==A.domNode}).sort(function(R,z){return R===z?0:R.compareDocumentPosition(z)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(R){var z=null;R.nextSibling!=null&&(z=p.find(R.nextSibling));var D=x(R);(D.next!=z||D.next==null)&&(D.parent!=null&&D.parent.removeChild(A),A.insertBefore(D,z||void 0))})},_}(l.default);function x(y){var _=p.find(y);if(_==null)try{_=p.create(y)}catch{_=p.create(p.Scope.INLINE),[].slice.call(y.childNodes).forEach(function(P){_.domNode.appendChild(P)}),y.parentNode&&y.parentNode.replaceChild(_.domNode,y),_.attach()}return _}r.default=g},function(n,r,i){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,T){_.__proto__=T}||function(_,T){for(var P in T)T.hasOwnProperty(P)&&(_[P]=T[P])};return function(_,T){y(_,T);function P(){this.constructor=_}_.prototype=T===null?Object.create(T):(P.prototype=T.prototype,new P)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(12),l=i(31),p=i(17),g=i(1),x=function(y){o(_,y);function _(T){var P=y.call(this,T)||this;return P.attributes=new l.default(P.domNode),P}return _.formats=function(T){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return T.tagName.toLowerCase()},_.prototype.format=function(T,P){var A=g.query(T);A instanceof u.default?this.attributes.attribute(A,P):P&&A!=null&&(T!==this.statics.blotName||this.formats()[T]!==P)&&this.replaceWith(T,P)},_.prototype.formats=function(){var T=this.attributes.values(),P=this.statics.formats(this.domNode);return P!=null&&(T[this.statics.blotName]=P),T},_.prototype.replaceWith=function(T,P){var A=y.prototype.replaceWith.call(this,T,P);return this.attributes.copy(A),A},_.prototype.update=function(T,P){var A=this;y.prototype.update.call(this,T,P),T.some(function(M){return M.target===A.domNode&&M.type==="attributes"})&&this.attributes.build()},_.prototype.wrap=function(T,P){var A=y.prototype.wrap.call(this,T,P);return A instanceof _&&A.statics.scope===this.statics.scope&&this.attributes.move(A),A},_}(p.default);r.default=x},function(n,r,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var _ in y)y.hasOwnProperty(_)&&(x[_]=y[_])};return function(x,y){g(x,y);function _(){this.constructor=x}x.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(30),l=i(1),p=function(g){o(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return x.value=function(y){return!0},x.prototype.index=function(y,_){return this.domNode===y||this.domNode.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(_,1):-1},x.prototype.position=function(y,_){var T=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return y>0&&(T+=1),[this.parent.domNode,T]},x.prototype.value=function(){var y;return y={},y[this.statics.blotName]=this.statics.value(this.domNode)||!0,y},x.scope=l.Scope.INLINE_BLOT,x}(u.default);r.default=p},function(n,r,i){var o=i(11),u=i(3),l={attributes:{compose:function(g,x,y){typeof g!="object"&&(g={}),typeof x!="object"&&(x={});var _=u(!0,{},x);y||(_=Object.keys(_).reduce(function(P,A){return _[A]!=null&&(P[A]=_[A]),P},{}));for(var T in g)g[T]!==void 0&&x[T]===void 0&&(_[T]=g[T]);return Object.keys(_).length>0?_:void 0},diff:function(g,x){typeof g!="object"&&(g={}),typeof x!="object"&&(x={});var y=Object.keys(g).concat(Object.keys(x)).reduce(function(_,T){return o(g[T],x[T])||(_[T]=x[T]===void 0?null:x[T]),_},{});return Object.keys(y).length>0?y:void 0},transform:function(g,x,y){if(typeof g!="object")return x;if(typeof x=="object"){if(!y)return x;var _=Object.keys(x).reduce(function(T,P){return g[P]===void 0&&(T[P]=x[P]),T},{});return Object.keys(_).length>0?_:void 0}}},iterator:function(g){return new p(g)},length:function(g){return typeof g.delete=="number"?g.delete:typeof g.retain=="number"?g.retain:typeof g.insert=="string"?g.insert.length:1}};function p(g){this.ops=g,this.index=0,this.offset=0}p.prototype.hasNext=function(){return this.peekLength()<1/0},p.prototype.next=function(g){g||(g=1/0);var x=this.ops[this.index];if(x){var y=this.offset,_=l.length(x);if(g>=_-y?(g=_-y,this.index+=1,this.offset=0):this.offset+=g,typeof x.delete=="number")return{delete:g};var T={};return x.attributes&&(T.attributes=x.attributes),typeof x.retain=="number"?T.retain=g:typeof x.insert=="string"?T.insert=x.insert.substr(y,g):T.insert=x.insert,T}else return{retain:1/0}},p.prototype.peek=function(){return this.ops[this.index]},p.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},p.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},p.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var g=this.offset,x=this.index,y=this.next(),_=this.ops.slice(this.index);return this.offset=g,this.index=x,[y].concat(_)}else return[]},n.exports=l},function(n,r){var i=function(){function o(A,M){return M!=null&&A instanceof M}var u;try{u=Map}catch{u=function(){}}var l;try{l=Set}catch{l=function(){}}var p;try{p=Promise}catch{p=function(){}}function g(A,M,k,R,z){typeof M=="object"&&(k=M.depth,R=M.prototype,z=M.includeNonEnumerable,M=M.circular);var D=[],U=[],V=typeof Buffer<"u";typeof M>"u"&&(M=!0),typeof k>"u"&&(k=1/0);function G(H,J){if(H===null)return null;if(J===0)return H;var Y,X;if(typeof H!="object")return H;if(o(H,u))Y=new u;else if(o(H,l))Y=new l;else if(o(H,p))Y=new p(function(ve,he){H.then(function(xe){ve(G(xe,J-1))},function(xe){he(G(xe,J-1))})});else if(g.__isArray(H))Y=[];else if(g.__isRegExp(H))Y=new RegExp(H.source,P(H)),H.lastIndex&&(Y.lastIndex=H.lastIndex);else if(g.__isDate(H))Y=new Date(H.getTime());else{if(V&&Buffer.isBuffer(H))return Buffer.allocUnsafe?Y=Buffer.allocUnsafe(H.length):Y=new Buffer(H.length),H.copy(Y),Y;o(H,Error)?Y=Object.create(H):typeof R>"u"?(X=Object.getPrototypeOf(H),Y=Object.create(X)):(Y=Object.create(R),X=R)}if(M){var ee=D.indexOf(H);if(ee!=-1)return U[ee];D.push(H),U.push(Y)}o(H,u)&&H.forEach(function(ve,he){var xe=G(he,J-1),Ee=G(ve,J-1);Y.set(xe,Ee)}),o(H,l)&&H.forEach(function(ve){var he=G(ve,J-1);Y.add(he)});for(var ce in H){var oe;X&&(oe=Object.getOwnPropertyDescriptor(X,ce)),!(oe&&oe.set==null)&&(Y[ce]=G(H[ce],J-1))}if(Object.getOwnPropertySymbols)for(var we=Object.getOwnPropertySymbols(H),ce=0;ce<we.length;ce++){var Ne=we[ce],Be=Object.getOwnPropertyDescriptor(H,Ne);Be&&!Be.enumerable&&!z||(Y[Ne]=G(H[Ne],J-1),Be.enumerable||Object.defineProperty(Y,Ne,{enumerable:!1}))}if(z)for(var De=Object.getOwnPropertyNames(H),ce=0;ce<De.length;ce++){var Ae=De[ce],Be=Object.getOwnPropertyDescriptor(H,Ae);Be&&Be.enumerable||(Y[Ae]=G(H[Ae],J-1),Object.defineProperty(Y,Ae,{enumerable:!1}))}return Y}return G(A,k)}g.clonePrototype=function(M){if(M===null)return null;var k=function(){};return k.prototype=M,new k};function x(A){return Object.prototype.toString.call(A)}g.__objToStr=x;function y(A){return typeof A=="object"&&x(A)==="[object Date]"}g.__isDate=y;function _(A){return typeof A=="object"&&x(A)==="[object Array]"}g.__isArray=_;function T(A){return typeof A=="object"&&x(A)==="[object RegExp]"}g.__isRegExp=T;function P(A){var M="";return A.global&&(M+="g"),A.ignoreCase&&(M+="i"),A.multiline&&(M+="m"),M}return g.__getRegExpFlags=P,g}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function Y(X,ee){var ce=[],oe=!0,we=!1,Ne=void 0;try{for(var Be=X[Symbol.iterator](),De;!(oe=(De=Be.next()).done)&&(ce.push(De.value),!(ee&&ce.length===ee));oe=!0);}catch(Ae){we=!0,Ne=Ae}finally{try{!oe&&Be.return&&Be.return()}finally{if(we)throw Ne}}return ce}return function(X,ee){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return Y(X,ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function Y(X,ee){for(var ce=0;ce<ee.length;ce++){var oe=ee[ce];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(X,oe.key,oe)}}return function(X,ee,ce){return ee&&Y(X.prototype,ee),ce&&Y(X,ce),X}}(),l=function Y(X,ee,ce){X===null&&(X=Function.prototype);var oe=Object.getOwnPropertyDescriptor(X,ee);if(oe===void 0){var we=Object.getPrototypeOf(X);return we===null?void 0:Y(we,ee,ce)}else{if("value"in oe)return oe.value;var Ne=oe.get;return Ne===void 0?void 0:Ne.call(ce)}},p=i(0),g=D(p),x=i(8),y=D(x),_=i(4),T=D(_),P=i(16),A=D(P),M=i(13),k=D(M),R=i(25),z=D(R);function D(Y){return Y&&Y.__esModule?Y:{default:Y}}function U(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")}function V(Y,X){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:Y}function G(Y,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Y.prototype=Object.create(X&&X.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,X):Y.__proto__=X)}function H(Y){return Y instanceof T.default||Y instanceof _.BlockEmbed}var J=function(Y){G(X,Y);function X(ee,ce){U(this,X);var oe=V(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,ee));return oe.emitter=ce.emitter,Array.isArray(ce.whitelist)&&(oe.whitelist=ce.whitelist.reduce(function(we,Ne){return we[Ne]=!0,we},{})),oe.domNode.addEventListener("DOMNodeInserted",function(){}),oe.optimize(),oe.enable(),oe}return u(X,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(ce,oe){var we=this.line(ce),Ne=o(we,2),Be=Ne[0],De=Ne[1],Ae=this.line(ce+oe),ve=o(Ae,1),he=ve[0];if(l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"deleteAt",this).call(this,ce,oe),he!=null&&Be!==he&&De>0){if(Be instanceof _.BlockEmbed||he instanceof _.BlockEmbed){this.optimize();return}if(Be instanceof k.default){var xe=Be.newlineIndex(Be.length(),!0);if(xe>-1&&(Be=Be.split(xe+1),Be===he)){this.optimize();return}}else if(he instanceof k.default){var Ee=he.newlineIndex(0);Ee>-1&&he.split(Ee+1)}var Ge=he.children.head instanceof A.default?null:he.children.head;Be.moveChildren(he,Ge),Be.remove()}this.optimize()}},{key:"enable",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",ce)}},{key:"formatAt",value:function(ce,oe,we,Ne){this.whitelist!=null&&!this.whitelist[we]||(l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"formatAt",this).call(this,ce,oe,we,Ne),this.optimize())}},{key:"insertAt",value:function(ce,oe,we){if(!(we!=null&&this.whitelist!=null&&!this.whitelist[oe])){if(ce>=this.length())if(we==null||g.default.query(oe,g.default.Scope.BLOCK)==null){var Ne=g.default.create(this.statics.defaultChild);this.appendChild(Ne),we==null&&oe.endsWith(`
`)&&(oe=oe.slice(0,-1)),Ne.insertAt(0,oe,we)}else{var Be=g.default.create(oe,we);this.appendChild(Be)}else l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"insertAt",this).call(this,ce,oe,we);this.optimize()}}},{key:"insertBefore",value:function(ce,oe){if(ce.statics.scope===g.default.Scope.INLINE_BLOT){var we=g.default.create(this.statics.defaultChild);we.appendChild(ce),ce=we}l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"insertBefore",this).call(this,ce,oe)}},{key:"leaf",value:function(ce){return this.path(ce).pop()||[null,-1]}},{key:"line",value:function(ce){return ce===this.length()?this.line(ce-1):this.descendant(H,ce)}},{key:"lines",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,we=function Ne(Be,De,Ae){var ve=[],he=Ae;return Be.children.forEachAt(De,Ae,function(xe,Ee,Ge){H(xe)?ve.push(xe):xe instanceof g.default.Container&&(ve=ve.concat(Ne(xe,Ee,he))),he-=Ge}),ve};return we(this,ce,oe)}},{key:"optimize",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"optimize",this).call(this,ce,oe),ce.length>0&&this.emitter.emit(y.default.events.SCROLL_OPTIMIZE,ce,oe))}},{key:"path",value:function(ce){return l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"path",this).call(this,ce).slice(1)}},{key:"update",value:function(ce){if(this.batch!==!0){var oe=y.default.sources.USER;typeof ce=="string"&&(oe=ce),Array.isArray(ce)||(ce=this.observer.takeRecords()),ce.length>0&&this.emitter.emit(y.default.events.SCROLL_BEFORE_UPDATE,oe,ce),l(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"update",this).call(this,ce.concat([])),ce.length>0&&this.emitter.emit(y.default.events.SCROLL_UPDATE,oe,ce)}}}]),X}(g.default.Scroll);J.blotName="scroll",J.className="ql-editor",J.tagName="DIV",J.defaultChild="block",J.allowedChildren=[T.default,_.BlockEmbed,z.default],r.default=J},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(be){return typeof be}:function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},u=function(){function be(He,it){var ct=[],xt=!0,Dt=!1,Qt=void 0;try{for(var Ft=He[Symbol.iterator](),Kt;!(xt=(Kt=Ft.next()).done)&&(ct.push(Kt.value),!(it&&ct.length===it));xt=!0);}catch(Gt){Dt=!0,Qt=Gt}finally{try{!xt&&Ft.return&&Ft.return()}finally{if(Dt)throw Qt}}return ct}return function(He,it){if(Array.isArray(He))return He;if(Symbol.iterator in Object(He))return be(He,it);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function be(He,it){for(var ct=0;ct<it.length;ct++){var xt=it[ct];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(He,xt.key,xt)}}return function(He,it,ct){return it&&be(He.prototype,it),ct&&be(He,ct),He}}(),p=i(21),g=Y(p),x=i(11),y=Y(x),_=i(3),T=Y(_),P=i(2),A=Y(P),M=i(20),k=Y(M),R=i(0),z=Y(R),D=i(5),U=Y(D),V=i(10),G=Y(V),H=i(9),J=Y(H);function Y(be){return be&&be.__esModule?be:{default:be}}function X(be,He,it){return He in be?Object.defineProperty(be,He,{value:it,enumerable:!0,configurable:!0,writable:!0}):be[He]=it,be}function ee(be,He){if(!(be instanceof He))throw new TypeError("Cannot call a class as a function")}function ce(be,He){if(!be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return He&&(typeof He=="object"||typeof He=="function")?He:be}function oe(be,He){if(typeof He!="function"&&He!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof He);be.prototype=Object.create(He&&He.prototype,{constructor:{value:be,enumerable:!1,writable:!0,configurable:!0}}),He&&(Object.setPrototypeOf?Object.setPrototypeOf(be,He):be.__proto__=He)}var we=(0,G.default)("quill:keyboard"),Ne=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Be=function(be){oe(He,be),l(He,null,[{key:"match",value:function(ct,xt){return xt=$e(xt),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Dt){return!!xt[Dt]!==ct[Dt]&&xt[Dt]!==null})?!1:xt.key===(ct.which||ct.keyCode)}}]);function He(it,ct){ee(this,He);var xt=ce(this,(He.__proto__||Object.getPrototypeOf(He)).call(this,it,ct));return xt.bindings={},Object.keys(xt.options.bindings).forEach(function(Dt){Dt==="list autofill"&&it.scroll.whitelist!=null&&!it.scroll.whitelist.list||xt.options.bindings[Dt]&&xt.addBinding(xt.options.bindings[Dt])}),xt.addBinding({key:He.keys.ENTER,shiftKey:null},xe),xt.addBinding({key:He.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(xt.addBinding({key:He.keys.BACKSPACE},{collapsed:!0},Ae),xt.addBinding({key:He.keys.DELETE},{collapsed:!0},ve)):(xt.addBinding({key:He.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Ae),xt.addBinding({key:He.keys.DELETE},{collapsed:!0,suffix:/^.?$/},ve)),xt.addBinding({key:He.keys.BACKSPACE},{collapsed:!1},he),xt.addBinding({key:He.keys.DELETE},{collapsed:!1},he),xt.addBinding({key:He.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Ae),xt.listen(),xt}return l(He,[{key:"addBinding",value:function(ct){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Qt=$e(ct);if(Qt==null||Qt.key==null)return we.warn("Attempted to add invalid keyboard binding",Qt);typeof xt=="function"&&(xt={handler:xt}),typeof Dt=="function"&&(Dt={handler:Dt}),Qt=(0,T.default)(Qt,xt,Dt),this.bindings[Qt.key]=this.bindings[Qt.key]||[],this.bindings[Qt.key].push(Qt)}},{key:"listen",value:function(){var ct=this;this.quill.root.addEventListener("keydown",function(xt){if(!xt.defaultPrevented){var Dt=xt.which||xt.keyCode,Qt=(ct.bindings[Dt]||[]).filter(function(Vn){return He.match(xt,Vn)});if(Qt.length!==0){var Ft=ct.quill.getSelection();if(!(Ft==null||!ct.quill.hasFocus())){var Kt=ct.quill.getLine(Ft.index),Gt=u(Kt,2),Tr=Gt[0],rt=Gt[1],lt=ct.quill.getLeaf(Ft.index),gt=u(lt,2),_t=gt[0],Pt=gt[1],je=Ft.length===0?[_t,Pt]:ct.quill.getLeaf(Ft.index+Ft.length),vt=u(je,2),St=vt[0],Lt=vt[1],en=_t instanceof z.default.Text?_t.value().slice(0,Pt):"",wn=St instanceof z.default.Text?St.value().slice(Lt):"",gn={collapsed:Ft.length===0,empty:Ft.length===0&&Tr.length()<=1,format:ct.quill.getFormat(Ft),offset:rt,prefix:en,suffix:wn},bt=Qt.some(function(Vn){if(Vn.collapsed!=null&&Vn.collapsed!==gn.collapsed||Vn.empty!=null&&Vn.empty!==gn.empty||Vn.offset!=null&&Vn.offset!==gn.offset)return!1;if(Array.isArray(Vn.format)){if(Vn.format.every(function(_r){return gn.format[_r]==null}))return!1}else if(o(Vn.format)==="object"&&!Object.keys(Vn.format).every(function(_r){return Vn.format[_r]===!0?gn.format[_r]!=null:Vn.format[_r]===!1?gn.format[_r]==null:(0,y.default)(Vn.format[_r],gn.format[_r])}))return!1;return Vn.prefix!=null&&!Vn.prefix.test(gn.prefix)||Vn.suffix!=null&&!Vn.suffix.test(gn.suffix)?!1:Vn.handler.call(ct,Ft,gn)!==!0});bt&&xt.preventDefault()}}}})}}]),He}(J.default);Be.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Be.DEFAULTS={bindings:{bold:Ge("bold"),italic:Ge("italic"),underline:Ge("underline"),indent:{key:Be.keys.TAB,format:["blockquote","indent","list"],handler:function(He,it){if(it.collapsed&&it.offset!==0)return!0;this.quill.format("indent","+1",U.default.sources.USER)}},outdent:{key:Be.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(He,it){if(it.collapsed&&it.offset!==0)return!0;this.quill.format("indent","-1",U.default.sources.USER)}},"outdent backspace":{key:Be.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(He,it){it.format.indent!=null?this.quill.format("indent","-1",U.default.sources.USER):it.format.list!=null&&this.quill.format("list",!1,U.default.sources.USER)}},"indent code-block":Ee(!0),"outdent code-block":Ee(!1),"remove tab":{key:Be.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(He){this.quill.deleteText(He.index-1,1,U.default.sources.USER)}},tab:{key:Be.keys.TAB,handler:function(He){this.quill.history.cutoff();var it=new A.default().retain(He.index).delete(He.length).insert("	");this.quill.updateContents(it,U.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(He.index+1,U.default.sources.SILENT)}},"list empty enter":{key:Be.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(He,it){this.quill.format("list",!1,U.default.sources.USER),it.format.indent&&this.quill.format("indent",!1,U.default.sources.USER)}},"checklist enter":{key:Be.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(He){var it=this.quill.getLine(He.index),ct=u(it,2),xt=ct[0],Dt=ct[1],Qt=(0,T.default)({},xt.formats(),{list:"checked"}),Ft=new A.default().retain(He.index).insert(`
`,Qt).retain(xt.length()-Dt-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ft,U.default.sources.USER),this.quill.setSelection(He.index+1,U.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Be.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(He,it){var ct=this.quill.getLine(He.index),xt=u(ct,2),Dt=xt[0],Qt=xt[1],Ft=new A.default().retain(He.index).insert(`
`,it.format).retain(Dt.length()-Qt-1).retain(1,{header:null});this.quill.updateContents(Ft,U.default.sources.USER),this.quill.setSelection(He.index+1,U.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(He,it){var ct=it.prefix.length,xt=this.quill.getLine(He.index),Dt=u(xt,2),Qt=Dt[0],Ft=Dt[1];if(Ft>ct)return!0;var Kt=void 0;switch(it.prefix.trim()){case"[]":case"[ ]":Kt="unchecked";break;case"[x]":Kt="checked";break;case"-":case"*":Kt="bullet";break;default:Kt="ordered"}this.quill.insertText(He.index," ",U.default.sources.USER),this.quill.history.cutoff();var Gt=new A.default().retain(He.index-Ft).delete(ct+1).retain(Qt.length()-2-Ft).retain(1,{list:Kt});this.quill.updateContents(Gt,U.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(He.index-ct,U.default.sources.SILENT)}},"code exit":{key:Be.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(He){var it=this.quill.getLine(He.index),ct=u(it,2),xt=ct[0],Dt=ct[1],Qt=new A.default().retain(He.index+xt.length()-Dt-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Qt,U.default.sources.USER)}},"embed left":De(Be.keys.LEFT,!1),"embed left shift":De(Be.keys.LEFT,!0),"embed right":De(Be.keys.RIGHT,!1),"embed right shift":De(Be.keys.RIGHT,!0)}};function De(be,He){var it,ct=be===Be.keys.LEFT?"prefix":"suffix";return it={key:be,shiftKey:He,altKey:null},X(it,ct,/^$/),X(it,"handler",function(Dt){var Qt=Dt.index;be===Be.keys.RIGHT&&(Qt+=Dt.length+1);var Ft=this.quill.getLeaf(Qt),Kt=u(Ft,1),Gt=Kt[0];return Gt instanceof z.default.Embed?(be===Be.keys.LEFT?He?this.quill.setSelection(Dt.index-1,Dt.length+1,U.default.sources.USER):this.quill.setSelection(Dt.index-1,U.default.sources.USER):He?this.quill.setSelection(Dt.index,Dt.length+1,U.default.sources.USER):this.quill.setSelection(Dt.index+Dt.length+1,U.default.sources.USER),!1):!0}),it}function Ae(be,He){if(!(be.index===0||this.quill.getLength()<=1)){var it=this.quill.getLine(be.index),ct=u(it,1),xt=ct[0],Dt={};if(He.offset===0){var Qt=this.quill.getLine(be.index-1),Ft=u(Qt,1),Kt=Ft[0];if(Kt!=null&&Kt.length()>1){var Gt=xt.formats(),Tr=this.quill.getFormat(be.index-1,1);Dt=k.default.attributes.diff(Gt,Tr)||{}}}var rt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(He.prefix)?2:1;this.quill.deleteText(be.index-rt,rt,U.default.sources.USER),Object.keys(Dt).length>0&&this.quill.formatLine(be.index-rt,rt,Dt,U.default.sources.USER),this.quill.focus()}}function ve(be,He){var it=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(He.suffix)?2:1;if(!(be.index>=this.quill.getLength()-it)){var ct={},xt=0,Dt=this.quill.getLine(be.index),Qt=u(Dt,1),Ft=Qt[0];if(He.offset>=Ft.length()-1){var Kt=this.quill.getLine(be.index+1),Gt=u(Kt,1),Tr=Gt[0];if(Tr){var rt=Ft.formats(),lt=this.quill.getFormat(be.index,1);ct=k.default.attributes.diff(rt,lt)||{},xt=Tr.length()}}this.quill.deleteText(be.index,it,U.default.sources.USER),Object.keys(ct).length>0&&this.quill.formatLine(be.index+xt-1,it,ct,U.default.sources.USER)}}function he(be){var He=this.quill.getLines(be),it={};if(He.length>1){var ct=He[0].formats(),xt=He[He.length-1].formats();it=k.default.attributes.diff(xt,ct)||{}}this.quill.deleteText(be,U.default.sources.USER),Object.keys(it).length>0&&this.quill.formatLine(be.index,1,it,U.default.sources.USER),this.quill.setSelection(be.index,U.default.sources.SILENT),this.quill.focus()}function xe(be,He){var it=this;be.length>0&&this.quill.scroll.deleteAt(be.index,be.length);var ct=Object.keys(He.format).reduce(function(xt,Dt){return z.default.query(Dt,z.default.Scope.BLOCK)&&!Array.isArray(He.format[Dt])&&(xt[Dt]=He.format[Dt]),xt},{});this.quill.insertText(be.index,`
`,ct,U.default.sources.USER),this.quill.setSelection(be.index+1,U.default.sources.SILENT),this.quill.focus(),Object.keys(He.format).forEach(function(xt){ct[xt]==null&&(Array.isArray(He.format[xt])||xt!=="link"&&it.quill.format(xt,He.format[xt],U.default.sources.USER))})}function Ee(be){return{key:Be.keys.TAB,shiftKey:!be,format:{"code-block":!0},handler:function(it){var ct=z.default.query("code-block"),xt=it.index,Dt=it.length,Qt=this.quill.scroll.descendant(ct,xt),Ft=u(Qt,2),Kt=Ft[0],Gt=Ft[1];if(Kt!=null){var Tr=this.quill.getIndex(Kt),rt=Kt.newlineIndex(Gt,!0)+1,lt=Kt.newlineIndex(Tr+Gt+Dt),gt=Kt.domNode.textContent.slice(rt,lt).split(`
`);Gt=0,gt.forEach(function(_t,Pt){be?(Kt.insertAt(rt+Gt,ct.TAB),Gt+=ct.TAB.length,Pt===0?xt+=ct.TAB.length:Dt+=ct.TAB.length):_t.startsWith(ct.TAB)&&(Kt.deleteAt(rt+Gt,ct.TAB.length),Gt-=ct.TAB.length,Pt===0?xt-=ct.TAB.length:Dt-=ct.TAB.length),Gt+=_t.length+1}),this.quill.update(U.default.sources.USER),this.quill.setSelection(xt,Dt,U.default.sources.SILENT)}}}}function Ge(be){return{key:be[0].toUpperCase(),shortKey:!0,handler:function(it,ct){this.quill.format(be,!ct.format[be],U.default.sources.USER)}}}function $e(be){if(typeof be=="string"||typeof be=="number")return $e({key:be});if((typeof be>"u"?"undefined":o(be))==="object"&&(be=(0,g.default)(be,!1)),typeof be.key=="string")if(Be.keys[be.key.toUpperCase()]!=null)be.key=Be.keys[be.key.toUpperCase()];else if(be.key.length===1)be.key=be.key.toUpperCase().charCodeAt(0);else return null;return be.shortKey&&(be[Ne]=be.shortKey,delete be.shortKey),be}r.default=Be,r.SHORTKEY=Ne},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function k(R,z){var D=[],U=!0,V=!1,G=void 0;try{for(var H=R[Symbol.iterator](),J;!(U=(J=H.next()).done)&&(D.push(J.value),!(z&&D.length===z));U=!0);}catch(Y){V=!0,G=Y}finally{try{!U&&H.return&&H.return()}finally{if(V)throw G}}return D}return function(R,z){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return k(R,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function k(R,z,D){R===null&&(R=Function.prototype);var U=Object.getOwnPropertyDescriptor(R,z);if(U===void 0){var V=Object.getPrototypeOf(R);return V===null?void 0:k(V,z,D)}else{if("value"in U)return U.value;var G=U.get;return G===void 0?void 0:G.call(D)}},l=function(){function k(R,z){for(var D=0;D<z.length;D++){var U=z[D];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(R,U.key,U)}}return function(R,z,D){return z&&k(R.prototype,z),D&&k(R,D),R}}(),p=i(0),g=_(p),x=i(7),y=_(x);function _(k){return k&&k.__esModule?k:{default:k}}function T(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")}function P(k,R){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:k}function A(k,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(k,R):k.__proto__=R)}var M=function(k){A(R,k),l(R,null,[{key:"value",value:function(){}}]);function R(z,D){T(this,R);var U=P(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,z));return U.selection=D,U.textNode=document.createTextNode(R.CONTENTS),U.domNode.appendChild(U.textNode),U._length=0,U}return l(R,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(D,U){if(this._length!==0)return u(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"format",this).call(this,D,U);for(var V=this,G=0;V!=null&&V.statics.scope!==g.default.Scope.BLOCK_BLOT;)G+=V.offset(V.parent),V=V.parent;V!=null&&(this._length=R.CONTENTS.length,V.optimize(),V.formatAt(G,R.CONTENTS.length,D,U),this._length=0)}},{key:"index",value:function(D,U){return D===this.textNode?0:u(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"index",this).call(this,D,U)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){u(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var D=this.textNode,U=this.selection.getNativeRange(),V=void 0,G=void 0,H=void 0;if(U!=null&&U.start.node===D&&U.end.node===D){var J=[D,U.start.offset,U.end.offset];V=J[0],G=J[1],H=J[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==R.CONTENTS){var Y=this.textNode.data.split(R.CONTENTS).join("");this.next instanceof y.default?(V=this.next.domNode,this.next.insertAt(0,Y),this.textNode.data=R.CONTENTS):(this.textNode.data=Y,this.parent.insertBefore(g.default.create(this.textNode),this),this.textNode=document.createTextNode(R.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),G!=null){var X=[G,H].map(function(ce){return Math.max(0,Math.min(V.data.length,ce-1))}),ee=o(X,2);return G=ee[0],H=ee[1],{startNode:V,startOffset:G,endNode:V,endOffset:H}}}}},{key:"update",value:function(D,U){var V=this;if(D.some(function(H){return H.type==="characterData"&&H.target===V.textNode})){var G=this.restore();G&&(U.range=G)}}},{key:"value",value:function(){return""}}]),R}(g.default.Embed);M.blotName="cursor",M.className="ql-cursor",M.tagName="span",M.CONTENTS="\uFEFF",r.default=M},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),u=g(o),l=i(4),p=g(l);function g(P){return P&&P.__esModule?P:{default:P}}function x(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function y(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:P}function _(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}var T=function(P){_(A,P);function A(){return x(this,A),y(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return A}(u.default.Container);T.allowedChildren=[p.default,l.BlockEmbed,T],r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var o=function(){function M(k,R){for(var z=0;z<R.length;z++){var D=R[z];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,R,z){return R&&M(k.prototype,R),z&&M(k,z),k}}(),u=function M(k,R,z){k===null&&(k=Function.prototype);var D=Object.getOwnPropertyDescriptor(k,R);if(D===void 0){var U=Object.getPrototypeOf(k);return U===null?void 0:M(U,R,z)}else{if("value"in D)return D.value;var V=D.get;return V===void 0?void 0:V.call(z)}},l=i(0),p=g(l);function g(M){return M&&M.__esModule?M:{default:M}}function x(M,k){if(!(M instanceof k))throw new TypeError("Cannot call a class as a function")}function y(M,k){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:M}function _(M,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);M.prototype=Object.create(k&&k.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(M,k):M.__proto__=k)}var T=function(M){_(k,M);function k(){return x(this,k),y(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"value",value:function(z){var D=u(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"value",this).call(this,z);return D.startsWith("rgb(")?(D=D.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+D.split(",").map(function(U){return("00"+parseInt(U).toString(16)).slice(-2)}).join("")):D}}]),k}(p.default.Attributor.Style),P=new p.default.Attributor.Class("color","ql-color",{scope:p.default.Scope.INLINE}),A=new T("color","color",{scope:p.default.Scope.INLINE});r.ColorAttributor=T,r.ColorClass=P,r.ColorStyle=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var o=function(){function A(M,k){for(var R=0;R<k.length;R++){var z=k[R];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(M,z.key,z)}}return function(M,k,R){return k&&A(M.prototype,k),R&&A(M,R),M}}(),u=function A(M,k,R){M===null&&(M=Function.prototype);var z=Object.getOwnPropertyDescriptor(M,k);if(z===void 0){var D=Object.getPrototypeOf(M);return D===null?void 0:A(D,k,R)}else{if("value"in z)return z.value;var U=z.get;return U===void 0?void 0:U.call(R)}},l=i(6),p=g(l);function g(A){return A&&A.__esModule?A:{default:A}}function x(A,M){if(!(A instanceof M))throw new TypeError("Cannot call a class as a function")}function y(A,M){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:A}function _(A,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);A.prototype=Object.create(M&&M.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(A,M):A.__proto__=M)}var T=function(A){_(M,A);function M(){return x(this,M),y(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return o(M,[{key:"format",value:function(R,z){if(R!==this.statics.blotName||!z)return u(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"format",this).call(this,R,z);z=this.constructor.sanitize(z),this.domNode.setAttribute("href",z)}}],[{key:"create",value:function(R){var z=u(M.__proto__||Object.getPrototypeOf(M),"create",this).call(this,R);return R=this.sanitize(R),z.setAttribute("href",R),z.setAttribute("rel","noopener noreferrer"),z.setAttribute("target","_blank"),z}},{key:"formats",value:function(R){return R.getAttribute("href")}},{key:"sanitize",value:function(R){return P(R,this.PROTOCOL_WHITELIST)?R:this.SANITIZED_URL}}]),M}(p.default);T.blotName="link",T.tagName="A",T.SANITIZED_URL="about:blank",T.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function P(A,M){var k=document.createElement("a");k.href=A;var R=k.href.slice(0,k.href.indexOf(":"));return M.indexOf(R)>-1}r.default=T,r.sanitize=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},u=function(){function M(k,R){for(var z=0;z<R.length;z++){var D=R[z];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,R,z){return R&&M(k.prototype,R),z&&M(k,z),k}}(),l=i(23),p=y(l),g=i(107),x=y(g);function y(M){return M&&M.__esModule?M:{default:M}}function _(M,k){if(!(M instanceof k))throw new TypeError("Cannot call a class as a function")}var T=0;function P(M,k){M.setAttribute(k,M.getAttribute(k)!=="true")}var A=function(){function M(k){var R=this;_(this,M),this.select=k,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){R.togglePicker()}),this.label.addEventListener("keydown",function(z){switch(z.keyCode){case p.default.keys.ENTER:R.togglePicker();break;case p.default.keys.ESCAPE:R.escape(),z.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return u(M,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),P(this.label,"aria-expanded"),P(this.options,"aria-hidden")}},{key:"buildItem",value:function(R){var z=this,D=document.createElement("span");return D.tabIndex="0",D.setAttribute("role","button"),D.classList.add("ql-picker-item"),R.hasAttribute("value")&&D.setAttribute("data-value",R.getAttribute("value")),R.textContent&&D.setAttribute("data-label",R.textContent),D.addEventListener("click",function(){z.selectItem(D,!0)}),D.addEventListener("keydown",function(U){switch(U.keyCode){case p.default.keys.ENTER:z.selectItem(D,!0),U.preventDefault();break;case p.default.keys.ESCAPE:z.escape(),U.preventDefault();break}}),D}},{key:"buildLabel",value:function(){var R=document.createElement("span");return R.classList.add("ql-picker-label"),R.innerHTML=x.default,R.tabIndex="0",R.setAttribute("role","button"),R.setAttribute("aria-expanded","false"),this.container.appendChild(R),R}},{key:"buildOptions",value:function(){var R=this,z=document.createElement("span");z.classList.add("ql-picker-options"),z.setAttribute("aria-hidden","true"),z.tabIndex="-1",z.id="ql-picker-options-"+T,T+=1,this.label.setAttribute("aria-controls",z.id),this.options=z,[].slice.call(this.select.options).forEach(function(D){var U=R.buildItem(D);z.appendChild(U),D.selected===!0&&R.selectItem(U)}),this.container.appendChild(z)}},{key:"buildPicker",value:function(){var R=this;[].slice.call(this.select.attributes).forEach(function(z){R.container.setAttribute(z.name,z.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var R=this;this.close(),setTimeout(function(){return R.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(R){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,D=this.container.querySelector(".ql-selected");if(R!==D&&(D!=null&&D.classList.remove("ql-selected"),R!=null&&(R.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(R.parentNode.children,R),R.hasAttribute("data-value")?this.label.setAttribute("data-value",R.getAttribute("data-value")):this.label.removeAttribute("data-value"),R.hasAttribute("data-label")?this.label.setAttribute("data-label",R.getAttribute("data-label")):this.label.removeAttribute("data-label"),z))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var U=document.createEvent("Event");U.initEvent("change",!0,!0),this.select.dispatchEvent(U)}this.close()}}},{key:"update",value:function(){var R=void 0;if(this.select.selectedIndex>-1){var z=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];R=this.select.options[this.select.selectedIndex],this.selectItem(z)}else this.selectItem(null);var D=R!=null&&R!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",D)}}]),M}();r.default=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),u=we(o),l=i(5),p=we(l),g=i(4),x=we(g),y=i(16),_=we(y),T=i(25),P=we(T),A=i(24),M=we(A),k=i(35),R=we(k),z=i(6),D=we(z),U=i(22),V=we(U),G=i(7),H=we(G),J=i(55),Y=we(J),X=i(42),ee=we(X),ce=i(23),oe=we(ce);function we(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}p.default.register({"blots/block":x.default,"blots/block/embed":g.BlockEmbed,"blots/break":_.default,"blots/container":P.default,"blots/cursor":M.default,"blots/embed":R.default,"blots/inline":D.default,"blots/scroll":V.default,"blots/text":H.default,"modules/clipboard":Y.default,"modules/history":ee.default,"modules/keyboard":oe.default}),u.default.register(x.default,_.default,M.default,D.default,V.default,H.default),r.default=p.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),u=function(){function l(p){this.domNode=p,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(p){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var g;return Array.isArray(this.tagName)?(typeof p=="string"&&(p=p.toUpperCase(),parseInt(p).toString()===p&&(p=parseInt(p))),typeof p=="number"?g=document.createElement(this.tagName[p-1]):this.tagName.indexOf(p)>-1?g=document.createElement(p):g=document.createElement(this.tagName[0])):g=document.createElement(this.tagName),this.className&&g.classList.add(this.className),g},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var p=this.domNode.cloneNode(!1);return o.create(p)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},l.prototype.deleteAt=function(p,g){var x=this.isolate(p,g);x.remove()},l.prototype.formatAt=function(p,g,x,y){var _=this.isolate(p,g);if(o.query(x,o.Scope.BLOT)!=null&&y)_.wrap(x,y);else if(o.query(x,o.Scope.ATTRIBUTE)!=null){var T=o.create(this.statics.scope);_.wrap(T),T.format(x,y)}},l.prototype.insertAt=function(p,g,x){var y=x==null?o.create("text",g):o.create(g,x),_=this.split(p);this.parent.insertBefore(y,_)},l.prototype.insertInto=function(p,g){g===void 0&&(g=null),this.parent!=null&&this.parent.children.remove(this);var x=null;p.children.insertBefore(this,g),g!=null&&(x=g.domNode),(this.domNode.parentNode!=p.domNode||this.domNode.nextSibling!=x)&&p.domNode.insertBefore(this.domNode,x),this.parent=p,this.attach()},l.prototype.isolate=function(p,g){var x=this.split(p);return x.split(g),x},l.prototype.length=function(){return 1},l.prototype.offset=function(p){return p===void 0&&(p=this.parent),this.parent==null||this==p?0:this.parent.children.offset(this)+this.parent.offset(p)},l.prototype.optimize=function(p){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(p){p.parent!=null&&(p.parent.insertBefore(this,p.next),p.remove())},l.prototype.replaceWith=function(p,g){var x=typeof p=="string"?o.create(p,g):p;return x.replace(this),x},l.prototype.split=function(p,g){return p===0?this:this.next},l.prototype.update=function(p,g){},l.prototype.wrap=function(p,g){var x=typeof p=="string"?o.create(p,g):p;return this.parent!=null&&this.parent.insertBefore(x,this.next),x.appendChild(this),x},l.blotName="abstract",l}();r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),u=i(32),l=i(33),p=i(1),g=function(){function x(y){this.attributes={},this.domNode=y,this.build()}return x.prototype.attribute=function(y,_){_?y.add(this.domNode,_)&&(y.value(this.domNode)!=null?this.attributes[y.attrName]=y:delete this.attributes[y.attrName]):(y.remove(this.domNode),delete this.attributes[y.attrName])},x.prototype.build=function(){var y=this;this.attributes={};var _=o.default.keys(this.domNode),T=u.default.keys(this.domNode),P=l.default.keys(this.domNode);_.concat(T).concat(P).forEach(function(A){var M=p.query(A,p.Scope.ATTRIBUTE);M instanceof o.default&&(y.attributes[M.attrName]=M)})},x.prototype.copy=function(y){var _=this;Object.keys(this.attributes).forEach(function(T){var P=_.attributes[T].value(_.domNode);y.format(T,P)})},x.prototype.move=function(y){var _=this;this.copy(y),Object.keys(this.attributes).forEach(function(T){_.attributes[T].remove(_.domNode)}),this.attributes={}},x.prototype.values=function(){var y=this;return Object.keys(this.attributes).reduce(function(_,T){return _[T]=y.attributes[T].value(y.domNode),_},{})},x}();r.default=g},function(n,r,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var _ in y)y.hasOwnProperty(_)&&(x[_]=y[_])};return function(x,y){g(x,y);function _(){this.constructor=x}x.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(12);function l(g,x){var y=g.getAttribute("class")||"";return y.split(/\s+/).filter(function(_){return _.indexOf(x+"-")===0})}var p=function(g){o(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return x.keys=function(y){return(y.getAttribute("class")||"").split(/\s+/).map(function(_){return _.split("-").slice(0,-1).join("-")})},x.prototype.add=function(y,_){return this.canAdd(y,_)?(this.remove(y),y.classList.add(this.keyName+"-"+_),!0):!1},x.prototype.remove=function(y){var _=l(y,this.keyName);_.forEach(function(T){y.classList.remove(T)}),y.classList.length===0&&y.removeAttribute("class")},x.prototype.value=function(y){var _=l(y,this.keyName)[0]||"",T=_.slice(this.keyName.length+1);return this.canAdd(y,T)?T:""},x}(u.default);r.default=p},function(n,r,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var _ in y)y.hasOwnProperty(_)&&(x[_]=y[_])};return function(x,y){g(x,y);function _(){this.constructor=x}x.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(12);function l(g){var x=g.split("-"),y=x.slice(1).map(function(_){return _[0].toUpperCase()+_.slice(1)}).join("");return x[0]+y}var p=function(g){o(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return x.keys=function(y){return(y.getAttribute("style")||"").split(";").map(function(_){var T=_.split(":");return T[0].trim()})},x.prototype.add=function(y,_){return this.canAdd(y,_)?(y.style[l(this.keyName)]=_,!0):!1},x.prototype.remove=function(y){y.style[l(this.keyName)]="",y.getAttribute("style")||y.removeAttribute("style")},x.prototype.value=function(y){var _=y.style[l(this.keyName)];return this.canAdd(y,_)?_:""},x}(u.default);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function p(g,x){for(var y=0;y<x.length;y++){var _=x[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,x,y){return x&&p(g.prototype,x),y&&p(g,y),g}}();function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}var l=function(){function p(g,x){u(this,p),this.quill=g,this.options=x,this.modules={}}return o(p,[{key:"init",value:function(){var x=this;Object.keys(this.options.modules).forEach(function(y){x.modules[y]==null&&x.addModule(y)})}},{key:"addModule",value:function(x){var y=this.quill.constructor.import("modules/"+x);return this.modules[x]=new y(this.quill,this.options.modules[x]||{}),this.modules[x]}}]),p}();l.DEFAULTS={modules:{}},l.themes={default:l},r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function k(R,z){for(var D=0;D<z.length;D++){var U=z[D];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(R,U.key,U)}}return function(R,z,D){return z&&k(R.prototype,z),D&&k(R,D),R}}(),u=function k(R,z,D){R===null&&(R=Function.prototype);var U=Object.getOwnPropertyDescriptor(R,z);if(U===void 0){var V=Object.getPrototypeOf(R);return V===null?void 0:k(V,z,D)}else{if("value"in U)return U.value;var G=U.get;return G===void 0?void 0:G.call(D)}},l=i(0),p=y(l),g=i(7),x=y(g);function y(k){return k&&k.__esModule?k:{default:k}}function _(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")}function T(k,R){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:k}function P(k,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(k,R):k.__proto__=R)}var A="\uFEFF",M=function(k){P(R,k);function R(z){_(this,R);var D=T(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,z));return D.contentNode=document.createElement("span"),D.contentNode.setAttribute("contenteditable",!1),[].slice.call(D.domNode.childNodes).forEach(function(U){D.contentNode.appendChild(U)}),D.leftGuard=document.createTextNode(A),D.rightGuard=document.createTextNode(A),D.domNode.appendChild(D.leftGuard),D.domNode.appendChild(D.contentNode),D.domNode.appendChild(D.rightGuard),D}return o(R,[{key:"index",value:function(D,U){return D===this.leftGuard?0:D===this.rightGuard?1:u(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"index",this).call(this,D,U)}},{key:"restore",value:function(D){var U=void 0,V=void 0,G=D.data.split(A).join("");if(D===this.leftGuard)if(this.prev instanceof x.default){var H=this.prev.length();this.prev.insertAt(H,G),U={startNode:this.prev.domNode,startOffset:H+G.length}}else V=document.createTextNode(G),this.parent.insertBefore(p.default.create(V),this),U={startNode:V,startOffset:G.length};else D===this.rightGuard&&(this.next instanceof x.default?(this.next.insertAt(0,G),U={startNode:this.next.domNode,startOffset:G.length}):(V=document.createTextNode(G),this.parent.insertBefore(p.default.create(V),this.next),U={startNode:V,startOffset:G.length}));return D.data=A,U}},{key:"update",value:function(D,U){var V=this;D.forEach(function(G){if(G.type==="characterData"&&(G.target===V.leftGuard||G.target===V.rightGuard)){var H=V.restore(G.target);H&&(U.range=H)}})}}]),R}(p.default.Embed);r.default=M},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var o=i(0),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}var p={scope:u.default.Scope.BLOCK,whitelist:["right","center","justify"]},g=new u.default.Attributor.Attribute("align","align",p),x=new u.default.Attributor.Class("align","ql-align",p),y=new u.default.Attributor.Style("align","text-align",p);r.AlignAttribute=g,r.AlignClass=x,r.AlignStyle=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var o=i(0),u=p(o),l=i(26);function p(y){return y&&y.__esModule?y:{default:y}}var g=new u.default.Attributor.Class("background","ql-bg",{scope:u.default.Scope.INLINE}),x=new l.ColorAttributor("background","background-color",{scope:u.default.Scope.INLINE});r.BackgroundClass=g,r.BackgroundStyle=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var o=i(0),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}var p={scope:u.default.Scope.BLOCK,whitelist:["rtl"]},g=new u.default.Attributor.Attribute("direction","dir",p),x=new u.default.Attributor.Class("direction","ql-direction",p),y=new u.default.Attributor.Style("direction","direction",p);r.DirectionAttribute=g,r.DirectionClass=x,r.DirectionStyle=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var o=function(){function k(R,z){for(var D=0;D<z.length;D++){var U=z[D];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(R,U.key,U)}}return function(R,z,D){return z&&k(R.prototype,z),D&&k(R,D),R}}(),u=function k(R,z,D){R===null&&(R=Function.prototype);var U=Object.getOwnPropertyDescriptor(R,z);if(U===void 0){var V=Object.getPrototypeOf(R);return V===null?void 0:k(V,z,D)}else{if("value"in U)return U.value;var G=U.get;return G===void 0?void 0:G.call(D)}},l=i(0),p=g(l);function g(k){return k&&k.__esModule?k:{default:k}}function x(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")}function y(k,R){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:k}function _(k,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(k,R):k.__proto__=R)}var T={scope:p.default.Scope.INLINE,whitelist:["serif","monospace"]},P=new p.default.Attributor.Class("font","ql-font",T),A=function(k){_(R,k);function R(){return x(this,R),y(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return o(R,[{key:"value",value:function(D){return u(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"value",this).call(this,D).replace(/["']/g,"")}}]),R}(p.default.Attributor.Style),M=new A("font","font-family",T);r.FontStyle=M,r.FontClass=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var o=i(0),u=l(o);function l(x){return x&&x.__esModule?x:{default:x}}var p=new u.default.Attributor.Class("size","ql-size",{scope:u.default.Scope.INLINE,whitelist:["small","large","huge"]}),g=new u.default.Attributor.Style("size","font-size",{scope:u.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=p,r.SizeStyle=g},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var o=function(){function z(D,U){for(var V=0;V<U.length;V++){var G=U[V];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(D,G.key,G)}}return function(D,U,V){return U&&z(D.prototype,U),V&&z(D,V),D}}(),u=i(0),l=_(u),p=i(5),g=_(p),x=i(9),y=_(x);function _(z){return z&&z.__esModule?z:{default:z}}function T(z,D){if(!(z instanceof D))throw new TypeError("Cannot call a class as a function")}function P(z,D){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:z}function A(z,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);z.prototype=Object.create(D&&D.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(z,D):z.__proto__=D)}var M=function(z){A(D,z);function D(U,V){T(this,D);var G=P(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,U,V));return G.lastRecorded=0,G.ignoreChange=!1,G.clear(),G.quill.on(g.default.events.EDITOR_CHANGE,function(H,J,Y,X){H!==g.default.events.TEXT_CHANGE||G.ignoreChange||(!G.options.userOnly||X===g.default.sources.USER?G.record(J,Y):G.transform(J))}),G.quill.keyboard.addBinding({key:"Z",shortKey:!0},G.undo.bind(G)),G.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},G.redo.bind(G)),/Win/i.test(navigator.platform)&&G.quill.keyboard.addBinding({key:"Y",shortKey:!0},G.redo.bind(G)),G}return o(D,[{key:"change",value:function(V,G){if(this.stack[V].length!==0){var H=this.stack[V].pop();this.stack[G].push(H),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(H[V],g.default.sources.USER),this.ignoreChange=!1;var J=R(H[V]);this.quill.setSelection(J)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(V,G){if(V.ops.length!==0){this.stack.redo=[];var H=this.quill.getContents().diff(G),J=Date.now();if(this.lastRecorded+this.options.delay>J&&this.stack.undo.length>0){var Y=this.stack.undo.pop();H=H.compose(Y.undo),V=Y.redo.compose(V)}else this.lastRecorded=J;this.stack.undo.push({redo:V,undo:H}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(V){this.stack.undo.forEach(function(G){G.undo=V.transform(G.undo,!0),G.redo=V.transform(G.redo,!0)}),this.stack.redo.forEach(function(G){G.undo=V.transform(G.undo,!0),G.redo=V.transform(G.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),D}(y.default);M.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function k(z){var D=z.ops[z.ops.length-1];return D==null?!1:D.insert!=null?typeof D.insert=="string"&&D.insert.endsWith(`
`):D.attributes!=null?Object.keys(D.attributes).some(function(U){return l.default.query(U,l.default.Scope.BLOCK)!=null}):!1}function R(z){var D=z.reduce(function(V,G){return V+=G.delete||0,V},0),U=z.length()-D;return k(z)&&(U-=1),U}r.default=M,r.getLastChangeIndex=R},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var o=function(){function xe(Ee,Ge){for(var $e=0;$e<Ge.length;$e++){var be=Ge[$e];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(Ee,be.key,be)}}return function(Ee,Ge,$e){return Ge&&xe(Ee.prototype,Ge),$e&&xe(Ee,$e),Ee}}(),u=function xe(Ee,Ge,$e){Ee===null&&(Ee=Function.prototype);var be=Object.getOwnPropertyDescriptor(Ee,Ge);if(be===void 0){var He=Object.getPrototypeOf(Ee);return He===null?void 0:xe(He,Ge,$e)}else{if("value"in be)return be.value;var it=be.get;return it===void 0?void 0:it.call($e)}},l=i(3),p=J(l),g=i(2),x=J(g),y=i(8),_=J(y),T=i(23),P=J(T),A=i(34),M=J(A),k=i(59),R=J(k),z=i(60),D=J(z),U=i(28),V=J(U),G=i(61),H=J(G);function J(xe){return xe&&xe.__esModule?xe:{default:xe}}function Y(xe,Ee){if(!(xe instanceof Ee))throw new TypeError("Cannot call a class as a function")}function X(xe,Ee){if(!xe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee&&(typeof Ee=="object"||typeof Ee=="function")?Ee:xe}function ee(xe,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);xe.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:xe,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(xe,Ee):xe.__proto__=Ee)}var ce=[!1,"center","right","justify"],oe=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],we=[!1,"serif","monospace"],Ne=["1","2","3",!1],Be=["small",!1,"large","huge"],De=function(xe){ee(Ee,xe);function Ee(Ge,$e){Y(this,Ee);var be=X(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this,Ge,$e)),He=function it(ct){if(!document.body.contains(Ge.root))return document.body.removeEventListener("click",it);be.tooltip!=null&&!be.tooltip.root.contains(ct.target)&&document.activeElement!==be.tooltip.textbox&&!be.quill.hasFocus()&&be.tooltip.hide(),be.pickers!=null&&be.pickers.forEach(function(xt){xt.container.contains(ct.target)||xt.close()})};return Ge.emitter.listenDOM("click",document.body,He),be}return o(Ee,[{key:"addModule",value:function($e){var be=u(Ee.prototype.__proto__||Object.getPrototypeOf(Ee.prototype),"addModule",this).call(this,$e);return $e==="toolbar"&&this.extendToolbar(be),be}},{key:"buildButtons",value:function($e,be){$e.forEach(function(He){var it=He.getAttribute("class")||"";it.split(/\s+/).forEach(function(ct){if(ct.startsWith("ql-")&&(ct=ct.slice(3),be[ct]!=null))if(ct==="direction")He.innerHTML=be[ct][""]+be[ct].rtl;else if(typeof be[ct]=="string")He.innerHTML=be[ct];else{var xt=He.value||"";xt!=null&&be[ct][xt]&&(He.innerHTML=be[ct][xt])}})})}},{key:"buildPickers",value:function($e,be){var He=this;this.pickers=$e.map(function(ct){if(ct.classList.contains("ql-align"))return ct.querySelector("option")==null&&he(ct,ce),new D.default(ct,be.align);if(ct.classList.contains("ql-background")||ct.classList.contains("ql-color")){var xt=ct.classList.contains("ql-background")?"background":"color";return ct.querySelector("option")==null&&he(ct,oe,xt==="background"?"#ffffff":"#000000"),new R.default(ct,be[xt])}else return ct.querySelector("option")==null&&(ct.classList.contains("ql-font")?he(ct,we):ct.classList.contains("ql-header")?he(ct,Ne):ct.classList.contains("ql-size")&&he(ct,Be)),new V.default(ct)});var it=function(){He.pickers.forEach(function(xt){xt.update()})};this.quill.on(_.default.events.EDITOR_CHANGE,it)}}]),Ee}(M.default);De.DEFAULTS=(0,p.default)(!0,{},M.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var Ee=this,Ge=this.container.querySelector("input.ql-image[type=file]");Ge==null&&(Ge=document.createElement("input"),Ge.setAttribute("type","file"),Ge.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Ge.classList.add("ql-image"),Ge.addEventListener("change",function(){if(Ge.files!=null&&Ge.files[0]!=null){var $e=new FileReader;$e.onload=function(be){var He=Ee.quill.getSelection(!0);Ee.quill.updateContents(new x.default().retain(He.index).delete(He.length).insert({image:be.target.result}),_.default.sources.USER),Ee.quill.setSelection(He.index+1,_.default.sources.SILENT),Ge.value=""},$e.readAsDataURL(Ge.files[0])}}),this.container.appendChild(Ge)),Ge.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Ae=function(xe){ee(Ee,xe);function Ee(Ge,$e){Y(this,Ee);var be=X(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this,Ge,$e));return be.textbox=be.root.querySelector('input[type="text"]'),be.listen(),be}return o(Ee,[{key:"listen",value:function(){var $e=this;this.textbox.addEventListener("keydown",function(be){P.default.match(be,"enter")?($e.save(),be.preventDefault()):P.default.match(be,"escape")&&($e.cancel(),be.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),be!=null?this.textbox.value=be:$e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+$e)||""),this.root.setAttribute("data-mode",$e)}},{key:"restoreFocus",value:function(){var $e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=$e}},{key:"save",value:function(){var $e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var be=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",$e,_.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",$e,_.default.sources.USER)),this.quill.root.scrollTop=be;break}case"video":$e=ve($e);case"formula":{if(!$e)break;var He=this.quill.getSelection(!0);if(He!=null){var it=He.index+He.length;this.quill.insertEmbed(it,this.root.getAttribute("data-mode"),$e,_.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(it+1," ",_.default.sources.USER),this.quill.setSelection(it+2,_.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),Ee}(H.default);function ve(xe){var Ee=xe.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||xe.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return Ee?(Ee[1]||"https")+"://www.youtube.com/embed/"+Ee[2]+"?showinfo=0":(Ee=xe.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(Ee[1]||"https")+"://player.vimeo.com/video/"+Ee[2]+"/":xe}function he(xe,Ee){var Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;Ee.forEach(function($e){var be=document.createElement("option");$e===Ge?be.setAttribute("selected","selected"):be.setAttribute("value",$e),xe.appendChild(be)})}r.BaseTooltip=Ae,r.default=De},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function u(){this.head=this.tail=null,this.length=0}return u.prototype.append=function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},u.prototype.contains=function(l){for(var p,g=this.iterator();p=g();)if(p===l)return!0;return!1},u.prototype.insertBefore=function(l,p){l&&(l.next=p,p!=null?(l.prev=p.prev,p.prev!=null&&(p.prev.next=l),p.prev=l,p===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},u.prototype.offset=function(l){for(var p=0,g=this.head;g!=null;){if(g===l)return p;p+=g.length(),g=g.next}return-1},u.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},u.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var p=l;return l!=null&&(l=l.next),p}},u.prototype.find=function(l,p){p===void 0&&(p=!1);for(var g,x=this.iterator();g=x();){var y=g.length();if(l<y||p&&l===y&&(g.next==null||g.next.length()!==0))return[g,l];l-=y}return[null,0]},u.prototype.forEach=function(l){for(var p,g=this.iterator();p=g();)l(p)},u.prototype.forEachAt=function(l,p,g){if(!(p<=0))for(var x=this.find(l),y=x[0],_=x[1],T,P=l-_,A=this.iterator(y);(T=A())&&P<l+p;){var M=T.length();l>P?g(T,l-P,Math.min(p,P+M-l)):g(T,0,Math.min(M,l+p-P)),P+=M}},u.prototype.map=function(l){return this.reduce(function(p,g){return p.push(l(g)),p},[])},u.prototype.reduce=function(l,p){for(var g,x=this.iterator();g=x();)p=l(p,g);return p},u}();r.default=o},function(n,r,i){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,T){_.__proto__=T}||function(_,T){for(var P in T)T.hasOwnProperty(P)&&(_[P]=T[P])};return function(_,T){y(_,T);function P(){this.constructor=_}_.prototype=T===null?Object.create(T):(P.prototype=T.prototype,new P)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(17),l=i(1),p={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},g=100,x=function(y){o(_,y);function _(T){var P=y.call(this,T)||this;return P.scroll=P,P.observer=new MutationObserver(function(A){P.update(A)}),P.observer.observe(P.domNode,p),P.attach(),P}return _.prototype.detach=function(){y.prototype.detach.call(this),this.observer.disconnect()},_.prototype.deleteAt=function(T,P){this.update(),T===0&&P===this.length()?this.children.forEach(function(A){A.remove()}):y.prototype.deleteAt.call(this,T,P)},_.prototype.formatAt=function(T,P,A,M){this.update(),y.prototype.formatAt.call(this,T,P,A,M)},_.prototype.insertAt=function(T,P,A){this.update(),y.prototype.insertAt.call(this,T,P,A)},_.prototype.optimize=function(T,P){var A=this;T===void 0&&(T=[]),P===void 0&&(P={}),y.prototype.optimize.call(this,P);for(var M=[].slice.call(this.observer.takeRecords());M.length>0;)T.push(M.pop());for(var k=function(U,V){V===void 0&&(V=!0),!(U==null||U===A)&&U.domNode.parentNode!=null&&(U.domNode[l.DATA_KEY].mutations==null&&(U.domNode[l.DATA_KEY].mutations=[]),V&&k(U.parent))},R=function(U){U.domNode[l.DATA_KEY]==null||U.domNode[l.DATA_KEY].mutations==null||(U instanceof u.default&&U.children.forEach(R),U.optimize(P))},z=T,D=0;z.length>0;D+=1){if(D>=g)throw new Error("[Parchment] Maximum optimize iterations reached");for(z.forEach(function(U){var V=l.find(U.target,!0);V!=null&&(V.domNode===U.target&&(U.type==="childList"?(k(l.find(U.previousSibling,!1)),[].forEach.call(U.addedNodes,function(G){var H=l.find(G,!1);k(H,!1),H instanceof u.default&&H.children.forEach(function(J){k(J,!1)})})):U.type==="attributes"&&k(V.prev)),k(V))}),this.children.forEach(R),z=[].slice.call(this.observer.takeRecords()),M=z.slice();M.length>0;)T.push(M.pop())}},_.prototype.update=function(T,P){var A=this;P===void 0&&(P={}),T=T||this.observer.takeRecords(),T.map(function(M){var k=l.find(M.target,!0);return k==null?null:k.domNode[l.DATA_KEY].mutations==null?(k.domNode[l.DATA_KEY].mutations=[M],k):(k.domNode[l.DATA_KEY].mutations.push(M),null)}).forEach(function(M){M==null||M===A||M.domNode[l.DATA_KEY]==null||M.update(M.domNode[l.DATA_KEY].mutations||[],P)}),this.domNode[l.DATA_KEY].mutations!=null&&y.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,P),this.optimize(T,P)},_.blotName="scroll",_.defaultChild="block",_.scope=l.Scope.BLOCK_BLOT,_.tagName="DIV",_}(u.default);r.default=x},function(n,r,i){var o=this&&this.__extends||function(){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var T in _)_.hasOwnProperty(T)&&(y[T]=_[T])};return function(y,_){x(y,_);function T(){this.constructor=y}y.prototype=_===null?Object.create(_):(T.prototype=_.prototype,new T)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(18),l=i(1);function p(x,y){if(Object.keys(x).length!==Object.keys(y).length)return!1;for(var _ in x)if(x[_]!==y[_])return!1;return!0}var g=function(x){o(y,x);function y(){return x!==null&&x.apply(this,arguments)||this}return y.formats=function(_){if(_.tagName!==y.tagName)return x.formats.call(this,_)},y.prototype.format=function(_,T){var P=this;_===this.statics.blotName&&!T?(this.children.forEach(function(A){A instanceof u.default||(A=A.wrap(y.blotName,!0)),P.attributes.copy(A)}),this.unwrap()):x.prototype.format.call(this,_,T)},y.prototype.formatAt=function(_,T,P,A){if(this.formats()[P]!=null||l.query(P,l.Scope.ATTRIBUTE)){var M=this.isolate(_,T);M.format(P,A)}else x.prototype.formatAt.call(this,_,T,P,A)},y.prototype.optimize=function(_){x.prototype.optimize.call(this,_);var T=this.formats();if(Object.keys(T).length===0)return this.unwrap();var P=this.next;P instanceof y&&P.prev===this&&p(T,P.formats())&&(P.moveChildren(this),P.remove())},y.blotName="inline",y.scope=l.Scope.INLINE_BLOT,y.tagName="SPAN",y}(u.default);r.default=g},function(n,r,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var _ in y)y.hasOwnProperty(_)&&(x[_]=y[_])};return function(x,y){g(x,y);function _(){this.constructor=x}x.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(18),l=i(1),p=function(g){o(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return x.formats=function(y){var _=l.query(x.blotName).tagName;if(y.tagName!==_)return g.formats.call(this,y)},x.prototype.format=function(y,_){l.query(y,l.Scope.BLOCK)!=null&&(y===this.statics.blotName&&!_?this.replaceWith(x.blotName):g.prototype.format.call(this,y,_))},x.prototype.formatAt=function(y,_,T,P){l.query(T,l.Scope.BLOCK)!=null?this.format(T,P):g.prototype.formatAt.call(this,y,_,T,P)},x.prototype.insertAt=function(y,_,T){if(T==null||l.query(_,l.Scope.INLINE)!=null)g.prototype.insertAt.call(this,y,_,T);else{var P=this.split(y),A=l.create(_,T);P.parent.insertBefore(A,P)}},x.prototype.update=function(y,_){navigator.userAgent.match(/Trident/)?this.build():g.prototype.update.call(this,y,_)},x.blotName="block",x.scope=l.Scope.BLOCK_BLOT,x.tagName="P",x}(u.default);r.default=p},function(n,r,i){var o=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var y in x)x.hasOwnProperty(y)&&(g[y]=x[y])};return function(g,x){p(g,x);function y(){this.constructor=g}g.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(19),l=function(p){o(g,p);function g(){return p!==null&&p.apply(this,arguments)||this}return g.formats=function(x){},g.prototype.format=function(x,y){p.prototype.formatAt.call(this,0,this.length(),x,y)},g.prototype.formatAt=function(x,y,_,T){x===0&&y===this.length()?this.format(_,T):p.prototype.formatAt.call(this,x,y,_,T)},g.prototype.formats=function(){return this.statics.formats(this.domNode)},g}(u.default);r.default=l},function(n,r,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var _ in y)y.hasOwnProperty(_)&&(x[_]=y[_])};return function(x,y){g(x,y);function _(){this.constructor=x}x.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=i(19),l=i(1),p=function(g){o(x,g);function x(y){var _=g.call(this,y)||this;return _.text=_.statics.value(_.domNode),_}return x.create=function(y){return document.createTextNode(y)},x.value=function(y){var _=y.data;return _.normalize&&(_=_.normalize()),_},x.prototype.deleteAt=function(y,_){this.domNode.data=this.text=this.text.slice(0,y)+this.text.slice(y+_)},x.prototype.index=function(y,_){return this.domNode===y?_:-1},x.prototype.insertAt=function(y,_,T){T==null?(this.text=this.text.slice(0,y)+_+this.text.slice(y),this.domNode.data=this.text):g.prototype.insertAt.call(this,y,_,T)},x.prototype.length=function(){return this.text.length},x.prototype.optimize=function(y){g.prototype.optimize.call(this,y),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof x&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},x.prototype.position=function(y,_){return[this.domNode,y]},x.prototype.split=function(y,_){if(_===void 0&&(_=!1),!_){if(y===0)return this;if(y===this.length())return this.next}var T=l.create(this.domNode.splitText(y));return this.parent.insertBefore(T,this.next),this.text=this.statics.value(this.domNode),T},x.prototype.update=function(y,_){var T=this;y.some(function(P){return P.type==="characterData"&&P.target===T.domNode})&&(this.text=this.statics.value(this.domNode))},x.prototype.value=function(){return this.text},x.blotName="text",x.scope=l.Scope.INLINE_BLOT,x}(u.default);r.default=p},function(n,r,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var u=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,p){return arguments.length>1&&!this.contains(l)==!p?p:u.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,p){return p=p||0,this.substr(p,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,p){var g=this.toString();(typeof p!="number"||!isFinite(p)||Math.floor(p)!==p||p>g.length)&&(p=g.length),p-=l.length;var x=g.indexOf(l,p);return x!==-1&&x===p}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(p){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof p!="function")throw new TypeError("predicate must be a function");for(var g=Object(this),x=g.length>>>0,y=arguments[1],_,T=0;T<x;T++)if(_=g[T],p.call(y,_,T,g))return _}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,o=1,u=0;function l(D,U,V){if(D==U)return D?[[u,D]]:[];(V<0||D.length<V)&&(V=null);var G=y(D,U),H=D.substring(0,G);D=D.substring(G),U=U.substring(G),G=_(D,U);var J=D.substring(D.length-G);D=D.substring(0,D.length-G),U=U.substring(0,U.length-G);var Y=p(D,U);return H&&Y.unshift([u,H]),J&&Y.push([u,J]),P(Y),V!=null&&(Y=k(Y,V)),Y=R(Y),Y}function p(D,U){var V;if(!D)return[[o,U]];if(!U)return[[i,D]];var G=D.length>U.length?D:U,H=D.length>U.length?U:D,J=G.indexOf(H);if(J!=-1)return V=[[o,G.substring(0,J)],[u,H],[o,G.substring(J+H.length)]],D.length>U.length&&(V[0][0]=V[2][0]=i),V;if(H.length==1)return[[i,D],[o,U]];var Y=T(D,U);if(Y){var X=Y[0],ee=Y[1],ce=Y[2],oe=Y[3],we=Y[4],Ne=l(X,ce),Be=l(ee,oe);return Ne.concat([[u,we]],Be)}return g(D,U)}function g(D,U){for(var V=D.length,G=U.length,H=Math.ceil((V+G)/2),J=H,Y=2*H,X=new Array(Y),ee=new Array(Y),ce=0;ce<Y;ce++)X[ce]=-1,ee[ce]=-1;X[J+1]=0,ee[J+1]=0;for(var oe=V-G,we=oe%2!=0,Ne=0,Be=0,De=0,Ae=0,ve=0;ve<H;ve++){for(var he=-ve+Ne;he<=ve-Be;he+=2){var xe=J+he,Ee;he==-ve||he!=ve&&X[xe-1]<X[xe+1]?Ee=X[xe+1]:Ee=X[xe-1]+1;for(var Ge=Ee-he;Ee<V&&Ge<G&&D.charAt(Ee)==U.charAt(Ge);)Ee++,Ge++;if(X[xe]=Ee,Ee>V)Be+=2;else if(Ge>G)Ne+=2;else if(we){var $e=J+oe-he;if($e>=0&&$e<Y&&ee[$e]!=-1){var be=V-ee[$e];if(Ee>=be)return x(D,U,Ee,Ge)}}}for(var He=-ve+De;He<=ve-Ae;He+=2){var $e=J+He,be;He==-ve||He!=ve&&ee[$e-1]<ee[$e+1]?be=ee[$e+1]:be=ee[$e-1]+1;for(var it=be-He;be<V&&it<G&&D.charAt(V-be-1)==U.charAt(G-it-1);)be++,it++;if(ee[$e]=be,be>V)Ae+=2;else if(it>G)De+=2;else if(!we){var xe=J+oe-He;if(xe>=0&&xe<Y&&X[xe]!=-1){var Ee=X[xe],Ge=J+Ee-xe;if(be=V-be,Ee>=be)return x(D,U,Ee,Ge)}}}}return[[i,D],[o,U]]}function x(D,U,V,G){var H=D.substring(0,V),J=U.substring(0,G),Y=D.substring(V),X=U.substring(G),ee=l(H,J),ce=l(Y,X);return ee.concat(ce)}function y(D,U){if(!D||!U||D.charAt(0)!=U.charAt(0))return 0;for(var V=0,G=Math.min(D.length,U.length),H=G,J=0;V<H;)D.substring(J,H)==U.substring(J,H)?(V=H,J=V):G=H,H=Math.floor((G-V)/2+V);return H}function _(D,U){if(!D||!U||D.charAt(D.length-1)!=U.charAt(U.length-1))return 0;for(var V=0,G=Math.min(D.length,U.length),H=G,J=0;V<H;)D.substring(D.length-H,D.length-J)==U.substring(U.length-H,U.length-J)?(V=H,J=V):G=H,H=Math.floor((G-V)/2+V);return H}function T(D,U){var V=D.length>U.length?D:U,G=D.length>U.length?U:D;if(V.length<4||G.length*2<V.length)return null;function H(Be,De,Ae){for(var ve=Be.substring(Ae,Ae+Math.floor(Be.length/4)),he=-1,xe="",Ee,Ge,$e,be;(he=De.indexOf(ve,he+1))!=-1;){var He=y(Be.substring(Ae),De.substring(he)),it=_(Be.substring(0,Ae),De.substring(0,he));xe.length<it+He&&(xe=De.substring(he-it,he)+De.substring(he,he+He),Ee=Be.substring(0,Ae-it),Ge=Be.substring(Ae+He),$e=De.substring(0,he-it),be=De.substring(he+He))}return xe.length*2>=Be.length?[Ee,Ge,$e,be,xe]:null}var J=H(V,G,Math.ceil(V.length/4)),Y=H(V,G,Math.ceil(V.length/2)),X;if(!J&&!Y)return null;Y?J?X=J[4].length>Y[4].length?J:Y:X=Y:X=J;var ee,ce,oe,we;D.length>U.length?(ee=X[0],ce=X[1],oe=X[2],we=X[3]):(oe=X[0],we=X[1],ee=X[2],ce=X[3]);var Ne=X[4];return[ee,ce,oe,we,Ne]}function P(D){D.push([u,""]);for(var U=0,V=0,G=0,H="",J="",Y;U<D.length;)switch(D[U][0]){case o:G++,J+=D[U][1],U++;break;case i:V++,H+=D[U][1],U++;break;case u:V+G>1?(V!==0&&G!==0&&(Y=y(J,H),Y!==0&&(U-V-G>0&&D[U-V-G-1][0]==u?D[U-V-G-1][1]+=J.substring(0,Y):(D.splice(0,0,[u,J.substring(0,Y)]),U++),J=J.substring(Y),H=H.substring(Y)),Y=_(J,H),Y!==0&&(D[U][1]=J.substring(J.length-Y)+D[U][1],J=J.substring(0,J.length-Y),H=H.substring(0,H.length-Y))),V===0?D.splice(U-G,V+G,[o,J]):G===0?D.splice(U-V,V+G,[i,H]):D.splice(U-V-G,V+G,[i,H],[o,J]),U=U-V-G+(V?1:0)+(G?1:0)+1):U!==0&&D[U-1][0]==u?(D[U-1][1]+=D[U][1],D.splice(U,1)):U++,G=0,V=0,H="",J="";break}D[D.length-1][1]===""&&D.pop();var X=!1;for(U=1;U<D.length-1;)D[U-1][0]==u&&D[U+1][0]==u&&(D[U][1].substring(D[U][1].length-D[U-1][1].length)==D[U-1][1]?(D[U][1]=D[U-1][1]+D[U][1].substring(0,D[U][1].length-D[U-1][1].length),D[U+1][1]=D[U-1][1]+D[U+1][1],D.splice(U-1,1),X=!0):D[U][1].substring(0,D[U+1][1].length)==D[U+1][1]&&(D[U-1][1]+=D[U+1][1],D[U][1]=D[U][1].substring(D[U+1][1].length)+D[U+1][1],D.splice(U+1,1),X=!0)),U++;X&&P(D)}var A=l;A.INSERT=o,A.DELETE=i,A.EQUAL=u,n.exports=A;function M(D,U){if(U===0)return[u,D];for(var V=0,G=0;G<D.length;G++){var H=D[G];if(H[0]===i||H[0]===u){var J=V+H[1].length;if(U===J)return[G+1,D];if(U<J){D=D.slice();var Y=U-V,X=[H[0],H[1].slice(0,Y)],ee=[H[0],H[1].slice(Y)];return D.splice(G,1,X,ee),[G+1,D]}else V=J}}throw new Error("cursor_pos is out of bounds!")}function k(D,U){var V=M(D,U),G=V[1],H=V[0],J=G[H],Y=G[H+1];if(J==null)return D;if(J[0]!==u)return D;if(Y!=null&&J[1]+Y[1]===Y[1]+J[1])return G.splice(H,2,Y,J),z(G,H,2);if(Y!=null&&Y[1].indexOf(J[1])===0){G.splice(H,2,[Y[0],J[1]],[0,J[1]]);var X=Y[1].slice(J[1].length);return X.length>0&&G.splice(H+2,0,[Y[0],X]),z(G,H,3)}else return D}function R(D){for(var U=!1,V=function(Y){return Y.charCodeAt(0)>=56320&&Y.charCodeAt(0)<=57343},G=function(Y){return Y.charCodeAt(Y.length-1)>=55296&&Y.charCodeAt(Y.length-1)<=56319},H=2;H<D.length;H+=1)D[H-2][0]===u&&G(D[H-2][1])&&D[H-1][0]===i&&V(D[H-1][1])&&D[H][0]===o&&V(D[H][1])&&(U=!0,D[H-1][1]=D[H-2][1].slice(-1)+D[H-1][1],D[H][1]=D[H-2][1].slice(-1)+D[H][1],D[H-2][1]=D[H-2][1].slice(0,-1));if(!U)return D;for(var J=[],H=0;H<D.length;H+=1)D[H][1].length>0&&J.push(D[H]);return J}function z(D,U,V){for(var G=U+V-1;G>=0&&G>=U-1;G--)if(G+1<D.length){var H=D[G],J=D[G+1];H[0]===J[1]&&D.splice(G,2,[H[0],H[1]+J[1]])}return D}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(o){var u=[];for(var l in o)u.push(l);return u}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?o:u,r.supported=o;function o(l){return Object.prototype.toString.call(l)=="[object Arguments]"}r.unsupported=u;function u(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,o="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(o=!1));function l(g,x,y){this.fn=g,this.context=x,this.once=y||!1}function p(){this._events=new u,this._eventsCount=0}p.prototype.eventNames=function(){var x=[],y,_;if(this._eventsCount===0)return x;for(_ in y=this._events)i.call(y,_)&&x.push(o?_.slice(1):_);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(y)):x},p.prototype.listeners=function(x,y){var _=o?o+x:x,T=this._events[_];if(y)return!!T;if(!T)return[];if(T.fn)return[T.fn];for(var P=0,A=T.length,M=new Array(A);P<A;P++)M[P]=T[P].fn;return M},p.prototype.emit=function(x,y,_,T,P,A){var M=o?o+x:x;if(!this._events[M])return!1;var k=this._events[M],R=arguments.length,z,D;if(k.fn){switch(k.once&&this.removeListener(x,k.fn,void 0,!0),R){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,y),!0;case 3:return k.fn.call(k.context,y,_),!0;case 4:return k.fn.call(k.context,y,_,T),!0;case 5:return k.fn.call(k.context,y,_,T,P),!0;case 6:return k.fn.call(k.context,y,_,T,P,A),!0}for(D=1,z=new Array(R-1);D<R;D++)z[D-1]=arguments[D];k.fn.apply(k.context,z)}else{var U=k.length,V;for(D=0;D<U;D++)switch(k[D].once&&this.removeListener(x,k[D].fn,void 0,!0),R){case 1:k[D].fn.call(k[D].context);break;case 2:k[D].fn.call(k[D].context,y);break;case 3:k[D].fn.call(k[D].context,y,_);break;case 4:k[D].fn.call(k[D].context,y,_,T);break;default:if(!z)for(V=1,z=new Array(R-1);V<R;V++)z[V-1]=arguments[V];k[D].fn.apply(k[D].context,z)}}return!0},p.prototype.on=function(x,y,_){var T=new l(y,_||this),P=o?o+x:x;return this._events[P]?this._events[P].fn?this._events[P]=[this._events[P],T]:this._events[P].push(T):(this._events[P]=T,this._eventsCount++),this},p.prototype.once=function(x,y,_){var T=new l(y,_||this,!0),P=o?o+x:x;return this._events[P]?this._events[P].fn?this._events[P]=[this._events[P],T]:this._events[P].push(T):(this._events[P]=T,this._eventsCount++),this},p.prototype.removeListener=function(x,y,_,T){var P=o?o+x:x;if(!this._events[P])return this;if(!y)return--this._eventsCount===0?this._events=new u:delete this._events[P],this;var A=this._events[P];if(A.fn)A.fn===y&&(!T||A.once)&&(!_||A.context===_)&&(--this._eventsCount===0?this._events=new u:delete this._events[P]);else{for(var M=0,k=[],R=A.length;M<R;M++)(A[M].fn!==y||T&&!A[M].once||_&&A[M].context!==_)&&k.push(A[M]);k.length?this._events[P]=k.length===1?k[0]:k:--this._eventsCount===0?this._events=new u:delete this._events[P]}return this},p.prototype.removeAllListeners=function(x){var y;return x?(y=o?o+x:x,this._events[y]&&(--this._eventsCount===0?this._events=new u:delete this._events[y])):(this._events=new u,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prototype.setMaxListeners=function(){return this},p.prefixed=o,p.EventEmitter=p,typeof n<"u"&&(n.exports=p)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},u=function(){function lt(gt,_t){var Pt=[],je=!0,vt=!1,St=void 0;try{for(var Lt=gt[Symbol.iterator](),en;!(je=(en=Lt.next()).done)&&(Pt.push(en.value),!(_t&&Pt.length===_t));je=!0);}catch(wn){vt=!0,St=wn}finally{try{!je&&Lt.return&&Lt.return()}finally{if(vt)throw St}}return Pt}return function(gt,_t){if(Array.isArray(gt))return gt;if(Symbol.iterator in Object(gt))return lt(gt,_t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function lt(gt,_t){for(var Pt=0;Pt<_t.length;Pt++){var je=_t[Pt];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(gt,je.key,je)}}return function(gt,_t,Pt){return _t&&lt(gt.prototype,_t),Pt&&lt(gt,Pt),gt}}(),p=i(3),g=ee(p),x=i(2),y=ee(x),_=i(0),T=ee(_),P=i(5),A=ee(P),M=i(10),k=ee(M),R=i(9),z=ee(R),D=i(36),U=i(37),V=i(13),G=ee(V),H=i(26),J=i(38),Y=i(39),X=i(40);function ee(lt){return lt&&lt.__esModule?lt:{default:lt}}function ce(lt,gt,_t){return gt in lt?Object.defineProperty(lt,gt,{value:_t,enumerable:!0,configurable:!0,writable:!0}):lt[gt]=_t,lt}function oe(lt,gt){if(!(lt instanceof gt))throw new TypeError("Cannot call a class as a function")}function we(lt,gt){if(!lt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gt&&(typeof gt=="object"||typeof gt=="function")?gt:lt}function Ne(lt,gt){if(typeof gt!="function"&&gt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof gt);lt.prototype=Object.create(gt&&gt.prototype,{constructor:{value:lt,enumerable:!1,writable:!0,configurable:!0}}),gt&&(Object.setPrototypeOf?Object.setPrototypeOf(lt,gt):lt.__proto__=gt)}var Be=(0,k.default)("quill:clipboard"),De="__ql-matcher",Ae=[[Node.TEXT_NODE,rt],[Node.TEXT_NODE,Kt],["br",Dt],[Node.ELEMENT_NODE,Kt],[Node.ELEMENT_NODE,xt],[Node.ELEMENT_NODE,Gt],[Node.ELEMENT_NODE,ct],[Node.ELEMENT_NODE,Tr],["li",Ft],["b",it.bind(it,"bold")],["i",it.bind(it,"italic")],["style",Qt]],ve=[D.AlignAttribute,J.DirectionAttribute].reduce(function(lt,gt){return lt[gt.keyName]=gt,lt},{}),he=[D.AlignStyle,U.BackgroundStyle,H.ColorStyle,J.DirectionStyle,Y.FontStyle,X.SizeStyle].reduce(function(lt,gt){return lt[gt.keyName]=gt,lt},{}),xe=function(lt){Ne(gt,lt);function gt(_t,Pt){oe(this,gt);var je=we(this,(gt.__proto__||Object.getPrototypeOf(gt)).call(this,_t,Pt));return je.quill.root.addEventListener("paste",je.onPaste.bind(je)),je.container=je.quill.addContainer("ql-clipboard"),je.container.setAttribute("contenteditable",!0),je.container.setAttribute("tabindex",-1),je.matchers=[],Ae.concat(je.options.matchers).forEach(function(vt){var St=u(vt,2),Lt=St[0],en=St[1];!Pt.matchVisual&&en===Gt||je.addMatcher(Lt,en)}),je}return l(gt,[{key:"addMatcher",value:function(Pt,je){this.matchers.push([Pt,je])}},{key:"convert",value:function(Pt){if(typeof Pt=="string")return this.container.innerHTML=Pt.replace(/\>\r?\n +\</g,"><"),this.convert();var je=this.quill.getFormat(this.quill.selection.savedRange.index);if(je[G.default.blotName]){var vt=this.container.innerText;return this.container.innerHTML="",new y.default().insert(vt,ce({},G.default.blotName,je[G.default.blotName]))}var St=this.prepareMatching(),Lt=u(St,2),en=Lt[0],wn=Lt[1],gn=He(this.container,en,wn);return $e(gn,`
`)&&gn.ops[gn.ops.length-1].attributes==null&&(gn=gn.compose(new y.default().retain(gn.length()-1).delete(1))),Be.log("convert",this.container.innerHTML,gn),this.container.innerHTML="",gn}},{key:"dangerouslyPasteHTML",value:function(Pt,je){var vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A.default.sources.API;if(typeof Pt=="string")this.quill.setContents(this.convert(Pt),je),this.quill.setSelection(0,A.default.sources.SILENT);else{var St=this.convert(je);this.quill.updateContents(new y.default().retain(Pt).concat(St),vt),this.quill.setSelection(Pt+St.length(),A.default.sources.SILENT)}}},{key:"onPaste",value:function(Pt){var je=this;if(!(Pt.defaultPrevented||!this.quill.isEnabled())){var vt=this.quill.getSelection(),St=new y.default().retain(vt.index),Lt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(A.default.sources.SILENT),setTimeout(function(){St=St.concat(je.convert()).delete(vt.length),je.quill.updateContents(St,A.default.sources.USER),je.quill.setSelection(St.length()-vt.length,A.default.sources.SILENT),je.quill.scrollingContainer.scrollTop=Lt,je.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Pt=this,je=[],vt=[];return this.matchers.forEach(function(St){var Lt=u(St,2),en=Lt[0],wn=Lt[1];switch(en){case Node.TEXT_NODE:vt.push(wn);break;case Node.ELEMENT_NODE:je.push(wn);break;default:[].forEach.call(Pt.container.querySelectorAll(en),function(gn){gn[De]=gn[De]||[],gn[De].push(wn)});break}}),[je,vt]}}]),gt}(z.default);xe.DEFAULTS={matchers:[],matchVisual:!0};function Ee(lt,gt,_t){return(typeof gt>"u"?"undefined":o(gt))==="object"?Object.keys(gt).reduce(function(Pt,je){return Ee(Pt,je,gt[je])},lt):lt.reduce(function(Pt,je){return je.attributes&&je.attributes[gt]?Pt.push(je):Pt.insert(je.insert,(0,g.default)({},ce({},gt,_t),je.attributes))},new y.default)}function Ge(lt){if(lt.nodeType!==Node.ELEMENT_NODE)return{};var gt="__ql-computed-style";return lt[gt]||(lt[gt]=window.getComputedStyle(lt))}function $e(lt,gt){for(var _t="",Pt=lt.ops.length-1;Pt>=0&&_t.length<gt.length;--Pt){var je=lt.ops[Pt];if(typeof je.insert!="string")break;_t=je.insert+_t}return _t.slice(-1*gt.length)===gt}function be(lt){if(lt.childNodes.length===0)return!1;var gt=Ge(lt);return["block","list-item"].indexOf(gt.display)>-1}function He(lt,gt,_t){return lt.nodeType===lt.TEXT_NODE?_t.reduce(function(Pt,je){return je(lt,Pt)},new y.default):lt.nodeType===lt.ELEMENT_NODE?[].reduce.call(lt.childNodes||[],function(Pt,je){var vt=He(je,gt,_t);return je.nodeType===lt.ELEMENT_NODE&&(vt=gt.reduce(function(St,Lt){return Lt(je,St)},vt),vt=(je[De]||[]).reduce(function(St,Lt){return Lt(je,St)},vt)),Pt.concat(vt)},new y.default):new y.default}function it(lt,gt,_t){return Ee(_t,lt,!0)}function ct(lt,gt){var _t=T.default.Attributor.Attribute.keys(lt),Pt=T.default.Attributor.Class.keys(lt),je=T.default.Attributor.Style.keys(lt),vt={};return _t.concat(Pt).concat(je).forEach(function(St){var Lt=T.default.query(St,T.default.Scope.ATTRIBUTE);Lt!=null&&(vt[Lt.attrName]=Lt.value(lt),vt[Lt.attrName])||(Lt=ve[St],Lt!=null&&(Lt.attrName===St||Lt.keyName===St)&&(vt[Lt.attrName]=Lt.value(lt)||void 0),Lt=he[St],Lt!=null&&(Lt.attrName===St||Lt.keyName===St)&&(Lt=he[St],vt[Lt.attrName]=Lt.value(lt)||void 0))}),Object.keys(vt).length>0&&(gt=Ee(gt,vt)),gt}function xt(lt,gt){var _t=T.default.query(lt);if(_t==null)return gt;if(_t.prototype instanceof T.default.Embed){var Pt={},je=_t.value(lt);je!=null&&(Pt[_t.blotName]=je,gt=new y.default().insert(Pt,_t.formats(lt)))}else typeof _t.formats=="function"&&(gt=Ee(gt,_t.blotName,_t.formats(lt)));return gt}function Dt(lt,gt){return $e(gt,`
`)||gt.insert(`
`),gt}function Qt(){return new y.default}function Ft(lt,gt){var _t=T.default.query(lt);if(_t==null||_t.blotName!=="list-item"||!$e(gt,`
`))return gt;for(var Pt=-1,je=lt.parentNode;!je.classList.contains("ql-clipboard");)(T.default.query(je)||{}).blotName==="list"&&(Pt+=1),je=je.parentNode;return Pt<=0?gt:gt.compose(new y.default().retain(gt.length()-1).retain(1,{indent:Pt}))}function Kt(lt,gt){return $e(gt,`
`)||(be(lt)||gt.length()>0&&lt.nextSibling&&be(lt.nextSibling))&&gt.insert(`
`),gt}function Gt(lt,gt){if(be(lt)&&lt.nextElementSibling!=null&&!$e(gt,`

`)){var _t=lt.offsetHeight+parseFloat(Ge(lt).marginTop)+parseFloat(Ge(lt).marginBottom);lt.nextElementSibling.offsetTop>lt.offsetTop+_t*1.5&&gt.insert(`
`)}return gt}function Tr(lt,gt){var _t={},Pt=lt.style||{};return Pt.fontStyle&&Ge(lt).fontStyle==="italic"&&(_t.italic=!0),Pt.fontWeight&&(Ge(lt).fontWeight.startsWith("bold")||parseInt(Ge(lt).fontWeight)>=700)&&(_t.bold=!0),Object.keys(_t).length>0&&(gt=Ee(gt,_t)),parseFloat(Pt.textIndent||0)>0&&(gt=new y.default().insert("	").concat(gt)),gt}function rt(lt,gt){var _t=lt.data;if(lt.parentNode.tagName==="O:P")return gt.insert(_t.trim());if(_t.trim().length===0&&lt.parentNode.classList.contains("ql-clipboard"))return gt;if(!Ge(lt.parentNode).whiteSpace.startsWith("pre")){var Pt=function(vt,St){return St=St.replace(/[^\u00a0]/g,""),St.length<1&&vt?" ":St};_t=_t.replace(/\r\n/g," ").replace(/\n/g," "),_t=_t.replace(/\s\s+/g,Pt.bind(Pt,!0)),(lt.previousSibling==null&&be(lt.parentNode)||lt.previousSibling!=null&&be(lt.previousSibling))&&(_t=_t.replace(/^\s+/,Pt.bind(Pt,!1))),(lt.nextSibling==null&&be(lt.parentNode)||lt.nextSibling!=null&&be(lt.nextSibling))&&(_t=_t.replace(/\s+$/,Pt.bind(Pt,!1)))}return gt.insert(_t)}r.default=xe,r.matchAttributor=ct,r.matchBlot=xt,r.matchNewline=Kt,r.matchSpacing=Gt,r.matchText=rt},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function P(A,M){for(var k=0;k<M.length;k++){var R=M[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,R.key,R)}}return function(A,M,k){return M&&P(A.prototype,M),k&&P(A,k),A}}(),u=function P(A,M,k){A===null&&(A=Function.prototype);var R=Object.getOwnPropertyDescriptor(A,M);if(R===void 0){var z=Object.getPrototypeOf(A);return z===null?void 0:P(z,M,k)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(k)}},l=i(6),p=g(l);function g(P){return P&&P.__esModule?P:{default:P}}function x(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function y(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:P}function _(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}var T=function(P){_(A,P);function A(){return x(this,A),y(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,[{key:"optimize",value:function(k){u(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,k),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return u(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),A}(p.default);T.blotName="bold",T.tagName=["STRONG","B"],r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var o=function(){function X(ee,ce){var oe=[],we=!0,Ne=!1,Be=void 0;try{for(var De=ee[Symbol.iterator](),Ae;!(we=(Ae=De.next()).done)&&(oe.push(Ae.value),!(ce&&oe.length===ce));we=!0);}catch(ve){Ne=!0,Be=ve}finally{try{!we&&De.return&&De.return()}finally{if(Ne)throw Be}}return oe}return function(ee,ce){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return X(ee,ce);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function X(ee,ce){for(var oe=0;oe<ce.length;oe++){var we=ce[oe];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(ee,we.key,we)}}return function(ee,ce,oe){return ce&&X(ee.prototype,ce),oe&&X(ee,oe),ee}}(),l=i(2),p=k(l),g=i(0),x=k(g),y=i(5),_=k(y),T=i(10),P=k(T),A=i(9),M=k(A);function k(X){return X&&X.__esModule?X:{default:X}}function R(X,ee,ce){return ee in X?Object.defineProperty(X,ee,{value:ce,enumerable:!0,configurable:!0,writable:!0}):X[ee]=ce,X}function z(X,ee){if(!(X instanceof ee))throw new TypeError("Cannot call a class as a function")}function D(X,ee){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:X}function U(X,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);X.prototype=Object.create(ee&&ee.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(X,ee):X.__proto__=ee)}var V=(0,P.default)("quill:toolbar"),G=function(X){U(ee,X);function ee(ce,oe){z(this,ee);var we=D(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,ce,oe));if(Array.isArray(we.options.container)){var Ne=document.createElement("div");J(Ne,we.options.container),ce.container.parentNode.insertBefore(Ne,ce.container),we.container=Ne}else typeof we.options.container=="string"?we.container=document.querySelector(we.options.container):we.container=we.options.container;if(!(we.container instanceof HTMLElement)){var Be;return Be=V.error("Container required for toolbar",we.options),D(we,Be)}return we.container.classList.add("ql-toolbar"),we.controls=[],we.handlers={},Object.keys(we.options.handlers).forEach(function(De){we.addHandler(De,we.options.handlers[De])}),[].forEach.call(we.container.querySelectorAll("button, select"),function(De){we.attach(De)}),we.quill.on(_.default.events.EDITOR_CHANGE,function(De,Ae){De===_.default.events.SELECTION_CHANGE&&we.update(Ae)}),we.quill.on(_.default.events.SCROLL_OPTIMIZE,function(){var De=we.quill.selection.getRange(),Ae=o(De,1),ve=Ae[0];we.update(ve)}),we}return u(ee,[{key:"addHandler",value:function(oe,we){this.handlers[oe]=we}},{key:"attach",value:function(oe){var we=this,Ne=[].find.call(oe.classList,function(De){return De.indexOf("ql-")===0});if(Ne){if(Ne=Ne.slice(3),oe.tagName==="BUTTON"&&oe.setAttribute("type","button"),this.handlers[Ne]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Ne]==null){V.warn("ignoring attaching to disabled format",Ne,oe);return}if(x.default.query(Ne)==null){V.warn("ignoring attaching to nonexistent format",Ne,oe);return}}var Be=oe.tagName==="SELECT"?"change":"click";oe.addEventListener(Be,function(De){var Ae=void 0;if(oe.tagName==="SELECT"){if(oe.selectedIndex<0)return;var ve=oe.options[oe.selectedIndex];ve.hasAttribute("selected")?Ae=!1:Ae=ve.value||!1}else oe.classList.contains("ql-active")?Ae=!1:Ae=oe.value||!oe.hasAttribute("value"),De.preventDefault();we.quill.focus();var he=we.quill.selection.getRange(),xe=o(he,1),Ee=xe[0];if(we.handlers[Ne]!=null)we.handlers[Ne].call(we,Ae);else if(x.default.query(Ne).prototype instanceof x.default.Embed){if(Ae=prompt("Enter "+Ne),!Ae)return;we.quill.updateContents(new p.default().retain(Ee.index).delete(Ee.length).insert(R({},Ne,Ae)),_.default.sources.USER)}else we.quill.format(Ne,Ae,_.default.sources.USER);we.update(Ee)}),this.controls.push([Ne,oe])}}},{key:"update",value:function(oe){var we=oe==null?{}:this.quill.getFormat(oe);this.controls.forEach(function(Ne){var Be=o(Ne,2),De=Be[0],Ae=Be[1];if(Ae.tagName==="SELECT"){var ve=void 0;if(oe==null)ve=null;else if(we[De]==null)ve=Ae.querySelector("option[selected]");else if(!Array.isArray(we[De])){var he=we[De];typeof he=="string"&&(he=he.replace(/\"/g,'\\"')),ve=Ae.querySelector('option[value="'+he+'"]')}ve==null?(Ae.value="",Ae.selectedIndex=-1):ve.selected=!0}else if(oe==null)Ae.classList.remove("ql-active");else if(Ae.hasAttribute("value")){var xe=we[De]===Ae.getAttribute("value")||we[De]!=null&&we[De].toString()===Ae.getAttribute("value")||we[De]==null&&!Ae.getAttribute("value");Ae.classList.toggle("ql-active",xe)}else Ae.classList.toggle("ql-active",we[De]!=null)})}}]),ee}(M.default);G.DEFAULTS={};function H(X,ee,ce){var oe=document.createElement("button");oe.setAttribute("type","button"),oe.classList.add("ql-"+ee),ce!=null&&(oe.value=ce),X.appendChild(oe)}function J(X,ee){Array.isArray(ee[0])||(ee=[ee]),ee.forEach(function(ce){var oe=document.createElement("span");oe.classList.add("ql-formats"),ce.forEach(function(we){if(typeof we=="string")H(oe,we);else{var Ne=Object.keys(we)[0],Be=we[Ne];Array.isArray(Be)?Y(oe,Ne,Be):H(oe,Ne,Be)}}),X.appendChild(oe)})}function Y(X,ee,ce){var oe=document.createElement("select");oe.classList.add("ql-"+ee),ce.forEach(function(we){var Ne=document.createElement("option");we!==!1?Ne.setAttribute("value",we):Ne.setAttribute("selected","selected"),oe.appendChild(Ne)}),X.appendChild(oe)}G.DEFAULTS={container:null,handlers:{clean:function(){var ee=this,ce=this.quill.getSelection();if(ce!=null)if(ce.length==0){var oe=this.quill.getFormat();Object.keys(oe).forEach(function(we){x.default.query(we,x.default.Scope.INLINE)!=null&&ee.quill.format(we,!1)})}else this.quill.removeFormat(ce,_.default.sources.USER)},direction:function(ee){var ce=this.quill.getFormat().align;ee==="rtl"&&ce==null?this.quill.format("align","right",_.default.sources.USER):!ee&&ce==="right"&&this.quill.format("align",!1,_.default.sources.USER),this.quill.format("direction",ee,_.default.sources.USER)},indent:function(ee){var ce=this.quill.getSelection(),oe=this.quill.getFormat(ce),we=parseInt(oe.indent||0);if(ee==="+1"||ee==="-1"){var Ne=ee==="+1"?1:-1;oe.direction==="rtl"&&(Ne*=-1),this.quill.format("indent",we+Ne,_.default.sources.USER)}},link:function(ee){ee===!0&&(ee=prompt("Enter link URL:")),this.quill.format("link",ee,_.default.sources.USER)},list:function(ee){var ce=this.quill.getSelection(),oe=this.quill.getFormat(ce);ee==="check"?oe.list==="checked"||oe.list==="unchecked"?this.quill.format("list",!1,_.default.sources.USER):this.quill.format("list","unchecked",_.default.sources.USER):this.quill.format("list",ee,_.default.sources.USER)}}},r.default=G,r.addControls=J},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function P(A,M){for(var k=0;k<M.length;k++){var R=M[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,R.key,R)}}return function(A,M,k){return M&&P(A.prototype,M),k&&P(A,k),A}}(),u=function P(A,M,k){A===null&&(A=Function.prototype);var R=Object.getOwnPropertyDescriptor(A,M);if(R===void 0){var z=Object.getPrototypeOf(A);return z===null?void 0:P(z,M,k)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(k)}},l=i(28),p=g(l);function g(P){return P&&P.__esModule?P:{default:P}}function x(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function y(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:P}function _(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}var T=function(P){_(A,P);function A(M,k){x(this,A);var R=y(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,M));return R.label.innerHTML=k,R.container.classList.add("ql-color-picker"),[].slice.call(R.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(z){z.classList.add("ql-primary")}),R}return o(A,[{key:"buildItem",value:function(k){var R=u(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"buildItem",this).call(this,k);return R.style.backgroundColor=k.getAttribute("value")||"",R}},{key:"selectItem",value:function(k,R){u(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"selectItem",this).call(this,k,R);var z=this.label.querySelector(".ql-color-label"),D=k&&k.getAttribute("data-value")||"";z&&(z.tagName==="line"?z.style.stroke=D:z.style.fill=D)}}]),A}(p.default);r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function P(A,M){for(var k=0;k<M.length;k++){var R=M[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,R.key,R)}}return function(A,M,k){return M&&P(A.prototype,M),k&&P(A,k),A}}(),u=function P(A,M,k){A===null&&(A=Function.prototype);var R=Object.getOwnPropertyDescriptor(A,M);if(R===void 0){var z=Object.getPrototypeOf(A);return z===null?void 0:P(z,M,k)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(k)}},l=i(28),p=g(l);function g(P){return P&&P.__esModule?P:{default:P}}function x(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function y(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:P}function _(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}var T=function(P){_(A,P);function A(M,k){x(this,A);var R=y(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,M));return R.container.classList.add("ql-icon-picker"),[].forEach.call(R.container.querySelectorAll(".ql-picker-item"),function(z){z.innerHTML=k[z.getAttribute("data-value")||""]}),R.defaultItem=R.container.querySelector(".ql-selected"),R.selectItem(R.defaultItem),R}return o(A,[{key:"selectItem",value:function(k,R){u(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"selectItem",this).call(this,k,R),k=k||this.defaultItem,this.label.innerHTML=k.innerHTML}}]),A}(p.default);r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function p(g,x){for(var y=0;y<x.length;y++){var _=x[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,x,y){return x&&p(g.prototype,x),y&&p(g,y),g}}();function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}var l=function(){function p(g,x){var y=this;u(this,p),this.quill=g,this.boundsContainer=x||document.body,this.root=g.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){y.root.style.marginTop=-1*y.quill.root.scrollTop+"px"}),this.hide()}return o(p,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(x){var y=x.left+x.width/2-this.root.offsetWidth/2,_=x.bottom+this.quill.root.scrollTop;this.root.style.left=y+"px",this.root.style.top=_+"px",this.root.classList.remove("ql-flip");var T=this.boundsContainer.getBoundingClientRect(),P=this.root.getBoundingClientRect(),A=0;if(P.right>T.right&&(A=T.right-P.right,this.root.style.left=y+A+"px"),P.left<T.left&&(A=T.left-P.left,this.root.style.left=y+A+"px"),P.bottom>T.bottom){var M=P.bottom-P.top,k=x.bottom-x.top+M;this.root.style.top=_-k+"px",this.root.classList.add("ql-flip")}return A}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),p}();r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function Y(X,ee){var ce=[],oe=!0,we=!1,Ne=void 0;try{for(var Be=X[Symbol.iterator](),De;!(oe=(De=Be.next()).done)&&(ce.push(De.value),!(ee&&ce.length===ee));oe=!0);}catch(Ae){we=!0,Ne=Ae}finally{try{!oe&&Be.return&&Be.return()}finally{if(we)throw Ne}}return ce}return function(X,ee){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return Y(X,ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function Y(X,ee,ce){X===null&&(X=Function.prototype);var oe=Object.getOwnPropertyDescriptor(X,ee);if(oe===void 0){var we=Object.getPrototypeOf(X);return we===null?void 0:Y(we,ee,ce)}else{if("value"in oe)return oe.value;var Ne=oe.get;return Ne===void 0?void 0:Ne.call(ce)}},l=function(){function Y(X,ee){for(var ce=0;ce<ee.length;ce++){var oe=ee[ce];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(X,oe.key,oe)}}return function(X,ee,ce){return ee&&Y(X.prototype,ee),ce&&Y(X,ce),X}}(),p=i(3),g=z(p),x=i(8),y=z(x),_=i(43),T=z(_),P=i(27),A=z(P),M=i(15),k=i(41),R=z(k);function z(Y){return Y&&Y.__esModule?Y:{default:Y}}function D(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")}function U(Y,X){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:Y}function V(Y,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Y.prototype=Object.create(X&&X.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,X):Y.__proto__=X)}var G=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],H=function(Y){V(X,Y);function X(ee,ce){D(this,X),ce.modules.toolbar!=null&&ce.modules.toolbar.container==null&&(ce.modules.toolbar.container=G);var oe=U(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,ee,ce));return oe.quill.container.classList.add("ql-snow"),oe}return l(X,[{key:"extendToolbar",value:function(ce){ce.container.classList.add("ql-snow"),this.buildButtons([].slice.call(ce.container.querySelectorAll("button")),R.default),this.buildPickers([].slice.call(ce.container.querySelectorAll("select")),R.default),this.tooltip=new J(this.quill,this.options.bounds),ce.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(oe,we){ce.handlers.link.call(ce,!we.format.link)})}}]),X}(T.default);H.DEFAULTS=(0,g.default)(!0,{},T.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(X){if(X){var ee=this.quill.getSelection();if(ee==null||ee.length==0)return;var ce=this.quill.getText(ee);/^\S+@\S+\.\S+$/.test(ce)&&ce.indexOf("mailto:")!==0&&(ce="mailto:"+ce);var oe=this.quill.theme.tooltip;oe.edit("link",ce)}else this.quill.format("link",!1)}}}}});var J=function(Y){V(X,Y);function X(ee,ce){D(this,X);var oe=U(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,ee,ce));return oe.preview=oe.root.querySelector("a.ql-preview"),oe}return l(X,[{key:"listen",value:function(){var ce=this;u(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(oe){ce.root.classList.contains("ql-editing")?ce.save():ce.edit("link",ce.preview.textContent),oe.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(oe){if(ce.linkRange!=null){var we=ce.linkRange;ce.restoreFocus(),ce.quill.formatText(we,"link",!1,y.default.sources.USER),delete ce.linkRange}oe.preventDefault(),ce.hide()}),this.quill.on(y.default.events.SELECTION_CHANGE,function(oe,we,Ne){if(oe!=null){if(oe.length===0&&Ne===y.default.sources.USER){var Be=ce.quill.scroll.descendant(A.default,oe.index),De=o(Be,2),Ae=De[0],ve=De[1];if(Ae!=null){ce.linkRange=new M.Range(oe.index-ve,Ae.length());var he=A.default.formats(Ae.domNode);ce.preview.textContent=he,ce.preview.setAttribute("href",he),ce.show(),ce.position(ce.quill.getBounds(ce.linkRange));return}}else delete ce.linkRange;ce.hide()}})}},{key:"show",value:function(){u(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),X}(_.BaseTooltip);J.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=H},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(29),u=je(o),l=i(36),p=i(38),g=i(64),x=i(65),y=je(x),_=i(66),T=je(_),P=i(67),A=je(P),M=i(37),k=i(26),R=i(39),z=i(40),D=i(56),U=je(D),V=i(68),G=je(V),H=i(27),J=je(H),Y=i(69),X=je(Y),ee=i(70),ce=je(ee),oe=i(71),we=je(oe),Ne=i(72),Be=je(Ne),De=i(73),Ae=je(De),ve=i(13),he=je(ve),xe=i(74),Ee=je(xe),Ge=i(75),$e=je(Ge),be=i(57),He=je(be),it=i(41),ct=je(it),xt=i(28),Dt=je(xt),Qt=i(59),Ft=je(Qt),Kt=i(60),Gt=je(Kt),Tr=i(61),rt=je(Tr),lt=i(108),gt=je(lt),_t=i(62),Pt=je(_t);function je(vt){return vt&&vt.__esModule?vt:{default:vt}}u.default.register({"attributors/attribute/direction":p.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":M.BackgroundClass,"attributors/class/color":k.ColorClass,"attributors/class/direction":p.DirectionClass,"attributors/class/font":R.FontClass,"attributors/class/size":z.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":M.BackgroundStyle,"attributors/style/color":k.ColorStyle,"attributors/style/direction":p.DirectionStyle,"attributors/style/font":R.FontStyle,"attributors/style/size":z.SizeStyle},!0),u.default.register({"formats/align":l.AlignClass,"formats/direction":p.DirectionClass,"formats/indent":g.IndentClass,"formats/background":M.BackgroundStyle,"formats/color":k.ColorStyle,"formats/font":R.FontClass,"formats/size":z.SizeClass,"formats/blockquote":y.default,"formats/code-block":he.default,"formats/header":T.default,"formats/list":A.default,"formats/bold":U.default,"formats/code":ve.Code,"formats/italic":G.default,"formats/link":J.default,"formats/script":X.default,"formats/strike":ce.default,"formats/underline":we.default,"formats/image":Be.default,"formats/video":Ae.default,"formats/list/item":P.ListItem,"modules/formula":Ee.default,"modules/syntax":$e.default,"modules/toolbar":He.default,"themes/bubble":gt.default,"themes/snow":Pt.default,"ui/icons":ct.default,"ui/picker":Dt.default,"ui/icon-picker":Gt.default,"ui/color-picker":Ft.default,"ui/tooltip":rt.default},!0),r.default=u.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var o=function(){function A(M,k){for(var R=0;R<k.length;R++){var z=k[R];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(M,z.key,z)}}return function(M,k,R){return k&&A(M.prototype,k),R&&A(M,R),M}}(),u=function A(M,k,R){M===null&&(M=Function.prototype);var z=Object.getOwnPropertyDescriptor(M,k);if(z===void 0){var D=Object.getPrototypeOf(M);return D===null?void 0:A(D,k,R)}else{if("value"in z)return z.value;var U=z.get;return U===void 0?void 0:U.call(R)}},l=i(0),p=g(l);function g(A){return A&&A.__esModule?A:{default:A}}function x(A,M){if(!(A instanceof M))throw new TypeError("Cannot call a class as a function")}function y(A,M){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:A}function _(A,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);A.prototype=Object.create(M&&M.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(A,M):A.__proto__=M)}var T=function(A){_(M,A);function M(){return x(this,M),y(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return o(M,[{key:"add",value:function(R,z){if(z==="+1"||z==="-1"){var D=this.value(R)||0;z=z==="+1"?D+1:D-1}return z===0?(this.remove(R),!0):u(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"add",this).call(this,R,z)}},{key:"canAdd",value:function(R,z){return u(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"canAdd",this).call(this,R,z)||u(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"canAdd",this).call(this,R,parseInt(z))}},{key:"value",value:function(R){return parseInt(u(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"value",this).call(this,R))||void 0}}]),M}(p.default.Attributor.Class),P=new T("indent","ql-indent",{scope:p.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(4),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}function p(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function g(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function x(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var y=function(_){x(T,_);function T(){return p(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(u.default);y.blotName="blockquote",y.tagName="blockquote",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function T(P,A){for(var M=0;M<A.length;M++){var k=A[M];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(P,k.key,k)}}return function(P,A,M){return A&&T(P.prototype,A),M&&T(P,M),P}}(),u=i(4),l=p(u);function p(T){return T&&T.__esModule?T:{default:T}}function g(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function x(T,P){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:T}function y(T,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);T.prototype=Object.create(P&&P.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(T,P):T.__proto__=P)}var _=function(T){y(P,T);function P(){return g(this,P),x(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return o(P,null,[{key:"formats",value:function(M){return this.tagName.indexOf(M.tagName)+1}}]),P}(l.default);_.blotName="header",_.tagName=["H1","H2","H3","H4","H5","H6"],r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var o=function(){function D(U,V){for(var G=0;G<V.length;G++){var H=V[G];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(U,H.key,H)}}return function(U,V,G){return V&&D(U.prototype,V),G&&D(U,G),U}}(),u=function D(U,V,G){U===null&&(U=Function.prototype);var H=Object.getOwnPropertyDescriptor(U,V);if(H===void 0){var J=Object.getPrototypeOf(U);return J===null?void 0:D(J,V,G)}else{if("value"in H)return H.value;var Y=H.get;return Y===void 0?void 0:Y.call(G)}},l=i(0),p=T(l),g=i(4),x=T(g),y=i(25),_=T(y);function T(D){return D&&D.__esModule?D:{default:D}}function P(D,U,V){return U in D?Object.defineProperty(D,U,{value:V,enumerable:!0,configurable:!0,writable:!0}):D[U]=V,D}function A(D,U){if(!(D instanceof U))throw new TypeError("Cannot call a class as a function")}function M(D,U){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:D}function k(D,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);D.prototype=Object.create(U&&U.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(D,U):D.__proto__=U)}var R=function(D){k(U,D);function U(){return A(this,U),M(this,(U.__proto__||Object.getPrototypeOf(U)).apply(this,arguments))}return o(U,[{key:"format",value:function(G,H){G===z.blotName&&!H?this.replaceWith(p.default.create(this.statics.scope)):u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"format",this).call(this,G,H)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(G,H){return this.parent.isolate(this.offset(this.parent),this.length()),G===this.parent.statics.blotName?(this.parent.replaceWith(G,H),this):(this.parent.unwrap(),u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"replaceWith",this).call(this,G,H))}}],[{key:"formats",value:function(G){return G.tagName===this.tagName?void 0:u(U.__proto__||Object.getPrototypeOf(U),"formats",this).call(this,G)}}]),U}(x.default);R.blotName="list-item",R.tagName="LI";var z=function(D){k(U,D),o(U,null,[{key:"create",value:function(G){var H=G==="ordered"?"OL":"UL",J=u(U.__proto__||Object.getPrototypeOf(U),"create",this).call(this,H);return(G==="checked"||G==="unchecked")&&J.setAttribute("data-checked",G==="checked"),J}},{key:"formats",value:function(G){if(G.tagName==="OL")return"ordered";if(G.tagName==="UL")return G.hasAttribute("data-checked")?G.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function U(V){A(this,U);var G=M(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,V)),H=function(Y){if(Y.target.parentNode===V){var X=G.statics.formats(V),ee=p.default.find(Y.target);X==="checked"?ee.format("list","unchecked"):X==="unchecked"&&ee.format("list","checked")}};return V.addEventListener("touchstart",H),V.addEventListener("mousedown",H),G}return o(U,[{key:"format",value:function(G,H){this.children.length>0&&this.children.tail.format(G,H)}},{key:"formats",value:function(){return P({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(G,H){if(G instanceof R)u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertBefore",this).call(this,G,H);else{var J=H==null?this.length():H.offset(this),Y=this.split(J);Y.parent.insertBefore(G,Y)}}},{key:"optimize",value:function(G){u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"optimize",this).call(this,G);var H=this.next;H!=null&&H.prev===this&&H.statics.blotName===this.statics.blotName&&H.domNode.tagName===this.domNode.tagName&&H.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(H.moveChildren(this),H.remove())}},{key:"replace",value:function(G){if(G.statics.blotName!==this.statics.blotName){var H=p.default.create(this.statics.defaultChild);G.moveChildren(H),this.appendChild(H)}u(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"replace",this).call(this,G)}}]),U}(_.default);z.blotName="list",z.scope=p.default.Scope.BLOCK_BLOT,z.tagName=["OL","UL"],z.defaultChild="list-item",z.allowedChildren=[R],r.ListItem=R,r.default=z},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(56),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}function p(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function g(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function x(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var y=function(_){x(T,_);function T(){return p(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(u.default);y.blotName="italic",y.tagName=["EM","I"],r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function P(A,M){for(var k=0;k<M.length;k++){var R=M[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,R.key,R)}}return function(A,M,k){return M&&P(A.prototype,M),k&&P(A,k),A}}(),u=function P(A,M,k){A===null&&(A=Function.prototype);var R=Object.getOwnPropertyDescriptor(A,M);if(R===void 0){var z=Object.getPrototypeOf(A);return z===null?void 0:P(z,M,k)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(k)}},l=i(6),p=g(l);function g(P){return P&&P.__esModule?P:{default:P}}function x(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function y(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:P}function _(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}var T=function(P){_(A,P);function A(){return x(this,A),y(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return o(A,null,[{key:"create",value:function(k){return k==="super"?document.createElement("sup"):k==="sub"?document.createElement("sub"):u(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,k)}},{key:"formats",value:function(k){if(k.tagName==="SUB")return"sub";if(k.tagName==="SUP")return"super"}}]),A}(p.default);T.blotName="script",T.tagName=["SUB","SUP"],r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}function p(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function g(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function x(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var y=function(_){x(T,_);function T(){return p(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(u.default);y.blotName="strike",y.tagName="S",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),u=l(o);function l(_){return _&&_.__esModule?_:{default:_}}function p(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function g(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function x(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var y=function(_){x(T,_);function T(){return p(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(u.default);y.blotName="underline",y.tagName="U",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function M(k,R){for(var z=0;z<R.length;z++){var D=R[z];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,R,z){return R&&M(k.prototype,R),z&&M(k,z),k}}(),u=function M(k,R,z){k===null&&(k=Function.prototype);var D=Object.getOwnPropertyDescriptor(k,R);if(D===void 0){var U=Object.getPrototypeOf(k);return U===null?void 0:M(U,R,z)}else{if("value"in D)return D.value;var V=D.get;return V===void 0?void 0:V.call(z)}},l=i(0),p=x(l),g=i(27);function x(M){return M&&M.__esModule?M:{default:M}}function y(M,k){if(!(M instanceof k))throw new TypeError("Cannot call a class as a function")}function _(M,k){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:M}function T(M,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);M.prototype=Object.create(k&&k.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(M,k):M.__proto__=k)}var P=["alt","height","width"],A=function(M){T(k,M);function k(){return y(this,k),_(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"format",value:function(z,D){P.indexOf(z)>-1?D?this.domNode.setAttribute(z,D):this.domNode.removeAttribute(z):u(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,z,D)}}],[{key:"create",value:function(z){var D=u(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,z);return typeof z=="string"&&D.setAttribute("src",this.sanitize(z)),D}},{key:"formats",value:function(z){return P.reduce(function(D,U){return z.hasAttribute(U)&&(D[U]=z.getAttribute(U)),D},{})}},{key:"match",value:function(z){return/\.(jpe?g|gif|png)$/.test(z)||/^data:image\/.+;base64/.test(z)}},{key:"sanitize",value:function(z){return(0,g.sanitize)(z,["http","https","data"])?z:"//:0"}},{key:"value",value:function(z){return z.getAttribute("src")}}]),k}(p.default.Embed);A.blotName="image",A.tagName="IMG",r.default=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function M(k,R){for(var z=0;z<R.length;z++){var D=R[z];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,R,z){return R&&M(k.prototype,R),z&&M(k,z),k}}(),u=function M(k,R,z){k===null&&(k=Function.prototype);var D=Object.getOwnPropertyDescriptor(k,R);if(D===void 0){var U=Object.getPrototypeOf(k);return U===null?void 0:M(U,R,z)}else{if("value"in D)return D.value;var V=D.get;return V===void 0?void 0:V.call(z)}},l=i(4),p=i(27),g=x(p);function x(M){return M&&M.__esModule?M:{default:M}}function y(M,k){if(!(M instanceof k))throw new TypeError("Cannot call a class as a function")}function _(M,k){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:M}function T(M,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);M.prototype=Object.create(k&&k.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(M,k):M.__proto__=k)}var P=["height","width"],A=function(M){T(k,M);function k(){return y(this,k),_(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"format",value:function(z,D){P.indexOf(z)>-1?D?this.domNode.setAttribute(z,D):this.domNode.removeAttribute(z):u(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,z,D)}}],[{key:"create",value:function(z){var D=u(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,z);return D.setAttribute("frameborder","0"),D.setAttribute("allowfullscreen",!0),D.setAttribute("src",this.sanitize(z)),D}},{key:"formats",value:function(z){return P.reduce(function(D,U){return z.hasAttribute(U)&&(D[U]=z.getAttribute(U)),D},{})}},{key:"sanitize",value:function(z){return g.default.sanitize(z)}},{key:"value",value:function(z){return z.getAttribute("src")}}]),k}(l.BlockEmbed);A.blotName="video",A.className="ql-video",A.tagName="IFRAME",r.default=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var o=function(){function z(D,U){for(var V=0;V<U.length;V++){var G=U[V];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(D,G.key,G)}}return function(D,U,V){return U&&z(D.prototype,U),V&&z(D,V),D}}(),u=function z(D,U,V){D===null&&(D=Function.prototype);var G=Object.getOwnPropertyDescriptor(D,U);if(G===void 0){var H=Object.getPrototypeOf(D);return H===null?void 0:z(H,U,V)}else{if("value"in G)return G.value;var J=G.get;return J===void 0?void 0:J.call(V)}},l=i(35),p=T(l),g=i(5),x=T(g),y=i(9),_=T(y);function T(z){return z&&z.__esModule?z:{default:z}}function P(z,D){if(!(z instanceof D))throw new TypeError("Cannot call a class as a function")}function A(z,D){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:z}function M(z,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);z.prototype=Object.create(D&&D.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(z,D):z.__proto__=D)}var k=function(z){M(D,z);function D(){return P(this,D),A(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return o(D,null,[{key:"create",value:function(V){var G=u(D.__proto__||Object.getPrototypeOf(D),"create",this).call(this,V);return typeof V=="string"&&(window.katex.render(V,G,{throwOnError:!1,errorColor:"#f00"}),G.setAttribute("data-value",V)),G}},{key:"value",value:function(V){return V.getAttribute("data-value")}}]),D}(p.default);k.blotName="formula",k.className="ql-formula",k.tagName="SPAN";var R=function(z){M(D,z),o(D,null,[{key:"register",value:function(){x.default.register(k,!0)}}]);function D(){P(this,D);var U=A(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return U}return D}(_.default);r.FormulaBlot=k,r.default=R},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var o=function(){function V(G,H){for(var J=0;J<H.length;J++){var Y=H[J];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(G,Y.key,Y)}}return function(G,H,J){return H&&V(G.prototype,H),J&&V(G,J),G}}(),u=function V(G,H,J){G===null&&(G=Function.prototype);var Y=Object.getOwnPropertyDescriptor(G,H);if(Y===void 0){var X=Object.getPrototypeOf(G);return X===null?void 0:V(X,H,J)}else{if("value"in Y)return Y.value;var ee=Y.get;return ee===void 0?void 0:ee.call(J)}},l=i(0),p=A(l),g=i(5),x=A(g),y=i(9),_=A(y),T=i(13),P=A(T);function A(V){return V&&V.__esModule?V:{default:V}}function M(V,G){if(!(V instanceof G))throw new TypeError("Cannot call a class as a function")}function k(V,G){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:V}function R(V,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);V.prototype=Object.create(G&&G.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(V,G):V.__proto__=G)}var z=function(V){R(G,V);function G(){return M(this,G),k(this,(G.__proto__||Object.getPrototypeOf(G)).apply(this,arguments))}return o(G,[{key:"replaceWith",value:function(J){this.domNode.textContent=this.domNode.textContent,this.attach(),u(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"replaceWith",this).call(this,J)}},{key:"highlight",value:function(J){var Y=this.domNode.textContent;this.cachedText!==Y&&((Y.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=J(Y),this.domNode.normalize(),this.attach()),this.cachedText=Y)}}]),G}(P.default);z.className="ql-syntax";var D=new p.default.Attributor.Class("token","hljs",{scope:p.default.Scope.INLINE}),U=function(V){R(G,V),o(G,null,[{key:"register",value:function(){x.default.register(D,!0),x.default.register(z,!0)}}]);function G(H,J){M(this,G);var Y=k(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,H,J));if(typeof Y.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var X=null;return Y.quill.on(x.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(X),X=setTimeout(function(){Y.highlight(),X=null},Y.options.interval)}),Y.highlight(),Y}return o(G,[{key:"highlight",value:function(){var J=this;if(!this.quill.selection.composing){this.quill.update(x.default.sources.USER);var Y=this.quill.getSelection();this.quill.scroll.descendants(z).forEach(function(X){X.highlight(J.options.highlight)}),this.quill.update(x.default.sources.SILENT),Y!=null&&this.quill.setSelection(Y,x.default.sources.SILENT)}}}]),G}(_.default);U.DEFAULTS={highlight:function(){return window.hljs==null?null:function(V){var G=window.hljs.highlightAuto(V);return G.value}}(),interval:1e3},r.CodeBlock=z,r.CodeToken=D,r.default=U},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var o=function G(H,J,Y){H===null&&(H=Function.prototype);var X=Object.getOwnPropertyDescriptor(H,J);if(X===void 0){var ee=Object.getPrototypeOf(H);return ee===null?void 0:G(ee,J,Y)}else{if("value"in X)return X.value;var ce=X.get;return ce===void 0?void 0:ce.call(Y)}},u=function(){function G(H,J){for(var Y=0;Y<J.length;Y++){var X=J[Y];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(H,X.key,X)}}return function(H,J,Y){return J&&G(H.prototype,J),Y&&G(H,Y),H}}(),l=i(3),p=M(l),g=i(8),x=M(g),y=i(43),_=M(y),T=i(15),P=i(41),A=M(P);function M(G){return G&&G.__esModule?G:{default:G}}function k(G,H){if(!(G instanceof H))throw new TypeError("Cannot call a class as a function")}function R(G,H){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:G}function z(G,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);G.prototype=Object.create(H&&H.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(G,H):G.__proto__=H)}var D=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],U=function(G){z(H,G);function H(J,Y){k(this,H),Y.modules.toolbar!=null&&Y.modules.toolbar.container==null&&(Y.modules.toolbar.container=D);var X=R(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,J,Y));return X.quill.container.classList.add("ql-bubble"),X}return u(H,[{key:"extendToolbar",value:function(Y){this.tooltip=new V(this.quill,this.options.bounds),this.tooltip.root.appendChild(Y.container),this.buildButtons([].slice.call(Y.container.querySelectorAll("button")),A.default),this.buildPickers([].slice.call(Y.container.querySelectorAll("select")),A.default)}}]),H}(_.default);U.DEFAULTS=(0,p.default)(!0,{},_.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(H){H?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var V=function(G){z(H,G);function H(J,Y){k(this,H);var X=R(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,J,Y));return X.quill.on(x.default.events.EDITOR_CHANGE,function(ee,ce,oe,we){if(ee===x.default.events.SELECTION_CHANGE)if(ce!=null&&ce.length>0&&we===x.default.sources.USER){X.show(),X.root.style.left="0px",X.root.style.width="",X.root.style.width=X.root.offsetWidth+"px";var Ne=X.quill.getLines(ce.index,ce.length);if(Ne.length===1)X.position(X.quill.getBounds(ce));else{var Be=Ne[Ne.length-1],De=X.quill.getIndex(Be),Ae=Math.min(Be.length()-1,ce.index+ce.length-De),ve=X.quill.getBounds(new T.Range(De,Ae));X.position(ve)}}else document.activeElement!==X.textbox&&X.quill.hasFocus()&&X.hide()}),X}return u(H,[{key:"listen",value:function(){var Y=this;o(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){Y.root.classList.remove("ql-editing")}),this.quill.on(x.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!Y.root.classList.contains("ql-hidden")){var X=Y.quill.getSelection();X!=null&&Y.position(Y.quill.getBounds(X))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(Y){var X=o(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"position",this).call(this,Y),ee=this.root.querySelector(".ql-tooltip-arrow");if(ee.style.marginLeft="",X===0)return X;ee.style.marginLeft=-1*X-ee.offsetWidth/2+"px"}}]),H}(y.BaseTooltip);V.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=V,r.default=U},function(n,r,i){n.exports=i(63)}]).default})})(g8);var Lme=g8.exports,Ame=Er&&Er.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),SE=Er&&Er.__assign||function(){return SE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},SE.apply(this,arguments)},Ome=Er&&Er.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],u=0,l=o.length;u<l;u++,i++)r[i]=o[u];return r},iT=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Oh=iT(Ue),kme=iT(GE),y0=iT(Pme),T5=iT(Lme),Rme=function(e){Ame(t,e);function t(n){var r=e.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(o,u,l,p){var g,x,y,_;o==="text-change"?(x=(g=r).onEditorChangeText)===null||x===void 0||x.call(g,r.editor.root.innerHTML,u,p,r.unprivilegedEditor):o==="selection-change"&&((_=(y=r).onEditorChangeSelection)===null||_===void 0||_.call(y,u,p,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i??"",r}return t.prototype.validateProps=function(n){var r;if(Oh.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Oh.default.Children.count(n.children)){var i=Oh.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(n,r){var i=this,o;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var u=this.getEditorContents(),l=(o=n.value,o??"");this.isEqualValue(l,u)||this.setEditorContents(this.editor,l)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),Ome(this.cleanProps,this.dirtyProps).some(function(p){return!y0.default(n[p],i.props[p])})},t.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!y0.default(n[i],r.props[i])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var o=this.editor.getContents(),u=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:u},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var l=this.regenerationSnapshot,o=l.delta,p=l.selection;delete this.regenerationSnapshot,this.instantiateEditor();var g=this.editor;g.setContents(o),C5(function(){return i.setEditorSelection(g,p)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(n,r){var i=new T5.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},t.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(n){return n&&n.ops},t.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?y0.default(n.ops,r.ops):y0.default(n,r)},t.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var o=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),C5(function(){return i.setEditorSelection(n,o)})},t.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},t.prototype.setEditorTabIndex=function(n,r){var i,o;!((o=(i=n)===null||i===void 0?void 0:i.scroll)===null||o===void 0)&&o.domNode&&(n.scroll.domNode.tabIndex=r)},t.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},t.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=kme.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},t.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,o=r.preserveWhitespace,u=this.state.generation,l={key:u,ref:function(p){n.editingArea=p}};return Oh.default.Children.count(i)?Oh.default.cloneElement(Oh.default.Children.only(i),l):o?Oh.default.createElement("pre",SE({},l)):Oh.default.createElement("div",SE({},l))},t.prototype.render=function(){var n;return Oh.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(n,r,i,o){var u,l;if(this.editor){var p=this.isDelta(this.value)?o.getContents():o.getHTML();p!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=p,(l=(u=this.props).onChange)===null||l===void 0||l.call(u,n,r,i,o))}},t.prototype.onEditorChangeSelection=function(n,r,i){var o,u,l,p,g,x;if(this.editor){var y=this.getEditorSelection(),_=!y&&n,T=y&&!n;y0.default(n,y)||(this.selection=n,(u=(o=this.props).onChangeSelection)===null||u===void 0||u.call(o,n,r,i),_?(p=(l=this.props).onFocus)===null||p===void 0||p.call(l,n,r,i):T&&((x=(g=this.props).onBlur)===null||x===void 0||x.call(g,y,r,i)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=T5.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(Oh.default.Component);function C5(e){Promise.resolve().then(e)}var Mme=Rme;const Nme=bd(Mme);function Dme({handleChange:e}){return ae.jsx(Nme,{className:"description-editor",theme:"snow",onChange:e})}function y8({setValue:e,widgetConfig:t,buttonText:n="Upload"}){const r=Ue.useRef(),i=Ue.useRef();return Ue.useEffect(()=>{var o;r.current=window.cloudinary,i.current=(o=r.current)==null?void 0:o.createUploadWidget(t,function(u,l){!u&&l.event==="success"&&e(l.info.secure_url)})},[]),ae.jsx(ae.Fragment,{children:ae.jsx("button",{type:"button",className:"upload-button",onClick:()=>i.current.open(),children:n})})}function _8(){function e(){window.open("http://localhost:8080/api/auth/google","_target")}return ae.jsx(ae.Fragment,{children:ae.jsx("button",{onClick:e,children:"Continue with Google"})})}function zme({setIsDialogOpen:e}){const[t,n]=Ue.useState(""),[r,i]=Ue.useState(!1);async function o(){var l;if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t))return An.error("Email is not valid",{autoClose:2e3});try{i(!0);const p=await lr.post("http://localhost:8080/api/auth/forgot-password",{email:t}),{message:g}=p.data;An.success(g,{autoClose:2e3}),e(!1)}catch(p){const{message:g}=((l=p.response)==null?void 0:l.data)||{message:"Something went wrong, Please check your connection!"};An.error(g,{autoClose:2e3})}finally{i(!1)}}return ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"email",children:"Email"}),ae.jsx("input",{type:"email",id:"email",value:t,placeholder:"Enter your email",onChange:u=>n(u.target.value)}),ae.jsx("button",{onClick:o,disabled:r,children:"Confirm"}),ae.jsx("button",{onClick:()=>e(!1),children:"Cancel"})]})}function Fme(){const[e,t]=Ue.useState(!1),[n,r]=Ue.useState(null),[i,o]=Ue.useState(!1),u=tu(),{userAuth:l}=Ue.useContext(Yc),p=nm(),{errors:g,touched:x,handleChange:y,handleBlur:_,handleSubmit:T,values:P,isSubmitting:A,setSubmitting:M}=xx({initialValues:xX,onSubmit:V=>{k(V)},validationSchema:Vte});async function k(V){var G,H,J;if(V.type==="buy"&&(V.deposit=null),!n)return An.error("Please set the address",{autoClose:2e3}),M(!1);try{const Y=await lr.post("http://localhost:8080/api/posts",{...V,...n},{withCredentials:!0});p.invalidateQueries({queryKey:[(G=l.userInfo)==null?void 0:G.username,"createdPost"]}),u(`/list/${Y.data.postID}`)}catch(Y){An.error(((J=(H=Y.response)==null?void 0:H.data)==null?void 0:J.message)||"Something went wrong, Please check your connection!",{autoClose:2e3})}finally{M(!1)}}async function R(V){t(!1),M(!0);const{lng:G,lat:H}=V.getLngLat();try{const J=await cX(G,H);r(J),o(!0)}catch(J){An.error(`${J.message} is caused please select location again`,{autoClose:2e3})}finally{M(!1)}}function z(V){P.desc=V}function D(V){n.address!==""&&o(!1)}function U(V){P.images.push(V)}return ae.jsxs("div",{className:"addPostPage-container",children:[A&&ae.jsx(MA,{}),ae.jsxs("form",{onSubmit:V=>{V.preventDefault(),T(V)},className:"add-post-form",children:[ae.jsx("div",{className:"all-textField-container",children:vX.map((V,G)=>ae.jsxs("div",{className:"addPost-inputField",children:[ae.jsx("label",{htmlFor:V.id,children:V.labelText}),ae.jsx("input",{name:V.name,onChange:y,onBlur:_,type:V.type,id:V.id}),x[V.name]&&g[V.name]&&ae.jsx("p",{className:"addPost-error",children:g[V.name]})]},G))}),ae.jsxs("div",{className:"addPost-editor",children:[ae.jsx("label",{children:"Description"}),ae.jsx(Dme,{handleChange:z}),g.desc&&x.desc&&ae.jsx("p",{className:"addPost-error",children:g.desc})]}),ae.jsxs("div",{className:"select-container",children:[ae.jsxs("div",{className:"addPost-select",children:[ae.jsx(m0,{optionValues:fA,handleChange:y,handleBlur:_,selectId:"type",selectName:"type",labelText:"Type",defaultOption:"Please select type"}),g.type&&x.type&&ae.jsx("p",{className:"addPost-error",children:g.type})]}),ae.jsxs("div",{className:"addPost-select",children:[ae.jsx(m0,{optionValues:VB,handleChange:y,handleBlur:_,selectId:"property",selectName:"property",labelText:"Property",defaultOption:"Please select property type"}),g.property&&x.property&&ae.jsx("p",{className:"addPost-error",children:g.property})]}),ae.jsx("div",{className:"addPost-select",children:ae.jsx(m0,{optionValues:hX,selectId:"petAllowance",handleChange:y,handleBlur:_,selectName:"petAllowance",labelText:"Pet Allowance",defaultOption:"Please select pet allowance"})}),ae.jsx("div",{className:"addPost-select",children:ae.jsx(m0,{optionValues:fX,selectId:"utilities",handleChange:y,handleBlur:_,selectName:"utilities",labelText:"Utilities Policy",defaultOption:"Please select utilities policy"})}),P.type!=="buy"&&ae.jsx("div",{className:"addPost-select",children:ae.jsx(m0,{optionValues:dX,selectId:"deposit",handleChange:y,handleBlur:_,selectName:"deposit",labelText:"Deposit Policy",defaultOption:"Please select deposit policy"})})]}),i&&ae.jsx("div",{className:"dialog-container",children:ae.jsxs("div",{className:"dialog",children:[ae.jsx("p",{children:"Success! Your address has been fetched successfullly, If you notice any inaccuracies please do the required modifications"}),ae.jsxs("div",{className:"textarea-container",children:[ae.jsx("textarea",{defaultValue:n==null?void 0:n.address,onChange:V=>r({...n,address:V.target.value})}),!(n!=null&&n.address)&&ae.jsx("p",{children:"Address is a required field"})]}),ae.jsx("button",{onClick:D,children:"Save"})]})}),ae.jsxs("div",{className:"button-container",children:[ae.jsx(y8,{widgetConfig:{cloudName:"dpslrt6y5",uploadPreset:"yff0sfms",multiple:!0},buttonText:"Upload Images",setValue:U}),ae.jsx("button",{type:"button",onClick:()=>t(!0),className:"addPostPage-button",children:"Set Address"}),e&&ae.jsx(Jle,{handleDone:R}),ae.jsx("button",{type:"submit",className:"addPostPage-button",children:"Add Post"})]})]}),ae.jsx("div",{className:"right-addPost-section",children:ae.jsx("img",{src:"/bg.png",alt:"house-image"})})]})}function Bme(){return ae.jsxs("div",{className:"hero-section",children:[ae.jsxs("div",{className:"left-hero-section",children:[ae.jsxs("div",{className:"text-wrapper",children:[ae.jsx("h1",{children:"Find Real Estate & Get Your Dream Place"}),ae.jsx("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Nobis veniam pariatur praesentium error natus temporibus deserunt eaque explicabo aspernatur quod obcaecati incidunt impedit voluptate sunt, tenetur dolorum fugit aut tempora!"})]}),ae.jsx(eue,{}),ae.jsxs("div",{className:"boxes",children:[ae.jsxs("div",{className:"box",children:[ae.jsx("h1",{children:"16+"}),ae.jsx("span",{children:"Years of Experience"})]}),ae.jsxs("div",{className:"box",children:[ae.jsx("h1",{children:"200"}),ae.jsx("span",{children:"Awards Gained"})]}),ae.jsxs("div",{className:"box",children:[ae.jsx("h1",{children:"1200+"}),ae.jsx("span",{children:"Property Ready"})]})]})]}),ae.jsx("div",{className:"right-hero-section",children:ae.jsx("img",{src:"/bg.png",alt:"bg-image"})})]})}function jme(){const[e,t]=CF(),[n,r]=Ue.useState(Object.fromEntries(e.entries())),[i,o]=Ue.useState(),{isPending:u,error:l,data:p,isFetching:g}=yx({queryKey:["posts"],queryFn:async()=>{const y=OA(n);return(await lr.get("http://localhost:8080/api/posts"+y)).data},staleTime:0});function x(y){const _=y.latitude,T=y.longitude;i.flyTo([_,T],14,{duration:3}),setTimeout(()=>{Wf.popup({offset:[0,-8]}).setLatLng([_,T]).setContent(JI(y)).openOn(i)},3e3)}return u?ae.jsx(RA,{}):l?ae.jsx("div",{children:l.message}):ae.jsxs(ae.Fragment,{children:[g&&ae.jsx(MA,{}),ae.jsxs("div",{className:"listPage-container",children:[ae.jsx("div",{className:"listContainer",children:ae.jsxs("div",{className:"wrapper",children:[ae.jsx(gne,{list:p,filterParams:n,setSearchParams:t,setFilterParams:r}),p.length==0&&ae.jsxs("div",{className:"no-result-container",children:[ae.jsx("img",{src:"/no-results.png",alt:"no-results"}),ae.jsx("span",{children:"No match found"})]}),p.map(y=>ae.jsx(N6,{handleFlyToHouse:x,...y},y._id))]})}),ae.jsx("div",{className:"mapContainer",children:ae.jsx(B6,{List:p,map:i,setMap:o})})]})]})}function $me(){const[e,t]=Ue.useState(null),[n,r]=Ue.useState(!1),{updateUser:i}=Ue.useContext(Yc),{state:o}=of(),u=tu(),{isSubmitting:l,values:p,handleChange:g,handleBlur:x,handleSubmit:y,touched:_,errors:T}=xx({initialValues:{email:"",password:"",remember_me:!1},onSubmit:async(A,M)=>{await P(A),M.setSubmitting(!1)},validationSchema:jte});async function P(A){var M,k;t(null);try{const R=await lr.post("http://localhost:8080/api/auth/login",A,{withCredentials:!0}),{is_auth:z,userInfo:D,message:U}=R.data;An.success(U,{autoClose:2e3}),i({is_auth:z,userInfo:D}),u(o||"/",{replace:!0})}catch(R){const{message:z,challengeToken:D}=((M=R.response)==null?void 0:M.data)||{message:"Something went wrong, Please check your connection"};if(((k=R.response)==null?void 0:k.status)===401)return An.info(z,{autoClose:2e3}),u("/verify-otp",{state:{challengeToken:D,redirectUrl:o}});t(z)}}return ae.jsxs("div",{className:"login-container",children:[n&&ae.jsx(zme,{setIsDialogOpen:r}),ae.jsxs("div",{className:"left-login-section",children:[ae.jsxs("form",{className:"container",onSubmit:y,children:[yX.map((A,M)=>ae.jsxs("div",{className:"textField-container",children:[ae.jsx("label",{htmlFor:A.id,children:A.labelText}),ae.jsx("input",{id:A.id,onChange:g,onBlur:x,type:A.type,placeholder:A.placeholder||"",name:A.name,value:p[A.name]}),T[A.name]&&_[A.name]&&ae.jsx("p",{className:"error",children:T[A.name]})]},M)),ae.jsx("label",{htmlFor:"remember_me",children:"Remember Me"}),ae.jsx("input",{type:"checkbox",id:"remember_me",checked:p.remember_me,name:"remember_me",onChange:g}),ae.jsx("button",{type:"submit",disabled:l,children:l?"Loading...":"Login"})]}),ae.jsx(_8,{}),ae.jsx("button",{onClick:()=>r(!0),children:"Forgot Password"}),e&&ae.jsx("p",{className:"login-error",children:e})]}),ae.jsx("div",{className:"right-login-section",children:ae.jsx("img",{src:"/bg.png",alt:"house-image"})})]})}function Ume(){var T,P,A,M,k;const{userAuth:e,updateUser:t}=Ue.useContext(Yc),n=tu(),r=nm(),{state:i}=of(),[o,u]=Ue.useState(!1),[l,p]=Ue.useState(i),{data:g,isFetching:x,error:y}=yx({queryKey:["chats"],queryFn:async()=>(await lr.get("http://localhost:8080/api/chats",{withCredentials:!0})).data});async function _(){u(!0);try{await lr.post("http://localhost:8080/api/auth/logout",{},{withCredentials:!0}),t({is_auth:!1,userInfo:null}),r.invalidateQueries(["chats"]),r.invalidateQueries(["chat"]),n("/")}catch{An.error("Something went wrong",{autoClose:1500})}finally{u(!1)}}return ae.jsxs("div",{className:"profile-page-container",children:[ae.jsx("div",{className:"user-related-container",children:ae.jsxs("div",{className:"wrapper",children:[ae.jsxs("div",{className:"user-info",children:[ae.jsxs("div",{className:"top-section",children:[ae.jsx("h2",{children:"User Information"}),ae.jsx(oo,{to:"/update/profile",className:"link-css",children:"Update Profile"})]}),ae.jsxs("div",{className:"bottom-section",children:[ae.jsxs("div",{children:["Avatar: ",ae.jsx("img",{src:(T=e.userInfo)==null?void 0:T.avatar,alt:"avatar-image"})]}),ae.jsxs("div",{children:["Username: ",ae.jsx("span",{children:(P=e.userInfo)==null?void 0:P.username})]}),ae.jsxs("div",{children:["E-mail: ",ae.jsx("span",{children:(A=e.userInfo)==null?void 0:A.email})]}),ae.jsx("button",{onClick:_,children:o?"loading..":"Logout"})]})]}),ae.jsxs("div",{className:"my-list",children:[ae.jsxs("div",{className:"top-section",children:[ae.jsx("h2",{children:"My List"}),ae.jsx(oo,{to:"/add/post",className:"link-css",children:"Create New Post"})]}),ae.jsx(fD,{requestEndpoint:"http://localhost:8080/api/user/post/created",queryKey:[(M=e.userInfo)==null?void 0:M.username,"createdPost"]})]}),ae.jsxs("div",{className:"saved-list",children:[ae.jsx("h2",{className:"saved-list-header",children:"Saved List"}),ae.jsx(fD,{requestEndpoint:"http://localhost:8080/api/user/post/saved",queryKey:[(k=e.userInfo)==null?void 0:k.username,"savedPost"]})]})]})}),ae.jsxs("div",{className:"chat-related-container",children:[ae.jsxs("div",{className:"messages-container",children:[ae.jsx("div",{className:"message-heading",children:ae.jsx("h1",{children:"Messages"})}),x?ae.jsx("span",{children:"Loading"}):g==null?void 0:g.map(R=>ae.jsx(Qle,{setChatId:p,...R},R._id))]}),l&&ae.jsx(mne,{chatId:l,setChatId:p})]})]})}function Vme(){const[e,t]=Ue.useState(),{state:n}=of(),r=tu(),{isSubmitting:i,values:o,handleChange:u,handleBlur:l,handleSubmit:p,touched:g,errors:x}=xx({initialValues:{email:"",username:"",password:""},onSubmit:async(_,T)=>{await y(_),T.setSubmitting(!1)},validationSchema:Bte});async function y(_){var T,P;t();try{const A=await lr.post("http://localhost:8080/api/auth/register",_),{message:M,challengeToken:k}=A.data;An.success(M,{autoClose:2e3}),r("/verify-otp",{state:{redirectUrl:n,challengeToken:k}})}catch(A){t(((P=(T=A.response)==null?void 0:T.data)==null?void 0:P.message)||"Something went wrong, Please check your connection!")}}return ae.jsxs("div",{className:"register-container",children:[ae.jsxs("div",{className:"left-register-section",children:[ae.jsxs("form",{className:"container",onSubmit:p,children:[gX.map((_,T)=>ae.jsxs("div",{className:"textField-container",children:[ae.jsx("label",{htmlFor:_.id,children:_.labelText}),ae.jsx("input",{id:_.id,onChange:u,onBlur:l,type:_.type,placeholder:_.placeholder||"",name:_.name,value:o[_.name]}),x[_.name]&&g[_.name]&&ae.jsx("p",{className:"error",children:x[_.name]})]},T)),ae.jsx("button",{type:"submit",disabled:i,children:i?"Loading...":"Register"})]}),ae.jsx(_8,{}),e&&ae.jsx("p",{className:"register-error",children:e})]}),ae.jsx("div",{className:"right-register-section",children:ae.jsx("img",{src:"/bg.png",alt:"house-image"})})]})}var v8={},wO={},EO={};Object.defineProperty(EO,"__esModule",{value:!0});var I5="html",P5="head",qb="body",qme=/<([a-zA-Z]+[0-9]?)/,L5=/<head[^]*>/i,A5=/<body[^]*>/i,TE=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},qP=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},O5=typeof window=="object"&&window.DOMParser;if(typeof O5=="function"){var Gme=new O5,Hme="text/html";qP=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),Gme.parseFromString(e,Hme)},TE=qP}if(typeof document=="object"&&document.implementation){var Gb=document.implementation.createHTMLDocument();TE=function(e,t){if(t){var n=Gb.documentElement.querySelector(t);return n&&(n.innerHTML=e),Gb}return Gb.documentElement.innerHTML=e,Gb}}var Hb=typeof document=="object"&&document.createElement("template"),GP;Hb&&Hb.content&&(GP=function(e){return Hb.innerHTML=e,Hb.content.childNodes});function Zme(e){var t,n,r=e.match(qme),i=r&&r[1]?r[1].toLowerCase():"";switch(i){case I5:{var o=qP(e);if(!L5.test(e)){var u=o.querySelector(P5);(t=u==null?void 0:u.parentNode)===null||t===void 0||t.removeChild(u)}if(!A5.test(e)){var u=o.querySelector(qb);(n=u==null?void 0:u.parentNode)===null||n===void 0||n.removeChild(u)}return o.querySelectorAll(I5)}case P5:case qb:{var l=TE(e).querySelectorAll(i);return A5.test(e)&&L5.test(e)?l[0].parentNode.childNodes:l}default:{if(GP)return GP(e);var u=TE(e,qb).querySelector(qb);return u.childNodes}}}EO.default=Zme;var J_={},SO={},TO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(r){return r.type===t.Tag||r.type===t.Script||r.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(TO);var dr={},cm=Er&&Er.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),K0=Er&&Er.__assign||function(){return K0=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},K0.apply(this,arguments)};Object.defineProperty(dr,"__esModule",{value:!0});dr.cloneNode=dr.hasChildren=dr.isDocument=dr.isDirective=dr.isComment=dr.isText=dr.isCDATA=dr.isTag=dr.Element=dr.Document=dr.CDATA=dr.NodeWithChildren=dr.ProcessingInstruction=dr.Comment=dr.Text=dr.DataNode=dr.Node=void 0;var hl=TO,CO=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),IO(this,t)},e}();dr.Node=CO;var oT=function(e){cm(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(CO);dr.DataNode=oT;var x8=function(e){cm(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=hl.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(oT);dr.Text=x8;var b8=function(e){cm(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=hl.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(oT);dr.Comment=b8;var w8=function(e){cm(t,e);function t(n,r){var i=e.call(this,r)||this;return i.name=n,i.type=hl.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(oT);dr.ProcessingInstruction=w8;var sT=function(e){cm(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(CO);dr.NodeWithChildren=sT;var E8=function(e){cm(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=hl.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(sT);dr.CDATA=E8;var S8=function(e){cm(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=hl.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(sT);dr.Document=S8;var T8=function(e){cm(t,e);function t(n,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=n==="script"?hl.ElementType.Script:n==="style"?hl.ElementType.Style:hl.ElementType.Tag);var u=e.call(this,i)||this;return u.name=n,u.attribs=r,u.type=o,u}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var i,o;return{name:r,value:n.attribs[r],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[r],prefix:(o=n["x-attribsPrefix"])===null||o===void 0?void 0:o[r]}})},enumerable:!1,configurable:!0}),t}(sT);dr.Element=T8;function C8(e){return(0,hl.isTag)(e)}dr.isTag=C8;function I8(e){return e.type===hl.ElementType.CDATA}dr.isCDATA=I8;function P8(e){return e.type===hl.ElementType.Text}dr.isText=P8;function L8(e){return e.type===hl.ElementType.Comment}dr.isComment=L8;function A8(e){return e.type===hl.ElementType.Directive}dr.isDirective=A8;function O8(e){return e.type===hl.ElementType.Root}dr.isDocument=O8;function Wme(e){return Object.prototype.hasOwnProperty.call(e,"children")}dr.hasChildren=Wme;function IO(e,t){t===void 0&&(t=!1);var n;if(P8(e))n=new x8(e.data);else if(L8(e))n=new b8(e.data);else if(C8(e)){var r=t?sC(e.children):[],i=new T8(e.name,K0({},e.attribs),r);r.forEach(function(p){return p.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=K0({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=K0({},e["x-attribsPrefix"])),n=i}else if(I8(e)){var r=t?sC(e.children):[],o=new E8(r);r.forEach(function(g){return g.parent=o}),n=o}else if(O8(e)){var r=t?sC(e.children):[],u=new S8(r);r.forEach(function(g){return g.parent=u}),e["x-mode"]&&(u["x-mode"]=e["x-mode"]),n=u}else if(A8(e)){var l=new w8(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}dr.cloneNode=IO;function sC(e){for(var t=e.map(function(r){return IO(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=Er&&Er.__createBinding||(Object.create?function(l,p,g,x){x===void 0&&(x=g);var y=Object.getOwnPropertyDescriptor(p,g);(!y||("get"in y?!p.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return p[g]}}),Object.defineProperty(l,x,y)}:function(l,p,g,x){x===void 0&&(x=g),l[x]=p[g]}),n=Er&&Er.__exportStar||function(l,p){for(var g in l)g!=="default"&&!Object.prototype.hasOwnProperty.call(p,g)&&t(p,l,g)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=TO,i=dr;n(dr,e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},u=function(){function l(p,g,x){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof g=="function"&&(x=g,g=o),typeof p=="object"&&(g=p,p=void 0),this.callback=p??null,this.options=g??o,this.elementCB=x??null}return l.prototype.onparserinit=function(p){this.parser=p},l.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(p){this.handleCallback(p)},l.prototype.onclosetag=function(){this.lastNode=null;var p=this.tagStack.pop();this.options.withEndIndices&&(p.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(p)},l.prototype.onopentag=function(p,g){var x=this.options.xmlMode?r.ElementType.Tag:void 0,y=new i.Element(p,g,void 0,x);this.addNode(y),this.tagStack.push(y)},l.prototype.ontext=function(p){var g=this.lastNode;if(g&&g.type===r.ElementType.Text)g.data+=p,this.options.withEndIndices&&(g.endIndex=this.parser.endIndex);else{var x=new i.Text(p);this.addNode(x),this.lastNode=x}},l.prototype.oncomment=function(p){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=p;return}var g=new i.Comment(p);this.addNode(g),this.lastNode=g},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var p=new i.Text(""),g=new i.CDATA([p]);this.addNode(g),p.parent=g,this.lastNode=p},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(p,g){var x=new i.ProcessingInstruction(p,g);this.addNode(x)},l.prototype.handleCallback=function(p){if(typeof this.callback=="function")this.callback(p,this.dom);else if(p)throw p},l.prototype.addNode=function(p){var g=this.tagStack[this.tagStack.length-1],x=g.children[g.children.length-1];this.options.withStartIndices&&(p.startIndex=this.parser.startIndex),this.options.withEndIndices&&(p.endIndex=this.parser.endIndex),g.children.push(p),x&&(p.prev=x,x.next=p),p.parent=g,this.lastNode=null},l}();e.DomHandler=u,e.default=u})(SO);var k8={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,n){return t[n.toLowerCase()]=n,t},{})})(k8);Object.defineProperty(J_,"__esModule",{value:!0});J_.formatDOM=J_.formatAttributes=void 0;var Zb=SO,Kme=k8;function Xme(e){return Kme.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function R8(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}J_.formatAttributes=R8;function Yme(e){e=e.toLowerCase();var t=Xme(e);return t||e}function M8(e,t,n){t===void 0&&(t=null);for(var r=[],i,o=0,u=e.length;o<u;o++){var l=e[o];switch(l.nodeType){case 1:{var p=Yme(l.nodeName);i=new Zb.Element(p,R8(l.attributes)),i.children=M8(p==="template"?l.content.childNodes:l.childNodes,i);break}case 3:i=new Zb.Text(l.nodeValue);break;case 8:i=new Zb.Comment(l.nodeValue);break;default:continue}var g=r[o-1]||null;g&&(g.next=i),i.parent=t,i.prev=g,i.next=null,r.push(i)}return n&&(i=new Zb.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),i.next=r[0]||null,i.parent=t,r.unshift(i),r[1]&&(r[1].prev=r[0])),r}J_.formatDOM=M8;var Jme=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wO,"__esModule",{value:!0});var Qme=Jme(EO),ege=J_,tge=/<(![a-zA-Z\s]+)>/;function nge(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(tge),n=t?t[1]:void 0;return(0,ege.formatDOM)((0,Qme.default)(e),null,n)}wO.default=nge;var aT={},eh={},lT={},rge=0;lT.SAME=rge;var ige=1;lT.CAMELCASE=ige;lT.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const N8=0,hm=1,uT=2,cT=3,PO=4,D8=5,z8=6;function oge(e){return qs.hasOwnProperty(e)?qs[e]:null}function ja(e,t,n,r,i,o,u){this.acceptsBooleans=t===uT||t===cT||t===PO,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}const qs={},sge=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];sge.forEach(e=>{qs[e]=new ja(e,N8,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{qs[e]=new ja(e,hm,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{qs[e]=new ja(e,uT,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{qs[e]=new ja(e,uT,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{qs[e]=new ja(e,cT,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{qs[e]=new ja(e,cT,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{qs[e]=new ja(e,PO,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{qs[e]=new ja(e,z8,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{qs[e]=new ja(e,D8,!1,e.toLowerCase(),null,!1,!1)});const LO=/[\-\:]([a-z])/g,AO=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(LO,AO);qs[t]=new ja(t,hm,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(LO,AO);qs[t]=new ja(t,hm,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(LO,AO);qs[t]=new ja(t,hm,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{qs[e]=new ja(e,hm,!1,e.toLowerCase(),null,!1,!1)});const age="xlinkHref";qs[age]=new ja("xlinkHref",hm,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{qs[e]=new ja(e,hm,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:lge,SAME:uge,possibleStandardNames:k5}=lT,cge=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",hge=cge+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",fge=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+hge+"]*$")),dge=Object.keys(k5).reduce((e,t)=>{const n=k5[t];return n===uge?e[t]=t:n===lge?e[t.toLowerCase()]=t:e[t]=n,e},{});eh.BOOLEAN=cT;eh.BOOLEANISH_STRING=uT;eh.NUMERIC=D8;eh.OVERLOADED_BOOLEAN=PO;eh.POSITIVE_NUMERIC=z8;eh.RESERVED=N8;eh.STRING=hm;eh.getPropertyInfo=oge;eh.isCustomAttribute=fge;eh.possibleStandardNames=dge;var OO={},kO={},R5=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,pge=/\n/g,mge=/^\s*/,gge=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,yge=/^:\s*/,_ge=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,vge=/^[;\s]*/,xge=/^\s+|\s+$/g,bge=`
`,M5="/",N5="*",Gm="",wge="comment",Ege="declaration",Sge=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(P){var A=P.match(pge);A&&(n+=A.length);var M=P.lastIndexOf(bge);r=~M?P.length-M:r+P.length}function o(){var P={line:n,column:r};return function(A){return A.position=new u(P),g(),A}}function u(P){this.start=P,this.end={line:n,column:r},this.source=t.source}u.prototype.content=e;function l(P){var A=new Error(t.source+":"+n+":"+r+": "+P);if(A.reason=P,A.filename=t.source,A.line=n,A.column=r,A.source=e,!t.silent)throw A}function p(P){var A=P.exec(e);if(A){var M=A[0];return i(M),e=e.slice(M.length),A}}function g(){p(mge)}function x(P){var A;for(P=P||[];A=y();)A!==!1&&P.push(A);return P}function y(){var P=o();if(!(M5!=e.charAt(0)||N5!=e.charAt(1))){for(var A=2;Gm!=e.charAt(A)&&(N5!=e.charAt(A)||M5!=e.charAt(A+1));)++A;if(A+=2,Gm===e.charAt(A-1))return l("End of comment missing");var M=e.slice(2,A-2);return r+=2,i(M),e=e.slice(A),r+=2,P({type:wge,comment:M})}}function _(){var P=o(),A=p(gge);if(A){if(y(),!p(yge))return l("property missing ':'");var M=p(_ge),k=P({type:Ege,property:D5(A[0].replace(R5,Gm)),value:M?D5(M[0].replace(R5,Gm)):Gm});return p(vge),k}}function T(){var P=[];x(P);for(var A;A=_();)A!==!1&&(P.push(A),x(P));return P}return g(),T()};function D5(e){return e?e.replace(xge,Gm):Gm}var Tge=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kO,"__esModule",{value:!0});var Cge=Tge(Sge);function Ige(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Cge.default)(e),i=typeof t=="function";return r.forEach(function(o){if(o.type==="declaration"){var u=o.property,l=o.value;i?t(u,l,o):l&&(n=n||{},n[u]=l)}}),n}kO.default=Ige;var hT={};Object.defineProperty(hT,"__esModule",{value:!0});hT.camelCase=void 0;var Pge=/^--[a-zA-Z0-9-]+$/,Lge=/-([a-z])/g,Age=/^[^-]+$/,Oge=/^-(webkit|moz|ms|o|khtml)-/,kge=/^-(ms)-/,Rge=function(e){return!e||Age.test(e)||Pge.test(e)},Mge=function(e,t){return t.toUpperCase()},z5=function(e,t){return"".concat(t,"-")},Nge=function(e,t){return t===void 0&&(t={}),Rge(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(kge,z5):e=e.replace(Oge,z5),e.replace(Lge,Mge))};hT.camelCase=Nge;var Dge=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},zge=Dge(kO),Fge=hT;function HP(e,t){var n={};return!e||typeof e!="string"||(0,zge.default)(e,function(r,i){r&&i&&(n[(0,Fge.camelCase)(r,t)]=i)}),n}HP.default=HP;var Bge=HP;(function(e){var t=Er&&Er.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var n=Ue,r=t(Bge),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function o(x,y){return x.includes("-")?!i.has(x):!!(y&&typeof y.is=="string")}e.isCustomComponent=o;var u={reactCompat:!0};function l(x,y){if(typeof x=="string"){if(!x.trim()){y.style={};return}try{y.style=(0,r.default)(x,u)}catch{y.style={}}}}e.setStyleProp=l,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var p=function(x){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(x.name)};e.canTextBeChildOfNode=p;var g=function(x){return x};e.returnFirstArg=g})(OO);Object.defineProperty(aT,"__esModule",{value:!0});var O0=eh,F5=OO,jge=["checked","value"],$ge=["input","select","textarea"],Uge={reset:!0,submit:!0};function Vge(e,t){e===void 0&&(e={});var n={},r=!!(e.type&&Uge[e.type]);for(var i in e){var o=e[i];if((0,O0.isCustomAttribute)(i)){n[i]=o;continue}var u=i.toLowerCase(),l=B5(u);if(l){var p=(0,O0.getPropertyInfo)(l);switch(jge.includes(l)&&$ge.includes(t)&&!r&&(l=B5("default"+u)),n[l]=o,p&&p.type){case O0.BOOLEAN:n[l]=!0;break;case O0.OVERLOADED_BOOLEAN:o===""&&(n[l]=!0);break}continue}F5.PRESERVE_CUSTOM_ATTRIBUTES&&(n[i]=o)}return(0,F5.setStyleProp)(e.style,n),n}aT.default=Vge;function B5(e){return O0.possibleStandardNames[e]}var RO={},qge=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(RO,"__esModule",{value:!0});var aC=Ue,Gge=qge(aT),X0=OO,Hge={cloneElement:aC.cloneElement,createElement:aC.createElement,isValidElement:aC.isValidElement};function F8(e,t){t===void 0&&(t={});for(var n=[],r=typeof t.replace=="function",i=t.transform||X0.returnFirstArg,o=t.library||Hge,u=o.cloneElement,l=o.createElement,p=o.isValidElement,g=e.length,x=0;x<g;x++){var y=e[x];if(r){var _=t.replace(y,x);if(p(_)){g>1&&(_=u(_,{key:_.key||x})),n.push(i(_,y,x));continue}}if(y.type==="text"){var T=!y.data.trim().length;if(T&&y.parent&&!(0,X0.canTextBeChildOfNode)(y.parent)||t.trim&&T)continue;n.push(i(y.data,y,x));continue}var P=y,A={};Zge(P)?((0,X0.setStyleProp)(P.attribs.style,P.attribs),A=P.attribs):P.attribs&&(A=(0,Gge.default)(P.attribs,P.name));var M=void 0;switch(y.type){case"script":case"style":y.children[0]&&(A.dangerouslySetInnerHTML={__html:y.children[0].data});break;case"tag":y.name==="textarea"&&y.children[0]?A.defaultValue=y.children[0].data:y.children&&y.children.length&&(M=F8(y.children,t));break;default:continue}g>1&&(A.key=x),n.push(i(l(y.name,A,M),y,x))}return n.length===1?n[0]:n}RO.default=F8;function Zge(e){return X0.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,X0.isCustomComponent)(e.name,e.attribs)}(function(e){var t=Er&&Er.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var n=t(wO);e.htmlToDOM=n.default;var r=t(aT);e.attributesToProps=r.default;var i=t(RO);e.domToReact=i.default;var o=SO;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return o.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return o.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return o.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return o.Text}});var u={lowerCaseAttributeNames:!1};function l(p,g){if(typeof p!="string")throw new TypeError("First argument must be a string");return p?(0,i.default)((0,n.default)(p,(g==null?void 0:g.htmlparser2)||u),g):[]}e.default=l})(v8);const j5=bd(v8),Wge=j5.default||j5;function Kge(){var g,x,y,_;const{id:e}=Xq(),t=nm(),{userAuth:n}=Ue.useContext(Yc),r=tu(),{isPending:i,error:o,data:u}=yx({queryKey:["postDetail",e],queryFn:async()=>(await lr.get(`http://localhost:8080/api/posts/${e}`,{withCredentials:!0})).data});async function l(){var T,P,A,M;if(!n.is_auth)return r("/login");try{const k=await lr.patch("http://localhost:8080/api/user/post/save",{postId:e},{withCredentials:!0});An.success((T=k.data)==null?void 0:T.message,{autoClose:2e3}),t.setQueryData(["postDetail",e],R=>({...R,saved:!R.saved})),t.invalidateQueries([(P=n.userInfo)==null?void 0:P.username,"savedPost"])}catch(k){An.error(((M=(A=k.response)==null?void 0:A.data)==null?void 0:M.message)||"Something went wrong, Please check your connection!",{autoClose:2e3})}}async function p(){var T,P,A;if(!n.is_auth)return r("/login");try{const M=await lr.post("http://localhost:8080/api/chats",{receiverId:u==null?void 0:u.user._id},{withCredentials:!0});r("/profile",{state:(T=M.data)==null?void 0:T.chatId}),t.invalidateQueries(["chats"])}catch(M){An.error(((A=(P=M.response)==null?void 0:P.data)==null?void 0:A.message)||"Something went wrong, Please check your connection!",{autoClose:2e3})}}return i?ae.jsx(kA,{variant:"EDITOR"}):o?ae.jsx("div",{children:(x=(g=o==null?void 0:o.response)==null?void 0:g.data)==null?void 0:x.message}):ae.jsxs("div",{className:"singlePostContainer",children:[ae.jsx("div",{className:"details",children:ae.jsxs("div",{className:"wrapper",children:[ae.jsx("div",{className:"slider",children:ae.jsx(tue,{images:u.images})}),ae.jsxs("div",{className:"overview-details",children:[ae.jsxs("div",{className:"left-section",children:[ae.jsx("h1",{children:u.title}),ae.jsxs("div",{className:"address",children:[ae.jsx("img",{src:"/pin.png",alt:"pin-image"}),ae.jsx("span",{children:u.address})]}),ae.jsxs("p",{className:"price",children:[" ",u.price]})]}),ae.jsxs("div",{className:"right-section",children:[ae.jsx("img",{src:(y=u.user)==null?void 0:y.avatar}),ae.jsx("span",{children:(_=u.user)==null?void 0:_.username})]})]}),ae.jsx("div",{className:"desc",children:Wge(u.postDetail.desc)})]})}),ae.jsxs("div",{className:"features",children:[ae.jsx("h4",{className:"feature-header",children:"General"}),ae.jsxs("div",{className:"generalContainer",children:[ae.jsxs("div",{className:"item-container",children:[ae.jsx("div",{children:ae.jsx("img",{src:"/utility.png",alt:"icon-image"})}),ae.jsxs("div",{className:"right-section",children:[ae.jsx("h4",{children:"Utilities"}),ae.jsx("span",{children:u.postDetail.utilities})]})]}),ae.jsxs("div",{className:"item-container",children:[ae.jsx("div",{children:ae.jsx("img",{src:"/pet.png",alt:"icon-image"})}),ae.jsxs("div",{children:[ae.jsx("h4",{children:"Pet Policy"}),ae.jsx("span",{children:u.postDetail.petAllowance})]})]}),ae.jsxs("div",{className:"item-container",children:[ae.jsx("div",{children:ae.jsx("img",{src:"/fee.png",alt:"icon-image"})}),ae.jsxs("div",{children:[ae.jsx("h4",{children:"Deposit Policy"}),ae.jsx("span",{children:u.postDetail.deposit})]})]})]}),ae.jsx("h4",{className:"feature-header",children:"Room Sizes"}),ae.jsxs("div",{className:"roomSizeContainer",children:[ae.jsxs("div",{className:"rs-item-container",children:[ae.jsx("img",{src:"/size.png",alt:"icon-image"}),ae.jsxs("span",{children:[u.postDetail.size," sqft"]})]}),ae.jsxs("div",{className:"rs-item-container",children:[ae.jsx("img",{src:"/bed.png",alt:"icon-image"}),ae.jsxs("span",{children:[u.bedroom," Bedroom"]})]}),ae.jsxs("div",{className:"rs-item-container",children:[ae.jsx("img",{src:"/bath.png",alt:"icon-image"}),ae.jsxs("span",{children:[u.bathroom," Bathroom"]})]})]}),ae.jsx("h4",{className:"feature-header",children:"Nearby Places"}),ae.jsxs("div",{className:"nearByContainer",children:[ae.jsxs("div",{className:"item-container",children:[ae.jsx("img",{src:"/school.png",alt:"icon-image"}),ae.jsxs("div",{className:"right-section",children:[ae.jsx("h4",{children:"School"}),ae.jsx("span",{children:u.postDetail.school?u.postDetail.school+"m away":"N/A"})]})]}),ae.jsxs("div",{className:"item-container",children:[ae.jsx("img",{src:"/bus.png",alt:"icon-image"}),ae.jsxs("div",{className:"right-section",children:[ae.jsx("h4",{children:"Bus Stop"}),ae.jsx("span",{children:u.postDetail.bus?u.postDetail.bus+"m away":"N/A"})]})]}),ae.jsxs("div",{className:"item-container",children:[ae.jsx("img",{src:"/restaurant.png",alt:"icon-image"}),ae.jsxs("div",{className:"right-section",children:[ae.jsx("h4",{children:"Restraunts"}),ae.jsx("span",{children:u.postDetail.restraunt?u.postDetail.restraunt+"m away":"N/A"})]})]})]}),ae.jsx("h4",{className:"feature-header",children:"Location"}),ae.jsx("div",{className:"locationContainer",children:ae.jsx(B6,{List:[u],geoExtent:[u.latitude,u.longitude]})}),ae.jsxs("div",{className:"bottomSection",children:[ae.jsxs("button",{onClick:p,children:[ae.jsx("img",{src:"/chat.png",alt:"chat"}),"Send a message"]}),ae.jsxs("button",{className:u.isSave?"saved":"",onClick:l,children:[ae.jsx("img",{src:"/save.png"}),u.isSave?"Place saved":"Save the place"]})]})]})]})}function Xge(){var T,P,A;const{userAuth:e,updateUser:t}=Ue.useContext(Yc),[n,r]=Ue.useState((T=e.userInfo)==null?void 0:T.avatar),i=tu(),{isSubmitting:o,values:u,handleChange:l,handleBlur:p,handleSubmit:g,touched:x,errors:y}=xx({initialValues:{username:(P=e.userInfo)==null?void 0:P.username,email:(A=e.userInfo)==null?void 0:A.email},onSubmit:async(M,k)=>{await _(M),k.setSubmitting(!1)},validationSchema:Ute});async function _(M){var k,R,z;try{const D=await lr.patch(`http://localhost:8080/api/user/${(k=e.userInfo)==null?void 0:k.userId}`,{...M,avatar:n},{withCredentials:!0});t({is_auth:!0,userInfo:D.data}),i("/profile")}catch(D){An.error(((z=(R=D.response)==null?void 0:R.data)==null?void 0:z.message)||"Something went wrong, Please check your connection!",{autoClose:2e3})}}return ae.jsxs("div",{className:"update-profilePage-container",children:[ae.jsx("div",{className:"left-section",children:ae.jsxs("form",{className:"container",onSubmit:g,children:[_X.map((M,k)=>ae.jsxs("div",{className:"textField-container",children:[ae.jsx("label",{htmlFor:M.id,children:M.labelText}),ae.jsx("input",{id:M.id,onChange:l,onBlur:p,type:M.type,placeholder:M.placeholder||"",name:M.name,value:u[M.name]}),y[M.name]&&x[M.name]&&ae.jsx("p",{className:"error",children:y[M.name]})]},k)),ae.jsx("button",{type:"submit",disabled:o,children:o?"Loading...":"Update user"})]})}),ae.jsxs("div",{className:"right-section",children:[ae.jsx("div",{className:"avatar-container",children:ae.jsx("img",{src:n,alt:"avatar-image"})}),ae.jsx(y8,{buttonText:"Change Avatar",setValue:r,widgetConfig:{cloudName:"dpslrt6y5",uploadPreset:"yff0sfms",multiple:!1}})]})]})}function Yge(){return ae.jsxs("div",{className:"error-container",children:[ae.jsx("h1",{className:"error-header",children:"404"}),ae.jsx("p",{className:"error-subHeader",children:"Oops! Looks like you're lost."}),ae.jsxs("p",{className:"error-link",children:["Let's get you back ",ae.jsx(oo,{className:"text-blue-500",to:"/",children:"home"}),"."]})]})}function Jge(){const{updateUser:e}=Ue.useContext(Yc),t=tu(),[n,r]=Ue.useState(()=>new Array(6).fill("")),{challengeToken:i,redirectUrl:o}=of().state||{},[u,l]=Ue.useState(i),p=Ue.useRef([]);function g(P,A){const M=P[0]!==void 0?P[0]:"";if(!/^$|^[0-9]+$/.test(M))return;r(n.map((R,z)=>z===A?M:R));const k=A+1;k>=n.length||M!==""&&p.current[k].focus()}function x(P,A,M){A==="ArrowLeft"&&M>0&&p.current[M-1].focus(),A==="ArrowRight"&&M<n.length-1&&p.current[M+1].focus(),A==="Backspace"&&n[M]===""&&M>0&&(P.preventDefault(),p.current[M-1].focus())}async function y(){var A;const P=n.join("");if(P.length<6)return An.error("All otp boxes must be filled",{autoClose:2e3});try{const M=await lr.post("http://localhost:8080/api/auth/verify-otp",{otp:Number(P),challengeToken:u},{withCredentials:!0}),{message:k,is_auth:R,userInfo:z}=M.data;An.success(k,{autoClose:2e3}),e({is_auth:R,userInfo:z}),t(o||"/",{replace:!0})}catch(M){const{message:k,authStep:R}=((A=M.response)==null?void 0:A.data)||{message:"Something went wrong, Please check your connection!"};An.error(k,{autoClose:2e3}),R==="LOGIN_REQUIRED"&&t("/login")}}async function _(){var P;try{const A=await lr.post("http://localhost:8080/api/auth/resend-otp",{challengeToken:u}),{message:M,challengeToken:k}=A==null?void 0:A.data;An.success(M,{autoClose:2e3}),l(k)}catch(A){const{message:M,authStep:k}=(P=A.response)==null?void 0:P.data;An.error(M,{autoClose:2e3}),k==="LOGIN_REQUIRED"&&t("/login")}}function T(P){P===null||p.current.includes(P)||p.current.push(P)}return ae.jsxs("div",{children:[n.map((P,A)=>ae.jsx("input",{value:P,ref:T,onKeyDown:M=>x(M,M.key,A),onChange:M=>g(M.target.value,A)},A)),ae.jsx("button",{onClick:y,children:"Verify Otp"}),ae.jsx("button",{onClick:_,children:"Resend Otp"})]})}function Qge(){const e=tu(),{isSubmitting:t,values:n,handleSubmit:r,handleChange:i,handleBlur:o,touched:u,errors:l}=xx({initialValues:{password:"",confirmPassword:""},onSubmit:async(x,y)=>{await g(x),y.setSubmitting(!1)},validationSchema:$te}),p=new URLSearchParams(window.location.search||"").get("challengeToken");async function g(x){var y;try{const _=await lr.post("http://localhost:8080/api/auth/change-password",{resetChallengeToken:p,password:x.password}),{message:T}=_.data;An.success(T,{autoClose:2e3}),e("/login")}catch(_){const{message:T}=((y=_.response)==null?void 0:y.data)||{message:"Something went wrong, Please check your connection!"};An.error(T,{autoClose:2e3})}}return ae.jsxs("form",{onSubmit:r,children:[ae.jsx("input",{type:"password",id:"password",name:"password",onBlur:o,value:n.password,onChange:i}),u.password&&l.password&&ae.jsx("p",{children:l.password}),ae.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",onBlur:o,value:n.confirmPassword,onChange:i}),u.confirmPassword&&l.confirmPassword&&ae.jsx("p",{children:l.confirmPassword}),ae.jsx("button",{type:"submit",disabled:t,children:t?"Loading...":"Change Password"})]})}function eye(){const{userAuth:e}=Ue.useContext(Yc),t=vG(sI(ae.jsxs(Ya,{path:"/",element:ae.jsx(lX,{}),children:[ae.jsx(Ya,{path:"/",element:ae.jsx(Bme,{})}),ae.jsx(Ya,{path:"/about",element:ae.jsx(uX,{})}),ae.jsx(Ya,{path:"/list",element:ae.jsx(jme,{})}),ae.jsx(Ya,{path:"/list/:id",element:ae.jsx(Kge,{})}),ae.jsx(Ya,{path:"/profile",element:ae.jsx(B2,{children:ae.jsx(Ume,{})})}),ae.jsx(Ya,{path:"/register",element:ae.jsx(Vme,{})}),ae.jsx(Ya,{path:"/login",element:ae.jsx($me,{})}),ae.jsx(Ya,{path:"/verify-otp",element:ae.jsx(Jge,{})}),ae.jsx(Ya,{path:"/reset-password",element:ae.jsx(Qge,{})}),ae.jsx(Ya,{path:"/update/profile",element:ae.jsx(B2,{children:ae.jsx(Xge,{})})}),ae.jsx(Ya,{path:"/add/post",element:ae.jsx(B2,{children:ae.jsx(Fme,{})})}),ae.jsx(Ya,{path:"*",element:ae.jsx(Yge,{})})]})));return e?ae.jsx(ae.Fragment,{children:e.is_auth?ae.jsx(aX,{children:ae.jsx(NM,{router:t})}):ae.jsx(NM,{router:t})}):ae.jsx(MA,{})}const tye=dW({reducer:{unreadNotifications:zW}}),nye=new tK({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}});uC.createRoot(document.getElementById("root")).render(ae.jsxs("div",{children:[ae.jsx(oZ,{}),ae.jsx(sZ,{children:ae.jsx(oK,{client:nye,children:ae.jsx(PZ,{store:tye,children:ae.jsx(eye,{})})})})]}))});export default rye();
